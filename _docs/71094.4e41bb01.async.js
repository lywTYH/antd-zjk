(self.webpackChunkcsces_antd=self.webpackChunkcsces_antd||[]).push([[71094],{62238:function(He,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.default=void 0;var z=function(R,L){var P=R.nodes,N=R.edges,E=[],x={};if(!P)throw new Error("invalid nodes data!");return P&&P.forEach(function(p,y){x[p.id]=y;var g=[];E.push(g)}),N&&N.forEach(function(p){var y=p.source,g=p.target,A=x[y],_=x[g];!A&&A!==0||!_&&_!==0||(E[A][_]=1,L||(E[_][A]=1))}),E},G=z;F.default=G},810369:function(He,F,z){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),Object.defineProperty(F,"GADDIAsync",{enumerable:!0,get:function(){return G.GADDIAsync}}),Object.defineProperty(F,"connectedComponentAsync",{enumerable:!0,get:function(){return G.connectedComponentAsync}}),F.default=void 0,Object.defineProperty(F,"detectAllCyclesAsync",{enumerable:!0,get:function(){return G.detectAllCyclesAsync}}),Object.defineProperty(F,"detectAllDirectedCycleAsync",{enumerable:!0,get:function(){return G.detectAllDirectedCycleAsync}}),Object.defineProperty(F,"detectAllUndirectedCycleAsync",{enumerable:!0,get:function(){return G.detectAllUndirectedCycleAsync}}),Object.defineProperty(F,"detectCycleAsync",{enumerable:!0,get:function(){return G.detectCycleAsync}}),F.detectDirectedCycleAsync=void 0,Object.defineProperty(F,"dijkstraAsync",{enumerable:!0,get:function(){return G.dijkstraAsync}}),Object.defineProperty(F,"findAllPathAsync",{enumerable:!0,get:function(){return G.findAllPathAsync}}),Object.defineProperty(F,"findShortestPathAsync",{enumerable:!0,get:function(){return G.findShortestPathAsync}}),Object.defineProperty(F,"floydWarshallAsync",{enumerable:!0,get:function(){return G.floydWarshallAsync}}),Object.defineProperty(F,"getAdjMatrixAsync",{enumerable:!0,get:function(){return G.getAdjMatrixAsync}}),Object.defineProperty(F,"getDegreeAsync",{enumerable:!0,get:function(){return G.getDegreeAsync}}),Object.defineProperty(F,"getInDegreeAsync",{enumerable:!0,get:function(){return G.getInDegreeAsync}}),Object.defineProperty(F,"getNeighborsAsync",{enumerable:!0,get:function(){return G.getNeighborsAsync}}),Object.defineProperty(F,"getOutDegreeAsync",{enumerable:!0,get:function(){return G.getOutDegreeAsync}}),Object.defineProperty(F,"labelPropagationAsync",{enumerable:!0,get:function(){return G.labelPropagationAsync}}),Object.defineProperty(F,"louvainAsync",{enumerable:!0,get:function(){return G.louvainAsync}}),Object.defineProperty(F,"minimumSpanningTreeAsync",{enumerable:!0,get:function(){return G.minimumSpanningTreeAsync}}),Object.defineProperty(F,"pageRankAsync",{enumerable:!0,get:function(){return G.pageRankAsync}});var G=z(430485),X=G.detectCycleAsync;F.detectDirectedCycleAsync=X;var R={getAdjMatrixAsync:G.getAdjMatrixAsync,connectedComponentAsync:G.connectedComponentAsync,getDegreeAsync:G.getDegreeAsync,getInDegreeAsync:G.getInDegreeAsync,getOutDegreeAsync:G.getOutDegreeAsync,detectCycleAsync:G.detectCycleAsync,detectDirectedCycleAsync:X,detectAllCyclesAsync:G.detectAllCyclesAsync,detectAllDirectedCycleAsync:G.detectAllDirectedCycleAsync,detectAllUndirectedCycleAsync:G.detectAllUndirectedCycleAsync,dijkstraAsync:G.dijkstraAsync,findAllPathAsync:G.findAllPathAsync,findShortestPathAsync:G.findShortestPathAsync,floydWarshallAsync:G.floydWarshallAsync,labelPropagationAsync:G.labelPropagationAsync,louvainAsync:G.louvainAsync,minimumSpanningTreeAsync:G.minimumSpanningTreeAsync,pageRankAsync:G.pageRankAsync,getNeighborsAsync:G.getNeighborsAsync,GADDIAsync:G.GADDIAsync};F.default=R},683764:function(He,F,z){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.default=void 0;var G=R(z(893026)),X=z(770643);function R(E){return E&&E.__esModule?E:{default:E}}function L(E){E===void 0&&(E={});var x=E,p=function(){},y=function(){var g={};return function(A){var _=A.next,S=_;return g[S]?!1:(g[S]=!0,!0)}}();return x.allowTraversal=E.allowTraversal||y,x.enter=E.enter||p,x.leave=E.leave||p,x}var P=function(x,p,y,g){g===void 0&&(g=!0);var A=L(y),_=new G.default,S=x.edges,O=S===void 0?[]:S;_.enqueue(p);for(var B="",m=function(){var tt=_.dequeue();A.enter({current:tt,previous:B}),(0,X.getNeighbors)(tt,O,g?"target":void 0).forEach(function(Y){A.allowTraversal({previous:B,current:tt,next:Y})&&_.enqueue(Y)}),A.leave({current:tt,previous:B}),B=tt};!_.isEmpty();)m()},N=P;F.default=N},759527:function(He,F,z){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.default=L,F.detectStrongConnectComponents=F.detectConnectedComponents=void 0;var G=z(770643),X=function(N){for(var E=N.nodes,x=E===void 0?[]:E,p=N.edges,y=p===void 0?[]:p,g=[],A={},_=[],S=function d(tt){_.push(tt),A[tt.id]=!0;for(var Y=(0,G.getNeighbors)(tt.id,y),V=function(rt){var Q=Y[rt];if(!A[Q]){var it=x.filter(function(ht){return ht.id===Q});it.length>0&&d(it[0])}},$=0;$<Y.length;++$)V($)},O=0;O<x.length;O++){var B=x[O];if(!A[B.id]){S(B);for(var m=[];_.length>0;)m.push(_.pop());g.push(m)}}return g};F.detectConnectedComponents=X;var R=function(N){for(var E=N.nodes,x=E===void 0?[]:E,p=N.edges,y=p===void 0?[]:p,g=[],A={},_={},S={},O=[],B=0,m=function V($){_[$.id]=B,S[$.id]=B,B+=1,g.push($),A[$.id]=!0;for(var q=(0,G.getNeighbors)($.id,y,"target").filter(function(dt){return x.map(function(Ot){return Ot.id}).indexOf(dt)>-1}),rt=function(Ot){var It=q[Ot];if(!_[It]&&_[It]!==0){var Kt=x.filter(function(Ft){return Ft.id===It});Kt.length>0&&V(Kt[0]),S[$.id]=Math.min(S[$.id],S[It])}else A[It]&&(S[$.id]=Math.min(S[$.id],_[It]))},Q=0;Q<q.length;Q++)rt(Q);if(S[$.id]===_[$.id]){for(var it=[];g.length>0;){var ht=g.pop();if(A[ht.id]=!1,it.push(ht),ht===$)break}it.length>0&&O.push(it)}},d=0,tt=x;d<tt.length;d++){var Y=tt[d];!_[Y.id]&&_[Y.id]!==0&&m(Y)}return O};F.detectStrongConnectComponents=R;function L(P,N){return N?R(P):X(P)}},592935:function(He,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.secondReg=F.dateReg=void 0;var z=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/;F.secondReg=z;var G=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/;F.dateReg=G},182556:function(He,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.getOutDegree=F.getInDegree=F.default=void 0;var z=function(P){var N={},E=P.nodes,x=E===void 0?[]:E,p=P.edges,y=p===void 0?[]:p;return x.forEach(function(g){N[g.id]={degree:0,inDegree:0,outDegree:0}}),y.forEach(function(g){N[g.source].degree++,N[g.source].outDegree++,N[g.target].degree++,N[g.target].inDegree++}),N},G=z;F.default=G;var X=function(P,N){var E=z(P);return E[N]?z(P)[N].inDegree:0};F.getInDegree=X;var R=function(P,N){var E=z(P);return E[N]?z(P)[N].outDegree:0};F.getOutDegree=R},994282:function(He,F,z){"use strict";function G(_){"@babel/helpers - typeof";return G=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},G(_)}Object.defineProperty(F,"__esModule",{value:!0}),F.detectAllUndirectedCycle=F.detectAllDirectedCycle=F.detectAllCycles=F.default=void 0;var X=E(z(45891)),R=N(z(759527)),L=z(770643);function P(_){if(typeof WeakMap!="function")return null;var S=new WeakMap,O=new WeakMap;return(P=function(m){return m?O:S})(_)}function N(_,S){if(!S&&_&&_.__esModule)return _;if(_===null||G(_)!=="object"&&typeof _!="function")return{default:_};var O=P(S);if(O&&O.has(_))return O.get(_);var B={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in _)if(d!=="default"&&Object.prototype.hasOwnProperty.call(_,d)){var tt=m?Object.getOwnPropertyDescriptor(_,d):null;tt&&(tt.get||tt.set)?Object.defineProperty(B,d,tt):B[d]=_[d]}return B.default=_,O&&O.set(_,B),B}function E(_){return _&&_.__esModule?_:{default:_}}var x=function(S){var O=null,B=S.nodes,m=B===void 0?[]:B,d={},tt={},Y={},V={};m.forEach(function(rt){tt[rt.id]=rt});for(var $={enter:function(Q){var it=Q.current,ht=Q.previous;if(Y[it]){O={};for(var dt=it,Ot=ht;Ot!==it;)O[dt]=Ot,dt=Ot,Ot=d[Ot];O[dt]=Ot}else Y[it]=it,delete tt[it],d[it]=ht},leave:function(Q){var it=Q.current;V[it]=it,delete Y[it]},allowTraversal:function(Q){var it=Q.next;return O?!1:!V[it]}};Object.keys(tt).length;){var q=Object.keys(tt)[0];(0,X.default)(S,q,$)}return O},p=function(S,O,B){var m,d;B===void 0&&(B=!0);for(var tt=[],Y=(0,R.default)(S,!1),V=0,$=Y;V<$.length;V++){var q=$[V];if(q.length)for(var rt=q[0],Q=rt.id,it=[rt],ht=(m={},m[Q]=rt,m),dt=(d={},d[Q]=new Set,d);it.length>0;)for(var Ot=it.pop(),It=Ot.id,Kt=(0,L.getNeighbors)(It,S.edges),Ft=function(yt){var kt,ee=Kt[yt],$t=S.nodes.find(function(Se){return Se.id===ee});if(ee===It)tt.push((kt={},kt[ee]=Ot,kt));else if(!(ee in dt))ht[ee]=Ot,it.push($t),dt[ee]=new Set([Ot]);else if(!dt[It].has($t)){for(var ge=!0,Pe=[$t,Ot],er=ht[It];dt[ee].size&&!dt[ee].has(er)&&(Pe.push(er),er!==ht[er.id]);)er=ht[er.id];if(Pe.push(er),O&&B?(ge=!1,Pe.findIndex(function(Se){return O.indexOf(Se.id)>-1})>-1&&(ge=!0)):O&&!B&&Pe.findIndex(function(Se){return O.indexOf(Se.id)>-1})>-1&&(ge=!1),ge){for(var Jt={},ae=1;ae<Pe.length;ae+=1)Jt[Pe[ae-1].id]=Pe[ae];Pe.length&&(Jt[Pe[Pe.length-1].id]=Pe[0]),tt.push(Jt)}dt[ee].add(Ot)}},Nt=0;Nt<Kt.length;Nt+=1)Ft(Nt)}return tt};F.detectAllUndirectedCycle=p;var y=function(S,O,B){B===void 0&&(B=!0);for(var m=[],d=new Set,tt=[],Y=[],V={},$={},q=function(er){for(var Jt=[er];Jt.length>0;){var ae=Jt.pop();d.has(ae)&&(d.delete(ae),tt[ae.id].forEach(function(Se){Jt.push(Se)}),tt[ae.id].clear())}},rt=function Pe(er,Jt,ae){var Se=!1;if(O&&B===!1&&O.indexOf(er.id)>-1)return Se;m.push(er),d.add(er);for(var xe=ae[er.id],we=0;we<xe.length;we+=1){var zt=V[xe[we]];if(zt===Jt){for(var Wt={},Ie=1;Ie<m.length;Ie+=1)Wt[m[Ie-1].id]=m[Ie];m.length&&(Wt[m[m.length-1].id]=m[0]),Y.push(Wt),Se=!0}else d.has(zt)||Pe(zt,Jt,ae)&&(Se=!0)}if(Se)q(er);else for(var we=0;we<xe.length;we+=1){var zt=V[xe[we]];tt[zt.id].has(er)||tt[zt.id].add(er)}return m.pop(),Se},Q=S.nodes,it=Q===void 0?[]:Q,ht=0;ht<it.length;ht+=1){var dt=it[ht],Ot=dt.id;$[Ot]=ht,V[ht]=dt}if(O&&B)for(var It=function(er){var Jt=O[er];$[it[er].id]=$[Jt],$[Jt]=0,V[0]=it.find(function(ae){return ae.id===Jt}),V[$[it[er].id]]=it[er]},ht=0;ht<O.length;ht++)It(ht);for(var Kt=function(er){for(var Jt,ae,Se=1/0,xe=0;xe<er.length;xe+=1)for(var we=er[xe],zt=0;zt<we.length;zt++){var Wt=$[we[zt].id];Wt<Se&&(Se=Wt,ae=xe)}for(var Ie=er[ae],Yt=[],xe=0;xe<Ie.length;xe+=1){var ie=Ie[xe];Yt[ie.id]=[];for(var Oe=0,re=(0,L.getNeighbors)(ie.id,S.edges,"target").filter(function(Ct){return Ie.map(function(Nr){return Nr.id}).indexOf(Ct)>-1});Oe<re.length;Oe++){var _e=re[Oe];_e===ie.id&&!(B===!1&&O.indexOf(ie.id)>-1)?Y.push((Jt={},Jt[ie.id]=ie,Jt)):Yt[ie.id].push($[_e])}}return{component:Ie,adjList:Yt,minIdx:Se}},Ft=0;Ft<it.length;){var Nt=it.filter(function(Pe){return $[Pe.id]>=Ft}),st=(0,R.detectStrongConnectComponents)({nodes:Nt,edges:S.edges}).filter(function(Pe){return Pe.length>1});if(st.length===0)break;var yt=Kt(st),kt=yt.minIdx,ee=yt.adjList,$t=yt.component;if($t.length>1){$t.forEach(function(Pe){tt[Pe.id]=new Set});var ge=V[kt];if(O&&B&&O.indexOf(ge.id)===-1)return Y;rt(ge,ge,ee),Ft=kt+1}else break}return Y};F.detectAllDirectedCycle=y;var g=function(S,O,B,m){return m===void 0&&(m=!0),O?y(S,B,m):p(S,B,m)};F.detectAllCycles=g;var A=x;F.default=A},45891:function(He,F,z){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.default=L;var G=z(770643);function X(P){P===void 0&&(P={});var N=P,E=function(){},x=function(){var p={};return function(y){var g=y.next;return p[g]?!1:(p[g]=!0,!0)}}();return N.allowTraversal=P.allowTraversal||x,N.enter=P.enter||E,N.leave=P.leave||E,N}function R(P,N,E,x,p){p===void 0&&(p=!0),x.enter({current:N,previous:E});var y=P.edges,g=y===void 0?[]:y;(0,G.getNeighbors)(N,g,p?"target":void 0).forEach(function(A){x.allowTraversal({previous:E,current:N,next:A})&&R(P,A,N,x,p)}),x.leave({current:N,previous:E})}function L(P,N,E,x){x===void 0&&(x=!0),R(P,N,"",X(E),x)}},878089:function(He,F,z){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.default=void 0;var G=z(197582),X=z(413810),R=z(770643),L=function(p,y,g){for(var A=1/0,_,S=0;S<y.length;S++){var O=y[S].id;!g[O]&&p[O]<=A&&(A=p[O],_=y[S])}return _},P=function(p,y,g,A){var _=p.nodes,S=_===void 0?[]:_,O=p.edges,B=O===void 0?[]:O,m=[],d={},tt={},Y={};S.forEach(function(ht,dt){var Ot=ht.id;m.push(Ot),tt[Ot]=1/0,Ot===y&&(tt[Ot]=0)});for(var V=S.length,$=function(dt){var Ot=L(tt,S,d),It=Ot.id;if(d[It]=!0,tt[It]===1/0)return"continue";var Kt=[];g?Kt=(0,R.getOutEdgesNodeId)(It,B):Kt=(0,R.getEdgesByNodeId)(It,B),Kt.forEach(function(Ft){var Nt=Ft.target,st=Ft.source,yt=Nt===It?st:Nt,kt=A&&Ft[A]?Ft[A]:1;tt[yt]>tt[Ot.id]+kt?(tt[yt]=tt[Ot.id]+kt,Y[yt]=[Ot.id]):tt[yt]===tt[Ot.id]+kt&&Y[yt].push(Ot.id)})},q=0;q<V;q++)$(q);Y[y]=[y];var rt={};for(var Q in tt)tt[Q]!==1/0&&E(y,Q,Y,rt);var it={};for(var Q in rt)it[Q]=rt[Q][0];return{length:tt,path:it,allPath:rt}},N=P;F.default=N;function E(x,p,y,g){if(x===p)return[x];if(g[p])return g[p];for(var A=[],_=0,S=y[p];_<S.length;_++){var O=S[_],B=E(x,O,y,g);if(!B)return;for(var m=0,d=B;m<d.length;m++){var tt=d[m];(0,X.isArray)(tt)?A.push((0,G.__spreadArray)((0,G.__spreadArray)([],tt,!0),[p],!1)):A.push([tt,p])}}return g[p]=A,g[p]}},241727:function(He,F,z){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.findShortestPath=F.findAllPath=void 0;var G=R(z(878089)),X=z(770643);function R(N){return N&&N.__esModule?N:{default:N}}var L=function(E,x,p,y,g){var A=(0,G.default)(E,x,y,g),_=A.length,S=A.path,O=A.allPath;return{length:_[p],path:S[p],allPath:O[p]}};F.findShortestPath=L;var P=function(E,x,p,y){var g;if(x===p)return[[x]];var A=E.edges,_=A===void 0?[]:A,S=[x],O=(g={},g[x]=!0,g),B=[],m=[],d=y?(0,X.getNeighbors)(x,_,"target"):(0,X.getNeighbors)(x,_);for(B.push(d);S.length>0&&B.length>0;){var tt=B[B.length-1];if(tt.length){var Y=tt.shift();Y&&(S.push(Y),O[Y]=!0,d=y?(0,X.getNeighbors)(Y,_,"target"):(0,X.getNeighbors)(Y,_),B.push(d.filter(function(q){return!O[q]})))}else{var V=S.pop();O[V]=!1,B.pop();continue}if(S[S.length-1]===p){var $=S.map(function(rt){return rt});m.push($);var V=S.pop();O[V]=!1,B.pop()}}return m};F.findAllPath=P},975033:function(He,F,z){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.default=void 0;var G=X(z(62238));function X(P){return P&&P.__esModule?P:{default:P}}var R=function(N,E){for(var x=(0,G.default)(N,E),p=[],y=x.length,g=0;g<y;g+=1){p[g]=[];for(var A=0;A<y;A+=1)g===A?p[g][A]=0:x[g][A]===0||!x[g][A]?p[g][A]=1/0:p[g][A]=x[g][A]}for(var _=0;_<y;_+=1)for(var g=0;g<y;g+=1)for(var A=0;A<y;A+=1)p[g][A]>p[g][_]+p[_][A]&&(p[g][A]=p[g][_]+p[_][A]);return p},L=R;F.default=L},821146:function(He,F,z){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.default=void 0;var G=z(413810),X=z(368575),R=function(){function A(_,S,O,B,m){this.fromNode=_,this.toNode=S,this.nodeEdgeNodeLabel={nodeLabel1:O||X.VACANT_NODE_LABEL,edgeLabel:B||X.VACANT_EDGE_LABEL,nodeLabel2:m||X.VACANT_NODE_LABEL}}return A.prototype.equalTo=function(_){return this.fromNode===_.formNode&&this.toNode===_.toNode&&this.nodeEdgeNodeLabel===_.nodeEdgeNodeLabel},A.prototype.notEqualTo=function(_){return!this.equalTo(_)},A}(),L=function(){function A(){this.rmpath=[],this.dfsEdgeList=[]}return A.prototype.equalTo=function(_){var S=this.dfsEdgeList.length,O=_.length;if(S!==O)return!1;for(var B=0;B<S;B++)if(this.dfsEdgeList[B]!==_[B])return!1;return!0},A.prototype.notEqualTo=function(_){return!this.equalTo(_)},A.prototype.pushBack=function(_,S,O,B,m){return this.dfsEdgeList.push(new R(_,S,O,B,m)),this.dfsEdgeList},A.prototype.toGraph=function(_,S){_===void 0&&(_=X.VACANT_GRAPH_ID),S===void 0&&(S=!1);var O=new X.Graph(_,!0,S);return this.dfsEdgeList.forEach(function(B){var m=B.fromNode,d=B.toNode,tt=B.nodeEdgeNodeLabel,Y=tt.nodeLabel1,V=tt.edgeLabel,$=tt.nodeLabel2;Y!==X.VACANT_NODE_LABEL&&O.addNode(m,Y),$!==X.VACANT_NODE_LABEL&&O.addNode(d,$),Y!==X.VACANT_NODE_LABEL&&$!==Y&&O.addEdge(void 0,m,d,V)}),O},A.prototype.buildRmpath=function(){this.rmpath=[];for(var _=void 0,S=this.dfsEdgeList.length,O=S-1;O>=0;O--){var B=this.dfsEdgeList[O],m=B.fromNode,d=B.toNode;m<d&&(_===void 0||d===_)&&(this.rmpath.push(O),_=m)}return this.rmpath},A.prototype.getNodeNum=function(){var _={};return this.dfsEdgeList.forEach(function(S){_[S.fromNode]||(_[S.fromNode]=!0),_[S.toNode]||(_[S.toNode]=!0)}),Object.keys(_).length},A}(),P=function(){function A(_){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],!!_){for(;_;){var S=_.edge;this.edges.push(S),this.nodesUsed[S.from]=1,this.nodesUsed[S.to]=1,this.edgesUsed[S.id]=1,_=_.preNode}this.edges=this.edges.reverse()}}return A.prototype.hasNode=function(_){return this.nodesUsed[_.id]===1},A.prototype.hasEdge=function(_){return this.edgesUsed[_.id]===1},A}(),N=function(){function A(_){var S=_.graphs,O=_.minSupport,B=O===void 0?2:O,m=_.minNodeNum,d=m===void 0?1:m,tt=_.maxNodeNum,Y=tt===void 0?4:tt,V=_.top,$=V===void 0?10:V,q=_.directed,rt=q===void 0?!1:q,Q=_.verbose,it=Q===void 0?!1:Q;this.graphs=S,this.dfsCode=new L,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=B,this.top=$,this.directed=rt,this.counter=0,this.maxNodeNum=Y,this.minNodeNum=d,this.verbose=it,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return A.prototype.findForwardRootEdges=function(_,S){var O=this,B=[],m=_.nodeMap;return S.edges.forEach(function(d){(O.directed||S.label<=m[d.to].label)&&B.push(d)}),B},A.prototype.findBackwardEdge=function(_,S,O,B){if(!this.directed&&S===O)return null;for(var m=_.nodeMap,d=m[O.to],tt=d.edges,Y=tt.length,V=0;V<Y;V++){var $=tt[V];if(!(B.hasEdge($)||$.to!==S.from)){if(this.directed){if(m[S.from].label<m[O.to].label||m[S.from].label===m[O.to].label&&S.label<=$.label)return $}else if(S.label<$.label||S.label===$.label&&m[S.to].label<=m[O.to].label)return $}}return null},A.prototype.findForwardPureEdges=function(_,S,O,B){for(var m=[],d=S.to,tt=_.nodeMap[d].edges,Y=tt.length,V=0;V<Y;V++){var $=tt[V],q=_.nodeMap[$.to];O<=q.label&&!B.hasNode(q)&&m.push($)}return m},A.prototype.findForwardRmpathEdges=function(_,S,O,B){for(var m=[],d=_.nodeMap,tt=d[S.to].label,Y=d[S.from],V=Y.edges,$=V.length,q=0;q<$;q++){var rt=V[q],Q=d[rt.to].label;S.to===rt.to||O>Q||B.hasNode(d[rt.to])||(S.label<rt.label||S.label===rt.label&&tt<=Q)&&m.push(rt)}return m},A.prototype.getSupport=function(_){var S={};return _.forEach(function(O){S[O.graphId]||(S[O.graphId]=!0)}),Object.keys(S).length},A.prototype.findMinLabel=function(_){var S=void 0;return Object.keys(_).forEach(function(O){var B=_[O],m=B.nodeLabel1,d=B.edgeLabel,tt=B.nodeLabel2;if(!S){S={nodeLabel1:m,edgeLabel:d,nodeLabel2:tt};return}(m<S.nodeLabel1||m===S.nodeLabel1&&d<S.edgeLabel||m===S.nodeLabel1&&d===S.edgeLabel&&tt<S.nodeLabel2)&&(S={nodeLabel1:m,edgeLabel:d,nodeLabel2:tt})}),S},A.prototype.isMin=function(){var _=this,S=this.dfsCode;if(this.verbose&&console.log("isMin checking",S),S.dfsEdgeList.length===1)return!0;var O=this.directed,B=S.toGraph(X.VACANT_GRAPH_ID,O),m=B.nodeMap,d=new L,tt={};B.nodes.forEach(function(q){var rt=_.findForwardRootEdges(B,q);rt.forEach(function(Q){var it=m[Q.to],ht="".concat(q.label,"-").concat(Q.label,"-").concat(it.label);tt[ht]||(tt[ht]={projected:[],nodeLabel1:q.label,edgeLabel:Q.label,nodeLabel2:it.label});var dt={graphId:B.id,edge:Q,preNode:null};tt[ht].projected.push(dt)})});var Y=this.findMinLabel(tt);if(Y){d.dfsEdgeList.push(new R(0,1,Y.nodeLabel1,Y.edgeLabel,Y.nodeLabel2));var V=function q(rt){for(var Q=d.buildRmpath(),it=d.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,ht=d.dfsEdgeList[Q[0]].toNode,dt={},Ot=!1,It=0,Kt=O?-1:0,Ft=function(xe){if(Ot)return"break";rt.forEach(function(we){var zt=new P(we),Wt=_.findBackwardEdge(B,zt.edges[Q[xe]],zt.edges[Q[0]],zt);Wt&&(dt[Wt.label]||(dt[Wt.label]={projected:[],edgeLabel:Wt.label}),dt[Wt.label].projected.push({graphId:B.id,edge:dt,preNode:we}),It=d.dfsEdgeList[Q[xe]].fromNode,Ot=!0)})},Nt=Q.length-1;Nt>Kt;Nt--){var st=Ft(Nt);if(st==="break")break}if(Ot){var yt=_.findMinLabel(dt);d.dfsEdgeList.push(new R(ht,It,X.VACANT_NODE_LABEL,yt.edgeLabel,X.VACANT_NODE_LABEL));var kt=d.dfsEdgeList.length-1;return _.dfsCode.dfsEdgeList[kt]!==d.dfsEdgeList[kt]?!1:q(dt[yt.edgeLabel].projected)}var ee={};Ot=!1;var $t=0;rt.forEach(function(Se){var xe=new P(Se),we=_.findForwardPureEdges(B,xe.edges[Q[0]],it,xe);we.length>0&&(Ot=!0,$t=ht,we.forEach(function(zt){var Wt="".concat(zt.label,"-").concat(m[zt.to].label);ee[Wt]||(ee[Wt]={projected:[],edgeLabel:zt.label,nodeLabel2:m[zt.to].label}),ee[Wt].projected.push({graphId:B.id,edge:zt,preNode:Se})}))});for(var ge=Q.length,Pe=function(xe){if(Ot)return"break";var we=Q[xe];rt.forEach(function(zt){var Wt=new P(zt),Ie=_.findForwardRmpathEdges(B,Wt.edges[we],it,Wt);Ie.length>0&&(Ot=!0,$t=d.dfsEdgeList[we].fromNode,Ie.forEach(function(Yt){var ie="".concat(Yt.label,"-").concat(m[Yt.to].label);ee[ie]||(ee[ie]={projected:[],edgeLabel:Yt.label,nodeLabel2:m[Yt.to].label}),ee[ie].projected.push({graphId:B.id,edge:Yt,preNode:zt})}))})},Nt=0;Nt<ge;Nt++){var er=Pe(Nt);if(er==="break")break}if(!Ot)return!0;var Jt=_.findMinLabel(ee);d.dfsEdgeList.push(new R($t,ht+1,X.VACANT_NODE_LABEL,Jt.edgeLabel,Jt.nodeLabel2));var ae=d.dfsEdgeList.length-1;return S.dfsEdgeList[ae]!==d.dfsEdgeList[ae]?!1:q(ee["".concat(Jt.edgeLabel,"-").concat(Jt.nodeLabel2)].projected)},$="".concat(Y.nodeLabel1,"-").concat(Y.edgeLabel,"-").concat(Y.nodeLabel2);return V(tt[$].projected)}},A.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var _=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,G.clone)(_))}},A.prototype.subGraphMining=function(_){var S=this,O=this.getSupport(_);if(!(O<this.minSupport)&&this.isMin()){this.report();var B=this.dfsCode.getNodeNum(),m=this.dfsCode.buildRmpath(),d=this.dfsCode.dfsEdgeList[m[0]].toNode,tt=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,Y={},V={};_.forEach(function($){for(var q=S.graphs[$.graphId],rt=q.nodeMap,Q=new P($),it=m.length-1;it>=0;it--){var ht=S.findBackwardEdge(q,Q.edges[m[it]],Q.edges[m[0]],Q);if(ht){var dt="".concat(S.dfsCode.dfsEdgeList[m[it]].fromNode,"-").concat(ht.label);V[dt]||(V[dt]={projected:[],toNodeId:S.dfsCode.dfsEdgeList[m[it]].fromNode,edgeLabel:ht.label}),V[dt].projected.push({graphId:$.graphId,edge:ht,preNode:$})}}if(!(B>=S.maxNodeNum)){var Ot=S.findForwardPureEdges(q,Q.edges[m[0]],tt,Q);Ot.forEach(function(Kt){var Ft="".concat(d,"-").concat(Kt.label,"-").concat(rt[Kt.to].label);Y[Ft]||(Y[Ft]={projected:[],fromNodeId:d,edgeLabel:Kt.label,nodeLabel2:rt[Kt.to].label}),Y[Ft].projected.push({graphId:$.graphId,edge:Kt,preNode:$})});for(var It=function(Ft){var Nt=S.findForwardRmpathEdges(q,Q.edges[m[Ft]],tt,Q);Nt.forEach(function(st){var yt="".concat(S.dfsCode.dfsEdgeList[m[Ft]].fromNode,"-").concat(st.label,"-").concat(rt[st.to].label);Y[yt]||(Y[yt]={projected:[],fromNodeId:S.dfsCode.dfsEdgeList[m[Ft]].fromNode,edgeLabel:st.label,nodeLabel2:rt[st.to].label}),Y[yt].projected.push({graphId:$.graphId,edge:st,preNode:$})})},it=0;it<m.length;it++)It(it)}}),Object.keys(V).forEach(function($){var q=V[$],rt=q.toNodeId,Q=q.edgeLabel;S.dfsCode.dfsEdgeList.push(new R(d,rt,"-1",Q,"-1")),S.subGraphMining(V[$].projected),S.dfsCode.dfsEdgeList.pop()}),Object.keys(Y).forEach(function($){var q=Y[$],rt=q.fromNodeId,Q=q.edgeLabel,it=q.nodeLabel2;S.dfsCode.dfsEdgeList.push(new R(rt,d+1,X.VACANT_NODE_LABEL,Q,it)),S.subGraphMining(Y[$].projected),S.dfsCode.dfsEdgeList.pop()})}},A.prototype.generate1EdgeFrequentSubGraphs=function(){var _=this.graphs,S=this.directed,O=this.minSupport,B=this.frequentSize1Subgraphs,m={},d={},tt={},Y={};return Object.keys(_).forEach(function(V){var $=_[V],q=$.nodeMap;$.nodes.forEach(function(rt,Q){var it=rt.label,ht="".concat(V,"-").concat(it);if(!tt[ht]){var dt=m[it]||0;dt++,m[it]=dt}tt[ht]={graphKey:V,label:it},rt.edges.forEach(function(Ot){var It=it,Kt=q[Ot.to].label;if(!S&&It>Kt){var Ft=Kt;Kt=It,It=Ft}var Nt=Ot.label,st="".concat(V,"-").concat(It,"-").concat(Nt,"-").concat(Kt),yt="".concat(It,"-").concat(Nt,"-").concat(Kt);if(!d[yt]){var kt=d[yt]||0;kt++,d[yt]=kt}Y[st]={graphId:V,nodeLabel1:It,edgeLabel:Nt,nodeLabel2:Kt}})})}),Object.keys(m).forEach(function(V){var $=m[V];if(!($<O)){var q={nodes:[],edges:[]};q.nodes.push({id:"0",label:V}),B.push(q)}}),B},A.prototype.run=function(){var _=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var S=this.graphs,O=this.directed,B={};Object.keys(S).forEach(function(m){var d=S[m],tt=d.nodeMap;d.nodes.forEach(function(Y){var V=_.findForwardRootEdges(d,Y);V.forEach(function($){var q=tt[$.to],rt="".concat(Y.label,"-").concat($.label,"-").concat(q.label);B[rt]||(B[rt]={projected:[],nodeLabel1:Y.label,edgeLabel:$.label,nodeLabel2:q.label});var Q={graphId:m,edge:$,preNode:null};B[rt].projected.push(Q)})})}),Object.keys(B).forEach(function(m){var d=B[m],tt=d.projected,Y=d.nodeLabel1,V=d.edgeLabel,$=d.nodeLabel2;_.dfsCode.dfsEdgeList.push(new R(0,1,Y,V,$)),_.subGraphMining(tt),_.dfsCode.dfsEdgeList.pop()})}},A}(),E=function(_,S,O,B){var m={};return Object.keys(_).forEach(function(d,tt){var Y=_[d],V=new X.Graph(tt,!0,S),$={};Y.nodes.forEach(function(q,rt){V.addNode(rt,q[O]),$[q.id]=rt}),Y.edges.forEach(function(q,rt){var Q=$[q.source],it=$[q.target];V.addEdge(-1,Q,it,q[B])}),V&&V.getNodeNum()&&(m[V.id]=V)}),m},x=function(_,S,O){var B=[];return _.forEach(function(m){var d={nodes:[],edges:[]};m.nodes.forEach(function(tt){var Y;d.nodes.push((Y={id:"".concat(tt.id)},Y[S]=tt.label,Y))}),m.edges.forEach(function(tt){var Y;d.edges.push((Y={source:"".concat(tt.from),target:"".concat(tt.to)},Y[O]=tt.label,Y))}),B.push(d)}),B},p="cluster",y=function(_){var S=_.graphs,O=_.directed,B=O===void 0?!1:O,m=_.nodeLabelProp,d=m===void 0?p:m,tt=_.edgeLabelProp,Y=tt===void 0?p:tt,V=E(S,B,d,Y),$=_.minSupport,q=_.maxNodeNum,rt=_.minNodeNum,Q=_.verbose,it=_.top,ht={graphs:V,minSupport:$,maxNodeNum:q,minNodeNum:rt,top:it,verbose:Q,directed:B},dt=new N(ht);dt.run();var Ot=x(dt.frequentSubgraphs,d,Y);return Ot},g=y;F.default=g},368575:function(He,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.VACANT_NODE_LABEL=F.VACANT_NODE_ID=F.VACANT_GRAPH_ID=F.VACANT_EDGE_LABEL=F.VACANT_EDGE_ID=F.Node=F.Graph=F.Edge=F.AUTO_EDGE_ID=void 0;var z=-1;F.VACANT_EDGE_ID=z;var G=-1;F.VACANT_NODE_ID=G;var X="-1";F.VACANT_EDGE_LABEL=X;var R="-1";F.VACANT_NODE_LABEL=R;var L=-1;F.VACANT_GRAPH_ID=L;var P="-1";F.AUTO_EDGE_ID=P;var N=function(){function p(y,g,A,_){y===void 0&&(y=z),g===void 0&&(g=G),A===void 0&&(A=G),_===void 0&&(_=X),this.id=y,this.from=g,this.to=A,this.label=_}return p}();F.Edge=N;var E=function(){function p(y,g){y===void 0&&(y=G),g===void 0&&(g=R),this.id=y,this.label=g,this.edges=[],this.edgeMap={}}return p.prototype.addEdge=function(y){this.edges.push(y),this.edgeMap[y.id]=y},p}();F.Node=E;var x=function(){function p(y,g,A){y===void 0&&(y=G),g===void 0&&(g=!0),A===void 0&&(A=!1),this.id=y,this.edgeIdAutoIncrease=g,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=A}return p.prototype.getNodeNum=function(){return this.nodes.length},p.prototype.addNode=function(y,g){if(!this.nodeMap[y]){var A=new E(y,g);this.nodes.push(A),this.nodeMap[y]=A,this.nodeLabelMap[g]||(this.nodeLabelMap[g]=[]),this.nodeLabelMap[g].push(y)}},p.prototype.addEdge=function(y,g,A,_){if((this.edgeIdAutoIncrease||y===void 0)&&(y=this.counter++),!(this.nodeMap[g]&&this.nodeMap[A]&&this.nodeMap[A].edgeMap[y])){var S=new N(y,g,A,_);if(this.edges.push(S),this.edgeMap[y]=S,this.nodeMap[g].addEdge(S),this.edgeLabelMap[_]||(this.edgeLabelMap[_]=[]),this.edgeLabelMap[_].push(S),!this.directed){var O=new N(y,A,g,_);this.nodeMap[A].addEdge(O),this.edgeLabelMap[_].push(O)}}},p}();F.Graph=x},882812:function(He,F,z){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.default=void 0;var G=z(197582),X=N(z(975033)),R=N(z(821146)),L=N(z(878089)),P=z(770643);function N(Y){return Y&&Y.__esModule?Y:{default:Y}}var E=function(V,$,q,rt){q===void 0&&(q="cluster"),rt===void 0&&(rt=2);var Q=[],it=V.nodes;return $.forEach(function(ht,dt){Q.push(x(it,ht,dt,q,rt))}),Q},x=function(V,$,q,rt,Q){var it=[q],ht=[],dt={};return $.forEach(function(Ot,It){if(Ot<=Q&&q!==It){it.push(It),ht.push(V[It]);var Kt=V[It][rt];dt[Kt]?(dt[Kt].count++,dt[Kt].dists.push(Ot)):dt[Kt]={count:1,dists:[Ot]}}}),Object.keys(dt).forEach(function(Ot){dt[Ot].dists=dt[Ot].dists.sort(function(It,Kt){return It-Kt})}),{nodeIdx:q,nodeId:V[q].id,nodeIdxs:it,neighbors:ht,neighborNum:it.length-1,nodeLabelCountMap:dt}},p=function(V,$,q,rt,Q){var it=Math.ceil(q/$),ht={},dt=0;return rt.forEach(function(Ot,It){for(var Kt=0,Ft=0,Nt=Ot.nodeIdxs,st=Ot.neighborNum-1;Kt<it;){for(var yt=Nt[1+Math.floor(Math.random()*st)],kt=0;(ht["".concat(It,"-").concat(yt)]||ht["".concat(yt,"-").concat(It)])&&(yt=Math.floor(Math.random()*$),kt++,!(kt>2*$)););if(kt<2*$&&(ht["".concat(It,"-").concat(yt)]={start:It,end:yt,distance:Q[It][yt]},Kt++,dt++,dt>=q))return ht;if(Ft++,Ft>2*$)break}if(Kt<it){var ee=it-Kt;it=(it+ee)/($-It-1)}}),ht},y=function(V,$,q,rt){var Q=q.nodes;return rt||(rt={}),Object.keys(V).forEach(function(it){var ht,dt;if(!(rt&&rt[it])){rt[it]={nodes:[],edges:[]};var Ot=V[it],It=(ht=$[Ot.start])===null||ht===void 0?void 0:ht.nodeIdxs,Kt=(dt=$[Ot.end])===null||dt===void 0?void 0:dt.nodeIdxs;if(!(!It||!Kt)){var Ft=new Set(Kt),Nt=It.filter(function($t){return Ft.has($t)});if(!(!Nt||!Nt.length)){for(var st={},yt=Nt.length,kt=0;kt<yt;kt++){var ee=Q[Nt[kt]];rt[it].nodes.push(ee),st[ee.id]=!0}q.edges.forEach(function($t){st[$t.source]&&st[$t.target]&&rt[it].edges.push($t)})}}}}),rt},g=function(V,$,q,rt){var Q,it,ht={};V.nodes.forEach(function(Ot){ht[Ot.id]=Ot});var dt=0;return!(!((Q=$==null?void 0:$.edges)===null||Q===void 0)&&Q.length)||((it=$==null?void 0:$.nodes)===null||it===void 0?void 0:it.length)<2?0:(V.edges.forEach(function(Ot){var It=ht[Ot.source][q],Kt=ht[Ot.target][q],Ft=$==null?void 0:$.nodes[0][q],Nt=$==null?void 0:$.nodes[1][q],st=$==null?void 0:$.edges[0][rt];Ot[rt]===st&&(It===Ft&&Kt===Nt||It===Nt&&Kt===Ft)&&dt++}),dt)},A=function(V,$,q){for(var rt=1/0,Q=0,it=function(Ot){var It=V[Ot],Kt=Object.keys(It).sort(function($t,ge){return It[$t]-It[ge]}),Ft=10,Nt=[];Kt.forEach(function($t,ge){Nt[ge%Ft]||(Nt[ge%Ft]={graphs:[],totalCount:0,aveCount:0}),Nt[ge%Ft].graphs.push($t),Nt[ge%Ft].totalCount+=It[$t]});var st=0,yt=[];Nt.forEach(function($t){var ge=$t.totalCount/$t.graphs.length;$t.aveCount=ge,yt.push(ge);var Pe=0,er=$t.length;$t.graphs.forEach(function(Jt,ae){var Se=It[Jt];$t.graphs.forEach(function(xe,we){ae!==we&&(Pe+=Math.abs(Se-It[xe]))})}),Pe/=er*(er-1)/2,st+=Pe}),st/=Nt.length;var kt=0;yt.forEach(function($t,ge){yt.forEach(function(Pe,er){ge!==er&&(kt+=Math.abs($t-Pe))}),kt/=yt.length*(yt.length-1)/2});var ee=kt-st;rt<ee&&(rt=ee,Q=Ot)},ht=0;ht<$;ht++)it(ht);return{structure:q[Q],structureCountMap:V[Q]}},_=function(V,$){var q={},rt={};return V.forEach(function(Q,it){q[Q.id]={idx:it,node:Q,degree:0,inDegree:0,outDegree:0};var ht=Q[$];rt[ht]||(rt[ht]=[]),rt[ht].push(Q)}),{nodeMap:q,nodeLabelMap:rt}},S=function(V,$,q){var rt={},Q={};return V.forEach(function(it,ht){rt["".concat(P.uniqueId)]={idx:ht,edge:it};var dt=it[$];Q[dt]||(Q[dt]=[]),Q[dt].push(it);var Ot=q[it.source];Ot&&(Ot.degree++,Ot.outDegree++);var It=q[it.target];It&&(It.degree++,It.inDegree++)}),{edgeMap:rt,edgeLabelMap:Q}},O=function(V,$,q){var rt=$.length,Q={};return $.forEach(function(it,ht){for(var dt=q?0:ht+1,Ot=V[ht].id,It=dt;It<rt;It++)if(ht!==It){var Kt=V[It].id,Ft=it[It];Q["".concat(Ot,"-").concat(Kt)]=Ft,q||(Q["".concat(Kt,"-").concat(Ot)]=Ft)}}),Q},B=function(V,$,q,rt,Q,it,ht,dt,Ot,It,Kt){var Ft,Nt="".concat($.id,"-").concat(q.id);if(It&&It[Nt])return It[Nt];var st=Kt?Kt[Nt]:void 0;if(!st){var yt=(Ft={},Ft[Nt]={start:rt[$.id].idx,end:rt[q.id].idx,distance:Q},Ft);Kt=y(yt,it,V,Kt),st=Kt[Nt]}return g(st,ht,dt,Ot)},m=function(V,$,q,rt){var Q,it,ht,dt=(Q=V[$])===null||Q===void 0?void 0:Q.degree,Ot=(it=V[$])===null||it===void 0?void 0:it.inDegree,It=(ht=V[$])===null||ht===void 0?void 0:ht.outDegree;return V[$]===void 0&&(dt=1/0,Ot=1/0,It=1/0,rt[$].forEach(function(Kt){var Ft=q[Kt.id].degree;dt>Ft&&(dt=Ft);var Nt=q[Kt.id].inDegree;Ot>Nt&&(Ot=Nt);var st=q[Kt.id].outDegree;It>st&&(It=st)}),V[$]={degree:dt,inDegree:Ot,outDegree:It}),{minPatternNodeLabelDegree:dt,minPatternNodeLabelInDegree:Ot,minPatternNodeLabelOutDegree:It}},d=function(V,$,q,rt,Q,it,ht){var dt;if(q===void 0&&(q=!1),it===void 0&&(it="cluster"),ht===void 0&&(ht="cluster"),!(!V||!V.nodes)){var Ot=V.nodes.length;if(Ot){var It=(0,X.default)(V,q),Kt=(0,X.default)($,q),Ft=O(V.nodes,It,q),Nt=O($.nodes,Kt,q),st=_(V.nodes,it),yt=st.nodeMap,kt=st.nodeLabelMap,ee=_($.nodes,it),$t=ee.nodeMap,ge=ee.nodeLabelMap;S(V.edges,ht,yt);var Pe=S($.edges,ht,$t).edgeLabelMap,er=[];Kt==null||Kt.forEach(function(dn){er=er.concat(dn)}),Q||(Q=Math.max.apply(Math,(0,G.__spreadArray)((0,G.__spreadArray)([],er,!1),[2],!1))),rt||(rt=Q);var Jt=E(V,It,it,rt),ae=E($,Kt,it,rt),Se=Math.min(100,Ot*(Ot-1)/2),xe=p(rt,Ot,Se,Jt,It),we=y(xe,Jt,V),zt=10,Wt=1,Ie=1,Yt=4,ie={graphs:we,nodeLabelProp:it,edgeLabelProp:ht,minSupport:Wt,minNodeNum:Ie,maxNodeNum:Yt,directed:q},Oe=(0,R.default)(ie).slice(0,zt),re=Oe.length,_e=[];Oe.forEach(function(dn,Wn){_e[Wn]={},Object.keys(we).forEach(function(Dn){var Cn=we[Dn],la=g(Cn,dn,it,ht);_e[Wn][Dn]=la})});var Ge=A(_e,re,Oe),Ct=Ge.structure,Nr=Ge.structureCountMap,Or=$.nodes[0],Ur=[],Sr=(dt=$.nodes[0])===null||dt===void 0?void 0:dt[it],gn=-1/0;$.nodes.forEach(function(dn){var Wn=dn[it],Dn=kt[Wn];(Dn==null?void 0:Dn.length)>gn&&(gn=Dn.length,Ur=Dn,Sr=Wn,Or=dn)});var Rr={},ln={},Nn={},Ln={},fn={},Qe={};Object.keys(ge).forEach(function(dn,Wn){fn[dn]=[],q&&(Qe[dn]=[]);var Dn=-1/0,Cn=ge[dn],la={};Cn.forEach(function(M){var C=Nt["".concat(Or.id,"-").concat(M.id)];if(C&&fn[dn].push(C),Dn<C&&(Dn=C),la["".concat(Or.id,"-").concat(M.id)]={start:0,end:$t[M.id].idx,distance:C},q){var j=Nt["".concat(M.id,"-").concat(Or.id)];j&&Qe[dn].push(j)}}),fn[dn]=fn[dn].sort(function(M,C){return M-C}),q&&(Qe[dn]=Qe[dn].sort(function(M,C){return M-C})),ln=y(la,ae,$,ln);var K=[];if(Object.keys(la).forEach(function(M){if(Nn[M]){K.push(Nn[M]);return}var C=ln[M];Nn[M]=g(C,Ct,it,ht),K.push(Nn[M])}),K=K.sort(function(M,C){return C-M}),Ln["".concat(Or.id,"-").concat(dn)]=K,dn!==Sr)for(var ft=(Ur==null?void 0:Ur.length)||0,nt=function(C){var j=Ur[C],xt=Jt[yt[j.id].idx],At=xt.nodeLabelCountMap[dn],wt=ge[dn].length;if(!At||At.count<wt)return Ur.splice(C,1),"continue";for(var Pt=!1,Me=0;Me<wt;Me++)if(At.dists[Me]>fn[dn][Me]){Pt=!0;break}if(Pt)return Ur.splice(C,1),"continue";var ve={};xt.neighbors.forEach(function(ir){var mr=Ft["".concat(j.id,"-").concat(ir.id)];ve["".concat(j.id,"-").concat(ir.id)]={start:yt[j.id].idx,end:yt[ir.id].idx,distance:mr}}),we=y(ve,Jt,V,we);var Ke=[];Object.keys(ve).forEach(function(ir){if(Nr[ir]){Ke.push(Nr[ir]);return}var mr=we[ir];Nr[ir]=g(mr,Ct,it,ht),Ke.push(Nr[ir])}),Ke=Ke.sort(function(ir,mr){return mr-ir});for(var br=!1,Me=0;Me<wt;Me++)if(Ke[Me]<K[Me]){br=!0;break}if(br)return Ur.splice(C,1),"continue"},k=ft-1;k>=0;k--)nt(k)});var nr=[];Ur==null||Ur.forEach(function(dn){for(var Wn=yt[dn.id].idx,Dn=x(V.nodes,It[Wn],Wn,it,Q),Cn=Dn.neighbors,la=Cn.length,K=!1,ft=la-1;ft>=0;ft--){if(Cn.length+1<$.nodes.length){K=!0;return}var nt=Cn[ft],k=nt[it];if(!ge[k]||!ge[k].length){Cn.splice(ft,1);continue}if(!fn[k]||!fn[k].length){Cn.splice(ft,1);continue}var M="".concat(dn.id,"-").concat(nt.id),C=Ft[M],j=fn[k].length-1,xt=fn[k][j];if(C>xt){Cn.splice(ft,1);continue}if(q){var At="".concat(nt.id,"-").concat(dn.id),wt=Ft[At];j=Qe[k].length-1;var Pt=Qe[k][j];if(wt>Pt){Cn.splice(ft,1);continue}}var Me=Nr[M]?Nr[M]:B(V,dn,nt,yt,C,Jt,Ct,it,ht,Nr,we),ve="".concat(Or.id,"-").concat(k),Ke=Ln[ve][Ln[ve].length-1];if(Me<Ke){Cn.splice(ft,1);continue}var br=m(Rr,k,$t,ge),ir=br.minPatternNodeLabelDegree,mr=br.minPatternNodeLabelInDegree,Mn=br.minPatternNodeLabelOutDegree;if(yt[nt.id].degree<ir){Cn.splice(ft,1);continue}}K||nr.push({nodes:[dn].concat(Cn)})});var dr=(0,L.default)($,Or.id,!1).length,Pr={};q?(Object.keys(dr).forEach(function(dn){var Wn=$t[dn].node[it];Pr[Wn]?Pr[Wn].push(dr[dn]):Pr[Wn]=[dr[dn]]}),Object.keys(Pr).forEach(function(dn){Pr[dn].sort(function(Wn,Dn){return Wn-Dn})})):Pr=fn;for(var en=nr.length,pn=function(Wn){var Dn=nr[Wn],Cn=Dn.nodes[0],la={},K={};Dn.nodes.forEach(function(Vn,me){K[Vn.id]={idx:me,node:Vn,degree:0,inDegree:0,outDegree:0};var Dt=Vn[it];la[Dt]?la[Dt]++:la[Dt]=1});var ft=[],nt={};V.edges.forEach(function(Vn){K[Vn.source]&&K[Vn.target]&&(ft.push(Vn),nt[Vn[ht]]?nt[Vn[ht]]++:nt[Vn[ht]]=1,K[Vn.source].degree++,K[Vn.target].degree++,K[Vn.source].outDegree++,K[Vn.target].inDegree++)});for(var k=Object.keys(Pe).length,M=!1,C=0;C<k;C++){var j=Object.keys(Pe)[C];if(!nt[j]||nt[j]<Pe[j].length){M=!0;break}}if(M)return nr.splice(Wn,1),"continue";var xt=ft.length;if(xt<$.edges.length)return nr.splice(Wn,1),"break";for(var At=!1,wt=function(me){var Dt=ft[me],fe=Dt[ht],Ae=Pe[fe];if(!Ae||!Ae.length)return nt[fe]--,Ae&&nt[fe]<Ae.length?(At=!0,"break"):(ft.splice(me,1),K[Dt.source].degree--,K[Dt.target].degree--,K[Dt.source].outDegree--,K[Dt.target].inDegree--,"continue");var be=K[Dt.source].node[it],De=K[Dt.target].node[it],sr=!1;if(Ae.forEach(function(Fr){var Jr=$t[Fr.source].node,Pn=$t[Fr.target].node;Jr[it]===be&&Pn[it]===De&&(sr=!0),!q&&Jr[it]===De&&Pn[it]===be&&(sr=!0)}),!sr)return nt[fe]--,Ae&&nt[fe]<Ae.length?(At=!0,"break"):(ft.splice(me,1),K[Dt.source].degree--,K[Dt.target].degree--,K[Dt.source].outDegree--,K[Dt.target].inDegree--,"continue")},C=xt-1;C>=0;C--){var Pt=wt(C);if(Pt==="break")break}if(At)return nr.splice(Wn,1),"continue";Dn.edges=ft;var Me=(0,L.default)(Dn,Dn.nodes[0].id,!1).length;if(Object.keys(Me).reverse().forEach(function(Vn){if(!(Vn===Dn.nodes[0].id||At)){if(Me[Vn]===1/0){var me=K[Vn].node[it];if(la[me]--,la[me]<ge[me].length){At=!0;return}var Dt=Dn.nodes.indexOf(K[Vn].node);Dn.nodes.splice(Dt,1),K[Vn]=void 0;return}var fe=yt[Vn].node[it];if(!Pr[fe]||!Pr[fe].length||Me[Vn]>Pr[fe][Pr[fe].length-1]){var me=K[Vn].node[it];if(la[me]--,la[me]<ge[me].length){At=!0;return}var Dt=Dn.nodes.indexOf(K[Vn].node);Dn.nodes.splice(Dt,1),K[Vn]=void 0}}}),At)return nr.splice(Wn,1),"continue";for(var ve=!0,Ke=0;ve&&!At;){ve=!1;var br=q?K[Cn.id].degree<$t[Or.id].degree||K[Cn.id].inDegree<$t[Or.id].inDegree||K[Cn.id].outDegree<$t[Or.id].outDegree:K[Cn.id].degree<$t[Or.id].degree;if(br){At=!0;break}if(la[Cn[it]]<ge[Cn[it]].length){At=!0;break}for(var ir=Dn.nodes.length,mr=ir-1;mr>=0;mr--){var Mn=Dn.nodes[mr],Xe=K[Mn.id].degree,vr=K[Mn.id].inDegree,Er=K[Mn.id].outDegree,on=Mn[it],Wr=m(Rr,on,$t,ge),xa=Wr.minPatternNodeLabelDegree,Ta=Wr.minPatternNodeLabelInDegree,Rn=Wr.minPatternNodeLabelOutDegree,Jn=q?Xe<xa||vr<Ta||Er<Rn:Xe<xa;if(Jn){if(la[Mn[it]]--,la[Mn[it]]<ge[Mn[it]].length){At=!0;break}Dn.nodes.splice(mr,1),K[Mn.id]=void 0,ve=!0}}if(At||!ve&&Ke!==0)break;xt=ft.length;for(var Ga=xt-1;Ga>=0;Ga--){var Aa=ft[Ga];if(!K[Aa.source]||!K[Aa.target]){ft.splice(Ga,1);var an=Aa[ht];if(nt[an]--,K[Aa.source]&&(K[Aa.source].degree--,K[Aa.source].outDegree--),K[Aa.target]&&(K[Aa.target].degree--,K[Aa.target].inDegree--),Pe[an]&&nt[an]<Pe[an].length){At=!0;break}ve=!0}}Ke++}if(At||At||Dn.nodes.length<$.nodes.length||ft.length<$.edges.length)return nr.splice(Wn,1),"continue"},rn=en-1;rn>=0;rn--){var jn=pn(rn);if(jn==="break")break}for(var Hn=nr.length,oa=function(Wn){var Dn=nr[Wn],Cn={};Dn.edges.forEach(function(ft){var nt="".concat(ft.source,"-").concat(ft.target,"-").concat(ft.label);Cn[nt]?Cn[nt]++:Cn[nt]=1});for(var la=function(nt){var k=nr[nt],M={};k.edges.forEach(function(j){var xt="".concat(j.source,"-").concat(j.target,"-").concat(j.label);M[xt]?M[xt]++:M[xt]=1});var C=!0;Object.keys(M).length!==Object.keys(Cn).length?C=!1:Object.keys(Cn).forEach(function(j){M[j]!==Cn[j]&&(C=!1)}),C&&nr.splice(nt,1)},K=Hn-1;K>Wn;K--)la(K);Hn=nr.length},rn=0;rn<=Hn-1;rn++)oa(rn);return nr}}},tt=d;F.default=tt},505170:function(He,F,z){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.default=void 0;var G=R(z(62238)),X=z(770643);function R(N){return N&&N.__esModule?N:{default:N}}var L=function(E,x,p,y){x===void 0&&(x=!1),p===void 0&&(p="weight"),y===void 0&&(y=1e3);var g=E.nodes,A=g===void 0?[]:g,_=E.edges,S=_===void 0?[]:_,O={},B={};A.forEach(function(it,ht){var dt=(0,X.uniqueId)();it.clusterId=dt,O[dt]={id:dt,nodes:[it]},B[it.id]={node:it,idx:ht}});var m=(0,G.default)(E,x),d=[],tt={};m.forEach(function(it,ht){var dt=0,Ot=A[ht].id;tt[Ot]={},it.forEach(function(It,Kt){if(It){dt+=It;var Ft=A[Kt].id;tt[Ot][Ft]=It}}),d.push(dt)});for(var Y=0,V=function(){var ht=!1;if(A.forEach(function(dt){var Ot={};Object.keys(tt[dt.id]).forEach(function(ee){var $t=tt[dt.id][ee],ge=B[ee].node,Pe=ge.clusterId;Ot[Pe]||(Ot[Pe]=0),Ot[Pe]+=$t});var It=-1/0,Kt=[];if(Object.keys(Ot).forEach(function(ee){It<Ot[ee]?(It=Ot[ee],Kt=[ee]):It===Ot[ee]&&Kt.push(ee)}),!(Kt.length===1&&Kt[0]===dt.clusterId)){var Ft=Kt.indexOf(dt.clusterId);if(Ft>=0&&Kt.splice(Ft,1),Kt&&Kt.length){ht=!0;var Nt=O[dt.clusterId],st=Nt.nodes.indexOf(dt);Nt.nodes.splice(st,1);var yt=Math.floor(Math.random()*Kt.length),kt=O[Kt[yt]];kt.nodes.push(dt),dt.clusterId=kt.id}}}),!ht)return"break";Y++};Y<y;){var $=V();if($==="break")break}Object.keys(O).forEach(function(it){var ht=O[it];(!ht.nodes||!ht.nodes.length)&&delete O[it]});var q=[],rt={};S.forEach(function(it){var ht=it.source,dt=it.target,Ot=it[p]||1,It=B[ht].node.clusterId,Kt=B[dt].node.clusterId,Ft="".concat(It,"---").concat(Kt);if(rt[Ft])rt[Ft].weight+=Ot,rt[Ft].count++;else{var Nt={source:It,target:Kt,weight:Ot,count:1};rt[Ft]=Nt,q.push(Nt)}});var Q=[];return Object.keys(O).forEach(function(it){Q.push(O[it])}),{clusters:Q,clusterEdges:q}},P=L;F.default=P},135179:function(He,F,z){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.default=void 0;var G=z(413810),X=N(z(62238)),R=N(z(29741)),L=z(103665),P=z(526838);function N(g){return g&&g.__esModule?g:{default:g}}var E=function(A,_,S,O){for(var B=_.length,m=2*O,d=0,tt=0;tt<B;tt++)for(var Y=A[tt].clusterId,V=0;V<B;V++){var $=A[V].clusterId;if(Y===$){var q=_[tt][V]||0,rt=S[tt]||0,Q=S[V]||0;d+=q-rt*Q/m}}return d*=1/m,d},x=function(A,_){A===void 0&&(A=[]);for(var S=A.length,O=new R.default([]),B=0;B<S;B++)O=O.add(new R.default(_[B]));var m=O.avg(S);m.normalize();for(var d=0,B=0;B<S;B++){var tt=new R.default(_[B]),Y=tt.squareEuclideanDistance(m);d+=Y}var V=[];A.forEach(function(){V.push([])});for(var B=0;B<S;B++){var tt=new R.default(_[B]);A[B].clusterInertial=0;for(var $=0;$<S;$++){if(B===$){V[B][$]=0;continue}var q=new R.default(_[$]);V[B][$]=tt.squareEuclideanDistance(q),A[B].clusterInertial+=V[B][$]}}for(var rt=0,Q=2*S*d,B=0;B<S;B++)for(var it=A[B].clusterId,$=0;$<S;$++){var ht=A[$].clusterId;if(!(B===$||it!==ht)){var dt=A[B].clusterInertial*A[$].clusterInertial/Math.pow(Q,2)-V[B][$]/Q;rt+=dt}}return Number(rt.toFixed(4))},p=function(A,_,S,O,B,m,d,tt,Y){_===void 0&&(_=!1),S===void 0&&(S="weight"),O===void 0&&(O=1e-4),B===void 0&&(B=!1),m===void 0&&(m=void 0),d===void 0&&(d=[]),tt===void 0&&(tt=["id"]),Y===void 0&&(Y=1);var V=A.nodes,$=V===void 0?[]:V,q=A.edges,rt=q===void 0?[]:q,Q=[];if(B){$.forEach(function(we,zt){we.properties=we.properties||{},we.originIndex=zt});var it=[];$.every(function(we){return we.hasOwnProperty("nodeType")})&&(it=Array.from(new Set($.map(function(we){return we.nodeType}))),$.forEach(function(we){we.properties.nodeType=it.findIndex(function(zt){return zt===we.nodeType})}));var ht=(0,L.getAllProperties)($,m);Q=(0,P.oneHot)(ht,d,tt)}var dt=1,Ot={},It={};$.forEach(function(we,zt){var Wt=String(dt++);we.clusterId=Wt,Ot[Wt]={id:Wt,nodes:[we]},It[we.id]={node:we,idx:zt}});var Kt=(0,X.default)(A,_),Ft=[],Nt={},st=0;Kt.forEach(function(we,zt){var Wt=0,Ie=$[zt].id;Nt[Ie]={},we.forEach(function(Yt,ie){if(Yt){Wt+=Yt;var Oe=$[ie].id;Nt[Ie][Oe]=Yt,st+=Yt}}),Ft.push(Wt)}),st/=2;for(var yt=1/0,kt=1/0,ee=0,$t=[],ge={};;){B&&$.every(function(we){return we.hasOwnProperty("properties")})?yt=E($,Kt,Ft,st)+x($,Q)*Y:yt=E($,Kt,Ft,st),ee===0&&(kt=yt,$t=$,ge=Ot);var Pe=yt>0&&yt>kt&&yt-kt<O;if(yt>kt&&($t=$.map(function(we){return{node:we,clusterId:we.clusterId}}),ge=(0,G.clone)(Ot),kt=yt),Pe||ee>100)break;ee++,Object.keys(Ot).forEach(function(we){var zt=0;rt.forEach(function(Wt){var Ie=Wt.source,Yt=Wt.target,ie=It[Ie].node.clusterId,Oe=It[Yt].node.clusterId;(ie===we&&Oe!==we||Oe===we&&ie!==we)&&(zt=zt+(Wt[S]||1))}),Ot[we].sumTot=zt}),$.forEach(function(we,zt){var Wt=Ot[we.clusterId],Ie=0,Yt,ie=Ft[zt]/(2*st),Oe=0,re=Wt.nodes;re.forEach(function(ln){var Nn=It[ln.id].idx;Oe+=Kt[zt][Nn]||0});var _e=Oe-Wt.sumTot*ie,Ge=re.filter(function(ln){return ln.id!==we.id}),Ct=[];Ge.forEach(function(ln,Nn){Ct[Nn]=Q[ln.originIndex]});var Nr=x(Ge,Q)*Y,Or=Nt[we.id];if(Object.keys(Or).forEach(function(ln){var Nn=It[ln].node,Ln=Nn.clusterId;if(Ln!==we.clusterId){var fn=Ot[Ln],Qe=fn.nodes;if(!(!Qe||!Qe.length)){var nr=0;Qe.forEach(function(jn){var Hn=It[jn.id].idx;nr+=Kt[zt][Hn]||0});var dr=nr-fn.sumTot*ie,Pr=Qe.concat([we]),en=[];Pr.forEach(function(jn,Hn){en[Hn]=Q[jn.originIndex]});var pn=x(Pr,Q)*Y,rn=dr-_e;B&&(rn=dr+pn-(_e+Nr)),rn>Ie&&(Ie=rn,Yt=fn)}}}),Ie>0){Yt.nodes.push(we);var Ur=we.clusterId;we.clusterId=Yt.id;var Sr=Wt.nodes.indexOf(we);Wt.nodes.splice(Sr,1);var gn=0,Rr=0;rt.forEach(function(ln){var Nn=ln.source,Ln=ln.target,fn=It[Nn].node.clusterId,Qe=It[Ln].node.clusterId;(fn===Yt.id&&Qe!==Yt.id||Qe===Yt.id&&fn!==Yt.id)&&(gn=gn+(ln[S]||1)),(fn===Ur&&Qe!==Ur||Qe===Ur&&fn!==Ur)&&(Rr=Rr+(ln[S]||1))}),Yt.sumTot=gn,Wt.sumTot=Rr}})}var er={},Jt=0;Object.keys(ge).forEach(function(we){var zt=ge[we];if(!zt.nodes||!zt.nodes.length){delete ge[we];return}var Wt=String(Jt+1);Wt!==we&&(zt.id=Wt,zt.nodes=zt.nodes.map(function(Ie){return{id:Ie.id,clusterId:Wt}}),ge[Wt]=zt,er[we]=Wt,delete ge[we],Jt++)}),$t.forEach(function(we){var zt=we.node,Wt=we.clusterId;zt&&(zt.clusterId=Wt,zt.clusterId&&er[zt.clusterId]&&(zt.clusterId=er[zt.clusterId]))});var ae=[],Se={};rt.forEach(function(we){var zt=we.source,Wt=we.target,Ie=we[S]||1,Yt=It[zt].node.clusterId,ie=It[Wt].node.clusterId;if(!(!Yt||!ie)){var Oe="".concat(Yt,"---").concat(ie);if(Se[Oe])Se[Oe].weight+=Ie,Se[Oe].count++;else{var re={source:Yt,target:ie,weight:Ie,count:1};Se[Oe]=re,ae.push(re)}}});var xe=[];return Object.keys(ge).forEach(function(we){xe.push(ge[we])}),{clusters:xe,clusterEdges:ae}},y=p;F.default=y},689454:function(He,F,z){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.default=void 0;var G=L(z(838823)),X=L(z(257085)),R=z(770643);function L(p){return p&&p.__esModule?p:{default:p}}var P=function(y,g){var A=[],_=y.nodes,S=_===void 0?[]:_,O=y.edges,B=O===void 0?[]:O;if(S.length===0)return A;var m=S[0],d=new Set;d.add(m);var tt=function(Q,it){return g?Q.weight-it.weight:0},Y=new X.default(tt);for((0,R.getEdgesByNodeId)(m.id,B).forEach(function(rt){Y.insert(rt)});!Y.isEmpty();){var V=Y.delMin(),$=V.source,q=V.target;d.has($)&&d.has(q)||(A.push(V),d.has($)||(d.add($),(0,R.getEdgesByNodeId)($,B).forEach(function(rt){Y.insert(rt)})),d.has(q)||(d.add(q),(0,R.getEdgesByNodeId)(q,B).forEach(function(rt){Y.insert(rt)})))}return A},N=function(y,g){var A=[],_=y.nodes,S=_===void 0?[]:_,O=y.edges,B=O===void 0?[]:O;if(S.length===0)return A;var m=B.map(function($){return $});g&&m.sort(function($,q){return $.weight-q.weight});for(var d=new G.default(S.map(function($){return $.id}));m.length>0;){var tt=m.shift(),Y=tt.source,V=tt.target;d.connected(Y,V)||(A.push(tt),d.union(Y,V))}return A},E=function(y,g,A){var _={prim:P,kruskal:N};return A?_[A](y,g):N(y,g)},x=E;F.default=x},274926:function(He,F,z){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.default=void 0;var G=R(z(182556)),X=z(770643);function R(N){return N&&N.__esModule?N:{default:N}}var L=function(E,x,p){typeof x!="number"&&(x=1e-6),typeof p!="number"&&(p=.85);for(var y=1,g=0,A=1e3,_=E.nodes,S=_===void 0?[]:_,O=E.edges,B=O===void 0?[]:O,m=S.length,d,tt={},Y={},V=0;V<m;++V){var $=S[V],q=$.id;tt[q]=1/m,Y[q]=1/m}for(var rt=(0,G.default)(E);A>0&&y>x;){g=0;for(var V=0;V<m;++V){var $=S[V],q=$.id;if(d=0,rt[$.id].inDegree===0)tt[q]=0;else{for(var Q=(0,X.getNeighbors)(q,B,"source"),it=0;it<Q.length;++it){var ht=Q[it],dt=rt[ht].outDegree;dt>0&&(d+=Y[ht]/dt)}tt[q]=p*d,g+=tt[q]}}g=(1-g)/m,y=0;for(var V=0;V<m;++V){var $=S[V],q=$.id;d=tt[q]+g,y+=Math.abs(d-Y[q]),Y[q]=d}A-=1}return Y},P=L;F.default=P},257085:function(He,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.default=void 0;var z=function(L,P){return L-P},G=function(){function R(L){L===void 0&&(L=z),this.compareFn=L,this.list=[]}return R.prototype.getLeft=function(L){return 2*L+1},R.prototype.getRight=function(L){return 2*L+2},R.prototype.getParent=function(L){return L===0?null:Math.floor((L-1)/2)},R.prototype.isEmpty=function(){return this.list.length<=0},R.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},R.prototype.delMin=function(){var L=this.top(),P=this.list.pop();return this.list.length>0&&(this.list[0]=P,this.moveDown(0)),L},R.prototype.insert=function(L){if(L!==null){this.list.push(L);var P=this.list.length-1;return this.moveUp(P),!0}return!1},R.prototype.moveUp=function(L){for(var P=this.getParent(L);L&&L>0&&this.compareFn(this.list[P],this.list[L])>0;){var N=this.list[P];this.list[P]=this.list[L],this.list[L]=N,L=P,P=this.getParent(L)}},R.prototype.moveDown=function(L){var P,N=L,E=this.getLeft(L),x=this.getRight(L),p=this.list.length;E!==null&&E<p&&this.compareFn(this.list[N],this.list[E])>0?N=E:x!==null&&x<p&&this.compareFn(this.list[N],this.list[x])>0&&(N=x),L!==N&&(P=[this.list[N],this.list[L]],this.list[L]=P[0],this.list[N]=P[1],this.moveDown(N))},R}(),X=G;F.default=X},488481:function(He,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.default=F.LinkedListNode=void 0;var z=function(P,N){return P===N},G=function(){function L(P,N){N===void 0&&(N=null),this.value=P,this.next=N}return L.prototype.toString=function(P){return P?P(this.value):"".concat(this.value)},L}();F.LinkedListNode=G;var X=function(){function L(P){P===void 0&&(P=z),this.head=null,this.tail=null,this.compare=P}return L.prototype.prepend=function(P){var N=new G(P,this.head);return this.head=N,this.tail||(this.tail=N),this},L.prototype.append=function(P){var N=new G(P);return this.head?(this.tail.next=N,this.tail=N,this):(this.head=N,this.tail=N,this)},L.prototype.delete=function(P){if(!this.head)return null;for(var N=null;this.head&&this.compare(this.head.value,P);)N=this.head,this.head=this.head.next;var E=this.head;if(E!==null)for(;E.next;)this.compare(E.next.value,P)?(N=E.next,E.next=E.next.next):E=E.next;return this.compare(this.tail.value,P)&&(this.tail=E),N},L.prototype.find=function(P){var N=P.value,E=N===void 0?void 0:N,x=P.callback,p=x===void 0?void 0:x;if(!this.head)return null;for(var y=this.head;y;){if(p&&p(y.value)||E!==void 0&&this.compare(y.value,E))return y;y=y.next}return null},L.prototype.deleteTail=function(){var P=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,P;for(var N=this.head;N.next;)N.next.next?N=N.next:N.next=null;return this.tail=N,P},L.prototype.deleteHead=function(){if(!this.head)return null;var P=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),P},L.prototype.fromArray=function(P){var N=this;return P.forEach(function(E){return N.append(E)}),this},L.prototype.toArray=function(){for(var P=[],N=this.head;N;)P.push(N),N=N.next;return P},L.prototype.reverse=function(){for(var P=this.head,N=null,E=null;P;)E=P.next,P.next=N,N=P,P=E;this.tail=this.head,this.head=N},L.prototype.toString=function(P){return P===void 0&&(P=void 0),this.toArray().map(function(N){return N.toString(P)}).toString()},L}(),R=X;F.default=R},893026:function(He,F,z){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.default=void 0;var G=X(z(488481));function X(P){return P&&P.__esModule?P:{default:P}}var R=function(){function P(){this.linkedList=new G.default}return P.prototype.isEmpty=function(){return!this.linkedList.head},P.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},P.prototype.enqueue=function(N){this.linkedList.append(N)},P.prototype.dequeue=function(){var N=this.linkedList.deleteHead();return N?N.value:null},P.prototype.toString=function(N){return this.linkedList.toString(N)},P}(),L=R;F.default=L},838823:function(He,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.default=void 0;var z=function(){function X(R){this.count=R.length,this.parent={};for(var L=0,P=R;L<P.length;L++){var N=P[L];this.parent[N]=N}}return X.prototype.find=function(R){for(;this.parent[R]!==R;)R=this.parent[R];return R},X.prototype.union=function(R,L){var P=this.find(R),N=this.find(L);P!==N&&(P<N?(this.parent[L]!==L&&this.union(this.parent[L],R),this.parent[L]=this.parent[R]):(this.parent[R]!==R&&this.union(this.parent[R],L),this.parent[R]=this.parent[L]))},X.prototype.connected=function(R,L){return this.find(R)===this.find(L)},X}(),G=z;F.default=G},317892:function(He,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.DistanceType=void 0;var z;F.DistanceType=z,function(G){G.EuclideanDistance="euclideanDistance"}(z||(F.DistanceType=z={}))},770643:function(He,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.uniqueId=F.getOutEdgesNodeId=F.getNeighbors=F.getEdgesByNodeId=void 0;var z=function(P,N,E){N===void 0&&(N=[]);var x=N.filter(function(A){return A.source===P||A.target===P});if(E==="target"){var p=function(_){return _.source===P};return x.filter(p).map(function(A){return A.target})}if(E==="source"){var y=function(_){return _.target===P};return x.filter(y).map(function(A){return A.source})}var g=function(_){return _.source===P?_.target:_.source};return x.map(g)};F.getNeighbors=z;var G=function(P,N){return N.filter(function(E){return E.source===P})};F.getOutEdgesNodeId=G;var X=function(P,N){return N.filter(function(E){return E.source===P||E.target===P})};F.getEdgesByNodeId=X;var R=function(P){P===void 0&&(P=0);var N="".concat(Math.random()).split(".")[1].substr(0,5),E="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(P,"-").concat(N).concat(E)};F.uniqueId=R},526838:function(He,F,z){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.oneHot=F.getDistance=F.getAllKeyValueMap=F.default=void 0;var G=z(413810),X=z(317892),R=L(z(29741));function L(p){return p&&p.__esModule?p:{default:p}}var P=function(y,g,A){var _=[];g!=null&&g.length?_=g:(y.forEach(function(O){_=_.concat(Object.keys(O))}),_=(0,G.uniq)(_));var S={};return _.forEach(function(O){var B=[];y.forEach(function(m){m[O]!==void 0&&m[O]!==""&&B.push(m[O])}),B.length&&!(A!=null&&A.includes(O))&&(S[O]=(0,G.uniq)(B))}),S};F.getAllKeyValueMap=P;var N=function(y,g,A){var _=P(y,g,A),S=[];if(!Object.keys(_).length)return S;var O=Object.values(_),B=O.every(function(m){return m.every(function(d){return typeof d=="number"})});return y.forEach(function(m,d){var tt=[];Object.keys(_).forEach(function(Y){var V=m[Y],$=_[Y],q=$.findIndex(function(it){return V===it}),rt=[];if(B)rt.push(V);else for(var Q=0;Q<$.length;Q++)Q===q?rt.push(1):rt.push(0);tt=tt.concat(rt)}),S[d]=tt}),S};F.oneHot=N;var E=function(y,g,A,_){A===void 0&&(A=X.DistanceType.EuclideanDistance);var S=0;switch(A){case X.DistanceType.EuclideanDistance:S=new R.default(y).euclideanDistance(new R.default(g));break;default:break}return S};F.getDistance=E;var x={getAllKeyValueMap:P,oneHot:N,getDistance:E};F.default=x},103665:function(He,F,z){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.getPropertyWeight=F.getAllSortProperties=F.getAllProperties=F.default=void 0;var G=z(592935),X=function(x,p){x===void 0&&(x=[]),p===void 0&&(p=100);var y={};x.forEach(function(A){A.properties&&Object.keys(A.properties).forEach(function(_){if(_==="id"||!"".concat(A.properties[_]).match(G.secondReg)&&!"".concat(A.properties[_]).match(G.dateReg)&&isNaN(Number(A.properties[_]))){y.hasOwnProperty(_)&&delete y[_];return}y.hasOwnProperty(_)?y[_]+=1:y[_]=1})});var g=Object.keys(y).sort(function(A,_){return y[_]-y[A]});return g.length<p?g:g.slice(0,p)};F.getAllSortProperties=X;var R=function(x,p){return p.map(function(y){return x.hasOwnProperty(y)?x[y]:0})},L=function(x){for(var p=X(x),y=[],g=0;g<x.length;g++)y[g]=R(x[g].properties,p);return y};F.getPropertyWeight=L;var P=function(x,p){p===void 0&&(p=void 0);var y=[];return x.forEach(function(g){p===void 0&&y.push(g),g[p]!==void 0&&y.push(g[p])}),y};F.getAllProperties=P;var N={getAllSortProperties:X,getPropertyWeight:L,getAllProperties:P};F.default=N},29741:function(He,F,z){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.default=void 0;var G=z(413810),X=function(){function L(P){this.arr=P}return L.prototype.getArr=function(){return this.arr||[]},L.prototype.add=function(P){var N,E=P.arr;if(!(!((N=this.arr)===null||N===void 0)&&N.length))return new L(E);if(!(E!=null&&E.length))return new L(this.arr);if(this.arr.length===E.length){var x=[];for(var p in this.arr)x[p]=this.arr[p]+E[p];return new L(x)}},L.prototype.subtract=function(P){var N,E=P.arr;if(!(!((N=this.arr)===null||N===void 0)&&N.length))return new L(E);if(!(E!=null&&E.length))return new L(this.arr);if(this.arr.length===E.length){var x=[];for(var p in this.arr)x[p]=this.arr[p]-E[p];return new L(x)}},L.prototype.avg=function(P){var N=[];if(P!==0)for(var E in this.arr)N[E]=this.arr[E]/P;return new L(N)},L.prototype.negate=function(){var P=[];for(var N in this.arr)P[N]=-this.arr[N];return new L(P)},L.prototype.squareEuclideanDistance=function(P){var N,E=P.arr;if(!(!((N=this.arr)===null||N===void 0)&&N.length)||!(E!=null&&E.length))return 0;if(this.arr.length===E.length){var x=0;for(var p in this.arr)x+=Math.pow(this.arr[p]-P.arr[p],2);return x}},L.prototype.euclideanDistance=function(P){var N,E=P.arr;if(!(!((N=this.arr)===null||N===void 0)&&N.length)||!(E!=null&&E.length))return 0;if(this.arr.length===E.length){var x=0;for(var p in this.arr)x+=Math.pow(this.arr[p]-P.arr[p],2);return Math.sqrt(x)}else console.error("The two vectors are unequal in length.")},L.prototype.normalize=function(){var P=[],N=(0,G.clone)(this.arr);N.sort(function(y,g){return y-g});var E=N[N.length-1],x=N[0];for(var p in this.arr)P[p]=(this.arr[p]-x)/(E-x);return new L(P)},L.prototype.norm2=function(){var P;if(!(!((P=this.arr)===null||P===void 0)&&P.length))return 0;var N=0;for(var E in this.arr)N+=Math.pow(this.arr[E],2);return Math.sqrt(N)},L.prototype.dot=function(P){var N,E=P.arr;if(!(!((N=this.arr)===null||N===void 0)&&N.length)||!(E!=null&&E.length))return 0;if(this.arr.length===E.length){var x=0;for(var p in this.arr)x+=this.arr[p]*P.arr[p];return x}else console.error("The two vectors are unequal in length.")},L.prototype.equal=function(P){var N,E=P.arr;if(((N=this.arr)===null||N===void 0?void 0:N.length)!==(E==null?void 0:E.length))return!1;for(var x in this.arr)if(this.arr[x]!==E[x])return!1;return!0},L}(),R=X;F.default=R},831656:function(He,F,z){"use strict";function G(Y){"@babel/helpers - typeof";return G=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(V){return typeof V}:function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V},G(Y)}Object.defineProperty(F,"__esModule",{value:!0}),Object.defineProperty(F,"GADDI",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(F,"breadthFirstSearch",{enumerable:!0,get:function(){return R.default}}),Object.defineProperty(F,"connectedComponent",{enumerable:!0,get:function(){return L.default}}),Object.defineProperty(F,"depthFirstSearch",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(F,"detectCycle",{enumerable:!0,get:function(){return N.default}}),Object.defineProperty(F,"dijkstra",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(F,"findAllPath",{enumerable:!0,get:function(){return p.findAllPath}}),Object.defineProperty(F,"findShortestPath",{enumerable:!0,get:function(){return p.findShortestPath}}),Object.defineProperty(F,"floydWarshall",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(F,"getAdjMatrix",{enumerable:!0,get:function(){return X.default}}),Object.defineProperty(F,"getDegree",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(F,"getInDegree",{enumerable:!0,get:function(){return P.getInDegree}}),Object.defineProperty(F,"getNeighbors",{enumerable:!0,get:function(){return B.getNeighbors}}),Object.defineProperty(F,"getOutDegree",{enumerable:!0,get:function(){return P.getOutDegree}}),Object.defineProperty(F,"labelPropagation",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(F,"louvain",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(F,"minimumSpanningTree",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(F,"pageRank",{enumerable:!0,get:function(){return S.default}});var X=tt(z(62238)),R=tt(z(683764)),L=tt(z(759527)),P=d(z(182556)),N=tt(z(994282)),E=tt(z(45891)),x=tt(z(878089)),p=z(241727),y=tt(z(975033)),g=tt(z(505170)),A=tt(z(135179)),_=tt(z(689454)),S=tt(z(274926)),O=tt(z(882812)),B=z(770643);function m(Y){if(typeof WeakMap!="function")return null;var V=new WeakMap,$=new WeakMap;return(m=function(rt){return rt?$:V})(Y)}function d(Y,V){if(!V&&Y&&Y.__esModule)return Y;if(Y===null||G(Y)!=="object"&&typeof Y!="function")return{default:Y};var $=m(V);if($&&$.has(Y))return $.get(Y);var q={},rt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Q in Y)if(Q!=="default"&&Object.prototype.hasOwnProperty.call(Y,Q)){var it=rt?Object.getOwnPropertyDescriptor(Y,Q):null;it&&(it.get||it.set)?Object.defineProperty(q,Q,it):q[Q]=Y[Q]}return q.default=Y,$&&$.set(Y,q),q}function tt(Y){return Y&&Y.__esModule?Y:{default:Y}}},66044:function(He,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.MESSAGE=F.ALGORITHM=void 0;var z={pageRank:"pageRank",breadthFirstSearch:"breadthFirstSearch",connectedComponent:"connectedComponent",depthFirstSearch:"depthFirstSearch",detectCycle:"detectCycle",detectDirectedCycle:"detectDirectedCycle",detectAllCycles:"detectAllCycles",detectAllDirectedCycle:"detectAllDirectedCycle",detectAllUndirectedCycle:"detectAllUndirectedCycle",dijkstra:"dijkstra",findAllPath:"findAllPath",findShortestPath:"findShortestPath",floydWarshall:"floydWarshall",getAdjMatrix:"getAdjMatrix",getDegree:"getDegree",getInDegree:"getInDegree",getNeighbors:"getNeighbors",getOutDegree:"getOutDegree",labelPropagation:"labelPropagation",louvain:"louvain",GADDI:"GADDI",minimumSpanningTree:"minimumSpanningTree",SUCCESS:"SUCCESS",FAILURE:"FAILURE"};F.ALGORITHM=z;var G={SUCCESS:"SUCCESS",FAILURE:"FAILURE"};F.MESSAGE=G},70585:function(He,F,z){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.default=void 0;var G=z(66044),X=R(z(612067));function R(N){return N&&N.__esModule?N:{default:N}}var L=function(E){return function(){for(var x=[],p=0;p<arguments.length;p++)x[p]=arguments[p];return new Promise(function(y,g){var A=new X.default;A.postMessage({_algorithmType:E,data:x}),A.onmessage=function(_){var S=_.data,O=S.data,B=S._algorithmType;G.MESSAGE.SUCCESS===B?y(O):g(),A.terminate()}})}},P=L;F.default=P},430485:function(He,F,z){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.pageRankAsync=F.minimumSpanningTreeAsync=F.louvainAsync=F.labelPropagationAsync=F.getOutDegreeAsync=F.getNeighborsAsync=F.getInDegreeAsync=F.getDegreeAsync=F.getAdjMatrixAsync=F.floydWarshallAsync=F.findShortestPathAsync=F.findAllPathAsync=F.dijkstraAsync=F.detectCycleAsync=F.detectAllUndirectedCycleAsync=F.detectAllDirectedCycleAsync=F.detectAllCyclesAsync=F.connectedComponentAsync=F.GADDIAsync=void 0;var G=R(z(70585)),X=z(66044);function R(q){return q&&q.__esModule?q:{default:q}}var L=function(rt,Q){return(0,G.default)(X.ALGORITHM.getAdjMatrix).apply(void 0,[rt,Q])};F.getAdjMatrixAsync=L;var P=function(rt,Q){return(0,G.default)(X.ALGORITHM.connectedComponent).apply(void 0,[rt,Q])};F.connectedComponentAsync=P;var N=function(rt){return(0,G.default)(X.ALGORITHM.getDegree)(rt)};F.getDegreeAsync=N;var E=function(rt,Q){return(0,G.default)(X.ALGORITHM.getInDegree)(rt,Q)};F.getInDegreeAsync=E;var x=function(rt,Q){return(0,G.default)(X.ALGORITHM.getOutDegree)(rt,Q)};F.getOutDegreeAsync=x;var p=function(rt){return(0,G.default)(X.ALGORITHM.detectCycle)(rt)};F.detectCycleAsync=p;var y=function(rt){return(0,G.default)(X.ALGORITHM.detectAllCycles)(rt)};F.detectAllCyclesAsync=y;var g=function(rt){return(0,G.default)(X.ALGORITHM.detectAllDirectedCycle)(rt)};F.detectAllDirectedCycleAsync=g;var A=function(rt){return(0,G.default)(X.ALGORITHM.detectAllUndirectedCycle)(rt)};F.detectAllUndirectedCycleAsync=A;var _=function(rt,Q,it,ht){return(0,G.default)(X.ALGORITHM.dijkstra).apply(void 0,[rt,Q,it,ht])};F.dijkstraAsync=_;var S=function(rt,Q,it,ht){return(0,G.default)(X.ALGORITHM.findAllPath).apply(void 0,[rt,Q,it,ht])};F.findAllPathAsync=S;var O=function(rt,Q,it,ht,dt){return(0,G.default)(X.ALGORITHM.findShortestPath).apply(void 0,[rt,Q,it,ht,dt])};F.findShortestPathAsync=O;var B=function(rt,Q){return(0,G.default)(X.ALGORITHM.floydWarshall).apply(void 0,[rt,Q])};F.floydWarshallAsync=B;var m=function(rt,Q,it,ht){return ht===void 0&&(ht=1e3),(0,G.default)(X.ALGORITHM.labelPropagation)(rt,Q,it,ht)};F.labelPropagationAsync=m;var d=function(rt,Q,it,ht){return(0,G.default)(X.ALGORITHM.louvain)(rt,Q,it,ht)};F.louvainAsync=d;var tt=function(rt,Q,it){return(0,G.default)(X.ALGORITHM.minimumSpanningTree).apply(void 0,[rt,Q,it])};F.minimumSpanningTreeAsync=tt;var Y=function(rt,Q,it){return(0,G.default)(X.ALGORITHM.pageRank).apply(void 0,[rt,Q,it])};F.pageRankAsync=Y;var V=function(rt,Q,it){return(0,G.default)(X.ALGORITHM.getNeighbors).apply(void 0,[rt,Q,it])};F.getNeighborsAsync=V;var $=function(rt,Q,it,ht,dt,Ot,It){return it===void 0&&(it=!1),Ot===void 0&&(Ot="cluster"),It===void 0&&(It="cluster"),(0,G.default)(X.ALGORITHM.GADDI).apply(void 0,[rt,Q,it,ht,dt,Ot,It])};F.GADDIAsync=$},612067:function(He,F,z){"use strict";function G(x){"@babel/helpers - typeof";return G=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},G(x)}Object.defineProperty(F,"__esModule",{value:!0}),F.default=void 0;var X=P(z(831656)),R=z(66044);function L(x){if(typeof WeakMap!="function")return null;var p=new WeakMap,y=new WeakMap;return(L=function(A){return A?y:p})(x)}function P(x,p){if(!p&&x&&x.__esModule)return x;if(x===null||G(x)!=="object"&&typeof x!="function")return{default:x};var y=L(p);if(y&&y.has(x))return y.get(x);var g={},A=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var _ in x)if(_!=="default"&&Object.prototype.hasOwnProperty.call(x,_)){var S=A?Object.getOwnPropertyDescriptor(x,_):null;S&&(S.get||S.set)?Object.defineProperty(g,_,S):g[_]=x[_]}return g.default=x,y&&y.set(x,g),g}var N=typeof self!="undefined"?self:{};N.onmessage=function(x){var p=x.data,y=p._algorithmType,g=p.data;if(y){if(typeof X[y]=="function"){var A=X[y].apply(X,g);N.postMessage({_algorithmType:R.MESSAGE.SUCCESS,data:A});return}N.postMessage({_algorithmType:R.MESSAGE.FAILURE})}};var E=null;F.default=E},901029:function(He,F,z){"use strict";z.r(F),z.d(F,{Kernel:function(){return Ot},World:function(){return la}});var G=z(115861),X=z(204942),R=z(215671),L=z(143144),P=z(936719),N=z.n(P),E=z(281763),x=z.n(E),p=z(701469),y=z.n(p),g=z(364687),A=z.n(g),_=null,S=1;function O(){return S++}var B=null,m=null,d;(function(K){K[K.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",K[K.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",K[K.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",K[K.POINTS=0]="POINTS",K[K.LINES=1]="LINES",K[K.LINE_LOOP=2]="LINE_LOOP",K[K.LINE_STRIP=3]="LINE_STRIP",K[K.TRIANGLES=4]="TRIANGLES",K[K.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",K[K.TRIANGLE_FAN=6]="TRIANGLE_FAN",K[K.ZERO=0]="ZERO",K[K.ONE=1]="ONE",K[K.SRC_COLOR=768]="SRC_COLOR",K[K.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",K[K.SRC_ALPHA=770]="SRC_ALPHA",K[K.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",K[K.DST_ALPHA=772]="DST_ALPHA",K[K.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",K[K.DST_COLOR=774]="DST_COLOR",K[K.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",K[K.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",K[K.FUNC_ADD=32774]="FUNC_ADD",K[K.BLEND_EQUATION=32777]="BLEND_EQUATION",K[K.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",K[K.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",K[K.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",K[K.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",K[K.MAX_EXT=32776]="MAX_EXT",K[K.MIN_EXT=32775]="MIN_EXT",K[K.BLEND_DST_RGB=32968]="BLEND_DST_RGB",K[K.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",K[K.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",K[K.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",K[K.CONSTANT_COLOR=32769]="CONSTANT_COLOR",K[K.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",K[K.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",K[K.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",K[K.BLEND_COLOR=32773]="BLEND_COLOR",K[K.ARRAY_BUFFER=34962]="ARRAY_BUFFER",K[K.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",K[K.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",K[K.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",K[K.STREAM_DRAW=35040]="STREAM_DRAW",K[K.STATIC_DRAW=35044]="STATIC_DRAW",K[K.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",K[K.BUFFER_SIZE=34660]="BUFFER_SIZE",K[K.BUFFER_USAGE=34661]="BUFFER_USAGE",K[K.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",K[K.FRONT=1028]="FRONT",K[K.BACK=1029]="BACK",K[K.FRONT_AND_BACK=1032]="FRONT_AND_BACK",K[K.CULL_FACE=2884]="CULL_FACE",K[K.BLEND=3042]="BLEND",K[K.DITHER=3024]="DITHER",K[K.STENCIL_TEST=2960]="STENCIL_TEST",K[K.DEPTH_TEST=2929]="DEPTH_TEST",K[K.SCISSOR_TEST=3089]="SCISSOR_TEST",K[K.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",K[K.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",K[K.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",K[K.NO_ERROR=0]="NO_ERROR",K[K.INVALID_ENUM=1280]="INVALID_ENUM",K[K.INVALID_VALUE=1281]="INVALID_VALUE",K[K.INVALID_OPERATION=1282]="INVALID_OPERATION",K[K.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",K[K.CW=2304]="CW",K[K.CCW=2305]="CCW",K[K.LINE_WIDTH=2849]="LINE_WIDTH",K[K.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",K[K.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",K[K.CULL_FACE_MODE=2885]="CULL_FACE_MODE",K[K.FRONT_FACE=2886]="FRONT_FACE",K[K.DEPTH_RANGE=2928]="DEPTH_RANGE",K[K.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",K[K.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",K[K.DEPTH_FUNC=2932]="DEPTH_FUNC",K[K.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",K[K.STENCIL_FUNC=2962]="STENCIL_FUNC",K[K.STENCIL_FAIL=2964]="STENCIL_FAIL",K[K.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",K[K.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",K[K.STENCIL_REF=2967]="STENCIL_REF",K[K.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",K[K.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",K[K.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",K[K.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",K[K.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",K[K.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",K[K.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",K[K.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",K[K.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",K[K.VIEWPORT=2978]="VIEWPORT",K[K.SCISSOR_BOX=3088]="SCISSOR_BOX",K[K.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",K[K.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",K[K.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",K[K.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",K[K.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",K[K.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",K[K.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",K[K.RED_BITS=3410]="RED_BITS",K[K.GREEN_BITS=3411]="GREEN_BITS",K[K.BLUE_BITS=3412]="BLUE_BITS",K[K.ALPHA_BITS=3413]="ALPHA_BITS",K[K.DEPTH_BITS=3414]="DEPTH_BITS",K[K.STENCIL_BITS=3415]="STENCIL_BITS",K[K.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",K[K.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",K[K.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",K[K.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",K[K.SAMPLES=32937]="SAMPLES",K[K.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",K[K.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",K[K.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",K[K.DONT_CARE=4352]="DONT_CARE",K[K.FASTEST=4353]="FASTEST",K[K.NICEST=4354]="NICEST",K[K.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",K[K.BYTE=5120]="BYTE",K[K.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",K[K.SHORT=5122]="SHORT",K[K.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",K[K.INT=5124]="INT",K[K.UNSIGNED_INT=5125]="UNSIGNED_INT",K[K.FLOAT=5126]="FLOAT",K[K.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",K[K.ALPHA=6406]="ALPHA",K[K.RGB=6407]="RGB",K[K.RGBA=6408]="RGBA",K[K.LUMINANCE=6409]="LUMINANCE",K[K.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",K[K.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",K[K.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",K[K.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",K[K.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",K[K.VERTEX_SHADER=35633]="VERTEX_SHADER",K[K.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",K[K.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",K[K.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",K[K.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",K[K.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",K[K.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",K[K.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",K[K.SHADER_TYPE=35663]="SHADER_TYPE",K[K.DELETE_STATUS=35712]="DELETE_STATUS",K[K.LINK_STATUS=35714]="LINK_STATUS",K[K.VALIDATE_STATUS=35715]="VALIDATE_STATUS",K[K.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",K[K.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",K[K.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",K[K.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",K[K.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",K[K.NEVER=512]="NEVER",K[K.LESS=513]="LESS",K[K.EQUAL=514]="EQUAL",K[K.LEQUAL=515]="LEQUAL",K[K.GREATER=516]="GREATER",K[K.NOTEQUAL=517]="NOTEQUAL",K[K.GEQUAL=518]="GEQUAL",K[K.ALWAYS=519]="ALWAYS",K[K.KEEP=7680]="KEEP",K[K.REPLACE=7681]="REPLACE",K[K.INCR=7682]="INCR",K[K.DECR=7683]="DECR",K[K.INVERT=5386]="INVERT",K[K.INCR_WRAP=34055]="INCR_WRAP",K[K.DECR_WRAP=34056]="DECR_WRAP",K[K.VENDOR=7936]="VENDOR",K[K.RENDERER=7937]="RENDERER",K[K.VERSION=7938]="VERSION",K[K.NEAREST=9728]="NEAREST",K[K.LINEAR=9729]="LINEAR",K[K.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",K[K.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",K[K.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",K[K.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",K[K.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",K[K.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",K[K.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",K[K.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",K[K.TEXTURE_2D=3553]="TEXTURE_2D",K[K.TEXTURE=5890]="TEXTURE",K[K.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",K[K.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",K[K.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",K[K.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",K[K.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",K[K.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",K[K.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",K[K.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",K[K.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",K[K.TEXTURE0=33984]="TEXTURE0",K[K.TEXTURE1=33985]="TEXTURE1",K[K.TEXTURE2=33986]="TEXTURE2",K[K.TEXTURE3=33987]="TEXTURE3",K[K.TEXTURE4=33988]="TEXTURE4",K[K.TEXTURE5=33989]="TEXTURE5",K[K.TEXTURE6=33990]="TEXTURE6",K[K.TEXTURE7=33991]="TEXTURE7",K[K.TEXTURE8=33992]="TEXTURE8",K[K.TEXTURE9=33993]="TEXTURE9",K[K.TEXTURE10=33994]="TEXTURE10",K[K.TEXTURE11=33995]="TEXTURE11",K[K.TEXTURE12=33996]="TEXTURE12",K[K.TEXTURE13=33997]="TEXTURE13",K[K.TEXTURE14=33998]="TEXTURE14",K[K.TEXTURE15=33999]="TEXTURE15",K[K.TEXTURE16=34e3]="TEXTURE16",K[K.TEXTURE17=34001]="TEXTURE17",K[K.TEXTURE18=34002]="TEXTURE18",K[K.TEXTURE19=34003]="TEXTURE19",K[K.TEXTURE20=34004]="TEXTURE20",K[K.TEXTURE21=34005]="TEXTURE21",K[K.TEXTURE22=34006]="TEXTURE22",K[K.TEXTURE23=34007]="TEXTURE23",K[K.TEXTURE24=34008]="TEXTURE24",K[K.TEXTURE25=34009]="TEXTURE25",K[K.TEXTURE26=34010]="TEXTURE26",K[K.TEXTURE27=34011]="TEXTURE27",K[K.TEXTURE28=34012]="TEXTURE28",K[K.TEXTURE29=34013]="TEXTURE29",K[K.TEXTURE30=34014]="TEXTURE30",K[K.TEXTURE31=34015]="TEXTURE31",K[K.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",K[K.REPEAT=10497]="REPEAT",K[K.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",K[K.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",K[K.FLOAT_VEC2=35664]="FLOAT_VEC2",K[K.FLOAT_VEC3=35665]="FLOAT_VEC3",K[K.FLOAT_VEC4=35666]="FLOAT_VEC4",K[K.INT_VEC2=35667]="INT_VEC2",K[K.INT_VEC3=35668]="INT_VEC3",K[K.INT_VEC4=35669]="INT_VEC4",K[K.BOOL=35670]="BOOL",K[K.BOOL_VEC2=35671]="BOOL_VEC2",K[K.BOOL_VEC3=35672]="BOOL_VEC3",K[K.BOOL_VEC4=35673]="BOOL_VEC4",K[K.FLOAT_MAT2=35674]="FLOAT_MAT2",K[K.FLOAT_MAT3=35675]="FLOAT_MAT3",K[K.FLOAT_MAT4=35676]="FLOAT_MAT4",K[K.SAMPLER_2D=35678]="SAMPLER_2D",K[K.SAMPLER_CUBE=35680]="SAMPLER_CUBE",K[K.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",K[K.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",K[K.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",K[K.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",K[K.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",K[K.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",K[K.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",K[K.COMPILE_STATUS=35713]="COMPILE_STATUS",K[K.LOW_FLOAT=36336]="LOW_FLOAT",K[K.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",K[K.HIGH_FLOAT=36338]="HIGH_FLOAT",K[K.LOW_INT=36339]="LOW_INT",K[K.MEDIUM_INT=36340]="MEDIUM_INT",K[K.HIGH_INT=36341]="HIGH_INT",K[K.FRAMEBUFFER=36160]="FRAMEBUFFER",K[K.RENDERBUFFER=36161]="RENDERBUFFER",K[K.RGBA4=32854]="RGBA4",K[K.RGB5_A1=32855]="RGB5_A1",K[K.RGB565=36194]="RGB565",K[K.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",K[K.STENCIL_INDEX=6401]="STENCIL_INDEX",K[K.STENCIL_INDEX8=36168]="STENCIL_INDEX8",K[K.DEPTH_STENCIL=34041]="DEPTH_STENCIL",K[K.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",K[K.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",K[K.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",K[K.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",K[K.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",K[K.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",K[K.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",K[K.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",K[K.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",K[K.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",K[K.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",K[K.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",K[K.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",K[K.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",K[K.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",K[K.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",K[K.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",K[K.NONE=0]="NONE",K[K.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",K[K.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",K[K.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",K[K.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",K[K.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",K[K.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",K[K.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",K[K.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",K[K.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",K[K.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",K[K.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",K[K.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",K[K.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",K[K.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",K[K.COPY_SRC=1]="COPY_SRC",K[K.COPY_DST=2]="COPY_DST",K[K.SAMPLED=4]="SAMPLED",K[K.STORAGE=8]="STORAGE",K[K.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(d||(d={}));var tt=function(){function K(){(0,R.Z)(this,K),this.config=void 0}return(0,L.Z)(K,[{key:"get",value:function(){return this.config}},{key:"set",value:function(nt){this.config=nt}}]),K}(),Y=typeof navigator!="undefined"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),V;(function(K){K.Void="Void",K.Boolean="Boolean",K.Float="Float",K.Uint32="Uint32",K.Int32="Int32",K.Vector="Vector",K.Vector2Float="vec2<f32>",K.Vector3Float="vec3<f32>",K.Vector4Float="vec4<f32>",K.Vector2Boolean="vec2<bool>",K.Vector3Boolean="vec3<bool>",K.Vector4Boolean="vec4<bool>",K.Vector2Uint="vec2<u32>",K.Vector3Uint="vec3<u32>",K.Vector4Uint="vec4<u32>",K.Vector2Int="vec2<i32>",K.Vector3Int="vec3<i32>",K.Vector4Int="vec4<i32>",K.Matrix="Matrix",K.Matrix3x3Float="mat3x3<f32>",K.Matrix4x4Float="mat4x4<i32>",K.Struct="Struct",K.FloatArray="Float[]",K.Vector4FloatArray="vec4<f32>[]"})(V||(V={}));var $;(function(K){K.Program="Program",K.Identifier="Identifier",K.VariableDeclaration="VariableDeclaration",K.BlockStatement="BlockStatement",K.ReturnStatement="ReturnStatement",K.FunctionDeclaration="FunctionDeclaration",K.VariableDeclarator="VariableDeclarator",K.AssignmentExpression="AssignmentExpression",K.LogicalExpression="LogicalExpression",K.BinaryExpression="BinaryExpression",K.ArrayExpression="ArrayExpression",K.UnaryExpression="UnaryExpression",K.UpdateExpression="UpdateExpression",K.FunctionExpression="FunctionExpression",K.MemberExpression="MemberExpression",K.ConditionalExpression="ConditionalExpression",K.ExpressionStatement="ExpressionStatement",K.CallExpression="CallExpression",K.NumThreadStatement="NumThreadStatement",K.StorageStatement="StorageStatement",K.DoWhileStatement="DoWhileStatement",K.WhileStatement="WhileStatement",K.ForStatement="ForStatement",K.BreakStatement="BreakStatement",K.ContinueStatement="ContinueStatement",K.IfStatement="IfStatement",K.ImportedFunctionStatement="ImportedFunctionStatement"})($||($={}));var q;(function(K){K.Input="Input",K.Output="Output",K.Uniform="Uniform",K.Workgroup="Workgroup",K.UniformConstant="UniformConstant",K.Image="Image",K.StorageBuffer="StorageBuffer",K.Private="Private",K.Function="Function"})(q||(q={}));var rt;(function(K){K.GLSL100="GLSL100",K.GLSL450="GLSL450",K.WGSL="WGSL"})(rt||(rt={}));var Q="__DefineValuePlaceholder__";function it(){if(typeof document!="undefined")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function ht(K,ft){var nt=Object.keys(K);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(K);ft&&(k=k.filter(function(M){return Object.getOwnPropertyDescriptor(K,M).enumerable})),nt.push.apply(nt,k)}return nt}function dt(K){for(var ft=1;ft<arguments.length;ft++){var nt=arguments[ft]!=null?arguments[ft]:{};ft%2?ht(Object(nt),!0).forEach(function(k){(0,X.Z)(K,k,nt[k])}):Object.getOwnPropertyDescriptors?Object.defineProperties(K,Object.getOwnPropertyDescriptors(nt)):ht(Object(nt)).forEach(function(k){Object.defineProperty(K,k,Object.getOwnPropertyDescriptor(nt,k))})}return K}var Ot=function(){function K(ft,nt){(0,R.Z)(this,K),this.engine=ft,this.configService=nt,this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}return(0,L.Z)(K,[{key:"init",value:function(){var nt=this.configService.get(),k=nt.canvas,M=nt.engineOptions;this.initPromise=this.engine.init(dt({canvas:k||it(),antialiasing:!1},M))}},{key:"setBundle",value:function(nt){this.compiledBundle=JSON.parse(JSON.stringify(nt))}},{key:"setDispatch",value:function(nt){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=nt),this}},{key:"setMaxIteration",value:function(nt){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=nt),this}},{key:"setBinding",value:function(nt,k){var M=this;if(typeof nt=="string"){var C=x()(k)||N()(k)||y()(k);if(this.compiledBundle&&this.compiledBundle.context){var j=this.compiledBundle.context.defines.find(function(At){return At.name===nt});if(j)return j.value=k,this;var xt=this.compiledBundle.context.uniforms.find(function(At){return At.name===nt});xt&&(C?(xt.data=k,xt.isReferer=!1,xt.storageClass===q.Uniform?this.model&&this.model.updateUniform(nt,k):this.model&&this.model.updateBuffer(nt,k)):(xt.isReferer=!0,xt.data=k))}}else Object.keys(nt).forEach(function(At){M.setBinding(At,nt[At])});return this}},{key:"execute",value:function(){var ft=(0,G.Z)(A().mark(function k(){var M=this,C,j,xt=arguments;return A().wrap(function(wt){for(;;)switch(wt.prev=wt.next){case 0:if(C=xt.length>0&&xt[0]!==void 0?xt[0]:1,!this.dirty){wt.next=6;break}return this.compiledBundle.context&&(C>1?this.compiledBundle.context.maxIteration=C:this.compiledBundle.context.maxIteration++),wt.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter(function(Pt){var Me=Pt.isReferer;return Me}).forEach(function(Pt){var Me=Pt.data,ve=Pt.name;M.model.confirmInput(Me.model,ve)}),j=0;j<C;j++)this.model.run();return this.engine.endFrame(),wt.abrupt("return",this);case 12:case"end":return wt.stop()}},k,this)}));function nt(){return ft.apply(this,arguments)}return nt}()},{key:"getOutput",value:function(){var ft=(0,G.Z)(A().mark(function k(){return A().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.abrupt("return",this.model.readData());case 1:case"end":return C.stop()}},k,this)}));function nt(){return ft.apply(this,arguments)}return nt}()},{key:"compile",value:function(){var ft=(0,G.Z)(A().mark(function k(){var M,C,j;return A().wrap(function(At){for(;;)switch(At.prev=At.next){case 0:return At.next=2,this.initPromise;case 2:return M=dt({},this.compiledBundle.context),C=this.engine.supportWebGPU?this.engine.useWGSL?rt.WGSL:rt.GLSL450:rt.GLSL100,j=this.compiledBundle.shaders[C],M.defines.filter(function(wt){return wt.runtime}).forEach(function(wt){var Pt="".concat(Q).concat(wt.name);j=j.replace(Pt,"".concat(wt.value))}),M.shader=j,M.uniforms.forEach(function(wt){if(!wt.data&&wt.storageClass===q.StorageBuffer){var Pt=1;wt.type===V.FloatArray?Pt=1:wt.type===V.Vector4FloatArray&&(Pt=4),wt.data=new Float32Array(M.output.length*Pt).fill(0)}}),this.compiledBundle.context=M,At.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=At.sent;case 12:case"end":return At.stop()}},k,this)}));function nt(){return ft.apply(this,arguments)}return nt}()}]),K}(),It=z(481550),Kt=z.n(It),Ft=function(){function K(ft,nt){(0,R.Z)(this,K),this.attribute=void 0,this.buffer=void 0;var k=nt.buffer,M=nt.offset,C=nt.stride,j=nt.normalized,xt=nt.size,At=nt.divisor;this.buffer=k,this.attribute={buffer:k.get(),offset:M||0,stride:C||0,normalized:j||!1,divisor:At||0},xt&&(this.attribute.size=xt)}return(0,L.Z)(K,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(nt){this.buffer.subData(nt)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),K}(),Nt,st,yt,kt,ee,$t,ge,Pe,er,Jt,ae,Se,xe,we,zt=(Nt={},(0,X.Z)(Nt,d.POINTS,"points"),(0,X.Z)(Nt,d.LINES,"lines"),(0,X.Z)(Nt,d.LINE_LOOP,"line loop"),(0,X.Z)(Nt,d.LINE_STRIP,"line strip"),(0,X.Z)(Nt,d.TRIANGLES,"triangles"),(0,X.Z)(Nt,d.TRIANGLE_FAN,"triangle fan"),(0,X.Z)(Nt,d.TRIANGLE_STRIP,"triangle strip"),Nt),Wt=(st={},(0,X.Z)(st,d.STATIC_DRAW,"static"),(0,X.Z)(st,d.DYNAMIC_DRAW,"dynamic"),(0,X.Z)(st,d.STREAM_DRAW,"stream"),st),Ie=(yt={},(0,X.Z)(yt,d.BYTE,"int8"),(0,X.Z)(yt,d.UNSIGNED_INT,"int16"),(0,X.Z)(yt,d.INT,"int32"),(0,X.Z)(yt,d.UNSIGNED_BYTE,"uint8"),(0,X.Z)(yt,d.UNSIGNED_SHORT,"uint16"),(0,X.Z)(yt,d.UNSIGNED_INT,"uint32"),(0,X.Z)(yt,d.FLOAT,"float"),yt),Yt=(kt={},(0,X.Z)(kt,d.ALPHA,"alpha"),(0,X.Z)(kt,d.LUMINANCE,"luminance"),(0,X.Z)(kt,d.LUMINANCE_ALPHA,"luminance alpha"),(0,X.Z)(kt,d.RGB,"rgb"),(0,X.Z)(kt,d.RGBA,"rgba"),(0,X.Z)(kt,d.RGBA4,"rgba4"),(0,X.Z)(kt,d.RGB5_A1,"rgb5 a1"),(0,X.Z)(kt,d.RGB565,"rgb565"),(0,X.Z)(kt,d.DEPTH_COMPONENT,"depth"),(0,X.Z)(kt,d.DEPTH_STENCIL,"depth stencil"),kt),ie=(ee={},(0,X.Z)(ee,d.DONT_CARE,"dont care"),(0,X.Z)(ee,d.NICEST,"nice"),(0,X.Z)(ee,d.FASTEST,"fast"),ee),Oe=($t={},(0,X.Z)($t,d.NEAREST,"nearest"),(0,X.Z)($t,d.LINEAR,"linear"),(0,X.Z)($t,d.LINEAR_MIPMAP_LINEAR,"mipmap"),(0,X.Z)($t,d.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),(0,X.Z)($t,d.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),(0,X.Z)($t,d.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),$t),re=(ge={},(0,X.Z)(ge,d.REPEAT,"repeat"),(0,X.Z)(ge,d.CLAMP_TO_EDGE,"clamp"),(0,X.Z)(ge,d.MIRRORED_REPEAT,"mirror"),ge),_e=(Pe={},(0,X.Z)(Pe,d.NONE,"none"),(0,X.Z)(Pe,d.BROWSER_DEFAULT_WEBGL,"browser"),Pe),Ge=(er={},(0,X.Z)(er,d.NEVER,"never"),(0,X.Z)(er,d.ALWAYS,"always"),(0,X.Z)(er,d.LESS,"less"),(0,X.Z)(er,d.LEQUAL,"lequal"),(0,X.Z)(er,d.GREATER,"greater"),(0,X.Z)(er,d.GEQUAL,"gequal"),(0,X.Z)(er,d.EQUAL,"equal"),(0,X.Z)(er,d.NOTEQUAL,"notequal"),er),Ct=(Jt={},(0,X.Z)(Jt,d.FUNC_ADD,"add"),(0,X.Z)(Jt,d.MIN_EXT,"min"),(0,X.Z)(Jt,d.MAX_EXT,"max"),(0,X.Z)(Jt,d.FUNC_SUBTRACT,"subtract"),(0,X.Z)(Jt,d.FUNC_REVERSE_SUBTRACT,"reverse subtract"),Jt),Nr=(ae={},(0,X.Z)(ae,d.ZERO,"zero"),(0,X.Z)(ae,d.ONE,"one"),(0,X.Z)(ae,d.SRC_COLOR,"src color"),(0,X.Z)(ae,d.ONE_MINUS_SRC_COLOR,"one minus src color"),(0,X.Z)(ae,d.SRC_ALPHA,"src alpha"),(0,X.Z)(ae,d.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),(0,X.Z)(ae,d.DST_COLOR,"dst color"),(0,X.Z)(ae,d.ONE_MINUS_DST_COLOR,"one minus dst color"),(0,X.Z)(ae,d.DST_ALPHA,"dst alpha"),(0,X.Z)(ae,d.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),(0,X.Z)(ae,d.CONSTANT_COLOR,"constant color"),(0,X.Z)(ae,d.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),(0,X.Z)(ae,d.CONSTANT_ALPHA,"constant alpha"),(0,X.Z)(ae,d.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),(0,X.Z)(ae,d.SRC_ALPHA_SATURATE,"src alpha saturate"),ae),Or=(Se={},(0,X.Z)(Se,d.NEVER,"never"),(0,X.Z)(Se,d.ALWAYS,"always"),(0,X.Z)(Se,d.LESS,"less"),(0,X.Z)(Se,d.LEQUAL,"lequal"),(0,X.Z)(Se,d.GREATER,"greater"),(0,X.Z)(Se,d.GEQUAL,"gequal"),(0,X.Z)(Se,d.EQUAL,"equal"),(0,X.Z)(Se,d.NOTEQUAL,"notequal"),Se),Ur=(xe={},(0,X.Z)(xe,d.ZERO,"zero"),(0,X.Z)(xe,d.KEEP,"keep"),(0,X.Z)(xe,d.REPLACE,"replace"),(0,X.Z)(xe,d.INVERT,"invert"),(0,X.Z)(xe,d.INCR,"increment"),(0,X.Z)(xe,d.DECR,"decrement"),(0,X.Z)(xe,d.INCR_WRAP,"increment wrap"),(0,X.Z)(xe,d.DECR_WRAP,"decrement wrap"),xe),Sr=(we={},(0,X.Z)(we,d.FRONT,"front"),(0,X.Z)(we,d.BACK,"back"),we),gn=function(){function K(ft,nt){(0,R.Z)(this,K),this.buffer=void 0;var k=nt.data,M=nt.usage,C=nt.type;this.buffer=ft.buffer({data:k,usage:Wt[M||d.STATIC_DRAW],type:Ie[C||d.UNSIGNED_BYTE]})}return(0,L.Z)(K,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){}},{key:"subData",value:function(nt){var k=nt.data,M=nt.offset;this.buffer.subdata(k,M)}}]),K}(),Rr=z(974902);function ln(K,ft){var nt=Object.keys(K);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(K);ft&&(k=k.filter(function(M){return Object.getOwnPropertyDescriptor(K,M).enumerable})),nt.push.apply(nt,k)}return nt}function Nn(K){for(var ft=1;ft<arguments.length;ft++){var nt=arguments[ft]!=null?arguments[ft]:{};ft%2?ln(Object(nt),!0).forEach(function(k){(0,X.Z)(K,k,nt[k])}):Object.getOwnPropertyDescriptors?Object.defineProperties(K,Object.getOwnPropertyDescriptors(nt)):ln(Object(nt)).forEach(function(k){Object.defineProperty(K,k,Object.getOwnPropertyDescriptor(nt,k))})}return K}var Ln=`attribute vec3 a_Position;
attribute vec2 a_TexCoord;

varying vec2 v_TexCoord;

void main() {
  gl_Position = vec4(a_Position, 1.0);
  v_TexCoord = a_TexCoord;
}`,fn=0,Qe=!1,nr=function(){function K(ft,nt){var k=this;(0,R.Z)(this,K),this.reGl=ft,this.context=nt,this.entity=O(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var M={};this.context.uniforms.forEach(function(wt){var Pt=wt.name,Me=wt.type,ve=wt.data,Ke=wt.isReferer,br=wt.storageClass;if(br===q.StorageBuffer){if(Ke)k.textureCache[Pt]={data:void 0},M["".concat(Pt,"Size")]=function(){return ve.compiledBundle.context.output.textureSize};else{k.textureCache[Pt]=k.calcDataTexture(Pt,Me,ve);var ir=k.textureCache[Pt],mr=ir.textureWidth,Mn=ir.isOutput;M["".concat(Pt,"Size")]=[mr,mr],Mn&&(k.outputTextureName=Pt,k.context.needPingpong&&(k.outputTextureName="".concat(Pt,"Output"),k.textureCache[k.outputTextureName]=k.calcDataTexture(Pt,Me,ve)))}M[Pt]=function(){return Qe&&console.log("[".concat(k.entity,"]: ").concat(Pt," ").concat(k.textureCache[Pt].id)),k.textureCache[Pt].texture}}else if(br===q.Uniform){if(ve&&(Array.isArray(ve)||N()(ve))&&ve.length>16)throw new Error("invalid data type ".concat(Me));M[Pt]=function(){return wt.data}}});var C=this.getOuputDataTexture(),j=C.textureWidth,xt=C.texelCount;M.u_OutputTextureSize=[j,j],M.u_OutputTexelCount=xt,this.context.output.textureSize=[j,j];var At={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(this.context.shader),uniforms:M,vert:Ln,primitive:"triangle strip",count:4};this.computeCommand=this.reGl(At)}return(0,L.Z)(K,[{key:"run",value:function(){var nt=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use(function(){nt.computeCommand()}),Qe&&console.log("[".concat(this.entity,"]: output ").concat(this.getOuputDataTexture().id))}},{key:"readData",value:function(){var ft=(0,G.Z)(A().mark(function k(){var M=this,C,j,xt,At,wt,Pt,Me,ve;return A().wrap(function(br){for(;;)switch(br.prev=br.next){case 0:if(this.reGl({framebuffer:this.texFBO})(function(){C=M.reGl.read()}),!C){br.next=6;break}if(j=this.getOuputDataTexture(),xt=j.originalDataLength,At=j.elementsPerTexel,wt=j.typedArrayConstructor,Pt=wt===void 0?Float32Array:wt,Me=[],At!==4)for(ve=0;ve<C.length;ve+=4)At===1?Me.push(C[ve]):At===2?Me.push(C[ve],C[ve+1]):Me.push(C[ve],C[ve+1],C[ve+2]);else Me=C;return br.abrupt("return",new Pt(Me.slice(0,xt)));case 6:return br.abrupt("return",new Float32Array);case 7:case"end":return br.stop()}},k,this)}));function nt(){return ft.apply(this,arguments)}return nt}()},{key:"confirmInput",value:function(nt,k){var M;this.entity===nt.entity?(this.dynamicPingpong=!0,M=this):M=nt,this.textureCache[k].id=M.getOuputDataTexture().id,this.textureCache[k].texture=M.getOuputDataTexture().texture,Qe&&console.log("[".concat(this.entity,"]: confirm input ").concat(k," from model ").concat(M.entity,", ").concat(M.getOuputDataTexture().id))}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(nt,k){var M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,C=this.context.uniforms.find(function(wt){var Pt=wt.name;return Pt===nt});if(C){var j=this.calcDataTexture(nt,C.type,k),xt=j.texture,At=j.data;this.textureCache[nt].data=At,this.textureCache[nt].texture=xt}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var nt=this.context.output.name;this.textureCache[nt].id=this.getOuputDataTexture().id,this.textureCache[nt].texture=this.getOuputDataTexture().texture}var k=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=k,Qe&&console.log("[".concat(this.entity,"]: after swap, output ").concat(this.getOuputDataTexture().id))}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var nt=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=nt}},{key:"cloneDataTexture",value:function(nt){var k=nt.data,M=nt.textureWidth;return Nn(Nn({},nt),{},{id:fn++,texture:this.reGl.texture({width:M,height:M,data:k,type:"float"})})}},{key:"calcDataTexture",value:function(nt,k,M){var C=1;k===V.Vector4FloatArray&&(C=4);for(var j=[],xt=0;xt<M.length;xt+=C)C===1?j.push(M[xt],0,0,0):C===2?j.push(M[xt],M[xt+1],0,0):C===3?j.push(M[xt],M[xt+1],M[xt+2],0):C===4&&j.push(M[xt],M[xt+1],M[xt+2],M[xt+3]);var At=M.length,wt=Math.ceil(At/C),Pt=Math.ceil(Math.sqrt(wt)),Me=Pt*Pt;wt<Me&&j.push.apply(j,(0,Rr.Z)(new Array((Me-wt)*4).fill(0)));var ve=this.reGl.texture({width:Pt,height:Pt,data:j,type:"float"});return{id:fn++,data:j,originalDataLength:At,typedArrayConstructor:N()(M)?M.constructor:void 0,textureWidth:Pt,texture:ve,texelCount:wt,elementsPerTexel:C,isOutput:nt===this.context.output.name}}}]),K}(),dr=function(){function K(ft,nt){(0,R.Z)(this,K),this.elements=void 0;var k=nt.data,M=nt.usage,C=nt.type,j=nt.count;this.elements=ft.elements({data:k,usage:Wt[M||d.STATIC_DRAW],type:Ie[C||d.UNSIGNED_BYTE],count:j})}return(0,L.Z)(K,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(nt){var k=nt.data;this.elements.subdata(k)}},{key:"destroy",value:function(){this.elements.destroy()}}]),K}(),Pr=function(){function K(ft,nt){(0,R.Z)(this,K),this.framebuffer=void 0;var k=nt.width,M=nt.height,C=nt.color,j=nt.colors,xt=nt.depth,At=nt.stencil,wt={width:k,height:M};Array.isArray(j)&&(wt.colors=j.map(function(Pt){return Pt.get()})),C&&typeof C!="boolean"&&(wt.color=C.get()),this.framebuffer=ft.framebuffer(wt)}return(0,L.Z)(K,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(nt){var k=nt.width,M=nt.height;this.framebuffer.resize(k,M)}}]),K}(),en=z(671002),pn=z(968630),rn=z.n(pn);function jn(K){var ft={};return Object.keys(K).forEach(function(nt){Hn(nt,K[nt],ft,"")}),ft}function Hn(K,ft,nt,k){if(ft===null||typeof ft=="number"||typeof ft=="boolean"||Array.isArray(ft)&&typeof ft[0]=="number"||N()(ft)||ft===""||ft.resize!==void 0){nt["".concat(k&&k+".").concat(K)]=ft;return}rn()(ft)&&Object.keys(ft).forEach(function(M){Hn(M,ft[M],nt,"".concat(k&&k+".").concat(K))}),Array.isArray(ft)&&ft.forEach(function(M,C){Object.keys(M).forEach(function(j){Hn(j,M[j],nt,"".concat(k&&k+".").concat(K,"[").concat(C,"]"))})})}function oa(K,ft){var nt=Object.keys(K);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(K);ft&&(k=k.filter(function(M){return Object.getOwnPropertyDescriptor(K,M).enumerable})),nt.push.apply(nt,k)}return nt}function dn(K){for(var ft=1;ft<arguments.length;ft++){var nt=arguments[ft]!=null?arguments[ft]:{};ft%2?oa(Object(nt),!0).forEach(function(k){(0,X.Z)(K,k,nt[k])}):Object.getOwnPropertyDescriptors?Object.defineProperties(K,Object.getOwnPropertyDescriptors(nt)):oa(Object(nt)).forEach(function(k){Object.defineProperty(K,k,Object.getOwnPropertyDescriptor(nt,k))})}return K}var Wn=function(){function K(ft,nt){(0,R.Z)(this,K),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=ft;var k=nt.vs,M=nt.fs,C=nt.defines,j=nt.attributes,xt=nt.uniforms,At=nt.primitive,wt=nt.count,Pt=nt.elements,Me=nt.depth,ve=nt.blend,Ke=nt.stencil,br=nt.cull,ir=nt.instances,mr=nt.scissor,Mn=nt.viewport,Xe={};xt&&(this.uniforms=jn(xt),Object.keys(xt).forEach(function(Wr){Xe[Wr]=ft.prop(Wr)}));var vr={};Object.keys(j).forEach(function(Wr){vr[Wr]=j[Wr].get()});var Er=C&&this.generateDefines(C)||"",on={attributes:vr,frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(Er,`
`).concat(M),uniforms:Xe,vert:`
`.concat(Er,`
`).concat(k),primitive:zt[At===void 0?d.TRIANGLES:At]};ir&&(on.instances=ir),wt&&(on.count=wt),Pt&&(on.elements=Pt.get()),mr&&(on.scissor=mr),Mn&&(on.viewport=Mn),this.initDepthDrawParams({depth:Me},on),this.initBlendDrawParams({blend:ve},on),this.initStencilDrawParams({stencil:Ke},on),this.initCullDrawParams({cull:br},on),this.drawCommand=ft(on)}return(0,L.Z)(K,[{key:"addUniforms",value:function(nt){this.uniforms=dn(dn({},this.uniforms),jn(nt))}},{key:"draw",value:function(nt){var k=dn(dn({},this.uniforms),jn(nt.uniforms||{})),M={};Object.keys(k).forEach(function(C){var j=(0,en.Z)(k[C]);j==="boolean"||j==="number"||Array.isArray(k[C])||k[C].BYTES_PER_ELEMENT?M[C]=k[C]:j==="string"||(M[C]=k[C].get())}),this.drawCommand(M)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(nt,k){var M=nt.depth;M&&(k.depth={enable:M.enable===void 0?!0:!!M.enable,mask:M.mask===void 0?!0:!!M.mask,func:Ge[M.func||d.LESS],range:M.range||[0,1]})}},{key:"initBlendDrawParams",value:function(nt,k){var M=nt.blend;if(M){var C=M.enable,j=M.func,xt=M.equation,At=M.color,wt=At===void 0?[0,0,0,0]:At;k.blend={enable:!!C,func:{srcRGB:Nr[j&&j.srcRGB||d.SRC_ALPHA],srcAlpha:Nr[j&&j.srcAlpha||d.SRC_ALPHA],dstRGB:Nr[j&&j.dstRGB||d.ONE_MINUS_SRC_ALPHA],dstAlpha:Nr[j&&j.dstAlpha||d.ONE_MINUS_SRC_ALPHA]},equation:{rgb:Ct[xt&&xt.rgb||d.FUNC_ADD],alpha:Ct[xt&&xt.alpha||d.FUNC_ADD]},color:wt}}}},{key:"initStencilDrawParams",value:function(nt,k){var M=nt.stencil;if(M){var C=M.enable,j=M.mask,xt=j===void 0?-1:j,At=M.func,wt=At===void 0?{cmp:d.ALWAYS,ref:0,mask:-1}:At,Pt=M.opFront,Me=Pt===void 0?{fail:d.KEEP,zfail:d.KEEP,zpass:d.KEEP}:Pt,ve=M.opBack,Ke=ve===void 0?{fail:d.KEEP,zfail:d.KEEP,zpass:d.KEEP}:ve;k.stencil={enable:!!C,mask:xt,func:dn(dn({},wt),{},{cmp:Or[wt.cmp]}),opFront:{fail:Ur[Me.fail],zfail:Ur[Me.zfail],zpass:Ur[Me.zpass]},opBack:{fail:Ur[Ke.fail],zfail:Ur[Ke.zfail],zpass:Ur[Ke.zpass]}}}}},{key:"initCullDrawParams",value:function(nt,k){var M=nt.cull;if(M){var C=M.enable,j=M.face,xt=j===void 0?d.BACK:j;k.cull={enable:!!C,face:Sr[xt]}}}},{key:"generateDefines",value:function(nt){return Object.keys(nt).map(function(k){return"#define ".concat(k," ").concat(Number(nt[k]))}).join(`
`)}}]),K}(),Dn=function(){function K(ft,nt){(0,R.Z)(this,K),this.texture=void 0,this.width=void 0,this.height=void 0;var k=nt.data,M=nt.type,C=M===void 0?d.UNSIGNED_BYTE:M,j=nt.width,xt=nt.height,At=nt.flipY,wt=At===void 0?!1:At,Pt=nt.format,Me=Pt===void 0?d.RGBA:Pt,ve=nt.mipmap,Ke=ve===void 0?!1:ve,br=nt.wrapS,ir=br===void 0?d.CLAMP_TO_EDGE:br,mr=nt.wrapT,Mn=mr===void 0?d.CLAMP_TO_EDGE:mr,Xe=nt.aniso,vr=Xe===void 0?0:Xe,Er=nt.alignment,on=Er===void 0?1:Er,Wr=nt.premultiplyAlpha,xa=Wr===void 0?!1:Wr,Ta=nt.mag,Rn=Ta===void 0?d.NEAREST:Ta,Jn=nt.min,Ga=Jn===void 0?d.NEAREST:Jn,Aa=nt.colorSpace,an=Aa===void 0?d.BROWSER_DEFAULT_WEBGL:Aa;this.width=j,this.height=xt;var Vn={width:j,height:xt,type:Ie[C],format:Yt[Me],wrapS:re[ir],wrapT:re[Mn],mag:Oe[Rn],min:Oe[Ga],alignment:on,flipY:wt,colorSpace:_e[an],premultiplyAlpha:xa,aniso:vr};k&&(Vn.data=k),typeof Ke=="number"?Vn.mipmap=ie[Ke]:typeof Ke=="boolean"&&(Vn.mipmap=Ke),this.texture=ft.texture(Vn)}return(0,L.Z)(K,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(nt){var k=nt.width,M=nt.height;this.texture.resize(k,M),this.width=k,this.height=M}},{key:"destroy",value:function(){this.texture.destroy()}}]),K}(),Cn=function(){function K(){var ft=this;(0,R.Z)(this,K),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var nt=(0,G.Z)(A().mark(function k(M){return A().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(!M.uniforms){j.next=3;break}return j.next=3,Promise.all(Object.keys(M.uniforms).map(function(){var xt=(0,G.Z)(A().mark(function At(wt){var Pt;return A().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:if(!(M.uniforms[wt]&&M.uniforms[wt].load!==void 0)){ve.next=5;break}return ve.next=3,M.uniforms[wt].load();case 3:Pt=ve.sent,M.uniforms[wt]=Pt;case 5:case"end":return ve.stop()}},At)}));return function(At){return xt.apply(this,arguments)}}()));case 3:return j.abrupt("return",new Wn(ft.gl,M));case 4:case"end":return j.stop()}},k)}));return function(k){return nt.apply(this,arguments)}}(),this.createAttribute=function(nt){return new Ft(ft.gl,nt)},this.createBuffer=function(nt){return new gn(ft.gl,nt)},this.createElements=function(nt){return new dr(ft.gl,nt)},this.createTexture2D=function(nt){return new Dn(ft.gl,nt)},this.createFramebuffer=function(nt){return new Pr(ft.gl,nt)},this.useFramebuffer=function(nt,k){ft.gl({framebuffer:nt?nt.get():null})(k)},this.createComputeModel=function(){var nt=(0,G.Z)(A().mark(function k(M){return A().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",new nr(ft.gl,M));case 1:case"end":return j.stop()}},k)}));return function(k){return nt.apply(this,arguments)}}(),this.clear=function(nt){var k=nt.color,M=nt.depth,C=nt.stencil,j=nt.framebuffer,xt=j===void 0?null:j,At={color:k,depth:M,stencil:C};At.framebuffer=xt===null?xt:xt.get(),ft.gl.clear(At)},this.setScissor=function(nt){ft.gl&&ft.gl._gl&&(nt.enable&&nt.box?(ft.gl._gl.enable(d.SCISSOR_TEST),ft.gl._gl.scissor(nt.box.x,nt.box.y,nt.box.width,nt.box.height)):ft.gl._gl.disable(d.SCISSOR_TEST),ft.gl._refresh())},this.viewport=function(nt){var k=nt.x,M=nt.y,C=nt.width,j=nt.height;ft.gl&&ft.gl._gl&&(ft.gl._gl.viewport(k,M,C,j),ft.gl._refresh())},this.readPixels=function(nt){var k=nt.framebuffer,M=nt.x,C=nt.y,j=nt.width,xt=nt.height,At={x:M,y:C,width:j,height:xt};return k&&(At.framebuffer=k.get()),ft.gl.read(At)},this.getCanvas=function(){return ft.$canvas},this.getGLContext=function(){return ft.gl._gl},this.destroy=function(){ft.gl&&(ft.gl.destroy(),ft.inited=!1)}}return(0,L.Z)(K,[{key:"init",value:function(){var ft=(0,G.Z)(A().mark(function k(M){return A().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(!this.inited){j.next=2;break}return j.abrupt("return");case 2:return this.$canvas=M.canvas,j.next=5,new Promise(function(xt,At){Kt()({canvas:M.canvas,attributes:{alpha:!0,antialias:M.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(Pt,Me){(Pt||!Me)&&At(Pt),xt(Me)}})});case 5:this.gl=j.sent,this.inited=!0;case 7:case"end":return j.stop()}},k,this)}));function nt(k){return ft.apply(this,arguments)}return nt}()},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),K}(),la=function(){function K(){(0,R.Z)(this,K),this.engine=void 0,this.configService=new tt}return(0,L.Z)(K,[{key:"setConfig",value:function(nt){this.configService.set(nt)}},{key:"setEngine",value:function(nt){this.engine=nt}},{key:"createEntity",value:function(){return O()}},{key:"createKernel",value:function(nt){var k=new Ot(this.engine,this.configService);return typeof nt=="string"?k.setBundle(JSON.parse(nt)):k.setBundle(nt),k.init(),k}},{key:"destroy",value:function(){this.engine.destroy()}}],[{key:"create",value:function(){var nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},k=new K;return k.setConfig(nt),k.setEngine(new Cn),k}}]),K}()},171094:function(He,F,z){"use strict";z.d(F,{ZP:function(){return __}});var G={};z.r(G),z.d(G,{GADDI:function(){return Io},Stack:function(){return Yn},breadthFirstSearch:function(){return Ie},connectedComponent:function(){return Oe},cosineSimilarity:function(){return vr},default:function(){return Oo},depthFirstSearch:function(){return Ur},detectAllCycles:function(){return ln},detectAllDirectedCycle:function(){return Rr},detectAllUndirectedCycle:function(){return gn},detectCycle:function(){return Nn},detectDirectedCycle:function(){return So},dijkstra:function(){return Qe},findAllPath:function(){return Pr},findShortestPath:function(){return dr},floydWarshall:function(){return pn},getAdjMatrix:function(){return kt},getDegree:function(){return _e},getInDegree:function(){return Ge},getNeighbors:function(){return ae},getOutDegree:function(){return Ct},iLouvain:function(){return ve},kCore:function(){return br},kMeans:function(){return Mn},labelPropagation:function(){return jn},louvain:function(){return Pt},minimumSpanningTree:function(){return Vn},nodesCosineSimilarity:function(){return on},pageRank:function(){return Dt}});var X={};z.r(X),z.d(X,{Line:function(){return ja},applyMatrix:function(){return ei},compare:function(){return Ai},distance:function(){return Wo},floydWarshall:function(){return is},fractionToLine:function(){return Ki},getAdjMatrix:function(){return Xo},getBBoxBoundLine:function(){return yi},getCircleCenterByPoints:function(){return Do},getCircleIntersectByPoint:function(){return eo},getDegree:function(){return Xi},getEllipseIntersectByPoint:function(){return ro},getLineIntersect:function(){return Uo},getPointsCenter:function(){return Yo},getRectIntersectByPoint:function(){return ps},intersectBBox:function(){return Yi},invertMatrix:function(){return fo},isPointInPolygon:function(){return Eo},isPointsOverlap:function(){return lo},isPolygonsIntersect:function(){return pa},itemIntersectByLine:function(){return ki},lerp:function(){return Cs},lerpArray:function(){return ci},move:function(){return Xa},pointLineDistance:function(){return ou},pointLineSquareDist:function(){return ts},pointRectSquareDist:function(){return Rs},rotate:function(){return iu},scale:function(){return As},scaleMatrix:function(){return No},squareDist:function(){return wo},translate:function(){return Jo}});var R={};z.r(R),z.d(R,{cloneBesidesImg:function(){return Js},getAnimateCfgWithCallback:function(){return cs},getBBox:function(){return ai},getComboBBox:function(){return fu},getLabelPosition:function(){return ao},getLetterWidth:function(){return qs},getLoopCfgs:function(){return Zi},getTextSize:function(){return Xu},plainCombosToTrees:function(){return uu},reconstructTree:function(){return Qs},shouldRefreshEdge:function(){return Is},traverseTree:function(){return Ri},traverseTreeUp:function(){return vo},truncateLabelByLength:function(){return Au}});var L={};z.r(L),z.d(L,{catmullRomToBezier:function(){return vt},fillPath:function(){return Ii},fillPathByDiff:function(){return ii},formatPath:function(){return ko},intersection:function(){return Ni},parsePathArray:function(){return Ye},parsePathString:function(){return D},pathToAbsolute:function(){return Lt},pathToCurve:function(){return he},rectPath:function(){return Tr}});var P={};z.r(P),z.d(P,{easeBack:function(){return Ql},easeBackIn:function(){return Uc},easeBackInOut:function(){return Ql},easeBackOut:function(){return yh},easeBounce:function(){return yu},easeBounceIn:function(){return ql},easeBounceInOut:function(){return $u},easeBounceOut:function(){return yu},easeCircle:function(){return nc},easeCircleIn:function(){return bl},easeCircleInOut:function(){return nc},easeCircleOut:function(){return Rc},easeCubic:function(){return pl},easeCubicIn:function(){return ph},easeCubicInOut:function(){return pl},easeCubicOut:function(){return Vl},easeElastic:function(){return wl},easeElasticIn:function(){return Jl},easeElasticInOut:function(){return mh},easeElasticOut:function(){return wl},easeExp:function(){return rc},easeExpIn:function(){return Pc},easeExpInOut:function(){return rc},easeExpOut:function(){return kc},easeLinear:function(){return Xl},easePoly:function(){return Kl},easePolyIn:function(){return jl},easePolyInOut:function(){return Kl},easePolyOut:function(){return Hl},easeQuad:function(){return gl},easeQuadIn:function(){return Ku},easeQuadInOut:function(){return gl},easeQuadOut:function(){return Yl},easeSin:function(){return Nc},easeSinIn:function(){return Zl},easeSinInOut:function(){return Nc},easeSinOut:function(){return $l}});var N={};z.r(N),z.d(N,{calculationItemsBBox:function(){return Hd},cloneEvent:function(){return dy},formatPadding:function(){return Gv},isNaN:function(){return Af},isViewportChanged:function(){return gy},processParallelEdges:function(){return py},uniqueId:function(){return Fv}});var E={};z.r(E),z.d(E,{getClosedSpline:function(){return Kv},getControlPoint:function(){return tv},getSpline:function(){return fg},getStarPath:function(){return Ry},paddedHull:function(){return vg},pathToPoints:function(){return Hv},pointsToPolygon:function(){return ky},roundedHull:function(){return Zv}});var x={};z.r(x),z.d(x,{defaultSubjectColors:function(){return nm}});var p={};z.r(p),z.d(p,{isForce:function(){return Sg}});var y={};z.r(y),z.d(y,{Base:function(){return qu},Circle:function(){return Tm},Ellipse:function(){return Om},Image:function(){return Dm},Line:function(){return Pm},Marker:function(){return Bm},Path:function(){return ud},Polygon:function(){return jm},Polyline:function(){return Km},Rect:function(){return Qm},Text:function(){return t1}});var g={};z.r(g),z.d(g,{Base:function(){return Ru},Circle:function(){return u1},Dom:function(){return c1},Ellipse:function(){return h1},Image:function(){return d1},Line:function(){return p1},Marker:function(){return m1},Path:function(){return b1},Polygon:function(){return w1},Polyline:function(){return S1},Rect:function(){return I1},Text:function(){return P1}});var A={};z.r(A),z.d(A,{getColorSetsBySubjectColors:function(){return Nx},getColorsWithSubjectColor:function(){return gd},mixColor:function(){return ns}});var _={};z.r(_),z.d(_,{arrayToTextureData:function(){return Kx},attributesToTextureData:function(){return Hx},buildTextureData:function(){return Yx},buildTextureDataWithOneEdgeAttr:function(){return Vx},buildTextureDataWithTwoEdgeAttr:function(){return jx},proccessToFunc:function(){return Xx},radialLayout:function(){return Zx}});var S={};z.r(S),z.d(S,{gpuDetector:function(){return w0}});var O={};z.r(O),z.d(O,{getBrowserName:function(){return _0}});var B={};z.r(B),z.d(B,{assign:function(){return Qc},default:function(){return ip},defaultI18n:function(){return Md},format:function(){return np},parse:function(){return ap},setGlobalDateI18n:function(){return Z0},setGlobalDateMasks:function(){return rp}});var m=z(197582),d=z(413810),tt={getDefaultCfg:function(){return{}},getEvents:function(){return{}},updateCfg:function(e){return Object.assign(this,e),!0},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(e){var t=this,r=this.events;this.graph=e,(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&e.get("canvas").set("draggable",!0),(0,d.each)(r,function(n,a){e.on(a,n)}),document.addEventListener("visibilitychange",function(){t.keydown=!1})},unbind:function(e){var t=this.events,r=e.get("canvas").get("draggable");(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&e.get("canvas").set("draggable",!1),(0,d.each)(t,function(n,a){e.off(a,n)}),e.get("canvas").set("draggable",r)},get:function(e){return this[e]},set:function(e,t){return this[e]=t,this}},Y=function(){function i(){}return i.registerBehavior=function(e,t){if(!t)throw new Error("please specify handler for this behavior: ".concat(e));var r=(0,d.clone)(tt);Object.assign(r,t);var n=function(o){var s=this;Object.assign(this,this.getDefaultCfg(),o);var u=this.getEvents();this.events=null;var f={};u&&((0,d.each)(u,function(c,l){f[l]=(0,d.wrapBehavior)(s,c)}),this.events=f)};n.prototype=r,i.types[e]=n},i.hasBehavior=function(e){return!!i.types[e]},i.getBehavior=function(e){return i.types[e]},i.types={},i}(),V=Y,$=V,q="*",rt=function(){function i(){this._events={}}return i.prototype.on=function(e,t,r){return this._events[e]||(this._events[e]=[]),this._events[e].push({callback:t,once:!!r}),this},i.prototype.once=function(e,t){return this.on(e,t,!0)},i.prototype.emit=function(e){for(var t=this,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var a=this._events[e]||[],o=this._events[q]||[],s=function(u){for(var f=u.length,c=0;c<f;c++)if(u[c]){var l=u[c],b=l.callback,w=l.once;w&&(u.splice(c,1),u.length===0&&delete t._events[e],f--,c--),b.apply(t,r)}};s(a),s(o)},i.prototype.off=function(e,t){if(!e)this._events={};else if(!t)delete this._events[e];else{for(var r=this._events[e]||[],n=r.length,a=0;a<n;a++)r[a].callback===t&&(r.splice(a,1),n--,a--);r.length===0&&delete this._events[e]}return this},i.prototype.getEvents=function(){return this._events},i}(),Q=rt,it=z(935600);function ht(i,e,t){var r=[0,0,0,0,0,0,0,0,0];return it.fromTranslation(r,t),it.multiply(i,r,e)}function dt(i,e,t){var r=[0,0,0,0,0,0,0,0,0];return it.fromRotation(r,t),it.multiply(i,r,e)}function Ot(i,e,t){var r=[0,0,0,0,0,0,0,0,0];return it.fromScaling(r,t),it.multiply(i,r,e)}function It(i,e,t){return it.multiply(i,t,e)}function Kt(i,e){for(var t=i?[].concat(i):[1,0,0,0,1,0,0,0,1],r=0,n=e.length;r<n;r++){var a=e[r];switch(a[0]){case"t":ht(t,t,[a[1],a[2]]);break;case"s":Ot(t,t,[a[1],a[2]]);break;case"r":dt(t,t,a[1]);break;case"m":It(t,t,a[1]);break;default:break}}return t}function Ft(i,e){return i[0]*e[1]-e[0]*i[1]}function Nt(i,e,t){var r=vec2.angle(i,e),n=Ft(i,e)>=0;return t?n?Math.PI*2-r:r:n?r:Math.PI*2-r}function st(i,e,t){return t?(i[0]=e[1],i[1]=-1*e[0]):(i[0]=-1*e[1],i[1]=e[0]),i}var yt=function(e,t){var r=e.nodes,n=e.edges,a=[],o={};if(!r)throw new Error("invalid nodes data!");return r&&r.forEach(function(s,u){o[s.id]=u;var f=[];a.push(f)}),n&&n.forEach(function(s){var u=s.source,f=s.target,c=o[u],l=o[f];!c&&c!==0||!l&&l!==0||(a[c][l]=1,t||(a[l][c]=1))}),a},kt=yt,ee=function(e,t){return e===t},$t=function(){function i(e,t){t===void 0&&(t=null),this.value=e,this.next=t}return i.prototype.toString=function(e){return e?e(this.value):"".concat(this.value)},i}(),ge=function(){function i(e){e===void 0&&(e=ee),this.head=null,this.tail=null,this.compare=e}return i.prototype.prepend=function(e){var t=new $t(e,this.head);return this.head=t,this.tail||(this.tail=t),this},i.prototype.append=function(e){var t=new $t(e);return this.head?(this.tail.next=t,this.tail=t,this):(this.head=t,this.tail=t,this)},i.prototype.delete=function(e){if(!this.head)return null;for(var t=null;this.head&&this.compare(this.head.value,e);)t=this.head,this.head=this.head.next;var r=this.head;if(r!==null)for(;r.next;)this.compare(r.next.value,e)?(t=r.next,r.next=r.next.next):r=r.next;return this.compare(this.tail.value,e)&&(this.tail=r),t},i.prototype.find=function(e){var t=e.value,r=t===void 0?void 0:t,n=e.callback,a=n===void 0?void 0:n;if(!this.head)return null;for(var o=this.head;o;){if(a&&a(o.value)||r!==void 0&&this.compare(o.value,r))return o;o=o.next}return null},i.prototype.deleteTail=function(){var e=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,e;for(var t=this.head;t.next;)t.next.next?t=t.next:t.next=null;return this.tail=t,e},i.prototype.deleteHead=function(){if(!this.head)return null;var e=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),e},i.prototype.fromArray=function(e){var t=this;return e.forEach(function(r){return t.append(r)}),this},i.prototype.toArray=function(){for(var e=[],t=this.head;t;)e.push(t),t=t.next;return e},i.prototype.reverse=function(){for(var e=this.head,t=null,r=null;e;)r=e.next,e.next=t,t=e,e=r;this.tail=this.head,this.head=t},i.prototype.toString=function(e){return e===void 0&&(e=void 0),this.toArray().map(function(t){return t.toString(e)}).toString()},i}(),Pe=ge,er=function(){function i(){this.linkedList=new Pe}return i.prototype.isEmpty=function(){return!this.linkedList.head},i.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},i.prototype.enqueue=function(e){this.linkedList.append(e)},i.prototype.dequeue=function(){var e=this.linkedList.deleteHead();return e?e.value:null},i.prototype.toString=function(e){return this.linkedList.toString(e)},i}(),Jt=er,ae=function(e,t,r){t===void 0&&(t=[]);var n=t.filter(function(u){return u.source===e||u.target===e});if(r==="target"){var a=function(f){return f.source===e};return n.filter(a).map(function(u){return u.target})}if(r==="source"){var o=function(f){return f.target===e};return n.filter(o).map(function(u){return u.source})}var s=function(f){return f.source===e?f.target:f.source};return n.map(s)},Se=function(e,t){return t.filter(function(r){return r.source===e})},xe=function(e,t){return t.filter(function(r){return r.source===e||r.target===e})},we=function(e){e===void 0&&(e=0);var t="".concat(Math.random()).split(".")[1].substr(0,5),r="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(e,"-").concat(t).concat(r)};function zt(i){i===void 0&&(i={});var e=i,t=function(){},r=function(){var n={};return function(a){var o=a.next,s=o;return n[s]?!1:(n[s]=!0,!0)}}();return e.allowTraversal=i.allowTraversal||r,e.enter=i.enter||t,e.leave=i.leave||t,e}var Wt=function(e,t,r,n){n===void 0&&(n=!0);var a=zt(r),o=new Jt,s=e.edges,u=s===void 0?[]:s;o.enqueue(t);for(var f="",c=function(){var b=o.dequeue();a.enter({current:b,previous:f}),ae(b,u,n?"target":void 0).forEach(function(w){a.allowTraversal({previous:f,current:b,next:w})&&o.enqueue(w)}),a.leave({current:b,previous:f}),f=b};!o.isEmpty();)c()},Ie=Wt,Yt=function(e){for(var t=e.nodes,r=t===void 0?[]:t,n=e.edges,a=n===void 0?[]:n,o=[],s={},u=[],f=function w(I){u.push(I),s[I.id]=!0;for(var W=ae(I.id,a),H=function(ut){var lt=W[ut];if(!s[lt]){var _t=r.filter(function(Bt){return Bt.id===lt});_t.length>0&&w(_t[0])}},J=0;J<W.length;++J)H(J)},c=0;c<r.length;c++){var l=r[c];if(!s[l.id]){f(l);for(var b=[];u.length>0;)b.push(u.pop());o.push(b)}}return o},ie=function(e){for(var t=e.nodes,r=t===void 0?[]:t,n=e.edges,a=n===void 0?[]:n,o=[],s={},u={},f={},c=[],l=0,b=function H(J){u[J.id]=l,f[J.id]=l,l+=1,o.push(J),s[J.id]=!0;for(var at=ae(J.id,a,"target").filter(function(Rt){return r.map(function(Qt){return Qt.id}).indexOf(Rt)>-1}),ut=function(Qt){var de=at[Qt];if(!u[de]&&u[de]!==0){var se=r.filter(function(Te){return Te.id===de});se.length>0&&H(se[0]),f[J.id]=Math.min(f[J.id],f[de])}else s[de]&&(f[J.id]=Math.min(f[J.id],u[de]))},lt=0;lt<at.length;lt++)ut(lt);if(f[J.id]===u[J.id]){for(var _t=[];o.length>0;){var Bt=o.pop();if(s[Bt.id]=!1,_t.push(Bt),Bt===J)break}_t.length>0&&c.push(_t)}},w=0,I=r;w<I.length;w++){var W=I[w];!u[W.id]&&u[W.id]!==0&&b(W)}return c};function Oe(i,e){return e?ie(i):Yt(i)}var re=function(e){var t={},r=e.nodes,n=r===void 0?[]:r,a=e.edges,o=a===void 0?[]:a;return n.forEach(function(s){t[s.id]={degree:0,inDegree:0,outDegree:0}}),o.forEach(function(s){t[s.source].degree++,t[s.source].outDegree++,t[s.target].degree++,t[s.target].inDegree++}),t},_e=re,Ge=function(e,t){var r=re(e);return r[t]?re(e)[t].inDegree:0},Ct=function(e,t){var r=re(e);return r[t]?re(e)[t].outDegree:0};function Nr(i){i===void 0&&(i={});var e=i,t=function(){},r=function(){var n={};return function(a){var o=a.next;return n[o]?!1:(n[o]=!0,!0)}}();return e.allowTraversal=i.allowTraversal||r,e.enter=i.enter||t,e.leave=i.leave||t,e}function Or(i,e,t,r,n){n===void 0&&(n=!0),r.enter({current:e,previous:t});var a=i.edges,o=a===void 0?[]:a;ae(e,o,n?"target":void 0).forEach(function(s){r.allowTraversal({previous:t,current:e,next:s})&&Or(i,s,e,r,n)}),r.leave({current:e,previous:t})}function Ur(i,e,t,r){r===void 0&&(r=!0),Or(i,e,"",Nr(t),r)}var Sr=function(e){var t=null,r=e.nodes,n=r===void 0?[]:r,a={},o={},s={},u={};n.forEach(function(l){o[l.id]=l});for(var f={enter:function(b){var w=b.current,I=b.previous;if(s[w]){t={};for(var W=w,H=I;H!==w;)t[W]=H,W=H,H=a[H];t[W]=H}else s[w]=w,delete o[w],a[w]=I},leave:function(b){var w=b.current;u[w]=w,delete s[w]},allowTraversal:function(b){var w=b.next;return t?!1:!u[w]}};Object.keys(o).length;){var c=Object.keys(o)[0];Ur(e,c,f)}return t},gn=function(e,t,r){var n,a;r===void 0&&(r=!0);for(var o=[],s=Oe(e,!1),u=0,f=s;u<f.length;u++){var c=f[u];if(c.length)for(var l=c[0],b=l.id,w=[l],I=(n={},n[b]=l,n),W=(a={},a[b]=new Set,a);w.length>0;)for(var H=w.pop(),J=H.id,at=ae(J,e.edges),ut=function(Bt){var Rt,Qt=at[Bt],de=e.nodes.find(function(zr){return zr.id===Qt});if(Qt===J)o.push((Rt={},Rt[Qt]=H,Rt));else if(!(Qt in W))I[Qt]=H,w.push(de),W[Qt]=new Set([H]);else if(!W[J].has(de)){for(var se=!0,Te=[de,H],je=I[J];W[Qt].size&&!W[Qt].has(je)&&(Te.push(je),je!==I[je.id]);)je=I[je.id];if(Te.push(je),t&&r?(se=!1,Te.findIndex(function(zr){return t.indexOf(zr.id)>-1})>-1&&(se=!0)):t&&!r&&Te.findIndex(function(zr){return t.indexOf(zr.id)>-1})>-1&&(se=!1),se){for(var Dr={},Kr=1;Kr<Te.length;Kr+=1)Dr[Te[Kr-1].id]=Te[Kr];Te.length&&(Dr[Te[Te.length-1].id]=Te[0]),o.push(Dr)}W[Qt].add(H)}},lt=0;lt<at.length;lt+=1)ut(lt)}return o},Rr=function(e,t,r){r===void 0&&(r=!0);for(var n=[],a=new Set,o=[],s=[],u={},f={},c=function(je){for(var Dr=[je];Dr.length>0;){var Kr=Dr.pop();a.has(Kr)&&(a.delete(Kr),o[Kr.id].forEach(function(zr){Dr.push(zr)}),o[Kr.id].clear())}},l=function Te(je,Dr,Kr){var zr=!1;if(t&&r===!1&&t.indexOf(je.id)>-1)return zr;n.push(je),a.add(je);for(var Mr=Kr[je.id],En=0;En<Mr.length;En+=1){var yn=u[Mr[En]];if(yn===Dr){for(var Ar={},Xr=1;Xr<n.length;Xr+=1)Ar[n[Xr-1].id]=n[Xr];n.length&&(Ar[n[n.length-1].id]=n[0]),s.push(Ar),zr=!0}else a.has(yn)||Te(yn,Dr,Kr)&&(zr=!0)}if(zr)c(je);else for(var En=0;En<Mr.length;En+=1){var yn=u[Mr[En]];o[yn.id].has(je)||o[yn.id].add(je)}return n.pop(),zr},b=e.nodes,w=b===void 0?[]:b,I=0;I<w.length;I+=1){var W=w[I],H=W.id;f[H]=I,u[I]=W}if(t&&r)for(var J=function(je){var Dr=t[je];f[w[je].id]=f[Dr],f[Dr]=0,u[0]=w.find(function(Kr){return Kr.id===Dr}),u[f[w[je].id]]=w[je]},I=0;I<t.length;I++)J(I);for(var at=function(je){for(var Dr,Kr,zr=1/0,Mr=0;Mr<je.length;Mr+=1)for(var En=je[Mr],yn=0;yn<En.length;yn++){var Ar=f[En[yn].id];Ar<zr&&(zr=Ar,Kr=Mr)}for(var Xr=je[Kr],sn=[],Mr=0;Mr<Xr.length;Mr+=1){var un=Xr[Mr];sn[un.id]=[];for(var An=0,Gn=ae(un.id,e.edges,"target").filter(function(gi){return Xr.map(function(ti){return ti.id}).indexOf(gi)>-1});An<Gn.length;An++){var ga=Gn[An];ga===un.id&&!(r===!1&&t.indexOf(un.id)>-1)?s.push((Dr={},Dr[un.id]=un,Dr)):sn[un.id].push(f[ga])}}return{component:Xr,adjList:sn,minIdx:zr}},ut=0;ut<w.length;){var lt=w.filter(function(Te){return f[Te.id]>=ut}),_t=ie({nodes:lt,edges:e.edges}).filter(function(Te){return Te.length>1});if(_t.length===0)break;var Bt=at(_t),Rt=Bt.minIdx,Qt=Bt.adjList,de=Bt.component;if(de.length>1){de.forEach(function(Te){o[Te.id]=new Set});var se=u[Rt];if(t&&r&&t.indexOf(se.id)===-1)return s;l(se,se,Qt),ut=Rt+1}else break}return s},ln=function(e,t,r,n){return n===void 0&&(n=!0),t?Rr(e,r,n):gn(e,r,n)},Nn=Sr,Ln=function(e,t,r){for(var n=1/0,a,o=0;o<t.length;o++){var s=t[o].id;!r[s]&&e[s]<=n&&(n=e[s],a=t[o])}return a},fn=function(e,t,r,n){var a=e.nodes,o=a===void 0?[]:a,s=e.edges,u=s===void 0?[]:s,f=[],c={},l={},b={};o.forEach(function(ut,lt){var _t=ut.id;f.push(_t),l[_t]=1/0,_t===t&&(l[_t]=0)});for(var w=o.length,I=function(lt){var _t=Ln(l,o,c),Bt=_t.id;if(c[Bt]=!0,l[Bt]===1/0)return"continue";var Rt=[];r?Rt=Se(Bt,u):Rt=xe(Bt,u),Rt.forEach(function(Qt){var de=Qt.target,se=Qt.source,Te=de===Bt?se:de,je=n&&Qt[n]?Qt[n]:1;l[Te]>l[_t.id]+je?(l[Te]=l[_t.id]+je,b[Te]=[_t.id]):l[Te]===l[_t.id]+je&&b[Te].push(_t.id)})},W=0;W<w;W++)I(W);b[t]=[t];var H={};for(var J in l)l[J]!==1/0&&nr(t,J,b,H);var at={};for(var J in H)at[J]=H[J][0];return{length:l,path:at,allPath:H}},Qe=fn;function nr(i,e,t,r){if(i===e)return[i];if(r[e])return r[e];for(var n=[],a=0,o=t[e];a<o.length;a++){var s=o[a],u=nr(i,s,t,r);if(!u)return;for(var f=0,c=u;f<c.length;f++){var l=c[f];(0,d.isArray)(l)?n.push((0,m.__spreadArray)((0,m.__spreadArray)([],l,!0),[e],!1)):n.push([l,e])}}return r[e]=n,r[e]}var dr=function(e,t,r,n,a){var o=Qe(e,t,n,a),s=o.length,u=o.path,f=o.allPath;return{length:s[r],path:u[r],allPath:f[r]}},Pr=function(e,t,r,n){var a;if(t===r)return[[t]];var o=e.edges,s=o===void 0?[]:o,u=[t],f=(a={},a[t]=!0,a),c=[],l=[],b=n?ae(t,s,"target"):ae(t,s);for(c.push(b);u.length>0&&c.length>0;){var w=c[c.length-1];if(w.length){var I=w.shift();I&&(u.push(I),f[I]=!0,b=n?ae(I,s,"target"):ae(I,s),c.push(b.filter(function(J){return!f[J]})))}else{var W=u.pop();f[W]=!1,c.pop();continue}if(u[u.length-1]===r){var H=u.map(function(at){return at});l.push(H);var W=u.pop();f[W]=!1,c.pop()}}return l},en=function(e,t){for(var r=kt(e,t),n=[],a=r.length,o=0;o<a;o+=1){n[o]=[];for(var s=0;s<a;s+=1)o===s?n[o][s]=0:r[o][s]===0||!r[o][s]?n[o][s]=1/0:n[o][s]=r[o][s]}for(var u=0;u<a;u+=1)for(var o=0;o<a;o+=1)for(var s=0;s<a;s+=1)n[o][s]>n[o][u]+n[u][s]&&(n[o][s]=n[o][u]+n[u][s]);return n},pn=en,rn=function(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r="weight"),n===void 0&&(n=1e3);var a=e.nodes,o=a===void 0?[]:a,s=e.edges,u=s===void 0?[]:s,f={},c={};o.forEach(function(lt,_t){var Bt=we();lt.clusterId=Bt,f[Bt]={id:Bt,nodes:[lt]},c[lt.id]={node:lt,idx:_t}});var l=kt(e,t),b=[],w={};l.forEach(function(lt,_t){var Bt=0,Rt=o[_t].id;w[Rt]={},lt.forEach(function(Qt,de){if(Qt){Bt+=Qt;var se=o[de].id;w[Rt][se]=Qt}}),b.push(Bt)});for(var I=0,W=function(){var _t=!1;if(o.forEach(function(Bt){var Rt={};Object.keys(w[Bt.id]).forEach(function(zr){var Mr=w[Bt.id][zr],En=c[zr].node,yn=En.clusterId;Rt[yn]||(Rt[yn]=0),Rt[yn]+=Mr});var Qt=-1/0,de=[];if(Object.keys(Rt).forEach(function(zr){Qt<Rt[zr]?(Qt=Rt[zr],de=[zr]):Qt===Rt[zr]&&de.push(zr)}),!(de.length===1&&de[0]===Bt.clusterId)){var se=de.indexOf(Bt.clusterId);if(se>=0&&de.splice(se,1),de&&de.length){_t=!0;var Te=f[Bt.clusterId],je=Te.nodes.indexOf(Bt);Te.nodes.splice(je,1);var Dr=Math.floor(Math.random()*de.length),Kr=f[de[Dr]];Kr.nodes.push(Bt),Bt.clusterId=Kr.id}}}),!_t)return"break";I++};I<n;){var H=W();if(H==="break")break}Object.keys(f).forEach(function(lt){var _t=f[lt];(!_t.nodes||!_t.nodes.length)&&delete f[lt]});var J=[],at={};u.forEach(function(lt){var _t=lt.source,Bt=lt.target,Rt=lt[r]||1,Qt=c[_t].node.clusterId,de=c[Bt].node.clusterId,se="".concat(Qt,"---").concat(de);if(at[se])at[se].weight+=Rt,at[se].count++;else{var Te={source:Qt,target:de,weight:Rt,count:1};at[se]=Te,J.push(Te)}});var ut=[];return Object.keys(f).forEach(function(lt){ut.push(f[lt])}),{clusters:ut,clusterEdges:J}},jn=rn,Hn=function(){function i(e){this.arr=e}return i.prototype.getArr=function(){return this.arr||[]},i.prototype.add=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length))return new i(r);if(!(r!=null&&r.length))return new i(this.arr);if(this.arr.length===r.length){var n=[];for(var a in this.arr)n[a]=this.arr[a]+r[a];return new i(n)}},i.prototype.subtract=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length))return new i(r);if(!(r!=null&&r.length))return new i(this.arr);if(this.arr.length===r.length){var n=[];for(var a in this.arr)n[a]=this.arr[a]-r[a];return new i(n)}},i.prototype.avg=function(e){var t=[];if(e!==0)for(var r in this.arr)t[r]=this.arr[r]/e;return new i(t)},i.prototype.negate=function(){var e=[];for(var t in this.arr)e[t]=-this.arr[t];return new i(e)},i.prototype.squareEuclideanDistance=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(r!=null&&r.length))return 0;if(this.arr.length===r.length){var n=0;for(var a in this.arr)n+=Math.pow(this.arr[a]-e.arr[a],2);return n}},i.prototype.euclideanDistance=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(r!=null&&r.length))return 0;if(this.arr.length===r.length){var n=0;for(var a in this.arr)n+=Math.pow(this.arr[a]-e.arr[a],2);return Math.sqrt(n)}else console.error("The two vectors are unequal in length.")},i.prototype.normalize=function(){var e=[],t=(0,d.clone)(this.arr);t.sort(function(o,s){return o-s});var r=t[t.length-1],n=t[0];for(var a in this.arr)e[a]=(this.arr[a]-n)/(r-n);return new i(e)},i.prototype.norm2=function(){var e;if(!(!((e=this.arr)===null||e===void 0)&&e.length))return 0;var t=0;for(var r in this.arr)t+=Math.pow(this.arr[r],2);return Math.sqrt(t)},i.prototype.dot=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(r!=null&&r.length))return 0;if(this.arr.length===r.length){var n=0;for(var a in this.arr)n+=this.arr[a]*e.arr[a];return n}else console.error("The two vectors are unequal in length.")},i.prototype.equal=function(e){var t,r=e.arr;if(((t=this.arr)===null||t===void 0?void 0:t.length)!==(r==null?void 0:r.length))return!1;for(var n in this.arr)if(this.arr[n]!==r[n])return!1;return!0},i}(),oa=Hn,dn=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/,Wn=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/,Dn=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=100);var r={};e.forEach(function(a){a.properties&&Object.keys(a.properties).forEach(function(o){if(o==="id"||!"".concat(a.properties[o]).match(dn)&&!"".concat(a.properties[o]).match(Wn)&&isNaN(Number(a.properties[o]))){r.hasOwnProperty(o)&&delete r[o];return}r.hasOwnProperty(o)?r[o]+=1:r[o]=1})});var n=Object.keys(r).sort(function(a,o){return r[o]-r[a]});return n.length<t?n:n.slice(0,t)},Cn=function(e,t){return t.map(function(r){return e.hasOwnProperty(r)?e[r]:0})},la=function(e){for(var t=Dn(e),r=[],n=0;n<e.length;n++)r[n]=Cn(e[n].properties,t);return r},K=function(e,t){t===void 0&&(t=void 0);var r=[];return e.forEach(function(n){t===void 0&&r.push(n),n[t]!==void 0&&r.push(n[t])}),r},ft={getAllSortProperties:Dn,getPropertyWeight:la,getAllProperties:K},nt;(function(i){i.EuclideanDistance="euclideanDistance"})(nt||(nt={}));var k=function(e,t,r){var n=[];t!=null&&t.length?n=t:(e.forEach(function(o){n=n.concat(Object.keys(o))}),n=(0,d.uniq)(n));var a={};return n.forEach(function(o){var s=[];e.forEach(function(u){u[o]!==void 0&&u[o]!==""&&s.push(u[o])}),s.length&&!(r!=null&&r.includes(o))&&(a[o]=(0,d.uniq)(s))}),a},M=function(e,t,r){var n=k(e,t,r),a=[];if(!Object.keys(n).length)return a;var o=Object.values(n),s=o.every(function(u){return u.every(function(f){return typeof f=="number"})});return e.forEach(function(u,f){var c=[];Object.keys(n).forEach(function(l){var b=u[l],w=n[l],I=w.findIndex(function(J){return b===J}),W=[];if(s)W.push(b);else for(var H=0;H<w.length;H++)H===I?W.push(1):W.push(0);c=c.concat(W)}),a[f]=c}),a},C=function(e,t,r,n){r===void 0&&(r=nt.EuclideanDistance);var a=0;switch(r){case nt.EuclideanDistance:a=new oa(e).euclideanDistance(new oa(t));break;default:break}return a},j={getAllKeyValueMap:k,oneHot:M,getDistance:C},xt=function(e,t,r,n){for(var a=t.length,o=2*n,s=0,u=0;u<a;u++)for(var f=e[u].clusterId,c=0;c<a;c++){var l=e[c].clusterId;if(f===l){var b=t[u][c]||0,w=r[u]||0,I=r[c]||0;s+=b-w*I/o}}return s*=1/o,s},At=function(e,t){e===void 0&&(e=[]);for(var r=e.length,n=new oa([]),a=0;a<r;a++)n=n.add(new oa(t[a]));var o=n.avg(r);o.normalize();for(var s=0,a=0;a<r;a++){var u=new oa(t[a]),f=u.squareEuclideanDistance(o);s+=f}var c=[];e.forEach(function(){c.push([])});for(var a=0;a<r;a++){var u=new oa(t[a]);e[a].clusterInertial=0;for(var l=0;l<r;l++){if(a===l){c[a][l]=0;continue}var b=new oa(t[l]);c[a][l]=u.squareEuclideanDistance(b),e[a].clusterInertial+=c[a][l]}}for(var w=0,I=2*r*s,a=0;a<r;a++)for(var W=e[a].clusterId,l=0;l<r;l++){var H=e[l].clusterId;if(!(a===l||W!==H)){var J=e[a].clusterInertial*e[l].clusterInertial/Math.pow(I,2)-c[a][l]/I;w+=J}}return Number(w.toFixed(4))},wt=function(e,t,r,n,a,o,s,u,f){t===void 0&&(t=!1),r===void 0&&(r="weight"),n===void 0&&(n=1e-4),a===void 0&&(a=!1),o===void 0&&(o=void 0),s===void 0&&(s=[]),u===void 0&&(u=["id"]),f===void 0&&(f=1);var c=e.nodes,l=c===void 0?[]:c,b=e.edges,w=b===void 0?[]:b,I=[];if(a){l.forEach(function(Ar,Xr){Ar.properties=Ar.properties||{},Ar.originIndex=Xr});var W=[];l.every(function(Ar){return Ar.hasOwnProperty("nodeType")})&&(W=Array.from(new Set(l.map(function(Ar){return Ar.nodeType}))),l.forEach(function(Ar){Ar.properties.nodeType=W.findIndex(function(Xr){return Xr===Ar.nodeType})}));var H=K(l,o);I=M(H,s,u)}var J=1,at={},ut={};l.forEach(function(Ar,Xr){var sn=String(J++);Ar.clusterId=sn,at[sn]={id:sn,nodes:[Ar]},ut[Ar.id]={node:Ar,idx:Xr}});var lt=kt(e,t),_t=[],Bt={},Rt=0;lt.forEach(function(Ar,Xr){var sn=0,un=l[Xr].id;Bt[un]={},Ar.forEach(function(An,Gn){if(An){sn+=An;var ga=l[Gn].id;Bt[un][ga]=An,Rt+=An}}),_t.push(sn)}),Rt/=2;for(var Qt=1/0,de=1/0,se=0,Te=[],je={};;){a&&l.every(function(Ar){return Ar.hasOwnProperty("properties")})?Qt=xt(l,lt,_t,Rt)+At(l,I)*f:Qt=xt(l,lt,_t,Rt),se===0&&(de=Qt,Te=l,je=at);var Dr=Qt>0&&Qt>de&&Qt-de<n;if(Qt>de&&(Te=l.map(function(Ar){return{node:Ar,clusterId:Ar.clusterId}}),je=(0,d.clone)(at),de=Qt),Dr||se>100)break;se++,Object.keys(at).forEach(function(Ar){var Xr=0;w.forEach(function(sn){var un=sn.source,An=sn.target,Gn=ut[un].node.clusterId,ga=ut[An].node.clusterId;(Gn===Ar&&ga!==Ar||ga===Ar&&Gn!==Ar)&&(Xr=Xr+(sn[r]||1))}),at[Ar].sumTot=Xr}),l.forEach(function(Ar,Xr){var sn=at[Ar.clusterId],un=0,An,Gn=_t[Xr]/(2*Rt),ga=0,Oa=sn.nodes;Oa.forEach(function(qo){var Qo=ut[qo.id].idx;ga+=lt[Xr][Qo]||0});var gi=ga-sn.sumTot*Gn,ti=Oa.filter(function(qo){return qo.id!==Ar.id}),pi=[];ti.forEach(function(qo,Qo){pi[Qo]=I[qo.originIndex]});var wi=At(ti,I)*f,ji=Bt[Ar.id];if(Object.keys(ji).forEach(function(qo){var Qo=ut[qo].node,wu=Qo.clusterId;if(wu!==Ar.clusterId){var Ss=at[wu],Hs=Ss.nodes;if(!(!Hs||!Hs.length)){var Va=0;Hs.forEach(function(Ka){var $a=ut[Ka.id].idx;Va+=lt[Xr][$a]||0});var hi=Va-Ss.sumTot*Gn,Wa=Hs.concat([Ar]),vi=[];Wa.forEach(function(Ka,$a){vi[$a]=I[Ka.originIndex]});var Li=At(Wa,I)*f,ra=hi-gi;a&&(ra=hi+Li-(gi+wi)),ra>un&&(un=ra,An=Ss)}}}),un>0){An.nodes.push(Ar);var Pi=Ar.clusterId;Ar.clusterId=An.id;var Gu=sn.nodes.indexOf(Ar);sn.nodes.splice(Gu,1);var $o=0,zu=0;w.forEach(function(qo){var Qo=qo.source,wu=qo.target,Ss=ut[Qo].node.clusterId,Hs=ut[wu].node.clusterId;(Ss===An.id&&Hs!==An.id||Hs===An.id&&Ss!==An.id)&&($o=$o+(qo[r]||1)),(Ss===Pi&&Hs!==Pi||Hs===Pi&&Ss!==Pi)&&(zu=zu+(qo[r]||1))}),An.sumTot=$o,sn.sumTot=zu}})}var Kr={},zr=0;Object.keys(je).forEach(function(Ar){var Xr=je[Ar];if(!Xr.nodes||!Xr.nodes.length){delete je[Ar];return}var sn=String(zr+1);sn!==Ar&&(Xr.id=sn,Xr.nodes=Xr.nodes.map(function(un){return{id:un.id,clusterId:sn}}),je[sn]=Xr,Kr[Ar]=sn,delete je[Ar],zr++)}),Te.forEach(function(Ar){var Xr=Ar.node,sn=Ar.clusterId;Xr&&(Xr.clusterId=sn,Xr.clusterId&&Kr[Xr.clusterId]&&(Xr.clusterId=Kr[Xr.clusterId]))});var Mr=[],En={};w.forEach(function(Ar){var Xr=Ar.source,sn=Ar.target,un=Ar[r]||1,An=ut[Xr].node.clusterId,Gn=ut[sn].node.clusterId;if(!(!An||!Gn)){var ga="".concat(An,"---").concat(Gn);if(En[ga])En[ga].weight+=un,En[ga].count++;else{var Oa={source:An,target:Gn,weight:un,count:1};En[ga]=Oa,Mr.push(Oa)}}});var yn=[];return Object.keys(je).forEach(function(Ar){yn.push(je[Ar])}),{clusters:yn,clusterEdges:Mr}},Pt=wt,Me=function(e,t,r,n,a,o,s,u){return t===void 0&&(t=!1),r===void 0&&(r="weight"),n===void 0&&(n=1e-4),a===void 0&&(a=void 0),o===void 0&&(o=[]),s===void 0&&(s=["id"]),u===void 0&&(u=1),Pt(e,t,r,n,!0,a,o,s,u)},ve=Me,Ke=function(e,t){var r;t===void 0&&(t=1);for(var n=(0,d.clone)(e),a=n.nodes,o=a===void 0?[]:a,s=n.edges,u=s===void 0?[]:s,f=function(){var b=_e({nodes:o,edges:u}),w=Object.keys(b);w.sort(function(H,J){var at,ut;return((at=b[H])===null||at===void 0?void 0:at.degree)-((ut=b[J])===null||ut===void 0?void 0:ut.degree)});var I=w[0];if(!o.length||((r=b[I])===null||r===void 0?void 0:r.degree)>=t)return"break";var W=o.findIndex(function(H){return H.id===I});o.splice(W,1),u=u.filter(function(H){return!(H.source===I||H.target===I)})};;){var c=f();if(c==="break")break}return{nodes:o,edges:u}},br=Ke,ir=function(e,t,r){var n=[];switch(e){case nt.EuclideanDistance:n=t[r];break;default:n=[];break}return n},mr=function(e,t,r,n,a,o){t===void 0&&(t=3),r===void 0&&(r=void 0),n===void 0&&(n=[]),a===void 0&&(a=["id"]),o===void 0&&(o=nt.EuclideanDistance);var s=e.nodes,u=s===void 0?[]:s,f=e.edges,c=f===void 0?[]:f,l={clusters:[{id:"0",nodes:u}],clusterEdges:[]};if(o===nt.EuclideanDistance&&!u.every(function(sn){return sn.hasOwnProperty(r)}))return l;var b=[],w=[];if(o===nt.EuclideanDistance&&(b=K(u,r),w=M(b,n,a)),!w.length)return l;for(var I=(0,d.uniq)(w.map(function(sn){return sn.join("")})),W=Math.min(t,u.length,I.length),H=0;H<u.length;H++)u[H].originIndex=H;for(var J=[],at=[],ut=[],H=0;H<W;H++)if(H===0){var lt=Math.floor(Math.random()*u.length);switch(o){case nt.EuclideanDistance:J[H]=w[lt];break;default:J[H]=[];break}at.push(lt),ut[H]=[u[lt]],u[lt].clusterId=String(H)}else{for(var _t=-1/0,Bt=0,Rt=function(An){if(!at.includes(An)){for(var Gn=0,ga=0;ga<J.length;ga++){var Oa=0;switch(o){case nt.EuclideanDistance:Oa=C(w[u[An].originIndex],J[ga],o);break;default:break}Gn+=Oa}var gi=Gn/J.length;gi>_t&&!J.find(function(ti){return(0,d.isEqual)(ti,ir(o,w,u[An].originIndex))})&&(_t=gi,Bt=An)}},Qt=0;Qt<u.length;Qt++)Rt(Qt);J[H]=ir(o,w,Bt),at.push(Bt),ut[H]=[u[Bt]],u[Bt].clusterId=String(H)}for(var de=0;;){for(var H=0;H<u.length;H++){var se=0,Te=1/0;if(!(de===0&&at.includes(H))){for(var je=0;je<J.length;je++){var Dr=0;switch(o){case nt.EuclideanDistance:Dr=C(w[H],J[je],o);break;default:break}Dr<Te&&(Te=Dr,se=je)}if(u[H].clusterId!==void 0)for(var Kr=ut[Number(u[H].clusterId)].length-1;Kr>=0;Kr--)ut[Number(u[H].clusterId)][Kr].id===u[H].id&&ut[Number(u[H].clusterId)].splice(Kr,1);u[H].clusterId=String(se),ut[se].push(u[H])}}for(var zr=!1,H=0;H<ut.length;H++){for(var Mr=ut[H],En=new oa([]),je=0;je<Mr.length;je++)En=En.add(new oa(w[Mr[je].originIndex]));var yn=En.avg(Mr.length);yn.equal(new oa(J[H]))||(zr=!0,J[H]=yn.getArr())}if(de++,u.every(function(sn){return sn.clusterId!==void 0})&&zr||de>=1e3)break}var Ar=[],Xr={};return c.forEach(function(sn){var un,An,Gn=sn.source,ga=sn.target,Oa=(un=u.find(function(wi){return wi.id===Gn}))===null||un===void 0?void 0:un.clusterId,gi=(An=u.find(function(wi){return wi.id===ga}))===null||An===void 0?void 0:An.clusterId,ti="".concat(Oa,"---").concat(gi);if(Xr[ti])Xr[ti].count++;else{var pi={source:Oa,target:gi,count:1};Xr[ti]=pi,Ar.push(pi)}}),{clusters:ut,clusterEdges:Ar}},Mn=mr,Xe=function(e,t){var r=new oa(t),n=r.norm2(),a=new oa(e),o=a.norm2(),s=r.dot(a),u=n*o,f=u?s/u:0;return f},vr=Xe,Er=function(e,t,r,n,a){e===void 0&&(e=[]),r===void 0&&(r=void 0),n===void 0&&(n=[]),a===void 0&&(a=[]);var o=(0,d.clone)(e.filter(function(b){return b.id!==t.id})),s=e.findIndex(function(b){return b.id===t.id}),u=K(e,r),f=M(u,n,a),c=f[s],l=[];return o.forEach(function(b,w){if(b.id!==t.id){var I=f[w],W=vr(I,c);l.push(W),b.cosineSimilarity=W}}),o.sort(function(b,w){return w.cosineSimilarity-b.cosineSimilarity}),{allCosineSimilarity:l,similarNodes:o}},on=Er,Wr=function(){function i(e){this.count=e.length,this.parent={};for(var t=0,r=e;t<r.length;t++){var n=r[t];this.parent[n]=n}}return i.prototype.find=function(e){for(;this.parent[e]!==e;)e=this.parent[e];return e},i.prototype.union=function(e,t){var r=this.find(e),n=this.find(t);r!==n&&(r<n?(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]):(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]))},i.prototype.connected=function(e,t){return this.find(e)===this.find(t)},i}(),xa=Wr,Ta=function(e,t){return e-t},Rn=function(){function i(e){e===void 0&&(e=Ta),this.compareFn=e,this.list=[]}return i.prototype.getLeft=function(e){return 2*e+1},i.prototype.getRight=function(e){return 2*e+2},i.prototype.getParent=function(e){return e===0?null:Math.floor((e-1)/2)},i.prototype.isEmpty=function(){return this.list.length<=0},i.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},i.prototype.delMin=function(){var e=this.top(),t=this.list.pop();return this.list.length>0&&(this.list[0]=t,this.moveDown(0)),e},i.prototype.insert=function(e){if(e!==null){this.list.push(e);var t=this.list.length-1;return this.moveUp(t),!0}return!1},i.prototype.moveUp=function(e){for(var t=this.getParent(e);e&&e>0&&this.compareFn(this.list[t],this.list[e])>0;){var r=this.list[t];this.list[t]=this.list[e],this.list[e]=r,e=t,t=this.getParent(e)}},i.prototype.moveDown=function(e){var t,r=e,n=this.getLeft(e),a=this.getRight(e),o=this.list.length;n!==null&&n<o&&this.compareFn(this.list[r],this.list[n])>0?r=n:a!==null&&a<o&&this.compareFn(this.list[r],this.list[a])>0&&(r=a),e!==r&&(t=[this.list[r],this.list[e]],this.list[e]=t[0],this.list[r]=t[1],this.moveDown(r))},i}(),Jn=Rn,Ga=function(e,t){var r=[],n=e.nodes,a=n===void 0?[]:n,o=e.edges,s=o===void 0?[]:o;if(a.length===0)return r;var u=a[0],f=new Set;f.add(u);var c=function(H,J){return t?H.weight-J.weight:0},l=new Jn(c);for(xe(u.id,s).forEach(function(W){l.insert(W)});!l.isEmpty();){var b=l.delMin(),w=b.source,I=b.target;f.has(w)&&f.has(I)||(r.push(b),f.has(w)||(f.add(w),xe(w,s).forEach(function(W){l.insert(W)})),f.has(I)||(f.add(I),xe(I,s).forEach(function(W){l.insert(W)})))}return r},Aa=function(e,t){var r=[],n=e.nodes,a=n===void 0?[]:n,o=e.edges,s=o===void 0?[]:o;if(a.length===0)return r;var u=s.map(function(w){return w});t&&u.sort(function(w,I){return w.weight-I.weight});for(var f=new xa(a.map(function(w){return w.id}));u.length>0;){var c=u.shift(),l=c.source,b=c.target;f.connected(l,b)||(r.push(c),f.union(l,b))}return r},an=function(e,t,r){var n={prim:Ga,kruskal:Aa};return r?n[r](e,t):Aa(e,t)},Vn=an,me=function(e,t,r){typeof t!="number"&&(t=1e-6),typeof r!="number"&&(r=.85);for(var n=1,a=0,o=1e3,s=e.nodes,u=s===void 0?[]:s,f=e.edges,c=f===void 0?[]:f,l=u.length,b,w={},I={},W=0;W<l;++W){var H=u[W],J=H.id;w[J]=1/l,I[J]=1/l}for(var at=_e(e);o>0&&n>t;){a=0;for(var W=0;W<l;++W){var H=u[W],J=H.id;if(b=0,at[H.id].inDegree===0)w[J]=0;else{for(var ut=ae(J,c,"source"),lt=0;lt<ut.length;++lt){var _t=ut[lt],Bt=at[_t].outDegree;Bt>0&&(b+=I[_t]/Bt)}w[J]=r*b,a+=w[J]}}a=(1-a)/l,n=0;for(var W=0;W<l;++W){var H=u[W],J=H.id;b=w[J]+a,n+=Math.abs(b-I[J]),I[J]=b}o-=1}return I},Dt=me,fe=-1,Ae=-1,be="-1",De="-1",sr=-1,Fr="-1",Jr=function(){function i(e,t,r,n){e===void 0&&(e=fe),t===void 0&&(t=Ae),r===void 0&&(r=Ae),n===void 0&&(n=be),this.id=e,this.from=t,this.to=r,this.label=n}return i}(),Pn=function(){function i(e,t){e===void 0&&(e=Ae),t===void 0&&(t=De),this.id=e,this.label=t,this.edges=[],this.edgeMap={}}return i.prototype.addEdge=function(e){this.edges.push(e),this.edgeMap[e.id]=e},i}(),Bn=function(){function i(e,t,r){e===void 0&&(e=Ae),t===void 0&&(t=!0),r===void 0&&(r=!1),this.id=e,this.edgeIdAutoIncrease=t,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=r}return i.prototype.getNodeNum=function(){return this.nodes.length},i.prototype.addNode=function(e,t){if(!this.nodeMap[e]){var r=new Pn(e,t);this.nodes.push(r),this.nodeMap[e]=r,this.nodeLabelMap[t]||(this.nodeLabelMap[t]=[]),this.nodeLabelMap[t].push(e)}},i.prototype.addEdge=function(e,t,r,n){if((this.edgeIdAutoIncrease||e===void 0)&&(e=this.counter++),!(this.nodeMap[t]&&this.nodeMap[r]&&this.nodeMap[r].edgeMap[e])){var a=new Jr(e,t,r,n);if(this.edges.push(a),this.edgeMap[e]=a,this.nodeMap[t].addEdge(a),this.edgeLabelMap[n]||(this.edgeLabelMap[n]=[]),this.edgeLabelMap[n].push(a),!this.directed){var o=new Jr(e,r,t,n);this.nodeMap[r].addEdge(o),this.edgeLabelMap[n].push(o)}}},i}(),Zn=function(){function i(e,t,r,n,a){this.fromNode=e,this.toNode=t,this.nodeEdgeNodeLabel={nodeLabel1:r||De,edgeLabel:n||be,nodeLabel2:a||De}}return i.prototype.equalTo=function(e){return this.fromNode===e.formNode&&this.toNode===e.toNode&&this.nodeEdgeNodeLabel===e.nodeEdgeNodeLabel},i.prototype.notEqualTo=function(e){return!this.equalTo(e)},i}(),ba=function(){function i(){this.rmpath=[],this.dfsEdgeList=[]}return i.prototype.equalTo=function(e){var t=this.dfsEdgeList.length,r=e.length;if(t!==r)return!1;for(var n=0;n<t;n++)if(this.dfsEdgeList[n]!==e[n])return!1;return!0},i.prototype.notEqualTo=function(e){return!this.equalTo(e)},i.prototype.pushBack=function(e,t,r,n,a){return this.dfsEdgeList.push(new Zn(e,t,r,n,a)),this.dfsEdgeList},i.prototype.toGraph=function(e,t){e===void 0&&(e=sr),t===void 0&&(t=!1);var r=new Bn(e,!0,t);return this.dfsEdgeList.forEach(function(n){var a=n.fromNode,o=n.toNode,s=n.nodeEdgeNodeLabel,u=s.nodeLabel1,f=s.edgeLabel,c=s.nodeLabel2;u!==De&&r.addNode(a,u),c!==De&&r.addNode(o,c),u!==De&&c!==u&&r.addEdge(void 0,a,o,f)}),r},i.prototype.buildRmpath=function(){this.rmpath=[];for(var e=void 0,t=this.dfsEdgeList.length,r=t-1;r>=0;r--){var n=this.dfsEdgeList[r],a=n.fromNode,o=n.toNode;a<o&&(e===void 0||o===e)&&(this.rmpath.push(r),e=a)}return this.rmpath},i.prototype.getNodeNum=function(){var e={};return this.dfsEdgeList.forEach(function(t){e[t.fromNode]||(e[t.fromNode]=!0),e[t.toNode]||(e[t.toNode]=!0)}),Object.keys(e).length},i}(),Ca=function(){function i(e){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],!!e){for(;e;){var t=e.edge;this.edges.push(t),this.nodesUsed[t.from]=1,this.nodesUsed[t.to]=1,this.edgesUsed[t.id]=1,e=e.preNode}this.edges=this.edges.reverse()}}return i.prototype.hasNode=function(e){return this.nodesUsed[e.id]===1},i.prototype.hasEdge=function(e){return this.edgesUsed[e.id]===1},i}(),li=function(){function i(e){var t=e.graphs,r=e.minSupport,n=r===void 0?2:r,a=e.minNodeNum,o=a===void 0?1:a,s=e.maxNodeNum,u=s===void 0?4:s,f=e.top,c=f===void 0?10:f,l=e.directed,b=l===void 0?!1:l,w=e.verbose,I=w===void 0?!1:w;this.graphs=t,this.dfsCode=new ba,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=n,this.top=c,this.directed=b,this.counter=0,this.maxNodeNum=u,this.minNodeNum=o,this.verbose=I,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return i.prototype.findForwardRootEdges=function(e,t){var r=this,n=[],a=e.nodeMap;return t.edges.forEach(function(o){(r.directed||t.label<=a[o.to].label)&&n.push(o)}),n},i.prototype.findBackwardEdge=function(e,t,r,n){if(!this.directed&&t===r)return null;for(var a=e.nodeMap,o=a[r.to],s=o.edges,u=s.length,f=0;f<u;f++){var c=s[f];if(!(n.hasEdge(c)||c.to!==t.from)){if(this.directed){if(a[t.from].label<a[r.to].label||a[t.from].label===a[r.to].label&&t.label<=c.label)return c}else if(t.label<c.label||t.label===c.label&&a[t.to].label<=a[r.to].label)return c}}return null},i.prototype.findForwardPureEdges=function(e,t,r,n){for(var a=[],o=t.to,s=e.nodeMap[o].edges,u=s.length,f=0;f<u;f++){var c=s[f],l=e.nodeMap[c.to];r<=l.label&&!n.hasNode(l)&&a.push(c)}return a},i.prototype.findForwardRmpathEdges=function(e,t,r,n){for(var a=[],o=e.nodeMap,s=o[t.to].label,u=o[t.from],f=u.edges,c=f.length,l=0;l<c;l++){var b=f[l],w=o[b.to].label;t.to===b.to||r>w||n.hasNode(o[b.to])||(t.label<b.label||t.label===b.label&&s<=w)&&a.push(b)}return a},i.prototype.getSupport=function(e){var t={};return e.forEach(function(r){t[r.graphId]||(t[r.graphId]=!0)}),Object.keys(t).length},i.prototype.findMinLabel=function(e){var t=void 0;return Object.keys(e).forEach(function(r){var n=e[r],a=n.nodeLabel1,o=n.edgeLabel,s=n.nodeLabel2;if(!t){t={nodeLabel1:a,edgeLabel:o,nodeLabel2:s};return}(a<t.nodeLabel1||a===t.nodeLabel1&&o<t.edgeLabel||a===t.nodeLabel1&&o===t.edgeLabel&&s<t.nodeLabel2)&&(t={nodeLabel1:a,edgeLabel:o,nodeLabel2:s})}),t},i.prototype.isMin=function(){var e=this,t=this.dfsCode;if(this.verbose&&console.log("isMin checking",t),t.dfsEdgeList.length===1)return!0;var r=this.directed,n=t.toGraph(sr,r),a=n.nodeMap,o=new ba,s={};n.nodes.forEach(function(l){var b=e.findForwardRootEdges(n,l);b.forEach(function(w){var I=a[w.to],W="".concat(l.label,"-").concat(w.label,"-").concat(I.label);s[W]||(s[W]={projected:[],nodeLabel1:l.label,edgeLabel:w.label,nodeLabel2:I.label});var H={graphId:n.id,edge:w,preNode:null};s[W].projected.push(H)})});var u=this.findMinLabel(s);if(u){o.dfsEdgeList.push(new Zn(0,1,u.nodeLabel1,u.edgeLabel,u.nodeLabel2));var f=function l(b){for(var w=o.buildRmpath(),I=o.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,W=o.dfsEdgeList[w[0]].toNode,H={},J=!1,at=0,ut=r?-1:0,lt=function(En){if(J)return"break";b.forEach(function(yn){var Ar=new Ca(yn),Xr=e.findBackwardEdge(n,Ar.edges[w[En]],Ar.edges[w[0]],Ar);Xr&&(H[Xr.label]||(H[Xr.label]={projected:[],edgeLabel:Xr.label}),H[Xr.label].projected.push({graphId:n.id,edge:H,preNode:yn}),at=o.dfsEdgeList[w[En]].fromNode,J=!0)})},_t=w.length-1;_t>ut;_t--){var Bt=lt(_t);if(Bt==="break")break}if(J){var Rt=e.findMinLabel(H);o.dfsEdgeList.push(new Zn(W,at,De,Rt.edgeLabel,De));var Qt=o.dfsEdgeList.length-1;return e.dfsCode.dfsEdgeList[Qt]!==o.dfsEdgeList[Qt]?!1:l(H[Rt.edgeLabel].projected)}var de={};J=!1;var se=0;b.forEach(function(Mr){var En=new Ca(Mr),yn=e.findForwardPureEdges(n,En.edges[w[0]],I,En);yn.length>0&&(J=!0,se=W,yn.forEach(function(Ar){var Xr="".concat(Ar.label,"-").concat(a[Ar.to].label);de[Xr]||(de[Xr]={projected:[],edgeLabel:Ar.label,nodeLabel2:a[Ar.to].label}),de[Xr].projected.push({graphId:n.id,edge:Ar,preNode:Mr})}))});for(var Te=w.length,je=function(En){if(J)return"break";var yn=w[En];b.forEach(function(Ar){var Xr=new Ca(Ar),sn=e.findForwardRmpathEdges(n,Xr.edges[yn],I,Xr);sn.length>0&&(J=!0,se=o.dfsEdgeList[yn].fromNode,sn.forEach(function(un){var An="".concat(un.label,"-").concat(a[un.to].label);de[An]||(de[An]={projected:[],edgeLabel:un.label,nodeLabel2:a[un.to].label}),de[An].projected.push({graphId:n.id,edge:un,preNode:Ar})}))})},_t=0;_t<Te;_t++){var Dr=je(_t);if(Dr==="break")break}if(!J)return!0;var Kr=e.findMinLabel(de);o.dfsEdgeList.push(new Zn(se,W+1,De,Kr.edgeLabel,Kr.nodeLabel2));var zr=o.dfsEdgeList.length-1;return t.dfsEdgeList[zr]!==o.dfsEdgeList[zr]?!1:l(de["".concat(Kr.edgeLabel,"-").concat(Kr.nodeLabel2)].projected)},c="".concat(u.nodeLabel1,"-").concat(u.edgeLabel,"-").concat(u.nodeLabel2);return f(s[c].projected)}},i.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var e=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,d.clone)(e))}},i.prototype.subGraphMining=function(e){var t=this,r=this.getSupport(e);if(!(r<this.minSupport)&&this.isMin()){this.report();var n=this.dfsCode.getNodeNum(),a=this.dfsCode.buildRmpath(),o=this.dfsCode.dfsEdgeList[a[0]].toNode,s=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,u={},f={};e.forEach(function(c){for(var l=t.graphs[c.graphId],b=l.nodeMap,w=new Ca(c),I=a.length-1;I>=0;I--){var W=t.findBackwardEdge(l,w.edges[a[I]],w.edges[a[0]],w);if(W){var H="".concat(t.dfsCode.dfsEdgeList[a[I]].fromNode,"-").concat(W.label);f[H]||(f[H]={projected:[],toNodeId:t.dfsCode.dfsEdgeList[a[I]].fromNode,edgeLabel:W.label}),f[H].projected.push({graphId:c.graphId,edge:W,preNode:c})}}if(!(n>=t.maxNodeNum)){var J=t.findForwardPureEdges(l,w.edges[a[0]],s,w);J.forEach(function(ut){var lt="".concat(o,"-").concat(ut.label,"-").concat(b[ut.to].label);u[lt]||(u[lt]={projected:[],fromNodeId:o,edgeLabel:ut.label,nodeLabel2:b[ut.to].label}),u[lt].projected.push({graphId:c.graphId,edge:ut,preNode:c})});for(var at=function(lt){var _t=t.findForwardRmpathEdges(l,w.edges[a[lt]],s,w);_t.forEach(function(Bt){var Rt="".concat(t.dfsCode.dfsEdgeList[a[lt]].fromNode,"-").concat(Bt.label,"-").concat(b[Bt.to].label);u[Rt]||(u[Rt]={projected:[],fromNodeId:t.dfsCode.dfsEdgeList[a[lt]].fromNode,edgeLabel:Bt.label,nodeLabel2:b[Bt.to].label}),u[Rt].projected.push({graphId:c.graphId,edge:Bt,preNode:c})})},I=0;I<a.length;I++)at(I)}}),Object.keys(f).forEach(function(c){var l=f[c],b=l.toNodeId,w=l.edgeLabel;t.dfsCode.dfsEdgeList.push(new Zn(o,b,"-1",w,"-1")),t.subGraphMining(f[c].projected),t.dfsCode.dfsEdgeList.pop()}),Object.keys(u).forEach(function(c){var l=u[c],b=l.fromNodeId,w=l.edgeLabel,I=l.nodeLabel2;t.dfsCode.dfsEdgeList.push(new Zn(b,o+1,De,w,I)),t.subGraphMining(u[c].projected),t.dfsCode.dfsEdgeList.pop()})}},i.prototype.generate1EdgeFrequentSubGraphs=function(){var e=this.graphs,t=this.directed,r=this.minSupport,n=this.frequentSize1Subgraphs,a={},o={},s={},u={};return Object.keys(e).forEach(function(f){var c=e[f],l=c.nodeMap;c.nodes.forEach(function(b,w){var I=b.label,W="".concat(f,"-").concat(I);if(!s[W]){var H=a[I]||0;H++,a[I]=H}s[W]={graphKey:f,label:I},b.edges.forEach(function(J){var at=I,ut=l[J.to].label;if(!t&&at>ut){var lt=ut;ut=at,at=lt}var _t=J.label,Bt="".concat(f,"-").concat(at,"-").concat(_t,"-").concat(ut),Rt="".concat(at,"-").concat(_t,"-").concat(ut);if(!o[Rt]){var Qt=o[Rt]||0;Qt++,o[Rt]=Qt}u[Bt]={graphId:f,nodeLabel1:at,edgeLabel:_t,nodeLabel2:ut}})})}),Object.keys(a).forEach(function(f){var c=a[f];if(!(c<r)){var l={nodes:[],edges:[]};l.nodes.push({id:"0",label:f}),n.push(l)}}),n},i.prototype.run=function(){var e=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var t=this.graphs,r=this.directed,n={};Object.keys(t).forEach(function(a){var o=t[a],s=o.nodeMap;o.nodes.forEach(function(u){var f=e.findForwardRootEdges(o,u);f.forEach(function(c){var l=s[c.to],b="".concat(u.label,"-").concat(c.label,"-").concat(l.label);n[b]||(n[b]={projected:[],nodeLabel1:u.label,edgeLabel:c.label,nodeLabel2:l.label});var w={graphId:a,edge:c,preNode:null};n[b].projected.push(w)})})}),Object.keys(n).forEach(function(a){var o=n[a],s=o.projected,u=o.nodeLabel1,f=o.edgeLabel,c=o.nodeLabel2;e.dfsCode.dfsEdgeList.push(new Zn(0,1,u,f,c)),e.subGraphMining(s),e.dfsCode.dfsEdgeList.pop()})}},i}(),ta=function(e,t,r,n){var a={};return Object.keys(e).forEach(function(o,s){var u=e[o],f=new Bn(s,!0,t),c={};u.nodes.forEach(function(l,b){f.addNode(b,l[r]),c[l.id]=b}),u.edges.forEach(function(l,b){var w=c[l.source],I=c[l.target];f.addEdge(-1,w,I,l[n])}),f&&f.getNodeNum()&&(a[f.id]=f)}),a},fi=function(e,t,r){var n=[];return e.forEach(function(a){var o={nodes:[],edges:[]};a.nodes.forEach(function(s){var u;o.nodes.push((u={id:"".concat(s.id)},u[t]=s.label,u))}),a.edges.forEach(function(s){var u;o.edges.push((u={source:"".concat(s.from),target:"".concat(s.to)},u[r]=s.label,u))}),n.push(o)}),n},Co="cluster",La=function(e){var t=e.graphs,r=e.directed,n=r===void 0?!1:r,a=e.nodeLabelProp,o=a===void 0?Co:a,s=e.edgeLabelProp,u=s===void 0?Co:s,f=ta(t,n,o,u),c=e.minSupport,l=e.maxNodeNum,b=e.minNodeNum,w=e.verbose,I=e.top,W={graphs:f,minSupport:c,maxNodeNum:l,minNodeNum:b,top:I,verbose:w,directed:n},H=new li(W);H.run();var J=fi(H.frequentSubgraphs,o,u);return J},xi=La,so=function(e,t,r,n){r===void 0&&(r="cluster"),n===void 0&&(n=2);var a=[],o=e.nodes;return t.forEach(function(s,u){a.push(To(o,s,u,r,n))}),a},To=function(e,t,r,n,a){var o=[r],s=[],u={};return t.forEach(function(f,c){if(f<=a&&r!==c){o.push(c),s.push(e[c]);var l=e[c][n];u[l]?(u[l].count++,u[l].dists.push(f)):u[l]={count:1,dists:[f]}}}),Object.keys(u).forEach(function(f){u[f].dists=u[f].dists.sort(function(c,l){return c-l})}),{nodeIdx:r,nodeId:e[r].id,nodeIdxs:o,neighbors:s,neighborNum:o.length-1,nodeLabelCountMap:u}},bo=function(e,t,r,n,a){var o=Math.ceil(r/t),s={},u=0;return n.forEach(function(f,c){for(var l=0,b=0,w=f.nodeIdxs,I=f.neighborNum-1;l<o;){for(var W=w[1+Math.floor(Math.random()*I)],H=0;(s["".concat(c,"-").concat(W)]||s["".concat(W,"-").concat(c)])&&(W=Math.floor(Math.random()*t),H++,!(H>2*t)););if(H<2*t&&(s["".concat(c,"-").concat(W)]={start:c,end:W,distance:a[c][W]},l++,u++,u>=r))return s;if(b++,b>2*t)break}if(l<o){var J=o-l;o=(o+J)/(t-c-1)}}),s},uo=function(e,t,r,n){var a=r.nodes;return n||(n={}),Object.keys(e).forEach(function(o){var s,u;if(!(n&&n[o])){n[o]={nodes:[],edges:[]};var f=e[o],c=(s=t[f.start])===null||s===void 0?void 0:s.nodeIdxs,l=(u=t[f.end])===null||u===void 0?void 0:u.nodeIdxs;if(!(!c||!l)){var b=new Set(l),w=c.filter(function(at){return b.has(at)});if(!(!w||!w.length)){for(var I={},W=w.length,H=0;H<W;H++){var J=a[w[H]];n[o].nodes.push(J),I[J.id]=!0}r.edges.forEach(function(at){I[at.source]&&I[at.target]&&n[o].edges.push(at)})}}}}),n},Hi=function(e,t,r,n){var a,o,s={};e.nodes.forEach(function(f){s[f.id]=f});var u=0;return!(!((a=t==null?void 0:t.edges)===null||a===void 0)&&a.length)||((o=t==null?void 0:t.nodes)===null||o===void 0?void 0:o.length)<2?0:(e.edges.forEach(function(f){var c=s[f.source][r],l=s[f.target][r],b=t==null?void 0:t.nodes[0][r],w=t==null?void 0:t.nodes[1][r],I=t==null?void 0:t.edges[0][n];f[n]===I&&(c===b&&l===w||c===w&&l===b)&&u++}),u)},ds=function(e,t,r){for(var n=1/0,a=0,o=function(f){var c=e[f],l=Object.keys(c).sort(function(at,ut){return c[at]-c[ut]}),b=10,w=[];l.forEach(function(at,ut){w[ut%b]||(w[ut%b]={graphs:[],totalCount:0,aveCount:0}),w[ut%b].graphs.push(at),w[ut%b].totalCount+=c[at]});var I=0,W=[];w.forEach(function(at){var ut=at.totalCount/at.graphs.length;at.aveCount=ut,W.push(ut);var lt=0,_t=at.length;at.graphs.forEach(function(Bt,Rt){var Qt=c[Bt];at.graphs.forEach(function(de,se){Rt!==se&&(lt+=Math.abs(Qt-c[de]))})}),lt/=_t*(_t-1)/2,I+=lt}),I/=w.length;var H=0;W.forEach(function(at,ut){W.forEach(function(lt,_t){ut!==_t&&(H+=Math.abs(at-lt))}),H/=W.length*(W.length-1)/2});var J=H-I;n<J&&(n=J,a=f)},s=0;s<t;s++)o(s);return{structure:r[a],structureCountMap:e[a]}},zi=function(e,t){var r={},n={};return e.forEach(function(a,o){r[a.id]={idx:o,node:a,degree:0,inDegree:0,outDegree:0};var s=a[t];n[s]||(n[s]=[]),n[s].push(a)}),{nodeMap:r,nodeLabelMap:n}},Ui=function(e,t,r){var n={},a={};return e.forEach(function(o,s){n["".concat(we)]={idx:s,edge:o};var u=o[t];a[u]||(a[u]=[]),a[u].push(o);var f=r[o.source];f&&(f.degree++,f.outDegree++);var c=r[o.target];c&&(c.degree++,c.inDegree++)}),{edgeMap:n,edgeLabelMap:a}},gs=function(e,t,r){var n=t.length,a={};return t.forEach(function(o,s){for(var u=r?0:s+1,f=e[s].id,c=u;c<n;c++)if(s!==c){var l=e[c].id,b=o[c];a["".concat(f,"-").concat(l)]=b,r||(a["".concat(l,"-").concat(f)]=b)}}),a},Ms=function(e,t,r,n,a,o,s,u,f,c,l){var b,w="".concat(t.id,"-").concat(r.id);if(c&&c[w])return c[w];var I=l?l[w]:void 0;if(!I){var W=(b={},b[w]={start:n[t.id].idx,end:n[r.id].idx,distance:a},b);l=uo(W,o,e,l),I=l[w]}return Hi(I,s,u,f)},Go=function(e,t,r,n){var a,o,s,u=(a=e[t])===null||a===void 0?void 0:a.degree,f=(o=e[t])===null||o===void 0?void 0:o.inDegree,c=(s=e[t])===null||s===void 0?void 0:s.outDegree;return e[t]===void 0&&(u=1/0,f=1/0,c=1/0,n[t].forEach(function(l){var b=r[l.id].degree;u>b&&(u=b);var w=r[l.id].inDegree;f>w&&(f=w);var I=r[l.id].outDegree;c>I&&(c=I)}),e[t]={degree:u,inDegree:f,outDegree:c}),{minPatternNodeLabelDegree:u,minPatternNodeLabelInDegree:f,minPatternNodeLabelOutDegree:c}},_o=function(e,t,r,n,a,o,s){var u;if(r===void 0&&(r=!1),o===void 0&&(o="cluster"),s===void 0&&(s="cluster"),!(!e||!e.nodes)){var f=e.nodes.length;if(f){var c=pn(e,r),l=pn(t,r),b=gs(e.nodes,c,r),w=gs(t.nodes,l,r),I=zi(e.nodes,o),W=I.nodeMap,H=I.nodeLabelMap,J=zi(t.nodes,o),at=J.nodeMap,ut=J.nodeLabelMap;Ui(e.edges,s,W);var lt=Ui(t.edges,s,at).edgeLabelMap,_t=[];l==null||l.forEach(function(Va){_t=_t.concat(Va)}),a||(a=Math.max.apply(Math,(0,m.__spreadArray)((0,m.__spreadArray)([],_t,!1),[2],!1))),n||(n=a);var Bt=so(e,c,o,n),Rt=so(t,l,o,n),Qt=Math.min(100,f*(f-1)/2),de=bo(n,f,Qt,Bt,c),se=uo(de,Bt,e),Te=10,je=1,Dr=1,Kr=4,zr={graphs:se,nodeLabelProp:o,edgeLabelProp:s,minSupport:je,minNodeNum:Dr,maxNodeNum:Kr,directed:r},Mr=xi(zr).slice(0,Te),En=Mr.length,yn=[];Mr.forEach(function(Va,hi){yn[hi]={},Object.keys(se).forEach(function(Wa){var vi=se[Wa],Li=Hi(vi,Va,o,s);yn[hi][Wa]=Li})});var Ar=ds(yn,En,Mr),Xr=Ar.structure,sn=Ar.structureCountMap,un=t.nodes[0],An=[],Gn=(u=t.nodes[0])===null||u===void 0?void 0:u[o],ga=-1/0;t.nodes.forEach(function(Va){var hi=Va[o],Wa=H[hi];(Wa==null?void 0:Wa.length)>ga&&(ga=Wa.length,An=Wa,Gn=hi,un=Va)});var Oa={},gi={},ti={},pi={},wi={},ji={};Object.keys(ut).forEach(function(Va,hi){wi[Va]=[],r&&(ji[Va]=[]);var Wa=-1/0,vi=ut[Va],Li={};vi.forEach(function(Qa){var ui=w["".concat(un.id,"-").concat(Qa.id)];if(ui&&wi[Va].push(ui),Wa<ui&&(Wa=ui),Li["".concat(un.id,"-").concat(Qa.id)]={start:0,end:at[Qa.id].idx,distance:ui},r){var oo=w["".concat(Qa.id,"-").concat(un.id)];oo&&ji[Va].push(oo)}}),wi[Va]=wi[Va].sort(function(Qa,ui){return Qa-ui}),r&&(ji[Va]=ji[Va].sort(function(Qa,ui){return Qa-ui})),gi=uo(Li,Rt,t,gi);var ra=[];if(Object.keys(Li).forEach(function(Qa){if(ti[Qa]){ra.push(ti[Qa]);return}var ui=gi[Qa];ti[Qa]=Hi(ui,Xr,o,s),ra.push(ti[Qa])}),ra=ra.sort(function(Qa,ui){return ui-Qa}),pi["".concat(un.id,"-").concat(Va)]=ra,Va!==Gn)for(var Ka=(An==null?void 0:An.length)||0,$a=function(ui){var oo=An[ui],_u=Bt[W[oo.id].idx],Fo=_u.nodeLabelCountMap[Va],Bl=ut[Va].length;if(!Fo||Fo.count<Bl)return An.splice(ui,1),"continue";for(var gh=!1,Ks=0;Ks<Bl;Ks++)if(Fo.dists[Ks]>wi[Va][Ks]){gh=!0;break}if(gh)return An.splice(ui,1),"continue";var Uu={};_u.neighbors.forEach(function(Zs){var ef=b["".concat(oo.id,"-").concat(Zs.id)];Uu["".concat(oo.id,"-").concat(Zs.id)]={start:W[oo.id].idx,end:W[Zs.id].idx,distance:ef}}),se=uo(Uu,Bt,e,se);var Nf=[];Object.keys(Uu).forEach(function(Zs){if(sn[Zs]){Nf.push(sn[Zs]);return}var ef=se[Zs];sn[Zs]=Hi(ef,Xr,o,s),Nf.push(sn[Zs])}),Nf=Nf.sort(function(Zs,ef){return ef-Zs});for(var tl=!1,Ks=0;Ks<Bl;Ks++)if(Nf[Ks]<ra[Ks]){tl=!0;break}if(tl)return An.splice(ui,1),"continue"},Di=Ka-1;Di>=0;Di--)$a(Di)});var Pi=[];An==null||An.forEach(function(Va){for(var hi=W[Va.id].idx,Wa=To(e.nodes,c[hi],hi,o,a),vi=Wa.neighbors,Li=vi.length,ra=!1,Ka=Li-1;Ka>=0;Ka--){if(vi.length+1<t.nodes.length){ra=!0;return}var $a=vi[Ka],Di=$a[o];if(!ut[Di]||!ut[Di].length){vi.splice(Ka,1);continue}if(!wi[Di]||!wi[Di].length){vi.splice(Ka,1);continue}var Qa="".concat(Va.id,"-").concat($a.id),ui=b[Qa],oo=wi[Di].length-1,_u=wi[Di][oo];if(ui>_u){vi.splice(Ka,1);continue}if(r){var Fo="".concat($a.id,"-").concat(Va.id),Bl=b[Fo];oo=ji[Di].length-1;var gh=ji[Di][oo];if(Bl>gh){vi.splice(Ka,1);continue}}var Ks=sn[Qa]?sn[Qa]:Ms(e,Va,$a,W,ui,Bt,Xr,o,s,sn,se),Uu="".concat(un.id,"-").concat(Di),Nf=pi[Uu][pi[Uu].length-1];if(Ks<Nf){vi.splice(Ka,1);continue}var tl=Go(Oa,Di,at,ut),Zs=tl.minPatternNodeLabelDegree,ef=tl.minPatternNodeLabelInDegree,yc=tl.minPatternNodeLabelOutDegree;if(W[$a.id].degree<Zs){vi.splice(Ka,1);continue}}ra||Pi.push({nodes:[Va].concat(vi)})});var Gu=Qe(t,un.id,!1).length,$o={};r?(Object.keys(Gu).forEach(function(Va){var hi=at[Va].node[o];$o[hi]?$o[hi].push(Gu[Va]):$o[hi]=[Gu[Va]]}),Object.keys($o).forEach(function(Va){$o[Va].sort(function(hi,Wa){return hi-Wa})})):$o=wi;for(var zu=Pi.length,qo=function(hi){var Wa=Pi[hi],vi=Wa.nodes[0],Li={},ra={};Wa.nodes.forEach(function(to,Su){ra[to.id]={idx:Su,node:to,degree:0,inDegree:0,outDegree:0};var as=to[o];Li[as]?Li[as]++:Li[as]=1});var Ka=[],$a={};e.edges.forEach(function(to){ra[to.source]&&ra[to.target]&&(Ka.push(to),$a[to[s]]?$a[to[s]]++:$a[to[s]]=1,ra[to.source].degree++,ra[to.target].degree++,ra[to.source].outDegree++,ra[to.target].inDegree++)});for(var Di=Object.keys(lt).length,Qa=!1,ui=0;ui<Di;ui++){var oo=Object.keys(lt)[ui];if(!$a[oo]||$a[oo]<lt[oo].length){Qa=!0;break}}if(Qa)return Pi.splice(hi,1),"continue";var _u=Ka.length;if(_u<t.edges.length)return Pi.splice(hi,1),"break";for(var Fo=!1,Bl=function(Su){var as=Ka[Su],Pf=as[s],Fl=lt[Pf];if(!Fl||!Fl.length)return $a[Pf]--,Fl&&$a[Pf]<Fl.length?(Fo=!0,"break"):(Ka.splice(Su,1),ra[as.source].degree--,ra[as.target].degree--,ra[as.source].outDegree--,ra[as.target].inDegree--,"continue");var ey=ra[as.source].node[o],ry=ra[as.target].node[o],Ud=!1;if(Fl.forEach(function(ny){var ay=at[ny.source].node,iy=at[ny.target].node;ay[o]===ey&&iy[o]===ry&&(Ud=!0),!r&&ay[o]===ry&&iy[o]===ey&&(Ud=!0)}),!Ud)return $a[Pf]--,Fl&&$a[Pf]<Fl.length?(Fo=!0,"break"):(Ka.splice(Su,1),ra[as.source].degree--,ra[as.target].degree--,ra[as.source].outDegree--,ra[as.target].inDegree--,"continue")},ui=_u-1;ui>=0;ui--){var gh=Bl(ui);if(gh==="break")break}if(Fo)return Pi.splice(hi,1),"continue";Wa.edges=Ka;var Ks=Qe(Wa,Wa.nodes[0].id,!1).length;if(Object.keys(Ks).reverse().forEach(function(to){if(!(to===Wa.nodes[0].id||Fo)){if(Ks[to]===1/0){var Su=ra[to].node[o];if(Li[Su]--,Li[Su]<ut[Su].length){Fo=!0;return}var as=Wa.nodes.indexOf(ra[to].node);Wa.nodes.splice(as,1),ra[to]=void 0;return}var Pf=W[to].node[o];if(!$o[Pf]||!$o[Pf].length||Ks[to]>$o[Pf][$o[Pf].length-1]){var Su=ra[to].node[o];if(Li[Su]--,Li[Su]<ut[Su].length){Fo=!0;return}var as=Wa.nodes.indexOf(ra[to].node);Wa.nodes.splice(as,1),ra[to]=void 0}}}),Fo)return Pi.splice(hi,1),"continue";for(var Uu=!0,Nf=0;Uu&&!Fo;){Uu=!1;var tl=r?ra[vi.id].degree<at[un.id].degree||ra[vi.id].inDegree<at[un.id].inDegree||ra[vi.id].outDegree<at[un.id].outDegree:ra[vi.id].degree<at[un.id].degree;if(tl){Fo=!0;break}if(Li[vi[o]]<ut[vi[o]].length){Fo=!0;break}for(var Zs=Wa.nodes.length,ef=Zs-1;ef>=0;ef--){var yc=Wa.nodes[ef],Jp=ra[yc.id].degree,S_=ra[yc.id].inDegree,M_=ra[yc.id].outDegree,A_=yc[o],zd=Go(Oa,A_,at,ut),ty=zd.minPatternNodeLabelDegree,C_=zd.minPatternNodeLabelInDegree,T_=zd.minPatternNodeLabelOutDegree,I_=r?Jp<ty||S_<C_||M_<T_:Jp<ty;if(I_){if(Li[yc[o]]--,Li[yc[o]]<ut[yc[o]].length){Fo=!0;break}Wa.nodes.splice(ef,1),ra[yc.id]=void 0,Uu=!0}}if(Fo||!Uu&&Nf!==0)break;_u=Ka.length;for(var Nv=_u-1;Nv>=0;Nv--){var mc=Ka[Nv];if(!ra[mc.source]||!ra[mc.target]){Ka.splice(Nv,1);var Pv=mc[s];if($a[Pv]--,ra[mc.source]&&(ra[mc.source].degree--,ra[mc.source].outDegree--),ra[mc.target]&&(ra[mc.target].degree--,ra[mc.target].inDegree--),lt[Pv]&&$a[Pv]<lt[Pv].length){Fo=!0;break}Uu=!0}}Nf++}if(Fo||Fo||Wa.nodes.length<t.nodes.length||Ka.length<t.edges.length)return Pi.splice(hi,1),"continue"},Qo=zu-1;Qo>=0;Qo--){var wu=qo(Qo);if(wu==="break")break}for(var Ss=Pi.length,Hs=function(hi){var Wa=Pi[hi],vi={};Wa.edges.forEach(function(Ka){var $a="".concat(Ka.source,"-").concat(Ka.target,"-").concat(Ka.label);vi[$a]?vi[$a]++:vi[$a]=1});for(var Li=function($a){var Di=Pi[$a],Qa={};Di.edges.forEach(function(oo){var _u="".concat(oo.source,"-").concat(oo.target,"-").concat(oo.label);Qa[_u]?Qa[_u]++:Qa[_u]=1});var ui=!0;Object.keys(Qa).length!==Object.keys(vi).length?ui=!1:Object.keys(vi).forEach(function(oo){Qa[oo]!==vi[oo]&&(ui=!1)}),ui&&Pi.splice($a,1)},ra=Ss-1;ra>hi;ra--)Li(ra);Ss=Pi.length},Qo=0;Qo<=Ss-1;Qo++)Hs(Qo);return Pi}}},Io=_o,$s=function(){function i(e){e===void 0&&(e=10),this.linkedList=new Pe,this.maxStep=e}return Object.defineProperty(i.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),i.prototype.isEmpty=function(){return!this.linkedList.head},i.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},i.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},i.prototype.push=function(e){this.linkedList.prepend(e),this.length>this.maxStep&&this.linkedList.deleteTail()},i.prototype.pop=function(){var e=this.linkedList.deleteHead();return e?e.value:null},i.prototype.toArray=function(){return this.linkedList.toArray().map(function(e){return e.value})},i.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},i}(),Yn=$s,So=Nn,Oo={getAdjMatrix:kt,breadthFirstSearch:Ie,connectedComponent:Oe,getDegree:_e,getInDegree:Ge,getOutDegree:Ct,detectCycle:Nn,detectDirectedCycle:So,detectAllCycles:ln,detectAllDirectedCycle:Rr,detectAllUndirectedCycle:gn,depthFirstSearch:Ur,dijkstra:Qe,findAllPath:Pr,findShortestPath:dr,floydWarshall:pn,labelPropagation:jn,louvain:Pt,iLouvain:ve,kCore:br,kMeans:Mn,cosineSimilarity:vr,nodesCosineSimilarity:on,minimumSpanningTree:Vn,pageRank:Dt,getNeighbors:ae,Stack:Yn,GADDI:Io},Wi=z(277160),zn=z(631437),Lo=Kt,Ai=function(e){return function(t,r){return t[e]-r[e]}},zo=function(e,t,r){return e>=t&&e<=r},Uo=function(e,t,r,n){var a=1e-4,o={x:r.x-e.x,y:r.y-e.y},s={x:t.x-e.x,y:t.y-e.y},u={x:n.x-r.x,y:n.y-r.y},f=s.x*u.y-s.y*u.x,c=f*f,l=1/f,b=s.x*s.x+s.y*s.y,w=u.x*u.x+u.y*u.y;if(c>a*b*w){var I=(o.x*u.y-o.y*u.x)*l,W=(o.x*s.y-o.y*s.x)*l;return!zo(I,0,1)||!zo(W,0,1)?null:{x:e.x+I*s.x,y:e.y+I*s.y}}return null},ps=function(e,t){var r=e.x,n=e.y,a=e.width,o=e.height,s=r+a/2,u=n+o/2,f=[],c={x:s,y:u};f.push({x:r,y:n}),f.push({x:r+a,y:n}),f.push({x:r+a,y:n+o}),f.push({x:r,y:n+o}),f.push({x:r,y:n});for(var l=null,b=1;b<f.length&&(l=Uo(f[b-1],f[b],c,t),!l);b++);return l},eo=function(e,t){var r=e.x,n=e.y,a=e.r,o=t.x,s=t.y,u=o-r,f=s-n;if(u*u+f*f<a*a)return null;var c=Math.atan(f/u);return{x:r+Math.abs(a*Math.cos(c))*Math.sign(u),y:n+Math.abs(a*Math.sin(c))*Math.sign(f)}},ro=function(e,t){var r=e.rx,n=e.ry,a=e.x,o=e.y,s=t.x-a,u=t.y-o,f=Math.atan2(u/n,s/r);return f<0&&(f+=2*Math.PI),{x:a+r*Math.cos(f),y:o+n*Math.sin(f)}},ei=function(e,t,r){r===void 0&&(r=1);var n=[e.x,e.y,r];return(!t||isNaN(t[0]))&&(t=[1,0,0,0,1,0,0,0,1]),Wi.transformMat3(n,n,t),{x:n[0],y:n[1]}},fo=function(e,t,r){r===void 0&&(r=1),(!t||isNaN(t[0]))&&(t=[1,0,0,0,1,0,0,0,1]);var n=it.invert([1,0,0,0,1,0,0,0,1],t);n||(n=[1,0,0,0,1,0,0,0,1]);var a=[e.x,e.y,r];return Wi.transformMat3(a,a,n),{x:a[0],y:a[1]}},Do=function(e,t,r){var n=e.x-t.x,a=e.y-t.y,o=e.x-r.x,s=e.y-r.y,u=(e.x*e.x-t.x*t.x-t.y*t.y+e.y*e.y)/2,f=(e.x*e.x-r.x*r.x-r.y*r.y+e.y*e.y)/2,c=a*o-n*s;return{x:-(s*u-a*f)/c,y:-(n*f-o*u)/c}},Wo=function(e,t){var r=e.x-t.x,n=e.y-t.y;return Math.sqrt(r*r+n*n)},No=function(e,t){var r=[];return e.forEach(function(n){var a=[];n.forEach(function(o){a.push(o*t)}),r.push(a)}),r},is=function(e){for(var t=[],r=e.length,n=0;n<r;n+=1){t[n]=[];for(var a=0;a<r;a+=1)n===a?t[n][a]=0:e[n][a]===0||!e[n][a]?t[n][a]=1/0:t[n][a]=e[n][a]}for(var o=0;o<r;o+=1)for(var n=0;n<r;n+=1)for(var a=0;a<r;a+=1)t[n][a]>t[n][o]+t[o][a]&&(t[n][a]=t[n][o]+t[o][a]);return t},Xo=function(e,t){var r=e.nodes,n=e.edges,a=[],o={};if(!r)throw new Error("invalid nodes data!");return r&&r.forEach(function(s,u){o[s.id]=u;var f=[];a.push(f)}),n&&n.forEach(function(s){var u=s.source,f=s.target,c=o[u],l=o[f];a[c][l]=1,t||(a[l][c]=1)}),a},Jo=function(e,t){e.translate(t.x,t.y)},Xa=function(e,t,r,n){n===void 0&&(n={duration:500});var a=e.getMatrix();a||(a=[1,0,0,0,1,0,0,0,1]);var o=e.getCanvasBBox(),s=t.x-o.minX,u=t.y-o.minY;if(r){var f=s*a[0],c=u*a[4],l=0,b=0,w=0,I=0;e.animate(function(H){return w=f*H,I=c*H,a=Lo(a,[["t",w-l,I-b]]),l=w,b=I,{matrix:a}},n)}else{var W=Lo(a,[["t",s,u]]);e.setMatrix(W)}},As=function(e,t){var r=e.getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]);var n=t;(0,d.isArray)(t)||(n=[t,t]),(0,d.isArray)(t)&&t.length===1&&(n=[t[0],t[0]]),r=Lo(r,[["s",n[0],n[1]]]),e.setMatrix(r)},iu=function(e,t){var r=e.getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]),r=Lo(r,[["r",t]]),e.setMatrix(r)},Xi=function(e,t,r){for(var n=[],a=0;a<e;a++)n[a]=0;return r.forEach(function(o){o.source&&(n[t[o.source]]+=1),o.target&&(n[t[o.target]]+=1)}),n};function os(i,e,t){return(t[0]-i[0])*(e[1]-i[1])===(e[0]-i[0])*(t[1]-i[1])&&Math.min(i[0],e[0])<=t[0]&&t[0]<=Math.max(i[0],e[0])&&Math.min(i[1],e[1])<=t[1]&&t[1]<=Math.max(i[1],e[1])}var Eo=function(e,t,r){var n=!1,a=e.length,o=1e-6;function s(l){return Math.abs(l)<o?0:l<0?-1:1}if(a<=2)return!1;for(var u=0;u<a;u++){var f=e[u],c=e[(u+1)%a];if(os(f,c,[t,r]))return!0;s(f[1]-r)>0!=s(c[1]-r)>0&&s(t-(r-f[1])*(f[0]-c[0])/(f[1]-c[1])-f[0])<0&&(n=!n)}return n},Yi=function(e,t){return!(t.minX>e.maxX||t.maxX<e.minX||t.minY>e.maxY||t.maxY<e.minY)},co=function(e,t){var r=!1;return(0,d.each)(e,function(n){if(Uo(n.from,n.to,t.from,t.to))return r=!0,!1}),r},pa=function(e,t){var r=function(b){var w=b.map(function(W){return W[0]}),I=b.map(function(W){return W[1]});return{minX:Math.min.apply(null,w),maxX:Math.max.apply(null,w),minY:Math.min.apply(null,I),maxY:Math.max.apply(null,I)}},n=function(b){for(var w=[],I=b.length,W=0;W<I-1;W++){var H=b[W],J=b[W+1];w.push({from:{x:H[0],y:H[1]},to:{x:J[0],y:J[1]}})}if(w.length>1){var at=b[0],ut=b[I-1];w.push({from:{x:ut[0],y:ut[1]},to:{x:at[0],y:at[1]}})}return w};if(e.length<2||t.length<2)return!1;var a=r(e),o=r(t);if(!Yi(a,o))return!1;var s=!1;if((0,d.each)(t,function(l){if(Eo(e,l[0],l[1]))return s=!0,!1}),s||((0,d.each)(e,function(l){if(Eo(t,l[0],l[1]))return s=!0,!1}),s))return!0;var u=n(e),f=n(t),c=!1;return(0,d.each)(f,function(l){if(co(u,l))return c=!0,!1}),c},ja=function(){function i(e,t,r,n){this.x1=e,this.y1=t,this.x2=r,this.y2=n}return i.prototype.getBBox=function(){var e=Math.min(this.x1,this.x2),t=Math.min(this.y1,this.y2),r=Math.max(this.x1,this.x2),n=Math.max(this.y1,this.y2),a={x:e,y:t,minX:e,minY:t,maxX:r,maxY:n,width:r-e,height:n-t};return a},i}(),yi=function(e,t){var r={top:[e.minX,e.minY,e.maxX,e.minY],left:[e.minX,e.minY,e.minX,e.maxY],bottom:[e.minX,e.maxY,e.maxX,e.maxY],right:[e.maxX,e.minY,e.maxX,e.maxY]};return r[t]},no=function(e,t){var r=(t.x2-t.x1)*(e.y1-t.y1)-(t.y2-t.y1)*(e.x1-t.x1),n=(e.x2-e.x1)*(e.y1-t.y1)-(e.y2-e.y1)*(e.x1-t.x1),a=(t.y2-t.y1)*(e.x2-e.x1)-(t.x2-t.x1)*(e.y2-e.y1);if(a){var o=r/a,s=n/a;if(o>=0&&o<=1&&s>=0&&s<=1)return o}return Number.POSITIVE_INFINITY},ki=function(e,t){for(var r=["top","left","bottom","right"],n=e.getBBox(),a=0,o=[],s=0;s<4;s++){var u=yi(n,r[s]),f=u[0],c=u[1],l=u[2],b=u[3];o[s]=Uo({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},{x:f,y:c},{x:l,y:b}),o[s]&&(a+=1)}return[o,a]},Ki=function(e,t){for(var r=["top","left","bottom","right"],n=e.getBBox(),a=Number.POSITIVE_INFINITY,o=0,s=0;s<4;s++){var u=yi(n,r[s]),f=u[0],c=u[1],l=u[2],b=u[3],w=no(t,new ja(f,c,l,b));w=Math.abs(w-.5),w>=0&&w<=1&&(o+=1,a=w<a?w:a)}return o===0?-1:a},Yo=function(e){var t=0,r=0;if(e.length>0){for(var n=0,a=e;n<a.length;n++){var o=a[n];t+=o.x,r+=o.y}t/=e.length,r/=e.length}return{x:t,y:r}},wo=function(e,t){return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)},ts=function(e,t){var r=t.x1,n=t.y1,a=t.x2-r,o=t.y2-n,s=e.x-r,u=e.y-n,f=s*a+u*o,c;f<=0?c=0:(s=a-s,u=o-u,f=s*a+u*o,f<=0?c=0:c=f*f/(a*a+o*o));var l=s*s+u*u-c;return l<0&&(l=0),l},lo=function(e,t,r){return r===void 0&&(r=.001),Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)<Math.pow(r,2)},Rs=function(e,t){var r=e.x<t.x,n=e.x>t.x+t.width,a=e.y>t.y+t.height,o=e.y<t.y,s=r||n||a||o;if(!s)return 0;if(a&&!r&&!n)return Math.pow(t.y+t.height-e.y,2);if(o&&!r&&!n)return Math.pow(e.y-t.y,2);if(r&&!a&&!o)return Math.pow(t.x-e.x,2);if(n&&!a&&!o)return Math.pow(t.x+t.width-e.x,2);var u=Math.min(Math.abs(t.x-e.x),Math.abs(t.x+t.width-e.x)),f=Math.min(Math.abs(t.y-e.y),Math.abs(t.y+t.height-e.y));return u*u+f*f},ou=function(e,t){var r=e[0],n=e[1],a=e[2],o=e[3],s=t.x,u=t.y,f=[a-r,o-n];if(zn.exactEquals(f,[0,0]))return NaN;var c=[-f[1],f[0]];zn.normalize(c,c);var l=[s-r,u-n];return Math.abs(zn.dot(l,c))},Cs=function(e,t,r){return e+(t-e)*r},ci=function(e,t,r){for(var n=Math.min(e.length,t.length),a=new Array(n),o=0;o<n;o++)a[o]=Cs(e[o],t[o],r);return a},Po="rgb(95, 149, 255)",Wu="rgb(255, 255, 255)",ho="rgb(0, 0, 0)",Bs="rgb(247, 250, 255)",Ts="rgb(239, 244, 255)",Vo="rgb(253, 253, 253)",Fs="rgb(250, 250, 250)",ss="rgb(224, 224, 224)",jo="rgb(234, 234, 234)",us="rgb(245, 245, 245)",su="rgb(191, 213, 255)",Gs="#4572d9",fs="rgb(223, 234, 255)",Tt={mainStroke:Po,mainFill:Ts,activeStroke:Po,activeFill:Bs,inactiveStroke:su,inactiveFill:Bs,selectedStroke:Po,selectedFill:Wu,highlightStroke:Gs,highlightFill:fs,disableStroke:ss,disableFill:Fs,edgeMainStroke:ss,edgeActiveStroke:Po,edgeInactiveStroke:jo,edgeSelectedStroke:Po,edgeHighlightStroke:Po,edgeDisableStroke:us,comboMainStroke:ss,comboMainFill:Vo,comboActiveStroke:Po,comboActiveFill:Bs,comboInactiveStroke:ss,comboInactiveFill:Vo,comboSelectedStroke:Po,comboSelectedFill:Vo,comboHighlightStroke:Gs,comboHighlightFill:Vo,comboDisableStroke:jo,comboDisableFill:Fs},jt={version:"0.8.23",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:Tt.mainStroke,fill:Ts},size:20,color:Tt.mainStroke,linkPoints:{size:8,lineWidth:1,fill:Tt.activeFill,stroke:Tt.activeStroke}},nodeStateStyles:{active:{fill:Tt.activeFill,stroke:Tt.activeStroke,lineWidth:2,shadowColor:Tt.mainStroke,shadowBlur:10},selected:{fill:Tt.selectedFill,stroke:Tt.selectedStroke,lineWidth:4,shadowColor:Tt.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:Tt.highlightFill,stroke:Tt.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:Tt.inactiveFill,stroke:Tt.inactiveStroke,lineWidth:1},disable:{fill:Tt.disableFill,stroke:Tt.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:ho,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:Tt.edgeMainStroke,lineAppendWidth:2},color:Tt.edgeMainStroke},edgeStateStyles:{active:{stroke:Tt.edgeActiveStroke,lineWidth:1},selected:{stroke:Tt.edgeSelectedStroke,lineWidth:2,shadowColor:Tt.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Tt.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:Tt.edgeInactiveStroke,lineWidth:1},disable:{stroke:Tt.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:ho,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:Tt.comboMainFill,lineWidth:1,stroke:Tt.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:Tt.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:Tt.comboActiveStroke,lineWidth:1,fill:Tt.comboActiveFill},selected:{stroke:Tt.comboSelectedStroke,lineWidth:2,fill:Tt.comboSelectedFill,shadowColor:Tt.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Tt.comboHighlightStroke,lineWidth:2,fill:Tt.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:Tt.comboInactiveStroke,fill:Tt.comboInactiveFill,lineWidth:1},disable:{stroke:Tt.comboDisableStroke,fill:Tt.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},windowFontFamily:typeof window!="undefined"&&window.getComputedStyle&&document.body&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},ze={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,0:.6,1:.40099945068359377,2:.6,3:.6,4:.6,5:.6,6:.6,7:.5469985961914062,8:.6,9:.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875},Ze=Math.PI,Cr=Math.sin,cn=Math.cos,mn=Cr(Ze/8),aa=cn(Ze/8),ai=function(e,t){var r=e.getBBox(),n={x:r.minX,y:r.minY},a={x:r.maxX,y:r.maxY};if(t){var o=t.getMatrix();o||(o=[1,0,0,0,1,0,0,0,1]),n=ei(n,o),a=ei(a,o)}var s=n.x,u=n.y,f=a.x,c=a.y;return{x:s,y:u,minX:s,minY:u,maxX:f,maxY:c,width:f-s,height:c-u}},Zi=function(e){var t=e.sourceNode||e.targetNode,r=t.get("group"),n=r.getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]);var a=t.getKeyShape(),o=a.getBBox(),s=e.loopCfg||{},u=s.dist||Math.max(o.width,o.height)*2,f=s.position||jt.defaultLoopPosition,c=[(o.minX+o.maxX)/2+n[6],(o.minY+o.maxY)/2+n[7]],l=[e.startPoint.x,e.startPoint.y],b=[e.endPoint.x,e.endPoint.y],w=o.height/2,I=o.width/2,W=w,H=w,J=W*mn,at=W*aa,ut=H*mn,lt=H*aa,_t=a.get("type"),Bt=Math.min(w/2,I/2),Rt=Math.min(w,I),Qt=s!=null&&s.pointPadding?Math.min(Rt,s==null?void 0:s.pointPadding):Bt;if(l[0]===b[0]&&l[1]===b[1]){switch(f){case"top":_t==="circle"?(l=[c[0]-J,c[1]-at],b=[c[0]+ut,c[1]-lt]):(l=[c[0]-Qt,c[1]-w],b=[c[0]+Qt,c[1]-w]);break;case"top-right":W=w,H=I,_t==="circle"?(J=W*mn,at=W*aa,ut=H*mn,lt=H*aa,l=[c[0]+J,c[1]-at],b=[c[0]+lt,c[1]-ut]):(l=[c[0]+I-Qt,c[1]-w],b=[c[0]+I,c[1]-w+Qt]);break;case"right":W=I,H=I,_t==="circle"?(J=W*mn,at=W*aa,ut=H*mn,lt=H*aa,l=[c[0]+at,c[1]-J],b=[c[0]+lt,c[1]+ut]):(l=[c[0]+I,c[1]-Qt],b=[c[0]+I,c[1]+Qt]);break;case"bottom-right":W=I,H=w,_t==="circle"?(J=W*mn,at=W*aa,ut=H*mn,lt=H*aa,l=[c[0]+at,c[1]+J],b=[c[0]+ut,c[1]+lt]):(l=[c[0]+I,c[1]+w-Qt],b=[c[0]+I-Qt,c[1]+w]);break;case"bottom":W=w,H=w,_t==="circle"?(J=W*mn,at=W*aa,ut=H*mn,lt=H*aa,l=[c[0]+J,c[1]+at],b=[c[0]-ut,c[1]+lt]):(l=[c[0]-Qt,c[1]+w],b=[c[0]+Qt,c[1]+w]);break;case"bottom-left":W=w,H=I,_t==="circle"?(J=W*mn,at=W*aa,ut=H*mn,lt=H*aa,l=[c[0]-J,c[1]+at],b=[c[0]-lt,c[1]+ut]):(l=[c[0]-I,c[1]+w-Qt],b=[c[0]-I+Qt,c[1]+w]);break;case"left":W=I,H=I,_t==="circle"?(J=W*mn,at=W*aa,ut=H*mn,lt=H*aa,l=[c[0]-at,c[1]+J],b=[c[0]-lt,c[1]-ut]):(l=[c[0]-I,c[1]-Qt],b=[c[0]-I,c[1]+Qt]);break;case"top-left":W=I,H=w,_t==="circle"?(J=W*mn,at=W*aa,ut=H*mn,lt=H*aa,l=[c[0]-at,c[1]-J],b=[c[0]-ut,c[1]-lt]):(l=[c[0]-I+Qt,c[1]-w],b=[c[0]-I,c[1]-w+Qt]);break;default:W=I,H=I,J=W*mn,at=W*aa,ut=H*mn,lt=H*aa,l=[c[0]-J,c[1]-at],b=[c[0]+ut,c[1]-lt]}if(s.clockwise===!1){var de=[l[0],l[1]];l=[b[0],b[1]],b=[de[0],de[1]]}}var se=[l[0]-c[0],l[1]-c[1]],Te=(W+u)/W,je=(H+u)/H;s.clockwise===!1&&(Te=(H+u)/H,je=(W+u)/W);var Dr=zn.scale([0,0],se,Te),Kr=[c[0]+Dr[0],c[1]+Dr[1]],zr=[b[0]-c[0],b[1]-c[1]],Mr=zn.scale([0,0],zr,je),En=[c[0]+Mr[0],c[1]+Mr[1]];return e.startPoint={x:l[0],y:l[1]},e.endPoint={x:b[0],y:b[1]},e.controlPoints=[{x:Kr[0],y:Kr[1]},{x:En[0],y:En[1]}],e},ao=function(e,t,r,n,a){var o=1e-4,s=[],u=e==null?void 0:e.getPoint(t);if(!u)return{x:0,y:0,angle:0};if(t<o)s=e.getStartTangent().reverse();else if(t>1-o)s=e.getEndTangent();else{var f=e==null?void 0:e.getPoint(t+o);s.push([u.x,u.y]),s.push([f.x,f.y])}var c=Math.atan2(s[1][1]-s[0][1],s[1][0]-s[0][0]);if(c<0&&(c+=Ze*2),r&&(u.x+=cn(c)*r,u.y+=Cr(c)*r),n){var l=c-Ze/2;c>1/2*Ze&&c<3*1/2*Ze&&(l-=Ze),u.x+=cn(l)*n,u.y+=Cr(l)*n}var b={x:u.x,y:u.y,angle:c};return a?(c>.5*Ze&&c<1.5*Ze&&(c-=Ze),(0,m.__assign)({rotate:c},b)):b},zs=function i(e,t,r,n){if(n(e,t,r)===!1)return!1;if(e&&e.children){for(var a=e.children.length-1;a>=0;a--)if(!i(e.children[a],e,a,n))return!1}return!0},Mu=function i(e,t,r,n){if(e&&e.children){for(var a=e.children.length-1;a>=0;a--)if(!i(e.children[a],e,a,n))return}return n(e,t,r)!==!1},Ri=function(e,t){typeof t=="function"&&zs(e,null,-1,t)},vo=function(e,t){typeof t=="function"&&Mu(e,null,-1,t)},qs=function(e,t){return t*(ze[e]||1)},Xu=function(e,t){var r=0,n=new RegExp("[\u4E00-\u9FA5]+");return e.split("").forEach(function(a){n.test(a)?r+=t:r+=qs(a,t)}),[r,t]},Au=function(e,t){return typeof t!="number"||t<=0||t>=e.length?e:e.substring(0,t)+"..."},uu=function(e,t){var r=[],n={},a={};e.forEach(function(u){a[u.id]=u}),e.forEach(function(u,f){var c=(0,d.clone)(u);c.itemType="combo",c.children=void 0,c.parentId===c.id?(console.warn("The parentId for combo ".concat(c.id," can not be the same as the combo's id")),delete c.parentId):c.parentId&&!a[c.parentId]&&(console.warn("The parent combo for combo ".concat(c.id," does not exist!")),delete c.parentId);var l=n[c.id];if(l){if(c.children=l.children,n[c.id]=c,l=c,!l.parentId){r.push(l);return}var b=n[l.parentId];if(b)b.children?b.children.push(c):b.children=[c];else{var w={id:l.parentId,children:[l]};n[l.parentId]=w,n[c.id]=c}return}if((0,d.isString)(u.parentId)){var I=n[u.parentId];if(I)I.children?I.children.push(c):I.children=[c],n[c.id]=c;else{var W={id:u.parentId,children:[c]};n[W.id]=W,n[c.id]=c}}else r.push(c),n[c.id]=c});var o={};(t||[]).forEach(function(u){o[u.id]=u;var f=n[u.comboId];if(f){var c={id:u.id,comboId:u.comboId};f.children?f.children.push(c):f.children=[c],c.itemType="node",n[u.id]=c}});var s=0;return r.forEach(function(u){u.depth=s+10,Ri(u,function(f){var c,l=n[f.id].itemType;l==="node"?c=n[f.comboId]:c=n[f.parentId],c&&l==="node"?f.depth=s+1:f.depth=s+10,s<f.depth&&(s=f.depth);var b=o[f.id];return b&&(b.depth=f.depth),!0})}),r},Qs=function(e,t,r){var n,a=e,o,s={root:{children:e}},u=!1,f="root";(e||[]).forEach(function(I){if(!u){if(I.id===t){o=I,I.itemType==="combo"?o.parentId=r:o.comboId=r,u=!0;return}Ri(I,function(W){var H;return s[W.id]={children:(W==null?void 0:W.children)||[]},a=(H=s[W.parentId||W.comboId||"root"])===null||H===void 0?void 0:H.children,W&&(W.removed||t===W.id)&&a?(f=W.parentId||W.comboId||"root",o=W,W.itemType==="combo"?o.parentId=r:o.comboId=r,u=!0,!1):!0})}}),a=(n=s[f])===null||n===void 0?void 0:n.children;var c=a?a.indexOf(o):-1;if(c>-1&&a.splice(c,1),u||(o={id:t,itemType:"node",comboId:r},s[t]={children:void 0}),t){var l=!1;if(r){var b=0;(e||[]).forEach(function(I){l||Ri(I,function(W){return r===W.id?(l=!0,W.children?W.children.push(o):W.children=[o],b=W.depth,o.itemType==="node"?o.depth=b+2:o.depth=b+1,!1):!0})})}else(!r||!l)&&o.itemType!=="node"&&e.push(o);var w=o.depth;Ri(o,function(I){return I.itemType==="node"?w+=2:w+=1,I.depth=w,!0})}return e},fu=function(e,t,r){var n={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};if(!e||e.length===0){var a=r==null?void 0:r.getModel(),o=a||{},s=o.x,u=o.y,f=o.fixSize,c=o.collapsed,l=o.fixCollapseSize,b=c?l:f,w=(0,d.isArray)(b)?b:[b,b],I=w[0],W=w[1],H=[I/2,W/2];return{minX:s-H[0],minY:u-H[1],maxX:s+H[0],maxY:u+H[1],x:s,y:u,width:I,height:W}}return e.forEach(function(J){var at=t.findById(J.id);if(!(!at||!at.isVisible())){at.set("bboxCanvasCache",void 0);var ut=at.getCanvasBBox();ut.x&&n.minX>ut.minX&&(n.minX=ut.minX),ut.y&&n.minY>ut.minY&&(n.minY=ut.minY),ut.x&&n.maxX<ut.maxX&&(n.maxX=ut.maxX),ut.y&&n.maxY<ut.maxY&&(n.maxY=ut.maxY)}}),n.x=(n.minX+n.maxX)/2,n.y=(n.minY+n.maxY)/2,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,(r==null?void 0:r.getKeyShape().get("type"))==="circle"&&(n.width=Math.hypot(n.height,n.width),n.height=n.width),Object.keys(n).forEach(function(J){(n[J]===1/0||n[J]===-1/0)&&(n[J]=void 0)}),n},Is=function(e){var t=(0,d.isNumber)(e.x)||(0,d.isNumber)(e.y)||e.type||e.anchorPoints||e.size;return e.style&&(t=t||(0,d.isNumber)(e.style.r)||(0,d.isNumber)(e.style.width)||(0,d.isNumber)(e.style.height)||(0,d.isNumber)(e.style.rx)||(0,d.isNumber)(e.style.ry)),t},Js=function(e){var t={};return Object.keys(e).forEach(function(r){var n=e[r];if(!(r==="img"&&!(0,d.isString)(n)))if((0,d.isObject)(n)&&!(0,d.isArray)(n)){var a={};Object.keys(n).forEach(function(o){var s=n[o];o==="img"&&!(0,d.isString)(s)||(a[o]=(0,d.clone)(s))}),t[r]=a}else t[r]=(0,d.clone)(n)}),t},cs=function(e){var t=e.animateCfg,r=e.callback,n;if(!t)n={duration:500,callback:r};else if(n=(0,d.clone)(t),t.callback){var a=t.callback;n.callback=function(){r(),a()}}else n.callback=r;return n},Mo=function(e){if(!e)return console.error("G6 Error Tips: the data must be defined"),!1;var t=e.nodes,r=e.edges,n=e.combos,a=n===void 0?[]:n;if(!t&&!r){var o=!0;return Ri(e,function(b){return(0,d.isString)(b.id)?!0:(o=!1,!1)}),o}var s=(t||[]).find(function(b){return!(0,d.isString)(b.id)});if(s)return console.warn("G6 Warning Tips: missing 'id' property, or %c".concat(s.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1;var u=(t||[]).map(function(b){return b.id}),f=a==null?void 0:a.map(function(b){return b.id}),c=(0,m.__spreadArray)((0,m.__spreadArray)([],u,!0),f,!0),l=(r||[]).find(function(b){return!c.includes(b.source)||!c.includes(b.target)});return l?(console.warn("G6 Warning Tips: The source %c".concat(l.source,"%c or the target %c").concat(l.target,"%c of the edge do not exist in the nodes or combos."),"font-size: 20px; color: red;","","font-size: 20px; color: red;",""),!1):!0},rf=function(e,t){if(e==="node"||e==="combo"){if(t.id&&!(0,d.isString)(t.id))return console.warn("G6 Warning Tips: missing 'id' property, or the 'id' %c".concat(t.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1}else if(e==="edge"&&(!t.source||!t.target))return console.warn("G6 Warning Tips: missing 'source' or 'target' for the edge."),!1;return!0},kf=function(){function i(e){this.graph=e,this.destroyed=!1,this.modes=e.get("modes")||{default:[]},this.formatModes(),this.mode=e.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}return i.prototype.formatModes=function(){var e=this.modes;(0,d.each)(e,function(t){(0,d.each)(t,function(r,n){(0,d.isString)(r)&&(t[n]={type:r})})})},i.prototype.setBehaviors=function(e){var t=this.graph,r=this.modes[e],n=[],a;(0,d.each)(r||[],function(o){var s=V.getBehavior(o.type||o);s&&(a=new s(o),a&&(a.bind(t),n.push(a)))}),this.currentBehaves=n},i.mergeBehaviors=function(e,t){return(0,d.each)(t,function(r){e.indexOf(r)<0&&((0,d.isString)(r)&&(r={type:r}),e.push(r))}),e},i.filterBehaviors=function(e,t){var r=[];return e.forEach(function(n){var a="";(0,d.isString)(n)?a=n:a=n.type,t.indexOf(a)<0&&r.push(n)}),r},i.prototype.setMode=function(e){var t=this,r=t.modes,n=t.graph,a=e,o=r[a];o&&(n.emit("beforemodechange",{mode:e}),(0,d.each)(this.currentBehaves,function(s){s.delegate&&s.delegate.remove(),s.unbind(n)}),this.setBehaviors(a),n.emit("aftermodechange",{mode:e}),this.mode=e)},i.prototype.getMode=function(){return this.mode},i.prototype.manipulateBehaviors=function(e,t,r){var n=this,a;if((0,d.isArray)(e)?a=e:a=[e],(0,d.isArray)(t))return(0,d.each)(t,function(s){n.modes[s]?r?n.modes[s]=i.mergeBehaviors(n.modes[s]||[],a):n.modes[s]=i.filterBehaviors(n.modes[s]||[],a):r&&(n.modes[s]=a)}),this;var o=t;return t||(o=this.mode),this.modes[o]||r&&(this.modes[o]=a),r?this.modes[o]=i.mergeBehaviors(this.modes[o]||[],a):this.modes[o]=i.filterBehaviors(this.modes[o]||[],a),this.formatModes(),this.setMode(this.mode),this},i.prototype.updateBehavior=function(e,t,r){(0,d.isString)(e)&&(e={type:e});var n=[];if(!r||r===this.mode||r==="default"){if(n=this.currentBehaves,!n||!n.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var a=n.length,o=0;o<a;o++){var s=n[o];if(s.type===e.type)return s.updateCfg(t),this;o===a-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}else{if(n=this.modes[r],!n||!n.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var u=n.length,o=0;o<u;o++){var s=n[o];if(s.type===e.type||s===e.type)return s===e.type&&(s={type:s}),Object.assign(s,t),n[o]=s,this;o===u-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}return this},i.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},i}(),Rf=kf,Os=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,Bf=new RegExp("([a-z])["+Os+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+Os+"]*,?["+Os+"]*)+)","ig"),h=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+Os+"]*,?["+Os+"]*","ig"),D=function(i){if(!i)return null;if((0,d.isArray)(i))return i;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},t=[];return String(i).replace(Bf,function(r,n,a){var o=[],s=n.toLowerCase();if(a.replace(h,function(u,f){f&&o.push(+f)}),s==="m"&&o.length>2&&(t.push([n].concat(o.splice(0,2))),s="l",n=n==="m"?"l":"L"),s==="o"&&o.length===1&&t.push([n,o[0]]),s==="r")t.push([n].concat(o));else for(;o.length>=e[s]&&(t.push([n].concat(o.splice(0,e[s]))),!!e[s]););return i}),t},vt=function(i,e){for(var t=[],r=0,n=i.length;n-2*!e>r;r+=2){var a=[{x:+i[r-2],y:+i[r-1]},{x:+i[r],y:+i[r+1]},{x:+i[r+2],y:+i[r+3]},{x:+i[r+4],y:+i[r+5]}];e?r?n-4===r?a[3]={x:+i[0],y:+i[1]}:n-2===r&&(a[2]={x:+i[0],y:+i[1]},a[3]={x:+i[2],y:+i[3]}):a[0]={x:+i[n-2],y:+i[n-1]}:n-4===r?a[3]=a[2]:r||(a[0]={x:+i[r],y:+i[r+1]}),t.push(["C",(-a[0].x+6*a[1].x+a[2].x)/6,(-a[0].y+6*a[1].y+a[2].y)/6,(a[1].x+6*a[2].x-a[3].x)/6,(a[1].y+6*a[2].y-a[3].y)/6,a[2].x,a[2].y])}return t},Et=function(i,e,t,r,n){var a=[];if(n===null&&r===null&&(r=t),i=+i,e=+e,t=+t,r=+r,n!==null){var o=Math.PI/180,s=i+t*Math.cos(-r*o),u=i+t*Math.cos(-n*o),f=e+t*Math.sin(-r*o),c=e+t*Math.sin(-n*o);a=[["M",s,f],["A",t,t,0,+(n-r>180),0,u,c]]}else a=[["M",i,e],["m",0,-r],["a",t,r,0,1,1,0,2*r],["a",t,r,0,1,1,0,-2*r],["z"]];return a},Lt=function(i){if(i=D(i),!i||!i.length)return[["M",0,0]];var e=[],t=0,r=0,n=0,a=0,o=0,s,u;i[0][0]==="M"&&(t=+i[0][1],r=+i[0][2],n=t,a=r,o++,e[0]=["M",t,r]);for(var f=i.length===3&&i[0][0]==="M"&&i[1][0].toUpperCase()==="R"&&i[2][0].toUpperCase()==="Z",c=void 0,l=void 0,b=o,w=i.length;b<w;b++){if(e.push(c=[]),l=i[b],s=l[0],s!==s.toUpperCase())switch(c[0]=s.toUpperCase(),c[0]){case"A":c[1]=l[1],c[2]=l[2],c[3]=l[3],c[4]=l[4],c[5]=l[5],c[6]=+l[6]+t,c[7]=+l[7]+r;break;case"V":c[1]=+l[1]+r;break;case"H":c[1]=+l[1]+t;break;case"R":u=[t,r].concat(l.slice(1));for(var I=2,W=u.length;I<W;I++)u[I]=+u[I]+t,u[++I]=+u[I]+r;e.pop(),e=e.concat(vt(u,f));break;case"O":e.pop(),u=Et(t,r,l[1],l[2]),u.push(u[0]),e=e.concat(u);break;case"U":e.pop(),e=e.concat(Et(t,r,l[1],l[2],l[3])),c=["U"].concat(e[e.length-1].slice(-2));break;case"M":n=+l[1]+t,a=+l[2]+r;break;default:for(var I=1,W=l.length;I<W;I++)c[I]=+l[I]+(I%2?t:r)}else if(s==="R")u=[t,r].concat(l.slice(1)),e.pop(),e=e.concat(vt(u,f)),c=["R"].concat(l.slice(-2));else if(s==="O")e.pop(),u=Et(t,r,l[1],l[2]),u.push(u[0]),e=e.concat(u);else if(s==="U")e.pop(),e=e.concat(Et(t,r,l[1],l[2],l[3])),c=["U"].concat(e[e.length-1].slice(-2));else for(var H=0,J=l.length;H<J;H++)c[H]=l[H];if(s=s.toUpperCase(),s!=="O")switch(c[0]){case"Z":t=+n,r=+a;break;case"H":t=c[1];break;case"V":r=c[1];break;case"M":n=c[c.length-2],a=c[c.length-1];break;default:t=c[c.length-2],r=c[c.length-1]}}return e},Xt=function(i,e,t,r){return[i,e,t,r,t,r]},Vt=function(i,e,t,r,n,a){var o=.3333333333333333,s=2/3;return[o*i+s*t,o*e+s*r,o*n+s*t,o*a+s*r,n,a]},ue=function(i,e,t,r,n,a,o,s,u,f){t===r&&(t+=1);var c=Math.PI*120/180,l=Math.PI/180*(+n||0),b=[],w,I,W,H,J,at=function(gi,ti,pi){var wi=gi*Math.cos(pi)-ti*Math.sin(pi),ji=gi*Math.sin(pi)+ti*Math.cos(pi);return{x:wi,y:ji}};if(f)I=f[0],W=f[1],H=f[2],J=f[3];else{w=at(i,e,-l),i=w.x,e=w.y,w=at(s,u,-l),s=w.x,u=w.y,i===s&&e===u&&(s+=1,u+=1);var ut=(i-s)/2,lt=(e-u)/2,_t=ut*ut/(t*t)+lt*lt/(r*r);_t>1&&(_t=Math.sqrt(_t),t=_t*t,r=_t*r);var Bt=t*t,Rt=r*r,Qt=(a===o?-1:1)*Math.sqrt(Math.abs((Bt*Rt-Bt*lt*lt-Rt*ut*ut)/(Bt*lt*lt+Rt*ut*ut)));H=Qt*t*lt/r+(i+s)/2,J=Qt*-r*ut/t+(e+u)/2,I=Math.asin(((e-J)/r).toFixed(9)),W=Math.asin(((u-J)/r).toFixed(9)),I=i<H?Math.PI-I:I,W=s<H?Math.PI-W:W,I<0&&(I=Math.PI*2+I),W<0&&(W=Math.PI*2+W),o&&I>W&&(I=I-Math.PI*2),!o&&W>I&&(W=W-Math.PI*2)}var de=W-I;if(Math.abs(de)>c){var se=W,Te=s,je=u;W=I+c*(o&&W>I?1:-1),s=H+t*Math.cos(W),u=J+r*Math.sin(W),b=ue(s,u,t,r,n,0,o,Te,je,[W,se,H,J])}de=W-I;var Dr=Math.cos(I),Kr=Math.sin(I),zr=Math.cos(W),Mr=Math.sin(W),En=Math.tan(de/4),yn=4/3*t*En,Ar=4/3*r*En,Xr=[i,e],sn=[i+yn*Kr,e-Ar*Dr],un=[s+yn*Mr,u-Ar*zr],An=[s,u];if(sn[0]=2*Xr[0]-sn[0],sn[1]=2*Xr[1]-sn[1],f)return[sn,un,An].concat(b);b=[sn,un,An].concat(b).join().split(",");for(var Gn=[],ga=0,Oa=b.length;ga<Oa;ga++)Gn[ga]=ga%2?at(b[ga-1],b[ga],l).y:at(b[ga],b[ga+1],l).x;return Gn},he=function(i,e){var t=Lt(i),r=e&&Lt(e),n={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o=[],s=[],u="",f="",c,l=function(ut,lt,_t){var Bt,Rt;if(!ut)return["C",lt.x,lt.y,lt.x,lt.y,lt.x,lt.y];switch(!(ut[0]in{T:1,Q:1})&&(lt.qx=lt.qy=null),ut[0]){case"M":lt.X=ut[1],lt.Y=ut[2];break;case"A":ut=["C"].concat(ue.apply(0,[lt.x,lt.y].concat(ut.slice(1))));break;case"S":_t==="C"||_t==="S"?(Bt=lt.x*2-lt.bx,Rt=lt.y*2-lt.by):(Bt=lt.x,Rt=lt.y),ut=["C",Bt,Rt].concat(ut.slice(1));break;case"T":_t==="Q"||_t==="T"?(lt.qx=lt.x*2-lt.qx,lt.qy=lt.y*2-lt.qy):(lt.qx=lt.x,lt.qy=lt.y),ut=["C"].concat(Vt(lt.x,lt.y,lt.qx,lt.qy,ut[1],ut[2]));break;case"Q":lt.qx=ut[1],lt.qy=ut[2],ut=["C"].concat(Vt(lt.x,lt.y,ut[1],ut[2],ut[3],ut[4]));break;case"L":ut=["C"].concat(Xt(lt.x,lt.y,ut[1],ut[2]));break;case"H":ut=["C"].concat(Xt(lt.x,lt.y,ut[1],lt.y));break;case"V":ut=["C"].concat(Xt(lt.x,lt.y,lt.x,ut[1]));break;case"Z":ut=["C"].concat(Xt(lt.x,lt.y,lt.X,lt.Y));break;default:break}return ut},b=function(ut,lt){if(ut[lt].length>7){ut[lt].shift();for(var _t=ut[lt];_t.length;)o[lt]="A",r&&(s[lt]="A"),ut.splice(lt++,0,["C"].concat(_t.splice(0,6)));ut.splice(lt,1),c=Math.max(t.length,r&&r.length||0)}},w=function(ut,lt,_t,Bt,Rt){ut&&lt&&ut[Rt][0]==="M"&&lt[Rt][0]!=="M"&&(lt.splice(Rt,0,["M",Bt.x,Bt.y]),_t.bx=0,_t.by=0,_t.x=ut[Rt][1],_t.y=ut[Rt][2],c=Math.max(t.length,r&&r.length||0))};c=Math.max(t.length,r&&r.length||0);for(var I=0;I<c;I++){t[I]&&(u=t[I][0]),u!=="C"&&(o[I]=u,I&&(f=o[I-1])),t[I]=l(t[I],n,f),o[I]!=="A"&&u==="C"&&(o[I]="C"),b(t,I),r&&(r[I]&&(u=r[I][0]),u!=="C"&&(s[I]=u,I&&(f=s[I-1])),r[I]=l(r[I],a,f),s[I]!=="A"&&u==="C"&&(s[I]="C"),b(r,I)),w(t,r,n,a,I),w(r,t,a,n,I);var W=t[I],H=r&&r[I],J=W.length,at=r&&H.length;n.x=W[J-2],n.y=W[J-1],n.bx=parseFloat(W[J-4])||n.x,n.by=parseFloat(W[J-3])||n.y,a.bx=r&&(parseFloat(H[at-4])||a.x),a.by=r&&(parseFloat(H[at-3])||a.y),a.x=r&&H[at-2],a.y=r&&H[at-1]}return r?[t,r]:t},Ce=/,?([a-z]),?/gi,Ye=function(i){return i.join(",").replace(Ce,"$1")},yr=function(i,e,t,r,n){var a=-3*e+9*t-9*r+3*n,o=i*a+6*e-12*t+6*r;return i*o-3*e+3*t},xr=function(i,e,t,r,n,a,o,s,u){u===null&&(u=1),u=u>1?1:u<0?0:u;for(var f=u/2,c=12,l=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],b=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],w=0,I=0;I<c;I++){var W=f*l[I]+f,H=yr(W,i,t,n,o),J=yr(W,e,r,a,s),at=H*H+J*J;w+=b[I]*Math.sqrt(at)}return f*w},pr=function(i,e,t,r,n,a,o,s){for(var u=[],f=[[],[]],c,l,b,w,I=0;I<2;++I){if(I===0?(l=6*i-12*t+6*n,c=-3*i+9*t-9*n+3*o,b=3*t-3*i):(l=6*e-12*r+6*a,c=-3*e+9*r-9*a+3*s,b=3*r-3*e),Math.abs(c)<1e-12){if(Math.abs(l)<1e-12)continue;w=-b/l,w>0&&w<1&&u.push(w);continue}var W=l*l-4*b*c,H=Math.sqrt(W);if(!(W<0)){var J=(-l+H)/(2*c);J>0&&J<1&&u.push(J);var at=(-l-H)/(2*c);at>0&&at<1&&u.push(at)}}for(var ut=u.length,lt=ut,_t;ut--;)w=u[ut],_t=1-w,f[0][ut]=_t*_t*_t*i+3*_t*_t*w*t+3*_t*w*w*n+w*w*w*o,f[1][ut]=_t*_t*_t*e+3*_t*_t*w*r+3*_t*w*w*a+w*w*w*s;return f[0][lt]=i,f[1][lt]=e,f[0][lt+1]=o,f[1][lt+1]=s,f[0].length=f[1].length=lt+2,{min:{x:Math.min.apply(0,f[0]),y:Math.min.apply(0,f[1])},max:{x:Math.max.apply(0,f[0]),y:Math.max.apply(0,f[1])}}},Zr=function(i,e,t,r,n,a,o,s){if(!(Math.max(i,t)<Math.min(n,o)||Math.min(i,t)>Math.max(n,o)||Math.max(e,r)<Math.min(a,s)||Math.min(e,r)>Math.max(a,s))){var u=(i*r-e*t)*(n-o)-(i-t)*(n*s-a*o),f=(i*r-e*t)*(a-s)-(e-r)*(n*s-a*o),c=(i-t)*(a-s)-(e-r)*(n-o);if(c){var l=u/c,b=f/c,w=+l.toFixed(2),I=+b.toFixed(2);if(!(w<+Math.min(i,t).toFixed(2)||w>+Math.max(i,t).toFixed(2)||w<+Math.min(n,o).toFixed(2)||w>+Math.max(n,o).toFixed(2)||I<+Math.min(e,r).toFixed(2)||I>+Math.max(e,r).toFixed(2)||I<+Math.min(a,s).toFixed(2)||I>+Math.max(a,s).toFixed(2)))return{x:l,y:b}}}},qr=function(i,e,t){return e>=i.x&&e<=i.x+i.width&&t>=i.y&&t<=i.y+i.height},Tr=function(i,e,t,r,n){if(n)return[["M",+i+ +n,e],["l",t-n*2,0],["a",n,n,0,0,1,n,n],["l",0,r-n*2],["a",n,n,0,0,1,-n,n],["l",n*2-t,0],["a",n,n,0,0,1,-n,-n],["l",0,n*2-r],["a",n,n,0,0,1,n,-n],["z"]];var a=[["M",i,e],["l",t,0],["l",0,r],["l",-t,0],["z"]];return a.parsePathArray=Ye,a},_n=function(i,e,t,r){return i===null&&(i=e=t=r=0),e===null&&(e=i.y,t=i.width,r=i.height,i=i.x),{x:i,y:e,width:t,w:t,height:r,h:r,x2:i+t,y2:e+r,cx:i+t/2,cy:e+r/2,r1:Math.min(t,r)/2,r2:Math.max(t,r)/2,r0:Math.sqrt(t*t+r*r)/2,path:Tr(i,e,t,r),vb:[i,e,t,r].join(" ")}},Ea=function(i,e){return i=_n(i),e=_n(e),qr(e,i.x,i.y)||qr(e,i.x2,i.y)||qr(e,i.x,i.y2)||qr(e,i.x2,i.y2)||qr(i,e.x,e.y)||qr(i,e.x2,e.y)||qr(i,e.x,e.y2)||qr(i,e.x2,e.y2)||(i.x<e.x2&&i.x>e.x||e.x<i.x2&&e.x>i.x)&&(i.y<e.y2&&i.y>e.y||e.y<i.y2&&e.y>i.y)},wa=function(i,e,t,r,n,a,o,s){(0,d.isArray)(i)||(i=[i,e,t,r,n,a,o,s]);var u=pr.apply(null,i);return _n(u.min.x,u.min.y,u.max.x-u.min.x,u.max.y-u.min.y)},ha=function(i,e,t,r,n,a,o,s,u){var f=1-u,c=Math.pow(f,3),l=Math.pow(f,2),b=u*u,w=b*u,I=c*i+l*3*u*t+f*3*u*u*n+w*o,W=c*e+l*3*u*r+f*3*u*u*a+w*s,H=i+2*u*(t-i)+b*(n-2*t+i),J=e+2*u*(r-e)+b*(a-2*r+e),at=t+2*u*(n-t)+b*(o-2*n+t),ut=r+2*u*(a-r)+b*(s-2*a+r),lt=f*i+u*t,_t=f*e+u*r,Bt=f*n+u*o,Rt=f*a+u*s,Qt=90-Math.atan2(H-at,J-ut)*180/Math.PI;return{x:I,y:W,m:{x:H,y:J},n:{x:at,y:ut},start:{x:lt,y:_t},end:{x:Bt,y:Rt},alpha:Qt}},qn=function(i,e,t){var r=wa(i),n=wa(e);if(!Ea(r,n))return t?0:[];for(var a=xr.apply(0,i),o=xr.apply(0,e),s=~~(a/8),u=~~(o/8),f=[],c=[],l={},b=t?0:[],w=0;w<s+1;w++){var I=ha.apply(0,i.concat(w/s));f.push({x:I.x,y:I.y,t:w/s})}for(var w=0;w<u+1;w++){var I=ha.apply(0,e.concat(w/u));c.push({x:I.x,y:I.y,t:w/u})}for(var w=0;w<s;w++)for(var W=0;W<u;W++){var H=f[w],J=f[w+1],at=c[W],ut=c[W+1],lt=Math.abs(J.x-H.x)<.001?"y":"x",_t=Math.abs(ut.x-at.x)<.001?"y":"x",Bt=Zr(H.x,H.y,J.x,J.y,at.x,at.y,ut.x,ut.y);if(Bt){if(l[Bt.x.toFixed(4)]===Bt.y.toFixed(4))continue;l[Bt.x.toFixed(4)]=Bt.y.toFixed(4);var Rt=H.t+Math.abs((Bt[lt]-H[lt])/(J[lt]-H[lt]))*(J.t-H.t),Qt=at.t+Math.abs((Bt[_t]-at[_t])/(ut[_t]-at[_t]))*(ut.t-at.t);Rt>=0&&Rt<=1&&Qt>=0&&Qt<=1&&(t?b+=1:b.push({x:Bt.x,y:Bt.y,t1:Rt,t2:Qt}))}}return b},sa=function(i,e,t){i=he(i),e=he(e);for(var r,n,a,o,s,u,f,c,l,b,w=t?0:[],I=0,W=i.length;I<W;I++){var H=i[I];if(H[0]==="M")r=s=H[1],n=u=H[2];else{H[0]==="C"?(l=[r,n].concat(H.slice(1)),r=l[6],n=l[7]):(l=[r,n,r,n,s,u,s,u],r=s,n=u);for(var J=0,at=e.length;J<at;J++){var ut=e[J];if(ut[0]==="M")a=f=ut[1],o=c=ut[2];else{ut[0]==="C"?(b=[a,o].concat(ut.slice(1)),a=b[6],o=b[7]):(b=[a,o,a,o,f,c,f,c],a=f,o=c);var lt=qn(l,b,t);if(t)w+=lt;else{for(var _t=0,Bt=lt.length;_t<Bt;_t++)lt[_t].segment1=I,lt[_t].segment2=J,lt[_t].bez1=l,lt[_t].bez2=b;w=w.concat(lt)}}}}}return w},Ni=function(i,e){return sa(i,e)};function Ci(i,e){var t=[],r=[];function n(a,o){if(a.length===1)t.push(a[0]),r.push(a[0]);else{for(var s=[],u=0;u<a.length-1;u++)u===0&&t.push(a[0]),u===a.length-2&&r.push(a[u+1]),s[u]=[(1-o)*a[u][0]+o*a[u+1][0],(1-o)*a[u][1]+o*a[u+1][1]];n(s,o)}}return i.length&&n(i,e),{left:t,right:r.reverse()}}function _i(i,e,t){var r=[[i[1],i[2]]];t=t||2;var n=[];e[0]==="A"?(r.push(e[6]),r.push(e[7])):e[0]==="C"?(r.push([e[1],e[2]]),r.push([e[3],e[4]]),r.push([e[5],e[6]])):e[0]==="S"||e[0]==="Q"?(r.push([e[1],e[2]]),r.push([e[3],e[4]])):r.push([e[1],e[2]]);for(var a=r,o=1/t,s=0;s<t-1;s++){var u=o/(1-o*s),f=Ci(a,u);n.push(f.left),a=f.right}n.push(a);var c=n.map(function(l){var b=[];return l.length===4&&(b.push("C"),b=b.concat(l[2])),l.length>=3&&(l.length===3&&b.push("Q"),b=b.concat(l[1])),l.length===2&&b.push("L"),b=b.concat(l[l.length-1]),b});return c}var Ti=function(i,e,t){if(t===1)return[[].concat(i)];var r=[];if(e[0]==="L"||e[0]==="C"||e[0]==="Q")r=r.concat(_i(i,e,t));else{var n=[].concat(i);n[0]==="M"&&(n[0]="L");for(var a=0;a<=t-1;a++)r.push(n)}return r},Ii=function(i,e){if(i.length===1)return i;var t=i.length-1,r=e.length-1,n=t/r,a=[];if(i.length===1&&i[0][0]==="M"){for(var o=0;o<r-t;o++)i.push(i[0]);return i}for(var o=0;o<r;o++){var s=Math.floor(n*o);a[s]=(a[s]||0)+1}var u=a.reduce(function(f,c,l){return l===t?f.concat(i[t]):f.concat(Ti(i[l],i[l+1],c))},[]);return u.unshift(i[0]),(e[r]==="Z"||e[r]==="z")&&u.push("Z"),u},Bi=function(i,e){if(i.length!==e.length)return!1;var t=!0;return(0,d.each)(i,function(r,n){if(r!==e[n])return t=!1,!1}),t};function $i(i,e,t){var r=null,n=t;return e<n&&(n=e,r="add"),i<n&&(n=i,r="del"),{type:r,min:n}}var za=function(i,e){var t=i.length,r=e.length,n,a,o=0;if(t===0||r===0)return null;for(var s=[],u=0;u<=t;u++)s[u]=[],s[u][0]={min:u};for(var f=0;f<=r;f++)s[0][f]={min:f};for(var u=1;u<=t;u++){n=i[u-1];for(var f=1;f<=r;f++){a=e[f-1],Bi(n,a)?o=0:o=1;var c=s[u-1][f].min+1,l=s[u][f-1].min+1,b=s[u-1][f-1].min+o;s[u][f]=$i(c,l,b)}}return s},ii=function(i,e){var t=za(i,e),r=i.length,n=e.length,a=[],o=1,s=1;if(t[r][n].min!==r){for(var u=1;u<=r;u++){var f=t[u][u].min;s=u;for(var c=o;c<=n;c++)t[u][c].min<f&&(f=t[u][c].min,s=c);o=s,t[u][o].type&&a.push({index:u-1,type:t[u][o].type})}for(var u=a.length-1;u>=0;u--)o=a[u].index,a[u].type==="add"?i.splice(o,0,[].concat(i[o])):i.splice(o,1)}r=i.length;var l=n-r;if(r<n)for(var u=0;u<l;u++)i[r-1][0]==="z"||i[r-1][0]==="Z"?i.splice(r-2,0,i[r-2]):i.push(i[r-1]),r+=1;return i};function ls(i,e,t){for(var r=[].concat(i),n,a=1/(t+1),o=ys(e)[0],s=1;s<=t;s++)a*=s,n=Math.floor(i.length*a),n===0?r.unshift([o[0]*a+i[n][0]*(1-a),o[1]*a+i[n][1]*(1-a)]):r.splice(n,0,[o[0]*a+i[n][0]*(1-a),o[1]*a+i[n][1]*(1-a)]);return r}function ys(i){var e=[];switch(i[0]){case"M":e.push([i[1],i[2]]);break;case"L":e.push([i[1],i[2]]);break;case"A":e.push([i[6],i[7]]);break;case"Q":e.push([i[3],i[4]]),e.push([i[1],i[2]]);break;case"T":e.push([i[1],i[2]]);break;case"C":e.push([i[5],i[6]]),e.push([i[1],i[2]]),e.push([i[3],i[4]]);break;case"S":e.push([i[3],i[4]]),e.push([i[1],i[2]]);break;case"H":e.push([i[1],i[1]]);break;case"V":e.push([i[1],i[1]]);break;default:}return e}var ko=function(i,e){if(i.length<=1)return i;for(var t,r=0;r<e.length;r++)if(i[r][0]!==e[r][0])switch(t=ys(i[r]),e[r][0]){case"M":i[r]=["M"].concat(t[0]);break;case"L":i[r]=["L"].concat(t[0]);break;case"A":i[r]=[].concat(e[r]),i[r][6]=t[0][0],i[r][7]=t[0][1];break;case"Q":if(t.length<2)if(r>0)t=ls(t,i[r-1],1);else{i[r]=e[r];break}i[r]=["Q"].concat(t.reduce(function(n,a){return n.concat(a)},[]));break;case"T":i[r]=["T"].concat(t[0]);break;case"C":if(t.length<3)if(r>0)t=ls(t,i[r-1],2);else{i[r]=e[r];break}i[r]=["C"].concat(t.reduce(function(n,a){return n.concat(a)},[]));break;case"S":if(t.length<2)if(r>0)t=ls(t,i[r-1],1);else{i[r]=e[r];break}i[r]=["S"].concat(t.reduce(function(n,a){return n.concat(a)},[]));break;default:i[r]=e[r]}return i},Cu=function(){function i(e,t){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=e,this.name=e,this.originalEvent=t,this.timeStamp=t.timeStamp}return i.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},i.prototype.stopPropagation=function(){this.propagationStopped=!0},i.prototype.toString=function(){var e=this.type;return"[Event (type="+e+")]"},i.prototype.save=function(){},i.prototype.restore=function(){},i}(),Ff=Cu;function xc(i,e){var t=i.indexOf(e);t!==-1&&i.splice(t,1)}var bc=typeof window!="undefined"&&typeof window.document!="undefined";function Ec(i,e){if(i.isCanvas())return!0;for(var t=e.getParent(),r=!1;t;){if(t===i){r=!0;break}t=t.getParent()}return r}function Gf(i){return i.cfg.visible&&i.cfg.capture}var zf=function(i){(0,m.__extends)(e,i);function e(t){var r=i.call(this)||this;r.destroyed=!1;var n=r.getDefaultCfg();return r.cfg=(0,d.mix)(n,t),r}return e.prototype.getDefaultCfg=function(){return{}},e.prototype.get=function(t){return this.cfg[t]},e.prototype.set=function(t,r){this.cfg[t]=r},e.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},e}(Q),wc=zf,nf=z(734155),af=function(i,e,t){if(t||arguments.length===2)for(var r=0,n=e.length,a;r<n;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return i.concat(a||Array.prototype.slice.call(e))},_c=function(){function i(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"}return i}(),of=function(){function i(e){this.version=e,this.type="node",this.name="node",this.os=nf.platform}return i}(),cu=function(){function i(e,t,r,n){this.name=e,this.version=t,this.os=r,this.bot=n,this.type="bot-device"}return i}(),Sc=function(){function i(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return i}(),wn=function(){function i(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return i}(),Tu=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Ua=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,sf=3,Uf=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Tu]],Us=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Wf(i){return i?Yf(i):typeof document=="undefined"&&typeof navigator!="undefined"&&navigator.product==="ReactNative"?new wn:typeof navigator!="undefined"?Yf(navigator.userAgent):ms()}function lu(i){return i!==""&&Uf.reduce(function(e,t){var r=t[0],n=t[1];if(e)return e;var a=n.exec(i);return!!a&&[r,a]},!1)}function Xf(i){var e=lu(i);return e?e[0]:null}function Yf(i){var e=lu(i);if(!e)return null;var t=e[0],r=e[1];if(t==="searchbot")return new Sc;var n=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);n?n.length<sf&&(n=af(af([],n,!0),jf(sf-n.length),!0)):n=[];var a=n.join("."),o=Vf(i),s=Ua.exec(i);return s&&s[1]?new cu(t,a,o,s[1]):new _c(t,a,o)}function Vf(i){for(var e=0,t=Us.length;e<t;e++){var r=Us[e],n=r[0],a=r[1],o=a.exec(i);if(o)return n}return null}function ms(){var i=typeof nf!="undefined"&&nf.version;return i?new of(nf.version.slice(1)):null}function jf(i){for(var e=[],t=0;t<i;t++)e.push("0");return e}function Hf(i,e){var t=[],r=i[0],n=i[1],a=i[2],o=i[3],s=i[4],u=i[5],f=i[6],c=i[7],l=i[8],b=e[0],w=e[1],I=e[2],W=e[3],H=e[4],J=e[5],at=e[6],ut=e[7],lt=e[8];return t[0]=b*r+w*o+I*f,t[1]=b*n+w*s+I*c,t[2]=b*a+w*u+I*l,t[3]=W*r+H*o+J*f,t[4]=W*n+H*s+J*c,t[5]=W*a+H*u+J*l,t[6]=at*r+ut*o+lt*f,t[7]=at*n+ut*s+lt*c,t[8]=at*a+ut*u+lt*l,t}function bi(i,e){var t=[],r=e[0],n=e[1];return t[0]=i[0]*r+i[3]*n+i[6],t[1]=i[1]*r+i[4]*n+i[7],t}function Yu(i){var e=[],t=i[0],r=i[1],n=i[2],a=i[3],o=i[4],s=i[5],u=i[6],f=i[7],c=i[8],l=c*o-s*f,b=-c*a+s*u,w=f*a-o*u,I=t*l+r*b+n*w;return I?(I=1/I,e[0]=l*I,e[1]=(-c*r+n*f)*I,e[2]=(s*r-n*o)*I,e[3]=b*I,e[4]=(c*t-n*u)*I,e[5]=(-s*t+n*a)*I,e[6]=w*I,e[7]=(-f*t+r*u)*I,e[8]=(o*t-r*a)*I,e):null}var xs=Kt,et="matrix",pt=["zIndex","capture","visible","type"],St=["repeat"],Ut=":",ne="*";function Be(i){for(var e=[],t=0;t<i.length;t++)(0,d.isArray)(i[t])?e.push([].concat(i[t])):e.push(i[t]);return e}function Ue(i,e){var t={},r=e.attrs;for(var n in i)t[n]=r[n];return t}function ur(i,e){var t={},r=e.attr();return(0,d.each)(i,function(n,a){St.indexOf(a)===-1&&!(0,d.isEqual)(r[a],n)&&(t[a]=n)}),t}function Br(i,e){if(e.onFrame)return i;var t=e.startTime,r=e.delay,n=e.duration,a=Object.prototype.hasOwnProperty;return(0,d.each)(i,function(o){t+r<o.startTime+o.delay+o.duration&&n>o.delay&&(0,d.each)(e.toAttrs,function(s,u){a.call(o.toAttrs,u)&&(delete o.toAttrs[u],delete o.fromAttrs[u])})}),i}var Hr=function(i){(0,m.__extends)(e,i);function e(t){var r=i.call(this,t)||this;r.attrs={};var n=r.getDefaultAttrs();return(0,d.mix)(n,t.attrs),r.attrs=n,r.initAttrs(n),r.initAnimate(),r}return e.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},e.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},e.prototype.onCanvasChange=function(t){},e.prototype.initAttrs=function(t){},e.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},e.prototype.isGroup=function(){return!1},e.prototype.getParent=function(){return this.get("parent")},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.attr=function(){for(var t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var a=r[0],o=r[1];if(!a)return this.attrs;if((0,d.isObject)(a)){for(var s in a)this.setAttr(s,a[s]);return this.afterAttrsChange(a),this}return r.length===2?(this.setAttr(a,o),this.afterAttrsChange((t={},t[a]=o,t)),this):this.attrs[a]},e.prototype.isClipped=function(t,r){var n=this.getClip();return n&&!n.isHit(t,r)},e.prototype.setAttr=function(t,r){var n=this.attrs[t];n!==r&&(this.attrs[t]=r,this.onAttrChange(t,r,n))},e.prototype.onAttrChange=function(t,r,n){t==="matrix"&&this.set("totalMatrix",null)},e.prototype.afterAttrsChange=function(t){if(this.cfg.isClipShape){var r=this.cfg.applyTo;r&&r.onCanvasChange("clip")}else this.onCanvasChange("attr")},e.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},e.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},e.prototype.setZIndex=function(t){this.set("zIndex",t);var r=this.getParent();return r&&r.sort(),this},e.prototype.toFront=function(){var t=this.getParent();if(t){var r=t.getChildren(),n=this.get("el"),a=r.indexOf(this);r.splice(a,1),r.push(this),this.onCanvasChange("zIndex")}},e.prototype.toBack=function(){var t=this.getParent();if(t){var r=t.getChildren(),n=this.get("el"),a=r.indexOf(this);r.splice(a,1),r.unshift(this),this.onCanvasChange("zIndex")}},e.prototype.remove=function(t){t===void 0&&(t=!0);var r=this.getParent();r?(xc(r.getChildren(),this),r.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),t&&this.destroy()},e.prototype.resetMatrix=function(){this.attr(et,this.getDefaultMatrix()),this.onCanvasChange("matrix")},e.prototype.getMatrix=function(){return this.attr(et)},e.prototype.setMatrix=function(t){this.attr(et,t),this.onCanvasChange("matrix")},e.prototype.getTotalMatrix=function(){var t=this.cfg.totalMatrix;if(!t){var r=this.attr("matrix"),n=this.cfg.parentMatrix;n&&r?t=Hf(n,r):t=r||n,this.set("totalMatrix",t)}return t},e.prototype.applyMatrix=function(t){var r=this.attr("matrix"),n=null;t&&r?n=Hf(t,r):n=r||t,this.set("totalMatrix",n),this.set("parentMatrix",t)},e.prototype.getDefaultMatrix=function(){return null},e.prototype.applyToMatrix=function(t){var r=this.attr("matrix");return r?bi(r,t):t},e.prototype.invertFromMatrix=function(t){var r=this.attr("matrix");if(r){var n=Yu(r);if(n)return bi(n,t)}return t},e.prototype.setClip=function(t){var r=this.getCanvas(),n=null;if(t){var a=this.getShapeBase(),o=(0,d.upperFirst)(t.type),s=a[o];s&&(n=new s({type:t.type,isClipShape:!0,applyTo:this,attrs:t.attrs,canvas:r}))}return this.set("clipShape",n),this.onCanvasChange("clip"),n},e.prototype.getClip=function(){var t=this.cfg.clipShape;return t||null},e.prototype.clone=function(){var t=this,r=this.attrs,n={};(0,d.each)(r,function(s,u){(0,d.isArray)(r[u])?n[u]=Be(r[u]):n[u]=r[u]});var a=this.constructor,o=new a({attrs:n});return(0,d.each)(pt,function(s){o.set(s,t.get(s))}),o},e.prototype.destroy=function(){var t=this.destroyed;t||(this.attrs={},i.prototype.destroy.call(this))},e.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},e.prototype.animate=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(!(!this.get("timeline")&&!this.get("canvas"))){this.set("animating",!0);var n=this.get("timeline");n||(n=this.get("canvas").get("timeline"),this.set("timeline",n));var a=this.get("animations")||[];n.timer||n.initTimer();var o=t[0],s=t[1],u=t[2],f=u===void 0?"easeLinear":u,c=t[3],l=c===void 0?d.noop:c,b=t[4],w=b===void 0?0:b,I,W,H,J,at;(0,d.isFunction)(o)?(I=o,o={}):(0,d.isObject)(o)&&o.onFrame&&(I=o.onFrame,W=o.repeat),(0,d.isObject)(s)?(at=s,s=at.duration,f=at.easing||"easeLinear",w=at.delay||0,W=at.repeat||W||!1,l=at.callback||d.noop,H=at.pauseCallback||d.noop,J=at.resumeCallback||d.noop):((0,d.isNumber)(l)&&(w=l,l=null),(0,d.isFunction)(f)?(l=f,f="easeLinear"):f=f||"easeLinear");var ut=ur(o,this),lt={fromAttrs:Ue(ut,this),toAttrs:ut,duration:s,easing:f,repeat:W,callback:l,pauseCallback:H,resumeCallback:J,delay:w,startTime:n.getTime(),id:(0,d.uniqueId)(),onFrame:I,pathFormatted:!1};a.length>0?a=Br(a,lt):n.addAnimator(this),a.push(lt),this.set("animations",a),this.set("_pause",{isPaused:!1})}},e.prototype.stopAnimate=function(t){var r=this;t===void 0&&(t=!0);var n=this.get("animations");(0,d.each)(n,function(a){t&&(a.onFrame?r.attr(a.onFrame(1)):r.attr(a.toAttrs)),a.callback&&a.callback()}),this.set("animating",!1),this.set("animations",[])},e.prototype.pauseAnimate=function(){var t=this.get("timeline"),r=this.get("animations"),n=t.getTime();return(0,d.each)(r,function(a){a._paused=!0,a._pauseTime=n,a.pauseCallback&&a.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:n}),this},e.prototype.resumeAnimate=function(){var t=this.get("timeline"),r=t.getTime(),n=this.get("animations"),a=this.get("_pause").pauseTime;return(0,d.each)(n,function(o){o.startTime=o.startTime+(r-a),o._paused=!1,o._pauseTime=null,o.resumeCallback&&o.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",n),this},e.prototype.emitDelegation=function(t,r){var n=this,a=r.propagationPath,o=this.getEvents(),s;t==="mouseenter"?s=r.fromShape:t==="mouseleave"&&(s=r.toShape);for(var u=function(b){var w=a[b],I=w.get("name");if(I){if((w.isGroup()||w.isCanvas&&w.isCanvas())&&s&&Ec(w,s))return"break";(0,d.isArray)(I)?(0,d.each)(I,function(W){n.emitDelegateEvent(w,W,r)}):f.emitDelegateEvent(w,I,r)}},f=this,c=0;c<a.length;c++){var l=u(c);if(l==="break")break}},e.prototype.emitDelegateEvent=function(t,r,n){var a=this.getEvents(),o=r+Ut+n.type;(a[o]||a[ne])&&(n.name=o,n.currentTarget=t,n.delegateTarget=this,n.delegateObject=t.get("delegateObject"),this.emit(o,n))},e.prototype.translate=function(t,r){t===void 0&&(t=0),r===void 0&&(r=0);var n=this.getMatrix(),a=xs(n,[["t",t,r]]);return this.setMatrix(a),this},e.prototype.move=function(t,r){var n=this.attr("x")||0,a=this.attr("y")||0;return this.translate(t-n,r-a),this},e.prototype.moveTo=function(t,r){return this.move(t,r)},e.prototype.scale=function(t,r){var n=this.getMatrix(),a=xs(n,[["s",t,r||t]]);return this.setMatrix(a),this},e.prototype.rotate=function(t){var r=this.getMatrix(),n=xs(r,[["r",t]]);return this.setMatrix(n),this},e.prototype.rotateAtStart=function(t){var r=this.attr(),n=r.x,a=r.y,o=this.getMatrix(),s=xs(o,[["t",-n,-a],["r",t],["t",n,a]]);return this.setMatrix(s),this},e.prototype.rotateAtPoint=function(t,r,n){var a=this.getMatrix(),o=xs(a,[["t",-t,-r],["r",n],["t",t,r]]);return this.setMatrix(o),this},e}(wc),xn=Hr,Tn={},vn="_INDEX";function fa(i,e){if(i.set("canvas",e),i.isGroup()){var t=i.get("children");t.length&&t.forEach(function(r){fa(r,e)})}}function da(i,e){if(i.set("timeline",e),i.isGroup()){var t=i.get("children");t.length&&t.forEach(function(r){da(r,e)})}}function ya(i,e){var t=i.getChildren();return t.indexOf(e)>=0}function na(i,e,t){t===void 0&&(t=!0),t?e.destroy():(e.set("parent",null),e.set("canvas",null)),xc(i.getChildren(),e)}function Da(i){return function(e,t){var r=i(e,t);return r===0?e[vn]-t[vn]:r}}var Fn=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.isCanvas=function(){return!1},e.prototype.getBBox=function(){var t=1/0,r=-1/0,n=1/0,a=-1/0,o=this.getChildren().filter(function(u){return u.get("visible")&&(!u.isGroup()||u.isGroup()&&u.getChildren().length>0)});o.length>0?(0,d.each)(o,function(u){var f=u.getBBox(),c=f.minX,l=f.maxX,b=f.minY,w=f.maxY;c<t&&(t=c),l>r&&(r=l),b<n&&(n=b),w>a&&(a=w)}):(t=0,r=0,n=0,a=0);var s={x:t,y:n,minX:t,minY:n,maxX:r,maxY:a,width:r-t,height:a-n};return s},e.prototype.getCanvasBBox=function(){var t=1/0,r=-1/0,n=1/0,a=-1/0,o=this.getChildren().filter(function(u){return u.get("visible")&&(!u.isGroup()||u.isGroup()&&u.getChildren().length>0)});o.length>0?(0,d.each)(o,function(u){var f=u.getCanvasBBox(),c=f.minX,l=f.maxX,b=f.minY,w=f.maxY;c<t&&(t=c),l>r&&(r=l),b<n&&(n=b),w>a&&(a=w)}):(t=0,r=0,n=0,a=0);var s={x:t,y:n,minX:t,minY:n,maxX:r,maxY:a,width:r-t,height:a-n};return s},e.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.children=[],t},e.prototype.onAttrChange=function(t,r,n){if(i.prototype.onAttrChange.call(this,t,r,n),t==="matrix"){var a=this.getTotalMatrix();this._applyChildrenMarix(a)}},e.prototype.applyMatrix=function(t){var r=this.getTotalMatrix();i.prototype.applyMatrix.call(this,t);var n=this.getTotalMatrix();n!==r&&this._applyChildrenMarix(n)},e.prototype._applyChildrenMarix=function(t){var r=this.getChildren();(0,d.each)(r,function(n){n.applyMatrix(t)})},e.prototype.addShape=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=t[1];(0,d.isObject)(n)?a=n:a.type=n;var o=Tn[a.type];o||(o=(0,d.upperFirst)(a.type),Tn[a.type]=o);var s=this.getShapeBase(),u=new s[o](a);return this.add(u),u},e.prototype.addGroup=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=t[1],o;if((0,d.isFunction)(n))a?o=new n(a):o=new n({parent:this});else{var s=n||{},u=this.getGroupBase();o=new u(s)}return this.add(o),o},e.prototype.getCanvas=function(){var t;return this.isCanvas()?t=this:t=this.get("canvas"),t},e.prototype.getShape=function(t,r,n){if(!Gf(this))return null;var a=this.getChildren(),o;if(this.isCanvas())o=this._findShape(a,t,r,n);else{var s=[t,r,1];s=this.invertFromMatrix(s),this.isClipped(s[0],s[1])||(o=this._findShape(a,s[0],s[1],n))}return o},e.prototype._findShape=function(t,r,n,a){for(var o=null,s=t.length-1;s>=0;s--){var u=t[s];if(Gf(u)&&(u.isGroup()?o=u.getShape(r,n,a):u.isHit(r,n)&&(o=u)),o)break}return o},e.prototype.add=function(t){var r=this.getCanvas(),n=this.getChildren(),a=this.get("timeline"),o=t.getParent();o&&na(o,t,!1),t.set("parent",this),r&&fa(t,r),a&&da(t,a),n.push(t),t.onCanvasChange("add"),this._applyElementMatrix(t)},e.prototype._applyElementMatrix=function(t){var r=this.getTotalMatrix();r&&t.applyMatrix(r)},e.prototype.getChildren=function(){return this.get("children")},e.prototype.sort=function(){var t=this.getChildren();(0,d.each)(t,function(r,n){return r[vn]=n,r}),t.sort(Da(function(r,n){return r.get("zIndex")-n.get("zIndex")})),this.onCanvasChange("sort")},e.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var t=this.getChildren(),r=t.length-1;r>=0;r--)t[r].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},e.prototype.destroy=function(){this.get("destroyed")||(this.clear(),i.prototype.destroy.call(this))},e.prototype.getFirst=function(){return this.getChildByIndex(0)},e.prototype.getLast=function(){var t=this.getChildren();return this.getChildByIndex(t.length-1)},e.prototype.getChildByIndex=function(t){var r=this.getChildren();return r[t]},e.prototype.getCount=function(){var t=this.getChildren();return t.length},e.prototype.contain=function(t){var r=this.getChildren();return r.indexOf(t)>-1},e.prototype.removeChild=function(t,r){r===void 0&&(r=!0),this.contain(t)&&t.remove(r)},e.prototype.findAll=function(t){var r=[],n=this.getChildren();return(0,d.each)(n,function(a){t(a)&&r.push(a),a.isGroup()&&(r=r.concat(a.findAll(t)))}),r},e.prototype.find=function(t){var r=null,n=this.getChildren();return(0,d.each)(n,function(a){if(t(a)?r=a:a.isGroup()&&(r=a.find(t)),r)return!1}),r},e.prototype.findById=function(t){return this.find(function(r){return r.get("id")===t})},e.prototype.findByClassName=function(t){return this.find(function(r){return r.get("className")===t})},e.prototype.findAllByName=function(t){return this.findAll(function(r){return r.get("name")===t})},e}(xn),Ia=Fn,ia=0,Un=0,Ma=0,qa=1e3,ri,Ba,Fa=0,oi=0,Oi=0,Ei=typeof performance=="object"&&performance.now?performance:Date,bs=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(i){setTimeout(i,17)};function uf(){return oi||(bs(tu),oi=Ei.now()+Oi)}function tu(){oi=0}function Ws(){this._call=this._time=this._next=null}Ws.prototype=hu.prototype={constructor:Ws,restart:function(i,e,t){if(typeof i!="function")throw new TypeError("callback is not a function");t=(t==null?uf():+t)+(e==null?0:+e),!this._next&&Ba!==this&&(Ba?Ba._next=this:ri=this,Ba=this),this._call=i,this._time=t,Vu()},stop:function(){this._call&&(this._call=null,this._time=1/0,Vu())}};function hu(i,e,t){var r=new Ws;return r.restart(i,e,t),r}function ff(){uf(),++ia;for(var i=ri,e;i;)(e=oi-i._time)>=0&&i._call.call(null,e),i=i._next;--ia}function vu(){oi=(Fa=Ei.now())+Oi,ia=Un=0;try{ff()}finally{ia=0,Mc(),oi=0}}function el(){var i=Ei.now(),e=i-Fa;e>qa&&(Oi-=e,Fa=i)}function Mc(){for(var i,e=ri,t,r=1/0;e;)e._call?(r>e._time&&(r=e._time),i=e,e=e._next):(t=e._next,e._next=null,e=i?i._next=t:ri=t);Ba=i,Vu(r)}function Vu(i){if(!ia){Un&&(Un=clearTimeout(Un));var e=i-oi;e>24?(i<1/0&&(Un=setTimeout(vu,i-Ei.now()-Oi)),Ma&&(Ma=clearInterval(Ma))):(Ma||(Fa=Ei.now(),Ma=setInterval(el,qa)),ia=1,bs(vu))}}var cf=z(918698);function lf(i,e,t){i.prototype=e.prototype=t,t.constructor=i}function Es(i,e){var t=Object.create(i.prototype);for(var r in e)t[r]=e[r];return t}function eu(){}var Xs=.7,ju=1/Xs,go="\\s*([+-]?\\d+)\\s*",Ls="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ys="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",hf=/^#([0-9a-f]{3,8})$/,Gl=new RegExp("^rgb\\(".concat(go,",").concat(go,",").concat(go,"\\)$")),vf=new RegExp("^rgb\\(".concat(Ys,",").concat(Ys,",").concat(Ys,"\\)$")),rl=new RegExp("^rgba\\(".concat(go,",").concat(go,",").concat(go,",").concat(Ls,"\\)$")),nl=new RegExp("^rgba\\(".concat(Ys,",").concat(Ys,",").concat(Ys,",").concat(Ls,"\\)$")),al=new RegExp("^hsl\\(".concat(Ls,",").concat(Ys,",").concat(Ys,"\\)$")),il=new RegExp("^hsla\\(".concat(Ls,",").concat(Ys,",").concat(Ys,",").concat(Ls,"\\)$")),Ac={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};lf(eu,df,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Kf,formatHex:Kf,formatHex8:zl,formatHsl:Ul,formatRgb:ol,toString:ol});function Kf(){return this.rgb().formatHex()}function zl(){return this.rgb().formatHex8()}function Ul(){return cl(this).formatHsl()}function ol(){return this.rgb().formatRgb()}function df(i){var e,t;return i=(i+"").trim().toLowerCase(),(e=hf.exec(i))?(t=e[1].length,e=parseInt(e[1],16),t===6?sl(e):t===3?new es(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?gf(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?gf(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Gl.exec(i))?new es(e[1],e[2],e[3],1):(e=vf.exec(i))?new es(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=rl.exec(i))?gf(e[1],e[2],e[3],e[4]):(e=nl.exec(i))?gf(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=al.exec(i))?qf(e[1],e[2]/100,e[3]/100,1):(e=il.exec(i))?qf(e[1],e[2]/100,e[3]/100,e[4]):Ac.hasOwnProperty(i)?sl(Ac[i]):i==="transparent"?new es(NaN,NaN,NaN,0):null}function sl(i){return new es(i>>16&255,i>>8&255,i&255,1)}function gf(i,e,t,r){return r<=0&&(i=e=t=NaN),new es(i,e,t,r)}function ul(i){return i instanceof eu||(i=df(i)),i?(i=i.rgb(),new es(i.r,i.g,i.b,i.opacity)):new es}function Zf(i,e,t,r){return arguments.length===1?ul(i):new es(i,e,t,r==null?1:r)}function es(i,e,t,r){this.r=+i,this.g=+e,this.b=+t,this.opacity=+r}lf(es,Zf,Es(eu,{brighter:function(e){return e=e==null?ju:Math.pow(ju,e),new es(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?Xs:Math.pow(Xs,e),new es(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},clamp:function(){return new es(Iu(this.r),Iu(this.g),Iu(this.b),Ne(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:fl,formatHex:fl,formatHex8:$f,formatRgb:Cc,toString:Cc}));function fl(){return"#".concat(Ds(this.r)).concat(Ds(this.g)).concat(Ds(this.b))}function $f(){return"#".concat(Ds(this.r)).concat(Ds(this.g)).concat(Ds(this.b)).concat(Ds((isNaN(this.opacity)?1:this.opacity)*255))}function Cc(){var i=Ne(this.opacity);return"".concat(i===1?"rgb(":"rgba(").concat(Iu(this.r),", ").concat(Iu(this.g),", ").concat(Iu(this.b)).concat(i===1?")":", ".concat(i,")"))}function Ne(i){return isNaN(i)?1:Math.max(0,Math.min(1,i))}function Iu(i){return Math.max(0,Math.min(255,Math.round(i)||0))}function Ds(i){return i=Iu(i),(i<16?"0":"")+i.toString(16)}function qf(i,e,t,r){return r<=0?i=e=t=NaN:t<=0||t>=1?i=e=NaN:e<=0&&(i=NaN),new Ns(i,e,t,r)}function cl(i){if(i instanceof Ns)return new Ns(i.h,i.s,i.l,i.opacity);if(i instanceof eu||(i=df(i)),!i)return new Ns;if(i instanceof Ns)return i;i=i.rgb();var e=i.r/255,t=i.g/255,r=i.b/255,n=Math.min(e,t,r),a=Math.max(e,t,r),o=NaN,s=a-n,u=(a+n)/2;return s?(e===a?o=(t-r)/s+(t<r)*6:t===a?o=(r-e)/s+2:o=(e-t)/s+4,s/=u<.5?a+n:2-a-n,o*=60):s=u>0&&u<1?0:o,new Ns(o,s,u,i.opacity)}function ll(i,e,t,r){return arguments.length===1?cl(i):new Ns(i,e,t,r==null?1:r)}function Ns(i,e,t,r){this.h=+i,this.s=+e,this.l=+t,this.opacity=+r}lf(Ns,ll,Es(eu,{brighter:function(e){return e=e==null?ju:Math.pow(ju,e),new Ns(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?Xs:Math.pow(Xs,e),new Ns(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new es(pf(e>=240?e-240:e+120,a,n),pf(e,a,n),pf(e<120?e+240:e-120,a,n),this.opacity)},clamp:function(){return new Ns(hl(this.h),Ou(this.s),Ou(this.l),Ne(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=Ne(this.opacity);return"".concat(e===1?"hsl(":"hsla(").concat(hl(this.h),", ").concat(Ou(this.s)*100,"%, ").concat(Ou(this.l)*100,"%").concat(e===1?")":", ".concat(e,")"))}}));function hl(i){return i=(i||0)%360,i<0?i+360:i}function Ou(i){return Math.max(0,Math.min(1,i||0))}function pf(i,e,t){return(i<60?e+(t-e)*i/60:i<180?t:i<240?e+(t-e)*(240-i)/60:e)*255}function Tc(i,e,t,r,n){var a=i*i,o=a*i;return((1-3*i+3*a-o)*e+(4-6*a+3*o)*t+(1+3*i+3*a-3*o)*r+o*n)/6}function Ic(i){var e=i.length-1;return function(t){var r=t<=0?t=0:t>=1?(t=1,e-1):Math.floor(t*e),n=i[r],a=i[r+1],o=r>0?i[r-1]:2*n-a,s=r<e-1?i[r+2]:2*a-n;return Tc((t-r/e)*e,o,n,a,s)}}function po(i){var e=i.length;return function(t){var r=Math.floor(((t%=1)<0?++t:t)*e),n=i[(r+e-1)%e],a=i[r%e],o=i[(r+1)%e],s=i[(r+2)%e];return Tc((t-r/e)*e,n,a,o,s)}}var Lu=function(i){return function(){return i}};function Oc(i,e){return function(t){return i+t*e}}function Qf(i,e,t){return i=Math.pow(i,t),e=Math.pow(e,t)-i,t=1/t,function(r){return Math.pow(i+r*e,t)}}function du(i,e){var t=e-i;return t?Oc(i,t>180||t<-180?t-360*Math.round(t/360):t):constant(isNaN(i)?e:i)}function yf(i){return(i=+i)==1?Du:function(e,t){return t-e?Qf(e,t,i):Lu(isNaN(e)?t:e)}}function Du(i,e){var t=e-i;return t?Oc(i,t):Lu(isNaN(i)?e:i)}var gu=function i(e){var t=yf(e);function r(n,a){var o=t((n=Zf(n)).r,(a=Zf(a)).r),s=t(n.g,a.g),u=t(n.b,a.b),f=Du(n.opacity,a.opacity);return function(c){return n.r=o(c),n.g=s(c),n.b=u(c),n.opacity=f(c),n+""}}return r.gamma=i,r}(1);function Hu(i){return function(e){var t=e.length,r=new Array(t),n=new Array(t),a=new Array(t),o,s;for(o=0;o<t;++o)s=Zf(e[o]),r[o]=s.r||0,n[o]=s.g||0,a[o]=s.b||0;return r=i(r),n=i(n),a=i(a),s.opacity=1,function(u){return s.r=r(u),s.g=n(u),s.b=a(u),s+""}}}var mf=Hu(Ic),xf=Hu(po);function Nu(i,e){e||(e=[]);var t=i?Math.min(e.length,i.length):0,r=e.slice(),n;return function(a){for(n=0;n<t;++n)r[n]=i[n]*(1-a)+e[n]*a;return r}}function Jf(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function Lc(i,e){return(Jf(e)?Nu:bf)(i,e)}function bf(i,e){var t=e?e.length:0,r=i?Math.min(t,i.length):0,n=new Array(r),a=new Array(t),o;for(o=0;o<r;++o)n[o]=wf(i[o],e[o]);for(;o<t;++o)a[o]=e[o];return function(s){for(o=0;o<r;++o)a[o]=n[o](s);return a}}function vl(i,e){var t=new Date;return i=+i,e=+e,function(r){return t.setTime(i*(1-r)+e*r),t}}function tc(i,e){return i=+i,e=+e,function(t){return i*(1-t)+e*t}}function Ef(i,e){var t={},r={},n;(i===null||cf(i)!=="object")&&(i={}),(e===null||cf(e)!=="object")&&(e={});for(n in e)n in i?t[n]=wf(i[n],e[n]):r[n]=e[n];return function(a){for(n in t)r[n]=t[n](a);return r}}var hs=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ec=new RegExp(hs.source,"g");function Wl(i){return function(){return i}}function Dc(i){return function(e){return i(e)+""}}function dl(i,e){var t=hs.lastIndex=ec.lastIndex=0,r,n,a,o=-1,s=[],u=[];for(i=i+"",e=e+"";(r=hs.exec(i))&&(n=ec.exec(e));)(a=n.index)>t&&(a=e.slice(t,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(n=n[0])?s[o]?s[o]+=n:s[++o]=n:(s[++o]=null,u.push({i:o,x:tc(r,n)})),t=ec.lastIndex;return t<e.length&&(a=e.slice(t),s[o]?s[o]+=a:s[++o]=a),s.length<2?u[0]?Dc(u[0].x):Wl(e):(e=u.length,function(f){for(var c=0,l;c<e;++c)s[(l=u[c]).i]=l.x(f);return s.join("")})}function wf(i,e){var t=cf(e),r;return e==null||t==="boolean"?Lu(e):(t==="number"?tc:t==="string"?(r=df(e))?(e=r,gu):dl:e instanceof df?gu:e instanceof Date?vl:Jf(e)?Nu:Array.isArray(e)?bf:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Ef:tc)(i,e)}function Xl(i){return+i}function Ku(i){return i*i}function Yl(i){return i*(2-i)}function gl(i){return((i*=2)<=1?i*i:--i*(2-i)+1)/2}function ph(i){return i*i*i}function Vl(i){return--i*i*i+1}function pl(i){return((i*=2)<=1?i*i*i:(i-=2)*i*i+2)/2}var yl=3,jl=function i(e){e=+e;function t(r){return Math.pow(r,e)}return t.exponent=i,t}(yl),Hl=function i(e){e=+e;function t(r){return 1-Math.pow(1-r,e)}return t.exponent=i,t}(yl),Kl=function i(e){e=+e;function t(r){return((r*=2)<=1?Math.pow(r,e):2-Math.pow(2-r,e))/2}return t.exponent=i,t}(yl),ml=Math.PI,xl=ml/2;function Zl(i){return+i==1?1:1-Math.cos(i*xl)}function $l(i){return Math.sin(i*xl)}function Nc(i){return(1-Math.cos(ml*i))/2}function Ps(i){return(Math.pow(2,-10*i)-.0009765625)*1.0009775171065494}function Pc(i){return Ps(1-+i)}function kc(i){return 1-Ps(i)}function rc(i){return((i*=2)<=1?Ps(1-i):2-Ps(i-1))/2}function bl(i){return 1-Math.sqrt(1-i*i)}function Rc(i){return Math.sqrt(1- --i*i)}function nc(i){return((i*=2)<=1?1-Math.sqrt(1-i*i):Math.sqrt(1-(i-=2)*i)+1)/2}var Zu=4/11,El=6/11,Bc=8/11,Fc=3/4,Gc=9/11,ac=10/11,ic=15/16,_f=21/22,oc=63/64,pu=1/Zu/Zu;function ql(i){return 1-yu(1-i)}function yu(i){return(i=+i)<Zu?pu*i*i:i<Bc?pu*(i-=El)*i+Fc:i<ac?pu*(i-=Gc)*i+ic:pu*(i-=_f)*i+oc}function $u(i){return((i*=2)<=1?1-yu(1-i):yu(i-1)+1)/2}var zc=1.70158,Uc=function i(e){e=+e;function t(r){return(r=+r)*r*(e*(r-1)+r)}return t.overshoot=i,t}(zc),yh=function i(e){e=+e;function t(r){return--r*r*((r+1)*e+r)+1}return t.overshoot=i,t}(zc),Ql=function i(e){e=+e;function t(r){return((r*=2)<1?r*r*((e+1)*r-e):(r-=2)*r*((e+1)*r+e)+2)/2}return t.overshoot=i,t}(zc),Sf=2*Math.PI,ru=1,Wc=.3,Jl=function i(e,t){var r=Math.asin(1/(e=Math.max(1,e)))*(t/=Sf);function n(a){return e*Ps(- --a)*Math.sin((r-a)/t)}return n.amplitude=function(a){return i(a,t*Sf)},n.period=function(a){return i(e,a)},n}(ru,Wc),wl=function i(e,t){var r=Math.asin(1/(e=Math.max(1,e)))*(t/=Sf);function n(a){return 1-e*Ps(a=+a)*Math.sin((a+r)/t)}return n.amplitude=function(a){return i(a,t*Sf)},n.period=function(a){return i(e,a)},n}(ru,Wc),mh=function i(e,t){var r=Math.asin(1/(e=Math.max(1,e)))*(t/=Sf);function n(a){return((a=a*2-1)<0?e*Ps(-a)*Math.sin((r-a)/t):2-e*Ps(a)*Math.sin((r+a)/t))/2}return n.amplitude=function(a){return i(a,t*Sf)},n.period=function(a){return i(e,a)},n}(ru,Wc),_l={};function xh(i){return _l[i.toLowerCase()]||P[i]}function Ho(i,e){_l[i.toLowerCase()]=e}var th=function(i){return["fill","stroke","fillStyle","strokeStyle"].includes(i)},Mf=function(i){return/^[r,R,L,l]{1}[\s]*\(/.test(i)},mu=[1,0,0,0,1,0,0,0,1];function eh(i,e,t){var r={},n=e.fromAttrs,a=e.toAttrs;if(!i.destroyed){var o;for(var s in a)if(!(0,d.isEqual)(n[s],a[s]))if(s==="path"){var u=a[s],f=n[s];u.length>f.length?(u=D(a[s]),f=D(n[s]),f=ii(f,u),f=ko(f,u),e.fromAttrs.path=f,e.toAttrs.path=u):e.pathFormatted||(u=D(a[s]),f=D(n[s]),f=ko(f,u),e.fromAttrs.path=f,e.toAttrs.path=u,e.pathFormatted=!0),r[s]=[];for(var c=0;c<u.length;c++){for(var l=u[c],b=f[c],w=[],I=0;I<l.length;I++)(0,d.isNumber)(l[I])&&b&&(0,d.isNumber)(b[I])?(o=wf(b[I],l[I]),w.push(o(t))):w.push(l[I]);r[s].push(w)}}else if(s==="matrix"){var W=Lc(n[s]||mu,a[s]||mu),H=W(t);r[s]=H}else th(s)&&Mf(a[s])?r[s]=a[s]:(0,d.isFunction)(a[s])||(o=wf(n[s],a[s]),r[s]=o(t));i.attr(r)}}function Sl(i,e,t){var r=e.startTime,n=e.delay;if(t<r+n||e._paused)return!1;var a,o=e.duration,s=e.easing,u=xh(s);if(t=t-r-e.delay,e.repeat)a=t%o/o,a=u(a);else if(a=t/o,a<1)a=u(a);else return e.onFrame?i.attr(e.onFrame(1)):i.attr(e.toAttrs),!0;if(e.onFrame){var f=e.onFrame(a);i.attr(f)}else eh(i,e,a);return!1}var Xc=function(){function i(e){this.animators=[],this.current=0,this.timer=null,this.canvas=e}return i.prototype.initTimer=function(){var e=this,t=!1,r,n,a;this.timer=hu(function(o){if(e.current=o,e.animators.length>0){for(var s=e.animators.length-1;s>=0;s--){if(r=e.animators[s],r.destroyed){e.removeAnimator(s);continue}if(!r.isAnimatePaused()){n=r.get("animations");for(var u=n.length-1;u>=0;u--)a=n[u],t=Sl(r,a,o),t&&(n.splice(u,1),t=!1,a.callback&&a.callback())}n.length===0&&e.removeAnimator(s)}var f=e.canvas.get("autoDraw");f||e.canvas.draw()}})},i.prototype.addAnimator=function(e){this.animators.push(e)},i.prototype.removeAnimator=function(e){this.animators.splice(e,1)},i.prototype.isAnimating=function(){return!!this.animators.length},i.prototype.stop=function(){this.timer&&this.timer.stop()},i.prototype.stopAllAnimations=function(e){e===void 0&&(e=!0),this.animators.forEach(function(t){t.stopAnimate(e)}),this.animators=[],this.canvas.draw()},i.prototype.getTime=function(){return this.current},i}(),rh=Xc,rs=40,xu=0,qi=":",Ro=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function Ml(i,e){for(var t in i)if(i.hasOwnProperty(t)&&t.indexOf(qi+e)>=0)return!0;return!1}function nh(i,e,t){t.name=e,t.target=i,t.currentTarget=i,t.delegateTarget=i,i.emit(e,t)}function ah(i,e,t){if(t.bubbles){var r=void 0,n=!1;if(e==="mouseenter"?(r=t.fromShape,n=!0):e==="mouseleave"&&(n=!0,r=t.toShape),i.isCanvas()&&n)return;if(r&&Ec(i,r)){t.bubbles=!1;return}t.name=e,t.currentTarget=i,t.delegateTarget=i,i.emit(e,t)}}var bh=function(){function i(e){var t=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(r){var n=r.type;t._triggerEvent(n,r)},this._onDocumentMove=function(r){var n=t.canvas,a=n.get("el");if(a!==r.target&&(t.dragging||t.currentShape)){var o=t._getPointInfo(r);t.dragging&&t._emitEvent("drag",r,o,t.draggingShape)}},this._onDocumentMouseUp=function(r){var n=t.canvas,a=n.get("el");if(a!==r.target&&t.dragging){var o=t._getPointInfo(r);t.draggingShape&&t._emitEvent("drop",r,o,null),t._emitEvent("dragend",r,o,t.draggingShape),t._afterDrag(t.draggingShape,o,r)}},this.canvas=e.canvas}return i.prototype.init=function(){this._bindEvents()},i.prototype._bindEvents=function(){var e=this,t=this.canvas.get("el");(0,d.each)(Ro,function(r){t.addEventListener(r,e._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},i.prototype._clearEvents=function(){var e=this,t=this.canvas.get("el");(0,d.each)(Ro,function(r){t.removeEventListener(r,e._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},i.prototype._getEventObj=function(e,t,r,n,a,o){var s=new Ff(e,t);return s.fromShape=a,s.toShape=o,s.x=r.x,s.y=r.y,s.clientX=r.clientX,s.clientY=r.clientY,s.propagationPath.push(n),s},i.prototype._getShape=function(e,t){return this.canvas.getShape(e.x,e.y,t)},i.prototype._getPointInfo=function(e){var t=this.canvas,r=t.getClientByEvent(e),n=t.getPointByEvent(e);return{x:n.x,y:n.y,clientX:r.x,clientY:r.y}},i.prototype._triggerEvent=function(e,t){var r=this._getPointInfo(t),n=this._getShape(r,t),a=this["_on"+e],o=!1;if(a)a.call(this,r,n,t);else{var s=this.currentShape;e==="mouseenter"||e==="dragenter"||e==="mouseover"?(this._emitEvent(e,t,r,null,null,n),n&&this._emitEvent(e,t,r,n,null,n),e==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",t,r,null)):e==="mouseleave"||e==="dragleave"||e==="mouseout"?(o=!0,s&&this._emitEvent(e,t,r,s,s,null),this._emitEvent(e,t,r,null,s,null),e==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",t,r,null)):this._emitEvent(e,t,r,n,null,null)}if(o||(this.currentShape=n),n&&!n.get("destroyed")){var u=this.canvas,f=u.get("el");f.style.cursor=n.attr("cursor")||u.get("cursor")}},i.prototype._onmousedown=function(e,t,r){r.button===xu&&(this.mousedownShape=t,this.mousedownPoint=e,this.mousedownTimeStamp=r.timeStamp),this._emitEvent("mousedown",r,e,t,null,null)},i.prototype._emitMouseoverEvents=function(e,t,r,n){var a=this.canvas.get("el");r!==n&&(r&&(this._emitEvent("mouseout",e,t,r,r,n),this._emitEvent("mouseleave",e,t,r,r,n),(!n||n.get("destroyed"))&&(a.style.cursor=this.canvas.get("cursor"))),n&&(this._emitEvent("mouseover",e,t,n,r,n),this._emitEvent("mouseenter",e,t,n,r,n)))},i.prototype._emitDragoverEvents=function(e,t,r,n,a){n?(n!==r&&(r&&this._emitEvent("dragleave",e,t,r,r,n),this._emitEvent("dragenter",e,t,n,r,n)),a||this._emitEvent("dragover",e,t,n)):r&&this._emitEvent("dragleave",e,t,r,r,n),a&&this._emitEvent("dragover",e,t,n)},i.prototype._afterDrag=function(e,t,r){e&&(e.set("capture",!0),this.draggingShape=null),this.dragging=!1;var n=this._getShape(t,r);n!==e&&this._emitMouseoverEvents(r,t,e,n),this.currentShape=n},i.prototype._onmouseup=function(e,t,r){if(r.button===xu){var n=this.draggingShape;this.dragging?(n&&this._emitEvent("drop",r,e,t),this._emitEvent("dragend",r,e,n),this._afterDrag(n,e,r)):(this._emitEvent("mouseup",r,e,t),t===this.mousedownShape&&this._emitEvent("click",r,e,t),this.mousedownShape=null,this.mousedownPoint=null)}},i.prototype._ondragover=function(e,t,r){r.preventDefault();var n=this.currentShape;this._emitDragoverEvents(r,e,n,t,!0)},i.prototype._onmousemove=function(e,t,r){var n=this.canvas,a=this.currentShape,o=this.draggingShape;if(this.dragging)o&&this._emitDragoverEvents(r,e,a,t,!1),this._emitEvent("drag",r,e,o);else{var s=this.mousedownPoint;if(s){var u=this.mousedownShape,f=r.timeStamp,c=f-this.mousedownTimeStamp,l=s.clientX-e.clientX,b=s.clientY-e.clientY,w=l*l+b*b;c>120||w>rs?u&&u.get("draggable")?(o=this.mousedownShape,o.set("capture",!1),this.draggingShape=o,this.dragging=!0,this._emitEvent("dragstart",r,e,o),this.mousedownShape=null,this.mousedownPoint=null):!u&&n.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",r,e,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(r,e,a,t),this._emitEvent("mousemove",r,e,t)):(this._emitMouseoverEvents(r,e,a,t),this._emitEvent("mousemove",r,e,t))}else this._emitMouseoverEvents(r,e,a,t),this._emitEvent("mousemove",r,e,t)}},i.prototype._emitEvent=function(e,t,r,n,a,o){var s=this._getEventObj(e,t,r,n,a,o);if(n){s.shape=n,nh(n,e,s);for(var u=n.getParent();u;)u.emitDelegation(e,s),s.propagationStopped||ah(u,e,s),s.propagationPath.push(u),u=u.getParent()}else{var f=this.canvas;nh(f,e,s)}},i.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},i}(),Eh=bh,Al="px",ih=Wf(),wh=ih&&ih.name==="firefox",_h=function(i){(0,m.__extends)(e,i);function e(t){var r=i.call(this,t)||this;return r.initContainer(),r.initDom(),r.initEvents(),r.initTimeline(),r}return e.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.cursor="default",t.supportCSSTransform=!1,t},e.prototype.initContainer=function(){var t=this.get("container");(0,d.isString)(t)&&(t=document.getElementById(t),this.set("container",t))},e.prototype.initDom=function(){var t=this.createDom();this.set("el",t);var r=this.get("container");r.appendChild(t),this.setDOMSize(this.get("width"),this.get("height"))},e.prototype.initEvents=function(){var t=new Eh({canvas:this});t.init(),this.set("eventController",t)},e.prototype.initTimeline=function(){var t=new rh(this);this.set("timeline",t)},e.prototype.setDOMSize=function(t,r){var n=this.get("el");bc&&(n.style.width=t+Al,n.style.height=r+Al)},e.prototype.changeSize=function(t,r){this.setDOMSize(t,r),this.set("width",t),this.set("height",r),this.onCanvasChange("changeSize")},e.prototype.getRenderer=function(){return this.get("renderer")},e.prototype.getCursor=function(){return this.get("cursor")},e.prototype.setCursor=function(t){this.set("cursor",t);var r=this.get("el");bc&&r&&(r.style.cursor=t)},e.prototype.getPointByEvent=function(t){var r=this.get("supportCSSTransform");if(r){if(wh&&!(0,d.isNil)(t.layerX)&&t.layerX!==t.offsetX)return{x:t.layerX,y:t.layerY};if(!(0,d.isNil)(t.offsetX))return{x:t.offsetX,y:t.offsetY}}var n=this.getClientByEvent(t),a=n.x,o=n.y;return this.getPointByClient(a,o)},e.prototype.getClientByEvent=function(t){var r=t;return t.touches&&(t.type==="touchend"?r=t.changedTouches[0]:r=t.touches[0]),{x:r.clientX,y:r.clientY}},e.prototype.getPointByClient=function(t,r){var n=this.get("el"),a=n.getBoundingClientRect();return{x:t-a.left,y:r-a.top}},e.prototype.getClientByPoint=function(t,r){var n=this.get("el"),a=n.getBoundingClientRect();return{x:t+a.left,y:r+a.top}},e.prototype.draw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.parentNode.removeChild(t)},e.prototype.clearEvents=function(){var t=this.get("eventController");t.destroy()},e.prototype.isCanvas=function(){return!0},e.prototype.getParent=function(){return null},e.prototype.destroy=function(){var t=this.get("timeline");this.get("destroyed")||(this.clear(),t&&t.stop(),this.clearEvents(),this.removeDom(),i.prototype.destroy.call(this))},e}(Ia),oh=_h,sh=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.isGroup=function(){return!0},e.prototype.isEntityGroup=function(){return!1},e.prototype.clone=function(){for(var t=i.prototype.clone.call(this),r=this.getChildren(),n=0;n<r.length;n++){var a=r[n];t.add(a.clone())}return t},e}(Ia),Yc=sh,Vc=function(i){(0,m.__extends)(e,i);function e(t){return i.call(this,t)||this}return e.prototype._isInBBox=function(t,r){var n=this.getBBox();return n.minX<=t&&n.maxX>=t&&n.minY<=r&&n.maxY>=r},e.prototype.afterAttrsChange=function(t){i.prototype.afterAttrsChange.call(this,t),this.clearCacheBBox()},e.prototype.getBBox=function(){var t=this.cfg.bbox;return t||(t=this.calculateBBox(),this.set("bbox",t)),t},e.prototype.getCanvasBBox=function(){var t=this.cfg.canvasBBox;return t||(t=this.calculateCanvasBBox(),this.set("canvasBBox",t)),t},e.prototype.applyMatrix=function(t){i.prototype.applyMatrix.call(this,t),this.set("canvasBBox",null)},e.prototype.calculateCanvasBBox=function(){var t=this.getBBox(),r=this.getTotalMatrix(),n=t.minX,a=t.minY,o=t.maxX,s=t.maxY;if(r){var u=bi(r,[t.minX,t.minY]),f=bi(r,[t.maxX,t.minY]),c=bi(r,[t.minX,t.maxY]),l=bi(r,[t.maxX,t.maxY]);n=Math.min(u[0],f[0],c[0],l[0]),o=Math.max(u[0],f[0],c[0],l[0]),a=Math.min(u[1],f[1],c[1],l[1]),s=Math.max(u[1],f[1],c[1],l[1])}var b=this.attrs;if(b.shadowColor){var w=b.shadowBlur,I=w===void 0?0:w,W=b.shadowOffsetX,H=W===void 0?0:W,J=b.shadowOffsetY,at=J===void 0?0:J,ut=n-I+H,lt=o+I+H,_t=a-I+at,Bt=s+I+at;n=Math.min(n,ut),o=Math.max(o,lt),a=Math.min(a,_t),s=Math.max(s,Bt)}return{x:n,y:a,minX:n,minY:a,maxX:o,maxY:s,width:o-n,height:s-a}},e.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},e.prototype.isClipShape=function(){return this.get("isClipShape")},e.prototype.isInShape=function(t,r){return!1},e.prototype.isOnlyHitBox=function(){return!1},e.prototype.isHit=function(t,r){var n=this.get("startArrowShape"),a=this.get("endArrowShape"),o=[t,r,1];o=this.invertFromMatrix(o);var s=o[0],u=o[1],f=this._isInBBox(s,u);return this.isOnlyHitBox()?f:!!(f&&!this.isClipped(s,u)&&(this.isInShape(s,u)||n&&n.isHit(s,u)||a&&a.isHit(s,u)))},e}(xn),Cl=Vc,uh=new Map;function Vs(i,e){uh.set(i,e)}function Tl(i){return uh.get(i)}function sc(i){var e=i.attr(),t=e.x,r=e.y,n=e.width,a=e.height;return{x:t,y:r,width:n,height:a}}function mt(i){var e=i.attr(),t=e.x,r=e.y,n=e.r;return{x:t-n,y:r-n,width:n*2,height:n*2}}function qt(i,e,t,r){var n=i-t,a=e-r;return Math.sqrt(n*n+a*a)}function Ee(i,e){return Math.abs(i-e)<.001}function cr(i,e){var t=(0,d.min)(i),r=(0,d.min)(e),n=(0,d.max)(i),a=(0,d.max)(e);return{x:t,y:r,width:n-t,height:a-r}}function Lr(i,e,t,r){return{minX:(0,d.min)([i,t]),maxX:(0,d.max)([i,t]),minY:(0,d.min)([e,r]),maxY:(0,d.max)([e,r])}}function lr(i){return(i+Math.PI*2)%(Math.PI*2)}var hr={box:function(i,e,t,r){return cr([i,t],[e,r])},length:function(i,e,t,r){return qt(i,e,t,r)},pointAt:function(i,e,t,r,n){return{x:(1-n)*i+n*t,y:(1-n)*e+n*r}},pointDistance:function(i,e,t,r,n,a){var o=(t-i)*(n-i)+(r-e)*(a-e);if(o<0)return qt(i,e,n,a);var s=(t-i)*(t-i)+(r-e)*(r-e);return o>s?qt(t,r,n,a):this.pointToLine(i,e,t,r,n,a)},pointToLine:function(i,e,t,r,n,a){var o=[t-i,r-e];if(zn.exactEquals(o,[0,0]))return Math.sqrt((n-i)*(n-i)+(a-e)*(a-e));var s=[-o[1],o[0]];zn.normalize(s,s);var u=[n-i,a-e];return Math.abs(zn.dot(u,s))},tangentAngle:function(i,e,t,r){return Math.atan2(r-e,t-i)}},Yr=1e-4;function Vr(i,e,t,r,n,a){var o,s=1/0,u=[t,r],f=20;a&&a>200&&(f=a/10);for(var c=1/f,l=c/10,b=0;b<=f;b++){var w=b*c,I=[n.apply(null,i.concat([w])),n.apply(null,e.concat([w]))],W=qt(u[0],u[1],I[0],I[1]);W<s&&(o=w,s=W)}if(o===0)return{x:i[0],y:e[0]};if(o===1){var H=i.length;return{x:i[H-1],y:e[H-1]}}s=1/0;for(var b=0;b<32&&!(l<Yr);b++){var J=o-l,at=o+l,I=[n.apply(null,i.concat([J])),n.apply(null,e.concat([J]))],W=qt(u[0],u[1],I[0],I[1]);if(J>=0&&W<s)o=J,s=W;else{var ut=[n.apply(null,i.concat([at])),n.apply(null,e.concat([at]))],lt=qt(u[0],u[1],ut[0],ut[1]);at<=1&&lt<s?(o=at,s=lt):l*=.5}}return{x:n.apply(null,i.concat([o])),y:n.apply(null,e.concat([o]))}}function $r(i,e){for(var t=0,r=i.length,n=0;n<r;n++){var a=i[n],o=e[n],s=i[(n+1)%r],u=e[(n+1)%r];t+=qt(a,o,s,u)}return t/2}function Gr(i,e,t,r){var n=1-r;return n*n*i+2*r*n*e+r*r*t}function nn(i,e,t){var r=i+t-2*e;if(Ee(r,0))return[.5];var n=(i-e)/r;return n<=1&&n>=0?[n]:[]}function v(i,e,t,r){return 2*(1-r)*(e-i)+2*r*(t-e)}function T(i,e,t,r,n,a,o){var s=Gr(i,t,n,o),u=Gr(e,r,a,o),f=hr.pointAt(i,e,t,r,o),c=hr.pointAt(t,r,n,a,o);return[[i,e,f.x,f.y,s,u],[s,u,c.x,c.y,n,a]]}function U(i,e,t,r,n,a,o){if(o===0)return(qt(i,e,t,r)+qt(t,r,n,a)+qt(i,e,n,a))/2;var s=T(i,e,t,r,n,a,.5),u=s[0],f=s[1];return u.push(o-1),f.push(o-1),U.apply(null,u)+U.apply(null,f)}var Z={box:function(i,e,t,r,n,a){var o=nn(i,t,n)[0],s=nn(e,r,a)[0],u=[i,n],f=[e,a];return o!==void 0&&u.push(Gr(i,t,n,o)),s!==void 0&&f.push(Gr(e,r,a,s)),cr(u,f)},length:function(i,e,t,r,n,a){return U(i,e,t,r,n,a,3)},nearestPoint:function(i,e,t,r,n,a,o,s){return Vr([i,t,n],[e,r,a],o,s,Gr)},pointDistance:function(i,e,t,r,n,a,o,s){var u=this.nearestPoint(i,e,t,r,n,a,o,s);return qt(u.x,u.y,o,s)},interpolationAt:Gr,pointAt:function(i,e,t,r,n,a,o){return{x:Gr(i,t,n,o),y:Gr(e,r,a,o)}},divide:function(i,e,t,r,n,a,o){return T(i,e,t,r,n,a,o)},tangentAngle:function(i,e,t,r,n,a,o){var s=v(i,t,n,o),u=v(e,r,a,o),f=Math.atan2(u,s);return lr(f)}};function ot(i,e,t,r,n){var a=1-n;return a*a*a*i+3*e*n*a*a+3*t*n*n*a+r*n*n*n}function ct(i,e,t,r,n){var a=1-n;return 3*(a*a*(e-i)+2*a*n*(t-e)+n*n*(r-t))}function gt(i,e,t,r){var n=-3*i+9*e-9*t+3*r,a=6*i-12*e+6*t,o=3*e-3*i,s=[],u,f,c;if(Ee(n,0))Ee(a,0)||(u=-o/a,u>=0&&u<=1&&s.push(u));else{var l=a*a-4*n*o;Ee(l,0)?s.push(-a/(2*n)):l>0&&(c=Math.sqrt(l),u=(-a+c)/(2*n),f=(-a-c)/(2*n),u>=0&&u<=1&&s.push(u),f>=0&&f<=1&&s.push(f))}return s}function bt(i,e,t,r,n,a,o,s,u){var f=ot(i,t,n,o,u),c=ot(e,r,a,s,u),l=hr.pointAt(i,e,t,r,u),b=hr.pointAt(t,r,n,a,u),w=hr.pointAt(n,a,o,s,u),I=hr.pointAt(l.x,l.y,b.x,b.y,u),W=hr.pointAt(b.x,b.y,w.x,w.y,u);return[[i,e,l.x,l.y,I.x,I.y,f,c],[f,c,W.x,W.y,w.x,w.y,o,s]]}function Mt(i,e,t,r,n,a,o,s,u){if(u===0)return $r([i,t,n,o],[e,r,a,s]);var f=bt(i,e,t,r,n,a,o,s,.5),c=f[0],l=f[1];return c.push(u-1),l.push(u-1),Mt.apply(null,c)+Mt.apply(null,l)}var Gt={extrema:gt,box:function(i,e,t,r,n,a,o,s){for(var u=[i,o],f=[e,s],c=gt(i,t,n,o),l=gt(e,r,a,s),b=0;b<c.length;b++)u.push(ot(i,t,n,o,c[b]));for(var b=0;b<l.length;b++)f.push(ot(e,r,a,s,l[b]));return cr(u,f)},length:function(i,e,t,r,n,a,o,s){return Mt(i,e,t,r,n,a,o,s,3)},nearestPoint:function(i,e,t,r,n,a,o,s,u,f,c){return Vr([i,t,n,o],[e,r,a,s],u,f,ot,c)},pointDistance:function(i,e,t,r,n,a,o,s,u,f,c){var l=this.nearestPoint(i,e,t,r,n,a,o,s,u,f,c);return qt(l.x,l.y,u,f)},interpolationAt:ot,pointAt:function(i,e,t,r,n,a,o,s,u){return{x:ot(i,t,n,o,u),y:ot(e,r,a,s,u)}},divide:function(i,e,t,r,n,a,o,s,u){return bt(i,e,t,r,n,a,o,s,u)},tangentAngle:function(i,e,t,r,n,a,o,s,u){var f=ct(i,t,n,o,u),c=ct(e,r,a,s,u);return lr(Math.atan2(c,f))}};function te(i,e){var t=Math.abs(i);return e>0?t:t*-1}var Zt={box:function(i,e,t,r){return{x:i-t,y:e-r,width:t*2,height:r*2}},length:function(i,e,t,r){return Math.PI*(3*(t+r)-Math.sqrt((3*t+r)*(t+3*r)))},nearestPoint:function(i,e,t,r,n,a){var o=t,s=r;if(o===0||s===0)return{x:i,y:e};for(var u=n-i,f=a-e,c=Math.abs(u),l=Math.abs(f),b=o*o,w=s*s,I=Math.PI/4,W,H,J=0;J<4;J++){W=o*Math.cos(I),H=s*Math.sin(I);var at=(b-w)*Math.pow(Math.cos(I),3)/o,ut=(w-b)*Math.pow(Math.sin(I),3)/s,lt=W-at,_t=H-ut,Bt=c-at,Rt=l-ut,Qt=Math.hypot(_t,lt),de=Math.hypot(Rt,Bt),se=Qt*Math.asin((lt*Rt-_t*Bt)/(Qt*de)),Te=se/Math.sqrt(b+w-W*W-H*H);I+=Te,I=Math.min(Math.PI/2,Math.max(0,I))}return{x:i+te(W,u),y:e+te(H,f)}},pointDistance:function(i,e,t,r,n,a){var o=this.nearestPoint(i,e,t,r,n,a);return qt(o.x,o.y,n,a)},pointAt:function(i,e,t,r,n){var a=2*Math.PI*n;return{x:i+t*Math.cos(a),y:e+r*Math.sin(a)}},tangentAngle:function(i,e,t,r,n){var a=2*Math.PI*n,o=Math.atan2(r*Math.cos(a),-t*Math.sin(a));return lr(o)}};function ye(i,e,t,r,n,a,o,s){return-1*t*Math.cos(n)*Math.sin(s)-r*Math.sin(n)*Math.cos(s)}function We(i,e,t,r,n,a,o,s){return-1*t*Math.sin(n)*Math.sin(s)+r*Math.cos(n)*Math.cos(s)}function wr(i,e,t){return Math.atan(-e/i*Math.tan(t))}function $e(i,e,t){return Math.atan(e/(i*Math.tan(t)))}function tr(i,e,t,r,n,a){return t*Math.cos(n)*Math.cos(a)-r*Math.sin(n)*Math.sin(a)+i}function Je(i,e,t,r,n,a){return t*Math.sin(n)*Math.cos(a)+r*Math.cos(n)*Math.sin(a)+e}function jr(i,e,t,r){var n=Math.atan2(r*i,t*e);return(n+Math.PI*2)%(Math.PI*2)}function hn(i,e,t){return{x:i*Math.cos(t),y:e*Math.sin(t)}}function tn(i,e,t){var r=Math.cos(t),n=Math.sin(t);return[i*r-e*n,i*n+e*r]}var kn={box:function(i,e,t,r,n,a,o){for(var s=wr(t,r,n),u=1/0,f=-1/0,c=[a,o],l=-Math.PI*2;l<=Math.PI*2;l+=Math.PI){var b=s+l;a<o?a<b&&b<o&&c.push(b):o<b&&b<a&&c.push(b)}for(var l=0;l<c.length;l++){var w=tr(i,e,t,r,n,c[l]);w<u&&(u=w),w>f&&(f=w)}for(var I=$e(t,r,n),W=1/0,H=-1/0,J=[a,o],l=-Math.PI*2;l<=Math.PI*2;l+=Math.PI){var at=I+l;a<o?a<at&&at<o&&J.push(at):o<at&&at<a&&J.push(at)}for(var l=0;l<J.length;l++){var ut=Je(i,e,t,r,n,J[l]);ut<W&&(W=ut),ut>H&&(H=ut)}return{x:u,y:W,width:f-u,height:H-W}},length:function(i,e,t,r,n,a,o){},nearestPoint:function(i,e,t,r,n,a,o,s,u){var f=tn(s-i,u-e,-n),c=f[0],l=f[1],b=Zt.nearestPoint(0,0,t,r,c,l),w=jr(t,r,b.x,b.y);w<a?b=hn(t,r,a):w>o&&(b=hn(t,r,o));var I=tn(b.x,b.y,n);return{x:I[0]+i,y:I[1]+e}},pointDistance:function(i,e,t,r,n,a,o,s,u){var f=this.nearestPoint(i,e,t,r,s,u);return qt(f.x,f.y,s,u)},pointAt:function(i,e,t,r,n,a,o,s){var u=(o-a)*s+a;return{x:tr(i,e,t,r,n,u),y:Je(i,e,t,r,n,u)}},tangentAngle:function(i,e,t,r,n,a,o,s){var u=(o-a)*s+a,f=ye(i,e,t,r,n,a,o,u),c=We(i,e,t,r,n,a,o,u);return lr(Math.atan2(c,f))}};function In(i){for(var e=0,t=[],r=0;r<i.length-1;r++){var n=i[r],a=i[r+1],o=qt(n[0],n[1],a[0],a[1]),s={from:n,to:a,length:o};t.push(s),e+=o}return{segments:t,totalLength:e}}function Kn(i){if(i.length<2)return 0;for(var e=0,t=0;t<i.length-1;t++){var r=i[t],n=i[t+1];e+=qt(r[0],r[1],n[0],n[1])}return e}function ca(i,e){if(e>1||e<0||i.length<2)return null;var t=In(i),r=t.segments,n=t.totalLength;if(n===0)return{x:i[0][0],y:i[0][1]};for(var a=0,o=null,s=0;s<r.length;s++){var u=r[s],f=u.from,c=u.to,l=u.length/n;if(e>=a&&e<=a+l){var b=(e-a)/l;o=hr.pointAt(f[0],f[1],c[0],c[1],b);break}a+=l}return o}function ea(i,e){if(e>1||e<0||i.length<2)return 0;for(var t=In(i),r=t.segments,n=t.totalLength,a=0,o=0,s=0;s<r.length;s++){var u=r[s],f=u.from,c=u.to,l=u.length/n;if(e>=a&&e<=a+l){o=Math.atan2(c[1]-f[1],c[0]-f[0]);break}a+=l}return o}function mi(i,e,t){for(var r=1/0,n=0;n<i.length-1;n++){var a=i[n],o=i[n+1],s=hr.pointDistance(a[0],a[1],o[0],o[1],e,t);s<r&&(r=s)}return r}var va={box:function(i){for(var e=[],t=[],r=0;r<i.length;r++){var n=i[r];e.push(n[0]),t.push(n[1])}return cr(e,t)},length:function(i){return Kn(i)},pointAt:function(i,e){return ca(i,e)},pointDistance:function(i,e,t){return mi(i,e,t)},tangentAngle:function(i,e){return ea(i,e)}};function Si(i){var e=i.slice(0);return i.length&&e.push(i[0]),e}var di={box:function(i){return va.box(i)},length:function(i){return Kn(Si(i))},pointAt:function(i,e){return ca(Si(i),e)},pointDistance:function(i,e,t){return mi(Si(i),e,t)},tangentAngle:function(i,e){return ea(Si(i),e)}};function Pa(i,e){return!i||!e?i||e:{minX:Math.min(i.minX,e.minX),minY:Math.min(i.minY,e.minY),maxX:Math.max(i.maxX,e.maxX),maxY:Math.max(i.maxY,e.maxY)}}function Mi(i,e){var t=i.get("startArrowShape"),r=i.get("endArrowShape"),n=null,a=null;return t&&(n=t.getCanvasBBox(),e=Pa(e,n)),r&&(a=r.getCanvasBBox(),e=Pa(e,a)),e}function Fi(i){for(var e=i.attr(),t=e.points,r=[],n=[],a=0;a<t.length;a++){var o=t[a];r.push(o[0]),n.push(o[1])}var s=cr(r,n),u=s.x,f=s.y,c=s.width,l=s.height,b={minX:u,minY:f,maxX:u+c,maxY:f+l};return b=Mi(i,b),{x:b.minX,y:b.minY,width:b.maxX-b.minX,height:b.maxY-b.minY}}function yo(i){for(var e=i.attr(),t=e.points,r=[],n=[],a=0;a<t.length;a++){var o=t[a];r.push(o[0]),n.push(o[1])}return cr(r,n)}var Ao=null;function Qi(){if(!Ao){var i=document.createElement("canvas");i.width=1,i.height=1,Ao=i.getContext("2d")}return Ao}function _a(i,e,t){var r=1;if((0,d.isString)(i)&&(r=i.split(`
`).length),r>1){var n=Ko(e,t);return e*r+n*(r-1)}return e}function Ko(i,e){return e?e-i:i*.14}function ni(i,e){var t=Qi(),r=0;if((0,d.isNil)(i)||i==="")return r;if(t.save(),t.font=e,(0,d.isString)(i)&&i.includes(`
`)){var n=i.split(`
`);(0,d.each)(n,function(a){var o=t.measureText(a).width;r<o&&(r=o)})}else r=t.measureText(i).width;return t.restore(),r}function $n(i){var e=i.fontSize,t=i.fontFamily,r=i.fontWeight,n=i.fontStyle,a=i.fontVariant;return[n,a,r,e+"px",t].join(" ").trim()}function ka(i){var e=i.attr(),t=e.x,r=e.y,n=e.text,a=e.fontSize,o=e.lineHeight,s=e.font;s||(s=$n(e));var u=ni(n,s),f;if(!u)f={x:t,y:r,width:0,height:0};else{var c=e.textAlign,l=e.textBaseline,b=_a(n,a,o),w={x:t,y:r-b};c&&(c==="end"||c==="right"?w.x-=u:c==="center"&&(w.x-=u/2)),l&&(l==="top"?w.y+=b:l==="middle"&&(w.y+=b/2)),f={x:w.x,y:w.y,width:u,height:b}}return f}var Ha=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,io=/[^\s\,]+/ig;function Pu(i){var e=i||[];if((0,d.isArray)(e))return e;if((0,d.isString)(e))return e=e.match(Ha),(0,d.each)(e,function(t,r){if(t=t.match(io),t[0].length>1){var n=t[0].charAt(0);t.splice(1,0,t[0].substr(1)),t[0]=n}(0,d.each)(t,function(a,o){isNaN(a)||(t[o]=+a)}),e[r]=t}),e}var uc=Pu;function pe(i,e,t,r){var n=[],a=!!r,o,s,u,f,c,l,b;if(a){u=r[0],f=r[1];for(var w=0,I=i.length;w<I;w+=1){var W=i[w];u=zn.min([0,0],u,W),f=zn.max([0,0],f,W)}}for(var w=0,H=i.length;w<H;w+=1){var W=i[w];if(w===0&&!t)b=W;else if(w===H-1&&!t)l=W,n.push(b),n.push(l);else{var J=[w?w-1:H-1,w-1][t?0:1];o=i[J],s=i[t?(w+1)%H:w+1];var at=[0,0];at=zn.sub(at,s,o),at=zn.scale(at,at,e);var ut=zn.distance(W,o),lt=zn.distance(W,s),_t=ut+lt;_t!==0&&(ut/=_t,lt/=_t);var Bt=zn.scale([0,0],at,-ut),Rt=zn.scale([0,0],at,lt);l=zn.add([0,0],W,Bt),c=zn.add([0,0],W,Rt),c=zn.min([0,0],c,zn.max([0,0],s,W)),c=zn.max([0,0],c,zn.min([0,0],s,W)),Bt=zn.sub([0,0],c,W),Bt=zn.scale([0,0],Bt,-ut/lt),l=zn.add([0,0],W,Bt),l=zn.min([0,0],l,zn.max([0,0],o,W)),l=zn.max([0,0],l,zn.min([0,0],o,W)),Rt=zn.sub([0,0],W,l),Rt=zn.scale([0,0],Rt,lt/ut),c=zn.add([0,0],W,Rt),a&&(l=zn.max([0,0],l,u),l=zn.min([0,0],l,f),c=zn.max([0,0],c,u),c=zn.min([0,0],c,f)),n.push(b),n.push(l),b=c}}return t&&n.push(n.shift()),n}function gr(i,e,t){e===void 0&&(e=!1),t===void 0&&(t=[[0,0],[1,1]]);for(var r=!!e,n=[],a=0,o=i.length;a<o;a+=2)n.push([i[a],i[a+1]]);for(var s=pe(n,.4,r,t),u=n.length,f=[],c,l,b,a=0;a<u-1;a+=1)c=s[a*2],l=s[a*2+1],b=n[a+1],f.push(["C",c[0],c[1],l[0],l[1],b[0],b[1]]);return r&&(c=s[u],l=s[u+1],b=n[0],f.push(["C",c[0],c[1],l[0],l[1],b[0],b[1]])),f}var fr=gr;function Sn(i,e,t){var r=null,n=t;return e<n&&(n=e,r="add"),i<n&&(n=i,r="del"),{type:r,min:n}}var Na=function(i,e){var t=i.length,r=e.length,n,a,o=0;if(t===0||r===0)return null;for(var s=[],u=0;u<=t;u++)s[u]=[],s[u][0]={min:u};for(var f=0;f<=r;f++)s[0][f]={min:f};for(var u=1;u<=t;u++){n=i[u-1];for(var f=1;f<=r;f++){a=e[f-1],isEqual(n,a)?o=0:o=1;var c=s[u-1][f].min+1,l=s[u][f-1].min+1,b=s[u-1][f-1].min+o;s[u][f]=Sn(c,l,b)}}return s};function le(i,e){var t=Na(i,e),r=i.length,n=e.length,a=[],o=1,s=1;if(t[r][n]!==r){for(var u=1;u<=r;u++){var f=t[u][u].min;s=u;for(var c=o;c<=n;c++)t[u][c].min<f&&(f=t[u][c].min,s=c);o=s,t[u][o].type&&a.push({index:u-1,type:t[u][o].type})}for(var u=a.length-1;u>=0;u--)o=a[u].index,a[u].type==="add"?i.splice(o,0,[].concat(i[o])):i.splice(o,1)}if(r=i.length,r<n)for(var u=0;u<n-r;u++)i[r-1][0]==="z"||i[r-1][0]==="Z"?i.splice(r-2,0,i[r-2]):i.push(i[r-1]);return i}var Ht=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,ke=new RegExp("([a-z])["+Ht+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+Ht+"]*,?["+Ht+"]*)+)","ig"),rr=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+Ht+"]*,?["+Ht+"]*","ig");function ar(i){if(!i)return null;if((0,d.isArray)(i))return i;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},t=[];return String(i).replace(ke,function(r,n,a){var o=[],s=n.toLowerCase();if(a.replace(rr,function(u,f){f&&o.push(+f)}),s==="m"&&o.length>2&&(t.push([n].concat(o.splice(0,2))),s="l",n=n==="m"?"l":"L"),s==="o"&&o.length===1&&t.push([n,o[0]]),s==="r")t.push([n].concat(o));else for(;o.length>=e[s]&&(t.push([n].concat(o.splice(0,e[s]))),!!e[s]););return""}),t}var Fe=/[a-z]/;function Re(i,e){return[e[0]+(e[0]-i[0]),e[1]+(e[1]-i[1])]}function Ve(i){var e=ar(i);if(!e||!e.length)return[["M",0,0]];for(var t=!1,r=0;r<e.length;r++){var n=e[r][0];if(Fe.test(n)||["V","H","T","S"].indexOf(n)>=0){t=!0;break}}if(!t)return e;var a=[],o=0,s=0,u=0,f=0,c=0,l,b,w=e[0];(w[0]==="M"||w[0]==="m")&&(o=+w[1],s=+w[2],u=o,f=s,c++,a[0]=["M",o,s]);for(var r=c,I=e.length;r<I;r++){var W=e[r],H=a[r-1],J=[],n=W[0],at=n.toUpperCase();if(n!==at)switch(J[0]=at,at){case"A":J[1]=W[1],J[2]=W[2],J[3]=W[3],J[4]=W[4],J[5]=W[5],J[6]=+W[6]+o,J[7]=+W[7]+s;break;case"V":J[1]=+W[1]+s;break;case"H":J[1]=+W[1]+o;break;case"M":u=+W[1]+o,f=+W[2]+s,J[1]=u,J[2]=f;break;default:for(var ut=1,lt=W.length;ut<lt;ut++)J[ut]=+W[ut]+(ut%2?o:s)}else J=e[r];switch(at){case"Z":o=+u,s=+f;break;case"H":o=J[1],J=["L",o,s];break;case"V":s=J[1],J=["L",o,s];break;case"T":o=J[1],s=J[2];var _t=Re([H[1],H[2]],[H[3],H[4]]);J=["Q",_t[0],_t[1],o,s];break;case"S":o=J[J.length-2],s=J[J.length-1];var Bt=H.length,Rt=Re([H[Bt-4],H[Bt-3]],[H[Bt-2],H[Bt-1]]);J=["C",Rt[0],Rt[1],J[1],J[2],o,s];break;case"M":u=J[J.length-2],f=J[J.length-1];break;default:o=J[J.length-2],s=J[J.length-1]}a.push(J)}return a}var ce=Math.PI*2,Le=function(i,e,t,r,n,a,o){var s=i.x,u=i.y;s*=e,u*=t;var f=r*s-n*u,c=n*s+r*u;return{x:f+a,y:c+o}},oe=function(i,e){var t=e===1.5707963267948966?.551915024494:e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),r=Math.cos(i),n=Math.sin(i),a=Math.cos(i+e),o=Math.sin(i+e);return[{x:r-n*t,y:n+r*t},{x:a+o*t,y:o-a*t},{x:a,y:o}]},qe=function(i,e,t,r){var n=i*r-e*t<0?-1:1,a=i*t+e*r;return a>1&&(a=1),a<-1&&(a=-1),n*Math.acos(a)},or=function(i,e,t,r,n,a,o,s,u,f,c,l){var b=Math.pow(n,2),w=Math.pow(a,2),I=Math.pow(c,2),W=Math.pow(l,2),H=b*w-b*W-w*I;H<0&&(H=0),H/=b*W+w*I,H=Math.sqrt(H)*(o===s?-1:1);var J=H*n/a*l,at=H*-a/n*c,ut=f*J-u*at+(i+t)/2,lt=u*J+f*at+(e+r)/2,_t=(c-J)/n,Bt=(l-at)/a,Rt=(-c-J)/n,Qt=(-l-at)/a,de=qe(1,0,_t,Bt),se=qe(_t,Bt,Rt,Qt);return s===0&&se>0&&(se-=ce),s===1&&se<0&&(se+=ce),[ut,lt,de,se]},Ir=function(i){var e=i.px,t=i.py,r=i.cx,n=i.cy,a=i.rx,o=i.ry,s=i.xAxisRotation,u=s===void 0?0:s,f=i.largeArcFlag,c=f===void 0?0:f,l=i.sweepFlag,b=l===void 0?0:l,w=[];if(a===0||o===0)return[{x1:0,y1:0,x2:0,y2:0,x:r,y:n}];var I=Math.sin(u*ce/360),W=Math.cos(u*ce/360),H=W*(e-r)/2+I*(t-n)/2,J=-I*(e-r)/2+W*(t-n)/2;if(H===0&&J===0)return[{x1:0,y1:0,x2:0,y2:0,x:r,y:n}];a=Math.abs(a),o=Math.abs(o);var at=Math.pow(H,2)/Math.pow(a,2)+Math.pow(J,2)/Math.pow(o,2);at>1&&(a*=Math.sqrt(at),o*=Math.sqrt(at));var ut=or(e,t,r,n,a,o,c,b,I,W,H,J),lt=ut[0],_t=ut[1],Bt=ut[2],Rt=ut[3],Qt=Math.abs(Rt)/(ce/4);Math.abs(1-Qt)<1e-7&&(Qt=1);var de=Math.max(Math.ceil(Qt),1);Rt/=de;for(var se=0;se<de;se++)w.push(oe(Bt,Rt)),Bt+=Rt;return w.map(function(Te){var je=Le(Te[0],a,o,W,I,lt,_t),Dr=je.x,Kr=je.y,zr=Le(Te[1],a,o,W,I,lt,_t),Mr=zr.x,En=zr.y,yn=Le(Te[2],a,o,W,I,lt,_t),Ar=yn.x,Xr=yn.y;return{x1:Dr,y1:Kr,x2:Mr,y2:En,x:Ar,y:Xr}})};function kr(i,e,t,r,n,a,o,s,u){var f=Ir({px:i,py:e,cx:s,cy:u,rx:t,ry:r,xAxisRotation:n,largeArcFlag:a,sweepFlag:o});return f.reduce(function(c,l){var b=l.x1,w=l.y1,I=l.x2,W=l.y2,H=l.x,J=l.y;return c.push(b,w,I,W,H,J),c},[])}function _r(i,e){"TQ".indexOf(i[0])<0&&(e.qx=null,e.qy=null);var t=i.slice(1),r=t[0],n=t[1];switch(i[0]){case"M":return e.x=r,e.y=n,i;case"A":return["C"].concat(arcToCubic.apply(0,[e.x1,e.y1].concat(i.slice(1))));case"Q":return e.qx=r,e.qy=n,["C"].concat(quadToCubic.apply(0,[e.x1,e.y1].concat(i.slice(1))));case"L":return["C"].concat(lineToCubic(e.x1,e.y1,i[1],i[2]));case"H":return["C"].concat(lineToCubic(e.x1,e.y1,i[1],e.y1));case"V":return["C"].concat(lineToCubic(e.x1,e.y1,e.x1,i[1]));case"Z":return["C"].concat(lineToCubic(e.x1,e.y1,e.x,e.y));default:}return i}function Qr(i,e){e===void 0&&(e=!1);for(var t=path2Absolute(i),r={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null},n=[],a="",o=t.length,s,u,f=[],c=0;c<o;c+=1)t[c]&&(a=t[c][0]),n[c]=a,t[c]=segmentToCubic(t[c],r),Xn(t,n,c),o=t.length,a==="Z"&&f.push(c),s=t[c],u=s.length,r.x1=+s[u-2],r.y1=+s[u-1],r.x2=+s[u-4]||r.x1,r.y2=+s[u-3]||r.y1;return e?[t,f]:t}function Xn(i,e,t){if(i[t].length>7){i[t].shift();for(var r=i[t],n=t;r.length;)e[t]="A",i.splice(n+=1,0,["C"].concat(r.splice(0,6)));i.splice(t,1)}}var Sa=function(i,e,t,r,n){var a=-3*e+9*t-9*r+3*n,o=i*a+6*e-12*t+6*r;return i*o-3*e+3*t},On=function(i,e,t,r,n,a,o,s,u){u===null&&(u=1),u=u>1?1:u<0?0:u;for(var f=u/2,c=12,l=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],b=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],w=0,I=0;I<c;I++){var W=f*l[I]+f,H=Sa(W,i,t,n,o),J=Sa(W,e,r,a,s),at=H*H+J*J;w+=b[I]*Math.sqrt(at)}return f*w},Qn=function(i,e,t,r,n,a,o,s){for(var u=[],f=[[],[]],c,l,b,w,I=0;I<2;++I){if(I===0?(l=6*i-12*t+6*n,c=-3*i+9*t-9*n+3*o,b=3*t-3*i):(l=6*e-12*r+6*a,c=-3*e+9*r-9*a+3*s,b=3*r-3*e),Math.abs(c)<1e-12){if(Math.abs(l)<1e-12)continue;w=-b/l,w>0&&w<1&&u.push(w);continue}var W=l*l-4*b*c,H=Math.sqrt(W);if(!(W<0)){var J=(-l+H)/(2*c);J>0&&J<1&&u.push(J);var at=(-l-H)/(2*c);at>0&&at<1&&u.push(at)}}for(var ut=u.length,lt=ut,_t;ut--;)w=u[ut],_t=1-w,f[0][ut]=_t*_t*_t*i+3*_t*_t*w*t+3*_t*w*w*n+w*w*w*o,f[1][ut]=_t*_t*_t*e+3*_t*_t*w*r+3*_t*w*w*a+w*w*w*s;return f[0][lt]=i,f[1][lt]=e,f[0][lt+1]=o,f[1][lt+1]=s,f[0].length=f[1].length=lt+2,{min:{x:Math.min.apply(0,f[0]),y:Math.min.apply(0,f[1])},max:{x:Math.max.apply(0,f[0]),y:Math.max.apply(0,f[1])}}},ma=function(i,e,t,r,n,a,o,s){if(!(Math.max(i,t)<Math.min(n,o)||Math.min(i,t)>Math.max(n,o)||Math.max(e,r)<Math.min(a,s)||Math.min(e,r)>Math.max(a,s))){var u=(i*r-e*t)*(n-o)-(i-t)*(n*s-a*o),f=(i*r-e*t)*(a-s)-(e-r)*(n*s-a*o),c=(i-t)*(a-s)-(e-r)*(n-o);if(c){var l=u/c,b=f/c,w=+l.toFixed(2),I=+b.toFixed(2);if(!(w<+Math.min(i,t).toFixed(2)||w>+Math.max(i,t).toFixed(2)||w<+Math.min(n,o).toFixed(2)||w>+Math.max(n,o).toFixed(2)||I<+Math.min(e,r).toFixed(2)||I>+Math.max(e,r).toFixed(2)||I<+Math.min(a,s).toFixed(2)||I>+Math.max(a,s).toFixed(2)))return{x:l,y:b}}}},Ra=function(i,e,t){return e>=i.x&&e<=i.x+i.width&&t>=i.y&&t<=i.y+i.height},Gi=function(i,e,t,r){return i===null&&(i=e=t=r=0),e===null&&(e=i.y,t=i.width,r=i.height,i=i.x),{x:i,y:e,width:t,w:t,height:r,h:r,x2:i+t,y2:e+r,cx:i+t/2,cy:e+r/2,r1:Math.min(t,r)/2,r2:Math.max(t,r)/2,r0:Math.sqrt(t*t+r*r)/2,path:rectPath(i,e,t,r),vb:[i,e,t,r].join(" ")}},ws=function(i,e){return i=Gi(i),e=Gi(e),Ra(e,i.x,i.y)||Ra(e,i.x2,i.y)||Ra(e,i.x,i.y2)||Ra(e,i.x2,i.y2)||Ra(i,e.x,e.y)||Ra(i,e.x2,e.y)||Ra(i,e.x,e.y2)||Ra(i,e.x2,e.y2)||(i.x<e.x2&&i.x>e.x||e.x<i.x2&&e.x>i.x)&&(i.y<e.y2&&i.y>e.y||e.y<i.y2&&e.y>i.y)},fh=function(i,e,t,r,n,a,o,s){isArray(i)||(i=[i,e,t,r,n,a,o,s]);var u=Qn.apply(null,i);return Gi(u.min.x,u.min.y,u.max.x-u.min.x,u.max.y-u.min.y)},js=function(i,e,t,r,n,a,o,s,u){var f=1-u,c=Math.pow(f,3),l=Math.pow(f,2),b=u*u,w=b*u,I=c*i+l*3*u*t+f*3*u*u*n+w*o,W=c*e+l*3*u*r+f*3*u*u*a+w*s,H=i+2*u*(t-i)+b*(n-2*t+i),J=e+2*u*(r-e)+b*(a-2*r+e),at=t+2*u*(n-t)+b*(o-2*n+t),ut=r+2*u*(a-r)+b*(s-2*a+r),lt=f*i+u*t,_t=f*e+u*r,Bt=f*n+u*o,Rt=f*a+u*s,Qt=90-Math.atan2(H-at,J-ut)*180/Math.PI;return{x:I,y:W,m:{x:H,y:J},n:{x:at,y:ut},start:{x:lt,y:_t},end:{x:Bt,y:Rt},alpha:Qt}},jh=function(i,e,t){var r=fh(i),n=fh(e);if(!ws(r,n))return t?0:[];for(var a=On.apply(0,i),o=On.apply(0,e),s=~~(a/8),u=~~(o/8),f=[],c=[],l={},b=t?0:[],w=0;w<s+1;w++){var I=js.apply(0,i.concat(w/s));f.push({x:I.x,y:I.y,t:w/s})}for(var w=0;w<u+1;w++){var I=js.apply(0,e.concat(w/u));c.push({x:I.x,y:I.y,t:w/u})}for(var w=0;w<s;w++)for(var W=0;W<u;W++){var H=f[w],J=f[w+1],at=c[W],ut=c[W+1],lt=Math.abs(J.x-H.x)<.001?"y":"x",_t=Math.abs(ut.x-at.x)<.001?"y":"x",Bt=ma(H.x,H.y,J.x,J.y,at.x,at.y,ut.x,ut.y);if(Bt){if(l[Bt.x.toFixed(4)]===Bt.y.toFixed(4))continue;l[Bt.x.toFixed(4)]=Bt.y.toFixed(4);var Rt=H.t+Math.abs((Bt[lt]-H[lt])/(J[lt]-H[lt]))*(J.t-H.t),Qt=at.t+Math.abs((Bt[_t]-at[_t])/(ut[_t]-at[_t]))*(ut.t-at.t);Rt>=0&&Rt<=1&&Qt>=0&&Qt<=1&&(t?b++:b.push({x:Bt.x,y:Bt.y,t1:Rt,t2:Qt}))}}return b},bu=function(i,e,t){i=path2Curve(i),e=path2Curve(e);for(var r,n,a,o,s,u,f,c,l,b,w=t?0:[],I=0,W=i.length;I<W;I++){var H=i[I];if(H[0]==="M")r=s=H[1],n=u=H[2];else{H[0]==="C"?(l=[r,n].concat(H.slice(1)),r=l[6],n=l[7]):(l=[r,n,r,n,s,u,s,u],r=s,n=u);for(var J=0,at=e.length;J<at;J++){var ut=e[J];if(ut[0]==="M")a=f=ut[1],o=c=ut[2];else{ut[0]==="C"?(b=[a,o].concat(ut.slice(1)),a=b[6],o=b[7]):(b=[a,o,a,o,f,c,f,c],a=f,o=c);var lt=jh(l,b,t);if(t)w+=lt;else{for(var _t=0,Bt=lt.length;_t<Bt;_t++)lt[_t].segment1=I,lt[_t].segment2=J,lt[_t].bez1=l,lt[_t].bez2=b;w=w.concat(lt)}}}}}return w};function kv(i,e){return bu(i,e)}function Hh(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function Rv(i,e){return Hh(i)*Hh(e)?(i[0]*e[0]+i[1]*e[1])/(Hh(i)*Hh(e)):1}function Wd(i,e){return(i[0]*e[1]<i[1]*e[0]?-1:1)*Math.acos(Rv(i,e))}function Bv(i,e){return i[0]===e[0]&&i[1]===e[1]}function oy(i,e){var t=e[1],r=e[2],n=(0,d.mod)((0,d.toRadian)(e[3]),Math.PI*2),a=e[4],o=e[5],s=i[0],u=i[1],f=e[6],c=e[7],l=Math.cos(n)*(s-f)/2+Math.sin(n)*(u-c)/2,b=-1*Math.sin(n)*(s-f)/2+Math.cos(n)*(u-c)/2,w=l*l/(t*t)+b*b/(r*r);w>1&&(t*=Math.sqrt(w),r*=Math.sqrt(w));var I=t*t*(b*b)+r*r*(l*l),W=I?Math.sqrt((t*t*(r*r)-I)/I):1;a===o&&(W*=-1),isNaN(W)&&(W=0);var H=r?W*t*b/r:0,J=t?W*-r*l/t:0,at=(s+f)/2+Math.cos(n)*H-Math.sin(n)*J,ut=(u+c)/2+Math.sin(n)*H+Math.cos(n)*J,lt=[(l-H)/t,(b-J)/r],_t=[(-1*l-H)/t,(-1*b-J)/r],Bt=Wd([1,0],lt),Rt=Wd(lt,_t);return Rv(lt,_t)<=-1&&(Rt=Math.PI),Rv(lt,_t)>=1&&(Rt=0),o===0&&Rt>0&&(Rt=Rt-2*Math.PI),o===1&&Rt<0&&(Rt=Rt+2*Math.PI),{cx:at,cy:ut,rx:Bv(i,[f,c])?0:t,ry:Bv(i,[f,c])?0:r,startAngle:Bt,endAngle:Bt+Rt,xRotation:n,arcFlag:a,sweepFlag:o}}function Xd(i,e){return[e[0]+(e[0]-i[0]),e[1]+(e[1]-i[1])]}function Yd(i){i=uc(i);for(var e=[],t=null,r=null,n=null,a=0,o=i.length,s=0;s<o;s++){var u=i[s];r=i[s+1];var f=u[0],c={command:f,prePoint:t,params:u,startTangent:null,endTangent:null};switch(f){case"M":n=[u[1],u[2]],a=s;break;case"A":var l=oy(t,u);c.arcParams=l;break;default:break}if(f==="Z")t=n,r=i[a+1];else{var b=u.length;t=[u[b-2],u[b-1]]}r&&r[0]==="Z"&&(r=i[a],e[a]&&(e[a].prePoint=t)),c.currentPoint=t,e[a]&&Bv(t,e[a].currentPoint)&&(e[a].prePoint=c.prePoint);var w=r?[r[r.length-2],r[r.length-1]]:null;c.nextPoint=w;var I=c.prePoint;if(["L","H","V"].includes(f))c.startTangent=[I[0]-t[0],I[1]-t[1]],c.endTangent=[t[0]-I[0],t[1]-I[1]];else if(f==="Q"){var W=[u[1],u[2]];c.startTangent=[I[0]-W[0],I[1]-W[1]],c.endTangent=[t[0]-W[0],t[1]-W[1]]}else if(f==="T"){var H=e[s-1],W=Xd(H.currentPoint,I);H.command==="Q"?(c.command="Q",c.startTangent=[I[0]-W[0],I[1]-W[1]],c.endTangent=[t[0]-W[0],t[1]-W[1]]):(c.command="TL",c.startTangent=[I[0]-t[0],I[1]-t[1]],c.endTangent=[t[0]-I[0],t[1]-I[1]])}else if(f==="C"){var J=[u[1],u[2]],at=[u[3],u[4]];c.startTangent=[I[0]-J[0],I[1]-J[1]],c.endTangent=[t[0]-at[0],t[1]-at[1]],c.startTangent[0]===0&&c.startTangent[1]===0&&(c.startTangent=[J[0]-at[0],J[1]-at[1]]),c.endTangent[0]===0&&c.endTangent[1]===0&&(c.endTangent=[at[0]-J[0],at[1]-J[1]])}else if(f==="S"){var H=e[s-1],J=Xd(H.currentPoint,I),at=[u[1],u[2]];H.command==="C"?(c.command="C",c.startTangent=[I[0]-J[0],I[1]-J[1]],c.endTangent=[t[0]-at[0],t[1]-at[1]]):(c.command="SQ",c.startTangent=[I[0]-at[0],I[1]-at[1]],c.endTangent=[t[0]-at[0],t[1]-at[1]])}else if(f==="A"){var ut=.001,lt=c.arcParams||{},_t=lt.cx,Bt=_t===void 0?0:_t,Rt=lt.cy,Qt=Rt===void 0?0:Rt,de=lt.rx,se=de===void 0?0:de,Te=lt.ry,je=Te===void 0?0:Te,Dr=lt.sweepFlag,Kr=Dr===void 0?0:Dr,zr=lt.startAngle,Mr=zr===void 0?0:zr,En=lt.endAngle,yn=En===void 0?0:En;Kr===0&&(ut*=-1);var Ar=se*Math.cos(Mr-ut)+Bt,Xr=je*Math.sin(Mr-ut)+Qt;c.startTangent=[Ar-n[0],Xr-n[1]];var sn=se*Math.cos(Mr+yn+ut)+Bt,un=je*Math.sin(Mr+yn-ut)+Qt;c.endTangent=[I[0]-sn,I[1]-un]}e.push(c)}return e}function Vd(i){for(var e=[],t=i.length,r=0;r<t-1;r++){var n=i[r],a=i[r+1];e.push({from:{x:n[0],y:n[1]},to:{x:a[0],y:a[1]}})}if(e.length>1){var o=i[0],s=i[t-1];e.push({from:{x:s[0],y:s[1]},to:{x:o[0],y:o[1]}})}return e}function sy(i,e){var t=!1;return each(i,function(r){if(getLineIntersect(r.from,r.to,e.from,e.to))return t=!0,!1}),t}function jd(i){var e=i.map(function(r){return r[0]}),t=i.map(function(r){return r[1]});return{minX:Math.min.apply(null,e),maxX:Math.max.apply(null,e),minY:Math.min.apply(null,t),maxY:Math.max.apply(null,t)}}function uy(i,e){return!(e.minX>i.maxX||e.maxX<i.minX||e.minY>i.maxY||e.maxY<i.minY)}function O_(i,e){if(i.length<2||e.length<2)return!1;var t=jd(i),r=jd(e);if(!uy(t,r))return!1;var n=!1;if(each(e,function(u){if(isPointInPolygon(i,u[0],u[1]))return n=!0,!1}),n||(each(i,function(u){if(isPointInPolygon(e,u[0],u[1]))return n=!0,!1}),n))return!0;var a=Vd(i),o=Vd(e),s=!1;return each(o,function(u){if(sy(a,u))return s=!0,!1}),s}function fy(i,e){for(var t=[],r=[],n=[],a=0;a<i.length;a++){var o=i[a],s=o.currentPoint,u=o.params,f=o.prePoint,c=void 0;switch(o.command){case"Q":c=Z.box(f[0],f[1],u[1],u[2],u[3],u[4]);break;case"C":c=Gt.box(f[0],f[1],u[1],u[2],u[3],u[4],u[5],u[6]);break;case"A":var l=o.arcParams;c=kn.box(l.cx,l.cy,l.rx,l.ry,l.xRotation,l.startAngle,l.endAngle);break;default:t.push(s[0]),r.push(s[1]);break}c&&(o.box=c,t.push(c.x,c.x+c.width),r.push(c.y,c.y+c.height)),e&&(o.command==="L"||o.command==="M")&&o.prePoint&&o.nextPoint&&n.push(o)}t=t.filter(function(J){return!Number.isNaN(J)&&J!==1/0&&J!==-1/0}),r=r.filter(function(J){return!Number.isNaN(J)&&J!==1/0&&J!==-1/0});var b=(0,d.min)(t),w=(0,d.min)(r),I=(0,d.max)(t),W=(0,d.max)(r);if(n.length===0)return{x:b,y:w,width:I-b,height:W-w};for(var a=0;a<n.length;a++){var o=n[a],s=o.currentPoint,H=void 0;s[0]===b?(H=Kh(o,e),b=b-H.xExtra):s[0]===I&&(H=Kh(o,e),I=I+H.xExtra),s[1]===w?(H=Kh(o,e),w=w-H.yExtra):s[1]===W&&(H=Kh(o,e),W=W+H.yExtra)}return{x:b,y:w,width:I-b,height:W-w}}function Kh(i,e){var t=i.prePoint,r=i.currentPoint,n=i.nextPoint,a=Math.pow(r[0]-t[0],2)+Math.pow(r[1]-t[1],2),o=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),s=Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2),u=Math.acos((a+o-s)/(2*Math.sqrt(a)*Math.sqrt(o)));if(!u||Math.sin(u)===0||(0,d.isNumberEqual)(u,0))return{xExtra:0,yExtra:0};var f=Math.abs(Math.atan2(n[1]-r[1],n[0]-r[0])),c=Math.abs(Math.atan2(n[0]-r[0],n[1]-r[1]));f=f>Math.PI/2?Math.PI-f:f,c=c>Math.PI/2?Math.PI-c:c;var l={xExtra:Math.cos(u/2-f)*(e/2*(1/Math.sin(u/2)))-e/2||0,yExtra:Math.cos(c-u/2)*(e/2*(1/Math.sin(u/2)))-e/2||0};return l}function cy(i){var e=i.attr(),t=e.path,r=e.stroke,n=r?e.lineWidth:0,a=i.get("segments")||Yd(t),o=fy(a,n),s=o.x,u=o.y,f=o.width,c=o.height,l={minX:s,minY:u,maxX:s+f,maxY:u+c};return l=Mi(i,l),{x:l.minX,y:l.minY,width:l.maxX-l.minX,height:l.maxY-l.minY}}function ly(i){var e=i.attr(),t=e.x1,r=e.y1,n=e.x2,a=e.y2,o=Math.min(t,n),s=Math.max(t,n),u=Math.min(r,a),f=Math.max(r,a),c={minX:o,maxX:s,minY:u,maxY:f};return c=Mi(i,c),{x:c.minX,y:c.minY,width:c.maxX-c.minX,height:c.maxY-c.minY}}function hy(i){var e=i.attr(),t=e.x,r=e.y,n=e.rx,a=e.ry;return{x:t-n,y:r-a,width:n*2,height:a*2}}Vs("rect",sc),Vs("image",sc),Vs("circle",mt),Vs("marker",mt),Vs("polyline",Fi),Vs("polygon",yo),Vs("text",ka),Vs("path",cy),Vs("line",ly),Vs("ellipse",hy);var L_="0.5.11",vy=function(i){(0,m.__extends)(e,i);function e(t,r){var n=i.call(this,t,r)||this;return n.item=r.item,n.canvasX=r.canvasX,n.canvasY=r.canvasY,n.wheelDelta=r.wheelDelta,n.detail=r.detail,n}return e}(Ff),Fv=function(e){return"".concat(e,"-").concat(Math.random()).concat(Date.now())},Gv=function(e){if((0,d.isArray)(e))switch(e.length){case 4:return e;case 3:return e.push(e[1]),e;case 2:return e.concat(e);case 1:return[e[0],e[0],e[0],e[0]];default:return[0,0,0,0]}if((0,d.isNumber)(e))return[e,e,e,e];if((0,d.isString)(e)){var t=parseInt(e,10);return[t,t,t,t]}return[0,0,0,0]},dy=function(e){var t=new vy(e.type,e);return t.clientX=e.clientX,t.clientY=e.clientY,t.x=e.x,t.y=e.y,t.target=e.target,t.currentTarget=e.currentTarget,t.bubbles=!0,t.item=e.item,t},gy=function(e){if(!e)return!1;for(var t=9,r=[1,0,0,0,1,0,0,0,1],n=0;n<t;n++)if(e[n]!==r[n])return!0;return!1},Af=function(e){return Number.isNaN(Number(e))},Hd=function(e){for(var t=1/0,r=-1/0,n=1/0,a=-1/0,o=0;o<e.length;o++){var s=e[o],u=s.getBBox(),f=u.minX,c=u.minY,l=u.maxX,b=u.maxY;f<t&&(t=f),c<n&&(n=c),l>r&&(r=l),b>a&&(a=b)}var w=Math.floor(t),I=Math.floor(n),W=Math.ceil(r)-Math.floor(t),H=Math.ceil(a)-Math.floor(n);return{x:w,y:I,width:W,height:H,minX:t,minY:n,maxX:r,maxY:a}},py=function(e,t,r,n,a){t===void 0&&(t=15),r===void 0&&(r="quadratic"),n===void 0&&(n=void 0),a===void 0&&(a=void 0);for(var o=e.length,s=t*2,u=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],f={},c=[],l={},b=0;b<o;b++){var w=e[b],I=w.source,W=w.target,H="".concat(I,"-").concat(W);if(!c[b]){f[H]||(f[H]=[]),c[b]=!0,f[H].push(w);for(var J=0;J<o;J++)if(b!==J){var at=e[J],ut=at.source,lt=at.target;c[J]||(I===lt&&W===ut?(f[H].push(at),c[J]=!0,l["".concat(ut,"|").concat(lt,"|").concat(f[H].length-1)]=!0):I===ut&&W===lt&&(f[H].push(at),c[J]=!0))}}}for(var _t in f)for(var Bt=f[_t],Rt=Bt.length,Qt=0;Qt<Rt;Qt++){var de=Bt[Qt];if(de.source===de.target){a&&(de.type=a),de.loopCfg={position:u[Qt%8],dist:Math.floor(Qt/8)*20+50};continue}if(Rt===1&&n&&de.source!==de.target){de.type=n;continue}de.type=r;var se=(Qt%2===0?1:-1)*(l["".concat(de.source,"|").concat(de.target,"|").concat(Qt)]?-1:1);Rt%2===1?de.curveOffset=se*Math.ceil(Qt/2)*s:de.curveOffset=se*(Math.floor(Qt/2)*s+t)}return e},Kd=z(731278),yy=function(){function i(e){this.destroyed=!1,this.graph=e,this.destroyed=!1}return i.prototype.getViewCenter=function(){var e=this.getFormatPadding(),t=this.graph,r=this.graph.get("width"),n=t.get("height");return{x:(r-e[1]-e[3])/2+e[3],y:(n-e[0]-e[2])/2+e[0]}},i.prototype.fitCenter=function(e,t){var r=this.graph,n=r.get("group"),a,o=r.getNodes();if(o.length>r.get("optimizeThreshold")){var s=1/0,u=1/0,f=-1/0,c=-1/0;o.forEach(function(lt){var _t=lt.getModel(),Bt=_t.x,Rt=_t.y;s>Bt&&(s=Bt),u>Rt&&(u=Rt),f<Bt&&(f=Bt),c<Rt&&(c=Rt)});var l=n.getMatrix()||[1,0,0,0,1,0,0,0,1],b=ei({x:s,y:u},l),w=b.x,I=b.y,W=ei({x:f,y:c},l),H=W.x,J=W.y;a={minX:w,maxX:H,minY:I,maxY:J,width:H-w,height:J-I,x:w,y:I}}else a=n.getCanvasBBox();if(!(a.width===0||a.height===0)){var at=this.getViewCenter(),ut={x:a.x+a.width/2,y:a.y+a.height/2};r.translate(at.x-ut.x,at.y-ut.y,e,t)}},i.prototype.animatedFitView=function(e,t,r,n,a,o,s,u){var f=this.graph;r=r||{duration:500,easing:"easeCubic"};var c=[1,0,0,0,1,0,0,0,1],l=n.x+a.x-o.x-n.minX,b=n.y+a.y-o.y-n.minY;if(!(Af(l)||Af(b))){var w=(0,Kd.vs)(c,[["t",l,b]]);if(!u){var I=cs({animateCfg:r,callback:function(){f.emit("viewportchange",{action:"translate",matrix:w})}});e.animate(function(lt){return{matrix:ci(t,w,lt)}},I);return}var W=f.get("minZoom"),H=f.get("maxZoom"),J=s;W&&s<W?(J=W,console.warn("fitview failed, ratio out of range, ratio: %f",s,"graph minzoom has been used instead")):H&&s>H&&(J=H,console.warn("fitview failed, ratio out of range, ratio: %f",s,"graph maxzoom has been used instead"));var at=(0,Kd.vs)(w,[["t",-a.x,-a.y],["s",J,J],["t",a.x,a.y]]),ut=cs({animateCfg:r,callback:function(){e.setMatrix(at),f.emit("viewportchange",{action:"translate",matrix:w}),f.emit("viewportchange",{action:"zoom",matrix:at})}});e.stopAnimate(),e.setMatrix(t),e.animate(function(lt){return{matrix:ci(t,at,lt)}},ut)}},i.prototype.fitView=function(e,t){var r=this.graph,n=this.getFormatPadding(),a=r.get("width"),o=r.get("height"),s=r.get("group"),u=s.getMatrix()||[1,0,0,0,1,0,0,0,1];s.resetMatrix();var f,c=r.getNodes();if(c.length>r.get("optimizeThreshold")){var l=1/0,b=1/0,w=-1/0,I=-1/0;c.forEach(function(Bt){var Rt=Bt.getModel(),Qt=Rt.x,de=Rt.y;l>Qt&&(l=Qt),b>de&&(b=de),w<Qt&&(w=Qt),I<de&&(I=de)}),f={minX:l,maxX:w,minY:b,maxY:I,width:w-l,height:I-b,x:l,y:b}}else f=s.getCanvasBBox();if(!(f.width===0||f.height===0)){var W=this.getViewCenter(),H={x:f.x+f.width/2,y:f.y+f.height/2},J=(a-n[1]-n[3])/f.width,at=(o-n[0]-n[2])/f.height,ut=J;if(J>at&&(ut=at),e)this.animatedFitView(s,u,t,f,W,H,ut,!0);else{var lt=W.x-H.x,_t=W.y-H.y;if(Af(lt)||Af(_t))return;r.translate(lt,_t),r.zoom(ut,W)||console.warn("zoom failed, ratio out of range, ratio: %f",ut)}}},i.prototype.fitViewByRules=function(e,t,r){var n=e.onlyOutOfViewPort,a=n===void 0?!1:n,o=e.direction,s=o===void 0?"both":o,u=e.ratioRule,f=u===void 0?"min":u,c=this.graph,l=this.getFormatPadding(),b=c.get("width"),w=c.get("height"),I=c.get("group"),W=I.getMatrix()||[1,0,0,0,1,0,0,0,1];I.resetMatrix();var H,J=c.getNodes();if(J.length>c.get("optimizeThreshold")){var at=1/0,ut=1/0,lt=-1/0,_t=-1/0;J.forEach(function(Kr){var zr=Kr.getModel(),Mr=zr.x,En=zr.y;at>Mr&&(at=Mr),ut>En&&(ut=En),lt<Mr&&(lt=Mr),_t<En&&(_t=En)}),H={minX:at,maxX:lt,minY:ut,maxY:_t,width:lt-at,height:_t-ut,x:at,y:ut}}else H=I.getCanvasBBox();if(!(H.width===0||H.height===0)){var Bt=this.getViewCenter(),Rt={x:H.x+H.width/2,y:H.y+H.height/2},Qt=(b-l[1]-l[3])/H.width,de=(w-l[0]-l[2])/H.height,se;if(s==="x"?se=Qt:s==="y"?se=de:se=f==="max"?Math.max(Qt,de):Math.min(Qt,de),a&&(se=se<1?se:1),t)this.animatedFitView(I,W,r,H,Bt,Rt,se,!0);else{var Te=c.getZoom(),je=Te*se,Dr=c.get("minZoom");je<Dr&&(je=Dr,console.warn("fitview failed, ratio out of range, ratio: %f",se,"graph minzoom has been used instead")),c.translate(Bt.x-Rt.x,Bt.y-Rt.y),c.zoomTo(je,Bt)}}},i.prototype.getFormatPadding=function(){var e=this.graph.get("fitViewPadding");return Gv(e)},i.prototype.focusPoint=function(e,t,r){var n=this,a=this.getViewCenter(),o=this.getPointByCanvas(a.x,a.y),s=this.graph.get("group").getMatrix();if(s||(s=[1,0,0,0,1,0,0,0,1]),t){var u=(o.x-e.x)*s[0],f=(o.y-e.y)*s[4],c=0,l=0,b=0,w=0;this.graph.get("canvas").animate(function(I){b=u*I,w=f*I,n.graph.translate(b-c,w-l),c=b,l=w},(0,m.__assign)({},r))}else this.graph.translate((o.x-e.x)*s[0],(o.y-e.y)*s[4])},i.prototype.getPointByCanvas=function(e,t){var r=this.graph.get("group").getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]);var n=fo({x:e,y:t},r);return n},i.prototype.getPointByClient=function(e,t){var r=this.graph.get("canvas"),n=r.getPointByClient(e,t);return this.getPointByCanvas(n.x,n.y)},i.prototype.getClientByPoint=function(e,t){var r=this.graph.get("canvas"),n=this.getCanvasByPoint(e,t),a=r.getClientByPoint(n.x,n.y);return{x:a.x,y:a.y}},i.prototype.getCanvasByPoint=function(e,t){var r=this.graph.get("group").getMatrix();return r||(r=[1,0,0,0,1,0,0,0,1]),ei({x:e,y:t},r)},i.prototype.focus=function(e,t,r){if((0,d.isString)(e)&&(e=this.graph.findById(e)),e){var n=0,a=0;if(e.getType&&e.getType()==="edge"){var o=e.getSource().get("group").getMatrix(),s=e.getTarget().get("group").getMatrix();o&&s?(n=(o[6]+s[6])/2,a=(o[7]+s[7])/2):(o||s)&&(n=o?o[6]:s[6],a=o?o[7]:s[7])}else{var u=e.get("group"),f=u.getMatrix();f||(f=[1,0,0,0,1,0,0,0,1]),n=f[6],a=f[7]}this.focusPoint({x:n,y:a},t,r)}},i.prototype.focusItems=function(e,t,r,n){if(e.length){var a=this.graph,o=this.getFormatPadding(),s=a.get("width"),u=a.get("height"),f=a.get("group"),c=f.getMatrix()||[1,0,0,0,1,0,0,0,1];f.resetMatrix();for(var l={x:0,y:0,minX:Number.MAX_SAFE_INTEGER,minY:Number.MAX_SAFE_INTEGER,maxX:Number.MIN_SAFE_INTEGER,maxY:Number.MIN_SAFE_INTEGER,width:0,height:0},b=0,w=e;b<w.length;b++){var I=w[b],W=I.getBBox();W.minX<l.minX&&(l.minX=W.minX),W.minY<l.minY&&(l.minY=W.minY),W.maxX>l.maxX&&(l.maxX=W.maxX),W.maxY>l.maxY&&(l.maxY=W.maxY)}if(l.x=l.minX,l.y=l.minY,l.width=l.maxX-l.minX,l.height=l.maxY-l.minY,!(l.width===0||l.height===0)){var H=this.getViewCenter(),J={x:l.x+l.width/2,y:l.y+l.height/2},at=(s-o[1]-o[3])/l.width,ut=(u-o[0]-o[2])/l.height,lt=at;at>ut&&(lt=ut),r?this.animatedFitView(f,c,n,l,H,J,lt,t):(a.translate(H.x-J.x,H.y-J.y),t&&!a.zoom(lt,H)&&console.warn("zoom failed, ratio out of range, ratio: %f",lt))}}},i.prototype.changeSize=function(e,t){var r=this.graph;if(!(0,d.isNumber)(e)||!(0,d.isNumber)(t))throw Error("invalid canvas width & height, please make sure width & height type is number");r.set({width:e,height:t});var n=r.get("canvas");n.changeSize(e,t);var a=r.get("plugins");a.forEach(function(o){o.get("gridContainer")&&o.positionInit()})},i.prototype.destroy=function(){this.graph=null,this.destroyed=!1},i}(),my=yy;function zv(i){"@babel/helpers - typeof";return zv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zv(i)}function Zd(i){if(typeof i!="string")return i;var e=function(Rt){if(typeof Rt!="string")return Rt;try{return JSON.parse(Rt.trim())}catch(Qt){return Rt.trim()}},t=e(i);if(typeof t!="string")return t;for(var r=function(Rt){return Rt[Rt.length-1]},n=i.trim(),a=[],o=[],s=function(){for(var Rt=[],Qt=0;Qt<arguments.length;Qt++)Rt[Qt]=arguments[Qt];return Rt.some(function(de){return r(o)===de})},u=function(){return r(a)},f=null,c=0,l="";c<n.length;){var b=n[c],w=s('"',"'");if(!w&&!b.trim()){c+=1;continue}var I=n[c-1]==="\\",W=s("}"),H=s("]"),J=s(","),at=u();if(w)if(r(o)===b&&!I){o.pop();var ut=e(l);at.push(ut),f=ut,l=""}else l+=b;else if(H&&b===",")l&&(at.push(e(l)),l="");else if(W&&b===":")o.push(","),l&&(at.push(l),l="");else if(J&&b===",")l&&(at.push(e(l)),l=""),o.pop();else if(b==="}"&&(W||J)){l&&(at.push(e(l)),l=""),J&&o.pop();for(var lt={},_t=1;_t<at.length;_t+=2)lt[at[_t-1]]=at[_t];a.pop(),a.length&&r(a).push(lt),o.pop(),f=lt}else b==="]"&&H?(l&&(at.push(e(l)),l=""),a.pop(),a.length&&r(a).push(at),o.pop(),f=at):b==="{"?(a.push([]),o.push("}")):b==="["?(a.push([]),o.push("]")):b==='"'?o.push('"'):b==="'"?o.push("'"):l+=b;c+=1}return f||l}var xy=function(e){return e.split("-").reduce(function(t,r){return t+r.charAt(0).toUpperCase()+r.slice(1)})},by=function(e){return function(t){for(var r=e.length,n=[],a=0,o="";a<r;)if(e[a]==="{"&&e[a+1]==="{")n.push(o),o="",a+=2;else if(e[a]==="}"&&e[a+1]==="}"){if(n.length){var s=n.pop();o=(0,d.get)(t,o,s.endsWith("=")?'"{'.concat(o,'}"'):o),n.push(s+o)}a+=2,o=""}else o+=e[a],a+=1;return n.push(o),n.map(function(u,f){return n[f-1]&&n[f-1].endsWith("=")?'"{'.concat(u,'}"'):u}).join("")}};function $d(i,e){var t={},r=i.getAttributeNames&&i.getAttributeNames()||[],n=i.children&&Array.from(i.children).map(function(s){return $d(s,e)}),a={},o=i.tagName?i.tagName.toLowerCase():"group";return o==="text"&&(t.text=i.innerText),a.type=o,o==="img"&&(a.type="image"),Array.from(r).forEach(function(s){var u=xy(s),f=i.getAttribute(s);try{if(u==="style"||u==="attrs"){var c=Zd(f);t=(0,m.__assign)((0,m.__assign)({},t),c)}else a[u]=Zd(f)}catch(l){if(u==="style")throw l;a[u]=f}}),a.attrs=t,e&&e.style&&a.name&&zv(e.style[a.name])==="object"&&(a.attrs=(0,m.__assign)((0,m.__assign)({},a.attrs),e.style[a.name])),e&&e.style&&a.keyshape&&(a.attrs=(0,m.__assign)((0,m.__assign)({},a.attrs),e.style)),n.length&&(a.children=n),a}function Ey(i,e,t){var r=i.attrs,n=r===void 0?{}:r,a={x:e.x||0,y:e.y||0,width:t.width||0,height:t.height||0},o,s;switch(i.type){case"maker":case"circle":n.r&&(s=2*n.r,o=2*n.r);break;case"text":n.text&&(s=Xu(n.text,n.fontSize||12)[0],o=16,a.y+=o,a.height=o,a.width=s,i.attrs=(0,m.__assign)({fontSize:12,fill:"#000"},n));break;default:n.width&&(s=n.width),n.height&&(o=n.height)}return o>=0&&(a.height=o),s>=0&&(a.width=s),n.marginTop&&(a.y+=n.marginTop),n.marginLeft&&(a.x+=n.marginLeft),a}function qd(i,e){var t;e===void 0&&(e={x:0,y:0});var r=(0,m.__assign)({x:0,y:0,width:0,height:0},e);if(!((t=i.children)===null||t===void 0)&&t.length){var n=i.attrs,a=n===void 0?{}:n,o=a.marginTop,s=(0,m.__assign)({},e);o&&(s.y+=o);for(var u=0;u<i.children.length;u++){i.children[u].attrs.key="".concat(a.key||"root"," -").concat(u," ");var f=qd(i.children[u],s);if(f.bbox){var c=f.bbox;f.attrs.next==="inline"?s.x+=f.bbox.width:s.y+=f.bbox.height,c.width+c.x>r.width&&(r.width=c.width+c.x),c.height+c.y>r.height&&(r.height=c.height+c.y)}}}return i.bbox=Ey(i,e,r),i.attrs=(0,m.__assign)((0,m.__assign)({},i.attrs),i.bbox),i}function Qd(i,e){var t,r,n,a,o=(i||{}).type,s=((e==null?void 0:e.attrs)||{}).key;if(s&&i&&(i.attrs.key=s),!i&&e)return{action:"delete",val:e,type:o,key:s};if(i&&!e)return{action:"add",val:i,type:o};if(!i&&!e)return{action:"same",type:o};var u=[];if(((t=i.children)===null||t===void 0?void 0:t.length)>0||((r=e.children)===null||r===void 0?void 0:r.length)>0)for(var f=Math.max((n=i.children)===null||n===void 0?void 0:n.length,(a=e.children)===null||a===void 0?void 0:a.length),c=e.children||[],l=i.children||[],b=0;b<f;b+=1)u.push(Qd(l[b],c[b]));var w=Object.keys(e.attrs),I=Object.keys(i.attrs);return e.type!==i.type?{action:"restructure",nowTarget:i,formerTarget:e,key:s,children:u}:w.filter(function(W){return W!=="children"}).some(function(W){return i.attrs[W]!==e.attrs[W]||!I.includes(W)})?{action:"change",val:i,children:u,type:o,key:s}:{action:"same",children:u,type:o,key:s}}function Jd(i){var e={},t=function(n){var a=typeof i=="function"?i(n):i,o=by(a)(n),s=document.createElement("div");s.innerHTML=o;var u=s.children[0],f=qd($d(u,n));return s.remove(),f};return{draw:function(n,a){var o=t(n),s=a,u=function f(c){var l=c.attrs,b=l===void 0?{}:l,w=c.bbox,I=c.type,W=c.children,H=(0,m.__rest)(c,["attrs","bbox","type","children"]);if(c.type!=="group"){var J=a.addShape(c.type,(0,m.__assign)({attrs:b,origin:{bbox:w,type:I,children:W}},H));c.keyshape&&(s=J)}c.children&&c.children.forEach(function(at){return f(at)})};return u(o),e[n.id]=[o],s},update:function(n,a){e[n.id]||(e[n.id]=[]);var o=a.getContainer(),s=o.get("children"),u=t(n),f=e[n.id].pop(),c=Qd(u,f),l=function I(W){var H;W.type!=="group"&&o.addShape(W.type,{attrs:W.attrs}),!((H=W.children)===null||H===void 0)&&H.length&&W.children.map(function(J){return I(J)})},b=function I(W){var H,J=s.find(function(at){return at.attrs.key===W.attrs.key});J&&o.removeChild(J),!((H=W.children)===null||H===void 0)&&H.length&&W.children.map(function(at){return I(at)})},w=function I(W){var H=W.key;if(W.type!=="group"){var J=s.find(function(ut){return ut.attrs.key===H});switch(W.action){case"change":if(J){var at=W.val.keyshape?a.getOriginStyle():{};J.attr((0,m.__assign)((0,m.__assign)({},at),W.val.attrs))}break;case"add":l(W.val);break;case"delete":b(W.val);break;case"restructure":b(W.formerTarget),l(W.nowTarget);break;default:break}}W.children&&W.children.forEach(function(ut){return I(ut)})};w(c),e[n.id].push(u)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var Uv={};function tg(i){return Uv[i]||(Uv[i]=(0,d.upperFirst)(i)),Uv[i]}var wy={defaultShapeType:"defaultType",className:null,getShape:function(e){var t=this,r=t[e]||t[t.defaultShapeType]||t["simple-circle"];return r},draw:function(e,t,r){var n=this.getShape(e);r.shapeMap={};var a=n.draw(t,r);return n.afterDraw&&n.afterDraw(t,r,a),a},baseUpdate:function(e,t,r,n){var a,o,s=this.getShape(e);s.update&&(s.mergeStyle=(a=s.getOptions)===null||a===void 0?void 0:a.call(s,t,n),(o=s.update)===null||o===void 0||o.call(s,t,r,n)),s.afterUpdate&&s.afterUpdate(t,r)},setState:function(e,t,r,n){var a=this.getShape(e);a.setState(t,r,n)},shouldUpdate:function(e){var t=this.getShape(e);return!!t.update},getControlPoints:function(e,t){var r=this.getShape(e);return r.getControlPoints(t)},getAnchorPoints:function(e,t){var r=this.getShape(e);return r.getAnchorPoints(t)}},Wv={options:{},draw:function(e,t){return this.drawShape(e,t)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(e){return e.controlPoints},getAnchorPoints:function(e){var t=this.options.anchorPoints,r=e.anchorPoints||t;return r}},Zh=function(){function i(){}return i.registerFactory=function(e,t){var r=tg(e),n=wy,a=(0,m.__assign)((0,m.__assign)({},n),t);return i[r]=a,a.className=r,a},i.getFactory=function(e){var t=tg(e);return i[t]},i.registerNode=function(e,t,r){var n=i.Node,a;if(typeof t=="string"||typeof t=="function"){var o=Jd(t);a=(0,m.__assign)((0,m.__assign)({},n.getShape("single-node")),o)}else if(t.jsx){var s=t.jsx,o=Jd(s);a=(0,m.__assign)((0,m.__assign)((0,m.__assign)({},n.getShape("single-node")),o),t)}else{n.getShape(r);var u=r?n.getShape(r):Wv;a=(0,m.__assign)((0,m.__assign)({},u),t)}return a.type=e,a.itemType="node",n[e]=a,a},i.registerEdge=function(e,t,r){var n=i.Edge,a=r?n.getShape(r):Wv,o=(0,m.__assign)((0,m.__assign)({},a),t);return o.type=e,o.itemType="edge",n[e]=o,o},i.registerCombo=function(e,t,r){var n=i.Combo,a=r?n.getShape(r):Wv,o=(0,m.__assign)((0,m.__assign)({},a),t);return o.type=e,o.itemType="combo",n[e]=o,o},i}(),vs=Zh;Zh.registerFactory("node",{defaultShapeType:"circle"}),Zh.registerFactory("edge",{defaultShapeType:"line"}),Zh.registerFactory("combo",{defaultShapeType:"circle"});var Xv="bboxCache",Yv="bboxCanvasCache",D_=null,_y=function(){function i(e){this._cfg={},this.destroyed=!1,this.optimize=!1;var t={id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]};this._cfg=Object.assign(t,this.getDefaultCfg(),e);var r=this.get("model"),n=r.id,a=this.get("type");typeof n=="undefined"?n=Fv(a):typeof n!="string"&&(n=String(n)),this.get("model").id=n,this.set("id",n);var o=e.group;o&&(o.set("item",this),o.set("id",n)),this.init(),this.draw();var s=r.shape||r.type||(a==="edge"?"line":"circle"),u=this.get("shapeFactory");if(u&&u[s]){var f=u[s].options;if(f&&f.stateStyles){var c=this.get("styles")||r.stateStyles;c=(0,d.deepMix)({},f.stateStyles,c),this.set("styles",c)}}}return i.prototype.calculateBBox=function(){var e=this.get("keyShape"),t=this.get("group"),r=ai(e,t);return r.x=r.minX,r.y=r.minY,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,r},i.prototype.calculateCanvasBBox=function(){var e=this.get("keyShape"),t=this.get("group"),r=ai(e,t);return r.x=r.minX,r.y=r.minY,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,r},i.prototype.drawInner=function(){var e=this,t=e.get("shapeFactory"),r=e.get("group"),n=e.get("model");r.clear();var a=n.visible;if(a!==void 0&&!a&&e.changeVisibility(a),!!t){e.updatePosition(n);var o=e.getShapeCfg(n),s=o.type,u=t.draw(s,o,r);u&&(e.set("keyShape",u),u.set("isKeyShape",!0),u.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",s),this.restoreStates(t,s)}},i.prototype.setOriginStyle=function(){var e=this.get("group"),t=e.get("children"),r=this.getKeyShape(),n=this,a=r.get("name");if(this.get("originStyle")){var w=this.get("originStyle");a&&!w[a]&&(w[a]={});for(var I=this.getCurrentStatesStyle(),W=function(J){var at=t[J],ut=at.get("name"),lt=at.attr();if(ut&&ut!==a){var _t=I[ut];w[ut]||(w[ut]={}),_t?Object.keys(lt).forEach(function(Qt){var de=lt[Qt];de!==_t[Qt]&&(w[ut][Qt]=de)}):w[ut]=at.get("type")!=="image"?(0,d.clone)(lt):n.getShapeStyleByName(ut)}else{var Bt=at.attr(),Rt={};Object.keys(I).forEach(function(Qt){var de=I[Qt];(Qt===a||!(0,d.isPlainObject)(de))&&(Rt[Qt]=de)}),Object.keys(Bt).forEach(function(Qt){var de=Bt[Qt];Rt[Qt]!==de&&(a?w[a][Qt]=de:w[Qt]=de)})}},s=0;s<t.length;s++)W(s);delete w.path,delete w.matrix,delete w.x,delete w.y,w[a]&&(delete w[a].x,delete w[a].y,delete w[a].matrix,delete w[a].path),n.set("originStyle",w)}else{for(var o={},s=0;s<t.length;s++){var u=t[s],f=u.get("type"),c=u.get("name");if(c&&c!==a)o[c]=f!=="image"?(0,d.clone)(u.attr()):n.getShapeStyleByName(c),f==="text"&&o[c]&&(delete o[c].x,delete o[c].y,delete o[c].matrix);else{var l=n.getShapeStyleByName();if(delete l.path,delete l.matrix,!a)Object.assign(o,l);else if(c)o[a]=l;else{var b=Fv("shape");u.set("name",b),e.shapeMap[b]=u,o[b]=f!=="image"?(0,d.clone)(u.attr()):n.getShapeStyleByName(c)}}}n.set("originStyle",o)}},i.prototype.restoreStates=function(e,t){var r=this,n=r.get("states");(0,d.each)(n,function(a){e.setState(t,a,!0,r)})},i.prototype.init=function(){var e=vs.getFactory(this.get("type"));this.set("shapeFactory",e)},i.prototype.get=function(e){return this._cfg[e]},i.prototype.set=function(e,t){(0,d.isPlainObject)(e)?this._cfg=(0,m.__assign)((0,m.__assign)({},this._cfg),e):this._cfg[e]=t},i.prototype.getDefaultCfg=function(){return{}},i.prototype.clearCache=function(){this.set(Xv,null),this.set(Yv,null)},i.prototype.beforeDraw=function(){},i.prototype.afterDraw=function(){},i.prototype.afterUpdate=function(){},i.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},i.prototype.getShapeStyleByName=function(e){var t=this.get("group"),r;if(e?r=t.shapeMap[e]||t.find(function(a){return a.get("name")===e}):r=this.getKeyShape(),r){var n={};return(0,d.each)(r.attr(),function(a,o){(o!=="img"||(0,d.isString)(a))&&(n[o]=a)}),n}return{}},i.prototype.getShapeCfg=function(e,t){var r=this.get("styles");if(r){var n=e;return n.style=(0,m.__assign)((0,m.__assign)({},r),e.style),n}return e},i.prototype.getStateStyle=function(e){var t=this.get("styles"),r=t&&t[e];return r},i.prototype.getOriginStyle=function(){return this.get("originStyle")},i.prototype.getCurrentStatesStyle=function(){var e=this,t={},r=e.getStates();return!r||!r.length?this.get("originStyle"):((0,d.each)(e.getStates(),function(n){t=Object.assign(t,e.getStateStyle(n))}),t)},i.prototype.setState=function(e,t){var r=this.get("states"),n=this.get("shapeFactory"),a=e,o=e;(0,d.isString)(t)&&(a="".concat(e,":").concat(t),o="".concat(e,":"));var s=r;if((0,d.isBoolean)(t)){var u=r.indexOf(o);if(t){if(u>-1)return;r.push(a)}else u>-1&&r.splice(u,1)}else if((0,d.isString)(t)){var f=r.filter(function(b){return b.includes(o)});f.length>0&&this.clearStates(f),s=s.filter(function(b){return!b.includes(o)}),s.push(a),this.set("states",s)}if(n){var c=this.get("model"),l=c.type;n.setState(l,e,t,this)}},i.prototype.clearStates=function(e){var t=this,r=t.getStates(),n=t.get("shapeFactory"),a=t.get("model"),o=a.type;e||(e=r),(0,d.isString)(e)&&(e=[e]);var s=r.filter(function(u){return e.indexOf(u)===-1});t.set("states",s),e.forEach(function(u){n.setState(o,u,!1,t)})},i.prototype.setOptimize=function(e){this.optimize=e},i.prototype.getContainer=function(){return this.get("group")},i.prototype.getKeyShape=function(){return this.get("keyShape")},i.prototype.getModel=function(){return this.get("model")},i.prototype.getType=function(){return this.get("type")},i.prototype.getID=function(){return this.get("id")},i.prototype.isItem=function(){return!0},i.prototype.getStates=function(){return this.get("states")},i.prototype.hasState=function(e){var t=this.getStates();return t.indexOf(e)>=0},i.prototype.refresh=function(e){var t=this.get("model");this.updatePosition(t),this.updateShape(e),this.afterUpdate(),this.clearCache()},i.prototype.getUpdateType=function(e){},i.prototype.update=function(e,t){t===void 0&&(t=void 0);var r=this.get("model");if(t==="move")this.updatePosition(e);else{var n=r.visible,a=e.visible;n!==a&&a!==void 0&&this.changeVisibility(a);var o={x:r.x,y:r.y};e.x=isNaN(+e.x)?r.x:+e.x,e.y=isNaN(+e.y)?r.y:+e.y;var s=this.get("styles");if(e.stateStyles){var u=e.stateStyles;(0,d.mix)(s,u),delete e.stateStyles}Object.assign(r,e),(o.x!==e.x||o.y!==e.y)&&this.updatePosition(e),this.updateShape(t)}this.afterUpdate(),this.clearCache()},i.prototype.updateShape=function(e){var t=this.get("shapeFactory"),r=this.get("model"),n=r.type;if(t.shouldUpdate(n)&&n===this.get("currentShape")){var a=this.getShapeCfg(r,e);t.baseUpdate(n,a,this,e),e!=="move"&&this.setOriginStyle()}else this.draw();this.restoreStates(t,n)},i.prototype.updatePosition=function(e){var t=this.get("model"),r=isNaN(+e.x)?+t.x:+e.x,n=isNaN(+e.y)?+t.y:+e.y,a=this.get("group");if(isNaN(r)||isNaN(n))return!1;t.x=r,t.y=n;var o=a.getMatrix();return o&&o[6]===r&&o[7]===n?!1:(a.resetMatrix(),Jo(a,{x:r,y:n}),this.clearCache(),!0)},i.prototype.getBBox=function(){var e=this.get(Xv);return e||(e=this.calculateBBox(),this.set(Xv,e)),e},i.prototype.getCanvasBBox=function(){var e=this.get(Yv);return e||(e=this.calculateCanvasBBox(),this.set(Yv,e)),e},i.prototype.toFront=function(){var e=this.get("group");e.toFront()},i.prototype.toBack=function(){var e=this.get("group");e.toBack()},i.prototype.show=function(){this.changeVisibility(!0)},i.prototype.hide=function(){this.changeVisibility(!1)},i.prototype.changeVisibility=function(e){var t=this.get("group");e?t.show():t.hide(),this.set("visible",e)},i.prototype.isVisible=function(){return this.get("visible")},i.prototype.enableCapture=function(e){var t=this.get("group");t&&t.set("capture",e)},i.prototype.destroy=function(){if(!this.destroyed){var e=this.get("animate"),t=this.get("group");e&&t.stopAnimate(),t.shapeMap={},this.clearCache(),t.remove(),this._cfg=null,this.destroyed=!0}},i}(),eg=_y,$h={source:"start",target:"end"},Cf="Node",ch="Point",Sy="Anchor",My=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},e.prototype.setEnd=function(t,r){var n=$h[t]+ch,a=t+Cf,o=this.get(a);o&&!o.destroyed&&o.removeEdge(this),(0,d.isPlainObject)(r)?(this.set(n,r),this.set(a,null)):r&&(r.addEdge(this),this.set(a,r),this.set(n,null))},e.prototype.getLinkPoint=function(t,r,n){var a=$h[t]+ch,o=t+Cf,s=this.get(a);if(!s){var u=this.get(o),f=t+Sy,c=this.getPrePoint(t,n),l=r[f];(0,d.isNil)(l)||(s=u.getLinkPointByAnchor(l)),s=s||u.getLinkPoint(c),(0,d.isNil)(s.index)||this.set("".concat(t,"AnchorIndex"),s.index)}return s},e.prototype.getPrePoint=function(t,r){if(r&&r.length){var n=t==="source"?0:r.length-1;return r[n]}var a=t==="source"?"target":"source";return this.getEndPoint(a)},e.prototype.getEndPoint=function(t){var r=t+Cf,n=$h[t]+ch,a=this.get(r);return a&&!a.destroyed?a.get("model"):this.get(n)},e.prototype.getControlPointsByCenter=function(t){var r=this.getEndPoint("source"),n=this.getEndPoint("target"),a=this.get("shapeFactory"),o=t.type;return a.getControlPoints(o,{startPoint:r,endPoint:n})},e.prototype.getEndCenter=function(t){var r=t+Cf,n=$h[t]+ch,a=this.get(r);if(a){var o=a.getBBox();return{x:o.centerX,y:o.centerY}}return this.get(n)},e.prototype.init=function(){i.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},e.prototype.getShapeCfg=function(t,r){var n=this,a=n.get("linkCenter"),o=r!=null&&r.includes("move")?t:i.prototype.getShapeCfg.call(this,t);if(a)o.startPoint=n.getEndCenter("source"),o.endPoint=n.getEndCenter("target");else{var s=o.controlPoints||n.getControlPointsByCenter(o);o.startPoint=n.getLinkPoint("source",t,s),o.endPoint=n.getLinkPoint("target",t,s)}return o.sourceNode=n.get("sourceNode"),o.targetNode=n.get("targetNode"),o},e.prototype.getModel=function(){var t=this.get("model"),r=this.get("source".concat(Cf)),n=this.get("target".concat(Cf));return r?delete t["source".concat(Cf)]:t.source=this.get("start".concat(ch)),n?delete t["target".concat(Cf)]:t.target=this.get("end".concat(ch)),!(0,d.isString)(t.source)&&!(0,d.isPlainObject)(t.source)&&(t.source=t.source.getID()),!(0,d.isString)(t.target)&&!(0,d.isPlainObject)(t.target)&&(t.target=t.target.getID()),t},e.prototype.setSource=function(t){this.setEnd("source",t),this.set("source",t)},e.prototype.setTarget=function(t){this.setEnd("target",t),this.set("target",t)},e.prototype.getSource=function(){return this.get("source")},e.prototype.getTarget=function(){return this.get("target")},e.prototype.updatePosition=function(){return!1},e.prototype.update=function(t,r){r===void 0&&(r=void 0);var n=this.get("model"),a=n.visible,o=t.visible;a!==o&&o!==void 0&&this.changeVisibility(o);var s=this.get("source"),u=this.get("target");if(!(!s||s.destroyed||!u||u.destroyed)){var f=this.get("styles");if(t.stateStyles){var c=t.stateStyles;(0,d.mix)(f,c),delete t.stateStyles}Object.assign(n,t),this.updateShape(r),this.afterUpdate(),this.clearCache()}},e.prototype.destroy=function(){var t=this.get("source".concat(Cf)),r=this.get("target".concat(Cf));t&&!t.destroyed&&t.removeEdge(this),r&&!r.destroyed&&r.removeEdge(this),i.prototype.destroy.call(this)},e}(eg),rg=My,Vv="anchorPointsCache",Ay="bboxCache",Cy=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getNearestPoint=function(t,r){for(var n=0,a=t[0],o=Wo(t[0],r),s=0;s<t.length;s++){var u=t[s],f=Wo(u,r);f<o&&(a=u,o=f,n=s)}return a.anchorIndex=n,a},e.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getInEdges=function(){var t=this;return this.get("edges").filter(function(r){return r.get("target")===t})},e.prototype.getOutEdges=function(){var t=this;return this.get("edges").filter(function(r){return r.get("source")===t})},e.prototype.getNeighbors=function(t){var r=this,n=this.get("edges");if(t==="target"){var a=function(f){return f.getSource()===r};return n.filter(a).map(function(u){return u.getTarget()})}if(t==="source"){var o=function(f){return f.getTarget()===r};return n.filter(o).map(function(u){return u.getSource()})}var s=function(f){return f.getSource()===r?f.getTarget():f.getSource()};return n.map(s)},e.prototype.getLinkPointByAnchor=function(t){var r=this.getAnchorPoints();return r[t]},e.prototype.getLinkPoint=function(t){var r=this.get("keyShape"),n=r.get("type"),a=this.get("type"),o,s,u=this.getBBox();a==="combo"?(o=u.centerX||(u.maxX+u.minX)/2,s=u.centerY||(u.maxY+u.minY)/2):(o=u.centerX,s=u.centerY);var f=this.getAnchorPoints(),c;switch(n){case"circle":c=eo({x:o,y:s,r:u.width/2},t);break;case"ellipse":c=ro({x:o,y:s,rx:u.width/2,ry:u.height/2},t);break;default:c=ps(u,t)}var l=c;return f.length&&(l||(l=t),l=this.getNearestPoint(f,l)),l||(l={x:o,y:s}),l},e.prototype.getAnchorPoints=function(){var t=this.get(Vv);if(!t){t=[];var r=this.get("shapeFactory"),n=this.getBBox(),a=this.get("model"),o=this.getShapeCfg(a),s=a.type,u=r.getAnchorPoints(s,o)||[];(0,d.each)(u,function(f,c){var l={x:n.minX+f[0]*n.width,y:n.minY+f[1]*n.height,anchorIndex:c};t.push(l)}),this.set(Vv,t)}return t},e.prototype.addEdge=function(t){this.get("edges").push(t)},e.prototype.lock=function(){this.set("locked",!0)},e.prototype.unlock=function(){this.set("locked",!1)},e.prototype.hasLocked=function(){return this.get("locked")},e.prototype.removeEdge=function(t){var r=this.getEdges(),n=r.indexOf(t);n>-1&&r.splice(n,1)},e.prototype.clearCache=function(){this.set(Ay,null),this.set(Vv,null)},e.prototype.getUpdateType=function(t){var r,n,a,o,s;if(t){var u=!(0,d.isNil)(t.x),f=!(0,d.isNil)(t.y),c=Object.keys(t);if(c.length===1&&(u||f)||c.length===2&&u&&f)return"move";if((0,d.isNumber)(t.x)||(0,d.isNumber)(t.y)||t.type||t.anchorPoints||t.size||t!=null&&t.style&&(!((r=t==null?void 0:t.style)===null||r===void 0)&&r.r||!((n=t==null?void 0:t.style)===null||n===void 0)&&n.width||!((a=t==null?void 0:t.style)===null||a===void 0)&&a.height||!((o=t==null?void 0:t.style)===null||o===void 0)&&o.rx||!((s=t==null?void 0:t.style)===null||s===void 0)&&s.ry))return"bbox|label";var l=c.includes("label")||c.includes("labelCfg");return l?"style|label":"style"}},e.prototype.setState=function(t,r){var n=this;if(this.optimize){i.prototype.setState.call(this,t,r);return}this.runWithBBoxAffected(function(){return i.prototype.setState.call(n,t,r)})},e.prototype.clearStates=function(t){var r=this;if(this.optimize){i.prototype.clearStates.call(this,t);return}this.runWithBBoxAffected(function(){return i.prototype.clearStates.call(r,t)})},e.prototype.runWithBBoxAffected=function(t){var r=["r","width","height","rx","ry","lineWidth"],n=this.getKeyShape().attr(),a={};Object.keys(this.getKeyShape().attr()).forEach(function(f){r.includes(f)&&(a[f]=n[f])}),t();for(var o=this.getKeyShape().attr(),s=0;s<r.length;s++){var u=r[s];if(o[u]!==a[u]){this.clearCache(),this.getEdges().forEach(function(f){return f.refresh()});break}}},e}(eg),jv=Cy,ng="bboxCache",ag="bboxCanvasCache",qh="sizeCache",ig="anchorPointsCache",Ty=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},e.prototype.getShapeCfg=function(t){var r=this.get("styles"),n=this.get("bbox");if(r&&n){var a=t,o=(0,d.isNumber)(t.size)?[t.size,t.size]:t.size,s=(0,d.isNumber)(t.fixSize)?[t.fixSize,t.fixSize]:t.fixSize,u=o||s||jt.defaultCombo.size,f={r:(Math.max(n.width,n.height)||Math.max(u[0],u[1]))/2,width:n.width||u[0],height:n.height||u[1]};a.style=(0,m.__assign)((0,m.__assign)((0,m.__assign)({},r),t.style),f);var c=t.padding||jt.defaultCombo.padding;return(0,d.isNumber)(c)?(f.r+=c,f.width+=c*2,f.height+=c*2):(f.r=f.r+Math.max.apply(Math,c),f.width+=c[1]+c[3]||c[1]*2,f.height+=c[0]+c[2]||c[0]*2),this.set(qh,f),a}return t},e.prototype.calculateCanvasBBox=function(){if(!this.destroyed){var t=this.get("keyShape"),r=this.get("group"),n=this.get(ng)||{},a=n.x,o=n.x,s=this.get(qh),u=ai(t,r);if(u.centerX=(u.minX+u.maxX)/2,u.centerY=(u.minY+u.maxY)/2,s){s.width=Math.max(s.width,u.width),s.height=Math.max(s.height,u.height),this.set(qh,s);var f=t.get("type");f==="circle"?(u.width=s.r*2,u.height=s.r*2):(u.width=s.width,u.height=s.height),u.minX=u.centerX-u.width/2,u.minY=u.centerY-u.height/2,u.maxX=u.centerX+u.width/2,u.maxY=u.centerY+u.height/2}else u.width=u.maxX-u.minX,u.height=u.maxY-u.minY,u.centerX=(u.minX+u.maxX)/2,u.centerY=(u.minY+u.maxY)/2;return u.x=u.minX,u.y=u.minY,(u.x!==a||u.y!==o)&&this.set(ig,null),u}},e.prototype.getChildren=function(){var t=this;return{nodes:t.getNodes(),combos:t.getCombos()}},e.prototype.getNodes=function(){var t=this;return t.get("nodes")},e.prototype.getCombos=function(){var t=this;return t.get("combos")},e.prototype.addChild=function(t){var r=this,n=t.getType();switch(n){case"node":r.addNode(t);break;case"combo":r.addCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.addCombo=function(t){var r=this;return r.get("combos").push(t),!0},e.prototype.addNode=function(t){var r=this;return r.get("nodes").push(t),!0},e.prototype.removeChild=function(t){var r=this,n=t.getType();switch(n){case"node":r.removeNode(t);break;case"combo":r.removeCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.removeCombo=function(t){if(t){var r=this.getCombos(),n=r.indexOf(t);return n>-1?(r.splice(n,1),!0):!1}},e.prototype.removeNode=function(t){if(t){var r=this.getNodes(),n=r.indexOf(t);return n>-1?(r.splice(n,1),!0):!1}},e.prototype.getUpdateType=function(t){},e.prototype.getBBox=function(){this.set(ag,null);var t=this.calculateCanvasBBox();return t},e.prototype.clearCache=function(){this.set(ng,null),this.set(ag,null),this.set(ig,null)},e.prototype.destroy=function(){if(!this.destroyed){var t=this.get("animate"),r=this.get("group");t&&r.stopAnimate(),r.shapeMap={},this.clearCache(),this.set(qh,null),this.set("bbox",null),r.remove(),this._cfg=null,this.destroyed=!0}},e}(jv),og=Ty,Qh="node",Jh="edge",sg="vedge",Sh="combo",Iy="default",ug="Mapper",fc="stateStyles",Oy=function(){function i(e){var t=this;this.edgeToBeUpdateMap={},this.throttleRefresh=(0,d.throttle)(function(r){var n=t.graph;if(!(!n||n.get("destroyed"))){var a=t.edgeToBeUpdateMap;if(a){var o=Object.values(a);o.length&&(o.forEach(function(s){var u=s.edge;if(!(!u||u.destroyed)){var f=u.getSource(),c=u.getTarget();!f||f.destroyed||!c||c.destroyed||u.refresh(s.updateType)}}),t.edgeToBeUpdateMap={})}}},16,{trailing:!0,leading:!0}),this.graph=e,this.destroyed=!1}return i.prototype.addItem=function(e,t){var r=this.graph,n=e===sg?Jh:e,a=r.get("".concat(n,"Group"))||r.get("group"),o=(0,d.upperFirst)(n),s=null,u=r.get(n+(0,d.upperFirst)(fc))||{},f=r.get(Iy+o);t[fc]&&(u=t[fc]),f&&(0,d.each)(f,function(Bt,Rt){(0,d.isObject)(Bt)&&!(0,d.isArray)(Bt)?t[Rt]=(0,d.deepMix)({},Bt,t[Rt]):(0,d.isArray)(Bt)?t[Rt]=t[Rt]||(0,d.clone)(f[Rt]):t[Rt]=t[Rt]||f[Rt]});var c=r.get(n+ug);if(c){var l=c(t);l[fc]&&(u=l[fc],delete l[fc]),(0,d.each)(l,function(Bt,Rt){(0,d.isObject)(Bt)&&!(0,d.isArray)(Bt)?t[Rt]=(0,d.deepMix)({},t[Rt],Bt):t[Rt]=l[Rt]||t[Rt]})}if(r.emit("beforeadditem",{type:e,model:t}),e===Jh||e===sg){var b=void 0,w=void 0;if(b=t.source,w=t.target,b&&(0,d.isString)(b)&&(b=r.findById(b)),w&&(0,d.isString)(w)&&(w=r.findById(w)),!b||!w){console.warn("The source or target node of edge ".concat(t.id," does not exist!"));return}b.getType&&b.getType()==="combo"&&(t.isComboEdge=!0),w.getType&&w.getType()==="combo"&&(t.isComboEdge=!0),s=new rg({model:t,source:b,target:w,styles:u,linkCenter:r.get("linkCenter"),group:a.addGroup()})}else if(e===Qh)s=new jv({model:t,styles:u,group:a.addGroup()});else if(e===Sh){var I=t.children,W=fu(I,r),H=void 0,J=void 0;if(isNaN(W.x)?isNaN(t.x)&&(H=Math.random()*100):H=W.x,isNaN(W.y)?isNaN(t.y)&&(J=Math.random()*100):J=W.y,isNaN(t.x)||isNaN(t.y))t.x=H,t.y=J;else{var at=t.x-H,ut=t.y-J;this.updateComboSucceeds(t.id,at,ut,I)}var lt=a.addGroup();lt.setZIndex(t.depth),s=new og({model:t,styles:u,animate:r.get("animate"),bbox:t.collapsed?fu([],r):W,group:lt}),!t.collapsed&&s.getKeyShape().get("type")==="circle"&&(W.width=Math.hypot(W.height,W.width),W.height=W.width,s.set("bbox",W),s.refresh());var _t=s.getModel();(I||[]).forEach(function(Bt){var Rt=r.findById(Bt.id);s.addChild(Rt),Bt.depth=_t.depth+2})}if(s)return s.setOptimize(r.getNodes().length>r.get("optimizeThreshold")),r.get("".concat(e,"s")).push(s),r.get("itemMap")[s.get("id")]=s,r.emit("afteradditem",{item:s,model:t}),s},i.prototype.updateItem=function(e,t){var r=this,n,a,o=this.graph;if((0,d.isString)(e)&&(e=o.findById(e)),!(!e||e.destroyed)){var s="";e.getType&&(s=e.getType());var u=o.get(s+ug),f=e.getModel(),c=f.x,l=f.y,b=e.getUpdateType(t);if(u){var w=(0,d.deepMix)({},f,t),I=u(w),W=(0,d.deepMix)({},f,I,t);I[fc]&&(e.set("styles",W[fc]),delete W[fc]),(0,d.each)(W,function(se,Te){t[Te]=se})}else(0,d.each)(t,function(se,Te){f[Te]&&(0,d.isObject)(se)&&!(0,d.isArray)(se)&&(t[Te]=(0,m.__assign)((0,m.__assign)({},f[Te]),t[Te]))});if(o.emit("beforeupdateitem",{item:e,cfg:t}),s===Jh){if(t.source){var H=t.source;(0,d.isString)(H)&&(H=o.findById(H)),e.setSource(H)}if(t.target){var J=t.target;(0,d.isString)(J)&&(J=o.findById(J)),e.setTarget(J)}e.update(t)}else if(s===Qh){e.update(t,b);var at=e.getEdges();b==="move"?(0,d.each)(at,function(se){r.edgeToBeUpdateMap[se.getID()]={edge:se,updateType:b},r.throttleRefresh()}):b!=null&&b.includes("bbox")&&(0,d.each)(at,function(se){se.refresh(b)})}else if(s===Sh){if(e.update(t,b),!isNaN(t.x)||!isNaN(t.y)){var ut=t.x-c||0,lt=t.y-l||0;this.updateComboSucceeds(f.id,ut,lt)}var _t=e.getEdges(),Bt=(b==null?void 0:b.includes("bbox"))||b==="move";if(Bt&&s===Sh){var Rt=e.get("shapeFactory"),Qt=f.type||"circle",de=f.animate===void 0||t.animate===void 0?(a=(n=Rt[Qt])===null||n===void 0?void 0:n.options)===null||a===void 0?void 0:a.animate:f.animate||t.animate;de?setTimeout(function(){if(!(!e||e.destroyed)){var se=e.getKeyShape();!se||se.destroyed||(0,d.each)(_t,function(Te){Te&&!Te.destroyed&&Te.refresh()})}},201):(0,d.each)(_t,function(se){se.refresh()})}}e.setOptimize(o.getNodes().length>o.get("optimizeThreshold")),o.emit("afterupdateitem",{item:e,cfg:t})}},i.prototype.updateCombo=function(e,t,r){var n=this,a,o,s=this.graph;if((0,d.isString)(e)&&(e=s.findById(e)),!(!e||e.destroyed)){var u=e.getModel(),f=fu(t,s,e),c=f.x,l=f.y;e.set("bbox",f);var b=c,w=l;r?(b=isNaN(u.x)?c:u.x,w=isNaN(u.y)?l:u.y):(b=isNaN(c)?u.x:c,w=isNaN(l)?u.y:l),e.update({x:b,y:w});var I=e.get("shapeFactory"),W=u.type||"circle",H=u.animate===void 0?(o=(a=I[W])===null||a===void 0?void 0:a.options)===null||o===void 0?void 0:o.animate:u.animate;H?setTimeout(function(){if(!(!e||e.destroyed)){var J=e.getKeyShape();!J||J.destroyed||(e.getShapeCfg(u),n.updateComboEdges(e))}},201):this.updateComboEdges(e)}},i.prototype.updateComboEdges=function(e){for(var t,r,n=e.getEdges()||[],a=0;a<n.length;a++){var o=n[a];!(o!=null&&o.destroyed)&&!(!((t=o==null?void 0:o.getSource())===null||t===void 0)&&t.destroyed)&&!(!((r=o==null?void 0:o.getTarget())===null||r===void 0)&&r.destroyed)&&o.refresh()}},i.prototype.collapseCombo=function(e,t){t===void 0&&(t=!0);var r=this.graph;(0,d.isString)(e)&&(e=r.findById(e));var n=e.getChildren();n.nodes.forEach(function(a){r.hideItem(a,t)}),n.combos.forEach(function(a){r.hideItem(a,t)})},i.prototype.updateComboSucceeds=function(e,t,r,n){var a=this;n===void 0&&(n=[]);var o=this.graph;if(!(!t&&!r)){var s=n;if(!(s!=null&&s.length)){var u=o.get("comboTrees");u==null||u.forEach(function(f){Ri(f,function(c){return c.id===e?(s=c.children,!1):!0})})}s==null||s.forEach(function(f){var c=o.findById(f.id);if(c){var l=c.getModel();a.updateItem(f.id,{x:(l.x||0)+t,y:(l.y||0)+r})}})}},i.prototype.expandCombo=function(e,t){t===void 0&&(t=!0);var r=this.graph;(0,d.isString)(e)&&(e=r.findById(e));var n=e.getChildren(),a=new Set;n.nodes.forEach(function(o){r.showItem(o,t),o.getEdges().forEach(function(s){return a.add(s)})}),n.combos.forEach(function(o){o.getModel().collapsed?o.show():r.showItem(o,t),o.getEdges().forEach(function(s){return a.add(s)})}),a.forEach(function(o){return o.refresh()})},i.prototype.removeItem=function(e){var t=this,r=this.graph;if((0,d.isString)(e)&&(e=r.findById(e)),!(!e||e.destroyed)){var n=(0,d.clone)(e.getModel()),a="";e.getType&&(a=e.getType()),r.emit("beforeremoveitem",{item:n,type:a});var o=r.get("".concat(a,"s")),s=o.indexOf(e);if(s>-1&&o.splice(s,1),a===Jh){var u=r.get("v".concat(a,"s")),f=u.indexOf(e);f>-1&&u.splice(f,1)}var c=e.get("id"),l=r.get("itemMap");delete l[c];var b=r.get("comboTrees"),w=e.get("id");if(a===Qh){var I=e.getModel().comboId;if(b&&I){var W=b,H=!1;b.forEach(function(Bt){H||Ri(Bt,function(Rt){if(Rt.id===w&&W){var Qt=W.indexOf(Rt);return W.splice(Qt,1),H=!0,!1}return W=Rt.children,!0})})}for(var J=e.getEdges(),at=J.length-1;at>=0;at--)r.removeItem(J[at],!1);I&&r.updateCombo(I)}else if(a===Sh){var ut=e.getModel().parentId,lt,_t=!1;(b||[]).forEach(function(Rt){_t||Ri(Rt,function(Qt){return Qt.id===w?(lt=Qt,_t=!0,!1):!0})}),lt.removed=!0,lt&&lt.children&&lt.children.forEach(function(Rt){t.removeItem(Rt.id)});for(var J=e.getEdges(),at=J.length;at>=0;at--)r.removeItem(J[at],!1);ut&&r.updateCombo(ut)}e.destroy(),r.emit("afterremoveitem",{item:n,type:a})}},i.prototype.setItemState=function(e,t,r){var n=this.graph,a=t;(0,d.isString)(r)&&(a="".concat(t,":").concat(r)),!(e.hasState(a)===r&&r||(0,d.isString)(r)&&e.hasState(a))&&(n.emit("beforeitemstatechange",{item:e,state:a,enabled:r}),e.setState(t,r),n.autoPaint(),n.emit("afteritemstatechange",{item:e,state:a,enabled:r}))},i.prototype.priorityState=function(e,t){var r=this.graph,n=e;(0,d.isString)(e)&&(n=r.findById(e)),this.setItemState(n,t,!1),this.setItemState(n,t,!0)},i.prototype.clearItemStates=function(e,t){var r=this.graph;(0,d.isString)(e)&&(e=r.findById(e)),r.emit("beforeitemstatesclear",{item:e,states:t}),e.clearStates(t),r.emit("afteritemstatesclear",{item:e,states:t})},i.prototype.refreshItem=function(e){var t=this.graph;(0,d.isString)(e)&&(e=t.findById(e)),t.emit("beforeitemrefresh",{item:e}),e.refresh(),t.emit("afteritemrefresh",{item:e})},i.prototype.addCombos=function(e,t){var r=this,n=this.graph;(e||[]).forEach(function(o){vo(o,function(s){var u;return t.forEach(function(f){f.id===s.id&&(f.children=s.children,f.depth=s.depth,u=f)}),u&&r.addItem("combo",u),!0})});var a=n.get("comboGroup");a&&a.sort()},i.prototype.changeItemVisibility=function(e,t){var r=this,n=this.graph;if((0,d.isString)(e)&&(e=n.findById(e)),!e){console.warn("The item to be shown or hidden does not exist!");return}if(n.emit("beforeitemvisibilitychange",{item:e,visible:t}),e.changeVisibility(t),e.getType&&e.getType()===Qh){var a=e.getEdges();(0,d.each)(a,function(c){t&&!(c.get("source").isVisible()&&c.get("target").isVisible())||r.changeItemVisibility(c,t)})}else if(e.getType&&e.getType()===Sh){var o=n.get("comboTrees"),s=e.get("id"),u=[],f=!1;(o||[]).forEach(function(l){f||!l.children||l.children.length===0||Ri(l,function(b){return b.id===s?(u=b.children,f=!0,!1):!0})}),u&&(!t||t&&!e.getModel().collapsed)&&u.forEach(function(l){var b=n.findById(l.id);r.changeItemVisibility(b,t)});var a=e.getEdges();(0,d.each)(a,function(l){t&&!(l.get("source").isVisible()&&l.get("target").isVisible())||r.changeItemVisibility(l,t)})}return n.emit("afteritemvisibilitychange",{item:e,visible:t}),e},i.prototype.destroy=function(){this.graph=null,this.destroyed=!0},i}(),Ly=Oy,Dy=function(){function i(e){this.graph=e,this.destroyed=!1}return i.prototype.updateState=function(e,t,r){var n=this.graph.get("states"),a=t;(0,d.isString)(r)&&(a="".concat(t,":").concat(r)),n[a]||(n[a]=[]),r?n[a].push(e):n[a]=n[a].filter(function(o){return o!==e}),this.graph.set("states",n),this.graph.emit("graphstatechange",{states:n})},i.prototype.updateStates=function(e,t,r){var n=this.graph.get("states"),a=(0,d.isString)(t)?[t]:t;a.forEach(function(o){var s=o;n[s]||(n[s]=[]),(0,d.isString)(r)&&(s="".concat(o,":").concat(r)),r?n[s].push(e):n[s]=n[s].filter(function(u){return u!==e})}),this.graph.set("states",n),this.graph.emit("graphstatechange",{states:t})},i.prototype.destroy=function(){this.graph=null,this.destroyed=!0},i}(),Ny=Dy,Py=function(e,t){return!e||!t?e:e.replace(/\\?\{([^{}]+)\}/g,function(r,n){if(r.charAt(0)==="\\")return r.slice(1);var a=t[n];return a===0&&(a="0"),a||""})},fg=function(e){var t=[];if(e.length<2)throw new Error("point length must largn than 2, now it's ".concat(e.length));for(var r=0,n=e;r<n.length;r++){var a=n[r],o=a.x,s=a.y;t.push(o),t.push(s)}var u=fr(t);return u.unshift(["M",e[0].x,e[0].y]),u},tv=function(e,t,r,n){r===void 0&&(r=0),n===void 0&&(n=0);var a={x:(1-r)*e.x+r*t.x,y:(1-r)*e.y+r*t.y},o=[0,0];zn.normalize(o,[t.x-e.x,t.y-e.y]),(!o||!o[0]&&!o[1])&&(o=[0,0]);var s=[-o[1]*n,o[0]*n];return a.x+=s[0],a.y+=s[1],a},ky=function(e,t){var r=e.length;if(!r)return"";for(var n="",a="",o=0;o<r;o++){var s=e[o];o===0?a="M{x} {y}":a="L{x} {y}",n+=Py(a,s)}return t&&(n+="Z"),n},Hv=function(e){var t=[];return e.forEach(function(r){var n=r[0];if(n!=="A")for(var a=1;a<r.length;a=a+2)t.push([r[a],r[a+1]]);else{var o=r.length;t.push([r[o-2],r[o-1]])}}),t},Kv=function(e){if(e.length<2)throw new Error("point length must largn than 2, now it's ".concat(e.length));var t=e[0],r=e[1],n=e[e.length-1],a=e[e.length-2];e.unshift(n),e.unshift(a),e.push(t),e.push(r);for(var o=[],s=1;s<e.length-2;s+=1){var u=e[s-1].x,f=e[s-1].y,c=e[s].x,l=e[s].y,b=e[s+1].x,w=e[s+1].y,I=s!==e.length-2?e[s+2].x:b,W=s!==e.length-2?e[s+2].y:w,H=c+(b-u)/6,J=l+(w-f)/6,at=b-(I-c)/6,ut=w-(W-l)/6;o.push(["C",H,J,at,ut,b,w])}return o.unshift(["M",n.x,n.y]),o},cg=function(e,t){return zn.scale([0,0],zn.normalize([0,0],e),t)},lg=function(e,t){var r=[e[1]-t[1],t[0]-e[0]],n=Math.sqrt(r[0]*r[0]+r[1]*r[1]);if(n===0)throw new Error("p0 should not be equal to p1");return[r[0]/n,r[1]/n]},hg=function(e,t){return[t[0]-e[0],t[1]-e[1]]};function Zv(i,e){var t=function(l){var b=[l[0][0],l[0][1]-e],w=[l[0][0],l[0][1]+e];return"M ".concat(b," A ").concat(e,",").concat(e,",0,0,0,").concat(w," A ").concat(e,",").concat(e,",0,0,0,").concat(b)},r=function(l){var b=zn.scale([0,0],lg(l[0],l[1]),e),w=zn.scale([0,0],b,-1),I=zn.add([0,0],l[0],b),W=zn.add([0,0],l[1],b),H=zn.add([0,0],l[1],w),J=zn.add([0,0],l[0],w);return"M ".concat(I," L ").concat(W," A ").concat([e,e,"0,0,0",H].join(",")," L ").concat(J," A ").concat([e,e,"0,0,0",I].join(","))};if(!i||i.length<1)return"";if(i.length===1)return t(i);if(i.length===2)return r(i);for(var n=new Array(i.length),a=0;a<n.length;++a){var o=a===0?i[i.length-1]:i[a-1],s=i[a],u=zn.scale([0,0],lg(o,s),e);n[a]=[zn.add([0,0],o,u),zn.add([0,0],s,u)]}var f="A ".concat([e,e,"0,0,0,"].join(","));return n=n.map(function(c,l){var b="";return l===0&&(b="M ".concat(n[n.length-1][1]," ")),b+="".concat(f+c[0]," L ").concat(c[1]),b}),n.join(" ")}function vg(i,e){var t=i.length,r=function(c){var l=[c[0][0],c[0][1]-e],b=[c[0][0],c[0][1]+e];return"M ".concat(l," A ").concat([e,e,"0,0,0",b].join(",")," A ").concat([e,e,"0,0,0",l].join(","))},n=function(c){var l=hg(c[0],c[1]),b=cg(l,e),w=zn.add([0,0],c[0],zn.scale([0,0],b,-1)),I=zn.add([0,0],c[1],b),W=1.2*e,H=cg(zn.normalize([0,0],l),W),J=zn.scale([0,0],H,-1),at=zn.add([0,0],w,J),ut=zn.add([0,0],I,J),lt=zn.add([0,0],w,H);return"M ".concat(w," C ").concat([at,ut,I].join(",")," S ").concat([lt,w].join(",")," Z")};if(!i||t<1)return"";if(t===1)return r(i);if(t===2)return n(i);for(var a=i.map(function(f,c){var l=i[(c+1)%t];return{p:f,v:zn.normalize([0,0],hg(f,l))}}),o=0;o<a.length;++o){var s=o>0?o-1:t-1,u=zn.normalize([0,0],zn.add([0,0],a[s].v,zn.scale([0,0],a[o].v,-1)));a[o].p=zn.add([0,0],a[o].p,zn.scale([0,0],u,e))}return a.map(function(f){var c=f.p;return{x:c[0],y:c[1]}})}var Ry=function(e,t){for(var r=[],n=0;n<5;n++){var a=Math.cos((18+72*n)/180*Math.PI)*e,o=Math.sin((18+72*n)/180*Math.PI)*e,s=Math.cos((54+72*n)/180*Math.PI)*t,u=Math.sin((54+72*n)/180*Math.PI)*t;n===0?r.push(["M",a,-o]):r.push(["L",a,-o]),r.push(["L",s,-u])}return r.push(["Z"]),r},dg=function(e,t,r){return(e.y-r.y)*(t.x-r.x)-(e.x-r.x)*(t.y-r.y)},gg=function(e){var t=e.map(function(l){return{x:l.getModel().x,y:l.getModel().y}});t.sort(function(l,b){return l.x===b.x?l.y-b.y:l.x-b.x});for(var r={},n=t.length-1;n>=0;n--){var a=t[n],o=a.x,s=a.y;r["".concat(o,"-").concat(s)]&&t.splice(n,1),r["".concat(o,"-").concat(s)]=!0}if(t.length===1)return t;for(var u=[],n=0;n<t.length;n++){for(;u.length>=2&&dg(u[u.length-2],u[u.length-1],t[n])<=0;)u.pop();u.push(t[n])}for(var f=[],n=t.length-1;n>=0;n--){for(;f.length>=2&&dg(f[f.length-2],f[f.length-1],t[n])<=0;)f.pop();f.push(t[n])}f.pop(),u.pop();var c=u.concat(f);return c},By={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function Fy(i,e,t){var r=!1,n=function(u,f){return e.cells[u+f*e.width]},a=function(u,f){var c=0;return n(u-1,f-1)>=t&&(c+=1),n(u,f-1)>t&&(c+=2),n(u-1,f)>t&&(c+=4),n(u,f)>t&&(c+=8),c},o=function(u,f){for(var c=u,l=f,b,w,I=0;I<e.width*e.height;I++){if(b=c,w=l,i.findIndex(function(H){return H.x===c&&H.y===l})>-1){if(!(i[0].x!==c||i[0].y!==l))return!0}else i.push({x:c,y:l});var W=a(c,l);switch(W){case-1:return console.warn("Marched out of bounds"),!0;case 0:case 3:case 2:case 7:c++;break;case 12:case 14:case 4:c--;break;case 6:b===0&&(w===-1?c-=1:c+=1);break;case 1:case 13:case 5:l--;break;case 9:b===1&&(w===0?l-=1:l+=1);break;case 10:case 8:case 11:l++;break;default:return console.warn("Marching squares invalid state: ".concat(W)),!0}}};this.march=function(){for(var s=0;s<e.width&&!r;s+=1)for(var u=0;u<e.height&&!r;u+=1)n(s,u)>t&&a(s,u)!==15&&(r=o(s,u));return r}}var Gy=function(e,t,r){var n=Math.ceil(e/r),a=Math.ceil(t/r),o=new Float32Array(Math.max(0,n*a)).fill(0);return{cells:o,width:n,height:a}},zy=function(e,t,r){var n=null,a=Number.POSITIVE_INFINITY;return t.forEach(function(o){var s={x:e.getModel().x,y:e.getModel().y},u={x:o.getModel().x,y:o.getModel().y},f=wo(s,u),c=new ja(s.x,s.y,u.x,u.y),l=r.reduce(function(b,w){return Ki(w,c)>0?b+1:b},0);f*Math.pow(l+1,2)<a&&(n=o,a=f*Math.pow(l+1,2))}),n},pg=function(e,t){var r=Number.POSITIVE_INFINITY,n=null;return e.forEach(function(a){var o=Ki(a,t);o>=0&&o<r&&(n=a,r=o)}),n},Uy=function(e,t,r,n){var a=[],o=[];o.push(e);for(var s=!0,u=0,f=function(w,I){var W=!1;return I.forEach(function(H){W||(lo(w,{x:H.x1,y:H.y1})||lo(w,{x:H.x2,y:H.y2}))&&(W=!0)}),W},c=function(w,I){for(var W=0,H=I;W<H.length;W++){var J=H[W],at=J.getBBox(),ut=[[at.x,at.y],[at.x+at.width,at.y],[at.x,at.y+at.height],[at.x+at.width,at.y+at.height]];if(Eo(ut,w.x,w.y))return!0}return!1};s&&u<r;){s=!1;for(var l=function(){var w=o.pop(),I=pg(t,w);if(I){var W=ki(I,w),H=W[0],J=W[1];if(J===2){var at=function(lt){for(var _t=n,Bt=yg(I,_t,H,lt),Rt=f(Bt,o)||f(Bt,a),Qt=c(Bt,t);!Rt&&Qt&&_t>=1;)_t/=1.5,Bt=yg(I,_t,H,lt),Rt=f(Bt,o)||f(Bt,a),Qt=c(Bt,t);Bt&&!Rt&&(!lt||!Qt)&&(o.push(new ja(w.x1,w.y1,Bt.x,Bt.y)),o.push(new ja(Bt.x,Bt.y,w.x2,w.y2)),s=!0)};at(!0),s||at(!1)}}s||a.push(w),u+=1};!s&&o.length;)l()}for(;o.length;)a.push(o.pop());return a};function Wy(i,e,t,r,n){var a=zy(i,t,e);if(a===null)return[];var o=function(l){for(var b=[];l.length>0;){var w=l.pop();if(l.length===0){b.push(w);break}var I=l.pop(),W=new ja(w.x1,w.y1,I.x2,I.y2),H=pg(e,W);H?(b.push(w),l.push(I)):l.push(W)}return b},s=new ja(i.getModel().x,i.getModel().y,a.getModel().x,a.getModel().y),u=Uy(s,e,r,n),f=o(u);return f}var Xy=function(e,t,r){var n=Object.assign(By,r),a=Yo(e.map(function(at){return{x:at.getModel().x,y:at.getModel().y}}));e=e.sort(function(at,ut){return wo({x:at.getModel().x,y:at.getModel().y},a)-wo({x:ut.getModel().x,y:ut.getModel().y},a)});var o=[],s=[];e.forEach(function(at){var ut=Wy(at,t,o,n.maxRoutingIterations,n.morphBuffer);ut.forEach(function(lt){s.push(lt)}),o.push(at)});for(var u=Yy(e,s,n.nodeR0),f=Gy(u.width,u.height,n.pixelGroupSize),c=[],l=[],b=0;b<n.maxMarchingIterations;b++)if(Vy(e,t,s,u,f,n),c=[],l=[],!!new Fy(c,f,n.threshold).march()){var w=c.map(function(at){return{x:Math.round(at.x*n.pixelGroupSize+u.minX),y:Math.round(at.y*n.pixelGroupSize+u.minY)}});if(w){var I=w.length;if(n.skip>1)for(I=Math.floor(w.length/n.skip);I<3&&n.skip>1;)n.skip-=1,I=Math.floor(w.length/n.skip);for(var W=0,H=0;H<I;H+=1,W+=n.skip)l.push({x:w[W].x,y:w[W].y})}var J=function(){for(var ut=0,lt=e;ut<lt.length;ut++){var _t=lt[ut],Bt=l.map(function(Rt){return[Rt.x,Rt.y]});if(!Eo(Bt,_t.getBBox().centerX,_t.getBBox().centerY))return!1}return!0};if(l&&J())return l;if(n.threshold*=.9,b<=n.maxMarchingIterations*.5)n.memberInfluenceFactor*=1.2,n.edgeInfluenceFactor*=1.2;else if(n.nonMemberInfluenceFactor!==0&&t.length>0)n.nonMemberInfluenceFactor*=.8;else break}return l};function Yy(i,e,t){var r={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},n=[];i.forEach(function(u){n.push(u.getBBox())}),e.forEach(function(u){n.push(u.getBBox())});for(var a=0,o=n;a<o.length;a++){var s=o[a];r.minX=(s.minX<r.minX?s.minX:r.minX)-t,r.minY=(s.minY<r.minY?s.minY:r.minY)-t,r.maxX=(s.maxX>r.maxX?s.maxX:r.maxX)+t,r.maxY=(s.maxY>r.maxY?s.maxY:r.maxY)+t}return r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.x=r.minX,r.y=r.minY,r}function Vy(i,e,t,r,n,a){function o(w,I){var W=Math.floor((w-I)/a.pixelGroupSize);return W<0?0:W}function s(w,I){return w*a.pixelGroupSize+I}var u=(a.nodeR0-a.nodeR1)*(a.nodeR0-a.nodeR1),f=(a.edgeR0-a.edgeR1)*(a.edgeR0-a.edgeR1),c=function(I,W){var H=Math.min(o(I.minX,W+r.minX),n.width),J=Math.min(o(I.minY,W+r.minY),n.height),at=Math.min(o(I.maxX,-W+r.minX),n.width),ut=Math.min(o(I.maxY,-W+r.minY),n.height);return[H,J,at,ut]},l=function(I,W){for(var H=I.getBBox(),J=c(H,a.nodeR1),at=J[0],ut=J[1],lt=J[2],_t=J[3],Bt=ut;Bt<_t;Bt+=1)for(var Rt=at;Rt<lt;Rt+=1)if(!(W<0&&n[Rt+Bt*n.width]<=0)){var Qt=s(Rt,r.minX),de=s(Bt,r.minY),se=Rs({x:Qt,y:de},{x:H.minX,y:H.minY,width:H.width,height:H.height});if(se<Math.pow(a.nodeR1,2)){var Te=Math.sqrt(se)-a.nodeR1;n.cells[Rt+Bt*n.width]+=W*Te*Te}}},b=function(I,W){for(var H=I.getBBox(),J=c(H,a.edgeR1),at=J[0],ut=J[1],lt=J[2],_t=J[3],Bt=ut;Bt<_t;Bt+=1)for(var Rt=at;Rt<lt;Rt+=1)if(!(W<0&&n.cells[Rt+Bt*n.width]<=0)){var Qt=s(Rt,r.minX),de=s(Bt,r.minY),se=ts({x:Qt,y:de},I);if(se<Math.pow(a.edgeR1,2)){var Te=Math.sqrt(se)-a.edgeR1;n.cells[Rt+Bt*n.width]+=W*Te*Te}}};a.nodeInfluenceFactor&&i.forEach(function(w){l(w,a.nodeInfluenceFactor/u)}),a.edgeInfluenceFactor&&t.forEach(function(w){b(w,a.edgeInfluenceFactor/f)}),a.negativeNodeInfluenceFactor&&e.forEach(function(w){l(w,a.negativeNodeInfluenceFactor/u)})}function yg(i,e,t,r){var n=i.getBBox(),a=t[0],o=t[1],s=t[2],u=t[3],f={topLeft:{x:n.minX-e,y:n.minY-e},topRight:{x:n.maxX+e,y:n.minY-e},bottomLeft:{x:n.minX-e,y:n.maxY+e},bottomRight:{x:n.maxX+e,y:n.maxY+e}},c=n.height*n.width;function l(I,W){return n.width*((I.y-n.minY+(W.y-n.minY))*.5)}if(o){if(a)return r?f.topLeft:f.bottomRight;if(s)return r?f.bottomLeft:f.topRight;var b=l(o,u);return b<c*.5?o.y>u.y?r?f.topLeft:f.bottomRight:r?f.topRight:f.bottomLeft:o.y<u.y?r?f.bottomLeft:f.topRight:r?f.bottomRight:f.topLeft}if(u){if(a)return r?f.topRight:f.bottomLeft;if(s)return r?f.bottomRight:f.topLeft}var w=l(a,s);return w<c*.5?a.x>s.x?r?f.topLeft:f.bottomRight:r?f.bottomLeft:f.topRight:a.x<s.x?r?f.topRight:f.bottomLeft:r?f.bottomRight:f.topLeft}var jy=function(){function i(e,t){this.cfg=(0,d.deepMix)(this.getDefaultCfg(),t),this.graph=e,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map(function(r){return(0,d.isString)(r)?e.findById(r):r}),this.nonMembers=this.cfg.nonMembers.map(function(r){return(0,d.isString)(r)?e.findById(r):r}),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}return i.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},i.prototype.setPadding=function(){var e=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=this.cfg.padding>0?this.cfg.padding+e:10+e,this.cfg.bubbleCfg={nodeR0:this.padding-e,nodeR1:this.padding-e,morphBuffer:this.padding-e}},i.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),this.type!=="round-convex"&&this.type!=="smooth-convex"&&this.type!=="bubble"&&(console.warn("The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default."),this.type="round-convex")},i.prototype.calcPath=function(e,t){var r,n,a;switch(this.type){case"round-convex":r=gg(e),a=Zv(r.map(function(o){return[o.x,o.y]}),this.padding),n=ar(a);break;case"smooth-convex":r=gg(e),r.length===2?(a=Zv(r.map(function(o){return[o.x,o.y]}),this.padding),n=ar(a)):r.length>2&&(a=vg(r.map(function(o){return[o.x,o.y]}),this.padding),n=Kv(a));break;case"bubble":r=Xy(e,t,this.cfg.bubbleCfg),n=r.length>=2&&Kv(r);break;default:}return n},i.prototype.render=function(){this.group.addShape("path",{attrs:(0,m.__assign)({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id,capture:!1}),this.group.toBack()},i.prototype.addMember=function(e){if(e){(0,d.isString)(e)&&(e=this.graph.findById(e)),this.members.push(e);var t=this.nonMembers.indexOf(e);return t>-1&&this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},i.prototype.addNonMember=function(e){if(e){(0,d.isString)(e)&&(e=this.graph.findById(e)),this.nonMembers.push(e);var t=this.members.indexOf(e);return t>-1&&this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},i.prototype.removeMember=function(e){if(e){(0,d.isString)(e)&&(e=this.graph.findById(e));var t=this.members.indexOf(e);return t>-1?(this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0):!1}},i.prototype.removeNonMember=function(e){if(e){(0,d.isString)(e)&&(e=this.graph.findById(e));var t=this.nonMembers.indexOf(e);return t>-1?(this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0):!1}},i.prototype.updateData=function(e,t){var r=this;this.group.findById(this.id).remove(),e&&(this.members=e.map(function(n){return(0,d.isString)(n)?r.graph.findById(n):n})),t&&(this.nonMembers=t.map(function(n){return(0,d.isString)(n)?r.graph.findById(n):n})),this.path=this.calcPath(this.members,this.nonMembers),this.render()},i.prototype.updateStyle=function(e){var t=this.group.findById(this.id);t.attr((0,m.__assign)({},e))},i.prototype.updateCfg=function(e){var t=this;this.cfg=(0,d.deepMix)(this.cfg,e),this.id=this.cfg.id,this.group=this.cfg.group,e.members&&(this.members=this.cfg.members.map(function(r){return(0,d.isString)(r)?t.graph.findById(r):r})),e.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map(function(r){return(0,d.isString)(r)?t.graph.findById(r):r})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},i.prototype.contain=function(e){var t=this,r;(0,d.isString)(e)?r=this.graph.findById(e):r=e;var n,a=r.getKeyShape();if(r.get("type")==="path")n=Hv(a.attr("path"));else{var o=a.getCanvasBBox();n=[[o.minX,o.minY],[o.maxX,o.minY],[o.maxX,o.maxY],[o.minX,o.maxY]]}return n=n.map(function(s){var u=t.graph.getPointByCanvas(s[0],s[1]);return[u.x,u.y]}),pa(n,Hv(this.path))},i.prototype.destroy=function(){this.group.remove(),this.cfg=null},i}(),mg=jy,Mh=Kt,Hy="node",Ky=function(i){(0,m.__extends)(e,i);function e(t){var r=i.call(this)||this;return r.sortCombos=(0,d.debounce)(function(){var n=r.get("comboSorted");if(!(!r||r.destroyed||n)){r.set("comboSorted",!0);var a=[],o={},s=r.get("comboTrees");(s||[]).forEach(function(f){Ri(f,function(c){return a[c.depth]?a[c.depth].push(c.id):a[c.depth]=[c.id],o[c.id]=c.depth,!0})});var u=r.getEdges().concat(r.get("vedges"));(u||[]).forEach(function(f){var c=f.getModel(),l=o[c.source]||0,b=o[c.target]||0,w=Math.max(l,b);a[w]?a[w].push(c.id):a[w]=[c.id]}),a.forEach(function(f){if(!(!f||!f.length))for(var c=f.length-1;c>=0;c--){var l=r.findById(f[c]);l&&l.toFront()}})}},500,!1),r.cfg=(0,d.deepMix)(r.getDefaultCfg(),t),r.init(),r.animating=!1,r.destroyed=!1,r.cfg.enabledStack&&(r.undoStack=new Yn(r.cfg.maxStep),r.redoStack=new Yn(r.cfg.maxStep)),r}return e.prototype.init=function(){this.initCanvas();var t=new my(this),r=new Rf(this),n=new Ly(this),a=new Ny(this);this.set({viewController:t,modeController:r,itemController:n,stateController:a}),this.initLayoutController(),this.initEventController(),this.initGroups(),this.initPlugins()},e.prototype.initGroups=function(){var t=this.get("canvas");if(t){var r=t.get("el"),n=(r||{}).id,a=n===void 0?"g6":n,o=t.addGroup({id:"".concat(a,"-root"),className:jt.rootContainerClassName});if(this.get("groupByTypes")){var s=o.addGroup({id:"".concat(a,"-edge"),className:jt.edgeContainerClassName}),u=o.addGroup({id:"".concat(a,"-node"),className:jt.nodeContainerClassName}),f=o.addGroup({id:"".concat(a,"-combo"),className:jt.comboContainerClassName});f.toBack(),this.set({nodeGroup:u,edgeGroup:s,comboGroup:f})}var c=o.addGroup({id:"".concat(a,"-delegate"),className:jt.delegateContainerClassName});this.set({delegateGroup:c}),this.set("group",o)}},e.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.02,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,enabledStack:!1,maxStep:10,tooltips:[],optimizeThreshold:1e3}},e.prototype.set=function(t,r){return(0,d.isPlainObject)(t)?this.cfg=(0,m.__assign)((0,m.__assign)({},this.cfg),t):this.cfg[t]=r,t==="enabledStack"&&r&&!this.undoStack&&!this.redoStack&&(this.undoStack=new Yn(this.cfg.maxStep),this.redoStack=new Yn(this.cfg.maxStep)),this},e.prototype.get=function(t){var r;return(r=this.cfg)===null||r===void 0?void 0:r[t]},e.prototype.getGroup=function(){return this.get("group")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.getMinZoom=function(){return this.get("minZoom")},e.prototype.setMinZoom=function(t){return this.set("minZoom",t)},e.prototype.getMaxZoom=function(){return this.get("maxZoom")},e.prototype.setMaxZoom=function(t){return this.set("maxZoom",t)},e.prototype.getWidth=function(){return this.get("width")},e.prototype.getHeight=function(){return this.get("height")},e.prototype.clearItemStates=function(t,r){(0,d.isString)(t)&&(t=this.findById(t));var n=this.get("itemController");r||(r=t.get("states")),n.clearItemStates(t,r);var a=this.get("stateController");a.updateStates(t,r,!1)},e.prototype.node=function(t){typeof t=="function"&&this.set("nodeMapper",t)},e.prototype.edge=function(t){typeof t=="function"&&this.set("edgeMapper",t)},e.prototype.combo=function(t){typeof t=="function"&&this.set("comboMapper",t)},e.prototype.findById=function(t){return this.get("itemMap")[t]},e.prototype.find=function(t,r){var n,a=this.get("".concat(t,"s"));return(0,d.each)(a,function(o,s){if(r(o,s))return n=o,n}),n},e.prototype.findAll=function(t,r){var n=[];return(0,d.each)(this.get("".concat(t,"s")),function(a,o){r(a,o)&&n.push(a)}),n},e.prototype.findAllByState=function(t,r,n){return n?this.findAll(t,function(a){return a.hasState(r)&&n(a)}):this.findAll(t,function(a){return a.hasState(r)})},e.prototype.translate=function(t,r,n,a){var o=this,s=this.get("group"),u=(0,d.clone)(s.getMatrix());if(u||(u=[1,0,0,0,1,0,0,0,1]),n){var f=cs({animateCfg:a,callback:function(){return o.emit("viewportchange",{action:"translate",matrix:s.getMatrix()})}});Xa(s,{x:s.getCanvasBBox().x+t,y:s.getCanvasBBox().y+r},n,f||{duration:500,easing:"easeCubic"})}else u=Mh(u,[["t",t,r]]),s.setMatrix(u),this.emit("viewportchange",{action:"translate",matrix:u}),this.autoPaint()},e.prototype.moveTo=function(t,r,n,a){var o=this.get("group");Xa(o,{x:t,y:r},n,a||{duration:500,easing:"easeCubic"}),this.emit("viewportchange",{action:"move",matrix:o.getMatrix()})},e.prototype.fitView=function(t,r,n,a){t&&this.set("fitViewPadding",t);var o=this.get("viewController");r?o.fitViewByRules(r,n,a):o.fitView(n,a),this.autoPaint()},e.prototype.fitCenter=function(t,r){var n=this.get("viewController");n.fitCenter(t,r),this.autoPaint()},e.prototype.addBehaviors=function(t,r){var n=this.get("modeController");return n.manipulateBehaviors(t,r,!0),this},e.prototype.removeBehaviors=function(t,r){var n=this.get("modeController");return n.manipulateBehaviors(t,r,!1),this},e.prototype.updateBehavior=function(t,r,n){var a=this.get("modeController");return a.updateBehavior(t,r,n),this},e.prototype.zoom=function(t,r,n,a){var o=this,s=this.get("group"),u=(0,d.clone)(s.getMatrix())||[1,0,0,0,1,0,0,0,1],f=this.get("minZoom"),c=this.get("maxZoom"),l=this.getZoom()||1,b=l*t,w=t,I=!1;if(f&&b<f?(w=f/l,I=!0):c&&b>c&&(w=c/l,I=!0),r?u=Mh(u,[["t",-r.x,-r.y],["s",w,w],["t",r.x,r.y]]):u=Mh(u,[["s",w,w]]),n){var W=(0,d.clone)(s.getMatrix());W||(W=[1,0,0,0,1,0,0,0,1]);var H=W[0],J=H*w,at=cs({animateCfg:a,callback:function(){return o.emit("viewportchange",{action:"zoom",matrix:s.getMatrix()})}});s.animate(function(ut){if(ut===1)W=u;else{var lt=Cs(H,J,ut)/W[0];r?W=Mh(W,[["t",-r.x,-r.y],["s",lt,lt],["t",r.x,r.y]]):W=Mh(W,[["s",lt,lt]])}return{matrix:W}},at)}else s.setMatrix(u),this.emit("viewportchange",{action:"zoom",matrix:u}),this.autoPaint();return!I},e.prototype.zoomTo=function(t,r,n,a){var o=t/this.getZoom();return this.zoom(o,r,n,a)},e.prototype.focusItem=function(t,r,n){var a=this.get("viewController"),o=!1;r?o=!0:r===void 0&&(o=this.get("animate"));var s={};n?s=n:n===void 0&&(s=this.get("animateCfg")),a.focus(t,o,s),this.autoPaint()},e.prototype.focusItems=function(t,r,n,a){var o=this.get("viewController");o.focusItems(t,r,n,a)},e.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},e.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},e.prototype.getPointByClient=function(t,r){var n=this.get("viewController");return n.getPointByClient(t,r)},e.prototype.getClientByPoint=function(t,r){var n=this.get("viewController");return n.getClientByPoint(t,r)},e.prototype.getPointByCanvas=function(t,r){var n=this.get("viewController");return n.getPointByCanvas(t,r)},e.prototype.getCanvasByPoint=function(t,r){var n=this.get("viewController");return n.getCanvasByPoint(t,r)},e.prototype.getGraphCenterPoint=function(){var t=this.get("group").getCanvasBBox();return{x:(t.minX+t.maxX)/2,y:(t.minY+t.maxY)/2}},e.prototype.getViewPortCenterPoint=function(){return this.getPointByCanvas(this.get("width")/2,this.get("height")/2)},e.prototype.showItem=function(t,r){r===void 0&&(r=!0);var n=this.get("itemController"),a=n.changeItemVisibility(t,!0);if(r&&this.get("enabledStack")){var o=a.getID(),s=a.getType(),u={},f={};switch(s){case"node":u.nodes=[{id:o,visible:!1}],f.nodes=[{id:o,visible:!0}];break;case"edge":u.nodes=[{id:o,visible:!1}],f.edges=[{id:o,visible:!0}];break;case"combo":u.nodes=[{id:o,visible:!1}],f.combos=[{id:o,visible:!0}];break;default:break}this.pushStack("visible",{before:u,after:f})}},e.prototype.hideItem=function(t,r){r===void 0&&(r=!0);var n=this.get("itemController"),a=n.changeItemVisibility(t,!1);if(r&&this.get("enabledStack")){var o=a.getID(),s=a.getType(),u={},f={};switch(s){case"node":u.nodes=[{id:o,visible:!0}],f.nodes=[{id:o,visible:!1}];break;case"edge":u.nodes=[{id:o,visible:!0}],f.edges=[{id:o,visible:!1}];break;case"combo":u.nodes=[{id:o,visible:!0}],f.combos=[{id:o,visible:!1}];break;default:break}this.pushStack("visible",{before:u,after:f})}},e.prototype.refreshItem=function(t){var r=this.get("itemController");r.refreshItem(t)},e.prototype.setAutoPaint=function(t){var r=this;r.set("autoPaint",t);var n=r.get("canvas");n.set("autoDraw",t)},e.prototype.remove=function(t,r){r===void 0&&(r=!0),this.removeItem(t,r)},e.prototype.removeItem=function(t,r){r===void 0&&(r=!0);var n=t;if((0,d.isString)(t)&&(n=this.findById(t)),!n&&(0,d.isString)(t))console.warn("The item ".concat(t," to be removed does not exist!"));else if(n){var a="";if(n.getType&&(a=n.getType()),r&&this.get("enabledStack")){var o=(0,m.__assign)((0,m.__assign)({},n.getModel()),{itemType:a}),s={};switch(a){case"node":{s.nodes=[o],s.edges=[];for(var u=n.getEdges(),f=u.length-1;f>=0;f--)s.edges.push((0,m.__assign)((0,m.__assign)({},u[f].getModel()),{itemType:"edge"}));break}case"edge":s.edges=[o];break;case"combo":s.combos=[o];break;default:break}this.pushStack("delete",{before:s,after:{}})}if(a==="node"){var c=n.getModel();c.comboId&&this.updateComboTree(n,void 0,!1)}var l=this.get("itemController");if(l.removeItem(n),a==="combo"){var b=Qs(this.get("comboTrees"));this.set("comboTrees",b)}}},e.prototype.innerAddItem=function(t,r,n){if(!rf(t,r))return!1;if(r.id&&this.findById(r.id)){console.warn("This item exists already. Be sure the id %c".concat(r.id,"%c is unique."),"font-size: 20px; color: red;","");return}var a,o=this.get("comboTrees")||[];if(t==="combo"){var s=this.get("itemMap"),u=!1;if(o.forEach(function(I){u||vo(I,function(W){if(r.parentId===W.id){u=!0;var H=(0,m.__assign)({id:r.id,depth:W.depth+2},r);W.children?W.children.push(H):W.children=[H],r.depth=H.depth,a=n.addItem(t,r)}var J=s[W.id];return u&&J&&J.getType&&J.getType()==="combo"&&n.updateCombo(J,W.children),!0})}),!u){var f=(0,m.__assign)({id:r.id,depth:0},r);r.depth=f.depth,o.push(f),a=n.addItem(t,r)}this.set("comboTrees",o),r.collapsed&&(this.collapseCombo(a,!1),this.updateCombo(a))}else if(t==="node"&&(0,d.isString)(r.comboId)&&o){var c=this.findById(r.comboId);c&&c.getType&&c.getType()!=="combo"&&console.warn("'".concat(r.comboId,"' is not a id of a combo in the graph, the node will be added without combo.")),a=n.addItem(t,r);var l=this.get("itemMap"),b=!1,w=!1;o.forEach(function(I){w||b||vo(I,function(W){if(W.id===r.id)return w=!0,!1;if(r.comboId===W.id&&!w){b=!0;var H=(0,d.clone)(r);H.itemType="node",W.children?W.children.push(H):W.children=[H],H.depth=W.depth+1}return b&&l[W.id].getType&&l[W.id].getType()==="combo"&&n.updateCombo(l[W.id],W.children),!0})})}else a=n.addItem(t,r);if(t==="node"&&r.comboId||t==="combo"&&r.parentId){var c=this.findById(r.comboId||r.parentId);c&&c.getType&&c.getType()==="combo"&&c.addChild(a)}return a},e.prototype.addItem=function(t,r,n,a){n===void 0&&(n=!0),a===void 0&&(a=!0);var o=this.get("comboSorted");this.set("comboSorted",o&&!a);var s=this.get("itemController"),u=this.innerAddItem(t,r,s);if(u===!1||u===!0)return u;var f=this.get("combos");if(f&&f.length>0&&this.sortCombos(),this.autoPaint(),n&&this.get("enabledStack")){var c=(0,m.__assign)((0,m.__assign)({},u.getModel()),{itemType:t}),l={};switch(t){case"node":l.nodes=[c];break;case"edge":l.edges=[c];break;case"combo":l.combos=[c];break;default:break}this.pushStack("add",{before:{},after:l})}return u},e.prototype.addItems=function(t,r,n){t===void 0&&(t=[]),r===void 0&&(r=!0),n===void 0&&(n=!0);var a=this.get("comboSorted");this.set("comboSorted",a&&!n);for(var o=this.get("itemController"),s=[],u=0;u<t.length;u++){var f=t[u];f.type!=="edge"&&f.type!=="vedge"?s.push(this.innerAddItem(f.type,f.model,o)):s.push(void 0)}for(var u=0;u<t.length;u++){var f=t[u];(f.type==="edge"||f.type==="vedge")&&(s[u]=this.innerAddItem(f.type,f.model,o))}if(n){var c=this.get("combos");c&&c.length>0&&this.sortCombos()}if(this.autoPaint(),r&&this.get("enabledStack")){for(var l={nodes:[],edges:[],combos:[]},u=0;u<t.length;u++){var b=t[u].type,w=s[u];if(w&&w!==!0){var I=(0,m.__assign)((0,m.__assign)({},w.getModel()),{itemType:b});switch(b){case"node":l.nodes.push(I);break;case"edge":l.edges.push(I);break;case"combo":l.combos.push(I);break;default:break}}}this.pushStack("addItems",{before:{},after:l})}return s},e.prototype.add=function(t,r,n,a){return n===void 0&&(n=!0),a===void 0&&(a=!0),this.addItem(t,r,n,a)},e.prototype.updateItem=function(t,r,n){var a=this;n===void 0&&(n=!0);var o=this.get("itemController"),s;(0,d.isString)(t)?s=this.findById(t):s=t;var u=n&&this.get("enabledStack"),f;u&&(f=(0,d.clone)(s.getModel()));var c="";s.getType&&(c=s.getType());var l=(0,m.__spreadArray)([],s.getStates(),!0);if(c==="combo"&&(0,d.each)(l,function(W){return a.setItemState(s,W,!1)}),o.updateItem(s,r),c==="combo"&&(0,d.each)(l,function(W){return a.setItemState(s,W,!0)}),u){var b={nodes:[],edges:[],combos:[]},w={nodes:[],edges:[],combos:[]},I=(0,m.__assign)({id:f.id},r);switch(c){case"node":b.nodes.push(f),w.nodes.push(I);break;case"edge":b.edges.push(f),w.edges.push(I);break;case"combo":b.combos.push(f),w.combos.push(I);break;default:break}this.pushStack("update",{before:b,after:w})}},e.prototype.update=function(t,r,n){n===void 0&&(n=!0),this.updateItem(t,r,n)},e.prototype.setItemState=function(t,r,n){(0,d.isString)(t)&&(t=this.findById(t));var a=this.get("itemController");a.setItemState(t,r,n);var o=this.get("stateController");o.updateState(t,r,n)},e.prototype.priorityState=function(t,r){var n=this.get("itemController");n.priorityState(t,r)},e.prototype.data=function(t){Mo(t),this.set("data",t)},e.prototype.render=function(){var t=this;this.set("comboSorted",!1);var r=this.get("data");if(this.get("enabledStack")&&this.clearStack(),!r)throw new Error("data must be defined first");var n=r.nodes,a=n===void 0?[]:n,o=r.edges,s=o===void 0?[]:o,u=r.combos,f=u===void 0?[]:u;if(this.clear(!0),this.emit("beforerender"),t.addItems(a.map(function(H){return{type:"node",model:H}}),!1,!1),(f==null?void 0:f.length)!==0){var c=uu(f,a);this.set("comboTrees",c),t.addCombos(f)}t.addItems(s.map(function(H){return{type:"edge",model:H}}),!1,!1);var l=t.get("animate");(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",!1);var b=t.get("layoutController");if(b){if(b.layout(w),this.destroyed)return}else w();function w(){(t.get("comboTrees")||[]).forEach(function(H){vo(H,function(J){var at=t.findById(J.id);return at.getType()==="combo"&&J.collapsed&&(t.collapseCombo(J.id,!1),t.updateCombo(at)),!0})}),t.get("fitView")?t.fitView():t.get("fitCenter")&&t.fitCenter(),t.autoPaint(),t.emit("afterrender"),(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",l),setTimeout(function(){var H;(H=t.getCombos())===null||H===void 0||H.forEach(function(J){J.set("animate",!0)})},0)}if(!this.get("groupByTypes"))if(f&&f.length!==0)this.sortCombos();else if(r.nodes&&r.edges&&r.nodes.length<r.edges.length){var I=this.getNodes();I.forEach(function(H){H.toFront()})}else{var W=this.getEdges();W.forEach(function(H){H.toBack()})}},e.prototype.read=function(t){this.data(t),this.render()},e.prototype.diffItems=function(t,r,n){var a=this,o,s=this.get("itemMap");(0,d.each)(n,function(u){if(o=s[u.id],o){if(a.get("animate")&&t===Hy){var f=o.getContainer().getMatrix();f||(f=[1,0,0,0,1,0,0,0,1]),o.set("originAttrs",{x:f[6],y:f[7]})}a.updateItem(o,u,!1)}else o=a.addItem(t,u,!1);o&&r["".concat(t,"s")].push(o)})},e.prototype.changeData=function(t,r){var n=this,a;r===void 0&&(r=!0);var o=this,s=t||o.get("data");if(!Mo(s))return this;this.emit("beforechangedata"),r&&this.get("enabledStack")&&this.pushStack("changedata",{before:o.save(),after:s}),this.set("comboSorted",!1),this.removeHulls(),this.getNodes().map(function(lt){return o.clearItemStates(lt)}),this.getEdges().map(function(lt){return o.clearItemStates(lt)});var u=this.get("canvas"),f=u.get("localRefresh");u.set("localRefresh",!1),o.get("data")||(o.data(s),o.render());var c=this.get("itemMap"),l={nodes:[],edges:[]},b=s.combos;if(b){var w=uu(b,s.nodes);this.set("comboTrees",w)}else this.set("comboTrees",[]);this.diffItems("node",l,s.nodes),(0,d.each)(c,function(lt,_t){c[_t].getModel().depth=0,!(lt.getType&&lt.getType()==="edge")&&(lt.getType&&lt.getType()==="combo"?(delete c[_t],lt.destroy()):l.nodes.indexOf(lt)<0&&(delete c[_t],o.remove(lt,!1)))});for(var I=this.getCombos(),W=I.length,H=W-1;H>=0;H--)I[H].destroyed&&I.splice(H,1);b&&(o.addCombos(b),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",l,s.edges),(0,d.each)(c,function(lt,_t){lt.getType&&(lt.getType()==="node"||lt.getType()==="combo")||l.edges.indexOf(lt)<0&&(delete c[_t],o.remove(lt,!1))}),(this.get("comboTrees")||[]).forEach(function(lt){vo(lt,function(_t){var Bt=n.findById(_t.id);return Bt.getType()==="combo"&&_t.collapsed&&n.collapseCombo(_t.id,!1),!0})}),this.set({nodes:l.nodes,edges:l.edges});var J=(this.get("layout")||{}).relayoutAtChangeData,at=J===void 0?!0:J,ut=this.get("layoutController");return at&&ut&&(ut.changeData(function(){setTimeout(function(){var lt;(lt=o.getCombos())===null||lt===void 0||lt.forEach(function(_t){_t.set("animate",!0)})},0)}),o.get("animate")&&!ut.getLayoutType()?(o.positionsAnimate(),(a=o.getCombos())===null||a===void 0||a.forEach(function(lt){return lt.set("animate",!0)})):o.autoPaint()),setTimeout(function(){u.set("localRefresh",f)},16),this.set("data",s),this.emit("afterchangedata"),this},e.prototype.addCombos=function(t){var r=this,n=r.get("comboTrees"),a=this.get("itemController");a.addCombos(n,t)},e.prototype.createCombo=function(t,r,n){var a=this;n===void 0&&(n=!0);var o=this.get("itemController");this.set("comboSorted",!1);var s="",u;if(t){if((0,d.isString)(t))s=t,u={id:t};else{if(s=t.id,!s){console.warn("Create combo failed. Please assign a unique string id for the adding combo.");return}u=t}var f=n&&this.get("enabledStack"),c={nodes:[],combos:[]};f&&r.forEach(function(J){var at=a.findById(J),ut=at.getType();if(!(ut!=="node"&&ut!=="combo")){var lt=at.getModel();c["".concat(ut,"s")].push({id:J,parentId:ut==="node"?lt.comboId:lt.parentId})}});var l=this.get("comboTrees"),b=new Set(r),w=new Map;l&&(l.forEach(function(J){vo(J,function(at,ut,lt){if(b.has(at.id)){if(ut){var _t=a.findById(ut.id),Bt=a.findById(at.id);ut.children.splice(lt,1),_t.removeChild(Bt),o.updateCombo(_t,ut.children)}at.itemType==="combo"&&w.set(at.id,at)}return!0})}),l=l.filter(function(J){return!b.has(J.id)}),this.set("comboTrees",l));var I={nodes:[],combos:[]},W=r.map(function(J){var at=a.findById(J),ut=at.getModel(),lt="";at.getType&&(lt=at.getType());var _t=w.get(J)||{id:at.getID(),itemType:lt};return lt==="combo"?(_t.parentId=s,ut.parentId=s):lt==="node"&&(_t.comboId=s,ut.comboId=s),f&&I["".concat(lt,"s")].push({id:ut.id,parentId:s}),_t});u.children=W,this.addItem("combo",u,!1),this.set("comboSorted",!1),l&&(l.forEach(function(J){Ri(J,function(at){return at.id===s?(at.itemType="combo",at.children=W,!1):!0})}),this.sortCombos()),f&&(I.combos.push(u),this.pushStack("createCombo",{before:c,after:I}));var H=this.findById(s);!H.getModel().parentId&&H.getChildren().combos.length&&this.updateComboTree(H,void 0,!1),setTimeout(function(){H.set("animate",!0)},0)}},e.prototype.uncombo=function(t,r){var n=this,a,o;r===void 0&&(r=!0);var s=this,u=t;if((0,d.isString)(t)&&(u=this.findById(t)),!u||u.getType&&u.getType()!=="combo"){console.warn("The item is not a combo!");return}var f=u.getModel(),c=u.getModel().parentId,l=s.get("comboTrees");l||(l=[]);var b=this.get("itemMap"),w=u.get("id"),I,W=[],H=this.get("combos"),J=this.findById(c),at=r&&this.get("enabledStack"),ut={};if(at&&(ut=(0,d.clone)(f),ut.children=[]),l.forEach(function(Rt){I||vo(Rt,function(Qt){var de;if(Qt.id===w){I=Qt;var se=u.getEdges().map(function(Dr){return Dr.getID()});se.forEach(function(Dr){n.removeItem(Dr,!1)});var Te=H.indexOf(u);H.splice(Te,1),delete b[w];var je=(0,d.clone)(u.getModel());u.destroy(),n.emit("afterremoveitem",{item:je,type:"combo"})}if(c&&I&&Qt.id===c){J.removeCombo(u),W=Qt.children;var Te=W.indexOf(I);return Te!==-1&&W.splice(Te,1),(de=I.children)===null||de===void 0||de.forEach(function(Kr){var zr=n.findById(Kr.id),Mr=zr.getModel();zr.getType&&zr.getType()==="combo"?(Kr.parentId=c,delete Kr.comboId,Mr.parentId=c,delete Mr.comboId):zr.getType&&zr.getType()==="node"&&(Kr.comboId=c,Mr.comboId=c),J.addChild(zr),W.push(Kr)}),n.updateCombo(J),!1}return!0})}),!c&&I){var lt=l.indexOf(I);l.splice(lt,1),(a=I.children)===null||a===void 0||a.forEach(function(Rt){Rt.parentId=void 0;var Qt=n.findById(Rt.id).getModel();delete Qt.parentId,delete Qt.comboId,Rt.itemType!=="node"&&l.push(Rt)})}if(at){var _t={nodes:[],combos:[]},Bt={nodes:[],combos:[]};(o=I.children)===null||o===void 0||o.forEach(function(Rt){var Qt=n.findById(Rt.id),de=Qt.getType();de!=="node"&&de!=="combo"||(_t["".concat(de,"s")].push({id:Rt.id,parentId:w}),Bt["".concat(de,"s")].push({id:Rt.id,parentId:c}))}),_t.combos.push(ut),this.pushStack("uncombo",{before:_t,after:Bt})}},e.prototype.updateCombos=function(t){var r=this;t===void 0&&(t=!1);var n=this,a=this.get("comboTrees"),o=n.get("itemController"),s=n.get("itemMap");(a||[]).forEach(function(u){vo(u,function(f){var c;if(!f)return!0;var l=s[f.id];if(((c=l==null?void 0:l.getType)===null||c===void 0?void 0:c.call(l))==="combo"){var b=(0,m.__spreadArray)([],l.getStates(),!0);(0,d.each)(b,function(w){return r.setItemState(l,w,!1)}),o.updateCombo(l,f.children,t),(0,d.each)(b,function(w){return r.setItemState(l,w,!0)})}return!0})}),n.sortCombos()},e.prototype.updateCombo=function(t){var r=this,n=this,a=t,o;if((0,d.isString)(t)&&(a=this.findById(t)),!a||a.getType&&a.getType()!=="combo"){console.warn("The item to be updated is not a combo!");return}o=a.get("id");var s=this.get("comboTrees"),u=n.get("itemController"),f=n.get("itemMap");(s||[]).forEach(function(c){vo(c,function(l){if(!l)return!0;var b=f[l.id];if(o===l.id&&b&&b.getType&&b.getType()==="combo"){var w=(0,m.__spreadArray)([],b.getStates(),!0);(0,d.each)(w,function(I){b.getStateStyle(I)&&r.setItemState(b,I,!1)}),u.updateCombo(b,l.children),(0,d.each)(w,function(I){b.getStateStyle(I)&&r.setItemState(b,I,!0)}),o&&(o=l.parentId)}return!0})})},e.prototype.updateComboTree=function(t,r,n){n===void 0&&(n=!0);var a=this;this.set("comboSorted",!1);var o;(0,d.isString)(t)?o=a.findById(t):o=t;var s=o.getModel(),u=s.comboId||s.parentId,f="";if(o.getType&&(f=o.getType()),r&&f==="combo"){var c=this.get("comboTrees"),l=!0,b;if((c||[]).forEach(function(at){b||Ri(at,function(ut){if(!b)return ut.id===o.getID()&&(b=ut),!0})}),Ri(b,function(at){return at.id===r?(l=!1,!1):!0}),!l){console.warn("Failed to update the combo tree! The parentId points to a descendant of the combo!");return}}if(n&&this.get("enabledStack")){var w={},I={};f==="combo"?(w.combos=[{id:s.id,parentId:s.parentId}],I.combos=[{id:s.id,parentId:r}]):f==="node"&&(w.nodes=[{id:s.id,parentId:s.comboId}],I.nodes=[{id:s.id,parentId:r}]),this.pushStack("updateComboTree",{before:w,after:I})}if(s.parentId||s.comboId){var W=this.findById(s.parentId||s.comboId);W&&W.removeChild(o)}if(f==="combo"?s.parentId=r:f==="node"&&(s.comboId=r),r){var H=this.findById(r);H&&H.addChild(o)}if(u){var H=this.findById(u);H&&H.removeChild(o)}var J=Qs(this.get("comboTrees"),s.id,r);this.set("comboTrees",J),this.updateCombos()},e.prototype.save=function(){var t=[],r=[],n=[];return(0,d.each)(this.get("nodes"),function(a){t.push(a.getModel())}),(0,d.each)(this.get("edges"),function(a){r.push(a.getModel())}),(0,d.each)(this.get("combos"),function(a){n.push(a.getModel())}),{nodes:t,edges:r,combos:n}},e.prototype.changeSize=function(t,r){var n=this.get("viewController");return n.changeSize(t,r),this},e.prototype.refresh=function(){var t=this;if(t.emit("beforegraphrefresh"),t.get("animate"))t.positionsAnimate();else{var r=t.get("nodes"),n=t.get("edges"),a=t.get("edges");(0,d.each)(r,function(o){o.refresh()}),(0,d.each)(n,function(o){o.refresh()}),(0,d.each)(a,function(o){o.refresh()})}t.emit("aftergraphrefresh"),t.autoPaint()},e.prototype.getNodes=function(){return this.get("nodes")},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getCombos=function(){return this.get("combos")},e.prototype.getComboChildren=function(t){if((0,d.isString)(t)&&(t=this.findById(t)),!t||t.getType&&t.getType()!=="combo"){console.warn("The combo does not exist!");return}return t.getChildren()},e.prototype.positionsAnimate=function(t){var r=this;r.emit("beforeanimate");var n=r.get("animateCfg"),a=n.onFrame,o=t?r.getNodes().concat(r.getCombos()):r.getNodes(),s=o.map(function(f){var c=f.getModel();return{id:c.id,x:c.x,y:c.y}});r.stopAnimate();var u=r.get("canvas");r.animating=!0,setTimeout(function(){u.animate(function(f){(0,d.each)(s,function(c){var l=r.findById(c.id);if(!(!l||l.destroyed)){var b=l.get("originAttrs"),w=l.get("model"),I=l.getContainer().getMatrix();if(b==null&&(I&&(b={x:I[6],y:I[7]}),l.set("originAttrs",b||0)),a){var W=a(l,f,c,b||{x:0,y:0});l.set("model",Object.assign(w,W))}else b?(w.x=b.x+(c.x-b.x)*f,w.y=b.y+(c.y-b.y)*f):(w.x=c.x,w.y=c.y)}}),r.refreshPositions(t)},{duration:n.duration,easing:n.easing,callback:function(){(0,d.each)(o,function(c){c.set("originAttrs",null)}),n.callback&&n.callback(),r.emit("afteranimate"),r.animating=!1}})},0)},e.prototype.refreshPositions=function(t){var r=this;r.emit("beforegraphrefreshposition");var n=r.get("nodes"),a=r.get("edges"),o=r.get("vedges"),s=r.get("combos"),u,f={},c=function(b){(0,d.each)(b,function(w){u=w.getModel();var I=w.get("originAttrs");if(!(I&&u.x===I.x&&u.y===I.y)){var W=w.updatePosition({x:u.x,y:u.y});f[u.id]=W,u.comboId&&(f[u.comboId]=f[u.comboId]||W),u.parentId&&(f[u.parentId]=f[u.parentId]||W)}})};c(s),c(n),s&&s.length!==0&&(t&&c(s),r.updateCombos()),(0,d.each)(a,function(l){var b=l.getSource().getModel(),w=l.getTarget();if(!(0,d.isPlainObject)(w)){var I=w.getModel();(f[b.id]||f[I.id]||l.getModel().isComboEdge)&&l.refresh()}}),(0,d.each)(o,function(l){l.refresh()}),r.emit("aftergraphrefreshposition"),r.autoPaint()},e.prototype.stopAnimate=function(){var t=this.get("canvas"),r=t.cfg.timeline;r&&r.stopAllAnimations()},e.prototype.isAnimating=function(){return this.animating},e.prototype.getZoom=function(){var t=this.get("group").getMatrix();return t?t[0]:1},e.prototype.getCurrentMode=function(){var t=this.get("modeController");return t.getMode()},e.prototype.setMode=function(t){var r=this.get("modeController");return r.setMode(t),this},e.prototype.clear=function(t){var r;return t===void 0&&(t=!1),(r=this.get("canvas"))===null||r===void 0||r.clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],vedges:[],groups:[],combos:[],comboTrees:[]}),t||this.emit("afterrender"),this},e.prototype.updateLayout=function(t,r,n,a){var o=this;t===void 0&&(t={}),a===void 0&&(a=!0);var s=this.get("layoutController");if((0,d.isString)(t)&&(t={type:t}),r){var u=n;u||(r==="begin"?u={x:0,y:0}:u={x:this.getWidth()/2,y:this.getHeight()/2}),u=this.getPointByCanvas(u.x,u.y);var f=["force","gForce","fruchterman","force2"];f.includes(t.type)||!t.type&&f.includes(s==null?void 0:s.layoutType)?t.center=[u.x,u.y]:this.once("afterlayout",function(b){var w=o.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];u.x=u.x*w[0]+w[6],u.y=u.y*w[0]+w[7];var I=o.getGroup().getCanvasBBox(),W=I.minX,H=I.maxX,J=I.minY,at=I.maxY,ut={x:(W+H)/2,y:(J+at)/2};r==="begin"&&(ut.x=W,ut.y=J),o.translate(u.x-ut.x,u.y-ut.y)})}var c=(0,m.__assign)({},this.get("layout")),l={};Object.assign(l,c,t),t.pipes&&!t.type?delete l.type:!t.pipes&&l.type&&delete l.pipes,this.set("layout",l),s&&(s.isLayoutTypeSame(l)&&l.gpuEnabled===c.gpuEnabled?s.updateLayoutCfg(l):s.changeLayout(l),a&&this.get("enabledStack")&&this.pushStack("layout",{before:c,after:l}))},e.prototype.destroyLayout=function(){var t=this.get("layoutController");t==null||t.destroyLayout()},e.prototype.layout=function(){var t,r=this.get("layoutController"),n=this.get("layout");if(!(!n||!r)){if(n.workerEnabled){r.layout();return}!((t=r.layoutMethods)===null||t===void 0)&&t.length?r.relayout(!0):r.layout()}},e.prototype.collapseCombo=function(t,r){var n=this;if(r===void 0&&(r=!0),!this.destroyed){if((0,d.isString)(t)&&(t=this.findById(t)),!t){console.warn("The combo to be collapsed does not exist!");return}this.emit("beforecollapseexpandcombo",{action:"collapse",item:t});var a=t.getModel(),o=this.get("itemController");o.collapseCombo(t,r),a.collapsed=!0;var s=this.getEdges().concat(this.get("vedges")),u=[],f=this.get("comboTrees"),c=!1;(f||[]).forEach(function(b){c||Ri(b,function(w){if(c&&w.depth<=a.depth)return!1;if(a.id===w.id&&(c=!0),c){var I=n.findById(w.id);I&&I.getType&&I.getType()==="combo"&&(u=u.concat(I.getNodes()),u=u.concat(I.getCombos()))}return!0})});var l={};s.forEach(function(b){var w=b.getModel(),I=w.isVEdge,W=w.size,H=W===void 0?1:W;if(!(b.isVisible()&&!I)){var J=b.getSource(),at=b.getTarget(),ut=null,lt;if(J.getModel().id===a.id||u.includes(J)&&!u.includes(at)?(ut=at,lt=!1):(at.getModel().id===a.id||!u.includes(J)&&u.includes(at))&&(ut=J,lt=!0),ut){if(I){n.removeItem(b,!1);return}for(var _t=ut.getModel();!ut.isVisible();){var Bt=_t.parentId,Rt=_t.comboId,Qt=Bt||Rt;if(ut=n.findById(Qt),!ut||!Qt)return;_t=ut.getModel()}var de=_t.id,se=lt?{source:de,target:a.id,size:H,isVEdge:!0}:{source:a.id,target:de,size:H,isVEdge:!0},Te="".concat(se.source,"-").concat(se.target);if(l[Te]){l[Te].size+=H;return}l[Te]=se}}}),this.addItems(Object.values(l).map(function(b){return{type:"vedge",model:b}}),!1),this.emit("aftercollapseexpandcombo",{action:"collapse",item:t})}},e.prototype.expandCombo=function(t,r){var n=this;if(r===void 0&&(r=!0),(0,d.isString)(t)&&(t=this.findById(t)),!t||t.getType&&t.getType()!=="combo"){console.warn("The combo to be collapsed does not exist!");return}this.emit("beforecollapseexpandcombo",{action:"expand",item:t});var a=t.getModel(),o=this.get("itemController");o.expandCombo(t,r),a.collapsed=!1;var s=this.getEdges().concat(this.get("vedges")),u=[],f=this.get("comboTrees"),c=!1;(f||[]).forEach(function(b){c||Ri(b,function(w){if(c&&w.depth<=a.depth)return!1;if(a.id===w.id&&(c=!0),c){var I=n.findById(w.id);I&&I.getType&&I.getType()==="combo"&&(u=u.concat(I.getNodes()),u=u.concat(I.getCombos()))}return!0})});var l={};s.forEach(function(b){if(!(b.isVisible()&&!b.getModel().isVEdge)){var w=b.getSource(),I=b.getTarget(),W=w.get("id"),H=I.get("id"),J=null,at;if(W===a.id||u.includes(w)&&!u.includes(I)?(J=I,at=!1):H===a.id||!u.includes(w)&&u.includes(I)?(J=w,at=!0):u.includes(w)&&u.includes(I)&&w.isVisible()&&I.isVisible()&&b.show(),J){var ut=b.getModel(),lt=ut.isVEdge,_t=ut.size,Bt=_t===void 0?1:_t;if(lt){n.removeItem(b,!1);return}for(var Rt=J.getModel();!J.isVisible();){var Qt=Rt.parentId,de=Rt.comboId,se=Qt||de;if(J=n.findById(se),!J||!se)return;Rt=J.getModel()}for(var Te=Rt.id,je=at?I:w,Dr=je.getModel();!je.isVisible();){var Kr=Dr.parentId,zr=Dr.comboId,Mr=Kr||zr;if(je=n.findById(Mr),!je||!Mr)return;if(Dr.comboId===a.id||Dr.parentId===a.id)break;Dr=je.getModel()}var En=Dr.id;if(Te){var yn=at?{source:Te,target:En,isVEdge:!0,size:Bt}:{source:En,target:Te,isVEdge:!0,size:Bt},Ar="".concat(yn.source,"-").concat(yn.target);if(l[Ar]){l[Ar].size+=Bt;return}l[Ar]=yn}}}}),this.addItems(Object.values(l).map(function(b){return{type:"vedge",model:b}}),!1),this.emit("aftercollapseexpandcombo",{action:"expand",item:t})},e.prototype.collapseExpandCombo=function(t,r){if(r===void 0&&(r=!0),(0,d.isString)(t)&&(t=this.findById(t)),!(!t||t.getType&&t.getType()!=="combo")){for(var n=t.getModel(),a=this.findById(n.parentId);a;){var o=a.getModel();if(o.collapsed){console.warn("Fail to expand the combo since it's ancestor combo is collapsed."),a=void 0;return}a=this.findById(o.parentId)}var s=n.collapsed;s?this.expandCombo(t,r):this.collapseCombo(t,r),this.updateCombo(t)}},e.prototype.getNeighbors=function(t,r){var n=t;return(0,d.isString)(t)&&(n=this.findById(t)),n.getNeighbors(r)},e.prototype.getNodeDegree=function(t,r,n){r===void 0&&(r=void 0),n===void 0&&(n=!1);var a=t;(0,d.isString)(t)&&(a=this.findById(t));var o=this.get("degrees");(!o||n)&&(o=_e(this.save()),this.set("degrees",o));var s=o[a.getID()],u=0;if(!s)return 0;switch(r){case"in":u=s.inDegree;break;case"out":u=s.outDegree;break;case"all":u=s;break;default:u=s.degree;break}return u},e.prototype.getUndoStack=function(){return this.undoStack},e.prototype.getRedoStack=function(){return this.redoStack},e.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},e.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear(),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack}))},e.prototype.pushStack=function(t,r,n){if(t===void 0&&(t="update"),n===void 0&&(n="undo"),!this.get("enabledStack")){console.warn("\u8BF7\u5148\u542F\u7528 undo & redo \u529F\u80FD\uFF0C\u5728\u5B9E\u4F8B\u5316 Graph \u65F6\u5019\u914D\u7F6E enabledStack: true !");return}var a=r?(0,d.clone)(r):{before:{},after:(0,d.clone)(this.save())};n==="redo"?this.redoStack.push({action:t,data:a}):this.undoStack.push({action:t,data:a}),this.emit("stackchange",{action:t,stackType:n,undoStack:this.undoStack,redoStack:this.redoStack})},e.prototype.getAdjMatrix=function(t,r){t===void 0&&(t=!0),r===void 0&&(r=this.get("directed"));var n=this.get("adjMatrix");return(!n||!t)&&(n=kt(this.save(),r),this.set("adjMatrix",n)),n},e.prototype.getShortestPathMatrix=function(t,r){t===void 0&&(t=!0),r===void 0&&(r=this.get("directed"));var n=this.get("adjMatrix"),a=this.get("shortestPathMatrix");return(!n||!t)&&(n=kt(this.save(),r),this.set("adjMatrix",n)),(!a||!t)&&(a=pn(this.save(),r),this.set("shortestPathMatrix",a)),a},e.prototype.on=function(t,r,n){return i.prototype.on.call(this,t,r,n)},e.prototype.destroy=function(){var t,r,n,a,o;this.emit("beforedestroy"),this.clear(),this.clearStack(),(t=this.get("itemController"))===null||t===void 0||t.destroy(),(r=this.get("modeController"))===null||r===void 0||r.destroy(),(n=this.get("viewController"))===null||n===void 0||n.destroy(),(a=this.get("stateController"))===null||a===void 0||a.destroy(),(o=this.get("canvas"))===null||o===void 0||o.destroy(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null,this.emit("afterdestroy")},e.prototype.createHull=function(t){if(!t.members||t.members.length<1){console.warn("Create hull failed! The members is empty.");return}var r=this.get("hullGroup"),n=this.get("hullMap");if(n||(n={},this.set("hullMap",n)),(!r||r.get("destroyed"))&&(r=this.get("group").addGroup({id:"hullGroup"}),r.toBack(),this.set("hullGroup",r)),n[t.id])return console.warn("Existed hull id."),n[t.id];var a=r.addGroup({id:"".concat(t.id,"-container")}),o=new mg(this,(0,m.__assign)((0,m.__assign)({},t),{group:a})),s=o.id;return n[s]=o,o},e.prototype.getHulls=function(){return this.get("hullMap")},e.prototype.getHullById=function(t){return this.get("hullMap")[t]},e.prototype.removeHull=function(t){var r,n;(0,d.isString)(t)?n=this.getHullById(t):n=t,(r=this.get("hullMap"))===null||r===void 0||delete r[n.id],n.destroy()},e.prototype.removeHulls=function(){var t=this.getHulls();!t||!Object.keys(t).length||(Object.keys(t).forEach(function(r){var n=t[r];n.destroy()}),this.set("hullMap",{}))},e}(Q),xg=Ky;function $v(i){"@babel/helpers - typeof";return $v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$v(i)}var lh=Kt,bg="-shape",qv="-label",ev=["startArrow","endArrow"],Eg={lineWidth:1,stroke:void 0,fill:void 0,lineAppendWidth:1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,x:0,y:0,r:10,width:20,height:20,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},Zy={lineWidth:1,stroke:"#000",lineDash:void 0,startArrow:!1,endArrow:!1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},rv={edge:Zy,node:Eg,combo:Eg},Qv="-label-bg",Jv={options:{labelCfg:{style:{fontFamily:jt.windowFontFamily}},descriptionCfg:{style:{fontFamily:jt.windowFontFamily}}},itemType:"",type:"",getCustomConfig:function(e){return{}},getOptions:function(e,t){return t==="move"||t!=null&&t.includes("bbox")?e:(0,d.deepMix)({},this.options,this.getCustomConfig(e)||{},e)},draw:function(e,t){t.shapeMap={},this.mergeStyle=this.getOptions(e);var r=this.drawShape(e,t);if(r.set("className",this.itemType+bg),t.shapeMap[this.itemType+bg]=r,e.label){var n=this.drawLabel(e,t);n.set("className",this.itemType+qv),t.shapeMap[this.itemType+qv]=n}return r},afterDraw:function(e,t,r){},drawShape:function(e,t){return null},drawLabel:function(e,t){var r=(this.mergeStyle||this.getOptions(e)||{}).labelCfg,n=r||{},a=this.getLabelStyle(e,n,t),o=a.rotate;delete a.rotate;var s=t.addShape("text",{attrs:a,draggable:!0,className:"text-shape",name:"text-shape",labelRelated:!0});if(t.shapeMap["text-shape"]=s,!isNaN(o)&&o!==""){var u=s.getBBox(),f=[1,0,0,0,1,0,0,0,1];if(a.rotateCenter)switch(a.rotateCenter){case"center":f=lh(f,[["t",-u.width/2,-u.height/2],["r",o],["t",u.width/2,u.height/2]]);break;case"lefttop":f=lh(f,[["t",-a.x,-a.y],["r",o],["t",a.x,a.y]]);break;case"leftcenter":f=lh(f,[["t",-a.x,-a.y-u.height/2],["r",o],["t",a.x,a.y+u.height/2]]);break;default:f=lh(f,[["t",-u.width/2,-u.height/2],["r",o],["t",u.width/2,u.height/2]]);break}else f=lh(f,[["t",-a.x,-a.y-u.height/2],["r",o],["t",a.x,a.y+u.height/2]]);s.setMatrix(f)}if(a.background){var c=this.drawLabelBg(e,t,s),l=this.itemType+Qv;c.set("classname",l),t.shapeMap[l]=c,s.toFront()}return s},drawLabelBg:function(e,t,r){var n=this.options.labelCfg,a=(0,d.mix)({},n,e.labelCfg),o=this.getLabelBgStyleByPosition(r,a),s=t.addShape("rect",{name:"text-bg-shape",attrs:o,labelRelated:!0});return t.shapeMap["text-bg-shape"]=s,s},getLabelStyleByPosition:function(e,t,r){return{text:e.label}},getLabelBgStyleByPosition:function(e,t){return{}},getLabelStyle:function(e,t,r){var n=this.getLabelStyleByPosition(e,t,r),a="".concat(this.itemType,"Label"),o=jt[a]?jt[a].style:null;return(0,m.__assign)((0,m.__assign)((0,m.__assign)({},o),n),t.style)},getShapeStyle:function(e){return e.style},update:function(e,t,r){this.updateShapeStyle(e,t,r),this.updateLabel(e,t,r)},updateShapeStyle:function(e,t,r){var n,a=t.getContainer(),o=t.getKeyShape(),s=(0,d.mix)({},o.attr(),e.style),u=function(l){var b,w=s[l];if((0,d.isPlainObject)(w)){var I=((n=a.shapeMap)===null||n===void 0?void 0:n[l])||a.find(function(W){return W.get("name")===l});I==null||I.attr(w)}else o.attr((b={},b[l]=w,b))};for(var f in s)u(f)},updateLabel:function(e,t,r){var n,a,o=t.getContainer(),s=(this.mergeStyle||this.getOptions({},r)||{}).labelCfg,u=s===void 0?{}:s,f=this.itemType+qv,c=o.shapeMap[f]||o.find(function(lt){return lt.get("className")===f}),l=this.itemType+Qv,b=o.shapeMap[l]||o.find(function(lt){return lt.get("className")===l});if(c&&e.label===void 0&&(o.removeChild(c),delete o.shapeMap[f],b&&(o.removeChild(b),delete o.shapeMap[l])),e.label||e.label==="")if(c){(!r||r==="bbox|label"||this.itemType==="edge"&&r!=="style")&&(u=(0,d.deepMix)(u,e.labelCfg));var I=this.getLabelStyleByPosition(e,u,o),W=(n=e.labelCfg)===null||n===void 0?void 0:n.style,H=(0,m.__assign)((0,m.__assign)({},I),W),J=H.rotate;if(delete H.rotate,!isNaN(J)&&J!==""){var at=[1,0,0,0,1,0,0,0,1];at=lh(at,[["t",-H.x,-H.y],["r",J],["t",H.x,H.y]]),H.matrix=at,c.attr(H)}else((a=c.getMatrix())===null||a===void 0?void 0:a[4])!==1&&c.resetMatrix(),c.attr(H);if(!b)H.background&&(b=this.drawLabelBg(e,o,c),b.set("classname",l),o.shapeMap[l]=b,c.toFront());else if(H.background){var ut=this.getLabelBgStyleByPosition(c,u);b.attr(ut)}else o.removeChild(b)}else{var w=this.drawLabel(e,o);w.set("className",f),o.shapeMap[f]=w}},afterUpdate:function(e,t){},setState:function(e,t,r){var n,a,o,s=r.get("keyShape");if(!(!s||s.destroyed)){var u=r.getType(),f=(0,d.isBoolean)(t)?e:"".concat(e,":").concat(t),c=this.getStateStyle(f,r),l=r.getStateStyle(f);if(!(!l&&!c)){var b=(0,d.mix)({},l||c),w=r.getContainer(),I={x:1,y:1,cx:1,cy:1,matrix:1};if(u==="combo"&&(I.r=1,I.width=1,I.height=1),t){var W=function(Mr){var En,yn=b[Mr];if((0,d.isPlainObject)(yn)&&!ev.includes(Mr)){var Ar=((o=w.shapeMap)===null||o===void 0?void 0:o[Mr])||w.find(function(Xr){return Xr.get("name")===Mr});Ar==null||Ar.attr(yn)}else s.attr((En={},En[Mr]=yn,En))};for(var H in b)W(H)}else{var J=Js(r.getCurrentStatesStyle()),at=r.getModel(),ut=(0,d.mix)({},at.style,Js(r.getOriginStyle())),lt=s.get("name"),_t=s.attr(),Bt={};Object.keys(_t).forEach(function(zr){if(zr!=="img"){var Mr=_t[zr];Mr&&$v(Mr)==="object"?Bt[zr]=(0,d.clone)(Mr):Bt[zr]=Mr}});var Rt={},Qt=function(Mr){var En=b[Mr];if((0,d.isPlainObject)(En)&&!ev.includes(Mr)){var yn=w.shapeMap[Mr]||w.find(function(sn){return sn.get("name")===Mr});if(yn){var Ar=Js(yn.attr());(0,d.each)(En,function(sn,un){if(Mr===lt&&Bt[un]&&!I[un]){delete Bt[un];var An=ut[Mr][un]||rv[u][un];s.attr(un,An)}else if(Ar[un]||Ar[un]===0){delete Ar[un];var Gn=ut[Mr][un]||rv[u][un];yn.attr(un,Gn)}}),Rt[Mr]=Ar}}else if(Bt[Mr]&&!I[Mr]){delete Bt[Mr];var Xr=ut[Mr]||(ut[lt]?ut[lt][Mr]:void 0)||rv[u][Mr];s.attr(Mr,Xr)}};for(var de in b)Qt(de);lt?Rt[lt]=Bt:(0,d.mix)(Rt,Bt);for(var H in J)if(!I[H]){var se=J[H];(!(0,d.isPlainObject)(se)||ev.includes(H))&&(lt?((0,d.mix)(ut[lt],(a={},a[H]=se,a)),delete ut[H]):(0,d.mix)(ut,(n={},n[H]=se,n)),delete J[H])}var Te={};(0,d.deepMix)(Te,ut,Rt,J);var je=!1,Dr=function(Mr){var En,yn,Ar=Te[Mr];if((0,d.isPlainObject)(Ar)&&!ev.includes(Mr)){var Xr=w.shapeMap[Mr]||w.find(function(un){return un.get("name")===Mr});Xr&&((Xr.get("type")==="text"||Xr.get("labelRelated"))&&(delete Ar.x,delete Ar.y,delete Ar.matrix),Mr===lt&&(u==="combo"&&(delete Ar.r,delete Ar.width,delete Ar.height),je=!0),Xr.attr(Ar))}else if(!je){var sn=Ar||rv[u][Mr];u==="combo"?lt||s.attr((En={},En[Mr]=sn,En)):s.attr((yn={},yn[Mr]=sn,yn))}};for(var Kr in Te)Dr(Kr)}}}},getStateStyle:function(e,t){var r=t.getModel(),n=t.getType(),a=this.getOptions(r),o=a.stateStyles,s=a.style,u=s===void 0?{}:s,f=r.stateStyles?r.stateStyles[e]:o&&o[e];return n==="combo"?(0,d.clone)(f):(0,d.mix)({},u,f)},getControlPoints:function(e){return e.controlPoints},getAnchorPoints:function(e){var t,r,n=(e==null?void 0:e.anchorPoints)||((t=this.getCustomConfig(e))===null||t===void 0?void 0:t.anchorPoints)||((r=this.options)===null||r===void 0?void 0:r.anchorPoints);return n}},$y={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:jt.nodeLabel.offset,getSize:function(e){var t,r=((t=this.mergeStyle)===null||t===void 0?void 0:t.size)||e.size||this.getOptions({}).size||jt.defaultNode.size;return(0,d.isArray)(r)&&r.length===1&&(r=[r[0],r[0]]),(0,d.isArray)(r)||(r=[r,r]),r},getLabelStyleByPosition:function(e,t){var r=t.maxLength,n=e.label;r&&(n=Au(n,r));var a=t.position||this.labelPosition;if(a==="center")return{x:0,y:0,text:n,textBaseline:"middle",textAlign:"center"};var o=t.offset;(0,d.isNil)(o)&&(o=this.offset);var s=this.getSize(e),u;switch(a){case"top":u={x:0,y:-s[1]/2-o,textBaseline:"bottom",textAlign:"center"};break;case"bottom":u={x:0,y:s[1]/2+o,textBaseline:"top",textAlign:"center"};break;case"left":u={x:-s[0]/2-o,y:0,textBaseline:"middle",textAlign:"right"};break;default:u={x:s[0]/2+o,y:0,textBaseline:"middle",textAlign:"left"};break}return u.text=n,u},getLabelBgStyleByPosition:function(e,t){var r;if(!e)return{};var n=(r=t.style)===null||r===void 0?void 0:r.background;if(!n)return{};var a=e.getBBox(),o=Gv(n.padding),s=a.width+o[1]+o[3],u=a.height+o[0]+o[2];return(0,m.__assign)((0,m.__assign)({x:a.minX-o[3],y:a.minY-o[0]},n),{width:s,height:u})},drawShape:function(e,t){var r=this.shapeType,n=this.getShapeStyle(e),a=t.addShape(r,{attrs:n,draggable:!0,name:"node-shape"});return t.shapeMap["node-shape"]=a,a},updateLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=t.shapeMap["link-point-left"]||t.find(function(Te){return Te.get("className")==="link-point-left"}),a=t.shapeMap["link-point-right"]||t.find(function(Te){return Te.get("className")==="link-point-right"}),o=t.shapeMap["link-point-top"]||t.find(function(Te){return Te.get("className")==="link-point-top"}),s=t.shapeMap["link-point-bottom"]||t.find(function(Te){return Te.get("className")==="link-point-bottom"}),u;n&&(u=n.attr()),a&&!u&&(u=a.attr()),o&&!u&&(u=o.attr()),s&&!u&&(u=s.attr()),u||(u=r);var f=(0,d.mix)({},u,e.linkPoints),c=f.fill,l=f.stroke,b=f.lineWidth,w=f.size/2;w||(w=f.r);var I=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},W=I.left,H=I.right,J=I.top,at=I.bottom,ut=this.getSize(e),lt=ut[0],_t=ut[1],Bt={r:w,fill:c,stroke:l,lineWidth:b};if(n)!W&&W!==void 0?(n.remove(),delete t.shapeMap["link-point-left"]):n.attr((0,m.__assign)((0,m.__assign)({},Bt),{x:-lt/2,y:0}));else if(W){var Rt="link-point-left";t.shapeMap[Rt]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},Bt),{x:-lt/2,y:0}),className:Rt,name:Rt,isAnchorPoint:!0})}if(a)!H&&H!==void 0&&(a.remove(),delete t.shapeMap["link-point-right"]),a.attr((0,m.__assign)((0,m.__assign)({},Bt),{x:lt/2,y:0}));else if(H){var Qt="link-point-right";t.shapeMap[Qt]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},Bt),{x:lt/2,y:0}),className:Qt,name:Qt,isAnchorPoint:!0})}if(o)!J&&J!==void 0&&(o.remove(),delete t.shapeMap["link-point-top"]),o.attr((0,m.__assign)((0,m.__assign)({},Bt),{x:0,y:-_t/2}));else if(J){var de="link-point-top";t.shapeMap[de]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},Bt),{x:0,y:-_t/2}),className:de,name:de,isAnchorPoint:!0})}if(s)!at&&at!==void 0?(s.remove(),delete t.shapeMap["link-point-bottom"]):s.attr((0,m.__assign)((0,m.__assign)({},Bt),{x:0,y:_t/2}));else if(at){var se="link-point-bottom";t.shapeMap[se]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},Bt),{x:0,y:_t/2}),className:se,name:se,isAnchorPoint:!0})}},updateShape:function(e,t,r,n,a){var o=t.get("keyShape");o.attr((0,m.__assign)({},r)),this.updateLabel(e,t,a),n&&this.updateIcon(e,t)},updateIcon:function(e,t){var r=this,n=t.getContainer(),a=(this.mergeStyle||this.getOptions(e)).icon,o=e.icon?e.icon:{show:void 0,text:void 0},s=o.show,u=o.text,f=n.shapeMap["".concat(this.type,"-icon")]||n.find(function(J){return J.get("name")==="".concat(r.type,"-icon")});if(f)if(s||s===void 0){var c=(0,d.mix)({},f.attr(),a),l=c.width,b=l===void 0?20:l,w=c.height,I=w===void 0?20:w;(c.fontFamily==="iconfont"||c.hasOwnProperty("text"))&&(b=0,I=0),f.attr((0,m.__assign)((0,m.__assign)({},c),{x:-b/2,y:-I/2}))}else f.remove(),delete n.shapeMap["".concat(this.type,"-icon")];else if(s){var W="".concat(this.type,"-icon");if(u)n.shapeMap[W]=n.addShape("text",{attrs:(0,m.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},a),className:W,name:W});else{var b=a.width,I=a.height;n.shapeMap[W]=n.addShape("image",{attrs:(0,m.__assign)((0,m.__assign)({},a),{x:-b/2,y:-I/2}),className:W,name:W})}var H=n.shapeMap["node-label"]||n.find(function(J){return J.get("name")==="node-label"});H&&H.toFront()}}},qy=(0,m.__assign)((0,m.__assign)({},Jv),$y);vs.registerNode("single-node",qy);var nv="edge-shape";function Qy(i){var e=i;return i==="start"?e="end":i==="end"&&(e="start"),e}var Jy={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:jt.defaultEdge.size,style:{x:0,y:0,stroke:jt.defaultEdge.style.stroke,lineAppendWidth:jt.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:jt.edgeLabel.style.fill,fontSize:jt.edgeLabel.style.fontSize,fontFamily:jt.windowFontFamily}},stateStyles:(0,m.__assign)({},jt.edgeStateStyles)},getPath:function(e){var t=[];return(0,d.each)(e,function(r,n){n===0?t.push(["M",r.x,r.y]):t.push(["L",r.x,r.y])}),t},getShapeStyle:function(e){var t=this.options.style,r={stroke:e.color},n=(0,d.mix)({},t,r,e.style),a=e.size||jt.defaultEdge.size;e=this.getPathPoints(e);var o=e.startPoint,s=e.endPoint,u=this.getControlPoints(e),f=[o];u&&(f=f.concat(u)),f.push(s);var c=this.getPath(f),l=(0,d.mix)({},jt.defaultEdge.style,{stroke:jt.defaultEdge.color,lineWidth:a,path:c},n);return l},updateShapeStyle:function(e,t,r){var n,a=t.getContainer(),o=((n=t.getKeyShape)===null||n===void 0?void 0:n.call(t))||a.shapeMap["edge-shape"],s=e.size;e=this.getPathPoints(e);var u=e.startPoint,f=e.endPoint,c=this.getControlPoints(e),l=[u];c&&(l=l.concat(c)),l.push(f);var b=o.attr(),w=e.style||{};w.stroke===void 0&&(w.stroke=e.color);var I=e.sourceNode,W=e.targetNode,H={radius:w.radius};c||(H={source:I,target:W,offset:w.offset,radius:w.radius});var J=this.getPath(l,H),at={};r==="move"?at={path:J}:(b.endArrow&&w.endArrow===!1&&(e.style.endArrow={path:""}),b.startArrow&&w.startArrow===!1&&(e.style.startArrow={path:""}),at=(0,m.__assign)({},e.style),at.lineWidth===void 0&&(at.lineWdith=((0,d.isNumber)(s)?s:s==null?void 0:s[0])||b.lineWidth),at.path===void 0&&(at.path=J),at.stroke===void 0&&(at.stroke=b.stroke||e.color)),o&&o.attr(at)},getLabelStyleByPosition:function(e,t,r){var n=t.position||this.labelPosition,a={},o=r==null?void 0:r.shapeMap[nv],s;n==="start"?s=0:n==="end"?s=1:s=.5;var u=t.refX||this.refX,f=t.refY||this.refY;if(e.startPoint.x===e.endPoint.x&&e.startPoint.y===e.endPoint.y)return a.x=e.startPoint.x+u,a.y=e.startPoint.y+f,a.text=e.label,a;var c;(0,d.isNil)(t.autoRotate)?c=this.labelAutoRotate:c=t.autoRotate;var l=ao(o,s,u,f,c);return a.x=l.x,a.y=l.y,a.rotate=l.rotate,a.textAlign=this._getTextAlign(n,l.angle),a.text=e.label,a},getLabelBgStyleByPosition:function(e,t){if(!e)return{};var r=e.getBBox(),n=t.style&&t.style.background;if(!n)return{};var a=n.padding,o=r.width+a[1]+a[3],s=r.height+a[0]+a[2],u=(0,m.__assign)((0,m.__assign)({},n),{width:o,height:s,x:r.minX-a[3],y:r.minY-a[0],matrix:[1,0,0,0,1,0,0,0,1]}),f;return(0,d.isNil)(t.autoRotate)?f=this.labelAutoRotate:f=t.autoRotate,f&&(u.matrix=e.attr("matrix")||[1,0,0,0,1,0,0,0,1]),u},_getTextAlign:function(e,t){var r="center";return t?(t=t%(Math.PI*2),e!=="center"&&(t>=0&&t<=Math.PI/2||t>=3/2*Math.PI&&t<2*Math.PI?r=e:r=Qy(e)),r):e},getControlPoints:function(e){return e.controlPoints},getPathPoints:function(e){return e},drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("path",{className:nv,name:nv,attrs:r});return t.shapeMap[nv]=n,n},drawLabel:function(e,t){var r=this.options.labelCfg,n=(0,d.deepMix)({},r,e.labelCfg),a=this.getLabelStyle(e,n,t),o=a.rotate;delete a.rotate;var s=t.addShape("text",{attrs:a,name:"text-shape",labelRelated:!0,draggable:!0});if(t.shapeMap["text-shape"]=s,!isNaN(o)&&o!==""&&s.rotateAtStart(o),a.background){var u=this.drawLabelBg(e,t,s,a,o),f=this.itemType+Qv;u.set("classname",f),t.shapeMap[f]=u,s.toFront()}return s},drawLabelBg:function(e,t,r,n,a){var o=this.options.labelCfg,s=(0,d.deepMix)({},o,e.labelCfg),u=this.getLabelBgStyleByPosition(r,s),f=t.addShape("rect",{name:"text-bg-shape",attrs:u,labelRelated:!0});return t.shapeMap["text-bg-shape"]=f,f}},tm=(0,m.__assign)((0,m.__assign)({},Jv),Jy);vs.registerEdge("single-edge",tm),vs.registerEdge("line",{getControlPoints:function(){}},"single-edge"),vs.registerEdge("spline",{getPath:function(e){var t=fg(e);return t}},"single-edge"),vs.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(e){var t=e.startPoint,r=e.endPoint,n={x:(t.x+r.x)/2,y:(t.y+r.y)/2},a,o;if(e.controlPoints!==void 0){if(o=e.controlPoints[0],a=Do(t,o,r),t.x<=r.x&&t.y>r.y?this.clockwise=a.x>o.x?0:1:t.x<=r.x&&t.y<r.y?this.clockwise=a.x>o.x?1:0:t.x>r.x&&t.y<=r.y?this.clockwise=a.y<o.y?0:1:this.clockwise=a.y<o.y?1:0,(o.x-t.x)/(o.y-t.y)===(r.x-t.x)/(r.y-t.y))return[]}else{e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),(0,d.isArray)(e.curveOffset)&&(e.curveOffset=e.curveOffset[0]),e.curveOffset<0?this.clockwise=0:this.clockwise=1;var s={x:r.x-t.x,y:r.y-t.y},u=Math.atan2(s.y,s.x);o={x:e.curveOffset*Math.cos(-Math.PI/2+u)+n.x,y:e.curveOffset*Math.sin(-Math.PI/2+u)+n.y},a=Do(t,o,r)}var f=Wo(t,a),c=[{x:f,y:f}];return c},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),e.length===2?t.push(["L",e[1].x,e[1].y]):t.push(["A",e[1].x,e[1].y,0,0,this.clockwise,e[2].x,e[2].y]),t}},"single-edge"),vs.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(e){var t=e.controlPoints;if(!t||!t.length){var r=e.startPoint,n=e.endPoint;e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),(0,d.isArray)(e.curveOffset)&&(e.curveOffset=e.curveOffset[0]),(0,d.isArray)(e.curvePosition)&&(e.curvePosition=e.curveOffset[0]);var a=tv(r,n,e.curvePosition,e.curveOffset);t=[a]}return t},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),t.push(["Q",e[1].x,e[1].y,e[2].x,e[2].y]),t}},"single-edge"),vs.registerEdge("cubic",{curvePosition:[1/2,1/2],curveOffset:[-20,20],getControlPoints:function(e){var t=e.controlPoints;if(e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),(0,d.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,d.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]),!t||!t.length||t.length<2){var r=e.startPoint,n=e.endPoint,a=tv(r,n,e.curvePosition[0],e.curveOffset[0]),o=tv(r,n,e.curvePosition[1],e.curveOffset[1]);t=[a,o]}return t},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),t.push(["C",e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y]),t}},"single-edge"),vs.registerEdge("cubic-vertical",{curvePosition:[1/2,1/2],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(e){var t=e.startPoint,r=e.endPoint;e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.minCurveOffset===void 0&&(e.minCurveOffset=this.minCurveOffset),(0,d.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,d.isNumber)(e.minCurveOffset)&&(e.minCurveOffset=[e.minCurveOffset,-e.minCurveOffset]),(0,d.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]);var n=r.y-t.y,a=[0,0];e.curveOffset?a=e.curveOffset:Math.abs(n)<Math.abs(e.minCurveOffset[0])&&(a=e.minCurveOffset);var o={x:t.x,y:t.y+n*this.curvePosition[0]+a[0]},s={x:r.x,y:r.y-n*this.curvePosition[1]+a[1]};return[o,s]}},"cubic"),vs.registerEdge("cubic-horizontal",{curvePosition:[1/2,1/2],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(e){var t=e.startPoint,r=e.endPoint;e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.minCurveOffset===void 0&&(e.minCurveOffset=this.minCurveOffset),(0,d.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,d.isNumber)(e.minCurveOffset)&&(e.minCurveOffset=[e.minCurveOffset,-e.minCurveOffset]),(0,d.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]);var n=r.x-t.x,a=[0,0];e.curveOffset?a=e.curveOffset:Math.abs(n)<Math.abs(e.minCurveOffset[0])&&(a=e.minCurveOffset);var o={x:t.x+n*this.curvePosition[0]+a[0],y:t.y},s={x:r.x-n*this.curvePosition[1]+a[1],y:r.y},u=[o,s];return u}},"cubic"),vs.registerEdge("loop",{getPathPoints:function(e){return Zi(e)},getControlPoints:function(e){return e.controlPoints},afterDraw:function(e){e.controlPoints=void 0},afterUpdate:function(e){e.controlPoints=void 0}},"cubic");var em={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:jt.comboLabel.refX,refY:jt.comboLabel.refY,options:{style:{stroke:jt.defaultCombo.style.stroke,fill:jt.defaultCombo.style.fill,lineWidth:jt.defaultCombo.style.lineWidth},labelCfg:{style:{fill:jt.comboLabel.style.fill,fontSize:jt.comboLabel.style.fontSize,fontFamily:jt.windowFontFamily}},stateStyles:(0,m.__assign)({},jt.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},getSize:function(e){var t=(0,d.clone)(e.size||this.options.size||jt.defaultCombo.size);return(0,d.isArray)(t)&&t.length===1&&(t=[t[0],t[0]]),(0,d.isArray)(t)||(t=[t,t]),t},getLabelStyleByPosition:function(e,t){var r=t.position||this.labelPosition,n=e.style,a=e.padding||this.options.padding;(0,d.isArray)(a)&&(a=Math.max.apply(Math,a));var o=t.refX,s=t.refY;(0,d.isNil)(o)&&(o=this.refX),(0,d.isNil)(s)&&(s=this.refY);var u=this.getSize(e),f=Math.max(n.r,u[0]/2)||u[0]/2,c=f+a,l;switch(r){case"top":l={x:0,y:-c-s,textBaseline:"bottom",textAlign:"center"};break;case"bottom":l={x:0,y:c+s,textBaseline:"bottom",textAlign:"center"};break;case"left":l={x:-c+o,y:0,textAlign:"left"};break;case"center":l={x:0,y:0,text:e.label,textAlign:"center"};break;default:l={x:c+o,y:0,textAlign:"right"};break}return l.text=e.label,l},drawShape:function(e,t){var r=this.shapeType,n=this.getShapeStyle(e),a=t.addShape(r,{attrs:n,draggable:!0,name:"combo-shape"});return a},updateCollapsedIcon:function(e,t,r){var n=e.collapsed,a=e.collapsedSubstituteIcon,o=a===void 0?{}:a,s=Object.assign({},this.options.collapsedSubstituteIcon,o),u=s.show,f=s.img,c=s.width,l=s.height,b=t.getContainer(),w=b.find(function(J){return J.get("name")==="combo-collapsed-substitute-icon"}),I=w&&!w.destroyed,W=t.get("keyShape");if(n&&u){if(I)w.show();else{var H={width:c||r.r*2||r.width,height:l||r.r*2||r.height};w=b.addShape("image",{attrs:(0,m.__assign)({img:f,x:-H.width/2,y:-H.height/2},H),name:"combo-collapsed-substitute-icon",draggable:!0})}W.hide()}else I&&(w.hide(),W.show())},updateShape:function(e,t,r){var n=this,a=t.get("keyShape"),o=t.get("animate"),s=o&&(e.animate===void 0?this.options.animate:e.animate);s&&a.animate?(e.collapsed||this.updateCollapsedIcon(e,t,r),a.animate(r,{duration:200,easing:"easeLinear",callback:function(){e.collapsed&&n.updateCollapsedIcon(e,t,r)}})):(a.attr((0,m.__assign)({},r)),this.updateCollapsedIcon(e,t,r)),this.updateLabel(e,t)}},rm=(0,m.__assign)((0,m.__assign)({},Jv),em);vs.registerCombo("single-combo",rm),vs.registerCombo("circle",{options:{size:[jt.defaultCombo.size[0],jt.defaultCombo.size[0]],padding:Math.max.apply(Math,jt.defaultCombo.padding),animate:!0,style:{stroke:jt.defaultCombo.style.stroke,fill:jt.defaultCombo.style.fill,lineWidth:jt.defaultCombo.style.lineWidth},labelCfg:{style:{fill:jt.comboLabel.style.fill,fontSize:jt.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:(0,m.__assign)({},jt.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"circle",labelPosition:"top",drawShape:function(e,t){var r=this.getShapeStyle(e);delete r.height,delete r.width;var n=t.addShape("circle",{attrs:r,className:"circle-combo",name:"circle-combo",draggable:!0});return n},getShapeStyle:function(e){var t=this.options.style,r=e.padding||this.options.padding;(0,d.isArray)(r)&&(r=Math.max.apply(Math,r));var n={stroke:e.color},a=(0,d.mix)({},t,n,e.style),o=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize,s;if(o)s=(0,d.isNumber)(o)?o/2:o[0]/2;else{var u=this.getSize(e);!(0,d.isNumber)(a.r)||isNaN(a.r)?s=u[0]/2||jt.defaultCombo.style.r:s=Math.max(a.r,u[0]/2)||u[0]/2}a.r=s+r;var f=(0,m.__assign)({x:0,y:0},a);return e.style?e.style.r=s:e.style={r:s},f},update:function(e,t){var r=this.getSize(e),n=e.padding||this.options.padding;(0,d.isArray)(n)&&(n=Math.max.apply(Math,n));var a=(0,d.clone)(e.style),o=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize,s;o?s=(0,d.isNumber)(o)?o/2:o[0]/2:s=Math.max(a.r,r[0]/2)||r[0]/2,a.r=s+n;var u=t.get("sizeCache");u&&(u.r=a.r);var f={stroke:e.color},c=t.get("keyShape"),l=(0,d.mix)({},c.attr(),f,a);e.style?e.style.r=s:e.style={r:s},this.updateShape(e,t,l,!0)}},"single-combo"),vs.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:jt.defaultCombo.style.stroke,fill:jt.defaultCombo.style.fill,lineWidth:jt.defaultCombo.style.lineWidth},labelCfg:{style:{fill:jt.comboLabel.style.fill,fontSize:jt.comboLabel.style.fontSize,fontFamily:jt.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,m.__assign)({},jt.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"rect",labelPosition:"top",drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("rect",{attrs:r,className:"rect-combo",name:"rect-combo",draggable:!0});return n},getLabelStyleByPosition:function(e,t){var r=t.position||this.labelPosition,n=e.style,a=e.padding||this.options.padding;(0,d.isNumber)(a)&&(a=[a,a,a,a]);var o=t.refX,s=t.refY;(0,d.isNil)(o)&&(o=this.refX),(0,d.isNil)(s)&&(s=this.refY);var u=-n.width/2-a[3],f=n.width/2+a[1],c=-n.height/2-a[0],l=n.height/2+a[2],b;switch(r){case"top":b={x:u+o,y:c+s,textBaseline:"top",textAlign:"left"};break;case"bottom":b={x:0,y:l+s,textBaseline:"top",textAlign:"center"};break;case"left":b={x:u+s,y:0,textAlign:"left"};break;case"center":b={x:0,y:0,text:e.label,textAlign:"center"};break;case"top-center":b={x:0,y:c+s,textBaseline:"top",textAlign:"center"};break;default:b={x:f+o,y:0,textAlign:"right"};break}return b.text=e.label,b},getShapeStyle:function(e){var t=this.options.style,r=e.padding||this.options.padding;(0,d.isNumber)(r)&&(r=[r,r,r,r]);var n={stroke:e.color},a=(0,d.mix)({},t,n,e.style),o=this.getSize(e),s,u,f=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;f?(0,d.isNumber)(f)?(s=f,u=f):(s=f[0],u=f[1]):(!(0,d.isNumber)(a.width)||isNaN(a.width)?s=o[0]||jt.defaultCombo.style.width:s=Math.max(a.width,o[0])||o[0],!(0,d.isNumber)(a.height)||isNaN(a.height)?u=o[1]||jt.defaultCombo.style.height:u=Math.max(a.height,o[1])||o[1]);var c=-s/2-r[3],l=-u/2-r[0];a.width=s+r[1]+r[3],a.height=u+r[0]+r[2];var b=(0,m.__assign)({x:c,y:l},a);return e.style?(e.style.width=s,e.style.height=u):e.style={width:s,height:u},b},update:function(e,t){var r=this.getSize(e),n=e.padding||this.options.padding;(0,d.isNumber)(n)&&(n=[n,n,n,n]);var a=(0,d.clone)(e.style),o,s,u=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;u?(0,d.isNumber)(u)?(o=u,s=u):(o=u[0],s=u[1]):(o=Math.max(a.width,r[0])||r[0],s=Math.max(a.height,r[1])||r[1]),a.width=o+n[1]+n[3],a.height=s+n[0]+n[2];var f=t.get("sizeCache");f&&(f.width=a.width,f.height=a.height),a.x=-o/2-n[3],a.y=-s/2-n[0];var c={stroke:e.color},l=t.get("keyShape"),b=(0,d.mix)({},l.attr(),c,a);e.style?(e.style.width=o,e.style.height=s):e.style={width:o,height:s},this.updateShape(e,t,b,!1)}},"single-combo"),vs.registerNode("simple-circle",{options:{size:jt.defaultNode.size,style:{x:0,y:0,stroke:jt.defaultNode.style.stroke,fill:jt.defaultNode.style.fill,lineWidth:jt.defaultNode.style.lineWidth},labelCfg:{style:{fill:jt.nodeLabel.style.fill,fontSize:jt.nodeLabel.style.fontSize,fontFamily:jt.windowFontFamily}},stateStyles:(0,m.__assign)({},jt.nodeStateStyles)},shapeType:"simple-circle",labelPosition:"center",shapeMap:{},drawShape:function(e,t){var r=this.getShapeStyle(e),n="".concat(this.type,"-keyShape"),a=t.addShape("circle",{attrs:r,className:"".concat(this.type,"-keyShape"),name:n,draggable:!0});return t.shapeMap[n]=a,a},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,d.deepMix)({},t,r),a=this.getSize(e),o=a[0]/2,s=(0,m.__assign)({x:0,y:0,r:o},n);return s},update:function(e,t,r){var n=this.getSize(e),a={stroke:e.color,r:n[0]/2},o=t.get("keyShape"),s=(0,d.deepMix)({},o.attr(),a,e.style);this.updateShape(e,t,s,!0,r)}},"single-node"),vs.registerNode("simple-rect",{options:{size:[100,30],style:{radius:0,stroke:jt.defaultNode.style.stroke,fill:jt.defaultNode.style.fill,lineWidth:jt.defaultNode.style.lineWidth},labelCfg:{style:{fill:jt.nodeLabel.style.fill,fontSize:jt.nodeLabel.style.fontSize,fontFamily:jt.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,m.__assign)({},jt.nodeStateStyles)},shapeType:"simple-rect",labelPosition:"center",drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("rect",{attrs:r,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return n},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,d.mix)({},t,r),a=this.getSize(e),o=n.width||a[0],s=n.height||a[1],u=(0,m.__assign)({x:-o/2,y:-s/2,width:o,height:s},n);return u},update:function(e,t,r){var n=t.getContainer(),a=(this.mergeStyle||this.getOptions(e)).style,o=this.getSize(e),s=t.get("keyShape");e.size||(o[0]=s.attr("width")||a.width,o[1]=s.attr("height")||a.height);var u={stroke:e.color,x:-o[0]/2,y:-o[1]/2,width:o[0],height:o[1]},f=(0,d.mix)({},a,s.attr(),u);f=(0,d.mix)(f,e.style),this.updateShape(e,t,f,!1,r)}},"single-node"),vs.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,labelCfg:{style:{fontFamily:jt.windowFontFamily}},clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(e,t){var r=this.shapeType,n=this.getShapeStyle(e);delete n.fill;var a=t.addShape(r,{attrs:n,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return this.drawClip(e,a),a},drawClip:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).clipCfg;if(r.show){var n=r.type,a=r.x,o=r.y,s=r.style;if(n==="circle"){var u=r.r;t.setClip({type:"circle",attrs:(0,m.__assign)({r:u,x:a,y:o},s)})}else if(n==="rect"){var f=r.width,c=r.height,l=a-f/2,b=o-c/2;t.setClip({type:"rect",attrs:(0,m.__assign)({x:l,y:b,width:f,height:c},s)})}else if(n==="ellipse"){var w=r.rx,I=r.ry;t.setClip({type:"ellipse",attrs:(0,m.__assign)({x:a,y:o,rx:w,ry:I},s)})}else if(n==="polygon"){var W=r.points;t.setClip({type:"polygon",attrs:(0,m.__assign)({points:W},s)})}else if(n==="path"){var H=r.path;t.setClip({type:"path",attrs:(0,m.__assign)({path:H},s)})}}},getShapeStyle:function(e){var t=this.mergeStyle||this.getOptions(e),r=t.style,n=t.img,a=this.getSize(e),o=a[0],s=a[1];r&&(o=r.width||a[0],s=r.height||a[1]);var u=(0,m.__assign)({x:-o/2,y:-s/2,width:o,height:s,img:n},r);return u},updateShapeStyle:function(e,t){var r=t.getContainer(),n="".concat(this.itemType,"-shape"),a=r.shapeMap[n]||r.find(function(s){return s.get("className")===n})||t.getKeyShape(),o=this.getShapeStyle(e);a&&!a.destroyed&&a.attr(o)}},"single-node");var wg={triangle:function(e,t,r){e===void 0&&(e=10),t===void 0&&(t=15),r===void 0&&(r=0);var n=r*2,a="M ".concat(n,",0 L ").concat(n+t,",-").concat(e/2," L ").concat(n+t,",").concat(e/2," Z");return a},vee:function(e,t,r){e===void 0&&(e=15),t===void 0&&(t=20),r===void 0&&(r=0);var n=r*2,a="M ".concat(n,",0 L ").concat(n+t,",-").concat(e/2,`
        L `).concat(n+2*t/3,",0 L ").concat(n+t,",").concat(e/2," Z");return a},circle:function(e,t){e===void 0&&(e=5),t===void 0&&(t=0);var r=t*2,n="M ".concat(r,`, 0
            a `).concat(e,",").concat(e," 0 1,0 ").concat(e*2,`,0
            a `).concat(e,",").concat(e," 0 1,0 ").concat(-e*2,",0");return n},rect:function(e,t,r){e===void 0&&(e=10),t===void 0&&(t=10),r===void 0&&(r=0);var n=r*2,a="M ".concat(n,",").concat(-e/2,` 
        L `).concat(n+t,",").concat(-e/2,` 
        L `).concat(n+t,",").concat(e/2,` 
        L `).concat(n,",").concat(e/2," Z");return a},diamond:function(e,t,r){e===void 0&&(e=15),t===void 0&&(t=15),r===void 0&&(r=0);var n=r*2,a="M ".concat(n,`,0 
        L `).concat(n+t/2,",").concat(-e/2,` 
        L `).concat(n+t,`,0 
        L `).concat(n+t/2,",").concat(e/2," Z");return a},triangleRect:function(e,t,r,n,a,o){e===void 0&&(e=15),t===void 0&&(t=15),r===void 0&&(r=15),n===void 0&&(n=3),a===void 0&&(a=5),o===void 0&&(o=0);var s=o*2,u=s+t+a,f="M ".concat(s,",0 L ").concat(s+t,",-").concat(e/2," L ").concat(s+t,",").concat(e/2,` Z
            M `).concat(u,", -").concat(r/2,`
            L `).concat(u+n," -").concat(r/2,`
            L `).concat(u+n," ").concat(r/2,`
            L `).concat(u," ").concat(r/2,`
            Z`);return f}},_g={collapse:function(e,t,r){return[["M",e-r,t],["a",r,r,0,1,0,r*2,0],["a",r,r,0,1,0,-r*2,0],["M",e-r+4,t],["L",e+r-4,t]]},expand:function(e,t,r){return[["M",e-r,t],["a",r,r,0,1,0,r*2,0],["a",r,r,0,1,0,-r*2,0],["M",e-r+4,t],["L",e-r+2*r-4,t],["M",e-r+r,t-r+4],["L",e,t+r-4]]},upTriangle:function(e,t,r){var n=r*Math.cos(Math.PI/6),a=r*Math.sin(Math.PI/6);return[["M",e-n,t+a],["L",e+n,t+a],["L",e,t-r],["Z"]]},downTriangle:function(e,t,r){var n=r*Math.cos(Math.PI/6),a=r*Math.sin(Math.PI/6);return[["M",e-n,t-a],["L",e+n,t-a],["L",e,t+r],["Z"]]}},jc=vs,nm=["#5F95FF","#61DDAA","#65789B","#F6BD16","#7262FD","#78D3F8","#9661BC","#F6903D","#008685","#F08BB4"],Sg=function(e){return e==="force"||e==="g6force"||e==="gForce"||e==="force2"},am=Kt,im=(0,m.__assign)((0,m.__assign)((0,m.__assign)((0,m.__assign)((0,m.__assign)((0,m.__assign)((0,m.__assign)({},N),R),E),X),x),p),{transform:am,mat3:it}),_s=im,om=function(){function i(e){this.graph=e,this.layoutCfg=e.get("layout")||{},this.layoutType=this.getLayoutType(),this.layoutMethods=[],this.initLayout()}return i.prototype.initLayout=function(){},i.prototype.getLayoutType=function(){return this.getLayoutCfgType(this.layoutCfg)},i.prototype.getLayoutCfgType=function(e){var t=e.type;if(t)return t;var r=e.pipes;return Array.isArray(r)?r.map(function(n){return(n==null?void 0:n.type)||""}):null},i.prototype.isLayoutTypeSame=function(e){var t=this.getLayoutCfgType(e),r=Array.isArray(this.layoutType),n=Array.isArray(t);return r&&n?this.layoutType.every(function(a,o){return a===t[o]}):Array.isArray(t)||Array.isArray(this.layoutType)?!1:(e==null?void 0:e.type)===this.layoutType},i.prototype.refreshLayout=function(){var e=this,t=e.graph,r=e.layoutType,n=e.layoutCfg,a=n===void 0?{}:n;if(t){var o=a.animate,s=o===void 0&&(r==="force"||r==="force2"),u=Sg(r)&&(o||s);t.get("animate")&&!u?t.positionsAnimate(r==="comboCombined"):t.refreshPositions(r==="comboCombined")}},i.prototype.changeLayout=function(e){var t=e.disableTriggerLayout,r=(0,m.__rest)(e,["disableTriggerLayout"]);this.layoutCfg=r,this.layoutType=r.type||this.layoutType,!t&&this.layout()},i.prototype.changeData=function(e){this.layout(e)},i.prototype.destoryLayoutMethods=function(){var e=this.layoutMethods,t=[];return e==null||e.forEach(function(r){var n,a=(n=r.getType)===null||n===void 0?void 0:n.call(r);a&&t.push(a),r.destroy()}),this.layoutMethods=[],t},i.prototype.destroyLayout=function(){this.destoryLayoutMethods();var e=this.graph;e&&!e.get("destroyed")&&e.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0},i.prototype.setDataFromGraph=function(){for(var e,t=[],r=[],n=[],a=[],o=[],s=[],u=[],f=this.graph.getNodes(),c=this.graph.getEdges(),l=this.graph.getCombos(),b=f.length,w=0;w<b;w++){var I=f[w];if(!(!I||I.destroyed)){var W=I.getModel();if(!I.isVisible()){r.push(W);continue}t.push(W)}}for(var H=c.length,w=0;w<H;w++){var J=c[w];if(!(!J||J.destroyed)){var W=J.getModel();if(!J.isVisible()){a.push(W);continue}W.isComboEdge?o.push(W):n.push(W)}}for(var at=l.length,w=0;w<at;w++){var ut=l[w];if(!ut.destroyed){var W=ut.getModel();if(!ut.isVisible()){u.push(W);continue}s.push(W)}}return{nodes:t,hiddenNodes:r,edges:n,hiddenEdges:a,combos:s,hiddenCombos:u,comboEdges:o,vedges:(e=this.graph.get("vedges"))===null||e===void 0?void 0:e.map(function(lt){return lt.getModel()})}},i.prototype.relayout=function(e){var t=this,r=this,n=r.graph,a=r.layoutMethods,o=r.layoutCfg;if(!(!n||n.get("destroyed"))){var s=Promise.resolve();if(e){this.data=this.setDataFromGraph();var u=this.data.nodes;if(!u)return!1;s=this.initPositions(o.center,u)}n.emit("beforelayout"),a==null||a.forEach(function(f,c){var l=o[c]||o;s=s.then(function(){var b,w=t.execLayoutMethod(l,c);return c===a.length-1&&((b=o.onAllLayoutEnd)===null||b===void 0||b.call(o)),w})})}},i.prototype.filterLayoutData=function(e,t){var r=e.nodes,n=e.edges,a=(0,m.__rest)(e,["nodes","edges"]);if(!r)return e;var o,s;(0,d.isFunction)(t==null?void 0:t.nodesFilter)?o=t.nodesFilter:o=function(){return!0};var u=r.filter(o);if((0,d.isFunction)(t==null?void 0:t.edgesFilter))s=t.edgesFilter;else{var f=u.reduce(function(c,l){return c[l.id]=!0,c},{});s=function(l){return f[l.source]&&f[l.target]}}return(0,m.__assign)({nodes:u,edges:n.filter(s)},a)},i.prototype.getLayoutBBox=function(e){var t=this.graph,r=(0,d.groupBy)(t.getNodes(),function(o){return o.getModel().layoutOrder}),n=Object.values(r).map(function(o){var s=Hd(o);return s.size=[s.width,s.height],s}),a=Object.values((0,d.groupBy)(e,"layoutOrder"));return{groupNodes:a,layoutNodes:n}},i.prototype.layoutAnimate=function(){},i.prototype.moveToZero=function(){var e=this.graph,t=e.get("data"),r=t.nodes;if(!(r[0].x===void 0||r[0].x===null||Af(r[0].x))){for(var n=[0,0],a=r.length,o=0;o<a;o++){var s=r[o];n[0]+=s.x,n[1]+=s.y}n[0]/=r.length,n[1]/=r.length;for(var o=0;o<a;o++){var s=r[o];s.x-=n[0],s.y-=n[1]}}},i.prototype.initPositions=function(e,t){var r;return(0,m.__awaiter)(this,void 0,void 0,function(){var n,a,o;return(0,m.__generator)(this,function(s){return n=this.graph,t!=null&&t.length?(a=t.filter(function(u){return Af(u.x)||Af(u.y)}),o=a?a.length:0,o?[2,(r=this.initWithPreset)===null||r===void 0?void 0:r.call(this,function(){},function(){var u=n.get("width")*.85,f=n.get("height")*.85,c=Math.ceil(Math.sqrt(o)*(u/f)),l=Math.ceil(o/c),b=u/(c-1),w=f/(l-1);(!isFinite(b)||!b)&&(b=0),(!isFinite(w)||!b)&&(w=0);for(var I=e[0]-u/2,W=e[1]-f/2,H=!0,J=0;J<o;J++){var at=a[J];Af(+at.x)&&(H=!1,at.x=J%c*b+I),Af(+at.y)&&(H=!1,at.y=Math.floor(J/c)*w+W)}})]:[2]):[2,Promise.resolve()]})})},i.prototype.destroy=function(){this.graph=null,this.destoryLayoutMethods(),this.destroyed=!0},i}(),Mg=om,sm=function(){function i(e){this.graph=e,this.destroyed=!1,this.initEvents()}return i}(),Ag=sm,cc=jc.registerNode,Cg=jc.registerEdge,um=jc.registerCombo,Tg=$.registerBehavior,bn=jt,N_={version:jt.version,AbstractGraph:xg,BaseGlobal:bn,Util:_s,Shape:jc,Node:jv,Edge:rg,Combo:og,Hull:mg,registerNode:jc.registerNode,registerEdge:jc.registerEdge,registerCombo:jc.registerCombo,registerBehavior:$.registerBehavior,Arrow:wg,Marker:_g,AbstractLayout:Mg,AbstractEvent:Ag},fm=z(810369);function cm(){return window?window.devicePixelRatio:1}function Ig(i,e,t,r){var n=i-t,a=e-r;return Math.sqrt(n*n+a*a)}function Il(i,e,t,r,n,a){return n>=i&&n<=i+t&&a>=e&&a<=e+r}function Ah(i,e){return!(e.minX>i.maxX||e.maxX<i.minX||e.minY>i.maxY||e.maxY<i.minY)}function lm(i,e){return!i||!e?i||e:{minX:Math.min(i.minX,e.minX),minY:Math.min(i.minY,e.minY),maxX:Math.max(i.maxX,e.maxX),maxY:Math.max(i.maxY,e.maxY)}}function Og(i,e){return i[0]===e[0]&&i[1]===e[1]}var hm=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,vm=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,dm=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,Lg=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function Dg(i,e){var t=i.match(Lg);(0,d.each)(t,function(r){var n=r.split(":");e.addColorStop(n[0],n[1])})}function gm(i,e,t){var r=hm.exec(t),n=parseFloat(r[1])%360*(Math.PI/180),a=r[2],o=e.getBBox(),s,u;n>=0&&n<1/2*Math.PI?(s={x:o.minX,y:o.minY},u={x:o.maxX,y:o.maxY}):1/2*Math.PI<=n&&n<Math.PI?(s={x:o.maxX,y:o.minY},u={x:o.minX,y:o.maxY}):Math.PI<=n&&n<3/2*Math.PI?(s={x:o.maxX,y:o.maxY},u={x:o.minX,y:o.minY}):(s={x:o.minX,y:o.maxY},u={x:o.maxX,y:o.minY});var f=Math.tan(n),c=f*f,l=(u.x-s.x+f*(u.y-s.y))/(c+1)+s.x,b=f*(u.x-s.x+f*(u.y-s.y))/(c+1)+s.y,w=i.createLinearGradient(s.x,s.y,l,b);return Dg(a,w),w}function pm(i,e,t){var r=vm.exec(t),n=parseFloat(r[1]),a=parseFloat(r[2]),o=parseFloat(r[3]),s=r[4];if(o===0){var u=s.match(Lg);return u[u.length-1].split(":")[1]}var f=e.getBBox(),c=f.maxX-f.minX,l=f.maxY-f.minY,b=Math.sqrt(c*c+l*l)/2,w=i.createRadialGradient(f.minX+c*n,f.minY+l*a,0,f.minX+c/2,f.minY+l/2,o*b);return Dg(s,w),w}function ym(i,e,t){if(e.get("patternSource")&&e.get("patternSource")===t)return e.get("pattern");var r,n,a=dm.exec(t),o=a[1],s=a[2];function u(){r=i.createPattern(n,o),e.set("pattern",r),e.set("patternSource",t)}switch(o){case"a":o="repeat";break;case"x":o="repeat-x";break;case"y":o="repeat-y";break;case"n":o="no-repeat";break;default:o="no-repeat"}return n=new Image,s.match(/^data:/i)||(n.crossOrigin="Anonymous"),n.src=s,n.complete?u():(n.onload=u,n.src=n.src),r}function mm(i,e,t){var r=e.getBBox();if(isNaN(r.x)||isNaN(r.y)||isNaN(r.width)||isNaN(r.height))return t;if((0,d.isString)(t)){if(t[1]==="("||t[2]==="("){if(t[0]==="l")return gm(i,e,t);if(t[0]==="r")return pm(i,e,t);if(t[0]==="p")return ym(i,e,t)}return t}if(t instanceof CanvasPattern)return t}function xm(i){var e=0,t=0,r=0,n=0;return(0,d.isArray)(i)?i.length===1?e=t=r=n=i[0]:i.length===2?(e=r=i[0],t=n=i[1]):i.length===3?(e=i[0],t=n=i[1],r=i[2]):(e=i[0],t=i[1],r=i[2],n=i[3]):e=t=r=n=i,[e,t,r,n]}function av(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function td(i,e){return av(i)*av(e)?(i[0]*e[0]+i[1]*e[1])/(av(i)*av(e)):1}function Ng(i,e){return(i[0]*e[1]<i[1]*e[0]?-1:1)*Math.acos(td(i,e))}function Pg(i,e){var t=e[1],r=e[2],n=(0,d.mod)((0,d.toRadian)(e[3]),Math.PI*2),a=e[4],o=e[5],s=i[0],u=i[1],f=e[6],c=e[7],l=Math.cos(n)*(s-f)/2+Math.sin(n)*(u-c)/2,b=-1*Math.sin(n)*(s-f)/2+Math.cos(n)*(u-c)/2,w=l*l/(t*t)+b*b/(r*r);w>1&&(t*=Math.sqrt(w),r*=Math.sqrt(w));var I=t*t*(b*b)+r*r*(l*l),W=I?Math.sqrt((t*t*(r*r)-I)/I):1;a===o&&(W*=-1),isNaN(W)&&(W=0);var H=r?W*t*b/r:0,J=t?W*-r*l/t:0,at=(s+f)/2+Math.cos(n)*H-Math.sin(n)*J,ut=(u+c)/2+Math.sin(n)*H+Math.cos(n)*J,lt=[(l-H)/t,(b-J)/r],_t=[(-1*l-H)/t,(-1*b-J)/r],Bt=Ng([1,0],lt),Rt=Ng(lt,_t);return td(lt,_t)<=-1&&(Rt=Math.PI),td(lt,_t)>=1&&(Rt=0),o===0&&Rt>0&&(Rt=Rt-2*Math.PI),o===1&&Rt<0&&(Rt=Rt+2*Math.PI),{cx:at,cy:ut,rx:Og(i,[f,c])?0:t,ry:Og(i,[f,c])?0:r,startAngle:Bt,endAngle:Bt+Rt,xRotation:n,arcFlag:a,sweepFlag:o}}var iv=Math.sin,ov=Math.cos,ed=Math.atan2,sv=Math.PI;function kg(i,e,t,r,n,a,o){var s=e.stroke,u=e.lineWidth,f=t-n,c=r-a,l=ed(c,f),b=new ud({type:"path",canvas:i.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*ov(sv/6)+","+10*iv(sv/6)+" L0,0 L"+10*ov(sv/6)+",-"+10*iv(sv/6),stroke:s,lineWidth:u}});b.translate(n,a),b.rotateAtPoint(n,a,l),i.set(o?"startArrowShape":"endArrowShape",b)}function Rg(i,e,t,r,n,a,o){var s=e.startArrow,u=e.endArrow,f=e.stroke,c=e.lineWidth,l=o?s:u,b=l.d,w=l.fill,I=l.stroke,W=l.lineWidth,H=(0,m.__rest)(l,["d","fill","stroke","lineWidth"]),J=t-n,at=r-a,ut=ed(at,J);b&&(n=n-ov(ut)*b,a=a-iv(ut)*b);var lt=new ud({type:"path",canvas:i.get("canvas"),isArrowShape:!0,attrs:(0,m.__assign)((0,m.__assign)({},H),{stroke:I||f,lineWidth:W||c,fill:w})});lt.translate(n,a),lt.rotateAtPoint(n,a,ut),i.set(o?"startArrowShape":"endArrowShape",lt)}function Ol(i,e,t,r,n){var a=ed(r-e,t-i);return{dx:ov(a)*n,dy:iv(a)*n}}function rd(i,e,t,r,n,a){typeof e.startArrow=="object"?Rg(i,e,t,r,n,a,!0):e.startArrow?kg(i,e,t,r,n,a,!0):i.set("startArrowShape",null)}function nd(i,e,t,r,n,a){typeof e.endArrow=="object"?Rg(i,e,t,r,n,a,!1):e.endArrow?kg(i,e,t,r,n,a,!1):i.set("startArrowShape",null)}var Bg={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function hh(i,e){var t=e.attr();for(var r in t){var n=t[r],a=Bg[r]?Bg[r]:r;a==="matrix"&&n?i.transform(n[0],n[1],n[3],n[4],n[6],n[7]):a==="lineDash"&&i.setLineDash?(0,d.isArray)(n)&&i.setLineDash(n):(a==="strokeStyle"||a==="fillStyle"?n=mm(i,e,n):a==="globalAlpha"&&(n=n*i.globalAlpha),i[a]=n)}}function ad(i,e,t){for(var r=0;r<e.length;r++){var n=e[r];n.cfg.visible?n.draw(i,t):n.skipDraw()}}function bm(i,e,t){var r=i.get("refreshElements");(0,d.each)(r,function(n){if(n!==i)for(var a=n.cfg.parent;a&&a!==i&&!a.cfg.refresh;)a.cfg.refresh=!0,a=a.cfg.parent}),r[0]===i?od(e,t):id(e,t)}function id(i,e){for(var t=0;t<i.length;t++){var r=i[t];if(r.cfg.visible)if(r.cfg.hasChanged)r.cfg.refresh=!0,r.isGroup()&&od(r.cfg.children,e);else if(r.cfg.refresh)r.isGroup()&&id(r.cfg.children,e);else{var n=Em(r,e);r.cfg.refresh=n,n&&r.isGroup()&&id(r.cfg.children,e)}}}function Fg(i){for(var e=0;e<i.length;e++){var t=i[e];t.cfg.hasChanged=!1,t.isGroup()&&!t.destroyed&&Fg(t.cfg.children)}}function od(i,e){for(var t=0;t<i.length;t++){var r=i[t];r.cfg.visible&&(r.cfg.refresh=!0,r.isGroup()&&od(r.get("children"),e))}}function Em(i,e){var t=i.cfg.cacheCanvasBBox,r=i.cfg.isInView&&t&&Ah(t,e);return r}function Gg(i,e,t,r){var n=t.path,a=t.startArrow,o=t.endArrow;if(n){var s=[0,0],u=[0,0],f={dx:0,dy:0};e.beginPath();for(var c=0;c<n.length;c++){var l=n[c],b=l[0];if(c===0&&a&&a.d){var w=i.getStartTangent();f=Ol(w[0][0],w[0][1],w[1][0],w[1][1],a.d)}else if(c===n.length-2&&n[c+1][0]==="Z"&&o&&o.d){var I=n[c+1];if(I[0]==="Z"){var w=i.getEndTangent();f=Ol(w[0][0],w[0][1],w[1][0],w[1][1],o.d)}}else if(c===n.length-1&&o&&o.d&&n[0]!=="Z"){var w=i.getEndTangent();f=Ol(w[0][0],w[0][1],w[1][0],w[1][1],o.d)}var W=f.dx,H=f.dy;switch(b){case"M":e.moveTo(l[1]-W,l[2]-H),u=[l[1],l[2]];break;case"L":e.lineTo(l[1]-W,l[2]-H);break;case"Q":e.quadraticCurveTo(l[1],l[2],l[3]-W,l[4]-H);break;case"C":e.bezierCurveTo(l[1],l[2],l[3],l[4],l[5]-W,l[6]-H);break;case"A":{var J=void 0;r?(J=r[c],J||(J=Pg(s,l),r[c]=J)):J=Pg(s,l);var at=J.cx,ut=J.cy,lt=J.rx,_t=J.ry,Bt=J.startAngle,Rt=J.endAngle,Qt=J.xRotation,de=J.sweepFlag;if(e.ellipse)e.ellipse(at,ut,lt,_t,Qt,Bt,Rt,1-de);else{var se=lt>_t?lt:_t,Te=lt>_t?1:lt/_t,je=lt>_t?_t/lt:1;e.translate(at,ut),e.rotate(Qt),e.scale(Te,je),e.arc(0,0,se,Bt,Rt,1-de),e.scale(1/Te,1/je),e.rotate(-Qt),e.translate(-at,-ut)}break}case"Z":e.closePath();break;default:break}if(b==="Z")s=u;else{var Dr=l.length;s=[l[Dr-2],l[Dr-1]]}}}}function zg(i,e){var t=i.get("canvas");t&&(e==="remove"&&(i._cacheCanvasBBox=i.get("cacheCanvasBBox")),i.get("hasChanged")||(i.set("hasChanged",!0),i.cfg.parent&&i.cfg.parent.get("hasChanged")||(t.refreshElement(i,e,t),t.get("autoDraw")&&t.draw())))}function wm(i){var e;if(i.destroyed)e=i._cacheCanvasBBox;else{var t=i.get("cacheCanvasBBox"),r=t&&!!(t.width&&t.height),n=i.getCanvasBBox(),a=n&&!!(n.width&&n.height);r&&a?e=lm(t,n):r?e=t:a&&(e=n)}return e}function _m(i){if(!i.length)return null;var e=[],t=[],r=[],n=[];return(0,d.each)(i,function(a){var o=wm(a);o&&(e.push(o.minX),t.push(o.minY),r.push(o.maxX),n.push(o.maxY))}),{minX:(0,d.min)(e),minY:(0,d.min)(t),maxX:(0,d.max)(r),maxY:(0,d.max)(n)}}function Sm(i,e){return!i||!e||!Ah(i,e)?null:{minX:Math.max(i.minX,e.minX),minY:Math.max(i.minY,e.minY),maxX:Math.min(i.maxX,e.maxX),maxY:Math.min(i.maxY,e.maxY)}}var Mm=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.onCanvasChange=function(t){zg(this,t)},e.prototype.getShapeBase=function(){return y},e.prototype.getGroupBase=function(){return e},e.prototype._applyClip=function(t,r){r&&(t.save(),hh(t,r),r.createPath(t),t.restore(),t.clip(),r._afterDraw())},e.prototype.cacheCanvasBBox=function(){var t=this.cfg.children,r=[],n=[];(0,d.each)(t,function(b){var w=b.cfg.cacheCanvasBBox;w&&b.cfg.isInView&&(r.push(w.minX,w.maxX),n.push(w.minY,w.maxY))});var a=null;if(r.length){var o=(0,d.min)(r),s=(0,d.max)(r),u=(0,d.min)(n),f=(0,d.max)(n);a={minX:o,minY:u,x:o,y:u,maxX:s,maxY:f,width:s-o,height:f-u};var c=this.cfg.canvas;if(c){var l=c.getViewRange();this.set("isInView",Ah(a,l))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",a)},e.prototype.draw=function(t,r){var n=this.cfg.children,a=r?this.cfg.refresh:!0;n.length&&a&&(t.save(),hh(t,this),this._applyClip(t,this.getClip()),ad(t,n,r),t.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},e}(Yc),Ug=Mm,Am=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,m.__assign)((0,m.__assign)({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.getShapeBase=function(){return y},e.prototype.getGroupBase=function(){return Ug},e.prototype.onCanvasChange=function(t){zg(this,t)},e.prototype.calculateBBox=function(){var t=this.get("type"),r=this.getHitLineWidth(),n=Tl(t),a=n(this),o=r/2,s=a.x-o,u=a.y-o,f=a.x+a.width+o,c=a.y+a.height+o;return{x:s,minX:s,y:u,minY:u,width:a.width+r,height:a.height+r,maxX:f,maxY:c}},e.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},e.prototype.isStroke=function(){return!!this.attrs.stroke},e.prototype._applyClip=function(t,r){r&&(t.save(),hh(t,r),r.createPath(t),t.restore(),t.clip(),r._afterDraw())},e.prototype.draw=function(t,r){var n=this.cfg.clipShape;if(r){if(this.cfg.refresh===!1){this.set("hasChanged",!1);return}var a=this.getCanvasBBox();if(!Ah(r,a)){this.set("hasChanged",!1),this.cfg.isInView&&this._afterDraw();return}}t.save(),hh(t,this),this._applyClip(t,n),this.drawPath(t),t.restore(),this._afterDraw()},e.prototype.getCanvasViewBox=function(){var t=this.cfg.canvas;return t?t.getViewRange():null},e.prototype.cacheCanvasBBox=function(){var t=this.getCanvasViewBox();if(t){var r=this.getCanvasBBox(),n=Ah(r,t);this.set("isInView",n),n?this.set("cacheCanvasBBox",r):this.set("cacheCanvasBBox",null)}},e.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},e.prototype.drawPath=function(t){this.createPath(t),this.strokeAndFill(t),this.afterDrawPath(t)},e.prototype.fill=function(t){t.fill()},e.prototype.stroke=function(t){t.stroke()},e.prototype.strokeAndFill=function(t){var r=this.attrs,n=r.lineWidth,a=r.opacity,o=r.strokeOpacity,s=r.fillOpacity;this.isFill()&&(!(0,d.isNil)(s)&&s!==1?(t.globalAlpha=s,this.fill(t),t.globalAlpha=a):this.fill(t)),this.isStroke()&&n>0&&(!(0,d.isNil)(o)&&o!==1&&(t.globalAlpha=o),this.stroke(t)),this.afterDrawPath(t)},e.prototype.createPath=function(t){},e.prototype.afterDrawPath=function(t){},e.prototype.isInShape=function(t,r){var n=this.isStroke(),a=this.isFill(),o=this.getHitLineWidth();return this.isInStrokeOrPath(t,r,n,a,o)},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){return!1},e.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var t=this.attrs;return t.lineWidth+t.lineAppendWidth},e}(Cl),qu=Am,Cm=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,m.__assign)((0,m.__assign)({},t),{x:0,y:0,r:0})},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.attr(),u=s.x,f=s.y,c=s.r,l=o/2,b=Ig(u,f,t,r);return a&&n?b<=c+l:a?b<=c:n?b>=c-l&&b<=c+l:!1},e.prototype.createPath=function(t){var r=this.attr(),n=r.x,a=r.y,o=r.r;t.beginPath(),t.arc(n,a,o,0,Math.PI*2,!1),t.closePath()},e}(qu),Tm=Cm;function uv(i,e,t,r){return i/(t*t)+e/(r*r)}var Im=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,m.__assign)((0,m.__assign)({},t),{x:0,y:0,rx:0,ry:0})},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.attr(),u=o/2,f=s.x,c=s.y,l=s.rx,b=s.ry,w=(t-f)*(t-f),I=(r-c)*(r-c);return a&&n?uv(w,I,l+u,b+u)<=1:a?uv(w,I,l,b)<=1:n?uv(w,I,l-u,b-u)>=1&&uv(w,I,l+u,b+u)<=1:!1},e.prototype.createPath=function(t){var r=this.attr(),n=r.x,a=r.y,o=r.rx,s=r.ry;if(t.beginPath(),t.ellipse)t.ellipse(n,a,o,s,0,0,Math.PI*2,!1);else{var u=o>s?o:s,f=o>s?1:o/s,c=o>s?s/o:1;t.save(),t.translate(n,a),t.scale(f,c),t.arc(0,0,u,0,Math.PI*2),t.restore(),t.closePath()}},e}(qu),Om=Im;function Wg(i){return i instanceof HTMLElement&&(0,d.isString)(i.nodeName)&&i.nodeName.toUpperCase()==="CANVAS"}var Lm=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,m.__assign)((0,m.__assign)({},t),{x:0,y:0,width:0,height:0})},e.prototype.initAttrs=function(t){this._setImage(t.img)},e.prototype.isStroke=function(){return!1},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var t=this.get("canvas");t?t.draw():this.createPath(this.get("context"))}},e.prototype._setImage=function(t){var r=this,n=this.attrs;if((0,d.isString)(t)){var a=new Image;a.onload=function(){if(r.destroyed)return!1;r.attr("img",a),r.set("loading",!1),r._afterLoading();var o=r.get("callback");o&&o.call(r)},a.crossOrigin="Anonymous",a.src=t,this.set("loading",!0)}else t instanceof Image?(n.width||(n.width=t.width),n.height||(n.height=t.height)):Wg(t)&&(n.width||(n.width=Number(t.getAttribute("width"))),n.height||(n.height,Number(t.getAttribute("height"))))},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),t==="img"&&this._setImage(r)},e.prototype.createPath=function(t){if(this.get("loading")){this.set("toDraw",!0),this.set("context",t);return}var r=this.attr(),n=r.x,a=r.y,o=r.width,s=r.height,u=r.sx,f=r.sy,c=r.swidth,l=r.sheight,b=r.img;(b instanceof Image||Wg(b))&&(!(0,d.isNil)(u)&&!(0,d.isNil)(f)&&!(0,d.isNil)(c)&&!(0,d.isNil)(l)?t.drawImage(b,u,f,c,l,n,a,o,s):t.drawImage(b,n,a,o,s))},e}(qu),Dm=Lm;function Hc(i,e,t,r,n,a,o){var s=Math.min(i,t),u=Math.max(i,t),f=Math.min(e,r),c=Math.max(e,r),l=n/2;return a>=s-l&&a<=u+l&&o>=f-l&&o<=c+l?hr.pointToLine(i,e,t,r,a,o)<=n/2:!1}var Nm=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,m.__assign)((0,m.__assign)({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),this.setArrow()},e.prototype.setArrow=function(){var t=this.attr(),r=t.x1,n=t.y1,a=t.x2,o=t.y2,s=t.startArrow,u=t.endArrow;s&&rd(this,t,a,o,r,n),u&&nd(this,t,r,n,a,o)},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){if(!n||!o)return!1;var s=this.attr(),u=s.x1,f=s.y1,c=s.x2,l=s.y2;return Hc(u,f,c,l,o,t,r)},e.prototype.createPath=function(t){var r=this.attr(),n=r.x1,a=r.y1,o=r.x2,s=r.y2,u=r.startArrow,f=r.endArrow,c={dx:0,dy:0},l={dx:0,dy:0};u&&u.d&&(c=Ol(n,a,o,s,r.startArrow.d)),f&&f.d&&(l=Ol(n,a,o,s,r.endArrow.d)),t.beginPath(),t.moveTo(n+c.dx,a+c.dy),t.lineTo(o-l.dx,s-l.dy)},e.prototype.afterDrawPath=function(t){var r=this.get("startArrowShape"),n=this.get("endArrowShape");r&&r.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr(),r=t.x1,n=t.y1,a=t.x2,o=t.y2;return hr.length(r,n,a,o)},e.prototype.getPoint=function(t){var r=this.attr(),n=r.x1,a=r.y1,o=r.x2,s=r.y2;return hr.pointAt(n,a,o,s,t)},e}(qu),Pm=Nm,km={circle:function(i,e,t){return[["M",i-t,e],["A",t,t,0,1,0,i+t,e],["A",t,t,0,1,0,i-t,e]]},square:function(i,e,t){return[["M",i-t,e-t],["L",i+t,e-t],["L",i+t,e+t],["L",i-t,e+t],["Z"]]},diamond:function(i,e,t){return[["M",i-t,e],["L",i,e-t],["L",i+t,e],["L",i,e+t],["Z"]]},triangle:function(i,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",i-t,e+r],["L",i,e-r],["L",i+t,e+r],["Z"]]},"triangle-down":function(i,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",i-t,e-r],["L",i+t,e-r],["L",i,e+r],["Z"]]}},Rm=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.initAttrs=function(t){this._resetParamsCache()},e.prototype._resetParamsCache=function(){this.set("paramsCache",{})},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),["symbol","x","y","r","radius"].indexOf(t)!==-1&&this._resetParamsCache()},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._getR=function(t){return(0,d.isNil)(t.r)?t.radius:t.r},e.prototype._getPath=function(){var t=this.attr(),r=t.x,n=t.y,a=t.symbol||"circle",o=this._getR(t),s,u;if((0,d.isFunction)(a))s=a,u=s(r,n,o),u=Ve(u);else{if(s=e.Symbols[a],!s)return console.warn(a+" marker is not supported."),null;u=s(r,n,o)}return u},e.prototype.createPath=function(t){var r=this._getPath(),n=this.get("paramsCache");Gg(this,t,{path:r},n)},e.Symbols=km,e}(qu),Bm=Rm;function Xg(i,e,t){var r=Qi();return i.createPath(r),r.isPointInPath(e,t)}var Fm=1e-6;function sd(i){return Math.abs(i)<Fm?0:i<0?-1:1}function Gm(i,e,t){return(t[0]-i[0])*(e[1]-i[1])===(e[0]-i[0])*(t[1]-i[1])&&Math.min(i[0],e[0])<=t[0]&&t[0]<=Math.max(i[0],e[0])&&Math.min(i[1],e[1])<=t[1]&&t[1]<=Math.max(i[1],e[1])}function Yg(i,e,t){var r=!1,n=i.length;if(n<=2)return!1;for(var a=0;a<n;a++){var o=i[a],s=i[(a+1)%n];if(Gm(o,s,[e,t]))return!0;sd(o[1]-t)>0!=sd(s[1]-t)>0&&sd(e-(t-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(r=!r)}return r}function Ch(i,e,t,r,n,a,o,s){var u=(Math.atan2(s-e,o-i)+Math.PI*2)%(Math.PI*2);if(u<r||u>n)return!1;var f={x:i+t*Math.cos(u),y:e+t*Math.sin(u)};return Ig(f.x,f.y,o,s)<=a/2}var zm=Kt;function Um(i){for(var e=!1,t=i.length,r=0;r<t;r++){var n=i[r],a=n[0];if(a==="C"||a==="A"||a==="Q"){e=!0;break}}return e}function Wm(i,e,t,r,n){for(var a=!1,o=e/2,s=0;s<i.length;s++){var u=i[s],f=u.currentPoint,c=u.params,l=u.prePoint,b=u.box;if(!(b&&!Il(b.x-o,b.y-o,b.width+e,b.height+e,t,r))){switch(u.command){case"L":case"Z":a=Hc(l[0],l[1],f[0],f[1],e,t,r);break;case"Q":var w=Z.pointDistance(l[0],l[1],c[1],c[2],c[3],c[4],t,r);a=w<=e/2;break;case"C":var I=Gt.pointDistance(l[0],l[1],c[1],c[2],c[3],c[4],c[5],c[6],t,r,n);a=I<=e/2;break;case"A":var W=u.arcParams,H=W.cx,J=W.cy,at=W.rx,ut=W.ry,lt=W.startAngle,_t=W.endAngle,Bt=W.xRotation,Rt=[t,r,1],Qt=at>ut?at:ut,de=at>ut?1:at/ut,se=at>ut?ut/at:1,Te=zm(null,[["t",-H,-J],["r",-Bt],["s",1/de,1/se]]);Wi.transformMat3(Rt,Rt,Te),a=Ch(0,0,Qt,lt,_t,e,Rt[0],Rt[1]);break;default:break}if(a)break}}return a}function Xm(i){for(var e=i.length,t=[],r=[],n=[],a=0;a<e;a++){var o=i[a],s=o[0];s==="M"?(n.length&&(r.push(n),n=[]),n.push([o[1],o[2]])):s==="Z"?n.length&&(t.push(n),n=[]):n.push([o[1],o[2]])}return n.length>0&&r.push(n),{polygons:t,polylines:r}}var fv=(0,m.__assign)({hasArc:Um,extractPolygons:Xm,isPointInStroke:Wm},L);function Vg(i,e,t){for(var r=!1,n=0;n<i.length;n++){var a=i[n];if(r=Yg(a,e,t),r)break}return r}var Ym=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,m.__assign)((0,m.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this._setPathArr(t.path),this.setArrow()},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),t==="path"&&this._setPathArr(r),this.setArrow()},e.prototype._setPathArr=function(t){this.attrs.path=Ve(t);var r=fv.hasArc(t);this.set("hasArc",r),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},e.prototype.getSegments=function(){var t=this.get("segements");return t||(t=Yd(this.attr("path")),this.set("segments",t)),t},e.prototype.setArrow=function(){var t=this.attr(),r=t.startArrow,n=t.endArrow;if(r){var a=this.getStartTangent();rd(this,t,a[0][0],a[0][1],a[1][0],a[1][1])}if(n){var a=this.getEndTangent();nd(this,t,a[0][0],a[0][1],a[1][0],a[1][1])}},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.getSegments(),u=this.get("hasArc"),f=!1;if(n){var c=this.getTotalLength();f=fv.isPointInStroke(s,o,t,r,c)}if(!f&&a)if(u)f=Xg(this,t,r);else{var l=this.attr("path"),b=fv.extractPolygons(l);f=Vg(b.polygons,t,r)||Vg(b.polylines,t,r)}return f},e.prototype.createPath=function(t){var r=this.attr(),n=this.get("paramsCache");Gg(this,t,r,n)},e.prototype.afterDrawPath=function(t){var r=this.get("startArrowShape"),n=this.get("endArrowShape");r&&r.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.get("totalLength");return(0,d.isNil)(t)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):t},e.prototype.getPoint=function(t){var r=this.get("tCache");r||(this._calculateCurve(),this._setTcache(),r=this.get("tCache"));var n,a,o=this.get("curve");if(!r||r.length===0)return o?{x:o[0][1],y:o[0][2]}:null;(0,d.each)(r,function(c,l){t>=c[0]&&t<=c[1]&&(n=(t-c[0])/(c[1]-c[0]),a=l)});var s=o[a];if((0,d.isNil)(s)||(0,d.isNil)(a))return null;var u=s.length,f=o[a+1];return Gt.pointAt(s[u-2],s[u-1],f[1],f[2],f[3],f[4],f[5],f[6],n)},e.prototype._calculateCurve=function(){var t=this.attr().path;this.set("curve",fv.pathToCurve(t))},e.prototype._setTcache=function(){var t=0,r=0,n=[],a,o,s,u,f=this.get("curve");if(f){if((0,d.each)(f,function(c,l){s=f[l+1],u=c.length,s&&(t+=Gt.length(c[u-2],c[u-1],s[1],s[2],s[3],s[4],s[5],s[6])||0)}),this.set("totalLength",t),t===0){this.set("tCache",[]);return}(0,d.each)(f,function(c,l){s=f[l+1],u=c.length,s&&(a=[],a[0]=r/t,o=Gt.length(c[u-2],c[u-1],s[1],s[2],s[3],s[4],s[5],s[6]),r+=o||0,a[1]=r/t,n.push(a))}),this.set("tCache",n)}},e.prototype.getStartTangent=function(){var t=this.getSegments(),r;if(t.length>1){var n=t[0].currentPoint,a=t[1].currentPoint,o=t[1].startTangent;r=[],o?(r.push([n[0]-o[0],n[1]-o[1]]),r.push([n[0],n[1]])):(r.push([a[0],a[1]]),r.push([n[0],n[1]]))}return r},e.prototype.getEndTangent=function(){var t=this.getSegments(),r=t.length,n;if(r>1){var a=t[r-2].currentPoint,o=t[r-1].currentPoint,s=t[r-1].endTangent;n=[],s?(n.push([o[0]-s[0],o[1]-s[1]]),n.push([o[0],o[1]])):(n.push([a[0],a[1]]),n.push([o[0],o[1]]))}return n},e}(qu),ud=Ym;function jg(i,e,t,r,n){var a=i.length;if(a<2)return!1;for(var o=0;o<a-1;o++){var s=i[o][0],u=i[o][1],f=i[o+1][0],c=i[o+1][1];if(Hc(s,u,f,c,e,t,r))return!0}if(n){var l=i[0],b=i[a-1];if(Hc(l[0],l[1],b[0],b[1],e,t,r))return!0}return!1}var Vm=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.attr().points,u=!1;return n&&(u=jg(s,o,t,r,!0)),!u&&a&&(u=Yg(s,t,r)),u},e.prototype.createPath=function(t){var r=this.attr(),n=r.points;if(!(n.length<2)){t.beginPath();for(var a=0;a<n.length;a++){var o=n[a];a===0?t.moveTo(o[0],o[1]):t.lineTo(o[0],o[1])}t.closePath()}},e}(qu),jm=Vm,Hm=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,m.__assign)((0,m.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),this.setArrow(),["points"].indexOf(t)!==-1&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.setArrow=function(){var t=this.attr(),r=this.attrs,n=r.points,a=r.startArrow,o=r.endArrow,s=n.length,u=n[0][0],f=n[0][1],c=n[s-1][0],l=n[s-1][1];a&&rd(this,t,n[1][0],n[1][1],u,f),o&&nd(this,t,n[s-2][0],n[s-2][1],c,l)},e.prototype.isFill=function(){return!1},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){if(!n||!o)return!1;var s=this.attr().points;return jg(s,o,t,r,!1)},e.prototype.isStroke=function(){return!0},e.prototype.createPath=function(t){var r=this.attr(),n=r.points,a=r.startArrow,o=r.endArrow,s=n.length;if(!(n.length<2)){var u=n[0][0],f=n[0][1],c=n[s-1][0],l=n[s-1][1];if(a&&a.d){var b=Ol(u,f,n[1][0],n[1][1],a.d);u+=b.dx,f+=b.dy}if(o&&o.d){var b=Ol(n[s-2][0],n[s-2][1],c,l,o.d);c-=b.dx,l-=b.dy}t.beginPath(),t.moveTo(u,f);for(var w=0;w<s-1;w++){var I=n[w];t.lineTo(I[0],I[1])}t.lineTo(c,l)}},e.prototype.afterDrawPath=function(t){var r=this.get("startArrowShape"),n=this.get("endArrowShape");r&&r.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr().points,r=this.get("totalLength");return(0,d.isNil)(r)?(this.set("totalLength",va.length(t)),this.get("totalLength")):r},e.prototype.getPoint=function(t){var r=this.attr().points,n=this.get("tCache");n||(this._setTcache(),n=this.get("tCache"));var a,o;return(0,d.each)(n,function(s,u){t>=s[0]&&t<=s[1]&&(a=(t-s[0])/(s[1]-s[0]),o=u)}),hr.pointAt(r[o][0],r[o][1],r[o+1][0],r[o+1][1],a)},e.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var r=this.getTotalLength();if(!(r<=0)){var n=0,a=[],o,s;(0,d.each)(t,function(u,f){t[f+1]&&(o=[],o[0]=n/r,s=hr.length(u[0],u[1],t[f+1][0],t[f+1][1]),n+=s,o[1]=n/r,a.push(o))}),this.set("tCache",a)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,r=[];return r.push([t[1][0],t[1][1]]),r.push([t[0][0],t[0][1]]),r},e.prototype.getEndTangent=function(){var t=this.attr().points,r=t.length-1,n=[];return n.push([t[r-1][0],t[r-1][1]]),n.push([t[r][0],t[r][1]]),n},e}(qu),Km=Hm;function Zm(i,e,t,r,n,a,o){var s=n/2;return Il(i-s,e-s,t,n,a,o)||Il(i+t-s,e-s,n,r,a,o)||Il(i+s,e+r-s,t,n,a,o)||Il(i-s,e+s,n,r,a,o)}function $m(i,e,t,r,n,a,o,s){var u=a/2;return Hc(i+n,e,i+t-n,e,a,o,s)||Hc(i+t,e+n,i+t,e+r-n,a,o,s)||Hc(i+t-n,e+r,i+n,e+r,a,o,s)||Hc(i,e+r-n,i,e+n,a,o,s)||Ch(i+t-n,e+n,n,1.5*Math.PI,2*Math.PI,a,o,s)||Ch(i+t-n,e+r-n,n,0,.5*Math.PI,a,o,s)||Ch(i+n,e+r-n,n,.5*Math.PI,Math.PI,a,o,s)||Ch(i+n,e+n,n,Math.PI,1.5*Math.PI,a,o,s)}var qm=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,m.__assign)((0,m.__assign)({},t),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.attr(),u=s.x,f=s.y,c=s.width,l=s.height,b=s.radius;if(b){var I=!1;return n&&(I=$m(u,f,c,l,b,o,t,r)),!I&&a&&(I=Xg(this,t,r)),I}else{var w=o/2;if(a&&n)return Il(u-w,f-w,c+w,l+w,t,r);if(a)return Il(u,f,c,l,t,r);if(n)return Zm(u,f,c,l,o,t,r)}},e.prototype.createPath=function(t){var r=this.attr(),n=r.x,a=r.y,o=r.width,s=r.height,u=r.radius;if(t.beginPath(),u===0)t.rect(n,a,o,s);else{var f=xm(u),c=f[0],l=f[1],b=f[2],w=f[3];t.moveTo(n+c,a),t.lineTo(n+o-l,a),l!==0&&t.arc(n+o-l,a+l,l,-Math.PI/2,0),t.lineTo(n+o,a+s-b),b!==0&&t.arc(n+o-b,a+s-b,b,0,Math.PI/2),t.lineTo(n+w,a+s),w!==0&&t.arc(n+w,a+s-w,w,Math.PI/2,Math.PI),t.lineTo(n,a+c),c!==0&&t.arc(n+c,a+c,c,Math.PI,Math.PI*1.5),t.closePath()}},e}(qu),Qm=qm,Jm=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,m.__assign)((0,m.__assign)({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.isOnlyHitBox=function(){return!0},e.prototype.initAttrs=function(t){this._assembleFont(),t.text&&this._setText(t.text)},e.prototype._assembleFont=function(){var t=this.attrs;t.font=$n(t)},e.prototype._setText=function(t){var r=null;(0,d.isString)(t)&&t.indexOf(`
`)!==-1&&(r=t.split(`
`)),this.set("textArr",r)},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),t.startsWith("font")&&this._assembleFont(),t==="text"&&this._setText(r)},e.prototype._getSpaceingY=function(){var t=this.attrs,r=t.lineHeight,n=t.fontSize*1;return r?r-n:n*.14},e.prototype._drawTextArr=function(t,r,n){var a=this.attrs,o=a.textBaseline,s=a.x,u=a.y,f=a.fontSize*1,c=this._getSpaceingY(),l=_a(a.text,a.fontSize,a.lineHeight),b;(0,d.each)(r,function(w,I){b=u+I*(c+f)-l+f,o==="middle"&&(b+=l-f-(l-f)/2),o==="top"&&(b+=l-f),(0,d.isNil)(w)||(n?t.fillText(w,s,b):t.strokeText(w,s,b))})},e.prototype._drawText=function(t,r){var n=this.attr(),a=n.x,o=n.y,s=this.get("textArr");if(s)this._drawTextArr(t,s,r);else{var u=n.text;(0,d.isNil)(u)||(r?t.fillText(u,a,o):t.strokeText(u,a,o))}},e.prototype.strokeAndFill=function(t){var r=this.attrs,n=r.lineWidth,a=r.opacity,o=r.strokeOpacity,s=r.fillOpacity;this.isStroke()&&n>0&&(!(0,d.isNil)(o)&&o!==1&&(t.globalAlpha=a),this.stroke(t)),this.isFill()&&(!(0,d.isNil)(s)&&s!==1?(t.globalAlpha=s,this.fill(t),t.globalAlpha=a):this.fill(t)),this.afterDrawPath(t)},e.prototype.fill=function(t){this._drawText(t,!0)},e.prototype.stroke=function(t){this._drawText(t,!1)},e}(qu),t1=Jm;function e1(i,e){if(e){var t=Yu(e);return bi(t,i)}return i}function Hg(i,e,t){var r=i.getTotalMatrix();if(r){var n=e1([e,t,1],r),a=n[0],o=n[1];return[a,o]}return[e,t]}function Kg(i,e,t){if(i.isCanvas&&i.isCanvas())return!0;if(!Gf(i)||i.cfg.isInView===!1)return!1;if(i.cfg.clipShape){var r=Hg(i,e,t),n=r[0],a=r[1];if(i.isClipped(n,a))return!1}var o=i.cfg.cacheCanvasBBox||i.getCanvasBBox();return e>=o.minX&&e<=o.maxX&&t>=o.minY&&t<=o.maxY}function Zg(i,e,t){if(!Kg(i,e,t))return null;for(var r=null,n=i.getChildren(),a=n.length,o=a-1;o>=0;o--){var s=n[o];if(s.isGroup())r=Zg(s,e,t);else if(Kg(s,e,t)){var u=s,f=Hg(s,e,t),c=f[0],l=f[1];u.isInShape(c,l)&&(r=s)}if(r)break}return r}var r1=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.renderer="canvas",t.autoDraw=!0,t.localRefresh=!0,t.refreshElements=[],t.clipView=!0,t.quickHit=!1,t},e.prototype.onCanvasChange=function(t){(t==="attr"||t==="sort"||t==="changeSize")&&(this.set("refreshElements",[this]),this.draw())},e.prototype.getShapeBase=function(){return y},e.prototype.getGroupBase=function(){return Ug},e.prototype.getPixelRatio=function(){var t=this.get("pixelRatio")||cm();return t>=1?Math.ceil(t):1},e.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},e.prototype.createDom=function(){var t=document.createElement("canvas"),r=t.getContext("2d");return this.set("context",r),t},e.prototype.setDOMSize=function(t,r){i.prototype.setDOMSize.call(this,t,r);var n=this.get("context"),a=this.get("el"),o=this.getPixelRatio();a.width=o*t,a.height=o*r,o>1&&n.scale(o,o)},e.prototype.clear=function(){i.prototype.clear.call(this),this._clearFrame();var t=this.get("context"),r=this.get("el");t.clearRect(0,0,r.width,r.height)},e.prototype.getShape=function(t,r){var n;return this.get("quickHit")?n=Zg(this,t,r):n=i.prototype.getShape.call(this,t,r,null),n},e.prototype._getRefreshRegion=function(){var t=this.get("refreshElements"),r=this.getViewRange(),n;if(t.length&&t[0]===this)n=r;else if(n=_m(t),n){n.minX=Math.floor(n.minX),n.minY=Math.floor(n.minY),n.maxX=Math.ceil(n.maxX),n.maxY=Math.ceil(n.maxY),n.maxY+=1;var a=this.get("clipView");a&&(n=Sm(n,r))}return n},e.prototype.refreshElement=function(t){var r=this.get("refreshElements");r.push(t)},e.prototype._clearFrame=function(){var t=this.get("drawFrame");t&&((0,d.clearAnimationFrame)(t),this.set("drawFrame",null),this.set("refreshElements",[]))},e.prototype.draw=function(){var t=this.get("drawFrame");this.get("autoDraw")&&t||this._startDraw()},e.prototype._drawAll=function(){var t=this.get("context"),r=this.get("el"),n=this.getChildren();t.clearRect(0,0,r.width,r.height),hh(t,this),ad(t,n),this.set("refreshElements",[])},e.prototype._drawRegion=function(){var t=this.get("context"),r=this.get("refreshElements"),n=this.getChildren(),a=this._getRefreshRegion();a?(t.clearRect(a.minX,a.minY,a.maxX-a.minX,a.maxY-a.minY),t.save(),t.beginPath(),t.rect(a.minX,a.minY,a.maxX-a.minX,a.maxY-a.minY),t.clip(),hh(t,this),bm(this,n,a),ad(t,n,a),t.restore()):r.length&&Fg(r),(0,d.each)(r,function(o){o.get("hasChanged")&&o.set("hasChanged",!1)}),this.set("refreshElements",[])},e.prototype._startDraw=function(){var t=this,r=this.get("drawFrame");r||(r=(0,d.requestAnimationFrame)(function(){t.get("localRefresh")?t._drawRegion():t._drawAll(),t.set("drawFrame",null)}),this.set("drawFrame",r))},e.prototype.skipDraw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.width=0,t.height=0,t.parentNode.removeChild(t)},e}(oh),lc=r1,P_="0.5.12",fd={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},si={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"},k_=null;function ku(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function $g(i){var e=fd[i.type],t=i.getParent();if(!e)throw new Error("the type "+i.type+" is not supported by svg");var r=ku(e);if(i.get("id")&&(r.id=i.get("id")),i.set("el",r),i.set("attrs",{}),t){var n=t.get("el");n||(n=t.createDom(),t.set("el",n)),n.appendChild(r)}return r}function qg(i,e){var t=i.get("el"),r=(0,d.toArray)(t.children).sort(e),n=document.createDocumentFragment();r.forEach(function(a){n.appendChild(a)}),t.appendChild(n)}function n1(i,e){var t=i.parentNode,r=Array.from(t.childNodes).filter(function(s){return s.nodeType===1&&s.nodeName.toLowerCase()!=="defs"}),n=r[e],a=r.indexOf(i);if(n){if(a>e)t.insertBefore(i,n);else if(a<e){var o=r[e+1];o?t.insertBefore(i,o):t.appendChild(i)}}else t.appendChild(i)}function a1(i,e){var t=i.cfg.el,r=i.attr(),n={dx:r.shadowOffsetX,dy:r.shadowOffsetY,blur:r.shadowBlur,color:r.shadowColor};if(!n.dx&&!n.dy&&!n.blur&&!n.color)t.removeAttribute("filter");else{var a=e.find("filter",n);a||(a=e.addShadow(n)),t.setAttribute("filter","url(#"+a+")")}}function Th(i){var e=i.attr().matrix;if(e){for(var t=i.cfg.el,r=[],n=0;n<9;n+=3)r.push(e[n]+","+e[n+1]);r=r.join(","),r.indexOf("NaN")===-1?t.setAttribute("transform","matrix("+r+")"):console.warn("invalid matrix:",e)}}function Ih(i,e){var t=i.getClip(),r=i.get("el");if(!t)r.removeAttribute("clip-path");else if(t&&!r.hasAttribute("clip-path")){$g(t),t.createPath(e);var n=e.addClip(t);r.setAttribute("clip-path","url(#"+n+")")}}function Qg(i,e){e.forEach(function(t){t.draw(i)})}function Jg(i,e){var t=i.get("canvas");if(t&&t.get("autoDraw")){var r=t.get("context"),n=i.getParent(),a=n?n.getChildren():[t],o=i.get("el");if(e==="remove"){var s=i.get("isClipShape");if(s){var u=o&&o.parentNode,f=u&&u.parentNode;u&&f&&f.removeChild(u)}else o&&o.parentNode&&o.parentNode.removeChild(o)}else if(e==="show")o.setAttribute("visibility","visible");else if(e==="hide")o.setAttribute("visibility","hidden");else if(e==="zIndex")n1(o,a.indexOf(i));else if(e==="sort"){var c=i.get("children");c&&c.length&&qg(i,function(l,b){return c.indexOf(l)-c.indexOf(b)?1:0})}else e==="clear"?o&&(o.innerHTML=""):e==="matrix"?Th(i):e==="clip"?Ih(i,r):e==="attr"||e==="add"&&i.draw(r)}}var i1=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.isEntityGroup=function(){return!0},e.prototype.createDom=function(){var t=ku("g");this.set("el",t);var r=this.getParent();if(r){var n=r.get("el");n||(n=r.createDom(),r.set("el",n)),n.appendChild(t)}return t},e.prototype.afterAttrsChange=function(t){i.prototype.afterAttrsChange.call(this,t);var r=this.get("canvas");if(r&&r.get("autoDraw")){var n=r.get("context");this.createPath(n,t)}},e.prototype.onCanvasChange=function(t){Jg(this,t)},e.prototype.getShapeBase=function(){return g},e.prototype.getGroupBase=function(){return e},e.prototype.draw=function(t){var r=this.getChildren(),n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||this.createDom(),Ih(this,t),this.createPath(t),r.length&&Qg(t,r))},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,d.each)(r||n,function(o,s){si[s]&&a.setAttribute(si[s],o)}),Th(this)},e}(Yc),t0=i1,o1=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="svg",t.canFill=!1,t.canStroke=!1,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,m.__assign)((0,m.__assign)({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.afterAttrsChange=function(t){i.prototype.afterAttrsChange.call(this,t);var r=this.get("canvas");if(r&&r.get("autoDraw")){var n=r.get("context");this.draw(n,t)}},e.prototype.getShapeBase=function(){return g},e.prototype.getGroupBase=function(){return t0},e.prototype.onCanvasChange=function(t){Jg(this,t)},e.prototype.calculateBBox=function(){var t=this.get("el"),r=null;if(t)r=t.getBBox();else{var n=Tl(this.get("type"));n&&(r=n(this))}if(r){var a=r.x,o=r.y,s=r.width,u=r.height,f=this.getHitLineWidth(),c=f/2,l=a-c,b=o-c,w=a+s+c,I=o+u+c;return{x:l,y:b,minX:l,minY:b,maxX:w,maxY:I,width:s+f,height:u+f}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},e.prototype.isFill=function(){var t=this.attr(),r=t.fill,n=t.fillStyle;return(r||n||this.isClipShape())&&this.canFill},e.prototype.isStroke=function(){var t=this.attr(),r=t.stroke,n=t.strokeStyle;return(r||n)&&this.canStroke},e.prototype.draw=function(t,r){var n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||$g(this),Ih(this,t),this.createPath(t,r),this.shadow(t,r),this.strokeAndFill(t,r),this.transform(r))},e.prototype.createPath=function(t,r){},e.prototype.strokeAndFill=function(t,r){var n=r||this.attr(),a=n.fill,o=n.fillStyle,s=n.stroke,u=n.strokeStyle,f=n.fillOpacity,c=n.strokeOpacity,l=n.lineWidth,b=this.get("el");this.canFill&&(r?"fill"in n?this._setColor(t,"fill",a):"fillStyle"in n&&this._setColor(t,"fill",o):this._setColor(t,"fill",a||o),f&&b.setAttribute(si.fillOpacity,f)),this.canStroke&&l>0&&(r?"stroke"in n?this._setColor(t,"stroke",s):"strokeStyle"in n&&this._setColor(t,"stroke",u):this._setColor(t,"stroke",s||u),c&&b.setAttribute(si.strokeOpacity,c),l&&b.setAttribute(si.lineWidth,l))},e.prototype._setColor=function(t,r,n){var a=this.get("el");if(!n){a.setAttribute(si[r],"none");return}if(n=n.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(n)){var o=t.find("gradient",n);o||(o=t.addGradient(n)),a.setAttribute(si[r],"url(#"+o+")")}else if(/^[p,P]{1}[\s]*\(/.test(n)){var o=t.find("pattern",n);o||(o=t.addPattern(n)),a.setAttribute(si[r],"url(#"+o+")")}else a.setAttribute(si[r],n)},e.prototype.shadow=function(t,r){var n=this.attr(),a=r||n,o=a.shadowOffsetX,s=a.shadowOffsetY,u=a.shadowBlur,f=a.shadowColor;(o||s||u||f)&&a1(this,t)},e.prototype.transform=function(t){var r=this.attr(),n=(t||r).matrix;n&&Th(this)},e.prototype.isInShape=function(t,r){return this.isPointInPath(t,r)},e.prototype.isPointInPath=function(t,r){var n=this.get("el"),a=this.get("canvas"),o=a.get("el").getBoundingClientRect(),s=t+o.left,u=r+o.top,f=document.elementFromPoint(s,u);return!!(f&&f.isEqualNode(n))},e.prototype.getHitLineWidth=function(){var t=this.attrs,r=t.lineWidth,n=t.lineAppendWidth;return this.isStroke()?r+n:0},e}(Cl),Ru=o1,s1=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="circle",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,m.__assign)((0,m.__assign)({},t),{x:0,y:0,r:0})},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,d.each)(r||n,function(o,s){s==="x"||s==="y"?a.setAttribute("c"+s,o):si[s]&&a.setAttribute(si[s],o)})},e}(Ru),u1=s1,f1=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="dom",t.canFill=!1,t.canStroke=!1,t}return e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");if((0,d.each)(r||n,function(f,c){si[c]&&a.setAttribute(si[c],f)}),typeof n.html=="function"){var o=n.html.call(this,n);if(o instanceof Element||o instanceof HTMLDocument){for(var s=a.childNodes,u=s.length-1;u>=0;u--)a.removeChild(s[u]);a.appendChild(o)}else a.innerHTML=o}else a.innerHTML=n.html},e}(Ru),c1=f1,l1=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="ellipse",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,m.__assign)((0,m.__assign)({},t),{x:0,y:0,rx:0,ry:0})},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,d.each)(r||n,function(o,s){s==="x"||s==="y"?a.setAttribute("c"+s,o):si[s]&&a.setAttribute(si[s],o)})},e}(Ru),h1=l1,v1=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="image",t.canFill=!1,t.canStroke=!1,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,m.__assign)((0,m.__assign)({},t),{x:0,y:0,width:0,height:0})},e.prototype.createPath=function(t,r){var n=this,a=this.attr(),o=this.get("el");(0,d.each)(r||a,function(s,u){u==="img"?n._setImage(a.img):si[u]&&o.setAttribute(si[u],s)})},e.prototype.setAttr=function(t,r){this.attrs[t]=r,t==="img"&&this._setImage(r)},e.prototype._setImage=function(t){var r=this.attr(),n=this.get("el");if((0,d.isString)(t))n.setAttribute("href",t);else if(t instanceof window.Image)r.width||(n.setAttribute("width",t.width),this.attr("width",t.width)),r.height||(n.setAttribute("height",t.height),this.attr("height",t.height)),n.setAttribute("href",t.src);else if(t instanceof HTMLElement&&(0,d.isString)(t.nodeName)&&t.nodeName.toUpperCase()==="CANVAS")n.setAttribute("href",t.toDataURL());else if(t instanceof ImageData){var a=document.createElement("canvas");a.setAttribute("width",""+t.width),a.setAttribute("height",""+t.height),a.getContext("2d").putImageData(t,0,0),r.width||(n.setAttribute("width",""+t.width),this.attr("width",t.width)),r.height||(n.setAttribute("height",""+t.height),this.attr("height",t.height)),n.setAttribute("href",a.toDataURL())}},e}(Ru),d1=v1,g1=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="line",t.canFill=!1,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,m.__assign)((0,m.__assign)({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,d.each)(r||n,function(o,s){if(s==="startArrow"||s==="endArrow")if(o){var u=(0,d.isObject)(o)?t.addArrow(n,si[s]):t.getDefaultArrow(n,si[s]);a.setAttribute(si[s],"url(#"+u+")")}else a.removeAttribute(si[s]);else si[s]&&a.setAttribute(si[s],o)})},e.prototype.getTotalLength=function(){var t=this.attr(),r=t.x1,n=t.y1,a=t.x2,o=t.y2;return hr.length(r,n,a,o)},e.prototype.getPoint=function(t){var r=this.attr(),n=r.x1,a=r.y1,o=r.x2,s=r.y2;return hr.pointAt(n,a,o,s,t)},e}(Ru),p1=g1,cv={circle:function(i,e,t){return[["M",i,e],["m",-t,0],["a",t,t,0,1,0,t*2,0],["a",t,t,0,1,0,-t*2,0]]},square:function(i,e,t){return[["M",i-t,e-t],["L",i+t,e-t],["L",i+t,e+t],["L",i-t,e+t],["Z"]]},diamond:function(i,e,t){return[["M",i-t,e],["L",i,e-t],["L",i+t,e],["L",i,e+t],["Z"]]},triangle:function(i,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",i-t,e+r],["L",i,e-r],["L",i+t,e+r],["z"]]},triangleDown:function(i,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",i-t,e-r],["L",i+t,e-r],["L",i,e+r],["Z"]]}},e0={get:function(i){return cv[i]},register:function(i,e){cv[i]=e},remove:function(i){delete cv[i]},getAll:function(){return cv}},y1=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="marker",t.canFill=!0,t.canStroke=!0,t}return e.prototype.createPath=function(t){var r=this.get("el");r.setAttribute("d",this._assembleMarker())},e.prototype._assembleMarker=function(){var t=this._getPath();return(0,d.isArray)(t)?t.map(function(r){return r.join(" ")}).join(""):t},e.prototype._getPath=function(){var t=this.attr(),r=t.x,n=t.y,a=t.r||t.radius,o=t.symbol||"circle",s;return(0,d.isFunction)(o)?s=o:s=e0.get(o),s?s(r,n,a):(console.warn(s+" symbol is not exist."),null)},e.symbolsFactory=e0,e}(Ru),m1=y1,x1=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="path",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,m.__assign)((0,m.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,r){var n=this,a=this.attr(),o=this.get("el");(0,d.each)(r||a,function(s,u){if(u==="path"&&(0,d.isArray)(s))o.setAttribute("d",n._formatPath(s));else if(u==="startArrow"||u==="endArrow")if(s){var f=(0,d.isObject)(s)?t.addArrow(a,si[u]):t.getDefaultArrow(a,si[u]);o.setAttribute(si[u],"url(#"+f+")")}else o.removeAttribute(si[u]);else si[u]&&o.setAttribute(si[u],s)})},e.prototype._formatPath=function(t){var r=t.map(function(n){return n.join(" ")}).join("");return~r.indexOf("NaN")?"":r},e.prototype.getTotalLength=function(){var t=this.get("el");return t?t.getTotalLength():null},e.prototype.getPoint=function(t){var r=this.get("el"),n=this.getTotalLength();if(n===0)return null;var a=r?r.getPointAtLength(t*n):null;return a?{x:a.x,y:a.y}:null},e}(Ru),b1=x1,E1=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="polygon",t.canFill=!0,t.canStroke=!0,t}return e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,d.each)(r||n,function(o,s){s==="points"&&(0,d.isArray)(o)&&o.length>=2?a.setAttribute("points",o.map(function(u){return u[0]+","+u[1]}).join(" ")):si[s]&&a.setAttribute(si[s],o)})},e}(Ru),w1=E1,_1=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="polyline",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,m.__assign)((0,m.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),["points"].indexOf(t)!==-1&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,d.each)(r||n,function(o,s){s==="points"&&(0,d.isArray)(o)&&o.length>=2?a.setAttribute("points",o.map(function(u){return u[0]+","+u[1]}).join(" ")):si[s]&&a.setAttribute(si[s],o)})},e.prototype.getTotalLength=function(){var t=this.attr().points,r=this.get("totalLength");return(0,d.isNil)(r)?(this.set("totalLength",va.length(t)),this.get("totalLength")):r},e.prototype.getPoint=function(t){var r=this.attr().points,n=this.get("tCache");n||(this._setTcache(),n=this.get("tCache"));var a,o;return(0,d.each)(n,function(s,u){t>=s[0]&&t<=s[1]&&(a=(t-s[0])/(s[1]-s[0]),o=u)}),hr.pointAt(r[o][0],r[o][1],r[o+1][0],r[o+1][1],a)},e.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var r=this.getTotalLength();if(!(r<=0)){var n=0,a=[],o,s;(0,d.each)(t,function(u,f){t[f+1]&&(o=[],o[0]=n/r,s=hr.length(u[0],u[1],t[f+1][0],t[f+1][1]),n+=s,o[1]=n/r,a.push(o))}),this.set("tCache",a)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,r=[];return r.push([t[1][0],t[1][1]]),r.push([t[0][0],t[0][1]]),r},e.prototype.getEndTangent=function(){var t=this.attr().points,r=t.length-1,n=[];return n.push([t[r-1][0],t[r-1][1]]),n.push([t[r][0],t[r][1]]),n},e}(Ru),S1=_1,M1=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,A1=/[^\s,]+/gi;function C1(i){var e=0,t=0,r=0,n=0;return(0,d.isArray)(i)?i.length===1?e=t=r=n=i[0]:i.length===2?(e=r=i[0],t=n=i[1]):i.length===3?(e=i[0],t=n=i[1],r=i[2]):(e=i[0],t=i[1],r=i[2],n=i[3]):e=t=r=n=i,{r1:e,r2:t,r3:r,r4:n}}function R_(i){if(i=i||[],isArray(i))return i;if(isString(i))return i=i.match(M1),each(i,function(e,t){if(e=e.match(A1),e[0].length>1){var r=e[0].charAt(0);e.splice(1,0,e[0].substr(1)),e[0]=r}each(e,function(n,a){isNaN(n)||(e[a]=+n)}),i[t]=e}),i}var T1=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="rect",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,m.__assign)((0,m.__assign)({},t),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.createPath=function(t,r){var n=this,a=this.attr(),o=this.get("el"),s=!1,u=["x","y","width","height","radius"];(0,d.each)(r||a,function(f,c){u.indexOf(c)!==-1&&!s?(o.setAttribute("d",n._assembleRect(a)),s=!0):u.indexOf(c)===-1&&si[c]&&o.setAttribute(si[c],f)})},e.prototype._assembleRect=function(t){var r=t.x,n=t.y,a=t.width,o=t.height,s=t.radius;if(!s)return"M "+r+","+n+" l "+a+",0 l 0,"+o+" l"+-a+" 0 z";var u=C1(s);(0,d.isArray)(s)?s.length===1?u.r1=u.r2=u.r3=u.r4=s[0]:s.length===2?(u.r1=u.r3=s[0],u.r2=u.r4=s[1]):s.length===3?(u.r1=s[0],u.r2=u.r4=s[1],u.r3=s[2]):(u.r1=s[0],u.r2=s[1],u.r3=s[2],u.r4=s[3]):u.r1=u.r2=u.r3=u.r4=s;var f=[["M "+(r+u.r1)+","+n],["l "+(a-u.r1-u.r2)+",0"],["a "+u.r2+","+u.r2+",0,0,1,"+u.r2+","+u.r2],["l 0,"+(o-u.r2-u.r3)],["a "+u.r3+","+u.r3+",0,0,1,"+-u.r3+","+u.r3],["l "+(u.r3+u.r4-a)+",0"],["a "+u.r4+","+u.r4+",0,0,1,"+-u.r4+","+-u.r4],["l 0,"+(u.r4+u.r1-o)],["a "+u.r1+","+u.r1+",0,0,1,"+u.r1+","+-u.r1],["z"]];return f.join(" ")},e}(Ru),I1=T1,r0=.3,O1={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},L1={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},D1={left:"left",start:"left",center:"middle",right:"end",end:"end"},N1=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="text",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,m.__assign)((0,m.__assign)({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.createPath=function(t,r){var n=this,a=this.attr(),o=this.get("el");this._setFont(),(0,d.each)(r||a,function(s,u){u==="text"?n._setText(""+s):u==="matrix"&&s?Th(n):si[u]&&o.setAttribute(si[u],s)}),o.setAttribute("paint-order","stroke"),o.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},e.prototype._setFont=function(){var t=this.get("el"),r=this.attr(),n=r.textBaseline,a=r.textAlign,o=Wf();o&&o.name==="firefox"?t.setAttribute("dominant-baseline",L1[n]||"alphabetic"):t.setAttribute("alignment-baseline",O1[n]||"baseline"),t.setAttribute("text-anchor",D1[a]||"left")},e.prototype._setText=function(t){var r=this.get("el"),n=this.attr(),a=n.x,o=n.textBaseline,s=o===void 0?"bottom":o;if(!t)r.innerHTML="";else if(~t.indexOf(`
`)){var u=t.split(`
`),f=u.length-1,c="";(0,d.each)(u,function(l,b){b===0?s==="alphabetic"?c+='<tspan x="'+a+'" dy="'+-f+'em">'+l+"</tspan>":s==="top"?c+='<tspan x="'+a+'" dy="0.9em">'+l+"</tspan>":s==="middle"?c+='<tspan x="'+a+'" dy="'+-(f-1)/2+'em">'+l+"</tspan>":s==="bottom"?c+='<tspan x="'+a+'" dy="-'+(f+r0)+'em">'+l+"</tspan>":s==="hanging"&&(c+='<tspan x="'+a+'" dy="'+(-(f-1)-r0)+'em">'+l+"</tspan>"):c+='<tspan x="'+a+'" dy="1em">'+l+"</tspan>"}),r.innerHTML=c}else r.innerHTML=t},e}(Ru),P1=N1,k1=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,R1=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,B1=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function n0(i){var e=i.match(B1);if(!e)return"";var t="";return e.sort(function(r,n){return r=r.split(":"),n=n.split(":"),Number(r[0])-Number(n[0])}),(0,d.each)(e,function(r){r=r.split(":"),t+='<stop offset="'+r[0]+'" stop-color="'+r[1]+'"></stop>'}),t}function F1(i,e){var t=k1.exec(i),r=(0,d.mod)((0,d.toRadian)(parseFloat(t[1])),Math.PI*2),n=t[2],a,o;r>=0&&r<.5*Math.PI?(a={x:0,y:0},o={x:1,y:1}):.5*Math.PI<=r&&r<Math.PI?(a={x:1,y:0},o={x:0,y:1}):Math.PI<=r&&r<1.5*Math.PI?(a={x:1,y:1},o={x:0,y:0}):(a={x:0,y:1},o={x:1,y:0});var s=Math.tan(r),u=s*s,f=(o.x-a.x+s*(o.y-a.y))/(u+1)+a.x,c=s*(o.x-a.x+s*(o.y-a.y))/(u+1)+a.y;e.setAttribute("x1",a.x),e.setAttribute("y1",a.y),e.setAttribute("x2",f),e.setAttribute("y2",c),e.innerHTML=n0(n)}function G1(i,e){var t=R1.exec(i),r=parseFloat(t[1]),n=parseFloat(t[2]),a=parseFloat(t[3]),o=t[4];e.setAttribute("cx",r),e.setAttribute("cy",n),e.setAttribute("r",a),e.innerHTML=n0(o)}var z1=function(){function i(e){this.cfg={};var t=null,r=(0,d.uniqueId)("gradient_");return e.toLowerCase()[0]==="l"?(t=ku("linearGradient"),F1(e,t)):(t=ku("radialGradient"),G1(e,t)),t.setAttribute("id",r),this.el=t,this.id=r,this.cfg=e,this}return i.prototype.match=function(e,t){return this.cfg===t},i}(),U1=z1,W1={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},X1={x:"-40%",y:"-40%",width:"200%",height:"200%"},Y1=function(){function i(e){this.type="filter",this.cfg={},this.type="filter";var t=ku("filter");return(0,d.each)(X1,function(r,n){t.setAttribute(n,r)}),this.el=t,this.id=(0,d.uniqueId)("filter_"),this.el.id=this.id,this.cfg=e,this._parseShadow(e,t),this}return i.prototype.match=function(e,t){if(this.type!==e)return!1;var r=!0,n=this.cfg;return(0,d.each)(Object.keys(n),function(a){if(n[a]!==t[a])return r=!1,!1}),r},i.prototype.update=function(e,t){var r=this.cfg;return r[W1[e]]=t,this._parseShadow(r,this.el),this},i.prototype._parseShadow=function(e,t){var r=`<feDropShadow
      dx="`+(e.dx||0)+`"
      dy="`+(e.dy||0)+`"
      stdDeviation="`+(e.blur?e.blur/10:0)+`"
      flood-color="`+(e.color?e.color:"#000")+`"
      flood-opacity="`+(e.opacity?e.opacity:1)+`"
      />`;t.innerHTML=r},i}(),V1=Y1,j1=function(){function i(e,t){this.cfg={};var r=ku("marker"),n=(0,d.uniqueId)("marker_");r.setAttribute("id",n);var a=ku("path");a.setAttribute("stroke",e.stroke||"none"),a.setAttribute("fill",e.fill||"none"),r.appendChild(a),r.setAttribute("overflow","visible"),r.setAttribute("orient","auto-start-reverse"),this.el=r,this.child=a,this.id=n;var o=e[t==="marker-start"?"startArrow":"endArrow"];return this.stroke=e.stroke||"#000",o===!0?this._setDefaultPath(t,a):(this.cfg=o,this._setMarker(e.lineWidth,a)),this}return i.prototype.match=function(){return!1},i.prototype._setDefaultPath=function(e,t){var r=this.el;t.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),r.setAttribute("refX",""+10*Math.cos(Math.PI/6)),r.setAttribute("refY","5")},i.prototype._setMarker=function(e,t){var r=this.el,n=this.cfg.path,a=this.cfg.d;(0,d.isArray)(n)&&(n=n.map(function(o){return o.join(" ")}).join("")),t.setAttribute("d",n),r.appendChild(t),a&&r.setAttribute("refX",""+a/e)},i.prototype.update=function(e){var t=this.child;t.attr?t.attr("fill",e):t.setAttribute("fill",e)},i}(),a0=j1,H1=function(){function i(e){this.type="clip",this.cfg={};var t=ku("clipPath");this.el=t,this.id=(0,d.uniqueId)("clip_"),t.id=this.id;var r=e.cfg.el;return t.appendChild(r),this.cfg=e,this}return i.prototype.match=function(){return!1},i.prototype.remove=function(){var e=this.el;e.parentNode.removeChild(e)},i}(),K1=H1,Z1=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,$1=function(){function i(e){this.cfg={};var t=ku("pattern");t.setAttribute("patternUnits","userSpaceOnUse");var r=ku("image");t.appendChild(r);var n=(0,d.uniqueId)("pattern_");t.id=n,this.el=t,this.id=n,this.cfg=e;var a=Z1.exec(e),o=a[2];r.setAttribute("href",o);var s=new Image;o.match(/^data:/i)||(s.crossOrigin="Anonymous"),s.src=o;function u(){t.setAttribute("width",""+s.width),t.setAttribute("height",""+s.height)}return s.complete?u():(s.onload=u,s.src=s.src),this}return i.prototype.match=function(e,t){return this.cfg===t},i}(),q1=$1,Q1=function(){function i(e){var t=ku("defs"),r=(0,d.uniqueId)("defs_");t.id=r,e.appendChild(t),this.children=[],this.defaultArrow={},this.el=t,this.canvas=e}return i.prototype.find=function(e,t){for(var r=this.children,n=null,a=0;a<r.length;a++)if(r[a].match(e,t)){n=r[a].id;break}return n},i.prototype.findById=function(e){for(var t=this.children,r=null,n=0;n<t.length;n++)if(t[n].id===e){r=t[n];break}return r},i.prototype.add=function(e){this.children.push(e),e.canvas=this.canvas,e.parent=this},i.prototype.getDefaultArrow=function(e,t){var r=e.stroke||e.strokeStyle;if(this.defaultArrow[r])return this.defaultArrow[r].id;var n=new a0(e,t);return this.defaultArrow[r]=n,this.el.appendChild(n.el),this.add(n),n.id},i.prototype.addGradient=function(e){var t=new U1(e);return this.el.appendChild(t.el),this.add(t),t.id},i.prototype.addArrow=function(e,t){var r=new a0(e,t);return this.el.appendChild(r.el),this.add(r),r.id},i.prototype.addShadow=function(e){var t=new V1(e);return this.el.appendChild(t.el),this.add(t),t.id},i.prototype.addPattern=function(e){var t=new q1(e);return this.el.appendChild(t.el),this.add(t),t.id},i.prototype.addClip=function(e){var t=new K1(e);return this.el.appendChild(t.el),this.add(t),t.id},i}(),J1=Q1,tx=function(i){(0,m.__extends)(e,i);function e(t){return i.call(this,(0,m.__assign)((0,m.__assign)({},t),{autoDraw:!0,renderer:"svg"}))||this}return e.prototype.getShapeBase=function(){return g},e.prototype.getGroupBase=function(){return t0},e.prototype.getShape=function(t,r,n){var a=n.target||n.srcElement;if(!fd[a.tagName]){for(var o=a.parentNode;o&&!fd[o.tagName];)o=o.parentNode;a=o}return this.find(function(s){return s.get("el")===a})},e.prototype.createDom=function(){var t=ku("svg"),r=new J1(t);return t.setAttribute("width",""+this.get("width")),t.setAttribute("height",""+this.get("height")),this.set("context",r),t},e.prototype.onCanvasChange=function(t){var r=this.get("context"),n=this.get("el");if(t==="sort"){var a=this.get("children");a&&a.length&&qg(this,function(s,u){return a.indexOf(s)-a.indexOf(u)?1:0})}else if(t==="clear"){if(n){n.innerHTML="";var o=r.el;o.innerHTML="",n.appendChild(o)}}else t==="matrix"?Th(this):t==="clip"?Ih(this,r):t==="changeSize"&&(n.setAttribute("width",""+this.get("width")),n.setAttribute("height",""+this.get("height")))},e.prototype.draw=function(){var t=this.get("context"),r=this.getChildren();Ih(this,t),r.length&&Qg(t,r)},e}(oh),Oh=tx,B_="0.5.6",Lh,cd,i0,ld;function ex(){Lh=document.createElement("table"),cd=document.createElement("tr"),i0=/^\s*<(\w+|!)[^>]*>/,ld={tr:document.createElement("tbody"),tbody:Lh,thead:Lh,tfoot:Lh,td:cd,th:cd,"*":document.createElement("div")}}function Ji(i){Lh||ex();var e=i0.test(i)&&RegExp.$1;(!e||!(e in ld))&&(e="*");var t=ld[e];i=typeof i=="string"?i.replace(/(^\s*)|(\s*$)/g,""):i,t.innerHTML=""+i;var r=t.childNodes[0];return r&&t.contains(r)&&t.removeChild(r),r}var rx=z(6767),Dh=z.n(rx);function lv(i){"@babel/helpers - typeof";return lv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lv(i)}var nx=/^\s+/,ax=/\s+$/;function ua(i,e){if(i=i||"",e=e||{},i instanceof ua)return i;if(!(this instanceof ua))return new ua(i,e);var t=ix(i);this._originalInput=i,this._r=t.r,this._g=t.g,this._b=t.b,this._a=t.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||t.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=t.ok}ua.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),t,r,n,a,o,s;return t=e.r/255,r=e.g/255,n=e.b/255,t<=.03928?a=t/12.92:a=Math.pow((t+.055)/1.055,2.4),r<=.03928?o=r/12.92:o=Math.pow((r+.055)/1.055,2.4),n<=.03928?s=n/12.92:s=Math.pow((n+.055)/1.055,2.4),.2126*a+.7152*o+.0722*s},setAlpha:function(e){return this._a=l0(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=s0(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=s0(this._r,this._g,this._b),t=Math.round(e.h*360),r=Math.round(e.s*100),n=Math.round(e.v*100);return this._a==1?"hsv("+t+", "+r+"%, "+n+"%)":"hsva("+t+", "+r+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var e=o0(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=o0(this._r,this._g,this._b),t=Math.round(e.h*360),r=Math.round(e.s*100),n=Math.round(e.l*100);return this._a==1?"hsl("+t+", "+r+"%, "+n+"%)":"hsla("+t+", "+r+"%, "+n+"%, "+this._roundA+")"},toHex:function(e){return u0(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return fx(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(mo(this._r,255)*100)+"%",g:Math.round(mo(this._g,255)*100)+"%",b:Math.round(mo(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(mo(this._r,255)*100)+"%, "+Math.round(mo(this._g,255)*100)+"%, "+Math.round(mo(this._b,255)*100)+"%)":"rgba("+Math.round(mo(this._r,255)*100)+"%, "+Math.round(mo(this._g,255)*100)+"%, "+Math.round(mo(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:Ex[u0(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var t="#"+f0(this._r,this._g,this._b,this._a),r=t,n=this._gradientType?"GradientType = 1, ":"";if(e){var a=ua(e);r="#"+f0(a._r,a._g,a._b,a._a)}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+t+",endColorstr="+r+")"},toString:function(e){var t=!!e;e=e||this._format;var r=!1,n=this._a<1&&this._a>=0,a=!t&&n&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return a?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(r=this.toRgbString()),e==="prgb"&&(r=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(r=this.toHexString()),e==="hex3"&&(r=this.toHexString(!0)),e==="hex4"&&(r=this.toHex8String(!0)),e==="hex8"&&(r=this.toHex8String()),e==="name"&&(r=this.toName()),e==="hsl"&&(r=this.toHslString()),e==="hsv"&&(r=this.toHsvString()),r||this.toHexString())},clone:function(){return ua(this.toString())},_applyModification:function(e,t){var r=e.apply(null,[this].concat([].slice.call(t)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(vx,arguments)},brighten:function(){return this._applyModification(dx,arguments)},darken:function(){return this._applyModification(gx,arguments)},desaturate:function(){return this._applyModification(cx,arguments)},saturate:function(){return this._applyModification(lx,arguments)},greyscale:function(){return this._applyModification(hx,arguments)},spin:function(){return this._applyModification(px,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(xx,arguments)},complement:function(){return this._applyCombination(yx,arguments)},monochromatic:function(){return this._applyCombination(bx,arguments)},splitcomplement:function(){return this._applyCombination(mx,arguments)},triad:function(){return this._applyCombination(c0,[3])},tetrad:function(){return this._applyCombination(c0,[4])}},ua.fromRatio=function(i,e){if(lv(i)=="object"){var t={};for(var r in i)i.hasOwnProperty(r)&&(r==="a"?t[r]=i[r]:t[r]=Nh(i[r]));i=t}return ua(i,e)};function ix(i){var e={r:0,g:0,b:0},t=1,r=null,n=null,a=null,o=!1,s=!1;return typeof i=="string"&&(i=Mx(i)),lv(i)=="object"&&(hc(i.r)&&hc(i.g)&&hc(i.b)?(e=ox(i.r,i.g,i.b),o=!0,s=String(i.r).substr(-1)==="%"?"prgb":"rgb"):hc(i.h)&&hc(i.s)&&hc(i.v)?(r=Nh(i.s),n=Nh(i.v),e=ux(i.h,r,n),o=!0,s="hsv"):hc(i.h)&&hc(i.s)&&hc(i.l)&&(r=Nh(i.s),a=Nh(i.l),e=sx(i.h,r,a),o=!0,s="hsl"),i.hasOwnProperty("a")&&(t=i.a)),t=l0(t),{ok:o,format:i.format||s,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:t}}function ox(i,e,t){return{r:mo(i,255)*255,g:mo(e,255)*255,b:mo(t,255)*255}}function o0(i,e,t){i=mo(i,255),e=mo(e,255),t=mo(t,255);var r=Math.max(i,e,t),n=Math.min(i,e,t),a,o,s=(r+n)/2;if(r==n)a=o=0;else{var u=r-n;switch(o=s>.5?u/(2-r-n):u/(r+n),r){case i:a=(e-t)/u+(e<t?6:0);break;case e:a=(t-i)/u+2;break;case t:a=(i-e)/u+4;break}a/=6}return{h:a,s:o,l:s}}function sx(i,e,t){var r,n,a;i=mo(i,360),e=mo(e,100),t=mo(t,100);function o(f,c,l){return l<0&&(l+=1),l>1&&(l-=1),l<1/6?f+(c-f)*6*l:l<1/2?c:l<2/3?f+(c-f)*(2/3-l)*6:f}if(e===0)r=n=a=t;else{var s=t<.5?t*(1+e):t+e-t*e,u=2*t-s;r=o(u,s,i+1/3),n=o(u,s,i),a=o(u,s,i-1/3)}return{r:r*255,g:n*255,b:a*255}}function s0(i,e,t){i=mo(i,255),e=mo(e,255),t=mo(t,255);var r=Math.max(i,e,t),n=Math.min(i,e,t),a,o,s=r,u=r-n;if(o=r===0?0:u/r,r==n)a=0;else{switch(r){case i:a=(e-t)/u+(e<t?6:0);break;case e:a=(t-i)/u+2;break;case t:a=(i-e)/u+4;break}a/=6}return{h:a,s:o,v:s}}function ux(i,e,t){i=mo(i,360)*6,e=mo(e,100),t=mo(t,100);var r=Math.floor(i),n=i-r,a=t*(1-e),o=t*(1-n*e),s=t*(1-(1-n)*e),u=r%6,f=[t,o,a,a,s,t][u],c=[s,t,t,o,a,a][u],l=[a,a,s,t,t,o][u];return{r:f*255,g:c*255,b:l*255}}function u0(i,e,t,r){var n=[Qu(Math.round(i).toString(16)),Qu(Math.round(e).toString(16)),Qu(Math.round(t).toString(16))];return r&&n[0].charAt(0)==n[0].charAt(1)&&n[1].charAt(0)==n[1].charAt(1)&&n[2].charAt(0)==n[2].charAt(1)?n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0):n.join("")}function fx(i,e,t,r,n){var a=[Qu(Math.round(i).toString(16)),Qu(Math.round(e).toString(16)),Qu(Math.round(t).toString(16)),Qu(h0(r))];return n&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}function f0(i,e,t,r){var n=[Qu(h0(r)),Qu(Math.round(i).toString(16)),Qu(Math.round(e).toString(16)),Qu(Math.round(t).toString(16))];return n.join("")}ua.equals=function(i,e){return!i||!e?!1:ua(i).toRgbString()==ua(e).toRgbString()},ua.random=function(){return ua.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function cx(i,e){e=e===0?0:e||10;var t=ua(i).toHsl();return t.s-=e/100,t.s=hv(t.s),ua(t)}function lx(i,e){e=e===0?0:e||10;var t=ua(i).toHsl();return t.s+=e/100,t.s=hv(t.s),ua(t)}function hx(i){return ua(i).desaturate(100)}function vx(i,e){e=e===0?0:e||10;var t=ua(i).toHsl();return t.l+=e/100,t.l=hv(t.l),ua(t)}function dx(i,e){e=e===0?0:e||10;var t=ua(i).toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(255*-(e/100)))),t.g=Math.max(0,Math.min(255,t.g-Math.round(255*-(e/100)))),t.b=Math.max(0,Math.min(255,t.b-Math.round(255*-(e/100)))),ua(t)}function gx(i,e){e=e===0?0:e||10;var t=ua(i).toHsl();return t.l-=e/100,t.l=hv(t.l),ua(t)}function px(i,e){var t=ua(i).toHsl(),r=(t.h+e)%360;return t.h=r<0?360+r:r,ua(t)}function yx(i){var e=ua(i).toHsl();return e.h=(e.h+180)%360,ua(e)}function c0(i,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var t=ua(i).toHsl(),r=[ua(i)],n=360/e,a=1;a<e;a++)r.push(ua({h:(t.h+a*n)%360,s:t.s,l:t.l}));return r}function mx(i){var e=ua(i).toHsl(),t=e.h;return[ua(i),ua({h:(t+72)%360,s:e.s,l:e.l}),ua({h:(t+216)%360,s:e.s,l:e.l})]}function xx(i,e,t){e=e||6,t=t||30;var r=ua(i).toHsl(),n=360/t,a=[ua(i)];for(r.h=(r.h-(n*e>>1)+720)%360;--e;)r.h=(r.h+n)%360,a.push(ua(r));return a}function bx(i,e){e=e||6;for(var t=ua(i).toHsv(),r=t.h,n=t.s,a=t.v,o=[],s=1/e;e--;)o.push(ua({h:r,s:n,v:a})),a=(a+s)%1;return o}ua.mix=function(i,e,t){t=t===0?0:t||50;var r=ua(i).toRgb(),n=ua(e).toRgb(),a=t/100,o={r:(n.r-r.r)*a+r.r,g:(n.g-r.g)*a+r.g,b:(n.b-r.b)*a+r.b,a:(n.a-r.a)*a+r.a};return ua(o)},ua.readability=function(i,e){var t=ua(i),r=ua(e);return(Math.max(t.getLuminance(),r.getLuminance())+.05)/(Math.min(t.getLuminance(),r.getLuminance())+.05)},ua.isReadable=function(i,e,t){var r=ua.readability(i,e),n,a;switch(a=!1,n=Ax(t),n.level+n.size){case"AAsmall":case"AAAlarge":a=r>=4.5;break;case"AAlarge":a=r>=3;break;case"AAAsmall":a=r>=7;break}return a},ua.mostReadable=function(i,e,t){var r=null,n=0,a,o,s,u;t=t||{},o=t.includeFallbackColors,s=t.level,u=t.size;for(var f=0;f<e.length;f++)a=ua.readability(i,e[f]),a>n&&(n=a,r=ua(e[f]));return ua.isReadable(i,r,{level:s,size:u})||!o?r:(t.includeFallbackColors=!1,ua.mostReadable(i,["#fff","#000"],t))};var hd=ua.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Ex=ua.hexNames=wx(hd);function wx(i){var e={};for(var t in i)i.hasOwnProperty(t)&&(e[i[t]]=t);return e}function l0(i){return i=parseFloat(i),(isNaN(i)||i<0||i>1)&&(i=1),i}function mo(i,e){_x(i)&&(i="100%");var t=Sx(i);return i=Math.min(e,Math.max(0,parseFloat(i))),t&&(i=parseInt(i*e,10)/100),Math.abs(i-e)<1e-6?1:i%e/parseFloat(e)}function hv(i){return Math.min(1,Math.max(0,i))}function Eu(i){return parseInt(i,16)}function _x(i){return typeof i=="string"&&i.indexOf(".")!=-1&&parseFloat(i)===1}function Sx(i){return typeof i=="string"&&i.indexOf("%")!=-1}function Qu(i){return i.length==1?"0"+i:""+i}function Nh(i){return i<=1&&(i=i*100+"%"),i}function h0(i){return Math.round(parseFloat(i)*255).toString(16)}function v0(i){return Eu(i)/255}var Ju=function(){var i="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",t="(?:"+e+")|(?:"+i+")",r="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?",n="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?";return{CSS_UNIT:new RegExp(t),rgb:new RegExp("rgb"+r),rgba:new RegExp("rgba"+n),hsl:new RegExp("hsl"+r),hsla:new RegExp("hsla"+n),hsv:new RegExp("hsv"+r),hsva:new RegExp("hsva"+n),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function hc(i){return!!Ju.CSS_UNIT.exec(i)}function Mx(i){i=i.replace(nx,"").replace(ax,"").toLowerCase();var e=!1;if(hd[i])i=hd[i],e=!0;else if(i=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var t;return(t=Ju.rgb.exec(i))?{r:t[1],g:t[2],b:t[3]}:(t=Ju.rgba.exec(i))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=Ju.hsl.exec(i))?{h:t[1],s:t[2],l:t[3]}:(t=Ju.hsla.exec(i))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=Ju.hsv.exec(i))?{h:t[1],s:t[2],v:t[3]}:(t=Ju.hsva.exec(i))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=Ju.hex8.exec(i))?{r:Eu(t[1]),g:Eu(t[2]),b:Eu(t[3]),a:v0(t[4]),format:e?"name":"hex8"}:(t=Ju.hex6.exec(i))?{r:Eu(t[1]),g:Eu(t[2]),b:Eu(t[3]),format:e?"name":"hex"}:(t=Ju.hex4.exec(i))?{r:Eu(t[1]+""+t[1]),g:Eu(t[2]+""+t[2]),b:Eu(t[3]+""+t[3]),a:v0(t[4]+""+t[4]),format:e?"name":"hex8"}:(t=Ju.hex3.exec(i))?{r:Eu(t[1]+""+t[1]),g:Eu(t[2]+""+t[2]),b:Eu(t[3]+""+t[3]),format:e?"name":"hex"}:!1}function Ax(i){var e,t;return i=i||{level:"AA",size:"small"},e=(i.level||"AA").toUpperCase(),t=(i.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),t!=="small"&&t!=="large"&&(t="small"),{level:e,size:t}}var vv=2,d0=.16,Cx=.05,Tx=.05,Ix=.15,g0=5,p0=4,Ox=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function y0(i,e,t){var r;return Math.round(i.h)>=60&&Math.round(i.h)<=240?r=t?Math.round(i.h)-vv*e:Math.round(i.h)+vv*e:r=t?Math.round(i.h)+vv*e:Math.round(i.h)-vv*e,r<0?r+=360:r>=360&&(r-=360),r}function m0(i,e,t){if(i.h===0&&i.s===0)return i.s;var r;return t?r=i.s-d0*e:e===p0?r=i.s+d0:r=i.s+Cx*e,r>1&&(r=1),t&&e===g0&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2))}function x0(i,e,t){var r;return t?r=i.v+Tx*e:r=i.v-Ix*e,r>1&&(r=1),Number(r.toFixed(2))}function dv(i){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=[],r=ua(i),n=g0;n>0;n-=1){var a=r.toHsv(),o=ua({h:y0(a,n,!0),s:m0(a,n,!0),v:x0(a,n,!0)}).toHexString();t.push(o)}t.push(r.toHexString());for(var s=1;s<=p0;s+=1){var u=r.toHsv(),f=ua({h:y0(u,s),s:m0(u,s),v:x0(u,s)}).toHexString();t.push(f)}return e.theme==="dark"?Ox.map(function(c){var l=c.index,b=c.opacity,w=ua.mix(e.backgroundColor||"#141414",t[l],b*100).toHexString();return w}):t}var vd={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},ks={},dd={};Object.keys(vd).forEach(function(i){ks[i]=dv(vd[i]),ks[i].primary=ks[i][5],dd[i]=dv(vd[i],{theme:"dark",backgroundColor:"#141414"}),dd[i].primary=dd[i][5]});var F_=ks.red,G_=ks.volcano,z_=ks.gold,U_=ks.orange,W_=ks.yellow,X_=ks.lime,Y_=ks.green,V_=ks.cyan,j_=ks.blue,H_=ks.geekblue,K_=ks.purple,Z_=ks.magenta,$_=ks.grey,ns=function(e,t,r){var n=Dh()(e),a=Dh()(t);return Dh()([(1-r)*n.red()+r*a.red(),(1-r)*n.green()+r*a.green(),(1-r)*n.blue()+r*a.blue()]).rgb()},Lx=function(e,t,r){t===void 0&&(t="#fff"),r===void 0&&(r="rgb(150, 150, 150)");var n=ns(t,e,.05).rgb().toString(),a=ns(t,e,.1).rgb().toString(),o=ns(t,e,.2).rgb().toString(),s=ns(t,e,.4).rgb().toString(),u=ns(t,r,.02).rgb().toString(),f=ns(t,r,.05).rgb().toString(),c=ns(t,r,.1).rgb().toString(),l=ns(t,r,.2).rgb().toString(),b=ns(t,r,.3).rgb().toString(),w=dv(e,{theme:"default",backgroundColor:t}),I=Dh()(e).hex().toLowerCase(),W=w.indexOf(I),H=e;return W!==-1&&(H=w[W+1]),{mainStroke:e,mainFill:a,activeStroke:e,activeFill:n,inactiveStroke:s,inactiveFill:n,selectedStroke:e,selectedFill:t,highlightStroke:H,highlightFill:o,disableStroke:b,disableFill:f,edgeMainStroke:b,edgeActiveStroke:e,edgeInactiveStroke:l,edgeSelectedStroke:e,edgeHighlightStroke:e,edgeDisableStroke:c,comboMainStroke:b,comboMainFill:u,comboActiveStroke:e,comboActiveFill:n,comboInactiveStroke:b,comboInactiveFill:u,comboSelectedStroke:e,comboSelectedFill:u,comboHighlightStroke:H,comboHighlightFill:u,comboDisableStroke:l,comboDisableFill:f}},Dx=function(e,t,r){t===void 0&&(t="#fff"),r===void 0&&(r="#777");var n=ns(t,e,.2).rgb().toString(),a=ns(t,e,.3).rgb().toString(),o=ns(t,e,.6).rgb().toString(),s=ns(t,e,.8).rgb().toString(),u=ns(t,r,.2).rgb().toString(),f=ns(t,r,.25).rgb().toString(),c=ns(t,r,.3).rgb().toString(),l=ns(t,r,.4).rgb().toString(),b=ns(t,r,.5).rgb().toString(),w=dv(e,{theme:"dark",backgroundColor:t}),I=Dh()(e).hex().toLowerCase(),W=w.indexOf(I),H=e;return W!==-1&&(H=w[W+1]),{mainStroke:s,mainFill:n,activeStroke:e,activeFill:a,inactiveStroke:s,inactiveFill:n,selectedStroke:e,selectedFill:n,highlightStroke:e,highlightFill:o,disableStroke:b,disableFill:f,edgeMainStroke:r,edgeActiveStroke:e,edgeInactiveStroke:r,edgeSelectedStroke:e,edgeHighlightStroke:e,edgeDisableStroke:c,comboMainStroke:l,comboMainFill:f,comboActiveStroke:e,comboActiveFill:u,comboInactiveStroke:l,comboInactiveFill:f,comboSelectedStroke:e,comboSelectedFill:u,comboHighlightStroke:H,comboHighlightFill:f,comboDisableStroke:l,comboDisableFill:u}},gd=function(e,t,r,n){return t===void 0&&(t="#fff"),r===void 0&&(r="default"),n===void 0&&(n="rgb(150, 150, 150)"),r==="default"?Lx(e,t,"rgb(150, 150, 150)"):Dx(e,t,"#777")},Nx=function(e,t,r,n){t===void 0&&(t="#fff"),r===void 0&&(r="default"),n===void 0&&(n="rgb(150, 150, 150)");var a=[];return e.forEach(function(o){a.push(gd(o,t,r,n))}),a},Px="rgb(95, 149, 255)",kx="rgb(255, 255, 255)",b0="rgb(0, 0, 0)",Ja=gd(Px,kx),Ll={version:"0.8.23",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:Ja.mainStroke,fill:Ja.mainFill},size:20,color:Ja.mainStroke,linkPoints:{size:8,lineWidth:1,fill:Ja.activeFill,stroke:Ja.activeStroke}},nodeStateStyles:{active:{fill:Ja.activeFill,stroke:Ja.activeStroke,lineWidth:2,shadowColor:Ja.mainStroke,shadowBlur:10},selected:{fill:Ja.selectedFill,stroke:Ja.selectedStroke,lineWidth:4,shadowColor:Ja.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:Ja.highlightFill,stroke:Ja.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:Ja.inactiveFill,stroke:Ja.inactiveStroke,lineWidth:1},disable:{fill:Ja.disableFill,stroke:Ja.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:b0,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:Ja.edgeMainStroke,lineAppendWidth:2},color:Ja.edgeMainStroke},edgeStateStyles:{active:{stroke:Ja.edgeActiveStroke,lineWidth:1},selected:{stroke:Ja.edgeSelectedStroke,lineWidth:2,shadowColor:Ja.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Ja.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:Ja.edgeInactiveStroke,lineWidth:1},disable:{stroke:Ja.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:b0,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:Ja.comboMainFill,lineWidth:1,stroke:Ja.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:Ja.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:Ja.comboActiveStroke,lineWidth:1,fill:Ja.comboActiveFill},selected:{stroke:Ja.comboSelectedStroke,lineWidth:2,fill:Ja.comboSelectedFill,shadowColor:Ja.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Ja.comboHighlightStroke,lineWidth:2,fill:Ja.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:Ja.comboInactiveStroke,fill:Ja.comboInactiveFill,lineWidth:1},disable:{stroke:Ja.comboDisableStroke,fill:Ja.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},textWaterMarkerConfig:{width:150,height:100,compatible:!1,text:{x:0,y:60,lineHeight:20,rotate:20,fontSize:14,fontFamily:"Microsoft YaHei",fill:"rgba(0, 0, 0, 0.1)",baseline:"Middle"}},imageWaterMarkerConfig:{width:150,height:130,compatible:!1,image:{x:0,y:0,width:30,height:20,rotate:0}},waterMarkerImage:"https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg"},Rx=function(e){var t=e.clone();return Bx(e,t),t},Bx=function i(e,t){var r;e.isGroup()&&t.isGroup()&&((r=e.get("children"))===null||r===void 0||r.forEach(function(s,u){var f=t.get("children")[u];i(s,f)}));var n=e.get("type"),a=t.get("type");if(!(n!=="image"||a!=="image")){var o=e.get("clipShape");o&&t.setClip({type:o.get("type"),attrs:o.attr()})}};function gv(i,e,t){if(i){if(typeof i.addEventListener=="function")return i.addEventListener(e,t,!1),{remove:function(){i.removeEventListener(e,t,!1)}};if(typeof i.attachEvent=="function")return i.attachEvent("on"+e,t),{remove:function(){i.detachEvent("on"+e,t)}}}}var Fx=_s.cloneEvent,Gx=_s.isViewportChanged,zx=function(i){(0,m.__extends)(e,i);function e(t){var r=i.call(this,t)||this;return r.extendEvents=[],r.dragging=!1,r.mousedown=!1,r.preItem=null,r.destroy(),r.graph=t,r.destroyed=!1,r.initEvents(),r}return e.prototype.initEvents=function(){var t=this,r=t.graph,n=t.extendEvents,a=n===void 0?[]:n,o=r.get("canvas"),s=o.get("el"),u=(0,d.wrapBehavior)(this,"onCanvasEvents"),f=(0,d.wrapBehavior)(this,"onExtendEvents"),c=(0,d.wrapBehavior)(this,"onWheelEvent");o.off("*").on("*",u),this.canvasHandler=u,a.push(gv(s,"wheel",c)),typeof window!="undefined"&&(a.push(gv(window,"keydown",f)),a.push(gv(window,"keyup",f)),a.push(gv(window,"focus",f))),this.resetHandler&&r.off("afterchangedata",this.resetHandler),this.resetHandler=(0,d.wrapBehavior)(this,"resetStatus"),r.on("afterchangedata",this.resetHandler)},e.getItemRoot=function(t){for(;t&&!t.get("item");)t=t.get("parent");return t},e.prototype.onCanvasEvents=function(t){var r=this,n=this.graph,a=n.get("canvas"),o=t.target,s=t.type;switch(s){case"drag":this.onCanvasEvents(Object.assign({},t,{type:"mousemove"}));break;case"dragend":this.onCanvasEvents(Object.assign({},t,{type:"mouseup"}));break;case"mousedown":this.mousedown=!0;break;case"dragend":case"mouseup":setTimeout(function(){return r.mousedown=!1});break;case"click":if(!this.mousedown)return;break;default:break}t.canvasX=t.x,t.canvasY=t.y;var u={x:t.canvasX,y:t.canvasY},f=n.get("group"),c=f.getMatrix();if(c||(c=[1,0,0,0,1,0,0,0,1]),Gx(c)&&(u=n.getPointByClient(t.clientX,t.clientY)),t.x=u.x,t.y=u.y,t.currentTarget=n,o===a){(s==="mousemove"||s==="mouseleave")&&this.handleMouseMove(t,"canvas"),t.target=a,t.item=null,n.emit(s,t),n.emit("canvas:".concat(s),t);return}var l=e.getItemRoot(o);if(!l){n.emit(s,t);return}var b=l.get("item");if(!b.destroyed){var w=b.getType();if(t.target=o,t.item=b,t.canvasX===t.x&&t.canvasY===t.y){var I=n.getCanvasByPoint(t.x,t.y);t.canvasX=I.x,t.canvasY=I.y}t.name&&!t.name.includes(":")?(n.emit("".concat(w,":").concat(s),t),n.emit(s,t)):t.name&&n.emit(t.name,t),s==="dragstart"&&(this.dragging=!0),s==="dragend"&&(this.dragging=!1),s==="mousemove"&&this.handleMouseMove(t,w)}},e.prototype.onExtendEvents=function(t){this.graph.emit(t.type,t)},e.prototype.onWheelEvent=function(t){(0,d.isNil)(t.wheelDelta)&&(t.wheelDelta=-t.detail),this.graph.emit("wheel",t)},e.prototype.handleMouseMove=function(t,r){var n=this,a=n.graph,o=n.preItem,s=a.get("canvas"),u=t.target===s?null:t.item;t=Fx(t),o&&o!==u&&!o.destroyed&&(t.item=o,this.emitCustomEvent(o.getType(),"mouseleave",t),this.dragging&&this.emitCustomEvent(o.getType(),"dragleave",t)),u&&o!==u&&(t.item=u,this.emitCustomEvent(r,"mouseenter",t),this.dragging&&this.emitCustomEvent(r,"dragenter",t)),this.preItem=u},e.prototype.emitCustomEvent=function(t,r,n){n.type=r,this.graph.emit("".concat(t,":").concat(r),n)},e.prototype.resetStatus=function(){this.mousedown=!1,this.dragging=!1,this.preItem=null},e.prototype.destroy=function(){var t=this,r=t.graph,n=t.canvasHandler,a=t.extendEvents,o=r.get("canvas");o.off("*",n),(0,d.each)(a,function(s){s.remove()}),this.resetStatus(),this.extendEvents.length=0,this.canvasHandler=null,this.resetHandler=null,this.destroyed=!0},e}(Ag),Ux=zx,Za=z(483360),Wx=z(981746),pv=z.n(Wx),E0=_s.traverseTree,Xx=function(e,t){var r;return e?(0,d.isNumber)(e)?r=function(a){return e}:r=e:r=function(a){return t||1},r},Yx=function(e,t){var r=[],n=[],a={},o=0;for(o=0;o<e.length;o++){var s=e[o];a[s.id]=o,r.push(s.x),r.push(s.y),r.push(0),r.push(0),n.push([])}for(o=0;o<t.length;o++){var u=t[o];n[a[u.source]].push(a[u.target]),n[a[u.target]].push(a[u.source])}var f=0;for(o=0;o<e.length;o++){var c=r.length,l=n[o],b=l.length;r[o*4+2]=c,r[o*4+3]=l.length,f=Math.max(f,l.length);for(var w=0;w<b;++w){var I=l[w];r.push(+I)}}for(;r.length%4!==0;)r.push(0);return{array:new Float32Array(r),maxEdgePerVetex:f}},Vx=function(e,t,r){var n=[],a=[],o={},s=0;for(s=0;s<e.length;s++){var u=e[s];o[u.id]=s,n.push(u.x),n.push(u.y),n.push(0),n.push(0),a.push([])}for(s=0;s<t.length;s++){var f=t[s];a[o[f.source]].push(o[f.target]),a[o[f.source]].push(r(f)),a[o[f.target]].push(o[f.source]),a[o[f.target]].push(r(f))}var c=0;for(s=0;s<e.length;s++){var l=n.length,b=a[s],w=b.length;n[s*4+2]=l,n[s*4+3]=w/2,c=Math.max(c,w/2);for(var I=0;I<w;++I){var W=b[I];n.push(+W)}}for(;n.length%4!==0;)n.push(0);return{array:new Float32Array(n),maxEdgePerVetex:c}},jx=function(e,t,r,n){var a=[],o=[],s={},u=0;for(u=0;u<e.length;u++){var f=e[u];s[f.id]=u,a.push(f.x),a.push(f.y),a.push(0),a.push(0),o.push([])}for(u=0;u<t.length;u++){var c=t[u];o[s[c.source]].push(s[c.target]),o[s[c.source]].push(r(c)),o[s[c.source]].push(n(c)),o[s[c.source]].push(0),o[s[c.target]].push(s[c.source]),o[s[c.target]].push(r(c)),o[s[c.target]].push(n(c)),o[s[c.target]].push(0)}var l=0;for(u=0;u<e.length;u++){var b=a.length,w=o[u],I=w.length;a[u*4+2]=b+1048576*I/4,a[u*4+3]=0,l=Math.max(l,I/4);for(var W=0;W<I;++W){var H=w[W];a.push(+H)}}for(;a.length%4!==0;)a.push(0);return{array:new Float32Array(a),maxEdgePerVetex:l}},Hx=function(e,t){var r=[],n=e.length,a={};return t.forEach(function(o){e.forEach(function(s,u){if(a[o[s]]===void 0&&(a[o[s]]=Object.keys(a).length),r.push(a[o[s]]),u===n-1)for(;r.length%4!==0;)r.push(0)})}),{array:new Float32Array(r),count:Object.keys(a).length}},Kx=function(e){for(var t=[],r=e.length,n=e[0].length,a=function(u){e.forEach(function(f,c){if(t.push(f[u]),c===r-1)for(;t.length%4!==0;)t.push(0)})},o=0;o<n;o++)a(o);return new Float32Array(t)},Zx=function(e,t){var r=["V","TB","BT"],n={x:1/0,y:1/0},a={x:-1/0,y:-1/0},o="x",s="y";t&&r.indexOf(t)>=0&&(s="x",o="y");var u=0;E0(e,function(l){return u++,l.x>a.x&&(a.x=l.x),l.x<n.x&&(n.x=l.x),l.y>a.y&&(a.y=l.y),l.y<n.y&&(n.y=l.y),!0});var f=Math.PI*2/u,c=a[s]-n[s];return c===0||E0(e,function(l){var b=(l[s]-n[s])/c*(Math.PI*2-f)+f,w=Math.abs(o==="x"?l.x-e.x:l.y-e.y);return l.x=w*Math.cos(b),l.y=w*Math.sin(b),!0}),e},w0=function i(){return typeof window=="undefined"||typeof document=="undefined"?{}:{canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var e=document.createElement("canvas");return!!(window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl")))}catch(t){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var t=document.createElement("div");return t.id="webgl-error-message",t.style.fontFamily="monospace",t.style.fontSize="13px",t.style.fontWeight="normal",t.style.textAlign="center",t.style.background="#fff",t.style.color="#000",t.style.padding="1.5em",t.style.width="400px",t.style.margin="5em auto 0",this.webgl||(t.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`)),t},addGetWebGLMessage:function(t){t=t||{};var r=t.parent!==void 0?t.parent:document.body,n=t.id!==void 0?t.id:"oldie",a=i().getWebGLErrorMessage();a.id=n,r.appendChild(a)}}},_0=function(){var e=navigator.userAgent.toLowerCase();return e.indexOf("firefox")>-1?"firefox":e.indexOf("safari")>-1?"safari":e.indexOf("opr")>-1?"opera":e.indexOf("chrome")>-1?"chrome":e.indexOf("trident")>-1?"ie 11":e.indexOf("ie")>-1?"ie":"unknown"},$x=(0,m.__assign)((0,m.__assign)((0,m.__assign)((0,m.__assign)((0,m.__assign)({},_s),A),_),S),O),vc=$x,qx=vc.radialLayout,Qx=function(){function i(e){this.type=e.type,this.radial=e.radial,this.config=e}return i.prototype.init=function(e){var t=this;if(this.data=e,this.radial){this.layoutMethod=function(r){var n=pv()[t.type](r,t.config);return qx(n),n};return}this.layoutMethod=function(r){return pv()[t.type](r,t.config)}},i.prototype.execute=function(){return this.layoutMethod(this.data,this.config)},i.prototype.layout=function(e){return this.init(e),this.execute()},i}(),Jx=Qx;(0,Za.registerLayout)("grid",Za.GridLayout),(0,Za.registerLayout)("random",Za.RandomLayout),(0,Za.registerLayout)("force",Za.ForceLayout),(0,Za.registerLayout)("circular",Za.CircularLayout),(0,Za.registerLayout)("dagre",Za.DagreLayout),(0,Za.registerLayout)("dagreCompound",Za.DagreCompoundLayout),(0,Za.registerLayout)("radial",Za.RadialLayout),(0,Za.registerLayout)("concentric",Za.ConcentricLayout),(0,Za.registerLayout)("mds",Za.MDSLayout),(0,Za.registerLayout)("fruchterman",Za.FruchtermanLayout),(0,Za.registerLayout)("fruchterman-gpu",Za.FruchtermanGPULayout),(0,Za.registerLayout)("gForce",Za.GForceLayout),(0,Za.registerLayout)("force2",Za.Force2Layout),(0,Za.registerLayout)("gForce-gpu",Za.GForceGPULayout),(0,Za.registerLayout)("comboForce",Za.ComboForceLayout),(0,Za.registerLayout)("comboCombined",Za.ComboCombinedLayout),(0,Za.registerLayout)("forceAtlas2",Za.ForceAtlas2Layout);var tb=function(e,t){t.isCustomLayout=!0,Za.Layouts[e]=(0,Za.registerLayout)(e,t)},eb=function(){function i(e,t){var r=e.toString(),n=new Blob(["importScripts('".concat(t,"');(").concat(r,")()")],{type:"text/javascript"});return new Worker(URL.createObjectURL(n))}return i}(),rb=eb,nb=function(e){e===void 0&&(e="https://unpkg.com/@antv/layout@0.3.23/dist/layout.min.js");function t(){var n={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};layout.registerLayout("grid",layout.GridLayout),layout.registerLayout("random",layout.RandomLayout),layout.registerLayout("force",layout.ForceLayout),layout.registerLayout("force2",layout.Force2Layout),layout.registerLayout("circular",layout.CircularLayout),layout.registerLayout("dagre",layout.DagreLayout),layout.registerLayout("dagreCompound",layout.DagreCompoundLayout),layout.registerLayout("radial",layout.RadialLayout),layout.registerLayout("concentric",layout.ConcentricLayout),layout.registerLayout("mds",layout.MDSLayout),layout.registerLayout("fruchterman",layout.FruchtermanLayout),layout.registerLayout("fruchterman-gpu",layout.FruchtermanGPULayout),layout.registerLayout("gForce",layout.GForceLayout),layout.registerLayout("gForce-gpu",layout.GForceGPULayout),layout.registerLayout("comboForce",layout.ComboForceLayout),layout.registerLayout("comboCombined",layout.ComboCombinedLayout),layout.registerLayout("forceAtlas2",layout.ForceAtlas2Layout);function a(s){var u=s.data.type;return u===n.RUN||u===n.GPURUN}function o(s){var u=this,f=s.data.type;switch(f){case n.RUN:{var c=s.data,l=c.nodes,b=c.edges,w=c.layoutCfg,I=w===void 0?{}:w,W=I.type,H=layout.getLayoutByName(W);if(!H){this.postMessage({type:n.ERROR,message:"layout ".concat(W," not found")});break}var J;I.onLayoutEnd=function(){u.postMessage({type:n.END,nodes:l}),J==null||J.destroy()},J=new H(I),J.init({nodes:l,edges:b}),J.execute();break}case n.GPURUN:{var at=s.data,ut=at.nodes,b=at.edges,lt=at.layoutCfg,I=lt===void 0?{}:lt,_t=at.canvas,W=I.type,H=layout.getLayoutByName(W);if(!H){this.postMessage({type:n.ERROR,message:"layout ".concat(W," not found")});break}if(W.split("-")[1]!=="gpu"){this.postMessage({type:n.ERROR,message:"layout ".concat(W," does not support GPU")});break}var Bt=new H(I);Bt.init({nodes:ut,edges:b}),Bt.executeWithWorker(_t,this);break}default:break}}onmessage=function(u){a(u)&&o(u)}}var r=new rb(t,e);return r},vh={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};function pd(i){"@babel/helpers - typeof";return pd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pd(i)}var S0=function(e){return setTimeout(e,16)},M0=function(e){return clearTimeout(e)},yv={requestAnimationFrame:function(e){var t=typeof window!="undefined"&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame)||S0;return t(e)},cancelAnimationFrame:function(e){var t=typeof window!="undefined"&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame)||M0;return t(e)}},ab=["fruchterman","gForce"],ib=["force","grid","circular"],ob=function(i){(0,m.__extends)(e,i);function e(t){var r=i.call(this,t)||this;return r.graph=t,r.layoutCfg=t.get("layout")||{},r.layoutType=r.getLayoutType(),r.worker=null,r.workerData={},r.initLayout(),r}return e.prototype.initLayout=function(){},e.prototype.getWorker=function(){return this.worker?this.worker:(typeof Worker=="undefined"?(console.warn("Web worker is not supported in current browser."),this.worker=null):this.worker=nb(this.layoutCfg.workerScriptURL),this.worker)},e.prototype.stopWorker=function(){var t=this.workerData;this.worker&&(this.worker.terminate(),this.worker=null,t.requestId&&(yv.cancelAnimationFrame(t.requestId),t.requestId=null),t.requestId2&&(yv.cancelAnimationFrame(t.requestId2),t.requestId2=null))},e.prototype.execLayoutMethod=function(t,r){var n=this;return new Promise(function(a,o){return(0,m.__awaiter)(n,void 0,void 0,function(){var s,u,f,c,l,W,b,w,I,W,H;return(0,m.__generator)(this,function(J){switch(J.label){case 0:if(s=this.graph,!s||s.get("destroyed"))return[2];u=t.type,t.onLayoutEnd=function(){s.emit("aftersublayout",{type:u}),a()},u&&this.isGPU&&(A0(u)?u="".concat(u,"-gpu"):console.warn("The '".concat(u,"' layout does not support GPU calculation for now, it will run in CPU."))),_s.isForce(u)?(f=t.onTick,c=t.animate,l=c===void 0&&(u==="force"||u==="force2"),W=function(){f&&f(),(c||l)&&s.refreshPositions()},t.tick=W):(u==="comboForce"||u==="comboCombined")&&(t.comboTrees=s.get("comboTrees")),b=!1;try{w=new Za.Layouts[u](t),this.layoutMethods[r]&&this.layoutMethods[r].destroy(),this.layoutMethods[r]=w}catch(at){console.warn("The layout method: '".concat(u,"' does not exist! Please specify it first.")),o()}return b=w.enableTick,b&&(I=t.onTick,W=function(){I&&I(),s.refreshPositions()},w.tick=W),H=this.filterLayoutData(this.data,t),cb(H,r),w.init(H),s.emit("beforesublayout",{type:u}),[4,w.execute()];case 1:return J.sent(),w.isCustomLayout&&t.onLayoutEnd&&t.onLayoutEnd(),[2]}})})})},e.prototype.updateLayoutMethod=function(t,r){var n=this;return new Promise(function(a,o){return(0,m.__awaiter)(n,void 0,void 0,function(){var s,u,f,c,l,b,w;return(0,m.__generator)(this,function(I){switch(I.label){case 0:return s=this.graph,u=r==null?void 0:r.type,r.onLayoutEnd=function(){s.emit("aftersublayout",{type:u}),a()},_s.isForce(u)&&(f=r.onTick,c=r.animate,l=c===void 0&&(u==="force"||u==="force2"),b=function(){f==null||f(),(c||l)&&s.refreshPositions()},r.tick=b),w=this.filterLayoutData(this.data,r),t.init(w),t.updateCfg(r),s.emit("beforesublayout",{type:u}),[4,t.execute()];case 1:return I.sent(),t.isCustomLayout&&r.onLayoutEnd&&r.onLayoutEnd(),[2]}})})})},e.prototype.layout=function(t){var r=this,n,a=this.graph;if(!(!a||a.get("destroyed"))){this.data=this.setDataFromGraph();var o=this.data,s=o.nodes,u=o.hiddenNodes;if(!s)return!1;var f=a.get("width"),c=a.get("height"),l={};Object.assign(l,{width:f,height:c,center:[f/2,c/2]},this.layoutCfg),this.layoutCfg=l;var b=l.type,w=!1;(n=this.layoutMethods)===null||n===void 0||n.forEach(function(_t){var Bt;return w=!!(!((Bt=_t.nodes)===null||Bt===void 0)&&Bt.length)||w});var I=this.destoryLayoutMethods();a.emit("beforelayout");var W=Promise.resolve();w&&b&&(I==null?void 0:I.length)===1&&I[0]===b?this.tweakInit():W=this.initPositions(l.center,s);var H=this.initPositions(l.center,u);H.then(),this.isGPU=C0(l,b);var J=l.onLayoutEnd,at=l.layoutEndFormatted,ut=l.adjust;if(at||(l.layoutEndFormatted=!0,l.onAllLayoutEnd=function(){return(0,m.__awaiter)(r,void 0,void 0,function(){return(0,m.__generator)(this,function(_t){switch(_t.label){case 0:return J&&J(s),this.refreshLayout(),ut&&l.pipes?[4,this.adjustPipesBox(this.data,ut)]:[3,2];case 1:_t.sent(),this.refreshLayout(),_t.label=2;case 2:return a.emit("afterlayout"),[2]}})})}),this.stopWorker(),l.workerEnabled&&this.layoutWithWorker(this.data,t))return!0;var lt=!1;return l.type?(lt=!0,W=W.then(function(){return(0,m.__awaiter)(r,void 0,void 0,function(){return(0,m.__generator)(this,function(_t){switch(_t.label){case 0:return[4,this.execLayoutMethod(l,0)];case 1:return[2,_t.sent()]}})})})):l.pipes&&(lt=!0,l.pipes.forEach(function(_t,Bt){W=W.then(function(){return(0,m.__awaiter)(r,void 0,void 0,function(){return(0,m.__generator)(this,function(Rt){switch(Rt.label){case 0:return[4,this.execLayoutMethod(_t,Bt)];case 1:return[2,Rt.sent()]}})})})})),lt?W.then(function(){l.onAllLayoutEnd&&l.onAllLayoutEnd(),t&&t()}).catch(function(_t){console.warn("graph layout failed,",_t)}):(a.refreshPositions(),t==null||t()),!1}},e.prototype.tweakInit=function(){var t=this,r=t.data,n=t.graph,a=r.nodes,o=r.edges;if(a!=null&&a.length){var s={};a.forEach(function(c){var l=c.x,b=c.y;!isNaN(l)&&!isNaN(b)&&(s[c.id]={x:l,y:b},c.mass=c.mass||2)}),o.forEach(function(c){var l=c.source,b=c.target,w=s[l],I=s[b];!w&&I?s[l]={x:I.x+(Math.random()-.5)*80,y:I.y+(Math.random()-.5)*80}:!I&&w&&(s[b]={x:w.x+(Math.random()-.5)*80,y:w.y+(Math.random()-.5)*80})});var u=n.get("width"),f=n.get("height");a.forEach(function(c){var l=s[c.id]||{x:u/2+(Math.random()-.5)*20,y:f/2+(Math.random()-.5)*20};c.x=l.x,c.y=l.y})}},e.prototype.initWithPreset=function(t,r){var n=this;return new Promise(function(a,o){return(0,m.__awaiter)(n,void 0,void 0,function(){var s,u,f,c,l,b,w;return(0,m.__generator)(this,function(I){switch(I.label){case 0:return s=this,u=s.layoutCfg,f=s.data,c=u.preset,!(c!=null&&c.type)||!Za.Layouts[c==null?void 0:c.type]?(r==null||r(),a(),[2,!1]):(l=C0(c,c.type),b=l?"".concat(c.type,"-gpu"):c.type,w=new Za.Layouts[b](c),delete u.preset,w.init(f),[4,w.execute()]);case 1:return I.sent(),t==null||t(),a(),[2,!0]}})})})},e.prototype.layoutWithWorker=function(t,r){var n=this,a=this,o=a.layoutCfg,s=a.graph,u=this.getWorker(),f=this.workerData;if(!u)return!1;f.requestId=null,f.requestId2=null,f.currentTick=null,f.currentTickData=null,s.emit("beforelayout");var c=Promise.resolve(),l=!1;if(o.type)l=!0,c=c.then(function(){return n.runWebworker(u,t,o)});else if(o.pipes){l=!0;for(var b=function(J){c=c.then(function(){return n.runWebworker(u,t,J)})},w=0,I=o.pipes;w<I.length;w++){var W=I[w];b(W)}}return l&&c.then(function(){o.onAllLayoutEnd&&o.onAllLayoutEnd(),r==null||r()}).catch(function(H){console.error("layout failed",H)}),!0},e.prototype.runWebworker=function(t,r,n){var a=this,o=this.isGPU,s=this.filterLayoutData(r,n),u=s.nodes,f=s.edges,c=document.createElement("canvas"),l=o&&typeof window!="undefined"&&window.navigator&&!navigator.gpu&&"OffscreenCanvas"in window&&"transferControlToOffscreen"in c,b=ub(n,function(I){return typeof I!="function"});if(!l)t.postMessage({type:vh.RUN,nodes:u,edges:f,layoutCfg:b});else{var w=c.transferControlToOffscreen();b.type="".concat(b.type,"-gpu"),t.postMessage({type:vh.GPURUN,nodes:u,edges:f,layoutCfg:b,canvas:w},[w])}return new Promise(function(I,W){t.onmessage=function(H){a.handleWorkerMessage(I,W,H,s,n)}})},e.prototype.handleWorkerMessage=function(t,r,n,a,o){var s=this,u=s.graph,f=s.workerData,c=n.data,l=c.type,b=function(){o.onTick&&o.onTick()};switch(l){case vh.TICK:f.currentTick=c.currentTick,f.currentTickData=c,f.requestId||(f.requestId=yv.requestAnimationFrame(function(){yd(a,c),u.refreshPositions(),b(),c.currentTick===c.totalTicks?t():f.currentTick===c.totalTicks&&(f.requestId2=yv.requestAnimationFrame(function(){yd(a,f.currentTickData),u.refreshPositions(),f.requestId2=null,b(),t()})),f.requestId=null}));break;case vh.END:f.currentTick==null&&(yd(a,c),t());break;case vh.GPUEND:f.currentTick==null&&(fb(a,c),t());break;case vh.ERROR:console.warn("Web-Worker layout error!",c.message),r();break;default:r();break}},e.prototype.updateLayoutCfg=function(t){var r=this,n=this,a=n.graph,o=n.layoutMethods;if(!(!a||a.get("destroyed"))){var s=t.disableTriggerLayout,u=(0,m.__rest)(t,["disableTriggerLayout"]),f=(0,d.mix)({},this.layoutCfg,u);if(this.layoutCfg=f,!s){if(!(o!=null&&o.length)){this.layout();return}if(this.data=this.setDataFromGraph(),this.stopWorker(),!(u.workerEnabled&&this.layoutWithWorker(this.data,null))){a.emit("beforelayout");var c=Promise.resolve(),l=!1;(o==null?void 0:o.length)===1?(l=!0,c=c.then(function(){return(0,m.__awaiter)(r,void 0,void 0,function(){return(0,m.__generator)(this,function(b){switch(b.label){case 0:return[4,this.updateLayoutMethod(o[0],f)];case 1:return[2,b.sent()]}})})})):o!=null&&o.length&&(l=!0,o.forEach(function(b,w){var I=f.pipes[w];c=c.then(function(){return(0,m.__awaiter)(r,void 0,void 0,function(){return(0,m.__generator)(this,function(W){switch(W.label){case 0:return[4,this.updateLayoutMethod(b,I)];case 1:return[2,W.sent()]}})})})})),l&&c.then(function(){f.onAllLayoutEnd&&f.onAllLayoutEnd()}).catch(function(b){console.warn("layout failed",b)})}}}},e.prototype.adjustPipesBox=function(t,r){var n=this;return new Promise(function(a){var o=t.nodes;o!=null&&o.length||a(),ib.includes(r)||(console.warn("The adjust type ".concat(r," is not supported yet, please assign it with 'force', 'grid', or 'circular'.")),a());var s={center:n.layoutCfg.center,nodeSize:function(I){return Math.max(I.height,I.width)},preventOverlap:!0,onLayoutEnd:function(){}},u=n.getLayoutBBox(o),f=u.groupNodes,c=u.layoutNodes,l=(0,d.clone)(c);s.onLayoutEnd=function(){c==null||c.forEach(function(w,I){var W,H,J,at=w.x-((W=l[I])===null||W===void 0?void 0:W.x),ut=w.y-((H=l[I])===null||H===void 0?void 0:H.y);(J=f[I])===null||J===void 0||J.forEach(function(lt){lt.x+=at,lt.y+=ut})}),a()};var b=new Za.Layouts[r](s);b.layout({nodes:c})})},e.prototype.destroy=function(){this.destoryLayoutMethods();var t=this.worker;t&&(t.terminate(),this.worker=null),this.destroyed=!0,this.graph.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0,this.graph=null},e}(Mg),sb=ob;function yd(i,e){for(var t=i.nodes,r=e.nodes,n=t.length,a=0;a<n;a++){var o=t[a];o.x=r[a].x,o.y=r[a].y}}function ub(i,e){var t={};return i&&pd(i)==="object"?(Object.keys(i).forEach(function(r){i.hasOwnProperty(r)&&e(i[r])&&(t[r]=i[r])}),t):i}function fb(i,e){for(var t=i.nodes,r=e.vertexEdgeData,n=t.length,a=0;a<n;a++){var o=t[a],s=r[4*a],u=r[4*a+1];o.x=s,o.y=u}}function cb(i,e){var t;if(!((t=i==null?void 0:i.nodes)===null||t===void 0)&&t.length){var r=i.nodes;r.forEach(function(n){n.layoutOrder=e})}}function A0(i){return ab.includes(i)}function C0(i,e){var t=e;e&&e.split("-")[1]==="gpu"&&(t=e.split("-")[0],i.gpuEnabled=!0);var r=!1;return i.gpuEnabled&&(r=!0,w0().webgl||(console.warn("Your browser does not support webGL or GPGPU. The layout will run in CPU."),r=!1)),r&&!A0(t)&&(console.warn("The '".concat(t,"' layout does not support GPU calculation for now, it will run in CPU.")),r=!1),r}var T0=Kt,lb="svg",hb=function(i){(0,m.__extends)(e,i);function e(t){var r=i.call(this,t)||this,n=r.get("defaultNode");return n||r.set("defaultNode",{type:"circle"}),n.type||(n.type="circle",r.set("defaultNode",n)),r.destroyed=!1,r}return e.prototype.initLayoutController=function(){var t=new sb(this);this.set({layoutController:t})},e.prototype.initEventController=function(){var t=new Ux(this);this.set({eventController:t})},e.prototype.initCanvas=function(){var t=this.get("container");if(typeof t=="string"&&(t=document.getElementById(t),this.set("container",t)),!t)throw new Error("invalid container");var r=t.clientWidth,n=t.clientHeight,a=this.get("width")||r,o=this.get("height")||n;!this.get("width")&&!this.get("height")&&(this.set("width",r),this.set("height",n));var s=this.get("renderer"),u;if(s===lb)u=new Oh({container:t,width:a,height:o});else{var f={container:t,width:a,height:o},c=this.get("pixelRatio");c&&(f.pixelRatio=c,window.devicePixelRatio=c),u=new lc(f)}this.set("canvas",u)},e.prototype.initPlugins=function(){var t=this;(0,d.each)(t.get("plugins"),function(r){!r.destroyed&&r.initPlugin&&r.initPlugin(t)})},e.prototype.downloadImageWatermark=function(t,r,n,a){return(0,m.__awaiter)(this,void 0,void 0,function(){var o,s,u;return(0,m.__generator)(this,function(f){switch(f.label){case 0:return o=t.style.backgroundImage,s=o.slice(5,o.length-2),u=new Image,u.src=s,[4,new Promise(function(c){u.onload=function(){var l=r.createPattern(u,"repeat");r.rect(0,0,n,a),r.fillStyle=l,r.fill(),c("")}})];case 1:return f.sent(),[2]}})})},e.prototype.asyncToDataUrl=function(t,r,n,a,o,s){var u=this,f=document.querySelector(".g6-graph-watermarker"),c=this.get("canvas"),l=c.getRenderer(),b=s||c.get("el"),w="";t||(t="image/png"),setTimeout(function(){return(0,m.__awaiter)(u,void 0,void 0,function(){var I,W,H,J,at,ut,lt,_t,Bt,Rt;return(0,m.__generator)(this,function(Qt){switch(Qt.label){case 0:return l!=="svg"?[3,1]:(I=b.cloneNode(!0),W=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),H=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",W),H.replaceChild(I,H.documentElement),J=new XMLSerializer().serializeToString(H),w="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(J)),[3,4]);case 1:return at=void 0,ut=b.getContext("2d"),lt=a||this.get("width"),_t=o||this.get("height"),Bt=void 0,f?[4,this.downloadImageWatermark(f,ut,lt,_t)]:[3,3];case 2:Qt.sent(),Qt.label=3;case 3:if(r){Rt=typeof window!="undefined"?window.devicePixelRatio:1;try{at=ut.getImageData(0,0,lt*Rt,_t*Rt),Bt=ut.globalCompositeOperation,ut.globalCompositeOperation="destination-over",ut.fillStyle=r,ut.fillRect(0,0,lt,_t)}catch(de){console.error("Download image failed. Out of memory at ImageData creation")}}w=b.toDataURL(t),r&&(ut.clearRect(0,0,lt,_t),ut.putImageData(at,0,0),ut.globalCompositeOperation=Bt),Qt.label=4;case 4:return n&&n(w),[2]}})})},16)},e.prototype.toDataURL=function(t,r){var n=this.get("canvas"),a=n.getRenderer(),o=n.get("el");t||(t="image/png");var s="";if(a==="svg"){var u=o.cloneNode(!0),f=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),c=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",f);c.replaceChild(u,c.documentElement);var l=new XMLSerializer().serializeToString(c);s="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(l))}else{var b=void 0,w=o.getContext("2d"),I=Math.max(this.get("width"),500),W=Math.max(this.get("height"),500),H=void 0;if(r){var J=typeof window!="undefined"&&window.devicePixelRatio||1;try{b=w.getImageData(0,0,I*J,W*J),H=w.globalCompositeOperation,w.globalCompositeOperation="destination-over",w.fillStyle=r,w.fillRect(0,0,I,W)}catch(at){console.error("Download image failed. Out of memory at ImageData creation")}}s=o.toDataURL(t),r&&(w.clearRect(0,0,I,W),w.putImageData(b,0,0),w.globalCompositeOperation=H)}return s},e.prototype.toFullDataURL=function(t,r,n){var a=this.get("group").getCanvasBBox(),o=a.height,s=a.width,u=this.get("renderer"),f=Ji('<div id="virtual-image"></div>'),c=n?n.backgroundColor:void 0,l=n?n.padding:void 0;l?(0,d.isNumber)(l)&&(l=[l,l,l,l]):l=[0,0,0,0];var b=o+l[0]+l[2],w=s+l[1]+l[3],I={container:f,height:b,width:w,quickHit:!0},W=u==="svg"?new Oh(I):new lc(I),H=this.get("group"),J=H.clone(),at=(0,d.clone)(J.getMatrix());at||(at=[1,0,0,0,1,0,0,0,1]);var ut=(a.maxX+a.minX)/2,lt=(a.maxY+a.minY)/2;at=T0(at,[["t",-ut,-lt],["t",s/2+l[3],o/2+l[0]]]),J.resetMatrix(),J.setMatrix(at),W.add(J);var _t=W.get("el"),Bt="";r||(r="image/png"),setTimeout(function(){if(u==="svg"){var Rt=_t.cloneNode(!0),Qt=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),de=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",Qt);de.replaceChild(Rt,de.documentElement);var se=new XMLSerializer().serializeToString(de);Bt="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(se))}else{var Te=void 0,je=_t.getContext("2d"),Dr=void 0;if(c){var Kr=typeof window!="undefined"?window.devicePixelRatio:1;try{Te=je.getImageData(0,0,w*Kr,b*Kr),Dr=je.globalCompositeOperation,je.globalCompositeOperation="destination-over",je.fillStyle=c,je.fillRect(0,0,w,b)}catch(zr){console.error("Download image failed. Out of memory at ImageData creation")}}Bt=_t.toDataURL(r),c&&(je.clearRect(0,0,w,b),je.putImageData(Te,0,0),je.globalCompositeOperation=Dr)}t&&t(Bt)},16)},e.prototype.downloadFullImage=function(t,r,n){var a=this,o=this.get("group").getCanvasBBox(),s=o.height,u=o.width,f=this.get("renderer"),c=Ji('<div id="virtual-image"></div>'),l=document.querySelector(".g6-graph-watermarker"),b=n?n.backgroundColor:void 0,w=n?n.padding:void 0;w?(0,d.isNumber)(w)&&(w=[w,w,w,w]):w=[0,0,0,0];var I=s+w[0]+w[2],W=u+w[1]+w[3];if(l){var H=this.get("graphWaterMarker").cfg||{},J=H.width,at=H.height;I=Math.ceil(I/at)*at,W=Math.ceil(W/J)*J}var ut={container:c,height:I,width:W},lt=f==="svg"?new Oh(ut):new lc(ut),_t=this.get("group"),Bt=Rx(_t),Rt=(0,d.clone)(Bt.getMatrix());Rt||(Rt=[1,0,0,0,1,0,0,0,1]);var Qt=(o.maxX+o.minX)/2,de=(o.maxY+o.minY)/2;Rt=T0(Rt,[["t",-Qt,-de],["t",u/2+w[3],s/2+w[0]]]),Bt.resetMatrix(),Bt.setMatrix(Rt),lt.add(Bt);var se=lt.get("el");r||(r="image/png"),this.asyncToDataUrl(r,b,function(Te){var je=document.createElement("a"),Dr=(t||"graph")+(f==="svg"?".svg":".".concat(r.split("/")[1]));a.dataURLToImage(Te,f,je,Dr);var Kr=document.createEvent("MouseEvents");Kr.initEvent("click",!1,!1),je.dispatchEvent(Kr)},W,I,se)},e.prototype.downloadImage=function(t,r,n){var a=this,o=this;o.stopAnimate();var s=o.get("canvas"),u=s.getRenderer();r||(r="image/png");var f=(t||"graph")+(u==="svg"?".svg":".".concat(r.split("/")[1])),c=document.createElement("a");o.asyncToDataUrl(r,n,function(l){a.dataURLToImage(l,u,c,f);var b=document.createEvent("MouseEvents");b.initEvent("click",!1,!1),c.dispatchEvent(b)})},e.prototype.dataURLToImage=function(t,r,n,a){if(!t||t==="data:"){console.error("Download image failed. The graph is too large or there is invalid attribute values in graph items");return}if(typeof window!="undefined")if(window.Blob&&window.URL&&r!=="svg"){var o=t.split(","),s="";if(o&&o.length>0){var u=o[0].match(/:(.*?);/);u&&u.length>=2&&(s=u[1])}for(var f=atob(o[1]),c=f.length,l=new Uint8Array(c);c--;)l[c]=f.charCodeAt(c);var b=new Blob([l],{type:s});window.navigator.msSaveBlob?window.navigator.msSaveBlob(b,a):n.addEventListener("click",function(){n.download=a,n.href=window.URL.createObjectURL(b)})}else n.addEventListener("click",function(){n.download=a,n.href=t})},e.prototype.addPlugin=function(t){var r=this;t.destroyed||(r.get("plugins").push(t),t.initPlugin(r))},e.prototype.removePlugin=function(t){var r=this.get("plugins"),n=r.indexOf(t);n>=0&&(t.destroyPlugin(),r.splice(n,1))},e.prototype.setImageWaterMarker=function(t,r){t===void 0&&(t=Ll.waterMarkerImage);var n=this.get("container");(0,d.isString)(n)&&(n=document.getElementById(n)),n.style.position||(n.style.position="relative");var a=this.get("graphWaterMarker"),o=(0,d.deepMix)({},Ll.imageWaterMarkerConfig,r),s=o.width,u=o.height,f=o.compatible,c=o.image;if(!t){var l=f?n:document.querySelector(".g6-graph-watermarker");l&&(l.style.cssText=void 0),a&&a.clear();return}if(a)a.clear();else{var b={container:n,width:s,height:u,capture:!1},w=this.get("pixelRatio");w&&(b.pixelRatio=w,window.devicePixelRatio=w),a=new lc(b),this.set("graphWaterMarker",a)}a.get("el").style.display="none";var I=a.get("context"),W=c.rotate,H=c.x,J=c.y;I.rotate(-W*Math.PI/180);var at=new Image;at.crossOrigin="anonymous",at.src=t,at.onload=function(){if(I.drawImage(at,H,J,c.width,c.height),I.rotate(W*Math.PI/180),f)n.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var ut=document.querySelector(".g6-graph-watermarker");ut||(ut=document.createElement("div"),ut.className="g6-graph-watermarker"),ut.className="g6-graph-watermarker",a.destroyed||(ut.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:-1;"),n.appendChild(ut))}}},e.prototype.setTextWaterMarker=function(t,r){var n=this.get("container");(0,d.isString)(n)&&(n=document.getElementById(n)),n.style.position||(n.style.position="relative");var a=this.get("graphWaterMarker"),o=(0,d.deepMix)({},Ll.textWaterMarkerConfig,r),s=o.width,u=o.height,f=o.compatible,c=o.text;if(!(t!=null&&t.length)){var l=f?n:document.querySelector(".g6-graph-watermarker");l&&(l.style.cssText=void 0),a&&a.clear();return}if(a)a.clear();else{var b={container:n,width:s,height:u,capture:!1},w=this.get("pixelRatio");w&&(b.pixelRatio=w,window.devicePixelRatio=w),a=new lc(b),this.set("graphWaterMarker",a)}a.get("el").style.display="none";var I=a.get("context"),W=c.rotate,H=c.fill,J=c.fontFamily,at=c.fontSize,ut=c.baseline,lt=c.x,_t=c.y,Bt=c.lineHeight;I.rotate(-W*Math.PI/180),I.font="".concat(at,"px ").concat(J),I.fillStyle=H,I.textBaseline=ut;for(var Rt=(0,d.isString)(t)?[t]:t,Qt=Rt.length-1;Qt>=0;Qt--)I.fillText(Rt[Qt],lt,_t+Qt*Bt);if(I.rotate(W*Math.PI/180),f)n.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var de=document.querySelector(".g6-graph-watermarker");de||(de=document.createElement("div"),de.className="g6-graph-watermarker"),de.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:99;"),n.appendChild(de)}},e.prototype.destroy=function(){var t,r,n,a;(0,d.each)(this.get("plugins"),function(c){c.destroyPlugin()});var o=this.get("tooltips");if(o)for(var s=0;s<o.length;s++){var u=o[s];if(u){var f=u.parentElement;f&&f.removeChild(u)}}(t=this.get("eventController"))===null||t===void 0||t.destroy(),(r=this.get("layoutController"))===null||r===void 0||r.destroy(),(n=this.get("graphWaterMarker"))===null||n===void 0||n.destroy(),(a=document.querySelector(".g6-graph-watermarker"))===null||a===void 0||a.remove(),i.prototype.destroy.call(this)},e}(xg),I0=hb;function md(i){"@babel/helpers - typeof";return md=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},md(i)}function O0(i,e){if(e===void 0&&(e=new WeakMap),i===null)return i;if(i instanceof Date)return new Date(i);if(i instanceof RegExp)return new RegExp(i);if(md(i)!=="object")return i;if(e.get(i))return e.get(i);var t=Array.isArray(i)?[]:{};e.set(i,t);for(var r in i)i.hasOwnProperty(r)&&i[r]!==void 0&&(t[r]=O0(i[r],e));return t}function vb(i){try{return structuredClone(i)}catch(e){return O0(i)}}var db=vc.radialLayout,xd=vc.traverseTree,gb=function(i){(0,m.__extends)(e,i);function e(t){var r=i.call(this,t)||this;return r.layoutAnimating=!1,r.set("removeList",[]),r.set("layoutMethod",r.getLayout()),r}return e.prototype.getLayout=function(){var t=this.get("layout");return t?typeof t=="function"?t:(t.type||(t.type="dendrogram"),t.direction||(t.direction=t.type==="indented"?"LR":"TB"),t.radial?function(r){var n=pv()[t.type](r,t);return db(n),n}:function(r){return pv()[t.type](r,t)}):null},e.indexOfChild=function(t,r){var n=-1;return(0,d.each)(t,function(a,o){if(r===a.id)return n=o,!1}),n},e.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.animate=!0,t},e.prototype.innerAddChild=function(t,r,n){var a=this,o=t.data;o&&(o.x=t.x,o.y=t.y,o.depth=t.depth);var s=a.addItem("node",o,!1);if(r){if(s.set("parent",r),n){var u=r.get("originAttrs");if(u)s.set("originAttrs",u);else{var f=r.getModel();s.set("originAttrs",{x:f.x,y:f.y})}}var c=r.get("children");c?c.push(s):r.set("children",[s]),a.addItem("edge",{source:r.get("id"),target:s.get("id"),id:"".concat(r.get("id"),":").concat(s.get("id"))},!1)}return(0,d.each)(t.children||[],function(l){a.innerAddChild(l,s,n)}),a.emit("afteraddchild",{item:s,parent:r}),s},e.prototype.innerUpdateChild=function(t,r,n){var a=this,o=a.findById(t.id);if(!o){a.innerAddChild(t,r,n);return}(0,d.each)(t.children||[],function(I){a.innerUpdateChild(I,o,n)});var s=o.get("children");if(s){var u=s.length;if(u>0)for(var f=s.length-1;f>=0;f--){var c=s[f].getModel();e.indexOfChild(t.children||[],c.id)===-1&&(a.innerRemoveChild(c.id,{x:t.x,y:t.y},n),s.splice(f,1))}}var l,b;o.get("originAttrs")&&(l=o.get("originAttrs").x,b=o.get("originAttrs").y);var w=o.getModel();n&&o.set("originAttrs",{x:w.x,y:w.y}),o.set("model",Object.assign(w,t.data)),(l!==t.x||b!==t.y)&&o.updatePosition({x:t.x,y:t.y})},e.prototype.innerRemoveChild=function(t,r,n){var a=this,o=a.findById(t);if(o)if((0,d.each)(o.get("children"),function(u){a.innerRemoveChild(u.getModel().id,r,n)}),n){var s=o.getModel();o.set("to",r),o.set("originAttrs",{x:s.x,y:s.y}),a.get("removeList").push(o)}else a.removeItem(o,!1)},e.prototype.changeData=function(t,r){r===void 0&&(r=!0);var n=this;this.getNodes().map(function(a){return n.clearItemStates(a)}),this.getEdges().map(function(a){return n.clearItemStates(a)}),r&&this.get("enabledStack")&&this.pushStack("changedata",{before:n.get("originData"),after:t||n.get("data")}),t?(n.data(t),n.render(!1)):n.layout(this.get("fitView"))},e.prototype.changeLayout=function(t){console.warn("Please call updateLayout instead of changeLayout. changeLayout will be discarded soon");var r=this;r.updateLayout(t)},e.prototype.updateLayout=function(t,r,n,a){a===void 0&&(a=!0);var o=this;if(!t){console.warn("layout cannot be null");return}if(a&&this.get("enabledStack")&&this.pushStack("layout",{before:o.get("layout"),after:t}),o.set("layout",t),o.set("layoutMethod",o.getLayout()),o.layout(),r){var s=n;s||(r==="begin"?s={x:0,y:0}:s={x:this.getWidth()/2,y:this.getHeight()/2}),s=this.getPointByCanvas(s.x,s.y);var u=this.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];s.x=s.x*u[0]+u[6],s.y=s.y*u[0]+u[7];var f=this.getGroup().getCanvasBBox(),c=f.minX,l=f.maxX,b=f.minY,w=f.maxY,I={x:(c+l)/2,y:(b+w)/2};r==="begin"&&(I.x=c,I.y=b),this.translate(s.x-I.x,s.y-I.y)}},e.prototype.refreshLayout=function(t){console.warn("Please call layout instead of refreshLayout. refreshLayout will be discarded soon");var r=this;r.layout(t)},e.prototype.layout=function(t){var r=this,n=this,a=n.get("data"),o=n.get("layoutMethod"),s=n.get("layout"),u=a;if(s!=null&&s.excludeInvisibles){a=(0,d.clone)(n.get("data"));var f={};xd(a,function(b){var w=b.children;if(!(w!=null&&w.length))return!0;for(var I=w.length-1;I>=0;I--){var W=r.findById(w[I].id),H=W?!W.isVisible():w[I].visible===!1;H&&(f[b.id]=f[b.id]||[],f[b.id].push({idx:I,child:w.splice(I,1)[0]}))}}),u=o?o(a,n.get("layout")):a,xd(u,function(b){var w=f[b.id];if(w!=null&&w.length)for(var I=w.length-1;I>=0;I--){var W=w[I],H=W.idx,J=W.child;b.children.splice(H,0,J)}})}else u=o?o(a,n.get("layout")):a;var c=n.get("animate");if(n.emit("beforerefreshlayout",{data:a,layoutData:u}),n.emit("beforelayout"),n.innerUpdateChild(u,void 0,c),t){var l=n.get("viewController");l.fitView()}c?n.layoutAnimate(u):(n.refresh(),n.paint()),n.emit("afterrefreshlayout",{data:a,layoutData:u}),n.emit("afterlayout")},e.prototype.addChild=function(t,r,n){n===void 0&&(n=!0);var a=this;a.emit("beforeaddchild",{model:t,parent:r}),(0,d.isString)(r)||(r=r.get("id"));var o=a.findDataById(r);if(o){o.children||(o.children=[]),o.children.push(t);var s=a.findById(r);s.refresh(),a.changeData(void 0,n)}},e.prototype.updateChildren=function(t,r,n){n===void 0&&(n=!0);var a=this,o=a.findById(r);if(!r||!o){console.warn("Update children failed! There is no node with id '".concat(r,"'"));return}var s=a.findDataById(r);s.children=t,o.refresh(),a.changeData(void 0,n)},e.prototype.updateChild=function(t,r,n){n===void 0&&(n=!0);var a=this;if(!r||!a.findById(r)){a.changeData(t,n);return}var o=a.findDataById(r),s=a.findById(t.id);if(o.children||(o.children=[]),!s)o.children.push(t);else{var u=e.indexOfChild(o.children,t.id);u>-1&&(o.children[u]=t)}var f=a.findById(r);f==null||f.refresh(),a.changeData(void 0,n)},e.prototype.removeChild=function(t,r){r===void 0&&(r=!0);var n=this,a=n.findById(t),o;if(a?o=a==null?void 0:a.get("parent"):o=n.getNodes().find(function(l){var b=l.getModel().children||[];return!!b.find(function(w){return w.id===t})}),o&&!o.destroyed){var s=o.get("id"),u=n.findDataById(s),f=u&&u.children||[],c=e.indexOfChild(f,t);f.splice(c,1),o.refresh()}n.changeData(void 0,r)},e.prototype.findDataById=function(t,r){var n=this;if(r||(r=n.get("data")),t===r.id)return r;var a=null;return(0,d.each)(r.children||[],function(o){if(o.id===t)return a=o,!1;if(a=n.findDataById(t,o),a)return!1}),a},e.prototype.layoutAnimate=function(t,r){var n=this,a=this.get("animateCfg");n.emit("beforeanimate",{data:t}),n.getEdges().forEach(function(o){var s=o.get("model");s.sourceAnchor||(s.sourceAnchor=o.get("sourceAnchorIndex"))}),this.get("canvas").animate(function(o){xd(t,function(s){var u=n.findById(s.id);if(u){var f=u.get("originAttrs"),c=u.get("model");if(f||(f={x:c.x,y:c.y},u.set("originAttrs",f)),r){var l=r(u,o,f,t);u.set("model",Object.assign(c,l))}else c.x=f.x+(s.x-f.x)*o,c.y=f.y+(s.y-f.y)*o}return!0}),(0,d.each)(n.get("removeList"),function(s){var u=s.getModel(),f=s.get("originAttrs"),c=s.get("to");u.x=f.x+(c.x-f.x)*o,u.y=f.y+(c.y-f.y)*o}),n.refreshPositions()},{duration:a.duration,easing:a.ease,callback:function(){(0,d.each)(n.getNodes(),function(s){s.set("originAttrs",null)}),(0,d.each)(n.get("removeList"),function(s){n.removeItem(s,!1)}),n.set("removeList",[]),a.callback&&a.callback(),n.emit("afteranimate",{data:t})},delay:a.delay})},e.prototype.stopLayoutAnimate=function(){this.get("canvas").stopAnimate(),this.emit("layoutanimateend",{data:this.get("data")}),this.layoutAnimating=!1},e.prototype.isLayoutAnimating=function(){return this.layoutAnimating},e.prototype.render=function(t){t===void 0&&(t=!0);var r=this,n=r.get("data");if(!n||!(0,d.isObject)(n)||!Object.keys(n).length)throw new Error("data must be defined first");r.clear(),t&&this.get("enabledStack")&&this.clearStack(),r.emit("beforerender"),r.layout(this.get("fitView")),r.emit("afterrender")},e.prototype.save=function(){return this.get("data")},e.prototype.data=function(t){i.prototype.data.call(this,t),this.set("originData",vb(t))},e}(I0),pb=gb;function Ya(i,e){if(i)for(var t in e)e.hasOwnProperty(t)&&(i.style[t]=e[t]);return i}var yb=function(){function i(e){this._cfgs=(0,d.deepMix)(this.getDefaultCfgs(),e),this._events={},this.destroyed=!1}return i.prototype.getDefaultCfgs=function(){return{}},i.prototype.initPlugin=function(e){var t=this;t.set("graph",e);var r=t.getEvents(),n={};(0,d.each)(r,function(a,o){var s=(0,d.wrapBehavior)(t,a);n[o]=s,e.on(o,s)}),this._events=n,this.init()},i.prototype.getEvents=function(){return{}},i.prototype.get=function(e){var t;return(t=this._cfgs)===null||t===void 0?void 0:t[e]},i.prototype.set=function(e,t){this._cfgs[e]=t},i.prototype.destroy=function(){},i.prototype.destroyPlugin=function(){this.destroy();var e=this.get("graph"),t=this._events;(0,d.each)(t,function(r,n){e.off(n,r)}),this._events=null,this._cfgs=null,this.destroyed=!0},i}(),nu=yb,mb=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),L0="url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)",xb=function(i){mb(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{img:L0,follow:!0}},e.prototype.init=function(){var t=this.get("graph"),r=t.get("container"),n=t.get("canvas").get("el"),a=this.get("img")||L0;a.includes("url(")||(a='url("'.concat(a,'")'));var o=Ji(`<div class='g6-grid-container' style="position:absolute;overflow:hidden;z-index: -1;"></div>`),s=Ji(`<div
        class='g6-grid'
        style='position:absolute;
        background-image: `.concat(a,`;
        user-select: none
        '></div>`));this.set("container",o),this.set("gridContainer",s),this.positionInit(),o.appendChild(s),r.insertBefore(o,n)},e.prototype.positionInit=function(){var t=this.get("graph"),r=t.get("minZoom"),n=t.get("width"),a=t.get("height");Ya(this.get("container"),{width:"".concat(n,"px"),height:"".concat(a,"px")});var o=n*80/r,s=a*80/r;Ya(this.get("gridContainer"),{width:"".concat(o,"px"),height:"".concat(s,"px"),left:"-".concat(o/2,"px"),top:"-".concat(s/2,"px")})},e.prototype.getEvents=function(){return{viewportchange:"updateGrid"}},e.prototype.updateGrid=function(t){var r=this.get("gridContainer"),n=t.matrix;n||(n=[1,0,0,0,1,0,0,0,1]);var a=this.get("follow"),o="matrix(".concat(n[0],", ").concat(n[1],", ").concat(n[3],", ").concat(n[4],", ").concat(a?n[6]:"0",", ").concat(a?n[7]:"0",")");Ya(r,{transform:o})},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){var t=this.get("graph"),r=t.get("container"),n=this.get("container");r.removeChild(n)},e}(nu),bb=xb,Eb=z(738186),mv=z.n(Eb),wb=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();typeof document!="undefined"&&mv()(`
  .g6-component-contextmenu {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .g6-contextmenu-ul {
    padding: 0;
    margin: 0;
    list-style: none;
  }

`);var _b=function(i){wb(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,handleMenuClick:void 0,getContent:function(r){return`
          <ul class='g6-contextmenu-ul'>
            <li>\u83DC\u5355\u98791</li>
            <li>\u83DC\u5355\u98792</li>
          </ul>
        `},shouldBegin:function(r){return!0},onHide:function(){return!0},itemTypes:["node","edge","combo"],trigger:"contextmenu"}},e.prototype.getEvents=function(){return this.get("trigger")==="click"?{click:"onMenuShow",touchend:"onMenuShow"}:{contextmenu:"onMenuShow"}},e.prototype.init=function(){var t=this.get("className"),r=Ji("<div class=".concat(t||"g6-component-contextmenu","></div>"));Ya(r,{top:"0px",position:"absolute",visibility:"hidden"});var n=this.get("container");n||(n=this.get("graph").get("container")),(0,d.isString)(n)&&(n=document.getElementById(n)),n.appendChild(r),this.set("menu",r)},e.prototype.onMenuShow=function(t){var r=this;t.preventDefault();var n=this.get("itemTypes");if(t.item){if(t.item&&t.item.getType&&n.indexOf(t.item.getType())===-1){r.onMenuHide();return}}else if(n.indexOf("canvas")===-1){r.onMenuHide();return}var a=this.get("shouldBegin");if(a(t)){var o=this.get("menu"),s=this.get("getContent"),u=this.get("graph"),f=s(t,u);(0,d.isString)(f)?o.innerHTML=f:o.innerHTML=f.outerHTML,this.removeMenuEventListener();var c=this.get("handleMenuClick");if(c){var l=function(Qt){c(Qt.target,t.item,u)};this.set("handleMenuClickWrapper",l),o.addEventListener("click",l)}var b=u.get("width"),w=u.get("height"),I=o.getBoundingClientRect(),W=this.get("offsetX")||0,H=this.get("offsetY")||0,J=u.getContainer().offsetTop,at=u.getContainer().offsetLeft,ut=t.canvasX+at+W,lt=t.canvasY+J+H;ut+I.width>b&&(ut=t.canvasX-I.width-W+at),lt+I.height>w&&(lt=t.canvasY-I.height-H+J),lt<0&&(lt=0),Ya(o,{top:"".concat(lt,"px"),left:"".concat(ut,"px"),visibility:"visible"});var _t=this.get("trigger")==="click",Bt=function(Qt){if(_t){_t=!1;return}r.onMenuHide()};document.body.addEventListener("click",Bt),this.set("handler",Bt)}},e.prototype.removeMenuEventListener=function(){var t=this.get("handleMenuClickWrapper"),r=this.get("handler");if(t){var n=this.get("menu");n.removeEventListener("click",t),this.set("handleMenuClickWrapper",null)}r&&document.body.removeEventListener("click",r)},e.prototype.onMenuHide=function(){var t=this.get("menu");t&&Ya(t,{visibility:"hidden"}),this.removeMenuEventListener()},e.prototype.destroy=function(){var t=this.get("menu");if(this.removeMenuEventListener(),t){var r=this.get("container");r||(r=this.get("graph").get("container")),(0,d.isString)(r)&&(r=document.getElementById(r)),r.removeChild(t)}},e}(nu),Sb=_b,Mb=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),bd=function(){return bd=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},bd.apply(this,arguments)},D0=Math.max,Ab=Kt,Cb="default",Tb="keyShape",Ib="delegate",N0="svg",Ob=function(i){Mb(e,i);function e(t){var r=i.call(this,t)||this;return r.handleUpdateCanvas=(0,d.debounce)(function(n){var a=r;a.destroyed||a.updateCanvas()},100,!1),r}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",type:"default",padding:50,size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0,hideEdge:!1}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var t=this,r=this._cfgs,n=r.size,a=r.graph;if(!this.destroyed){var o=this.get("canvas"),s=o.get("container"),u=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,f=navigator.userAgent.toLowerCase().indexOf("safari")>-1,c=Ji(`
      <div
        class=`.concat(r.viewportClassName,`
        style='position:absolute;
          left:0;
          top:0;
          box-sizing:border-box;
          outline: 2px solid #1980ff;
          cursor:move'
        draggable=`).concat(!(f||u),`
      </div>`)),l=0,b=0,w=!1,I=0,W=0,H=0,J=0,at=0,ut=0,lt=f||u?"mousedown":"dragstart";c.addEventListener(lt,function(Qt){var de,se;if(Qt.dataTransfer){var Te=new Image;Te.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' %3E%3Cpath /%3E%3C/svg%3E",(se=(de=Qt.dataTransfer).setDragImage)===null||se===void 0||se.call(de,Te,0,0);try{Qt.dataTransfer.setData("text/html","view-port-minimap")}catch(Dr){Qt.dataTransfer.setData("text","view-port-minimap")}}if(r.refresh=!1,Qt.target===c){var je=c.style;I=parseInt(je.left,10),W=parseInt(je.top,10),H=parseInt(je.width,10),J=parseInt(je.height,10),!(H>n[0]||J>n[1])&&(ut=a.getZoom(),at=t.get("ratio"),w=!0,l=Qt.clientX,b=Qt.clientY)}},!1);var _t=function(de){if(!(!w||(0,d.isNil)(de.clientX)||(0,d.isNil)(de.clientY))){var se=l-de.clientX,Te=b-de.clientY;(I-se<0||I-se+H>=n[0])&&(se=0),(W-Te<0||W-Te+J>=n[1])&&(Te=0),I-=se,W-=Te,Ya(c,{left:"".concat(I,"px"),top:"".concat(W,"px")}),a.translate(se*ut/at,Te*ut/at),l=de.clientX,b=de.clientY}};!f&&!u&&c.addEventListener("drag",_t,!1);var Bt=function(){w=!1,r.refresh=!0},Rt=f||u?"mouseup":"dragend";c.addEventListener(Rt,Bt,!1),s.addEventListener("mouseleave",Bt),s.addEventListener("mouseup",Bt),(f||u)&&s.addEventListener("mousemove",_t,!1),this.set("viewport",c),s.appendChild(c)}},e.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),r=this.get("totaldx"),n=this.get("totaldy"),a=this.get("graph"),o=this.get("size"),s=a.get("canvas").get("el"),u=a.get("width")||s.scrollWidth||500,f=a.get("height")||s.scrollHeight||500,c=a.getPointByCanvas(0,0),l=a.getPointByCanvas(u,f),b=this.get("viewport");b||this.initViewport();var w=(l.x-c.x)*t,I=(l.y-c.y)*t,W=c.x*t+r,H=c.y*t+n,J=W+w,at=H+I;W<0&&(w+=W,W=0),J>o[0]&&(w=w-(J-o[0])),H<0&&(I+=H,H=0),at>o[1]&&(I=I-(at-o[1])),this.set("ratio",t);var ut="".concat(W,"px"),lt="".concat(H,"px");Ya(b,{left:ut,top:lt,width:"".concat(w,"px"),height:"".concat(I,"px")})}},e.prototype.updateGraphShapes=function(){var t=this._cfgs.graph,r=this.get("canvas"),n=t.get("group");if(!n.destroyed){r.clear();var a;this.get("hideEdge")?(a=r.addGroup(),n.get("children").forEach(function(s){s.get("id").includes("-edge")||a.add(s.clone())})):(a=n.clone(),a.resetMatrix(),r.add(a));var o=t.get("renderer");o===N0&&this.updateVisible(a)}},e.prototype.updateVisible=function(t){var r=this;if(!t.isGroup()&&!t.get("visible"))t.hide();else{var n=t.get("children");if(!n||!n.length)return;n.forEach(function(a){a.get("visible")||a.hide(),r.updateVisible(a)})}},e.prototype.updateKeyShapes=function(){var t=this,r=this._cfgs.graph,n=this.get("canvas"),a=n.get("children")[0]||n.addGroup();this.get("hideEdge")||(0,d.each)(r.getEdges(),function(u){t.updateOneEdgeKeyShape(u,a)}),(0,d.each)(r.getNodes(),function(u){t.updateOneNodeKeyShape(u,a)});var o=r.getCombos();if(o&&o.length){var s=a.find(function(u){return u.get("name")==="comboGroup"})||a.addGroup({name:"comboGroup"});setTimeout(function(){t.destroyed||((0,d.each)(o,function(u){t.updateOneComboKeyShape(u,s)}),s==null||s.sort(),s==null||s.toBack(),t.updateCanvas())},250)}this.clearDestroyedShapes()},e.prototype.updateOneComboKeyShape=function(t,r){if(!this.destroyed){var n=this.get("itemMap")||{},a=n[t.get("id")],o=t.getBBox(),s=t.get("keyShape").clone(),u=s.attr(),f={x:o.centerX,y:o.centerY};a?f=Object.assign(u,f):(a=s,r.add(a));var c=a.get("type");(c==="rect"||c==="image")&&(f.x=o.minX,f.y=o.minY),a.attr(f),t.isVisible()?a.show():a.hide(),a.exist=!0;var l=t.getModel().depth;isNaN(l)||a.set("zIndex",l),n[t.get("id")]=a,this.set("itemMap",n)}},e.prototype.updateOneNodeKeyShape=function(t,r){var n=this.get("itemMap")||{},a=n[t.get("id")],o=t.getBBox(),s=t.get("keyShape").clone(),u=s.attr(),f={x:o.centerX,y:o.centerY};a?(f=Object.assign(u,f),a.toFront()):(a=s,r.add(a));var c=a.get("type");(c==="rect"||c==="image")&&(f.x=o.minX,f.y=o.minY),a.attr(f),t.isVisible()?a.show():a.hide(),a.exist=!0;var l=t.getModel().depth;isNaN(l)||a.set("zIndex",l),n[t.get("id")]=a,this.set("itemMap",n)},e.prototype.updateDelegateShapes=function(){var t=this,r=this._cfgs.graph,n=this.get("canvas"),a=n.get("children")[0]||n.addGroup();this.get("hideEdge")||(0,d.each)(r.getEdges(),function(u){t.updateOneEdgeKeyShape(u,a)}),(0,d.each)(r.getNodes(),function(u){t.updateOneNodeDelegateShape(u,a)});var o=r.getCombos();if(o&&o.length){var s=a.find(function(u){return u.get("name")==="comboGroup"})||a.addGroup({name:"comboGroup"});setTimeout(function(){t.destroyed||((0,d.each)(o,function(u){t.updateOneComboKeyShape(u,s)}),s==null||s.sort(),s==null||s.toBack(),t.updateCanvas())},250)}this.clearDestroyedShapes()},e.prototype.clearDestroyedShapes=function(){var t=this.get("itemMap")||{},r=Object.keys(t);if(!(!r||r.length===0))for(var n=r.length-1;n>=0;n--){var a=t[r[n]],o=a.exist;a.exist=!1,o||(a.remove(),delete t[r[n]])}},e.prototype.updateOneEdgeKeyShape=function(t,r){var n=this.get("itemMap")||{},a=n[t.get("id")];if(a){var o=t.get("keyShape").attr("path");a.attr("path",o)}else a=t.get("keyShape").clone(),r.add(a);t.isVisible()?a.show():a.hide(),a.exist=!0,n[t.get("id")]=a,this.set("itemMap",n)},e.prototype.updateOneNodeDelegateShape=function(t,r){var n=this.get("delegateStyle"),a=this.get("itemMap")||{},o=a[t.get("id")],s=t.getBBox();if(o){var u={x:s.minX,y:s.minY,width:s.width,height:s.height};o.attr(u),o.toFront()}else o=r.addShape("rect",{attrs:bd({x:s.minX,y:s.minY,width:s.width,height:s.height},n),name:"minimap-node-shape"});t.isVisible()?o.show():o.hide(),o.exist=!0,a[t.get("id")]=o,this.set("itemMap",a)},e.prototype.init=function(){this.initContainer(),this.get("graph").on("afterupdateitem",this.handleUpdateCanvas),this.get("graph").on("afteritemstatechange",this.handleUpdateCanvas),this.get("graph").on("afteradditem",this.handleUpdateCanvas),this.get("graph").on("afterremoveitem",this.handleUpdateCanvas),this.get("graph").on("afterrender",this.handleUpdateCanvas),this.get("graph").on("afterlayout",this.handleUpdateCanvas)},e.prototype.initContainer=function(){var t=this,r=t.get("graph"),n=t.get("size"),a=t.get("className"),o=t.get("container"),s=Ji("<div class='".concat(a,"' style='width: ").concat(n[0],"px; height: ").concat(n[1],"px; overflow: hidden'></div>"));(0,d.isString)(o)&&(o=document.getElementById(o)),o?o.appendChild(s):r.get("container").appendChild(s),t.set("container",s);var u=Ji('<div class="g6-minimap-container" style="position: relative;"></div>');s.appendChild(u),u.addEventListener("dragenter",function(l){l.preventDefault()}),u.addEventListener("dragover",function(l){l.preventDefault()});var f,c=r.get("renderer");c===N0?f=new Oh({container:u,width:n[0],height:n[1]}):f=new lc({container:u,width:n[0],height:n[1]}),t.set("canvas",f),t.updateCanvas()},e.prototype.updateCanvas=function(){if(!this.destroyed){var t=this.get("refresh");if(t){var r=this.get("graph");if(!r.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var n=this.get("size"),a=this.get("canvas"),o=this.get("type"),s=this.get("padding");if(!a.destroyed){switch(o){case Cb:this.updateGraphShapes();break;case Tb:this.updateKeyShapes();break;case Ib:this.updateDelegateShapes();break;default:break}var u=a.get("children")[0];if(u){u.resetMatrix();var f=u.getCanvasBBox(),c=r.get("canvas").getCanvasBBox(),l=r.getZoom()||1,b=c.width/l,w=c.height/l;Number.isFinite(f.width)&&(b=D0(f.width,b),w=D0(f.height,w)),b+=2*s,w+=2*s;var I=Math.min(n[0]/b,n[1]/w),W=[1,0,0,0,1,0,0,0,1],H=0,J=0;Number.isFinite(f.minX)&&(H=-f.minX),Number.isFinite(f.minY)&&(J=-f.minY);var at=(n[0]-(b-2*s)*I)/2,ut=(n[1]-(w-2*s)*I)/2;W=Ab(W,[["t",H,J],["s",I,I],["t",at,ut]]),u.setMatrix(W),this.set("ratio",I),this.set("totaldx",at+H*I),this.set("totaldy",ut+J*I),this.set("dx",at),this.set("dy",ut),this.updateViewport()}}}}}},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){var t;(t=this.get("canvas"))===null||t===void 0||t.destroy();var r=this.get("container");r!=null&&r.parentNode&&r.parentNode.removeChild(r)},e}(nu),Lb=Ob,Db=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();function Tf(i,e,t){var r=i.x-e.x,n=i.y-e.y;return!t||Math.abs(r)>t||Math.abs(n)>t?Math.sqrt(r*r+n*n):t}function Nb(i,e){return i.x*e.x+i.y*e.y}function P0(i,e){var t=(e.source.y-e.target.y)/(e.source.x-e.target.x),r=(t*t*e.source.x+t*(i.y-e.source.y)+i.x)/(t*t+1),n=t*(r-e.source.x)+e.source.y;return{x:r,y:n}}var Pb=function(i){Db(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{edgeBundles:[],edgePoints:[],K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:.6666667,bundleThreshold:.6,eps:1e-6,onLayoutEnd:function(){},onTick:function(){}}},e.prototype.init=function(){var t=this.get("graph"),r=this.get("onTick"),n=function(){r&&r(),t.refreshPositions()};this.set("tick",n)},e.prototype.bundling=function(t){var r=this;if(r.set("data",t),!r.isTicking()){var n=t.edges||[],a=t.nodes||[],o={},s=!1;if(a.forEach(function(lt){(lt.x===null||!lt.y===null||lt.x===void 0||!lt.y===void 0)&&(s=!0),o[lt.id]=lt}),s)throw new Error("please layout the graph or assign x and y for nodes first");r.set("nodeIdMap",o);var u=r.get("divisions"),f=r.get("divRate"),c=r.divideEdges(u);r.set("edgePoints",c);var l=r.getEdgeBundles();r.set("edgeBundles",l);for(var b=r.get("cycles"),w=r.get("iterations"),I=r.get("iterRate"),W=r.get("lambda"),H=0;H<b;H++){for(var J=function(_t){var Bt=[];n.forEach(function(Rt,Qt){if(Rt.source!==Rt.target){var de=o[Rt.source],se=o[Rt.target];Bt[Qt]=r.getEdgeForces({source:de,target:se},Qt,u,W);for(var Te=0;Te<u+1;Te++)c[Qt][Te].x+=Bt[Qt][Te].x,c[Qt][Te].y+=Bt[Qt][Te].y}})},at=0;at<w;at++)J(at);W=W/2,u*=f,w*=I,c=r.divideEdges(u),r.set("edgePoints",c)}n.forEach(function(lt,_t){lt.source!==lt.target&&(lt.type="polyline",lt.controlPoints=c[_t].slice(1,c[_t].length-1))});var ut=r.get("graph");ut.refresh()}},e.prototype.updateBundling=function(t){var r=this,n=t.data;if(n&&r.set("data",n),r.get("ticking")&&r.set("ticking",!1),Object.keys(t).forEach(function(o){r.set(o,t[o])}),t.onTick){var a=this.get("graph");r.set("tick",function(){t.onTick(),a.refresh()})}r.bundling(n)},e.prototype.divideEdges=function(t){var r=this,n=r.get("data").edges,a=r.get("nodeIdMap"),o=r.get("edgePoints");return(!o||o===void 0)&&(o=[]),n.forEach(function(s,u){var f;(!o[u]||o[u]===void 0)&&(o[u]=[]);var c=a[s.source],l=a[s.target];if(t===1)o[u].push({x:c.x,y:c.y}),o[u].push({x:.5*(c.x+l.x),y:.5*(c.y+l.y)}),o[u].push({x:l.x,y:l.y});else{var b=0;!((f=o[u])===null||f===void 0)&&f.length?b=r.getEdgeLength(o[u]):b=Tf({x:c.x,y:c.y},{x:l.x,y:l.y});var w=b/(t+1),I=w,W=[{x:c.x,y:c.y}];o[u].forEach(function(H,J){if(J!==0){for(var at=Tf(H,o[u][J-1]);at>I;){var ut=I/at,lt={x:o[u][J-1].x,y:o[u][J-1].y};lt.x+=ut*(H.x-o[u][J-1].x),lt.y+=ut*(H.y-o[u][J-1].y),W.push(lt),at-=I,I=w}I-=at}}),W.push({x:l.x,y:l.y}),o[u]=W}}),o},e.prototype.getEdgeLength=function(t){var r=0;return t.forEach(function(n,a){a!==0&&(r+=Tf(n,t[a-1]))}),r},e.prototype.getEdgeBundles=function(){var t=this,r=t.get("data"),n=r.edges||[],a=t.get("bundleThreshold"),o=t.get("nodeIdMap"),s=t.get("edgeBundles");return s||(s=[]),n.forEach(function(u,f){(!s[f]||s[f]===void 0)&&(s[f]=[])}),n.forEach(function(u,f){var c=o[u.source],l=o[u.target];n.forEach(function(b,w){if(!(w<=f)){var I=o[b.source],W=o[b.target],H=t.getBundleScore({source:c,target:l},{source:I,target:W});H>=a&&(s[f].push(w),s[w].push(f))}})}),s},e.prototype.getBundleScore=function(t,r){var n=this;t.vx=t.target.x-t.source.x,t.vy=t.target.y-t.source.y,r.vx=r.target.x-r.source.x,r.vy=r.target.y-r.source.y,t.length=Tf({x:t.source.x,y:t.source.y},{x:t.target.x,y:t.target.y}),r.length=Tf({x:r.source.x,y:r.source.y},{x:r.target.x,y:r.target.y});var a=n.getAngleScore(t,r),o=n.getScaleScore(t,r),s=n.getPositionScore(t,r),u=n.getVisibilityScore(t,r);return a*o*s*u},e.prototype.getAngleScore=function(t,r){var n=Nb({x:t.vx,y:t.vy},{x:r.vx,y:r.vy});return n/(t.length*r.length)},e.prototype.getScaleScore=function(t,r){var n=(t.length+r.length)/2,a=2/(n/Math.min(t.length,r.length)+Math.max(t.length,r.length)/n);return a},e.prototype.getPositionScore=function(t,r){var n=(t.length+r.length)/2,a={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2},o={x:(r.source.x+r.target.x)/2,y:(r.source.y+r.target.y)/2},s=Tf(a,o);return n/(n+s)},e.prototype.getVisibilityScore=function(t,r){var n=this.getEdgeVisibility(t,r),a=this.getEdgeVisibility(r,t);return n<a?n:a},e.prototype.getEdgeVisibility=function(t,r){var n=P0(r.source,t),a=P0(r.target,t),o={x:(n.x+a.x)/2,y:(n.y+a.y)/2},s={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2};return Math.max(0,1-2*Tf(o,s)/Tf(n,a))},e.prototype.getEdgeForces=function(t,r,n,a){for(var o=this,s=o.get("edgePoints"),u=o.get("K"),f=u/(Tf(t.source,t.target)*(n+1)),c=[{x:0,y:0}],l=1;l<n;l++){var b={x:0,y:0},w=o.getSpringForce({pre:s[r][l-1],cur:s[r][l],next:s[r][l+1]},f),I=o.getElectrostaticForce(l,r);b.x=a*(w.x+I.x),b.y=a*(w.y+I.y),c.push(b)}return c.push({x:0,y:0}),c},e.prototype.getSpringForce=function(t,r){var n=t.pre.x+t.next.x-2*t.cur.x,a=t.pre.y+t.next.y-2*t.cur.y;return n*=r,a*=r,{x:n,y:a}},e.prototype.getElectrostaticForce=function(t,r){var n=this,a=n.get("eps"),o=n.get("edgeBundles"),s=n.get("edgePoints"),u=o[r],f={x:0,y:0};return u.forEach(function(c){var l={x:s[c][t].x-s[r][t].x,y:s[c][t].y-s[r][t].y};if(Math.abs(l.x)>a||Math.abs(l.y)>a){var b=Tf(s[c][t],s[r][t]),w=1/b;f.x+=l.x*w,f.y+=l.y*w}}),f},e.prototype.isTicking=function(){return this.get("ticking")},e.prototype.getSimulation=function(){return this.get("forceSimulation")},e.prototype.destroy=function(){this.get("ticking")&&this.getSimulation().stop(),i.prototype.destroy.call(this)},e}(nu),kb=Pb,Rb=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ed=function(){return Ed=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Ed.apply(this,arguments)},xv=.05,k0={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:.1,fill:"#ccc"},Bb=function(i){Rb(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{trigger:"mousemove",d:1.5,r:300,delegateStyle:(0,d.clone)(k0),showLabel:!1,maxD:5,minD:0,scaleRBy:"unset",scaleDBy:"unset",showDPercent:!0}},e.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"magnify"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"magnify"};break}return t},e.prototype.init=function(){var t=this,r=t.get("r");t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{}),t.set("r2",r*r);var n=t.get("d");t.set("molecularParam",(n+1)*r)},e.prototype.createDelegate=function(t){var r=this,n=this,a=n.get("delegate");(!a||a.destroyed)&&(n.magnify(t),a=n.get("delegate"),a.on("dragstart",function(o){n.set("delegateCenterDiff",{x:a.attr("x")-o.x,y:a.attr("y")-o.y})}),a.on("drag",function(o){n.magnify(o)}),this.get("scaleDBy")==="wheel"&&a.on("mousewheel",function(o){r.scaleDByWheel(o)}),this.get("scaleRBy")==="wheel"&&a.on("mousewheel",function(o){n.scaleRByWheel(o)}))},e.prototype.scaleRByWheel=function(t){var r=this;if(!(!t||!t.originalEvent)){t.preventDefault&&t.preventDefault();var n=r.get("graph"),a,o=r.get("delegate"),s=o?{x:o.attr("x"),y:o.attr("y")}:void 0,u=s||n.getPointByClient(t.clientX,t.clientY);t.originalEvent.wheelDelta<0?a=1-xv:a=1/(1-xv);var f=r.get("maxR"),c=r.get("minR"),l=r.get("r");(l>(f||n.get("height"))&&a>1||l<(c||n.get("height")*.05)&&a<1)&&(a=1),l*=a,r.set("r",l),r.set("r2",l*l);var b=r.get("d");r.set("molecularParam",(b+1)*l),r.set("delegateCenterDiff",void 0),r.magnify(t,u)}},e.prototype.scaleRByDrag=function(t){var r=this;if(t){var n=r.get("dragPrePos"),a=r.get("graph"),o,s=a.getPointByClient(t.clientX,t.clientY);t.x-n.x<0?o=1-xv:o=1/(1-xv);var u=r.get("maxR"),f=r.get("minR"),c=r.get("r");(c>(u||a.get("height"))&&o>1||c<(f||a.get("height")*.05)&&o<1)&&(o=1),c*=o,r.set("r",c),r.set("r2",c*c);var l=r.get("d");r.set("molecularParam",(l+1)*c),r.magnify(t,s),r.set("dragPrePos",{x:t.x,y:t.y})}},e.prototype.scaleDByWheel=function(t){var r=this;if(!(!t&&!t.originalEvent)){t.preventDefault&&t.preventDefault();var n=0;t.originalEvent.wheelDelta<0?n=-.1:n=.1;var a=r.get("d"),o=a+n,s=r.get("maxD"),u=r.get("minD");if(o<s&&o>u){r.set("d",o);var f=r.get("r");r.set("molecularParam",(o+1)*f);var c=r.get("delegate"),l=c?{x:c.attr("x"),y:c.attr("y")}:void 0;r.set("delegateCenterDiff",void 0),r.magnify(t,l)}}},e.prototype.scaleDByDrag=function(t){var r=this,n=r.get("dragPrePos"),a=t.x-n.x>0?.1:-.1,o=r.get("d"),s=o+a,u=r.get("maxD"),f=r.get("minD");if(s<u&&s>f){r.set("d",s);var c=r.get("r");r.set("molecularParam",(s+1)*c),r.magnify(t)}r.set("dragPrePos",{x:t.x,y:t.y})},e.prototype.magnify=function(t,r){var n=this;n.restoreCache();var a=n.get("graph"),o=n.get("cachedMagnifiedModels"),s=n.get("cachedOriginPositions"),u=n.get("showLabel"),f=n.get("r"),c=n.get("r2"),l=n.get("d"),b=n.get("molecularParam"),w=a.getNodes(),I=w.length,W=r?{x:r.x,y:r.y}:{x:t.x,y:t.y};n.get("dragging")&&(n.get("trigger")==="mousemove"||n.get("trigger")==="click")&&(W=n.get("cacheCenter"));var H=n.get("delegateCenterDiff");H&&(W.x+=H.x,W.y+=H.y),n.updateDelegate(W,f);for(var J=0;J<I;J++){var at=w[J].getModel(),ut=at.x,lt=at.y;if(!(isNaN(ut)||isNaN(lt))){var _t=(ut-W.x)*(ut-W.x)+(lt-W.y)*(lt-W.y);if(!isNaN(_t)&&_t<c&&_t!==0){var Bt=Math.sqrt(_t),Rt=b*Bt/(l*Bt+f),Qt=(ut-W.x)/Bt,de=(lt-W.y)/Bt;if(at.x=Qt*Rt+W.x,at.y=de*Rt+W.y,s[at.id]||(s[at.id]={x:ut,y:lt,texts:[]}),o.push(at),u&&2*Bt<f)for(var se=w[J],Te=se.getContainer(),je=Te.getChildren(),Dr=je.length,Kr=0;Kr<Dr;Kr++){var zr=je[Kr];zr.get("type")==="text"&&(s[at.id].texts.push({visible:zr.get("visible"),shape:zr}),zr.set("visible",!0))}}}}a.refreshPositions()},e.prototype.restoreCache=function(){for(var t=this,r=t.get("cachedMagnifiedModels"),n=t.get("cachedOriginPositions"),a=r.length,o=0;o<a;o++){var s=r[o],u=s.id,f=n[u];s.x=f.x,s.y=f.y;for(var c=f.texts.length,l=0;l<c;l++){var b=f.texts[l];b.shape.set("visible",b.visible)}}t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{})},e.prototype.updateParams=function(t){var r=this,n=t.r,a=t.d,o=t.trigger,s=t.minD,u=t.maxD,f=t.minR,c=t.maxR,l=t.scaleDBy,b=t.scaleRBy;isNaN(t.r)||(r.set("r",n),r.set("r2",n*n)),isNaN(a)||r.set("d",a),isNaN(u)||r.set("maxD",u),isNaN(s)||r.set("minD",s),isNaN(c)||r.set("maxR",c),isNaN(f)||r.set("minR",f);var w=r.get("d"),I=r.get("r");if(r.set("molecularParam",(w+1)*I),(o==="mousemove"||o==="click"||o==="drag")&&r.set("trigger",o),l==="drag"||l==="wheel"||l==="unset"){r.set("scaleDBy",l),r.get("delegate").remove(),r.get("delegate").destroy();var W=r.get("dPercentText");W&&(W.remove(),W.destroy())}if(b==="drag"||b==="wheel"||b==="unset"){r.set("scaleRBy",b),r.get("delegate").remove(),r.get("delegate").destroy();var W=r.get("dPercentText");W&&(W.remove(),W.destroy())}},e.prototype.updateDelegate=function(t,r){var n=this,a=this,o=a.get("graph"),s=a.get("delegate");if(!s||s.destroyed){var u=o.get("group"),f=a.get("delegateStyle")||k0;s=u.addShape("circle",{attrs:Ed({r:r/1.5,x:t.x,y:t.y},f),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&(this.get("scaleRBy")==="wheel"?s.on("mousewheel",function(I){a.scaleRByWheel(I)}):this.get("scaleRBy")==="drag"&&(s.on("dragstart",function(I){a.set("dragging",!0),a.set("cacheCenter",{x:I.x,y:I.y}),a.set("dragPrePos",{x:I.x,y:I.y})}),s.on("drag",function(I){a.scaleRByDrag(I)}),s.on("dragend",function(I){a.set("dragging",!1)})),this.get("scaleDBy")==="wheel"?s.on("mousewheel",function(I){n.scaleDByWheel(I)}):this.get("scaleDBy")==="drag"&&(s.on("dragstart",function(I){a.set("dragging",!0),a.set("cacheCenter",{x:I.x,y:I.y}),a.set("dragPrePos",{x:I.x,y:I.y})}),s.on("drag",function(I){n.scaleDByDrag(I)}),s.on("dragend",function(I){a.set("dragging",!1)})))}else s.attr({x:t.x,y:t.y,r:r/1.5});if(a.get("showDPercent")){var c=Math.round((a.get("d")-a.get("minD"))/(a.get("maxD")-a.get("minD"))*100),l=a.get("dPercentText"),b=t.y+r/1.5+16;if(!l||l.destroyed){var w=o.get("group");l=w.addShape("text",{attrs:{text:"".concat(c,"%"),x:t.x,y:b,fill:"#aaa",stroke:"#fff",lineWidth:1,fontSize:12}}),a.set("dPercentText",l)}else l.attr({text:"".concat(c,"%"),x:t.x,y:b})}a.set("delegate",s)},e.prototype.clear=function(){var t=this.get("graph");this.restoreCache(),t.refreshPositions();var r=this.get("delegate");r&&!r.destroyed&&(r.remove(),r.destroy());var n=this.get("dPercentText");n&&!n.destroyed&&(n.remove(),n.destroy())},e.prototype.destroy=function(){this.clear()},e}(nu),Fb=Bb,Gb=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),R0=.05;typeof document!="undefined"&&mv()(`
  .g6-component-toolbar {
    position: absolute;
    list-style-type: none;
    padding: 6px;
    left: 0px;
    top: 0px;
    background-color: rgba(255, 255, 255, 0.9);
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    margin: 0;
  }
  .g6-component-toolbar li {
    float: left;
    text-align: center;
    width: 35px;
    height: 24px;
    cursor: pointer;
		list-style-type:none;
    list-style: none;
    margin-left: 0px;
  }
  .g6-component-toolbar li .icon {
    opacity: 0.7;
  }
  .g6-component-toolbar li .icon:hover {
    opacity: 1;
  }
`);var zb=function(e){if(!e)return[];if(e.composedPath)return e.composedPath();for(var t=[],r=e.target;r;){if(t.push(r),r.tagName==="HTML")return t.push(document,window),t;r=r.parentElement}return t},Ub=function(i){Gb(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{handleClick:void 0,getContent:function(r){return`
          <ul class='g6-component-toolbar'>
            <li code='redo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M256 682.666667c0-102.741333 66.730667-213.333333 213.333333-213.333334 107.008 0 190.762667 56.576 230.570667 125.354667L611.968 682.666667H853.333333v-241.365334l-91.562666 91.562667C704.768 448.469333 601.130667 384 469.333333 384c-196.096 0-298.666667 150.229333-298.666666 298.666667h85.333333z" fill="" p-id="2041"></path>
              </svg>
            </li>
            <li code='undo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M170.666667 682.666667h241.365333l-87.936-87.978667C363.904 525.909333 447.658667 469.333333 554.666667 469.333333c146.602667 0 213.333333 110.592 213.333333 213.333334h85.333333c0-148.437333-102.570667-298.666667-298.666666-298.666667-131.797333 0-235.392 64.469333-292.48 148.821333L170.666667 441.301333V682.666667z" fill="" p-id="2764"></path>
              </svg>
            </li>
            <li  code='zoomOut'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z"></path>
              </svg>
            </li>
            <li code='zoomIn'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z" p-id="3853"></path>
              </svg>
            </li>
            <li code='realZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z"></path>
              </svg>
            </li>
            <li code='autoZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z"></path>
              </svg>
            </li>
          </ul>
        `},zoomSensitivity:2}},e.prototype.init=function(){var t=this,r=this.get("graph"),n=this.get("getContent"),a=n(r),o=a;(0,d.isString)(a)&&(o=Ji(a));var s=this.get("className");o.setAttribute("class",s||"g6-component-toolbar");var u=this.get("container");u||(u=this.get("graph").get("container")),(0,d.isString)(u)&&(u=document.getElementById(u)),u.appendChild(o),this.set("toolBar",o);var f=this.get("handleClick");o.addEventListener("click",function(l){var b=zb(l).filter(function(I){return I.nodeName==="LI"});if(b.length!==0){var w=b[0].getAttribute("code");w&&(f?f(w,r):t.handleDefaultOperator(w))}});var c=this.get("position");c&&Ya(o,{top:"".concat(c.y,"px"),left:"".concat(c.x,"px")}),this.bindUndoRedo()},e.prototype.bindUndoRedo=function(){var t=this.get("graph"),r=document.querySelector('.g6-component-toolbar li[code="undo"]'),n=document.querySelector('.g6-component-toolbar li[code="undo"] svg'),a=document.querySelector('.g6-component-toolbar li[code="redo"]'),o=document.querySelector('.g6-component-toolbar li[code="redo"] svg');!r||!n||!a||!o||(r.setAttribute("style","cursor: not-allowed"),n.setAttribute("style","opacity: 0.4"),a.setAttribute("style","cursor: not-allowed"),o.setAttribute("style","opacity: 0.4"),t.on("stackchange",function(s){var u=s.undoStack,f=s.redoStack,c=u.length,l=f.length;c===0?(r.setAttribute("style","cursor: not-allowed"),n.setAttribute("style","opacity: 0.4")):(r.removeAttribute("style"),n.removeAttribute("style")),l===0?(a.setAttribute("style","cursor: not-allowed"),o.setAttribute("style","opacity: 0.4")):(a.removeAttribute("style"),o.removeAttribute("style"))}))},e.prototype.undo=function(){var t=this.get("graph"),r=t.getUndoStack();if(!(!r||r.length===0)){var n=r.pop();if(n){var a=n.action;t.pushStack(a,(0,d.clone)(n.data),"redo");var o=n.data.before;if(a==="add"&&(o=n.data.after),!o)return;switch(a){case"visible":{Object.keys(o).forEach(function(l){var b=o[l];b&&b.forEach(function(w){var I=t.findById(w.id);w.visible?t.showItem(I,!1):t.hideItem(I,!1)})});break}case"render":case"update":Object.keys(o).forEach(function(l){var b=o[l];b&&b.forEach(function(w){var I=t.findById(w.id);delete w.id,t.updateItem(I,w,!1),I.getType()==="combo"&&t.updateCombo(I)})});break;case"changedata":t.changeData(o,!1);break;case"delete":{Object.keys(o).forEach(function(l){var b=o[l];b&&b.forEach(function(w){var I=w.itemType;delete w.itemType,t.addItem(I,w,!1)})});break}case"add":Object.keys(o).forEach(function(l){var b=o[l];b&&b.forEach(function(w){t.removeItem(w.id,!1)})});break;case"updateComboTree":Object.keys(o).forEach(function(l){var b=o[l];b&&b.forEach(function(w){t.updateComboTree(w.id,w.parentId,!1)})});break;case"createCombo":var s=n.data.after.combos,u=s[s.length-1];Object.keys(o).forEach(function(l){var b=o[l];b&&b.forEach(function(w){t.updateComboTree(w.id,w.parentId,!1)})}),t.removeItem(u.id,!1);break;case"uncombo":var f=o.combos[o.combos.length-1],c=o.nodes.concat(o.combos).map(function(l){return l.id}).filter(function(l){return l!==f.id});t.createCombo(f,c,!1);break;case"layout":t.updateLayout(o,void 0,void 0,!1);break;default:}}}},e.prototype.redo=function(){var t=this.get("graph"),r=t.getRedoStack();if(!(!r||r.length===0)){var n=r.pop();if(n){var a=n.action,o=n.data.after;if(t.pushStack(a,(0,d.clone)(n.data)),a==="delete"&&(o=n.data.before),!o)return;switch(a){case"visible":{Object.keys(o).forEach(function(c){var l=o[c];l&&l.forEach(function(b){var w=t.findById(b.id);b.visible?t.showItem(w,!1):t.hideItem(w,!1)})});break}case"render":case"update":Object.keys(o).forEach(function(c){var l=o[c];l&&l.forEach(function(b){var w=t.findById(b.id);delete b.id,t.updateItem(w,b,!1),w.getType()==="combo"&&t.updateCombo(w)})});break;case"changedata":t.changeData(o,!1);break;case"delete":o.edges&&o.edges.forEach(function(c){t.removeItem(c.id,!1)}),o.nodes&&o.nodes.forEach(function(c){t.removeItem(c.id,!1)}),o.combos&&o.combos.forEach(function(c){t.removeItem(c.id,!1)});break;case"add":{Object.keys(o).forEach(function(c){var l=o[c];l&&l.forEach(function(b){var w=b.itemType;delete b.itemType,t.addItem(w,b,!1)})});break}case"updateComboTree":Object.keys(o).forEach(function(c){var l=o[c];l&&l.forEach(function(b){t.updateComboTree(b.id,b.parentId,!1)})});break;case"createCombo":var s=o.combos[o.combos.length-1];t.createCombo(s,s.children.map(function(c){return c.id}),!1);break;case"uncombo":var u=n.data.before.combos,f=u[u.length-1];t.uncombo(f.id,!1);break;case"layout":t.updateLayout(o,void 0,void 0,!1);break;default:}}}},e.prototype.zoomOut=function(){var t=this.get("graph"),r=t.getZoom(),n=1/(1-R0*this.get("zoomSensitivity")),a=this.get("maxZoom")||t.get("maxZoom");n*r>a||t.zoomTo(r*n)},e.prototype.zoomIn=function(){var t=this.get("graph"),r=t.getZoom(),n=1-R0*this.get("zoomSensitivity"),a=this.get("minZoom")||t.get("minZoom");n*r<a||t.zoomTo(r*n)},e.prototype.realZoom=function(){var t=this.get("graph");t.zoomTo(1)},e.prototype.autoZoom=function(){var t=this.get("graph");t.fitView([20,20])},e.prototype.handleDefaultOperator=function(t){switch(t){case"redo":this.redo();break;case"undo":this.undo();break;case"zoomOut":this.zoomOut();break;case"zoomIn":this.zoomIn();break;case"realZoom":this.realZoom();break;case"autoZoom":this.autoZoom();break;default:}},e.prototype.destroy=function(){var t=this.get("toolBar");if(t){var r=this.get("container");r||(r=this.get("graph").get("container")),(0,d.isString)(r)&&(r=document.getElementById(r)),r.removeChild(t)}var n=this.get("handleClick");n&&t.removeEventListener("click",n)},e}(nu),Wb=Ub,Xb=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();typeof document!="undefined"&&mv()(`
  .g6-component-tooltip {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .tooltip-type {
    padding: 0;
    margin: 0;
  }
  .tooltip-id {
    color: #531dab;
  }
`);var Yb=function(i){Xb(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,getContent:function(r){return`
          <h4 class='tooltip-type'>\u7C7B\u578B\uFF1A`.concat(r.item.getType(),`</h4>
          <span class='tooltip-id'>ID\uFF1A`).concat(r.item.getID(),`</span>
        `)},shouldBegin:function(r){return!0},itemTypes:["node","edge","combo"],trigger:"mouseenter",fixToNode:void 0}},e.prototype.getEvents=function(){return this.get("trigger")==="click"?{"node:click":"onClick","edge:click":"onClick","combo:click":"onClick","canvas:click":"onMouseLeave",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave",drag:"onMouseLeave"}:{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove","edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove","combo:mouseenter":"onMouseEnter","combo:mouseleave":"onMouseLeave","combo:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave","node:drag":"onMouseLeave"}},e.prototype.init=function(){var t=this,r=t.get("className")||"g6-component-tooltip",n=Ji("<div class='".concat(r,"'></div>")),a=t.get("container");a||(a=t.get("graph").get("container")),(0,d.isString)(a)&&(a=document.getElementById(a)),Ya(n,{position:"absolute",visibility:"hidden",display:"none"}),a.appendChild(n),t.get("trigger")!=="click"&&(n.addEventListener("mouseenter",function(o){Ya(n,{visibility:"visible",display:"unset"})}),n.addEventListener("mouseleave",function(o){t.hideTooltip()})),t.set("tooltip",n)},e.prototype.onClick=function(t){var r=this.get("itemTypes");if(!(t.item&&t.item.getType&&r.indexOf(t.item.getType())===-1)){var n=t.item,a=this.get("graph");this.currentTarget===n?(this.currentTarget=null,this.hideTooltip(),a.emit("tooltipchange",{item:t.item,action:"hide"})):(this.currentTarget=n,this.showTooltip(t),a.emit("tooltipchange",{item:t.item,action:"show"}))}},e.prototype.onMouseEnter=function(t){var r=this.get("itemTypes");if(!(t.item&&t.item.getType&&r.indexOf(t.item.getType())===-1)){var n=t.item,a=this.get("graph");this.currentTarget=n,this.showTooltip(t),a.emit("tooltipchange",{item:t.item,action:"show"})}},e.prototype.onMouseMove=function(t){var r=this.get("itemTypes");t.item&&t.item.getType&&r.indexOf(t.item.getType())===-1||!this.currentTarget||t.item!==this.currentTarget||this.showTooltip(t)},e.prototype.onMouseLeave=function(){this.hideTooltip();var t=this.get("graph");t.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null},e.prototype.clearContainer=function(){var t=this.get("tooltip");t&&(t.innerHTML="")},e.prototype.showTooltip=function(t){if(t.item){var r=this.get("itemTypes");if(!(t.item.getType&&r.indexOf(t.item.getType())===-1)){var n=this.get("tooltip"),a=this.get("getContent"),o=a(t);(0,d.isString)(o)?n.innerHTML=o:(this.clearContainer(),n.appendChild(o)),this.updatePosition(t)}}},e.prototype.hideTooltip=function(){var t=this.get("tooltip");t&&Ya(t,{visibility:"hidden",display:"none"})},e.prototype.updatePosition=function(t){var r=this.get("shouldBegin"),n=this.get("tooltip");if(!r(t)){Ya(n,{visibility:"hidden",display:"none"});return}var a=this.get("graph"),o=a.get("width"),s=a.get("height"),u=this.get("offsetX")||0,f=this.get("offsetY")||0,c=a.getPointByClient(t.clientX,t.clientY),l=this.get("fixToNode"),b=t.item;if(b.getType&&b.getType()==="node"&&l&&(0,d.isArray)(l)&&l.length>=2){var w=b.getBBox();c={x:w.minX+w.width*l[0],y:w.minY+w.height*l[1]}}var I=a.getCanvasByPoint(c.x,c.y),W=I.x,H=I.y,J=a.getContainer(),at={x:W+J.offsetLeft+u,y:H+J.offsetTop+f};Ya(n,{visibility:"visible",display:"unset"});var ut=n.getBoundingClientRect();W+ut.width+u>o&&(at.x-=ut.width+u),H+ut.height+f>s&&(at.y-=ut.height+f,at.y<0&&(at.y=0)),Ya(n,{left:"".concat(at.x,"px"),top:"".concat(at.y,"px")})},e.prototype.hide=function(){this.onMouseLeave()},e.prototype.destroy=function(){var t=this.get("tooltip");if(t){var r=this.get("container");r||(r=this.get("graph").get("container")),(0,d.isString)(r)&&(r=document.getElementById(r)),r.removeChild(t)}},e}(nu),Vb=Yb,B0="timebarstartplay",F0="timebarendplay",If="valuechange",Dl="timebarConfigChanged",Kc="playPauseBtn",Ph="nextStepBtn",kh="preStepBtn",q_={opacity:.5,fill:"#000"},Q_={opacity:.5,fill:"#000",r:5},J_={fill:"#fff",fontSize:12},jb=function(){function i(e){var t=e.x,r=t===void 0?0:t,n=e.y,a=n===void 0?0:n,o=e.container,s=e.text,u=e.padding,f=u===void 0?[4,4,4,4]:u,c=e.className,l=c===void 0?"g6-component-timebar-tooltip":c,b=e.backgroundColor,w=b===void 0?"#000":b,I=e.textColor,W=I===void 0?"#fff":I,H=e.opacity,J=H===void 0?.8:H,at=e.fontSize,ut=at===void 0?12:at;this.container=o,this.className=l,this.backgroundColor=w,this.textColor=W,this.x=r,this.y=a,this.text=s,this.padding=f,this.opacity=J,this.fontSize=ut,this.render()}return i.prototype.render=function(){var e=this,t=e.className,r=e.x,n=e.y,a=e.backgroundColor,o=e.textColor,s=e.text,u=e.padding,f=e.opacity,c=e.fontSize,l=e.container,b=Ji("<div class='".concat(t,`' style="position: absolute; width: fit-content; height: fit-content; opacity: `).concat(f,'"></div>'));(0,d.isString)(l)&&(l=document.getElementById(l)),l.appendChild(b),e.parentHeight=l.offsetHeight,e.parentWidth=l.offsetWidth,Ya(b,{visibility:"hidden",top:0,left:0});var w=Ji(`
      <div style='position: absolute; white-space:nowrap; background-color: `.concat(a,"; font-size: ").concat(c,"px; border-radius: 4px; width: fit-content; height: fit-content; color: ").concat(o,"; padding: ").concat(u[0],"px ").concat(u[1],"px ").concat(u[2],"px ").concat(u[3],"px'></div>"));w.innerHTML=s,b.appendChild(w),e.backgroundDOM=w;var I=Ji("<div style='position: absolute; width: 0px; height: 0px; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 10px solid ".concat(a,"'></div>"));b.appendChild(I),e.arrowDOM=I,e.container=b},i.prototype.show=function(e){var t=this,r=e.text,n=e.x,a=e.y,o=e.clientX,s=e.clientY;t.backgroundDOM.innerHTML=r;var u=t.backgroundDOM.offsetWidth,f=t.backgroundDOM.offsetHeight,c=t.arrowDOM.offsetWidth,l=t.arrowDOM.offsetHeight;Ya(t.container,{top:"".concat(-f-l,"px"),left:"".concat(n,"px"),visibility:"visible"}),Ya(t.backgroundDOM,{marginLeft:"".concat(-u/2,"px")}),Ya(t.arrowDOM,{marginLeft:"".concat(-c/2,"px"),top:"".concat(f,"px")});var b=n-u/2,w=n+u/2;b<0?Ya(t.backgroundDOM,{marginLeft:"".concat(-u/2-b,"px")}):w>t.parentWidth&&Ya(t.backgroundDOM,{marginLeft:"".concat(-u/2-w+t.parentWidth+12,"px")})},i.prototype.hide=function(){Ya(this.container,{top:0,left:0,visibility:"hidden"})},i}(),Hb=jb,wd=function(){return wd=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},wd.apply(this,arguments)},Kb=function(){function i(e){this.config=(0,d.deepMix)({},e),this.init()}return i.prototype.update=function(e){this.config=(0,d.deepMix)({},this.config,e),this.updateElement(),this.renderMarker()},i.prototype.init=function(){this.initElement(),this.renderMarker()},i.prototype.initElement=function(){var e=this.config,t=e.group,r=e.style,n=r.scale,a=n===void 0?1:n,o=r.offsetX,s=o===void 0?0:o,u=r.offsetY,f=u===void 0?0:u,c=this.config.x+s,l=this.config.y+f,b=t.addGroup({name:Kc});this.startMarkerGroup=b.addGroup({name:Kc}),this.circle=t.addShape("circle",{attrs:wd({x:c,y:l,r:this.config.r*a},r),name:Kc}),this.startMarker=this.startMarkerGroup.addShape("path",{attrs:{path:this.getStartMarkerPath(c,l,a),fill:r.stroke||"#aaa"},name:"start-marker"}),this.pauseMarkerGroup=b.addGroup({name:Kc});var w=.25*this.config.r*a,I=.5*this.config.r*Math.sqrt(3)*a;this.pauseLeftMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:c-.375*this.config.r*a,y:l-I/2,width:w,height:I,fill:r.stroke||"#aaa",lineWidth:0}}),this.pauseRightMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:c+1/8*this.config.r*a,y:l-I/2,width:w,height:I,fill:r.stroke||"#aaa",lineWidth:0}})},i.prototype.updateElement=function(){var e=this.config.style,t=e.scale,r=t===void 0?1:t,n=e.offsetX,a=n===void 0?0:n,o=e.offsetY,s=o===void 0?0:o,u=this.config.x+a,f=this.config.y+s;this.circle.attr("x",u),this.circle.attr("y",f),this.circle.attr("r",this.config.r*r),this.startMarker.attr("path",this.getStartMarkerPath(u,f,r));var c=.25*this.config.r*r,l=.5*this.config.r*Math.sqrt(3)*r;this.pauseLeftMarker.attr("x",u-(1/4+1/8)*this.config.r*r),this.pauseLeftMarker.attr("y",f-l/2),this.pauseLeftMarker.attr("width",c),this.pauseLeftMarker.attr("height",l),this.pauseRightMarker.attr("x",u+1/8*this.config.r*r),this.pauseRightMarker.attr("y",f-l/2),this.pauseRightMarker.attr("width",c),this.pauseRightMarker.attr("height",l)},i.prototype.renderMarker=function(){this.config.isPlay?(this.startMarkerGroup.hide(),this.pauseMarkerGroup.show()):(this.startMarkerGroup.show(),this.pauseMarkerGroup.hide())},i.prototype.getStartMarkerPath=function(e,t,r){var n=.5*this.config.r*Math.sqrt(3)*r;return[["M",e-n/Math.sqrt(3)/2,t-n/2],["L",e+n/Math.sqrt(3),t],["L",e-n/Math.sqrt(3)/2,t+n/2]]},i}(),Zb=Kb,Bo=function(){return Bo=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Bo.apply(this,arguments)},Rh=Kt,$b="#aaa",qb="green",Qb={fill:"#aaa",fillOpacity:.35,stroke:"#aaa"},Jb={fill:"#fff"},tE={fill:"green"},G0={pointer:{fill:"#aaa",lineWidth:0},scroller:{stroke:"#aaa",fill:"#aaa",lineWidth:1,lineAppendWidth:5,cursor:"pointer"},text:{fill:"#aaa",textBaseline:"top"}},z0={check:{stroke:"green",lineWidth:3},box:{fill:"#fff",stroke:"#aaa",lineWidth:2,radius:3,width:12,height:12},text:{fill:"#aaa",fontSize:12,textBaseline:"top"}},eE={speed:1,loop:!1,fill:"#fff",stroke:"#fff",hideTimeTypeController:!1,preBtnStyle:{fill:"#aaa",stroke:"#aaa"},nextBtnStyle:{fill:"#aaa",stroke:"#aaa"},playBtnStyle:{fill:"#aaa",stroke:"#aaa",fillOpacity:.05},speedControllerStyle:G0,timeTypeControllerStyle:z0},_d=110,Zc=50,Of={SINGLE:"single",RANGE:"range"},rE=function(){function i(e){this.controllerCfg=(0,d.deepMix)({},eE,e),this.group=e.group,this.controllerGroup=this.group.addGroup({name:"controller-group"}),this.speedAxisY=[],this.currentSpeed=this.controllerCfg.speed,this.currentType=this.controllerCfg.defaultTimeType||Of.RANGE,this.fontFamily=e.fontFamily||"Arial, sans-serif",this.init()}return i.prototype.init=function(){this.renderPlayButton()},i.prototype.getNextMarkerPath=function(e,t,r){return[["M",e,t-r],["L",e+r,t],["L",e,t+r],["Z",e,t-r],["M",e,t],["L",e-r,t-r],["L",e-r,t+r],["Z"]]},i.prototype.getPreMarkerPath=function(e,t,r){return[["M",e,t-r],["L",e-r,t],["L",e,t+r],["L",e,t-r],["M",e,t],["L",e+r,t-r],["L",e+r,t+r],["Z"]]},i.prototype.renderPlayButton=function(){var e=this.controllerCfg,t=e.width,r=e.height,n=e.x,a=e.y,o=e.hideTimeTypeController,s=e.fill,u=s===void 0?$b:s,f=e.stroke,c=f===void 0?qb:f,l=e.containerStyle,b=l===void 0?{}:l,w=Bo(Bo({},Qb),e.playBtnStyle||{}),I=Bo(Bo({},Jb),e.preBtnStyle||{}),W=Bo(Bo({},tE),e.nextBtnStyle||{}),H=r/2-5,J=a+10,at=this.controllerGroup.addShape("rect",{attrs:Bo({x:n,y:J,width:t,height:r,stroke:c,fill:u},b),name:"container-rect"});this.playButton?this.playButton.update({x:t/2,y:J,r:H}):this.playButton=new Zb({group:this.controllerGroup,x:t/2,y:J+H+5,r:H,isPlay:this.isPlay,style:w});var ut=I.offsetX||0,lt=I.offsetY||0,_t=(I.scale||1)*H;this.controllerGroup.addShape("path",{attrs:Bo({path:this.getPreMarkerPath(t/2-5*H+ut,J+H+5+lt,_t*.5)},I),name:kh});var Bt=W.offsetX||0,Rt=W.offsetY||0,Qt=(W.scale||1)*H;this.controllerGroup.addShape("path",{attrs:Bo({path:this.getNextMarkerPath(t/2+5*H+Bt,J+H+5+Rt,Qt*.5)},W),name:Ph}),at.toBack(),this.renderSpeedBtn(),o||this.renderToggleTime(),this.bindEvent();var de=this.controllerCfg.scale,se=de===void 0?1:de,Te=this.controllerGroup.getCanvasBBox(),je=(Te.maxX+Te.minX)/2,Dr=(Te.maxY+Te.minY)/2,Kr=Rh([1,0,0,0,1,0,0,0,1],[["t",-je,-Dr],["s",se,se],["t",je,Dr]]);this.controllerGroup.setMatrix(Kr)},i.prototype.renderSpeedBtn=function(){var e=this.controllerCfg,t=e.y,r=e.width,n=e.hideTimeTypeController,a=Bo(Bo({},G0),this.controllerCfg.speedControllerStyle||{}),o=a.scroller,s=o===void 0?{}:o,u=a.text,f=u===void 0?{}:u,c=a.pointer,l=c===void 0?{}:c,b=a.scale,w=b===void 0?1:b,I=a.offsetX,W=I===void 0?0:I,H=a.offsetY,J=H===void 0?0:H,at=this.controllerGroup.addGroup({name:"speed-group"});this.speedGroup=at;var ut=[],lt=5;this.speedAxisY=[19,22,26,32,39];for(var _t=0;_t<5;_t++){var Bt=t+this.speedAxisY[_t],Rt=r-(n?Zc:_d);at.addShape("line",{attrs:Bo({x1:Rt,x2:Rt+15,y1:Bt,y2:Bt},s),speed:lt,name:"speed-rect"}),this.speedAxisY[_t]=Bt,ut.push(lt),lt=lt-1}this.speedText=at.addShape("text",{attrs:Bo({x:r-(n?Zc:_d)+20,y:this.speedAxisY[0]+4,text:"1.0X",fontFamily:this.fontFamily||"Arial, sans-serif"},f),name:"speed-text"}),this.speedPoint=at.addShape("path",{attrs:Bo({path:this.getPointerPath(r-(n?Zc:_d),0),matrix:[1,0,0,0,1,0,0,this.speedAxisY[4],1]},l),name:"speed-pointer"});var Qt=this.speedGroup.getCanvasBBox(),de=(Qt.maxX+Qt.minX)/2,se=(Qt.maxY+Qt.minY)/2,Te=this.speedGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];Te=Rh(Te,[["t",-de,-se],["s",w,w],["t",de+W*w,se+J*w]]),this.speedGroup.setMatrix(Te)},i.prototype.getPointerPath=function(e,t){return[["M",e,t],["L",e-10,t-4],["L",e-10,t+4],["Z"]]},i.prototype.renderToggleTime=function(){var e,t,r=this.controllerCfg,n=r.width,a=r.defaultTimeType,o=Bo(Bo({},z0),this.controllerCfg.timeTypeControllerStyle||{}),s=o.scale,u=s===void 0?1:s,f=o.offsetX,c=f===void 0?0:f,l=o.offsetY,b=l===void 0?0:l,w=o.box,I=w===void 0?{}:w,W=o.check,H=W===void 0?{}:W,J=o.text,at=J===void 0?{}:J;this.toggleGroup=this.controllerGroup.addGroup({name:"toggle-group"});var ut=a===Of.SINGLE;this.toggleGroup.addShape("rect",{attrs:Bo({x:n-Zc,y:this.speedAxisY[0]+3.5},I),isChecked:ut,name:"toggle-model"}),this.checkedIcon=this.toggleGroup.addShape("path",{attrs:Bo({path:[["M",n-Zc+3,this.speedAxisY[1]+6],["L",n-Zc+7,this.speedAxisY[1]+10],["L",n-Zc+12,this.speedAxisY[1]+4]]},H),capture:!1,name:"check-icon"}),ut||this.checkedIcon.hide(),this.checkedText=this.toggleGroup.addShape("text",{attrs:Bo({text:ut?((e=this.controllerCfg)===null||e===void 0?void 0:e.timeRangeControllerText)||"\u65F6\u95F4\u8303\u56F4":((t=this.controllerCfg)===null||t===void 0?void 0:t.timePointControllerText)||"\u5355\u4E00\u65F6\u95F4",x:n-Zc+15,y:this.speedAxisY[0]+4,fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},at),name:"checked-text"});var lt=this.toggleGroup.getCanvasBBox(),_t=(lt.maxX+lt.minX)/2,Bt=(lt.maxY+lt.minY)/2,Rt=this.toggleGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];Rt=Rh(Rt,[["t",-_t,-Bt],["s",u,u],["t",_t+c*u,Bt+b*u]]),this.toggleGroup.setMatrix(Rt)},i.prototype.bindEvent=function(){var e=this;this.speedGroup.on("speed-rect:click",function(t){var r=t.target.attr("y1"),n=e.speedPoint.attr("matrix"),a=e.speedAxisY.indexOf(n[7]||0),o=e.speedAxisY.indexOf(r),s=e.speedAxisY[o]-e.speedAxisY[a];n=Rh(n,[["t",0,s]]),e.speedPoint.setMatrix(n),e.currentSpeed=e.speedAxisY.length-o,e.speedText.attr("text","".concat(e.currentSpeed,".0X")),e.group.emit(Dl,{speed:e.currentSpeed,type:e.currentType})}),this.speedGroup.on("mousewheel",function(t){t.preventDefault();var r=e.speedPoint.attr("matrix")||[1,0,0,0,1,0,0,0,1],n=r[7],a=e.speedAxisY.indexOf(n);if(a===-1){var o=1/0;e.speedAxisY.forEach(function(u,f){var c=Math.abs(u-n);o>c&&(o=c,a=f)})}t.originalEvent.deltaY>0?a=Math.max(0,a-1):a=Math.min(e.speedAxisY.length-1,a+1);var s=e.speedAxisY[a]-n;r=Rh(r,[["t",0,s]]),e.speedPoint.setMatrix(r),e.currentSpeed=e.speedAxisY.length-a,e.speedText.attr("text","".concat(e.currentSpeed,".0X")),e.group.emit(Dl,{speed:e.currentSpeed,type:e.currentType})}),this.toggleGroup&&this.toggleGroup.on("toggle-model:click",function(t){var r,n,a=t.target.get("isChecked");a?(e.checkedIcon.hide(),e.checkedText.attr("text",((n=e.controllerCfg)===null||n===void 0?void 0:n.timePointControllerText)||"\u5355\u4E00\u65F6\u95F4"),e.currentType=Of.RANGE):(e.checkedIcon.show(),e.checkedText.attr("text",((r=e.controllerCfg)===null||r===void 0?void 0:r.timeRangeControllerText)||"\u65F6\u95F4\u8303\u56F4"),e.currentType=Of.SINGLE),t.target.set("isChecked",!a),e.group.emit(Dl,{type:e.currentType,speed:e.currentSpeed})})},i.prototype.destroy=function(){this.speedGroup.off("speed-rect:click"),this.toggleGroup&&(this.toggleGroup.off("toggle-model:click"),this.toggleGroup.destroy()),this.speedGroup.destroy()},i}(),U0=rE,Bh=function(){return Bh=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Bh.apply(this,arguments)},nE=Kt,aE={fill:"#5B8FF9"},iE={fill:"#e6e8e9"},oE=function(){function i(e){this.frameCount=0,this.fontFamily="Arial, sans-serif";var t=e.graph,r=e.canvas,n=e.group,a=e.width,o=e.height,s=e.padding,u=e.data,f=e.start,c=e.end,l=e.x,b=l===void 0?0:l,w=e.y,I=w===void 0?0:w,W=e.tickLabelFormatter,H=e.selectedTickStyle,J=H===void 0?aE:H,at=e.unselectedTickStyle,ut=at===void 0?iE:at,lt=e.tooltipBackgroundColor,_t=e.tooltipFomatter,Bt=e.tickLabelStyle,Rt=e.controllerCfg,Qt=Rt===void 0?{speed:1}:Rt;this.graph=t,this.group=n,this.sliceGroup=n.addGroup({name:"slice-group"}),this.canvas=r,this.width=a,this.height=o,this.padding=s,this.data=u,this.start=f,this.end=c,this.tickLabelFormatter=W,this.tickLabelStyle=Bt||{},this.selectedTickStyle=J,this.unselectedTickStyle=ut,this.controllerCfg=Qt,this.currentSpeed=Qt.speed||1,this.x=b,this.y=I,this.tooltipBackgroundColor=lt,this.tooltipFomatter=_t,this.fontFamily=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlices(),this.initEvent()}return i.prototype.renderSlices=function(){var e=this,t=this,r=t.width,n=t.height,a=t.padding,o=t.data,s=t.start,u=t.end,f=t.tickLabelFormatter,c=t.selectedTickStyle,l=t.unselectedTickStyle,b=t.tickLabelStyle,w=r-2*a,I=10,W=4,H=3*a+W+I,J=n-H-2*a,at=2,ut=o.length,lt=(w-at*(ut-1))/ut;this.tickWidth=lt;var _t=this.sliceGroup,Bt=[],Rt=[],Qt=Math.round(ut*s),de=Math.round(ut*u);this.startTickRectId=Qt,this.endTickRectId=de;var se=b.rotate;delete b.rotate,o.forEach(function(je,Dr){var Kr=Dr>=Qt&&Dr<=de,zr=Kr?c:l,Mr=_t.addShape("rect",{attrs:Bh({x:a+Dr*(lt+at),y:a,width:lt,height:J},zr),draggable:!0,name:"tick-rect-".concat(Dr)}),En=_t.addShape("rect",{attrs:{x:a+Dr*lt+at*(2*Dr-1)/2,y:a,width:Dr===0||Dr===ut-1?lt+at/2:lt+at,height:J,fill:"#fff",opacity:0},draggable:!0,name:"pick-rect-".concat(Dr)});En.toFront();var yn=Mr.getBBox(),Ar=(yn.minX+yn.maxX)/2;Bt.push({rect:Mr,pickRect:En,value:je.date,x:Ar,y:yn.minY});var Xr;if(f?(Xr=f(je),!(0,d.isString)(Xr)&&Xr&&(Xr=je.date)):Dr%Math.round(ut/10)===0&&(Xr=je.date),Xr){Rt.push(Xr);var sn=yn.maxY+a*2;_t.addShape("line",{attrs:{stroke:"#BFBFBF",x1:Ar,y1:sn,x2:Ar,y2:sn+W},name:"tick-line"});var un=sn+W+a,An=_t.addShape("text",{attrs:Bh({fill:"#8c8c8c",stroke:"#fff",lineWidth:1,x:Ar,y:un,textAlign:"center",text:Xr,textBaseline:"top",fontSize:10,fontFamily:e.fontFamily||"Arial, sans-serif"},b),capture:!1,name:"tick-label"}),Gn=An.getBBox();if(Gn.maxX>r?An.attr("textAlign","right"):Gn.minX<0&&An.attr("textAlign","left"),(0,d.isNumber)(se)&&Rt.length!==10){var ga=nE([1,0,0,0,1,0,0,0,1],[["t",-Ar,-un],["r",se],["t",Ar-5,un+2]]);An.attr({textAlign:"left",matrix:ga})}Rt.length===1?An.attr({textAlign:"left"}):Rt.length===10&&An.attr({textAlign:"right"})}}),this.tickRects=Bt;var Te=this.group;this.currentSpeed=1,this.controllerBtnGroup=new U0(Bh({group:Te,x:this.x,y:this.y+n+5,width:r,height:40,hideTimeTypeController:!0,speed:this.currentSpeed,fontFamily:this.fontFamily||"Arial, sans-serif"},this.controllerCfg))},i.prototype.initEvent=function(){var e=this,t=this.sliceGroup;t.on("click",function(c){var l=c.target;if(!(l.get("type")!=="rect"||!l.get("name"))){var b=parseInt(l.get("name").split("-")[2],10);if(!isNaN(b)){var w=e.tickRects,I=e.unselectedTickStyle;w.forEach(function(at){at.rect.attr(I)});var W=e.selectedTickStyle;w[b].rect.attr(W),e.startTickRectId=b,e.endTickRectId=b;var H=w.length,J=b/H;e.graph.emit(If,{value:[J,J]})}}}),t.on("dragstart",function(c){var l=e.tickRects,b=e.unselectedTickStyle;l.forEach(function(at){at.rect.attr(b)});var w=c.target,I=parseInt(w.get("name").split("-")[2],10),W=e.selectedTickStyle;l[I].rect.attr(W),e.startTickRectId=I;var H=l.length,J=I/H;e.graph.emit(If,{value:[J,J]}),e.dragging=!0}),t.on("dragover",function(c){if(e.dragging&&c.target.get("type")==="rect"){for(var l=parseInt(c.target.get("name").split("-")[2],10),b=e.startTickRectId,w=e.tickRects,I=e.selectedTickStyle,W=e.unselectedTickStyle,H=0;H<w.length;H++){var J=H>=b&&H<=l?I:W;w[H].rect.attr(J)}var at=w.length;e.endTickRectId=l;var ut=b/at,lt=l/at;e.graph.emit(If,{value:[ut,lt]})}}),t.on("drop",function(c){if(e.dragging&&(e.dragging=!1,c.target.get("type")==="rect")){var l=e.startTickRectId,b=parseInt(c.target.get("name").split("-")[2],10);if(!(b<l)){var w=e.selectedTickStyle,I=e.tickRects;I[b].rect.attr(w),e.endTickRectId=b;var W=I.length,H=l/W,J=b/W;e.graph.emit(If,{value:[H,J]})}}});var r=this,n=r.tooltipBackgroundColor,a=r.tooltipFomatter,o=r.canvas,s=new Hb({container:o.get("container"),backgroundColor:n}),u=this.tickRects;u.forEach(function(c){var l=c.pickRect;l.on("mouseenter",function(b){var w=b.target;if(w.get("type")==="rect"){var I=parseInt(w.get("name").split("-")[2],10),W=o.getClientByPoint(u[I].x,u[I].y);s.show({x:u[I].x,y:u[I].y,clientX:W.x,clientY:W.y,text:a?a(u[I].value):u[I].value})}}),l.on("mouseleave",function(b){s.hide()})});var f=this.group;f.on("".concat(Kc,":click"),function(){e.isPlay=!e.isPlay,e.changePlayStatus()}),f.on("".concat(Ph,":click"),function(){e.updateStartEnd(1)}),f.on("".concat(kh,":click"),function(){e.updateStartEnd(-1)}),f.on(Dl,function(c){var l=c.type,b=c.speed;e.currentSpeed=b})},i.prototype.changePlayStatus=function(e){e===void 0&&(e=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(B0,null)):this.playHandler&&(typeof window!="undefined"&&window.cancelAnimationFrame(this.playHandler),e&&this.graph.emit(F0,null))},i.prototype.startPlay=function(){var e=this;return typeof window!="undefined"?window.requestAnimationFrame(function(){var t=e.currentSpeed;e.frameCount%(60/t)===0&&(e.frameCount=0,e.updateStartEnd(1)),e.frameCount++,e.isPlay&&(e.playHandler=e.startPlay())}):void 0},i.prototype.updateStartEnd=function(e){var t=this,r=this.tickRects,n=r.length,a=this.unselectedTickStyle,o=this.selectedTickStyle,s=t.endTickRectId;if(e>0?t.endTickRectId++:(r[t.endTickRectId].rect.attr(a),t.endTickRectId--),s!==t.startTickRectId)t.endTickRectId<t.startTickRectId&&(t.startTickRectId=t.endTickRectId);else{for(var u=t.startTickRectId;u<=t.endTickRectId-1;u++)r[u].rect.attr(a);t.startTickRectId=t.endTickRectId}if(r[t.endTickRectId]){r[t.endTickRectId].rect.attr(o);var f=t.startTickRectId/n,c=t.endTickRectId/n;this.graph.emit(If,{value:[f,c]})}},i.prototype.destory=function(){var e=this.sliceGroup;e.off("click"),e.off("dragstart"),e.off("dragover"),e.off("drop"),this.tickRects.forEach(function(t){var r=t.pickRect;r.off("mouseenter"),r.off("mouseleave")}),this.tickRects.length=0,e.off("".concat(Kc,":click")),e.off("".concat(Ph,":click")),e.off("".concat(kh,":click")),e.off(Dl),this.sliceGroup.destroy()},i}(),sE=oE,W0={};function uE(i){return W0[i]}function Lf(i,e){W0[i]=e}var fE=function(){function i(e){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=e,this.initCfg(),this.init()}return i.prototype.translate=function(e){return e},i.prototype.change=function(e){(0,d.assign)(this.__cfg__,e),this.init()},i.prototype.clone=function(){return this.constructor(this.__cfg__)},i.prototype.getTicks=function(){var e=this;return(0,d.map)(this.ticks,function(t,r){return(0,d.isObject)(t)?t:{text:e.getText(t,r),tickValue:t,value:e.scale(t)}})},i.prototype.getText=function(e,t){var r=this.formatter,n=r?r(e,t):e;return(0,d.isNil)(n)||!(0,d.isFunction)(n.toString)?"":n.toString()},i.prototype.getConfig=function(e){return this.__cfg__[e]},i.prototype.init=function(){(0,d.assign)(this,this.__cfg__),this.setDomain(),(0,d.isEmpty)(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},i.prototype.initCfg=function(){},i.prototype.setDomain=function(){},i.prototype.calculateTicks=function(){var e=this.tickMethod,t=[];if((0,d.isString)(e)){var r=uE(e);if(!r)throw new Error("There is no method to to calculate ticks!");t=r(this)}else(0,d.isFunction)(e)&&(t=e(this));return t},i.prototype.rangeMin=function(){return this.range[0]},i.prototype.rangeMax=function(){return this.range[1]},i.prototype.calcPercent=function(e,t,r){return(0,d.isNumber)(e)?(e-t)/(r-t):NaN},i.prototype.calcValue=function(e,t,r){return t+e*(r-t)},i}(),Sd=fE,cE=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="cat",t.isCategory=!0,t}return e.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var t=0;t<this.values.length;t++)this.translateIndexMap.set(this.values[t],t)}},e.prototype.translate=function(t){this.buildIndexMap();var r=this.translateIndexMap.get(t);return r===void 0&&(r=(0,d.isNumber)(t)?t:NaN),r},e.prototype.scale=function(t){var r=this.translate(t),n=this.calcPercent(r,this.min,this.max);return this.calcValue(n,this.rangeMin(),this.rangeMax())},e.prototype.invert=function(t){var r=this.max-this.min,n=this.calcPercent(t,this.rangeMin(),this.rangeMax()),a=Math.round(r*n)+this.min;return a<this.min||a>this.max?NaN:this.values[a]},e.prototype.getText=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var a=t;return(0,d.isNumber)(t)&&!this.values.includes(t)&&(a=this.values[a]),i.prototype.getText.apply(this,(0,m.__spreadArrays)([a],r))},e.prototype.initCfg=function(){this.tickMethod="cat"},e.prototype.setDomain=function(){if((0,d.isNil)(this.getConfig("min"))&&(this.min=0),(0,d.isNil)(this.getConfig("max"))){var t=this.values.length;this.max=t>1?t-1:t}this.translateIndexMap&&(this.translateIndexMap=void 0)},e}(Sd),Fh=cE,X0=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,$c="\\d\\d?",qc="\\d\\d",lE="\\d{3}",hE="\\d{4}",Gh="[^\\s]+",Y0=/\[([^]*?)\]/gm;function V0(i,e){for(var t=[],r=0,n=i.length;r<n;r++)t.push(i[r].substr(0,e));return t}var j0=function(i){return function(e,t){var r=t[i].map(function(a){return a.toLowerCase()}),n=r.indexOf(e.toLowerCase());return n>-1?n:null}};function Qc(i){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var r=0,n=e;r<n.length;r++){var a=n[r];for(var o in a)i[o]=a[o]}return i}var H0=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],K0=["January","February","March","April","May","June","July","August","September","October","November","December"],vE=V0(K0,3),dE=V0(H0,3),Md={dayNamesShort:dE,dayNames:H0,monthNamesShort:vE,monthNames:K0,amPm:["am","pm"],DoFn:function(i){return i+["th","st","nd","rd"][i%10>3?0:(i-i%10!==10?1:0)*i%10]}},bv=Qc({},Md),Z0=function(i){return bv=Qc(bv,i)},$0=function(i){return i.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},au=function(i,e){for(e===void 0&&(e=2),i=String(i);i.length<e;)i="0"+i;return i},gE={D:function(i){return String(i.getDate())},DD:function(i){return au(i.getDate())},Do:function(i,e){return e.DoFn(i.getDate())},d:function(i){return String(i.getDay())},dd:function(i){return au(i.getDay())},ddd:function(i,e){return e.dayNamesShort[i.getDay()]},dddd:function(i,e){return e.dayNames[i.getDay()]},M:function(i){return String(i.getMonth()+1)},MM:function(i){return au(i.getMonth()+1)},MMM:function(i,e){return e.monthNamesShort[i.getMonth()]},MMMM:function(i,e){return e.monthNames[i.getMonth()]},YY:function(i){return au(String(i.getFullYear()),4).substr(2)},YYYY:function(i){return au(i.getFullYear(),4)},h:function(i){return String(i.getHours()%12||12)},hh:function(i){return au(i.getHours()%12||12)},H:function(i){return String(i.getHours())},HH:function(i){return au(i.getHours())},m:function(i){return String(i.getMinutes())},mm:function(i){return au(i.getMinutes())},s:function(i){return String(i.getSeconds())},ss:function(i){return au(i.getSeconds())},S:function(i){return String(Math.round(i.getMilliseconds()/100))},SS:function(i){return au(Math.round(i.getMilliseconds()/10),2)},SSS:function(i){return au(i.getMilliseconds(),3)},a:function(i,e){return i.getHours()<12?e.amPm[0]:e.amPm[1]},A:function(i,e){return i.getHours()<12?e.amPm[0].toUpperCase():e.amPm[1].toUpperCase()},ZZ:function(i){var e=i.getTimezoneOffset();return(e>0?"-":"+")+au(Math.floor(Math.abs(e)/60)*100+Math.abs(e)%60,4)},Z:function(i){var e=i.getTimezoneOffset();return(e>0?"-":"+")+au(Math.floor(Math.abs(e)/60),2)+":"+au(Math.abs(e)%60,2)}},q0=function(i){return+i-1},Q0=[null,$c],J0=[null,Gh],tp=["isPm",Gh,function(i,e){var t=i.toLowerCase();return t===e.amPm[0]?0:t===e.amPm[1]?1:null}],ep=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(i){var e=(i+"").match(/([+-]|\d\d)/gi);if(e){var t=+e[1]*60+parseInt(e[2],10);return e[0]==="+"?t:-t}return 0}],pE={D:["day",$c],DD:["day",qc],Do:["day",$c+Gh,function(i){return parseInt(i,10)}],M:["month",$c,q0],MM:["month",qc,q0],YY:["year",qc,function(i){var e=new Date,t=+(""+e.getFullYear()).substr(0,2);return+(""+(+i>68?t-1:t)+i)}],h:["hour",$c,void 0,"isPm"],hh:["hour",qc,void 0,"isPm"],H:["hour",$c],HH:["hour",qc],m:["minute",$c],mm:["minute",qc],s:["second",$c],ss:["second",qc],YYYY:["year",hE],S:["millisecond","\\d",function(i){return+i*100}],SS:["millisecond",qc,function(i){return+i*10}],SSS:["millisecond",lE],d:Q0,dd:Q0,ddd:J0,dddd:J0,MMM:["month",Gh,j0("monthNamesShort")],MMMM:["month",Gh,j0("monthNames")],a:tp,A:tp,ZZ:ep,Z:ep},Ev={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},rp=function(i){return Qc(Ev,i)},np=function(i,e,t){if(e===void 0&&(e=Ev.default),t===void 0&&(t={}),typeof i=="number"&&(i=new Date(i)),Object.prototype.toString.call(i)!=="[object Date]"||isNaN(i.getTime()))throw new Error("Invalid Date pass to format");e=Ev[e]||e;var r=[];e=e.replace(Y0,function(a,o){return r.push(o),"@@@"});var n=Qc(Qc({},bv),t);return e=e.replace(X0,function(a){return gE[a](i,n)}),e.replace(/@@@/g,function(){return r.shift()})};function ap(i,e,t){if(t===void 0&&(t={}),typeof e!="string")throw new Error("Invalid format in fecha parse");if(e=Ev[e]||e,i.length>1e3)return null;var r=new Date,n={year:r.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},a=[],o=[],s=e.replace(Y0,function(lt,_t){return o.push($0(_t)),"@@@"}),u={},f={};s=$0(s).replace(X0,function(lt){var _t=pE[lt],Bt=_t[0],Rt=_t[1],Qt=_t[3];if(u[Bt])throw new Error("Invalid format. "+Bt+" specified twice in format");return u[Bt]=!0,Qt&&(f[Qt]=!0),a.push(_t),"("+Rt+")"}),Object.keys(f).forEach(function(lt){if(!u[lt])throw new Error("Invalid format. "+lt+" is required in specified format")}),s=s.replace(/@@@/g,function(){return o.shift()});var c=i.match(new RegExp(s,"i"));if(!c)return null;for(var l=Qc(Qc({},bv),t),b=1;b<c.length;b++){var w=a[b-1],I=w[0],W=w[2],H=W?W(c[b],l):+c[b];if(H==null)return null;n[I]=H}n.isPm===1&&n.hour!=null&&+n.hour!=12?n.hour=+n.hour+12:n.isPm===0&&+n.hour==12&&(n.hour=0);var J;if(n.timezoneOffset==null){J=new Date(n.year,n.month,n.day,n.hour,n.minute,n.second,n.millisecond);for(var at=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],b=0,ut=at.length;b<ut;b++)if(u[at[b][0]]&&n[at[b][0]]!==J[at[b][1]]())return null}else if(J=new Date(Date.UTC(n.year,n.month,n.day,n.hour,n.minute-n.timezoneOffset,n.second,n.millisecond)),n.month>11||n.month<0||n.day>31||n.day<1||n.hour>23||n.hour<0||n.minute>59||n.minute<0||n.second>59||n.second<0)return null;return J}var yE={format:np,parse:ap,defaultI18n:Md,setGlobalDateI18n:Z0,setGlobalDateMasks:rp},ip=yE;function mE(i){return function(e,t,r,n){for(var a=(0,d.isNil)(r)?0:r,o=(0,d.isNil)(n)?e.length:n;a<o;){var s=a+o>>>1;i(e[s])>t?o=s:a=s+1}return a}}var op="format";function sp(i,e){var t=B[op]||ip[op];return t(i,e)}function wv(i){return(0,d.isString)(i)&&(i.indexOf("T")>0?i=new Date(i).getTime():i=new Date(i.replace(/-/gi,"/")).getTime()),(0,d.isDate)(i)&&(i=i.getTime()),i}var tf=1e3,Nl=60*tf,Pl=60*Nl,dc=24*Pl,zh=dc*31,up=dc*365,Uh=[["HH:mm:ss",tf],["HH:mm:ss",tf*10],["HH:mm:ss",tf*30],["HH:mm",Nl],["HH:mm",Nl*10],["HH:mm",Nl*30],["HH",Pl],["HH",Pl*6],["HH",Pl*12],["YYYY-MM-DD",dc],["YYYY-MM-DD",dc*4],["YYYY-WW",dc*7],["YYYY-MM",zh],["YYYY-MM",zh*4],["YYYY-MM",zh*6],["YYYY",dc*380]];function xE(i,e,t){var r=(e-i)/t,n=mE(function(o){return o[1]})(Uh,r)-1,a=Uh[n];return n<0?a=Uh[0]:n>=Uh.length&&(a=(0,d.last)(Uh)),a}var bE=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="timeCat",t}return e.prototype.translate=function(t){t=wv(t);var r=this.values.indexOf(t);return r===-1&&((0,d.isNumber)(t)&&t<this.values.length?r=t:r=NaN),r},e.prototype.getText=function(t,r){var n=this.translate(t);if(n>-1){var a=this.values[n],o=this.formatter;return a=o?o(a,r):sp(a,this.mask),a}return t},e.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},e.prototype.setDomain=function(){var t=this.values;(0,d.each)(t,function(r,n){t[n]=wv(r)}),t.sort(function(r,n){return r-n}),i.prototype.setDomain.call(this)},e}(Fh),EE=bE,wE=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.isContinuous=!0,t}return e.prototype.scale=function(t){if((0,d.isNil)(t))return NaN;var r=this.rangeMin(),n=this.rangeMax(),a=this.max,o=this.min;if(a===o)return r;var s=this.getScalePercent(t);return r+s*(n-r)},e.prototype.init=function(){i.prototype.init.call(this);var t=this.ticks,r=(0,d.head)(t),n=(0,d.last)(t);r<this.min&&(this.min=r),n>this.max&&(this.max=n),(0,d.isNil)(this.minLimit)||(this.min=r),(0,d.isNil)(this.maxLimit)||(this.max=n)},e.prototype.setDomain=function(){var t=(0,d.getRange)(this.values),r=t.min,n=t.max;(0,d.isNil)(this.min)&&(this.min=r),(0,d.isNil)(this.max)&&(this.max=n),this.min>this.max&&(this.min=r,this.max=n)},e.prototype.calculateTicks=function(){var t=this,r=i.prototype.calculateTicks.call(this);return this.nice||(r=(0,d.filter)(r,function(n){return n>=t.min&&n<=t.max})),r},e.prototype.getScalePercent=function(t){var r=this.max,n=this.min;return(t-n)/(r-n)},e.prototype.getInvertPercent=function(t){return(t-this.rangeMin())/(this.rangeMax()-this.rangeMin())},e}(Sd),_v=wE,_E=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="linear",t.isLinear=!0,t}return e.prototype.invert=function(t){var r=this.getInvertPercent(t);return this.min+r*(this.max-this.min)},e.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},e}(_v),Wh=_E;function Jc(i,e){var t=Math.E,r;return e>=0?r=Math.pow(t,Math.log(e)/i):r=Math.pow(t,Math.log(-e)/i)*-1,r}function Bu(i,e){return i===1?1:Math.log(e)/Math.log(i)}function fp(i,e,t){(0,d.isNil)(t)&&(t=Math.max.apply(null,i));var r=t;return(0,d.each)(i,function(n){n>0&&n<r&&(r=n)}),r===t&&(r=t/e),r>1&&(r=1),r}function cp(i){var e=i.toString().split(/[eE]/),t=(e[0].split(".")[1]||"").length-+(e[1]||0);return t>0?t:0}function tS(i,e){var t=cp(i),r=cp(e),n=Math.pow(10,Math.max(t,r));return(i*n+e*n)/n}var SE=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="log",t}return e.prototype.invert=function(t){var r=this.base,n=Bu(r,this.max),a=this.rangeMin(),o=this.rangeMax()-a,s,u=this.positiveMin;if(u){if(t===0)return 0;s=Bu(r,u/r);var f=1/(n-s)*o;if(t<f)return t/f*u}else s=Bu(r,this.min);var c=(t-a)/o,l=c*(n-s)+s;return Math.pow(r,l)},e.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},e.prototype.setDomain=function(){i.prototype.setDomain.call(this);var t=this.min;if(t<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");t===0&&(this.positiveMin=fp(this.values,this.base,this.max))},e.prototype.getScalePercent=function(t){var r=this.max,n=this.min;if(r===n||t<=0)return 0;var a=this.base,o=this.positiveMin;o&&(n=o*1/a);var s;return t<o?s=t/o/(Bu(a,r)-Bu(a,n)):s=(Bu(a,t)-Bu(a,n))/(Bu(a,r)-Bu(a,n)),s},e}(_v),ME=SE,AE=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="pow",t}return e.prototype.invert=function(t){var r=this.getInvertPercent(t),n=this.exponent,a=Jc(n,this.max),o=Jc(n,this.min),s=r*(a-o)+o,u=s>=0?1:-1;return Math.pow(s,n)*u},e.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},e.prototype.getScalePercent=function(t){var r=this.max,n=this.min;if(r===n)return 0;var a=this.exponent,o=(Jc(a,t)-Jc(a,n))/(Jc(a,r)-Jc(a,n));return o},e}(_v),CE=AE,TE=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="time",t}return e.prototype.getText=function(t,r){var n=this.translate(t),a=this.formatter;return a?a(n,r):sp(n,this.mask)},e.prototype.scale=function(t){var r=t;return((0,d.isString)(r)||(0,d.isDate)(r))&&(r=this.translate(r)),i.prototype.scale.call(this,r)},e.prototype.translate=function(t){return wv(t)},e.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},e.prototype.setDomain=function(){var t=this.values,r=this.getConfig("min"),n=this.getConfig("max");if((!(0,d.isNil)(r)||!(0,d.isNumber)(r))&&(this.min=this.translate(this.min)),(!(0,d.isNil)(n)||!(0,d.isNumber)(n))&&(this.max=this.translate(this.max)),t&&t.length){var a=[],o=1/0,s=o,u=0;(0,d.each)(t,function(f){var c=wv(f);if(isNaN(c))throw new TypeError("Invalid Time: "+f+" in time scale!");o>c?(s=o,o=c):s>c&&(s=c),u<c&&(u=c),a.push(c)}),t.length>1&&(this.minTickInterval=s-o),(0,d.isNil)(r)&&(this.min=o),(0,d.isNil)(n)&&(this.max=u)}},e}(Wh),IE=TE,OE=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="quantize",t}return e.prototype.invert=function(t){var r=this.ticks,n=r.length,a=this.getInvertPercent(t),o=Math.floor(a*(n-1));if(o>=n-1)return(0,d.last)(r);if(o<0)return(0,d.head)(r);var s=r[o],u=r[o+1],f=o/(n-1),c=(o+1)/(n-1);return s+(a-f)/(c-f)*(u-s)},e.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},e.prototype.calculateTicks=function(){var t=i.prototype.calculateTicks.call(this);return this.nice||((0,d.last)(t)!==this.max&&t.push(this.max),(0,d.head)(t)!==this.min&&t.unshift(this.min)),t},e.prototype.getScalePercent=function(t){var r=this.ticks;if(t<(0,d.head)(r))return 0;if(t>(0,d.last)(r))return 1;var n=0;return(0,d.each)(r,function(a,o){if(t>=a)n=o;else return!1}),n/(r.length-1)},e}(_v),lp=OE,LE=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="quantile",t}return e.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},e}(lp),DE=LE,hp={};function NE(i){return hp[i]}function Df(i,e){if(NE(i))throw new Error("type '"+i+"' existed.");hp[i]=e}var PE=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="identity",t.isIdentity=!0,t}return e.prototype.calculateTicks=function(){return this.values},e.prototype.scale=function(t){return this.values[0]!==t&&(0,d.isNumber)(t)?t:this.range[0]},e.prototype.invert=function(t){var r=this.range;return t<r[0]||t>r[1]?NaN:this.values[0]},e}(Sd),kE=PE;function vp(i){var e=i.values,t=i.tickInterval,r=i.tickCount,n=i.showLast;if((0,d.isNumber)(t)){var a=(0,d.filter)(e,function(I,W){return W%t===0}),o=(0,d.last)(e);return n&&(0,d.last)(a)!==o&&a.push(o),a}var s=e.length,u=i.min,f=i.max;if((0,d.isNil)(u)&&(u=0),(0,d.isNil)(f)&&(f=e.length-1),!(0,d.isNumber)(r)||r>=s)return e.slice(u,f+1);if(r<=0||f<=0)return[];for(var c=r===1?s:Math.floor(s/(r-1)),l=[],b=u,w=0;w<r&&!(b>=f);w++)b=Math.min(u+w*c,f),w===r-1&&n?l.push(e[f]):l.push(e[b]);return l}function RE(i){var e=i.min,t=i.max,r=i.nice,n=i.tickCount,a=new BE;return a.domain([e,t]),r&&a.nice(n),a.ticks(n)}var Ad=5,dp=Math.sqrt(50),gp=Math.sqrt(10),pp=Math.sqrt(2),BE=function(){function i(){this._domain=[0,1]}return i.prototype.domain=function(e){return e?(this._domain=Array.from(e,Number),this):this._domain.slice()},i.prototype.nice=function(e){var t,r;e===void 0&&(e=Ad);var n=this._domain.slice(),a=0,o=this._domain.length-1,s=this._domain[a],u=this._domain[o],f;return u<s&&(t=[u,s],s=t[0],u=t[1],r=[o,a],a=r[0],o=r[1]),f=Sv(s,u,e),f>0?(s=Math.floor(s/f)*f,u=Math.ceil(u/f)*f,f=Sv(s,u,e)):f<0&&(s=Math.ceil(s*f)/f,u=Math.floor(u*f)/f,f=Sv(s,u,e)),f>0?(n[a]=Math.floor(s/f)*f,n[o]=Math.ceil(u/f)*f,this.domain(n)):f<0&&(n[a]=Math.ceil(s*f)/f,n[o]=Math.floor(u*f)/f,this.domain(n)),this},i.prototype.ticks=function(e){return e===void 0&&(e=Ad),FE(this._domain[0],this._domain[this._domain.length-1],e||Ad)},i}();function FE(i,e,t){var r,n=-1,a,o,s;if(e=+e,i=+i,t=+t,i===e&&t>0)return[i];if((r=e<i)&&(a=i,i=e,e=a),(s=Sv(i,e,t))===0||!isFinite(s))return[];if(s>0)for(i=Math.ceil(i/s),e=Math.floor(e/s),o=new Array(a=Math.ceil(e-i+1));++n<a;)o[n]=(i+n)*s;else for(i=Math.floor(i*s),e=Math.ceil(e*s),o=new Array(a=Math.ceil(i-e+1));++n<a;)o[n]=(i-n)/s;return r&&o.reverse(),o}function Sv(i,e,t){var r=(e-i)/Math.max(0,t),n=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,n);return n>=0?(a>=dp?10:a>=gp?5:a>=pp?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(a>=dp?10:a>=gp?5:a>=pp?2:1)}function yp(i,e,t){var r;return t==="ceil"?r=Math.ceil(i/e):t==="floor"?r=Math.floor(i/e):r=Math.round(i/e),r*e}function Cd(i,e,t){var r=yp(i,t,"floor"),n=yp(e,t,"ceil");r=(0,d.fixedBase)(r,t),n=(0,d.fixedBase)(n,t);for(var a=[],o=Math.max((n-r)/(Math.pow(2,12)-1),t),s=r;s<=n;s=s+o){var u=(0,d.fixedBase)(s,o);a.push(u)}return{min:r,max:n,ticks:a}}function Td(i,e,t){var r,n=i.minLimit,a=i.maxLimit,o=i.min,s=i.max,u=i.tickCount,f=u===void 0?5:u,c=(0,d.isNil)(n)?(0,d.isNil)(e)?o:e:n,l=(0,d.isNil)(a)?(0,d.isNil)(t)?s:t:a;if(c>l&&(r=[c,l],l=r[0],c=r[1]),f<=2)return[c,l];for(var b=(l-c)/(f-1),w=[],I=0;I<f;I++)w.push(c+b*I);return w}function GE(i){var e=i.min,t=i.max,r=i.tickInterval,n=i.minLimit,a=i.maxLimit,o=RE(i);return!(0,d.isNil)(n)||!(0,d.isNil)(a)?Td(i,(0,d.head)(o),(0,d.last)(o)):r?Cd(e,t,r).ticks:o}function kl(i){return Math.abs(i)<1e-15?i:parseFloat(i.toFixed(15))}var zE=[1,5,2,2.5,4,3],eS=null,mp=Number.EPSILON*100;function UE(i,e){return(i%e+e)%e}function WE(i){return Math.round(i*1e12)/1e12}function XE(i,e,t,r,n,a){var o=(0,d.size)(e),s=(0,d.indexOf)(e,i),u=0,f=UE(r,a);return(f<mp||a-f<mp)&&r<=0&&n>=0&&(u=1),1-s/(o-1)-t+u}function YE(i,e,t){var r=(0,d.size)(e),n=(0,d.indexOf)(e,i),a=1;return 1-n/(r-1)-t+a}function VE(i,e,t,r,n,a){var o=(i-1)/(a-n),s=(e-1)/(Math.max(a,r)-Math.min(t,n));return 2-Math.max(o/s,s/o)}function jE(i,e){return i>=e?2-(i-1)/(e-1):1}function HE(i,e,t,r){var n=e-i;return 1-.5*(Math.pow(e-r,2)+Math.pow(i-t,2))/Math.pow(.1*n,2)}function KE(i,e,t){var r=e-i;if(t>r){var n=(t-r)/2;return 1-Math.pow(n,2)/Math.pow(.1*r,2)}return 1}function ZE(){return 1}function $E(i,e,t,r,n,a){t===void 0&&(t=5),r===void 0&&(r=!0),n===void 0&&(n=zE),a===void 0&&(a=[.25,.2,.5,.05]);var o=t<0?0:Math.round(t);if(Number.isNaN(i)||Number.isNaN(e)||typeof i!="number"||typeof e!="number"||!o)return{min:0,max:0,ticks:[]};if(e-i<1e-15||o===1)return{min:i,max:e,ticks:[i]};if(e-i>1e148){var s=t||5,u=(e-i)/s;return{min:i,max:e,ticks:Array(s).fill(null).map(function(sn,un){return kl(i+u*un)})}}for(var f={score:-2,lmin:0,lmax:0,lstep:0},c=1;c<1/0;){for(var l=0;l<n.length;l+=1){var b=n[l],w=YE(b,n,c);if(a[0]*w+a[1]+a[2]+a[3]<f.score){c=1/0;break}for(var I=2;I<1/0;){var W=jE(I,o);if(a[0]*w+a[1]+a[2]*W+a[3]<f.score)break;for(var H=(e-i)/(I+1)/c/b,J=Math.ceil(Math.log10(H));J<1/0;){var at=c*b*Math.pow(10,J),ut=KE(i,e,at*(I-1));if(a[0]*w+a[1]*ut+a[2]*W+a[3]<f.score)break;var lt=Math.floor(e/at)*c-(I-1)*c,_t=Math.ceil(i/at)*c;if(lt<=_t)for(var s=_t-lt,Bt=0;Bt<=s;Bt+=1){var Rt=lt+Bt,Qt=Rt*(at/c),de=Qt+at*(I-1),se=at,Te=XE(b,n,c,Qt,de,se),je=HE(i,e,Qt,de),Dr=VE(I,o,i,e,Qt,de),Kr=ZE(),zr=a[0]*Te+a[1]*je+a[2]*Dr+a[3]*Kr;zr>f.score&&(!r||Qt<=i&&de>=e)&&(f.lmin=Qt,f.lmax=de,f.lstep=se,f.score=zr)}J+=1}I+=1}}c+=1}var Mr=kl(f.lmax),En=kl(f.lmin),yn=kl(f.lstep),Ar=Math.floor(WE((Mr-En)/yn))+1,Xr=new Array(Ar);Xr[0]=kl(En);for(var l=1;l<Ar;l++)Xr[l]=kl(Xr[l-1]+yn);return{min:Math.min(i,(0,d.head)(Xr)),max:Math.max(e,(0,d.last)(Xr)),ticks:Xr}}function qE(i){var e=i.min,t=i.max,r=i.tickCount,n=i.nice,a=i.tickInterval,o=i.minLimit,s=i.maxLimit,u=$E(e,t,r,n).ticks;return!(0,d.isNil)(o)||!(0,d.isNil)(s)?Td(i,(0,d.head)(u),(0,d.last)(u)):a?Cd(e,t,a).ticks:u}function QE(i){var e=i.base,t=i.tickCount,r=i.min,n=i.max,a=i.values,o,s=Bu(e,n);if(r>0)o=Math.floor(Bu(e,r));else{var u=fp(a,e,n);o=Math.floor(Bu(e,u))}for(var f=s-o,c=Math.ceil(f/t),l=[],b=o;b<s+c;b=b+c)l.push(Math.pow(e,b));return r<=0&&l.unshift(0),l}function xp(i,e,t){if(t===void 0&&(t=5),i===e)return{max:e,min:i,ticks:[i]};var r=t<0?0:Math.round(t);if(r===0)return{max:e,min:i,ticks:[]};var n=1.5,a=.5+1.5*n,o=e-i,s=o/r,u=Math.pow(10,Math.floor(Math.log10(s))),f=u;2*u-s<n*(s-f)&&(f=2*u,5*u-s<a*(s-f)&&(f=5*u,10*u-s<n*(s-f)&&(f=10*u)));for(var c=Math.ceil(e/f),l=Math.floor(i/f),b=Math.max(c*f,e),w=Math.min(l*f,i),I=Math.floor((b-w)/f)+1,W=new Array(I),H=0;H<I;H++)W[H]=kl(w+H*f);return{min:w,max:b,ticks:W}}function JE(i){var e=i.exponent,t=i.tickCount,r=Math.ceil(Jc(e,i.max)),n=Math.floor(Jc(e,i.min)),a=xp(n,r,t).ticks;return a.map(function(o){var s=o>=0?1:-1;return Math.pow(o,e)*s})}function tw(i,e){var t=i.length*e;return e===1?i[i.length-1]:e===0?i[0]:t%1!==0?i[Math.ceil(t)-1]:i.length%2===0?(i[t-1]+i[t])/2:i[t]}function ew(i){var e=i.tickCount,t=i.values;if(!t||!t.length)return[];for(var r=t.slice().sort(function(s,u){return s-u}),n=[],a=0;a<e;a++){var o=a/(e-1);n.push(tw(r,o))}return n}function rw(i){var e=i.min,t=i.max,r=i.tickCount,n=i.tickInterval,a=i.minLimit,o=i.maxLimit,s=xp(e,t,r).ticks;return!(0,d.isNil)(a)||!(0,d.isNil)(o)?Td(i,(0,d.head)(s),(0,d.last)(s)):n?Cd(e,t,n).ticks:s}function nw(i){var e=i.min,t=i.max,r=i.minTickInterval,n=i.tickInterval,a=i.tickCount;if(n)a=Math.ceil((t-e)/n);else{n=xE(e,t,a)[1];var o=(t-e)/n,s=o/a;s>1&&(n=n*Math.ceil(s)),r&&n<r&&(n=r)}n=Math.max(Math.floor((t-e)/(Math.pow(2,12)-1)),n);for(var u=[],f=e;f<t+n;f+=n)u.push(f);return u}function aw(i){var e=vp((0,m.__assign)({showLast:!0},i));return e}function Mv(i){return new Date(i).getFullYear()}function iw(i){return new Date(i,0,1).getTime()}function Id(i){return new Date(i).getMonth()}function ow(i,e){var t=Mv(i),r=Mv(e),n=Id(i),a=Id(e);return(r-t)*12+(a-n)%12}function sw(i,e){return new Date(i,e,1).getTime()}function uw(i,e){return Math.ceil((e-i)/dc)}function fw(i,e){return Math.ceil((e-i)/Pl)}function cw(i,e){return Math.ceil((e-i)/(60*1e3))}function lw(i){var e=i.min,t=i.max,r=i.minTickInterval,n=i.tickCount,a=i.tickInterval,o=[];a||(a=(t-e)/n,r&&a<r&&(a=r)),a=Math.max(Math.floor((t-e)/(Math.pow(2,12)-1)),a);var s=Mv(e);if(a>up)for(var u=Mv(t),f=Math.ceil(a/up),c=s;c<=u+f;c=c+f)o.push(iw(c));else if(a>zh)for(var l=Math.ceil(a/zh),b=Id(e),w=ow(e,t),c=0;c<=w+l;c=c+l)o.push(sw(s,c+b));else if(a>dc)for(var I=new Date(e),W=I.getFullYear(),H=I.getMonth(),J=I.getDate(),at=Math.ceil(a/dc),ut=uw(e,t),c=0;c<ut+at;c=c+at)o.push(new Date(W,H,J+c).getTime());else if(a>Pl)for(var I=new Date(e),W=I.getFullYear(),H=I.getMonth(),at=I.getDate(),lt=I.getHours(),_t=Math.ceil(a/Pl),Bt=fw(e,t),c=0;c<=Bt+_t;c=c+_t)o.push(new Date(W,H,at,lt+c).getTime());else if(a>Nl)for(var Rt=cw(e,t),Qt=Math.ceil(a/Nl),c=0;c<=Rt+Qt;c=c+Qt)o.push(e+c*Nl);else{var de=a;de<tf&&(de=tf);for(var se=Math.floor(e/tf)*tf,Te=Math.ceil((t-e)/tf),je=Math.ceil(de/tf),c=0;c<Te+je;c=c+je)o.push(se+c*tf)}return o.length>=512&&console.warn("Notice: current ticks length("+o.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+a+") is too small, increase the value to solve the problem!"),o}Lf("cat",vp),Lf("time-cat",aw),Lf("wilkinson-extended",qE),Lf("r-pretty",rw),Lf("time",nw),Lf("time-pretty",lw),Lf("log",QE),Lf("pow",JE),Lf("quantile",ew),Lf("d3-linear",GE),Df("cat",Fh),Df("category",Fh),Df("identity",kE),Df("linear",Wh),Df("log",ME),Df("pow",CE),Df("time",IE),Df("timeCat",EE),Df("quantize",lp),Df("quantile",DE);var hw=function(i,e,t){if(t||arguments.length===2)for(var r=0,n=e.length,a;r<n;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return i.concat(a||Array.prototype.slice.call(e))};function vw(i){return(0,d.map)(i,function(e,t){var r=t===0?"M":"L",n=e[0],a=e[1];return[r,n,a]})}function bp(i){return vw(i)}function dw(i){if(i.length<=2)return bp(i);var e=[];(0,d.each)(i,function(o){(0,d.isEqual)(o,e.slice(e.length-2))||e.push(o[0],o[1])});var t=fr(e,!1),r=(0,d.head)(i),n=r[0],a=r[1];return t.unshift(["M",n,a]),t}function gw(i,e,t,r){r===void 0&&(r=!0);var n=new Wh({values:i}),a=new Fh({values:(0,d.map)(i,function(s,u){return u})}),o=(0,d.map)(i,function(s,u){return[a.scale(u)*e,t-n.scale(s)*t]});return r?dw(o):bp(o)}function pw(i,e,t,r){r===void 0&&(r=5);for(var n=new Wh({values:i}),a=new Fh({values:(0,d.map)(i,function(b,w){return w})}),o=(0,d.map)(i,function(b,w){return[a.scale(w)*e,t-n.scale(b)*t]}),s=[],u=0;u<o.length;u++){var f=o[u],c={x:f[0],y:f[1],y0:t,size:r},l=xw(c);s.push.apply(s,l)}return bw(s)}function yw(i,e){var t=new Wh({values:i}),r=Math.max(0,t.min);return e-t.scale(r)*e}function mw(i,e,t,r){var n=hw([],i,!0),a=yw(r,t);return n.push(["L",e,a]),n.push(["L",0,a]),n.push(["Z"]),n}function xw(i){var e=i.x,t=i.y,r=i.y0,n=i.size,a,o;(0,d.isArray)(t)?(a=t[0],o=t[1]):(a=r,o=t);var s,u;(0,d.isArray)(e)?(s=e[0],u=e[1]):(s=e-n/2,u=e+n/2);var f=[{x:s,y:a},{x:s,y:o}];return f.push({x:u,y:o},{x:u,y:a}),f}function bw(i,e){e===void 0&&(e=!0);var t=[],r=i[0];t.push(["M",r.x,r.y]);for(var n=1,a=i.length;n<a;n++)t.push(["L",i[n].x,i[n].y]);return e&&(t.push(["L",r.x,r.y]),t.push(["z"])),t}var Xh=function(){return Xh=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Xh.apply(this,arguments)},Ew={stroke:"#C5C5C5",strokeOpacity:.85},ww={fill:"#CACED4",opacity:.85},_w=function(){function i(e){var t=e.x,r=t===void 0?0:t,n=e.y,a=n===void 0?0:n,o=e.width,s=o===void 0?200:o,u=e.height,f=u===void 0?26:u,c=e.smooth,l=c===void 0?!0:c,b=e.isArea,w=b===void 0?!1:b,I=e.data,W=I===void 0?[]:I,H=e.lineStyle,J=e.areaStyle,at=e.group,ut=e.interval,lt=ut===void 0?null:ut;this.group=at,this.x=r,this.y=a,this.width=s,this.height=f,this.data=W,this.smooth=l,this.isArea=w,this.lineStyle=Object.assign({},Ew,H),this.areaStyle=Object.assign({},ww,J),this.intervalConfig=lt,this.renderLine()}return i.prototype.renderLine=function(){var e=this,t=e.x,r=e.y,n=e.width,a=e.height,o=e.barWidth,s=e.data,u=e.smooth,f=e.isArea,c=e.lineStyle,l=e.areaStyle,b=this.group.addGroup({name:"trend-group"});if(s){var w=gw(s,n,a,u);if(b.addShape("path",{attrs:Xh({path:w},c),name:"trend-line"}),f){var I=mw(w,n,a,s);b.addShape("path",{attrs:Xh({path:I},l),name:"trend-area"})}}this.intervalConfig&&b.addShape("path",{attrs:Xh({path:pw(this.intervalConfig.data,n,a,this.intervalConfig.style.barWidth)},this.intervalConfig.style),name:"trend-interval"}),b.move(t,r)},i.prototype.destory=function(){this.group.destroy()},i}(),Sw=_w,dh=function(){return dh=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},dh.apply(this,arguments)},Mw={fill:"#1890ff",stroke:"#1890ff",type:"trend",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},Aw={fill:"#fff",stroke:"#1890ff",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},Cw=function(){function i(e){var t=e.group,r=e.name,n=e.type,a=e.x,o=a===void 0?0:a,s=e.y,u=s===void 0?0:s,f=e.width,c=f===void 0?2:f,l=e.height,b=l===void 0?24:l,w=e.style,I=w===void 0?{}:w;this.group=t,this.name=r,this.handleType=n,this.x=o,this.y=u,this.width=c,this.height=b,n==="trend"?this.style=dh(dh({},Mw),I):n==="simple"&&(this.style=dh(dh({},Aw),I)),this.renderHandle()}return i.prototype.setX=function(e){this.setXY(e,void 0)},i.prototype.setY=function(e){this.setXY(void 0,e)},i.prototype.setXY=function(e,t){(0,d.isNumber)(e)&&(this.x=e),(0,d.isNumber)(t)&&(this.y=t),this.updateXY()},i.prototype.renderHandle=function(){var e=this,t=e.width,r=e.height,n=e.style,a=e.name,o=n.fill,s=n.stroke,u=n.radius,f=n.opacity,c=n.cursor;this.handleGroup=this.group.addGroup(),this.handleType==="trend"?(this.verticalLine=this.handleGroup.addShape("rect",{attrs:{x:0,y:0,width:t,height:r,fill:o,stroke:s,radius:u,opacity:f,cursor:c},name:"".concat(a,"-handler")}),this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:0,r:2*t,fill:o,stroke:s,radius:u,opacity:f,cursor:c,lineAppendWidth:12},name:"".concat(a,"-handler")}),this.bottomCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:r,r:2*t,fill:o,stroke:s,radius:u,opacity:f,cursor:c},name:"".concat(a,"-handler")})):this.handleType==="simple"&&(this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:r/2,r:2*t,fill:o,stroke:s,radius:u,opacity:f,cursor:c,lineWidth:2},name:"".concat(a,"-handler")})),this.updateXY(),this.handleType==="trend"?this.bindTrendEvents():this.handleType==="simple"&&this.bindSimpleEvents()},i.prototype.bindSimpleEvents=function(){var e=this,t=this.name;this.handleGroup.on("".concat(t,"-handler:mouseenter"),function(){var r=e.style.highLightFill;e.topCircle.attr("fill",r)}),this.handleGroup.on("".concat(t,"-handler:mouseleave"),function(){var r=e.style.fill;e.topCircle.attr("fill",r)})},i.prototype.bindTrendEvents=function(){var e=this,t=this.name;this.handleGroup.on("".concat(t,"-handler:mouseenter"),function(){var r=e.style.highLightFill;e.verticalLine.attr("fill",r),e.topCircle.attr("fill",r),e.bottomCircle.attr("fill",r)}),this.handleGroup.on("".concat(t,"-handler:mouseleave"),function(){var r=e.style.fill;e.verticalLine.attr("fill",r),e.topCircle.attr("fill",r),e.bottomCircle.attr("fill",r)})},i.prototype.show=function(){this.handleGroup.show()},i.prototype.hide=function(){this.handleGroup.hide()},i.prototype.updateXY=function(){this.handleGroup.setMatrix([1,0,0,0,1,0,this.x,this.y,1])},i}(),Ep=Cw,Vi=function(){return Vi=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Vi.apply(this,arguments)},Tw=Kt,Iw={fill:"#416180",opacity:.05},Ow={fill:"#416180",opacity:.15,radius:5},Lw={fill:"#5B8FF9",opacity:.3,cursor:"grab"},Od=2,Dw={width:Od,height:24},Nw={textBaseline:"middle",fill:"#000",opacity:.45},Pw={textAlign:"center",textBaseline:"top",fill:"#607889",opacity:.35},kw={lineWidth:1,stroke:"#ccc"},Rw=function(){function i(e){var t=this;this.prevX=0,this.onMouseDown=function(sn){return function(un){t.currentHandler=sn;var An=un.originalEvent;An.stopPropagation(),An.preventDefault(),t.prevX=(0,d.get)(An,"touches.0.pageX",An.pageX);var Gn=t.canvas.get("container");Gn.addEventListener("mousemove",t.onMouseMove),Gn.addEventListener("mouseup",t.onMouseUp),Gn.addEventListener("mouseleave",t.onMouseUp),Gn.addEventListener("touchmove",t.onMouseMove),Gn.addEventListener("touchend",t.onMouseUp),Gn.addEventListener("touchcancel",t.onMouseUp)}},this.onMouseMove=function(sn){sn.stopPropagation(),sn.preventDefault();var un=(0,d.get)(sn,"touches.0.pageX",sn.pageX),An=un-t.prevX,Gn=t.adjustOffsetRange(An/t.width);t.updateStartEnd(Gn),t.updateUI(),t.prevX=un},this.onMouseUp=function(){t.currentHandler&&(t.currentHandler=void 0);var sn=t.canvas.get("container");sn&&(sn.removeEventListener("mousemove",t.onMouseMove),sn.removeEventListener("mouseup",t.onMouseUp),sn.removeEventListener("mouseleave",t.onMouseUp),sn.removeEventListener("touchmove",t.onMouseMove),sn.removeEventListener("touchend",t.onMouseUp),sn.removeEventListener("touchcancel",t.onMouseUp))};var r=e.x,n=r===void 0?0:r,a=e.y,o=a===void 0?0:a,s=e.width,u=s===void 0?100:s,f=e.height,c=e.padding,l=c===void 0?10:c,b=e.trendCfg,w=e.controllerCfg,I=w===void 0?{speed:1}:w,W=e.backgroundStyle,H=W===void 0?{}:W,J=e.foregroundStyle,at=J===void 0?{}:J,ut=e.handlerStyle,lt=ut===void 0?{}:ut,_t=e.textStyle,Bt=_t===void 0?{}:_t,Rt=e.start,Qt=Rt===void 0?0:Rt,de=e.end,se=de===void 0?1:de,Te=e.minText,je=Te===void 0?"":Te,Dr=e.maxText,Kr=Dr===void 0?"":Dr,zr=e.group,Mr=e.graph,En=e.canvas,yn=e.tick,Ar=yn===void 0?{tickLabelStyle:{},tickLineStyle:{},tickLabelFormatter:function(un){return un},ticks:[]}:yn,Xr=e.type;this.graph=Mr,this.canvas=En,this.group=zr,this.timeBarType=Xr,this.x=n,this.y=o,this.width=u,this.height=f,this.padding=l,this.ticks=Ar.ticks,this.trendCfg=b,this.controllerCfg=I,this.currentSpeed=I.speed||1,this.tickLabelFormatter=Ar.tickLabelFormatter,Xr==="trend"?this.backgroundStyle=Vi(Vi({},Iw),H):Xr==="simple"&&(this.backgroundStyle=Vi(Vi({},Ow),H)),this.foregroundStyle=Vi(Vi({},Lw),at),this.handlerStyle=Vi(Vi({},Dw),lt),this.textStyle=Vi(Vi({},Nw),Bt),this.tickLabelStyle=Vi(Vi({},Pw),Ar.tickLabelStyle),this.tickLineStyle=Vi(Vi({},kw),Ar.tickLineStyle),this.currentMode=I.defaultTimeType||Of.RANGE,this.start=Qt,this.end=se,this.minText=je,this.maxText=Kr,this.fontFamily=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlider()}return i.prototype.update=function(e){var t=e.x,r=e.y,n=e.width,a=e.height,o=e.minText,s=e.maxText,u=e.start,f=e.end;this.start=Math.min(1,Math.max(u,0)),this.end=Math.min(1,Math.max(f,0)),(0,d.assign)(this,{x:t,y:r,width:n,height:a,minText:o,maxText:s}),this.updateUI()},i.prototype.setText=function(e,t){this.minTextShape.attr("text",e),this.maxTextShape.attr("text",t)},i.prototype.renderSlider=function(){var e=this,t=this,r=t.width,n=t.height,a=t.timeBarType;if(a==="trend"&&(0,d.size)((0,d.get)(this.trendCfg,"data"))){var o=new Sw(Vi(Vi({x:this.x,y:this.y,width:r,height:n},this.trendCfg),{group:this.group}));this.trendComponent=o}var s=this.group.addGroup({name:"slider-group"});s.addShape("rect",{attrs:Vi({x:0,y:0,width:r,height:n},this.backgroundStyle),name:"background"});var u=this.group.addGroup();a==="trend"?(this.minTextShape=u.addShape("text",{attrs:Vi({x:0,y:n/2+this.y,textAlign:"right",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=u.addShape("text",{attrs:Vi({y:n/2+this.y,textAlign:"left",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})):(this.minTextShape=u.addShape("text",{attrs:Vi({x:0,y:this.y-10,textAlign:"center",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=u.addShape("text",{attrs:Vi({y:this.y-10,textAlign:"center",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})),this.foregroundShape=this.group.addGroup().addShape("rect",{attrs:Vi({x:0,y:this.y,height:n},this.foregroundStyle),name:"foreground-shape"}),this.foregroundShape.on("mousedown",function(J){J.target.attr("cursor","grabbing")}),this.foregroundShape.on("mouseup",function(J){J.target.attr("cursor",e.foregroundStyle.cursor||"grab")});var f=(0,d.get)(this.handlerStyle,"width",2),c=(0,d.get)(this.handlerStyle,"height",24),l=this.group.addGroup({name:"minHandlerShape"});this.minHandlerShape=new Ep({name:"minHandlerShape",group:l,type:a,x:this.x,y:this.y,width:f,height:c,style:this.handlerStyle});var b=this.group.addGroup({name:"maxHandlerShape"});this.maxHandlerShape=new Ep({name:"maxHandlerShape",group:b,type:a,x:this.x,y:this.y,width:f,height:c,style:this.handlerStyle});var w=this.ticks,I=r/(w.length-1);this.tickPosList=[],this.textList&&this.textList.length&&this.textList.forEach(function(J){J.destroy()});var W=-1/0,H=this.tickLabelStyle.rotate;delete this.tickLabelStyle.rotate,this.textList=w.map(function(J,at){e.tickPosList.push(e.x+at*I);var ut;e.tickLabelFormatter?(ut=e.tickLabelFormatter(J),!(0,d.isString)(ut)&&ut&&(ut=J.date)):ut=J.date;var lt=e.x+at*I,_t=e.y+n+5,Bt=e.group.addShape("text",{attrs:Vi({x:lt,y:_t,text:ut,fontFamily:e.fontFamily||"Arial, sans-serif"},e.tickLabelStyle),name:"tick-label"});if((0,d.isNumber)(H)&&at!==w.length-1){var Rt=Tw([1,0,0,0,1,0,0,0,1],[["t",-lt,-_t],["r",H],["t",lt-5,_t+2]]);Bt.attr({textAlign:"left",matrix:Rt})}at===0?Bt.attr({textAlign:"left"}):at!==w.length-1&&Bt.attr({textAlign:"right"});var Qt=e.group.addShape("line",{attrs:Vi({x1:e.x+at*I,y1:e.y+n+2,x2:e.x+at*I,y2:e.y+n+6},e.tickLineStyle),name:"tick-line"});Qt.toBack();var de=Bt.getBBox();return de.minX>W?(Bt.show(),Qt.show(),W=de.minX+de.width+10):(Bt.hide(),Qt.hide()),Bt}),this.controllerBtnGroup=new U0(Vi({group:this.group,x:this.x,y:this.y+n+25,width:r,height:35},this.controllerCfg)),this.updateStartEnd(0),this.updateUI(),s.move(this.x,this.y),this.bindEvents(),this.currentMode===Of.SINGLE&&(this.minHandlerShape.hide(),this.foregroundShape.hide(),this.minTextShape.hide())},i.prototype.bindEvents=function(){var e=this,t=this.group.find(function(n){return n.get("name")==="minHandlerShape"});t&&(t.on("minHandlerShape-handler:mousedown",this.onMouseDown(this.minHandlerShape)),t.on("minHandlerShape-handler:touchstart",this.onMouseDown(this.minHandlerShape)));var r=this.group.find(function(n){return n.get("name")==="maxHandlerShape"});r&&(r.on("maxHandlerShape-handler:mousedown",this.onMouseDown(this.maxHandlerShape)),r.on("maxHandlerShape-handler:touchstart",this.onMouseDown(this.maxHandlerShape))),this.foregroundShape.on("mousedown",this.onMouseDown(this.foregroundShape)),this.foregroundShape.on("touchstart",this.onMouseDown(this.foregroundShape)),this.group.on("".concat(Kc,":click"),function(){e.isPlay=!e.isPlay,e.currentHandler=e.maxHandlerShape,e.changePlayStatus()}),this.group.on("".concat(Ph,":click"),function(){e.currentHandler=e.maxHandlerShape,e.updateStartEnd(.01),e.updateUI()}),this.group.on("".concat(kh,":click"),function(){e.currentHandler=e.maxHandlerShape,e.updateStartEnd(-.01),e.updateUI()}),this.group.on(Dl,function(n){var a=n.type,o=n.speed;e.currentSpeed=o,e.currentMode=a,a===Of.SINGLE?(e.minHandlerShape.hide(),e.foregroundShape.hide(),e.minTextShape.hide()):a===Of.RANGE&&(e.minHandlerShape.show(),e.foregroundShape.show(),e.minTextShape.show())})},i.prototype.adjustTickIndex=function(e){for(var t=0;t<this.tickPosList.length-1;t++)if(this.tickPosList[t]<=e&&e<=this.tickPosList[t+1])return Math.abs(this.tickPosList[t]-e)<Math.abs(e-this.tickPosList[t+1])?t:t+1;return 0},i.prototype.adjustOffsetRange=function(e){switch(this.currentHandler){case this.minHandlerShape:{var t=0-this.start,r=1-this.start;return Math.min(r,Math.max(t,e))}case this.maxHandlerShape:{var t=0-this.end,r=1-this.end;return Math.min(r,Math.max(t,e))}case this.foregroundShape:{var t=0-this.start,r=1-this.end;return Math.min(r,Math.max(t,e))}default:return 0}},i.prototype.updateStartEnd=function(e){var t=this.ticks[this.adjustTickIndex(this.start*this.width)],r=this.ticks[this.adjustTickIndex(this.end*this.width)];if(!this.currentHandler){this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t==null?void 0:t.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r==null?void 0:r.date;return}switch(this.currentHandler){case this.minHandlerShape:this.maxText=this.maxTextShape.attr("text"),this.start+=e,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t.date;break;case this.maxHandlerShape:this.minText=this.minTextShape.attr("text"),this.end+=e,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r.date;break;case this.foregroundShape:this.start+=e,this.end+=e,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r.date;break;default:break}},i.prototype.updateUI=function(){var e=this;this.start<0&&(this.start=0),this.start>1&&(this.start=1),this.end>1&&(this.end=1),this.end<0&&(this.end=0);var t=this.x+this.start*this.width,r=this.x+this.end*this.width;this.foregroundShape.attr("x",t),this.foregroundShape.attr("width",r-t);var n=(0,d.get)(this.handlerStyle,"width",Od);this.setText(this.minText,this.maxText);var a=this.dodgeText([t,r]),o=a[0],s=a[1];this.minHandlerShape.setX(t-n/2),(0,d.each)(o,function(u,f){return e.minTextShape.attr(f,u)}),this.maxHandlerShape.setX(r-n/2),(0,d.each)(s,function(u,f){return e.maxTextShape.attr(f,u)}),this.currentMode===Of.RANGE?this.graph.emit(If,{value:[this.start,this.end].sort()}):this.currentMode===Of.SINGLE&&this.graph.emit(If,{value:[this.end,this.end]})},i.prototype.dodgeText=function(e){var t,r,n=2,a=(0,d.get)(this.handlerStyle,"width",Od),o=this.minTextShape,s=this.maxTextShape,u=e[0],f=e[1],c=!1;u>f&&(t=[f,u],u=t[0],f=t[1],r=[s,o],o=r[0],s=r[1],c=!0);var l=o.getBBox(),b=s.getBBox(),w=null,I=null;return this.timeBarType==="trend"?(w=u-l.width<this.x+n?{x:u+a/2+n,textAlign:"left"}:{x:u-a/2-n,textAlign:"right"},I=f+b.width>this.x+this.width?{x:f-a/2-n,textAlign:"right"}:{x:f+a/2+n,textAlign:"left"}):this.timeBarType==="simple"&&(w=o.attr("x")>l.width?{x:u,textAlign:"center"}:{x:u,textAlign:"left"},I=s.attr("x")>this.width-b.width?{x:f,textAlign:"right"}:{x:f,textAlign:"center"}),c?[I,w]:[w,I]},i.prototype.startPlay=function(){var e=this;return typeof window!="undefined"?window.requestAnimationFrame(function(){var t=e,r=t.ticks,n=t.width,a=e.currentSpeed,o=n/r.length,s=o/((10-a)*1e3/60),u=e.adjustOffsetRange(s/e.width);e.updateStartEnd(u),e.updateUI(),e.isPlay&&(e.playHandler=e.startPlay())}):void 0},i.prototype.changePlayStatus=function(e){e===void 0&&(e=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(B0,null)):this.playHandler&&(typeof window!="undefined"&&window.cancelAnimationFrame(this.playHandler),e&&this.graph.emit(F0,null))},i.prototype.destory=function(){this.graph.off(If,function(){});var e=this.group,t=e.find(function(n){return n.get("name")==="minHandlerShape"});t&&(t.off("minHandlerShape-handler:mousedown"),t.off("minHandlerShape-handler:touchstart"),t.destroy());var r=e.find(function(n){return n.get("name")==="maxHandlerShape"});r&&(r.off("maxHandlerShape-handler:mousedown"),r.off("maxHandlerShape-handler:touchstart"),r.destroy()),this.foregroundShape.off("mousedown"),this.foregroundShape.off("touchstart"),this.foregroundShape.destroy(),e.off("".concat(Kc,":click")),e.off("".concat(Ph,":click")),e.off("".concat(kh,":click")),e.off(Dl),e.destroy(),this.trendComponent&&this.trendComponent.destory()},i}(),Bw=Rw,Fw=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),gc=function(){return gc=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},gc.apply(this,arguments)},Gw=function(i,e){var t={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(i);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(i,r[n])&&(t[r[n]]=i[r[n]]);return t},zw=4,Uw=26,Ww=function(i){Fw(e,i);function e(t){var r=i.call(this,t)||this;return r.afterrenderListener=function(n){return r.filterData({})},r.valueChangeListener=(0,d.throttle)(function(n){return r.filterData(n)},200,{trailing:!0,leading:!0}),r.changeData=function(n){var a=r.get("graph");r.cacheGraphData=a.get("data"),r.filterData({})},r}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-component-timebar",padding:10,type:"trend",trend:{data:[],isArea:!1,smooth:!0},controllerCfg:{speed:1,loop:!1},slider:{start:.1,end:.9,minText:"min",maxText:"max"},tick:{start:.1,end:.9,data:[]},textStyle:{},filterEdge:!1,filterItemTypes:["node"],containerCSS:{},putInGraphContainer:!0}},e.prototype.initContainer=function(){var t=this.get("graph"),r=this._cfgs,n=r.width,a=r.height,o=r.putInGraphContainer,s=this.get("className")||"g6-component-timebar",u=this.get("container"),f;if(u?((0,d.isString)(u)&&(u=document.getElementById(u)),f=u):(f=Ji("<div class='".concat(s,"'></div>")),Ya(f,{position:"relative"})),o){var c=this.get("graph").get("container");c.appendChild(f)}this.set("timeBarContainer",f);var l,b=t.get("renderer");b==="SVG"?l=new Oh({container:f,width:n,height:a}):l=new lc({container:f,width:n,height:a}),this.get("containerCSS")&&Ya(f,this.get("containerCSS")),this.set("canvas",l)},e.prototype.init=function(){this.initContainer();var t=this.get("canvas"),r=t.addGroup({name:"timebar-group"});this.set("timeBarGroup",r),this.renderTrend(),this.initEvent();var n=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif";this.set("fontFamily",n)},e.prototype.play=function(){this.togglePlay(!0)},e.prototype.pause=function(){this.togglePlay(!1)},e.prototype.togglePlay=function(t){var r=this.get("timebar");r&&(r.isPlay=!!t,r.changePlayStatus())},e.prototype.renderTrend=function(){var t=this,r=this._cfgs,n=r.width,a=r.x,o=r.y,s=r.padding,u=r.type,f=r.trend,c=r.slider,l=r.controllerCfg,b=r.textStyle,w=r.tick,I=r.backgroundStyle,W=r.foregroundStyle,H=f.data,J=Gw(f,["data"]),at=n-2*s,ut=u==="trend"?Uw:zw,lt=this.get("graph"),_t=this.get("timeBarGroup"),Bt=this.get("canvas"),Rt=null;if(u==="trend"||u==="simple"){var Qt=this.get("getValue");Rt=new Bw(gc(gc({graph:lt,canvas:Bt,group:_t,type:u,x:a+s,y:u==="trend"?o+s:o+s+15,width:at,height:ut,padding:s,backgroundStyle:I,foregroundStyle:W,trendCfg:gc(gc({},J),{data:H.map(function(se){return(Qt==null?void 0:Qt(se))||se.value})})},c),{tick:{ticks:H,tickLabelFormatter:w.tickLabelFormatter,tickLabelStyle:w.tickLabelStyle,tickLineStyle:w.tickLineStyle},handlerStyle:gc(gc({},c.handlerStyle),{height:c.height||ut}),controllerCfg:l,textStyle:b}))}else u==="tick"&&(Rt=new sE(gc({graph:lt,canvas:Bt,group:_t,x:a+s,y:o+s,width:n,height:42,padding:2,controllerCfg:l},w)));var de=function se(){var Te=t.get("timebar");Te.draggingHandler=!1,Te.isPlay&&(Te.isPlay=!1,Te.currentHandler=Te.maxHandlerShape,Te.changePlayStatus()),document.removeEventListener("mouseup",se)};Bt.on("mousedown",function(se){(se.target.get("name")==="maxHandlerShape-handler"||se.target.get("name")==="minHandlerShape-handler"||se.target===Rt.foregroundShape)&&document.addEventListener("mouseup",de)}),this.set("timebar",Rt)},e.prototype.filterData=function(t){var r,n=t.value;if(!n){n=[];var a=this._cfgs.type;!a||a==="trend"||a==="simple"?(n[0]=this._cfgs.slider.start,n[1]=this._cfgs.slider.end):a==="tick"&&(n[0]=this._cfgs.tick.start,n[1]=this._cfgs.tick.end)}var o=null,s=this._cfgs.type;if(s==="trend"||s==="simple"?o=this._cfgs.trend.data:s==="tick"&&(o=this._cfgs.tick.data),!o||o.length===0){console.warn("\u8BF7\u914D\u7F6E TimeBar \u7EC4\u4EF6\u7684\u6570\u636E");return}var u=this.get("rangeChange"),f=this.get("graph"),c=Math.round(o.length*n[0]),l=Math.round(o.length*n[1]);l=l>=o.length?o.length-1:l,c=c>=o.length?o.length-1:c;var b=(r=this._cfgs.tick)===null||r===void 0?void 0:r.tickLabelFormatter,w=b?b(o[c]):o[c].date,I=b?b(o[l]):o[l].date;if(s!=="tick"){var W=this.get("timebar");W.setText(w,I)}if(u)u(f,w,I);else{(!this.cacheGraphData||this.cacheGraphData.nodes&&this.cacheGraphData.nodes.length===0)&&(this.cacheGraphData=f.get("data"));var H=this.get("filterItemTypes"),J=this.get("changeData"),at=this.get("getDate"),ut=this.get("shouldIgnore"),lt=o[c].date,_t=o[l].date;if(J||J===void 0){var Bt=this.cacheGraphData.nodes,Rt=this.cacheGraphData.edges,Qt={},de={};f.getNodes().forEach(function(se){return Qt[se.getID()]=!0}),f.getEdges().forEach(function(se){return de[se.getID()]=!0}),H.includes("node")&&(Bt==null||Bt.forEach(function(se){var Te=+((at==null?void 0:at(se))||se.date),je=Te>=lt&&Te<=_t||(ut==null?void 0:ut("node",se,{min:lt,max:_t})),Dr=Qt[se.id];Dr&&!je?(f.removeItem(se.id),Qt[se.id]=!1):!Dr&&je&&(f.addItem("node",se),Qt[se.id]=!0)}),Rt==null||Rt.forEach(function(se){var Te=Qt[se.source]&&Qt[se.target]||(ut==null?void 0:ut("edge",se,{min:lt,max:_t})),je=!!f.findById(se.id);je&&!Te?(f.removeItem(se.id),de[se.id]=!1):!je&&Te?(f.addItem("edge",se),de[se.id]=!0):je||(de[se.id]=!1)})),(this.get("filterEdge")||H.includes("edge"))&&(Rt==null||Rt.filter(function(se){var Te=+((at==null?void 0:at(se))||se.date),je=Te>=lt&&Te<=_t||(ut==null?void 0:ut("edge",se,{min:lt,max:_t})),Dr=Qt[se.source]&&Qt[se.target],Kr=je&&Dr,zr=de[se.id];zr&&!Kr?(de[se.id]=!1,f.removeItem(se.id)):!zr&&Kr&&(de[se.id]=!0,f.addItem("edge",se))}))}else H.includes("node")&&f.getNodes().forEach(function(se){var Te=se.getModel();if(!(ut!=null&&ut("node",Te,{min:lt,max:_t}))){var je=+((at==null?void 0:at(Te))||Te.date);je<lt||je>_t?f.hideItem(se):f.showItem(se)}}),(this.get("filterEdge")||H.includes("edge"))&&f.getEdges().forEach(function(se){var Te=se.getModel();if(!(ut!=null&&ut("edge",Te,{min:o[c].date,max:o[l].date}))){var je=+((at==null?void 0:at(Te))||Te.date);if(je<o[c].date||je>o[l].date)f.hideItem(se);else{var Dr=se.getSource().isVisible(),Kr=se.getTarget().isVisible();Dr&&Kr&&f.showItem(se)}}})}},e.prototype.initEvent=function(){var t=this.get("graph");t.on("afterchangedata",this.changeData),t.on("afterrender",this.afterrenderListener),t.on(If,this.valueChangeListener)},e.prototype.destroy=function(){var t=this.get("graph");t.off("afterchangedata",this.changeData),t.off("afterrender",this.afterrenderListener),t.off(If,this.valueChangeListener);var r=this.get("timebar");r&&r.destory&&r.destory(),i.prototype.destroy.call(this);var n=this.get("timeBarContainer");if(n){var a=this.get("container");a||(a=this.get("graph").get("container")),(0,d.isString)(a)&&(a=document.getElementById(a)),a===n&&(a=a.parentElement),a.removeChild(n)}},e}(nu),Xw=Ww,Yw=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Vw=_s.applyMatrix;function jw(i,e){var t,r;if(i.naturalWidth)t=i.naturalWidth,r=i.naturalHeight;else{var n=new Image;n.src=i.src,n.onload=function(){e&&e(n.width,n.height)}}return[t,r]}var Hw=function(i){Yw(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",width:200,delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var t=this,r=this._cfgs,n=r.graph;if(!this.destroyed){var a=this.get("container");(0,d.isString)(a)&&(a=document.getElementById(a));var o=Ji("<div class=".concat(r.viewportClassName,`
      style='position:absolute;
        left:0;
        top:0;
        box-sizing:border-box;
        border: 2px solid #1980ff;
        cursor:move'
      </div>`)),s=0,u=0,f=!1,c=0,l=0,b=0,w=0,I=0,W=0;a.addEventListener("mousedown",function(H){if(r.refresh=!1,H.target===o){var J=o.style;b=parseInt(J.width,10),w=parseInt(J.height,10);var at=t.get("width"),ut=t.get("height");b>at||w>ut||(W=n.getZoom(),I=t.get("ratio"),f=!0,s=H.clientX,u=H.clientY)}},!1),a.addEventListener("mousemove",function(H){if(!(!f||(0,d.isNil)(H.clientX)||(0,d.isNil)(H.clientY))){var J=t.get("width"),at=t.get("height"),ut=o.style;c=parseInt(ut.left,10),l=parseInt(ut.top,10),b=parseInt(ut.width,10),w=parseInt(ut.height,10);var lt=s-H.clientX,_t=u-H.clientY;c-lt<0?lt=c:c-lt+b>=J&&(lt=0),l-_t<0?_t=l:l-_t+w>=at&&(_t=0),c-=lt,l-=_t,Ya(o,{left:"".concat(c,"px"),top:"".concat(l,"px")}),n.translate(lt*W/I,_t*W/I),s=H.clientX,u=H.clientY}},!1),a.addEventListener("mouseleave",function(){f=!1,r.refresh=!0},!1),a.addEventListener("mouseup",function(){f=!1,r.refresh=!0},!1),this.set("viewport",o),a.appendChild(o)}},e.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),r=this.get("width"),n=this.get("height"),a=this.get("graph"),o=a.get("width"),s=a.get("height"),u=o/s,f=a.getGroup(),c=f.getCanvasBBox(),l=[(c.minX+c.maxX)/2,(c.minY+c.maxY)/2],b=[c.maxX-c.minX,c.maxY-c.minY],w={centerX:l[0],centerY:l[1],width:0,height:0,minX:0,minY:0};c[0]/c[1]>u?(w.width=b[0],w.height=w.width/u):(w.height=b[1],w.width=w.height*u),w.minX=l[0]-w.width/2,w.minY=l[1]-w.height/2;var I=f.getMatrix();I||(I=[1,0,0,0,1,0,0,0,1]);var W=it.invert([1,0,0,0,1,0,0,0,1],I),H=Vw({x:w.minX,y:w.minY},W),J=a.getCanvasByPoint(H.x,H.y),at=this.get("viewport");at||this.initViewport();var ut=o/w.width,lt=ut*r,_t=ut*n,Bt=r*-J.x/w.width,Rt=n*-J.y/w.height,Qt=Bt+lt,de=Rt+_t;Bt<0&&(lt+=Bt,Bt=0),Qt>r&&(lt=lt-(Qt-r)),Rt<0&&(_t+=Rt,Rt=0),de>n&&(_t=_t-(de-n)),this.set("ratio",t);var se="".concat(Bt,"px"),Te="".concat(Rt,"px");Ya(at,{left:se,top:Te,width:"".concat(lt,"px"),height:"".concat(_t,"px")})}},e.prototype.init=function(){this.initContainer()},e.prototype.initContainer=function(){var t=this,r=t.get("graph"),n=r.get("width"),a=r.get("height"),o=a/n,s=t.get("className"),u=t.get("container"),f=t.get("width"),c=t.get("height");!f&&!c&&(f=200),f?(c=o*f,t.set("height",c)):(f=1/o*c,t.set("width",f));var l=Ji("<div class='".concat(s,"' style='width: ").concat(f,"px; height: ").concat(c,"px; overflow: hidden; position: relative;'></div>"));(0,d.isString)(u)&&(u=document.getElementById(u)),u?u.appendChild(l):r.get("container").appendChild(l),t.set("container",l);var b=Ji('<div class="g6-minimap-container" style="position: relative; width: 100%; height: 100%; text-align: center; display: table;"></div>');l.appendChild(b);var w=Ji('<span style="display: table-cell; vertical-align: middle; "></span>');b.appendChild(w),t.set("containerDOM",b),t.set("containerSpan",w);var I=Ji('<img alt="" src="'.concat(this.get("graphImg"),'" style="display: inline-block; user-select: none;" draggable="false" />'));t.set("imgDOM",I),t.updateImgSize(),w.appendChild(I),t.updateCanvas()},e.prototype.updateImgSize=function(){var t=this,r=t.get("imgDOM"),n=t.get("width"),a=t.get("height");r.onload=function(){var o=jw(r);o[0]>o[1]?r.width=n:r.height=a}},e.prototype.updateCanvas=function(){var t=this.get("refresh");if(t){var r=this.get("graph");if(!r.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var n=this.get("width"),a=r.get("canvas").getCanvasBBox(),o=a.width,s=n/o;this.set("ratio",s),this.updateViewport()}}},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.updateGraphImg=function(t){var r=this,n=r.get("imgDOM");n.remove(),r.set("graphImg",t);var a=Ji('<img alt="" src="'.concat(t,'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>'));r.set("imgDOM",a),a.src=t,r.updateImgSize();var o=r.get("containerSpan");o.appendChild(a),r.updateCanvas()},e.prototype.destroy=function(){var t=this.get("container");t.parentNode.removeChild(t)},e}(nu),Kw=Hw,Zw=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ld=function(){return Ld=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Ld.apply(this,arguments)},$w=_s.distance,wp=.05,_p={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:1,fill:"#fff"},qw=function(i){Zw(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{type:"both",trigger:"mousemove",r:60,delegateStyle:(0,d.clone)(_p),showLabel:"edge",scaleRBy:"wheel"}},e.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"filter"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"filter"};break}return t},e.prototype.init=function(){var t=this,r=t.get("showLabel"),n=r==="node"||r==="both",a=r==="edge"||r==="both";t.set("showNodeLabel",n),t.set("showEdgeLabel",a);var o=t.get("shouldShow");o||t.set("shouldShow",function(){return!0})},e.prototype.createDelegate=function(t){var r=this,n=r.get("delegate");(!n||n.destroyed)&&(r.filter(t),n=r.get("delegate"),n.on("dragstart",function(a){}),n.on("drag",function(a){r.filter(a)}),this.get("scaleRBy")==="wheel"&&n.on("mousewheel",function(a){r.scaleRByWheel(a)}))},e.prototype.scaleRByWheel=function(t){var r=this;if(!(!t||!t.originalEvent)){t.preventDefault&&t.preventDefault();var n=r.get("graph"),a,o=r.get("delegate"),s=o?{x:o.attr("x"),y:o.attr("y")}:void 0,u=s||n.getPointByClient(t.clientX,t.clientY);t.originalEvent.wheelDelta<0?a=1-wp:a=1/(1-wp);var f=r.get("maxR"),c=r.get("minR"),l=r.get("r");(l>(f||n.get("height"))&&a>1||l<(c||n.get("height")*.05)&&a<1)&&(a=1),l*=a,r.set("r",l),r.filter(t)}},e.prototype.filter=function(t){var r=this,n=r.get("graph"),a=n.getNodes(),o={},s=r.get("r"),u=r.get("type"),f={x:t.x,y:t.y};r.updateDelegate(f,s);var c=r.get("shouldShow"),l=r.get("vShapes");l&&l.forEach(function(J){J.remove(),J.destroy()}),l=[],a.forEach(function(J){var at=J.getModel(),ut=at.x,lt=at.y;$w({x:ut,y:lt},f)<s&&(o[at.id]=J)});var b=n.getEdges(),w=[];b.forEach(function(J){var at=J.getModel(),ut=at.source,lt=at.target;c(at)&&(u==="only-source"||u==="one"?o[ut]&&!o[lt]&&w.push(J):u==="only-target"||u==="one"?o[lt]&&!o[ut]&&w.push(J):u==="both"&&o[ut]&&o[lt]&&w.push(J))});var I=r.get("showNodeLabel"),W=r.get("showEdgelabel"),H=n.get("group");w.forEach(function(J){var at=J.get("group").get("children");at.forEach(function(ut){var lt=ut.get("type"),_t=H.addShape(lt,{attrs:ut.attr()});l.push(_t),I&&lt==="text"&&_t.set("visible",!0)})}),Object.keys(o).forEach(function(J){var at=o[J],ut=at.get("group").clone();if(H.add(ut),l.push(ut),W)for(var lt=ut.get("children"),_t=0;_t<lt.length;_t++){var Bt=lt[_t];Bt.get("type")==="text"&&Bt.set("visible",!0)}}),r.set("vShapes",l)},e.prototype.updateParams=function(t){var r=this,n=t.r,a=t.trigger,o=t.minR,s=t.maxR,u=t.scaleRBy,f=t.showLabel,c=t.shouldShow;if(isNaN(t.r)||r.set("r",n),isNaN(s)||r.set("maxR",s),isNaN(o)||r.set("minR",o),(a==="mousemove"||a==="click")&&r.set("trigger",a),u==="wheel"||u==="unset"){r.set("scaleRBy",u),r.get("delegate").remove(),r.get("delegate").destroy();var l=r.get("dPercentText");l&&(l.remove(),l.destroy())}(f==="node"||f==="both")&&r.set("showNodeLabel",!0),(f==="edge"||f==="both")&&r.set("showEdgeLabel",!0),c&&r.set("shouldShow",c)},e.prototype.updateDelegate=function(t,r){var n=this,a=n.get("graph"),o=n.get("delegate");if(!o||o.destroyed){var s=a.get("group"),u=n.get("delegateStyle")||_p;o=s.addShape("circle",{attrs:Ld({r,x:t.x,y:t.y},u),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&this.get("scaleRBy")==="wheel"&&o.on("mousewheel",function(f){n.scaleRByWheel(f)})}else o.attr({x:t.x,y:t.y,r});n.set("delegate",o)},e.prototype.clear=function(){var t=this,r=t.get("vShapes");r&&r.forEach(function(a){a.remove(),a.destroy()}),r=[],t.set("vShapes",r);var n=t.get("delegate");n&&!n.destroyed&&(n.remove(),n.destroy())},e.prototype.destroy=function(){this.clear()},e}(nu),Qw=qw,Jw=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),t2=_s.pointLineDistance,e2={stroke:"#FA8C16",lineWidth:1},r2=function(i){Jw(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{line:e2,itemAlignType:"center",tolerance:5,horizontalLines:{},verticalLines:{},alignLines:[]}},e.prototype.init=function(){},e.prototype.getEvents=function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd"}},e.prototype.onDragStart=function(){this.initBoxLine()},e.prototype.onDrag=function(t){var r=t.item,n=r.get("delegateShape")||r,a=n.getBBox(),o=r.getModel(),s=o.x-a.x,u=o.y-a.y;this.show({x:a.minX+s,y:a.minY+u},{width:a.width,height:a.height})},e.prototype.onDragEnd=function(){this.destory()},e.prototype.initBoxLine=function(){var t=this._cfgs,r=t.horizontalLines,n=t.verticalLines,a=t.itemAlignType,o=this.get("graph"),s=o.getNodes();s.forEach(function(u){var f=u.getBBox(),c=u.get("id");a===!0||a==="horizontal"?(r["".concat(c,"tltr")]=[f.minX,f.minY,f.maxX,f.minY,u],r["".concat(c,"lcrc")]=[f.minX,f.centerY,f.maxX,f.centerY,u],r["".concat(c,"blbr")]=[f.minX,f.maxY,f.maxX,f.maxY,u]):a==="center"&&(r["".concat(c,"lcrc")]=[f.minX,f.centerY,f.maxX,f.centerY,u]),a===!0||a==="vertical"?(n["".concat(c,"tlbl")]=[f.minX,f.minY,f.minX,f.maxY,u],n["".concat(c,"tcbc")]=[f.centerX,f.minY,f.centerX,f.maxY,u],n["".concat(c,"trbr")]=[f.maxX,f.minY,f.maxX,f.maxY,u]):a==="center"&&(n["".concat(c,"tcbc")]=[f.centerX,f.minY,f.centerX,f.maxY,u])})},e.prototype.show=function(t,r){var n=(0,d.mix)({},t);return this.itemAlign(t,r,n),t},e.prototype.itemAlign=function(t,r,n){var a=this,o=this._cfgs,s=o.horizontalLines,u=o.verticalLines,f=o.tolerance,c={x:n.x+r.width/2,y:n.y},l={x:n.x+r.width/2,y:n.y+r.height/2},b={x:n.x+r.width/2,y:n.y+r.height},w={x:n.x,y:n.y+r.height/2},I={x:n.x+r.width,y:n.y+r.height/2},W=[],H=[],J=null;if(this.clearAlignLine(),(0,d.each)(s,function(ut){ut[4].isVisible&&(W.push(a.getLineDisObject(ut,c)),W.push(a.getLineDisObject(ut,l)),W.push(a.getLineDisObject(ut,b)))}),(0,d.each)(u,function(ut){ut[4].isVisible&&(H.push(a.getLineDisObject(ut,w)),H.push(a.getLineDisObject(ut,l)),H.push(a.getLineDisObject(ut,I)))}),W.sort(function(ut,lt){return ut.dis-lt.dis}),H.sort(function(ut,lt){return ut.dis-lt.dis}),W.length!==0&&W[0].dis<f){t.y=W[0].line[1]-W[0].point.y+n.y,J={type:"item",horizontals:[W[0]]};for(var at=1;at<3;at++)W[0].dis===W[at].dis&&J.horizontals.push(W[at])}if(H.length!==0&&H[0].dis<f){t.x=H[0].line[0]-H[0].point.x+n.x,J?J.verticals=[H[0]]:J={type:"item",verticals:[H[0]]};for(var at=1;at<3;at++)H[0].dis===H[at].dis&&J.verticals.push(H[at])}J&&(J.bbox=r,this.addAlignLine(J))},e.prototype.addAlignLine=function(t){var r=t.bbox,n=t.type,a=t.horizontals,o=t.verticals,s=this._cfgs,u=s.line,f=s.alignLines,c=this.get("graph"),l=c.get("group");n==="item"&&(a&&(0,d.each)(a,function(b){var w=b.line,I=b.point,W=(w[0]+w[2])/2,H,J;I.x<W?(H=I.x-r.width/2,J=Math.max(w[0],w[2])):(H=I.x+r.width/2,J=Math.min(w[0],w[2]));var at=(0,d.mix)({x1:H,y1:w[1],x2:J,y2:w[1]},u),ut=l.addShape("line",{attrs:at,capture:!1});f.push(ut)}),o&&(0,d.each)(o,function(b){var w=b.line,I=b.point,W=(w[1]+w[3])/2,H,J;I.y<W?(H=I.y-r.height/2,J=Math.max(w[1],w[3])):(H=I.y+r.height/2,J=Math.min(w[1],w[3]));var at=(0,d.mix)({x1:w[0],y1:H,x2:w[0],y2:J},u),ut=l.addShape("line",{attrs:at,capture:!1});f.push(ut)}))},e.prototype.getLineDisObject=function(t,r){return{line:t,point:r,dis:t2(t,r)}},e.prototype.getContainer=function(){return this.get("container")},e.prototype.clearAlignLine=function(){var t=this._cfgs.alignLines;(0,d.each)(t,function(r){r.remove()}),t.length=0},e.prototype.destory=function(){var t=this._cfgs,r=t.horizontalLines,n=t.verticalLines,a=this.get("graph"),o=a.getNodes();o.forEach(function(s){var u=s.get("id");delete r["".concat(u,"tltr")],delete r["".concat(u,"lcrc")],delete r["".concat(u,"blbr")],delete n["".concat(u,"tlbl")],delete n["".concat(u,"tcbc")],delete n["".concat(u,"trbr")]}),this.clearAlignLine()},e}(nu),n2=r2,a2=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),xo=function(){return xo=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},xo.apply(this,arguments)},i2=["click","mouseenter"],o2=function(i){a2(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{data:{},position:"top",padding:8,margin:8,offsetX:0,offsetY:0,layout:"horizontal",flipPage:!1,containerStyle:{},align:void 0,horiSep:8,vertiSep:8,filter:{enable:!1,trigger:"click"}}},e.prototype.init=function(){this.formatArray("padding"),this.formatArray("margin");var t=this.get("filter")||{},r=t.multiple;r&&t.trigger==="mouseenter"&&this.set("multiple",!1);var n=this.get("align");if(!n){var a=this.get("position").split("-");a.includes("left")&&(n="left"),a.includes("right")?n="right":n="center",this.set("align",n)}var o=this.get("graph"),s=o.get("container"),u=Ji(`<div class='g6-legend-container' style="position: absolute;"></div>`);s.appendChild(u),this.set("container",u);var f=this.render();Ya(u,this.getContainerPos(f)),this.bindEvents()},e.prototype.getContainerPos=function(t){t===void 0&&(t=[0,0]);var r=this,n=r.get("graph"),a=this.get("offsetX"),o=this.get("offsetY"),s=this.get("margin"),u=this.get("position").split("-"),f={top:0,right:1,bottom:2,left:3},c=0,l=0,b={left:(n.getWidth()-t[0])/2+c,top:(n.getHeight()-t[1])/2+l};return u.forEach(function(w){var I=s[f[w]],W=w;switch(w){case"top":I+=l;break;case"left":I+=c;break;case"bottom":I=n.getHeight()-t[1]-I+l,W="top";break;default:I=n.getWidth()-t[0]-I+c,W="left";break}b[W]=I}),b.top+=o+n.getContainer().offsetTop,b.left+=a+n.getContainer().offsetLeft,Object.keys(b).forEach(function(w){b[w]="".concat(b[w],"px")}),b},e.prototype.bindEvents=function(){var t=this,r=t.get("filter");if(!(!r||!r.enable)){var n=r.trigger||"click";i2.includes(n)||(console.warn("Trigger for legend filterling must be 'click' or 'mouseenter', 'click' will take effect by default."),n="click");var a=t.get("legendCanvas");n==="mouseenter"?(a.on("node-container:mouseenter",function(o){return t.filterData(o)}),a.on("node-container:mouseleave",function(o){t.clearFilter(),t.clearActiveLegend()})):(a.on("node-container:click",function(o){return t.filterData(o)}),a.on("click",function(o){o.target&&o.target.isCanvas&&o.target.isCanvas()&&(t.clearFilter(),t.clearActiveLegend())}))}},e.prototype.changeData=function(t){this.set("data",t);var r=this.render();Ya(this.get("container"),this.getContainerPos(r))},e.prototype.activateLegend=function(t){var r=this.get("filter"),n=r==null?void 0:r.multiple;n||this.clearActiveLegend();var a=t.get("parent");a.get("active")?(a.set("active",!1),this.findLegendItemsByState("active").length&&a.set("inactive",!0)):(a.set("inactive",!1),a.set("active",!0)),this.findLegendItemsByState("active").length?this.findLegendItemsByState("active","all",!1).forEach(function(l){l.set("inactive",!0)}):this.clearActiveLegend();var o=(r==null?void 0:r.legendStateStyles)||{},s=(o==null?void 0:o.inactive)||{opacity:.5,"text-shape":{opacity:.5}},u=s["text-shape"]||{};this.findLegendItemsByState("inactive").forEach(function(l){var b=l.get("children"),w=b[0],I=b[1];w.attr(xo(xo({},w.get("oriAttrs")),s)),I.attr(xo(xo({},I.get("oriAttrs")),u))});var f=(o==null?void 0:o.active)||{stroke:"#000",lineWidth:2,"text-shape":{fontWeight:"bold"}},c=f["text-shape"]||{};this.findLegendItemsByState("active").forEach(function(l){var b=l.get("children"),w=b[0],I=b[1];w.attr(xo(xo({},w.get("oriAttrs")),f)),I.attr(xo(xo({},I.get("oriAttrs")),c))})},e.prototype.findLegendItemsByState=function(t,r,n){r===void 0&&(r="all"),n===void 0&&(n=!0);var a=this.get("legendCanvas").find(function(u){return u.get("name")==="root"}),o=a.find(function(u){return u.get("name")==="node-group"}),s=a.find(function(u){return u.get("name")==="edge-group"});return r==="node"?o.get("children").filter(function(u){return!!u.get(t)===n}):r==="edge"?s.get("children").filter(function(u){return!!u.get(t)===n}):o.get("children").filter(function(u){return!!u.get(t)===n}).concat(s.get("children").filter(function(u){return!!u.get(t)===n}))},e.prototype.clearActiveLegend=function(){var t=this.get("legendCanvas"),r=t.find(function(a){return a.get("name")==="root"}),n=[r.find(function(a){return a.get("name")==="node-group"}),r.find(function(a){return a.get("name")==="edge-group"})];n.forEach(function(a){a.get("children").forEach(function(o){o.set("active",!1),o.set("inactive",!1);var s=o.get("children"),u=s[0],f=s[1];u.attr(u.get("oriAttrs")),f.attr(f.get("oriAttrs"))})})},e.prototype.filterData=function(t){var r=this.get("filter"),n=r==null?void 0:r.filterFunctions;if(!(!r||!n)){var a=this.get("legendCanvas"),o=this.get("graph"),s=r.graphActiveState||"active",u=r.graphInactiveState||"inactive",f=r.multiple;this.clearFilter(),f||this.clearActiveLegend(),this.activateLegend(t.target);var c=a.find(function(J){return J.get("name")==="root"}),l=c.find(function(J){return J.get("name")==="node-group"}),b=c.find(function(J){return J.get("name")==="edge-group"}),w=l.get("children").filter(function(J){return J.get("active")}),I=b.get("children").filter(function(J){return J.get("active")}),W=0,H=["getNodes","getEdges"];H.forEach(function(J){o[J]().forEach(function(at){var ut=!1,lt=J==="getNodes"?w:I;lt.forEach(function(_t){var Bt=n[_t.get("id")];ut=ut||Bt(at.getModel())}),ut?(o.setItemState(at,u,!1),o.setItemState(at,s,!0),W++):(o.setItemState(at,s,!1),o.setItemState(at,u,!0))})}),W||H.forEach(function(J){o[J]().forEach(function(at){o.clearItemStates(at,[u])})})}},e.prototype.clearFilter=function(){var t=this.get("graph"),r=this.get("filter");if(r){var n=r.graphActiveState||"active",a=r.graphInactiveState||"inactive";t.getNodes().forEach(function(o){t.clearItemStates(o,[n,a])}),t.getEdges().forEach(function(o){t.clearItemStates(o,[n,a])})}},e.prototype.render=function(){var t=this;this.processData();var r=this.get("legendCanvas");r?r.clear():r=new lc({container:this.get("container"),width:200,height:200});var n=r.addGroup({name:"root"}),a=n.addGroup({name:"node-group"}),o=n.addGroup({name:"edge-group"});this.set("legendCanvas",r);var s=this.get("itemsData"),u=["nodes","edges"],f=[a,o];u.forEach(function(Mr,En){s[Mr].forEach(function(yn){var Ar,Xr=f[En].addGroup({id:yn.id,name:"node-container"}),sn,un=yn.type,An=t.getShapeSize(yn),Gn=An.width,ga=An.height,Oa=An.r,gi=t.getStyle(Mr.substr(0,4),yn);switch(yn.type){case"circle":sn={r:Oa,x:0,y:0};break;case"rect":sn={width:Gn,height:ga,x:-Gn/2,y:-ga/2};break;case"ellipse":sn={rx:Gn,ry:ga,x:0,y:0},un="ellipse";break;case"line":sn={x1:-Gn/2,y1:0,x2:Gn/2,y2:0},un="line";break;case"quadratic":sn={path:[["M",-Gn/2,0],["Q",0,Gn/2,Gn/2,0]]},un="path";break;case"cubic":sn={path:[["M",-Gn/2,0],["C",-Gn/6,Gn/2,Gn/6,-Gn/2,Gn/2,0]]},un="path";break;case"diamond":sn={path:[["M",0,-ga],["L",Gn,0],["L",0,ga],["L",-Gn,0],["Z"]]},un="path";break;case"triangle":sn={path:[["M",-Gn,ga],["L",0,-ga],["L",Gn,ga],["Z"]]},un="path";break;case"star":sn={path:_s.getStarPath(Oa*3,Oa*1.2)},un="path";break;default:sn={r:Oa,x:0,y:0};break}var ti=Xr.addShape(un,{attrs:xo(xo({},sn),gi),name:"".concat(yn.type,"-node-keyShape"),oriAttrs:xo({opacity:1},gi)});if(yn.label){var pi=ti.getBBox(),wi=((Ar=yn.labelCfg)===null||Ar===void 0?void 0:Ar.style)||{},ji=xo({textAlign:"begin",fontSize:12,textBaseline:"middle",fill:"#000",opacity:1,fontWeight:"normal"},wi);Xr.addShape("text",{attrs:xo({x:pi.maxX+4,y:0,text:yn.label},ji),className:"legend-label",name:"".concat(yn.type,"-node-text"),oriAttrs:ji})}})});var c=this.get("padding"),l,b=n.find(function(Mr){return Mr.get("name")==="title-container"}),w={height:0,maxY:0,width:0};if(this.get("title")){b||(b=n.addGroup({name:"title-container"}));var I={fontSize:20,fontFamily:"Arial",fontWeight:300,textBaseline:"top",textAlign:"center",fill:"#000",x:0,y:c[0]},W=this.get("titleConfig")||{},H=Object.assign(I,W.style||{});l=b.addShape("text",{attrs:xo({text:this.get("title")},H)}),w=b.getCanvasBBox(),b.setMatrix([1,0,0,0,1,0,W.offsetX,W.offsetY,1])}this.layoutItems();var J=n.getCanvasBBox(),at=a.getCanvasBBox(),ut=at.minX<0?Math.abs(at.minX)+c[3]:c[3],lt=w.maxY<at.minY?Math.abs(w.maxY-at.minY)+c[0]:w.maxY+c[0],_t=[1,0,0,0,1,0,ut,lt,1];a.setMatrix(_t),J=n.getCanvasBBox();var Bt=[J.minX+J.width+c[1],J.minY+J.height+c[2]];if(l){var W=xo({position:"center",offsetX:0,offsetY:0},this.get("titleConfig"));w=b.getCanvasBBox();var Rt=b.getMatrix()||[1,0,0,0,1,0,0,0,1];W.position==="center"?Rt[6]=Bt[0]/2+W.offsetX:W.position==="right"?(Rt[6]=Bt[0]-c[3]+W.offsetX,l.attr({textAlign:"right"})):(Rt[6]=c[3]+W.offsetX,l.attr({textAlign:"left"})),b.setMatrix(Rt),w=b.getCanvasBBox(),ut=at.minX<0?Math.abs(at.minX)+c[3]:c[3],lt=at.minY<w.maxY?Math.abs(w.maxY-at.minY)+c[0]:w.maxY+c[0],_t=[1,0,0,0,1,0,ut,lt,1],a.setMatrix(_t);var Qt=[1,0,0,0,1,0,ut,lt,1];this.get("layout")==="vertical"?Qt[6]+=at.maxX+this.get("horiSep"):Qt[7]+=at.maxY+this.get("vertiSep"),o.setMatrix(Qt)}else{at=a.getCanvasBBox();var de=[1,0,0,0,1,0,0,0,1];this.get("layout")==="vertical"?de[6]+=_t[6]+at.maxX+this.get("horiSep"):de[7]+=_t[7]+at.maxY+this.get("vertiSep"),o.setMatrix(de)}J=n.getCanvasBBox(),at=a.getCanvasBBox(),_t=a.getMatrix()||[1,0,0,0,1,0,0,0,1];var se=o.getMatrix()||[1,0,0,0,1,0,0,0,1],Te=o.getCanvasBBox();Bt=[Math.max(at.width+_t[6],Te.width+se[6])+c[1],Math.max(at.height+_t[7],Te.height+se[7])+c[2]],r.changeSize(Bt[0],Bt[1]);var je=this.get("containerStyle"),Dr=n.getMatrix()||[1,0,0,0,1,0,0,0,1],Kr=_s.invertMatrix({x:0,y:0},Dr),zr=n.addShape("rect",{attrs:xo({x:Kr.x+(je.lineWidth||1),y:Kr.y+(je.lineWidth||1),width:Bt[0]-2*(je.lineWidth||1),height:Bt[1]-2*(je.lineWidth||1),fill:"#f00",stroke:"#000",lineWidth:1,opacity:.5},je),name:"legend-back-rect",capture:!1});return zr.toBack(),Bt},e.prototype.layoutItems=function(){var t=this.get("legendCanvas"),r=this.get("horiSep"),n=this.get("vertiSep"),a=this.get("layout"),o=this.get("align"),s=[0,0],u=t.find(function(lt){return lt.get("name")==="root"}),f=u.find(function(lt){return lt.get("name")==="node-group"}),c=u.find(function(lt){return lt.get("name")==="edge-group"}),l={min:0,max:-1/0},b=-1/0;f.get("children").forEach(function(lt,_t){_t===0&&(l.min=s[0]);var Bt=lt.get("children")[0],Rt=lt.getCanvasBBox(),Qt=Bt.getBBox(),de=Qt.width,se=Qt.height,Te=0,je=0,Dr=0;a==="vertical"?(je=s[1],Dr=s[0]+de/2,s[0]=Dr+Rt.height+n,Te=Rt.maxX+je+de/2):(je=s[0]+de/2,Dr=s[1],s[0]=je+Rt.width+r,Te=Rt.maxY+Dr+se/2),s[0]>l.max&&(l.max=s[0]),Te>b&&(b=Te),lt.setMatrix([1,0,0,0,1,0,je,Dr,1])});var w=l.max-l.min,I={min:0,max:-1/0},W=f.getCanvasBBox();s[0]=0,s[1]=a==="vertical"?W.maxX+r:W.maxY+n,c.get("children").forEach(function(lt,_t){_t===0&&(I.min=s[0]);var Bt=lt.get("children")[0],Rt=lt.getCanvasBBox(),Qt=Bt.getBBox(),de=Qt.width,se=Qt.height,Te=0,je=0;a==="vertical"?(Te=s[1],je=s[0],s[0]=je+Rt.height+n,lt.setMatrix([1,0,0,0,1,0,0,je+se/2,1])):(Te=s[0],je=s[1],s[0]=Te+Rt.width+r,lt.setMatrix([1,0,0,0,1,0,Te+de/2,0,1])),s[0]>I.max&&(I.max=s[0])});var H=I.max-I.min;if(o&&o!==""&&o!=="left"){var J=w-H,at=o==="center"?Math.abs(J)/2:Math.abs(J),ut=J<0?f:c;ut.get("children").forEach(function(lt){var _t=lt.getMatrix()||[1,0,0,0,1,0,0,0,1];a==="vertical"?_t[7]+=at:_t[6]+=at,lt.setMatrix(_t)})}},e.prototype.processData=function(){var t=this.get("data"),r={nodes:[],edges:[]};t.nodes&&(t.nodes.sort(function(n,a){return n.order-a.order}),t.nodes.forEach(function(n){var a,o,s,u,f,c=n.size||[((a=n.style)===null||a===void 0?void 0:a.width)||((o=n.style)===null||o===void 0?void 0:o.r)||8,((s=n.style)===null||s===void 0?void 0:s.height)||((u=n.style)===null||u===void 0?void 0:u.r)||8],l=((f=n.labelCfg)===null||f===void 0?void 0:f.style)||{};r.nodes.push({id:n.id||(0,d.uniqueId)(),type:n.type||"circle",style:xo({},n.style),order:n.order,label:n.label,itemType:"node",size:c,labelCfg:{position:"right",style:xo({fontFamily:"Arial"},l)}})})),t.edges&&(t.edges.sort(function(n,a){return n.order-a.order}),t.edges.forEach(function(n){var a,o,s=n.type||"line";n.type==="cubic-horizontal"&&(s="cubic");var u=((a=n.labelCfg)===null||a===void 0?void 0:a.style)||{},f=n.size||[((o=n.style)===null||o===void 0?void 0:o.width)||8,1];r.edges.push({id:n.id||(0,d.uniqueId)(),type:s,size:f,style:xo({lineWidth:(0,d.isArray)(f)?f[1]:1},n.style),order:n.order,label:n.label,itemType:"edge",labelCfg:{position:"right",style:xo({fontFamily:"Arial"},u)}})})),this.set("itemsData",r)},e.prototype.getContainer=function(){return this.get("container")},e.prototype.formatArray=function(t){var r=this.get(t);if((0,d.isNumber)(r))this.set(t,[r,r,r,r]);else if((0,d.isArray)(r))switch(r.length){case 0:this.set(t,[0,0,0,0]);break;case 1:this.set(t,[r[0],r[0],r[0],r[0]]);break;case 2:this.set(t,[r[0],r[1],r[0],r[1]]);break;case 3:this.set(t,[r[0],r[1],r[2],r[1]]);break;default:break}return this.get(t)},e.prototype.getShapeSize=function(t){var r,n,a;return t.size&&((0,d.isArray)(t.size)?(r=t.size[0],n=t.size[1]||t.size[0],a=t.size[0]/2):(0,d.isNumber)(t.size)&&(r=t.size,n=t.size,a=t.size/2)),t.style&&(t.style.width&&(r=t.style.width),t.style.height&&(n=t.style.height),t.style.r&&(a=t.style.r)),a||(a=5),r||(r=a),n||(n=a),{width:r,height:n,r:a}},e.prototype.getStyle=function(t,r){var n=t==="node"?{fill:"#ccc",lineWidth:0}:{stroke:"#000",lineWidth:1};return xo(xo({},n),r.style||{})},e.prototype.destroy=function(){var t=this.get("legendCanvas");t==null||t.destroy();var r=this.get("graph"),n=r.get("container"),a=this.get("container");n.removeChild(a)},e}(nu),s2=o2,u2=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Fu=function(){return Fu=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Fu.apply(this,arguments)},Sp=function(i,e){var t={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(i);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(i,r[n])&&(t[r[n]]=i[r[n]]);return t};typeof document!="undefined"&&mv()(`
  .g6-annotation-container {
    background-color: rgba(255, 255, 255, 0.3);
    padding: 8px;
  }
  .g6-annotation-wrapper {
    background-color: #fff;
    box-shadow: 0 0 8px rgba(0, 0, 0, 0.85);
  }
  .g6-annotation-header-wapper {
    height: fit-content;
    width: 100%;
    background-color: #5B8FF9;
    display: inline-flex;
    cursor: move;
  }
  .g6-annotation-title {
    margin: 4px 40px 4px 8px;
    cursor: text;
    min-width: 32px;
  }
  .g6-annotation-collapse {
    margin: 4px;
    cursor: pointer;
  }
  .g6-annotation-expand {
    margin: 4px;
    cursor: pointer;
  }
  .g6-annotation-close {
    margin: 4px 8px 4px 0;
    cursor: pointer;
  }
  .g6-annotation-content {
    padding: 8px;
    width: fit-content;
    cursor: text;
    word-break: break-all;
    min-width: 32px;
  }
  .g6-annotation-title-input-wrapper {
    margin: 4px 40px 4px 8px;
  }
  .g6-annotation-content-input {
    height: 100%;
    word-break: break-all;
  }
  .g6-annotation-content-input-wrapper {
    margin: 8px;
    height: 100%;
  }
`);var Mp="canvas-annotation",f2=function(i){u2(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{trigger:"click",editable:!0,itemHighlightState:"highlight",linkHighlightStyle:{shadowColor:"#5B8FF9",shadowBlur:10},cardCfg:{minHeight:60,width:"fit-content",height:"fit-content",collapseType:"minimize",closeType:"hide",borderRadius:5,maxTitleLength:20}}},e.prototype.getEvents=function(){var t={viewportchange:"updateLinks",afterlayout:"updateLinks",aftergraphrefreshposition:"updateLinks",afterupdateitem:"updateLink",afterchangedata:"onGraphDataChange",afteritemvisibilitychange:"onGraphItemVisibilityChange"};switch(this.get("trigger")){case"click":t=Fu(Fu({},t),{"node:click":"showAnnotation","edge:click":"showAnnotation"})}return t},e.prototype.getDOMContent=function(t){if(!this.destroyed){var r=t.collapsed,n=t.maxWidth,a=t.title,o=a===void 0?"":a,s=t.content,u=s===void 0?"":s,f=t.borderRadius,c=f===void 0?5:f,l=r?"<p class='g6-annotation-expand'>+</p>":"<p class='g6-annotation-collapse'>-</p>",b=r?"":" <p class='g6-annotation-content'>".concat(u,"</p>"),w="<p class='g6-annotation-close'>x</p>",I=r?"".concat(c,"px"):"".concat(c,"px ").concat(c,"px 0 0");return'<div class="g6-annotation-wrapper" style="border-radius: '.concat(c,"px; max-width: ").concat(n,`px">
        <div
          class="g6-annotation-header-wapper"
          style="border-radius: `).concat(I,`;"
        >
          <h4 class='g6-annotation-title'>`).concat(o,`</h4>
          `).concat(l,`
          `).concat(w,`
        </div>
        `).concat(b,`
      </div>`)}},e.prototype.init=function(){var t=this;if(!t.destroyed){var r=t.get("graph"),n=r.getContainer(),a=t.get("container"),o=this.get("containerCfg");o?(a=this.createContainer(),n.appendChild(a)):a=n,this.set("container",a);var s=n.getBoundingClientRect(),u=new lc({container:n,width:s.right-s.left,height:s.bottom-s.top});Ya(u.get("el"),{position:"absolute",top:0,left:0,pointerEvents:"none"}),window.addEventListener("resize",(0,d.debounce)(function(){return t.resizeCanvas(t)},100));var f=u.addGroup({id:"annotation-link-group"});t.set("linkGroup",f),t.set("canvas",u),t.get("getTitle")||t.set("getTitle",function(l){var b,w=((b=l==null?void 0:l.getModel)===null||b===void 0?void 0:b.call(l))||{},I=w.label,W=w.id;return I||W||"-"}),t.get("getContent")||t.set("getContent",function(l){var b,w;if(!l)return"-";var I=((b=l.getModel)===null||b===void 0?void 0:b.call(l))||{},W=I.label,H=I.id,J=(w=l.getType)===null||w===void 0?void 0:w.call(l),at=J?"".concat(J,": "):"";return"".concat(at).concat(W||H||"")});var c=t.get("defaultData");c&&this.readData(c)}},e.prototype.createContainer=function(){var t=this;if(!this.destroyed){var r=this.get("containerCfg"),n=this.get("graph"),a=n.getContainer(),o=a.getBoundingClientRect(),s=o.left,u=o.right,f=o.top,c=o.bottom,l=c-f,b=u-s,w=r.position,I=w===void 0?"top":w,W=r.offsetX,H=W===void 0?0:W,J=r.offsetY,at=J===void 0?0:J,ut=Sp(r,["position","offsetX","offsetY"]),lt=r.height,_t=lt===void 0?"fit-content":lt,Bt=r.width,Rt=Bt===void 0?n.getWidth():Bt;_t==="100%"&&(_t=l),Rt==="100%"&&(Rt=b);var Qt="unset",de="unset",se={};switch(I){case"right":Qt="".concat(l,"px"),se={top:0,right:0},se.right+=s+H,se.top+=f+at;break;case"bottom":de="".concat(b,"px"),se={bottom:0,left:0},se.left+=s+H,se.bottom+=f+at;break;case"top":de="".concat(b,"px");case"left":Qt="".concat(l,"px");default:se={top:0,left:0},se.left+=s+H,se.top+=f+at;break}Object.keys(se).forEach(function(je){se[je]="".concat(se[je],"px")});var Te=Ji("<div class='".concat(r.className," g6-annotation-container'></div>"));return Ya(Te,Fu(Fu({position:"absolute",display:I==="top"||I==="bottom"?"inline-flex":"unset",width:(0,d.isNumber)(Rt)?"".concat(Rt,"px"):Rt,height:(0,d.isNumber)(_t)?"".concat(_t,"px"):_t,maxHeight:Qt,maxWidth:de,overflow:"scroll"},se),ut)),a.appendChild(Te),Te.addEventListener("scroll",function(je){t.updateLinks()}),Te}},e.prototype.resizeCanvas=function(t){clearTimeout(t.resizeTimer),t.resizeTimer=setTimeout(function(){if(!(!t||t.destroyed)){var r=t.get("container").getBoundingClientRect(),n=r.right-r.left,a=r.bottom-r.top;t.get("canvas").changeSize(n,a),t.updateOutsideCards(t)}},250)},e.prototype.updateOutsideCards=function(t){var r=t||this,n=r.get("cardInfoMap")||{},a=r.get("graph"),o=a.getPointByCanvas(0,0),s=a.getPointByCanvas(a.getWidth(),a.getHeight()),u=a.getClientByPoint(o.x,o.y),f=u.x,c=u.y,l=a.getClientByPoint(s.x,s.y),b=l.x,w=l.y;Object.values(n).forEach(function(I){var W=I.card;if(W){var H=W.style,J=Rl(H.left),at=Rl(H.top),ut=W.getBoundingClientRect(),lt=ut.width,_t=ut.height,Bt=J,Rt=at;J+lt>b-f&&(Bt=b-f-lt),J<0&&(Bt=0),at+_t>w-c&&(Rt=w-c-_t),at<0&&(Rt=0),Ya(W,{left:"".concat(Bt,"px"),top:"".concat(Rt,"px")})}}),r.updateLinks()},e.prototype.showAnnotation=function(t){if(!this.destroyed){var r=t.item;this.toggleAnnotation(r)}},e.prototype.hideCards=function(){var t=this;if(!t.destroyed){var r=t.get("cardInfoMap")||{};Object.keys(r).forEach(function(n){t.hideCard(n)})}},e.prototype.toggleAnnotation=function(t,r){var n,a;r===void 0&&(r={});var o=this;if(!o.destroyed){var s=o.get("cardInfoMap")||{},u=o.get("graph"),f=o.get("container"),c=o.get("containerCfg"),l=Object.assign({},o.get("cardCfg")||{},r),b=l.minHeight,w=l.minWidth,I=l.width,W=l.height,H=l.collapsed,J=H===void 0?!1:H,at=l.x,ut=l.y,lt=l.title,_t=l.content,Bt=l.maxTitleLength,Rt=l.defaultBegin,Qt=Sp(l,["minHeight","minWidth","width","height","collapsed","x","y","title","content","maxTitleLength","defaultBegin"]),de=o.get("linkGroup"),se=this.get("rows")||[[]],Te=(n=t.isCanvas)===null||n===void 0?void 0:n.call(t),je=Te?Mp:t.getID(),Dr=s[je]||{},Kr=Dr.card,zr=Dr.link,Mr=Dr.x,En=Dr.y,yn=Dr.title,Ar=Dr.content,Xr=this.get("getTitle"),sn=this.get("getContent"),un=this.get("getContentPlaceholder")||function(){return""},An=this.get("getTitlePlaceHolder")||function(){return""},Gn=un(t),ga=An(t),Oa=Ji(this.getDOMContent(Fu({itemId:je,collapsed:J,title:((a=yn||lt||(Xr==null?void 0:Xr(t)))===null||a===void 0?void 0:a.substr(0,Bt))||ga,content:Ar||_t||(sn==null?void 0:sn(t))||Gn},Qt))),gi=(0,d.isNumber)(b)?"".concat(b,"px"):b;Ya(Oa,{minHeight:J?"unset":gi,minWidth:(0,d.isNumber)(w)?"".concat(w,"px"):w,height:W,width:I});var ti=!!Kr;ti?(zr==null||zr.remove(!0),f.replaceChild(Oa,Kr)):f.appendChild(Oa);var pi;if(!c){if(pi=f.getBoundingClientRect()||{},at!==void 0&&ut!==void 0)Mr=at,En=ut;else if(!ti&&!Te){var wi=pi.top,ji=Rt||{},Pi=ji.left,Gu=ji.right,$o=Gu===void 0?16:Gu,zu=ji.top,qo=zu===void 0?8:zu,Qo=ji.bottom,wu=$o,Ss=qo;isNaN(Pi)||(wu=f.scrollWidth-Pi),isNaN(Qo)||(Ss=f.scrollHeight-Qo);var Hs=(0,d.isNumber)(w)?w:100;Mr=f.scrollWidth-Oa.scrollWidth-(se.length-1)*Hs-wu;var Va=se[se.length-1],hi=(Va[Va.length-1]||{}).bbox;En=(hi==null?void 0:hi.bottom)-wi||Ss}Ya(Oa,{position:"absolute",left:"".concat(Mr,"px"),top:"".concat(En,"px"),cusor:c?"unset":"move"})}this.bindListener(Oa,je);var Wa=Oa.getBoundingClientRect();if(!Te){var vi=Dd(t,Wa,u,this.get("canvas")),Li=this.get("linkStyle");zr=de.addShape("path",{attrs:Fu({lineWidth:1,lineDash:[5,5],stroke:"#ccc",path:vi},Li)})}if(s[je]=Fu(Fu({},s[je]||{}),{id:je,collapsed:J,card:Oa,link:zr,x:Mr,y:En,cardBBox:Wa,content:Ar||_t,title:yn||lt,contentPlaceholder:Gn,titlePlaceholder:ga,isCanvas:Te}),o.set("cardInfoMap",s),c)this.updateCardPositionsInConatainer(),this.updateLinks();else{var ra=!isNaN(at)&&!isNaN(ut);if(!ti&&!Te&&!ra){var Ka=pi.bottom,$a=Ka===void 0?0:Ka,wi=pi.top;se[se.length-1].push({id:je,bbox:Wa}),Wa.top>$a-wi-Wa.height-16&&se.push([]),this.set("rows",se)}}this.updateCardSize(je);var Di=this.get("onAnnotationChange");Di==null||Di(s[je],ti?"update":"create")}},e.prototype.updateCardPositionsInConatainer=function(){if(!this.destroyed){var t=this.get("cardInfoMap");if(t){var r=this.get("container"),n=this.get("containerCfg").position,a=r.getBoundingClientRect().width,o=getComputedStyle(r),s=Rl(o.paddingLeft)+Rl(o.paddingRight);a-=s,Object.values(t).forEach(function(u){var f=u.card,c=f.getBoundingClientRect().width;switch(n){case"right":Ya(f,{marginLeft:a?"".concat(a-c,"px"):"0px"});break;case"top":case"bottom":Ya(f,{marginLeft:"8px"});default:break}})}}},e.prototype.handleExpandCollapseCard=function(t){if(!this.destroyed){var r=this.get("graph"),n=this.get("cardInfoMap");if(n){var a=n[t].collapsed,o=r.findById(t);if(o){var s=this.get("cardCfg").collapseType;s==="hide"&&!a?this.hideCard(t):this.toggleAnnotation(o,{collapsed:!a}),n[t]=Fu(Fu({},n[t]),{collapsed:!a})}}}},e.prototype.hideCard=function(t){if(!this.destroyed){var r=this.get("cardInfoMap");if(!(!r||!r[t])){var n=r[t],a=n.card,o=n.link;Ya(a,{display:"none"}),o==null||o.hide();var s=this.get("onAnnotationChange");s(r[t],"hide")}}},e.prototype.removeCard=function(t){if(!this.destroyed){var r=this.get("cardInfoMap");if(r){var n=r[t],a=n.card,o=n.link,s=this.get("container");s.removeChild(a),o==null||o.remove(!0),delete r[t];var u=this.get("onAnnotationChange");u(n,"remove")}}},e.prototype.bindListener=function(t,r){var n=this;if(!this.destroyed){t.addEventListener("mousemove",function(u){var f;if(u.target.className==="g6-annotation-collapse"?f="collapse":u.target.className==="g6-annotation-expand"?f="expand":u.target.className==="g6-annotation-close"&&(f="close"),f){var c=n.get("cardCfg").onMouseEnterIcon,l=c===void 0?function(){}:c;l(u,r,f)}}),t.addEventListener("mouseout",function(u){var f;if(u.target.className==="g6-annotation-collapse"?f="collapse":u.target.className==="g6-annotation-expand"?f="expand":u.target.className==="g6-annotation-close"&&(f="close"),f){var c=n.get("cardCfg").onMouseLeaveIcon,l=c===void 0?function(){}:c;l(u,r,f)}}),t.addEventListener("mouseenter",function(u){var f=n.get("cardInfoMap");if(f){var c=n.get("graph"),l=c.findById(r);if(l){var b=n.get("itemHighlightState");c.setItemState(l,b,!0)}var w=f[r].link;if(w){var I=n.get("linkHighlightStyle")||{};w.attr(I)}}}),t.addEventListener("mouseleave",function(u){var f=n.get("cardInfoMap");if(f){var c=n.get("graph"),l=c.findById(r);if(l){var b=n.get("itemHighlightState");c.setItemState(l,b,!1)}var w=f[r].link;if(w){var I=n.get("linkHighlightStyle")||{};Object.keys(I).forEach(function(H){w.attr(H,void 0),w.attr(H,void 0)});var W=n.get("linkStyle");w.attr(W)}}}),t.addEventListener("click",function(u){var f=(n.get("cardCfg")||{}).onClickIcon;if(u.target.className==="g6-annotation-collapse"||u.target.className==="g6-annotation-expand"){var c=n.get("cardCfg").collapseType;c==="hide"?n.hideCard(r):n.handleExpandCollapseCard(r),f==null||f(u,r,u.target.className==="g6-annotation-collapse"?"collapse":"expand")}else if(u.target.className==="g6-annotation-close"){var l=n.get("cardCfg").closeType;l==="remove"?n.removeCard(r):n.hideCard(r),f==null||f(u,r,"close")}});var a=this.get("editable");a&&t.addEventListener("dblclick",function(u){var f=n.get("cardInfoMap"),c=(n.get("cardCfg")||{}).maxTitleLength,l=c===void 0?20:c;if(f){var b=u.target,w=b.className;if(!(w!=="g6-annotation-title"&&w!=="g6-annotation-content")){var I=w==="g6-annotation-title"?b.getBoundingClientRect():b.parentNode.getBoundingClientRect(),W=I.width,H=I.height,J=getComputedStyle(b),at=w==="g6-annotation-title"?"input":"textarea",ut=Ji("<".concat(at,' class="').concat(w,'-input" type="textarea" style="width:').concat(W,"px; height: ").concat(H,'px; min-width: 16px;"/>')),lt=Ji('<div class="'.concat(w,'-input-wrapper" style="width: ').concat(W,"px; height: ").concat(H,"px; min-width: 16px; margin-right: ").concat(J.marginRight,'" />'));lt.appendChild(ut),b.parentNode.replaceChild(lt,b);var _t=f[r],Bt=_t.contentPlaceholder,Rt=_t.titlePlaceholder,Qt=_t.content,de=_t.title,se=Qt;w==="g6-annotation-title"?(ut.name="title",ut.maxLength=l,se=de):ut.name="content",se?(ut.innerHTML=b.innerHTML,ut.value=b.innerHTML):ut.placeholder=w==="g6-annotation-title"?Rt:Bt,ut.focus(),ut.addEventListener("blur",function(Te){ut.value&&(b.innerHTML=ut.value,_t[ut.name||"title"]=ut.value),lt.parentNode.replaceChild(b,lt),n.updateCardSize(r);var je=n.get("onAnnotationChange");je==null||je(_t,"update")})}}});var o=["g6-annotation-title","g6-annotation-content","g6-annotation-title-input","g6-annotation-content-input"];t.draggable=!0,t.addEventListener("dragstart",function(u){var f=u.target.className;if(!o.includes(f)){var c=t.style;n.set("dragging",{card:t,x:u.clientX,y:u.clientY,left:Rl(c.left),top:Rl(c.top)})}}),t.addEventListener("drag",function(u){u.preventDefault();var f=n.get("cardInfoMap");if(f){var c=u.clientX,l=u.clientY,b=n.get("dragging");if(!(isNaN(c)||isNaN(l)||!b)){var w=b.x,I=b.y,W=b.left,H=b.top,J=b.card,at=c-w,ut=l-I;W+=at,H+=ut;var lt=n.get("graph"),_t=lt.getPointByCanvas(0,0),Bt=lt.getPointByCanvas(lt.getWidth(),lt.getHeight()),Rt=lt.getClientByPoint(_t.x,_t.y),Qt=Rt.x,de=Rt.y,se=lt.getClientByPoint(Bt.x,Bt.y),Te=se.x,je=se.y,Dr=J.getBoundingClientRect(),Kr=Dr.right-Dr.left,zr=Dr.bottom-Dr.top;(W>Te-Qt-Kr&&at>0||W<0&&at<0)&&(W-=at),(H>je-de-zr&&ut>0||H<0&&ut<0)&&(H-=ut),Ya(J,{left:"".concat(W,"px"),top:"".concat(H,"px"),visibility:"hidden"}),w=c,I=l;var Mr=(f[r]||{}).link;if(Mr){var En=lt.findById(r);Mr.attr("path",Dd(En,Dr,lt,n.get("canvas")))}n.set("dragging",{x:w,y:I,left:W,top:H,card:J})}}});var s=function(f){var c=n.get("cardInfoMap");if(c){var l=n.get("dragging");if(l){var b=l.left,w=l.top,I=l.card;c[r].x=b,c[r].y=w,Ya(I,{visibility:"visible"}),n.set("dragging",!1);var W=n.get("rows");W==null||W.forEach(function(J){for(var at=J.length-1;at>=0;at--)J[at].id===r&&J.splice(at,1)});var H=n.get("onAnnotationChange");H==null||H(c[r],"update")}}};t.addEventListener("dragend",s)}},e.prototype.updateCardSize=function(t){var r=this.get("cardInfoMap");if(r){var n=r[t].card,a=n.getBoundingClientRect().width,o=n.getElementsByClassName("g6-annotation-title")[0];if(o){var s=getComputedStyle(o),u=Rl(s.marginLeft),f=o.getBoundingClientRect().width;Ya(o,{marginRight:"".concat(a-u-24-16-f,"px")})}}},e.prototype.updateLink=function(t){var r=t.item;if(r){var n=this.get("cardInfoMap");if(n){var a=this.get("canvas"),o=this.get("graph"),s=r.getID(),u=n[s]||{},f=u.link,c=u.card;if(f){var l=Dd(r,c.getBoundingClientRect(),o,a);f.attr("path",l)}}}},e.prototype.updateLinks=function(){var t=this;if(!this.destroyed){var r=this.get("cardInfoMap");if(r){var n=this.get("graph");Object.values(r).forEach(function(a){var o=a.id,s=n.findById(o);t.updateLink({item:s})})}}},e.prototype.onGraphDataChange=function(){var t=this,r=this.get("cardInfoMap");if(r){var n=this.get("graph");Object.values(r).forEach(function(a){var o=a.id,s=a.card,u=a.isCanvas;if(!(!s||u||s.style.display==="none")){var f=n.findById(o);f&&f.isVisible()?t.toggleAnnotation(f):t.hideCard(o)}})}},e.prototype.onGraphItemVisibilityChange=function(t){var r=t.item,n=t.visible;if(!(!r||r.destroyed)){var a=this.get("cardInfoMap");if(a){var o=r.getID();a[o]&&(n||this.hideCard(o))}}},e.prototype.saveData=function(t){t===void 0&&(t=!1);var r=this.get("cardInfoMap");if(r){var n=this.get("graph"),a=this.get("getTitle"),o=this.get("getContent"),s=[];return Object.values(r).forEach(function(u){var f=u.title,c=u.content,l=u.x,b=u.y,w=u.id,I=u.collapsed,W=u.card;if(!(W&&W.style.display==="none"&&!t)){var H=n.findById(w)||n.get("canvas");s.push({id:w,x:l,y:b,collapsed:I,title:f||(a==null?void 0:a(H)),content:c||(o==null?void 0:o(H)),visible:W&&W.style.display!=="none"})}}),s}},e.prototype.readData=function(t){var r=this,n=this.get("graph");t.forEach(function(a){var o=a.id,s=a.x,u=a.y,f=a.title,c=a.content,l=a.collapsed,b=a.visible,w=n.findById(o);if(!w&&o===Mp&&(w=n.get("canvas")),!w){var I=r.get("cardInfoMap")||{};I[o]=a,r.set("cardInfoMap",I);return}r.toggleAnnotation(w,{x:s,y:u,title:f,content:c,collapsed:l}),b||r.hideCard(o)})},e.prototype.clear=function(){var t=this.get("cardInfoMap");if(t){var r=this.get("container");Object.values(t).forEach(function(n){var a=n.card,o=n.link;r.removeChild(a),o==null||o.remove(!0)}),this.set("cardInfoMap",{})}},e.prototype.destroy=function(){var t;this.clear(),(t=this.get("canvas"))===null||t===void 0||t.destroy();var r=this.get("graph");!r||r.destroyed||(this.get("containerCfg")&&r.getContainer().removeChild(this.get("container")),this.destroyed=!0)},e}(nu),c2=f2,l2=function(e,t){var r,n,a,o=1/0;Object.keys(e).forEach(function(f){var c=e[f];Object.keys(t).forEach(function(l){var b=t[l],w=c.x-b.x,I=c.y-b.y,W=w*w+I*I;o>W&&(o=W,r=c,n=b,a=[f,l])})});var s=20,u=_s.getControlPoint(r,n,.5,s);return[["M",r.x,r.y],["Q",u.x,u.y,n.x,n.y]]},Dd=function(e,t,r,n){var a,o,s=e.getType();if(s==="edge")o=[e.getKeyShape().getPoint(.5)];else{var u=(a=e.getKeyShape)===null||a===void 0?void 0:a.call(e).getBBox(),f=u.minX,c=u.minY,l=u.maxX,b=u.maxY,w=e.getModel(),I=w.x,W=w.y;f+=I,c+=W,l+=I,b+=W,o={left:{x:f,y:(c+b)/2},right:{x:l,y:(c+b)/2},top:{x:(f+l)/2,y:c},bottom:{x:(f+l)/2,y:b}}}Object.keys(o).forEach(function(de){var se=o[de],Te=se.x,je=se.y,Dr=r.getClientByPoint(Te,je);o[de]=n.getPointByClient(Dr.x,Dr.y)});var H=t.top,J=H===void 0?0:H,at=t.left,ut=at===void 0?0:at,lt=t.right,_t=lt===void 0?0:lt,Bt=t.bottom,Rt=Bt===void 0?0:Bt,Qt={left:n.getPointByClient(ut,(J+Rt)/2),right:n.getPointByClient(_t,(J+Rt)/2),top:n.getPointByClient((ut+_t)/2,J),bottom:n.getPointByClient((ut+_t)/2,Rt)};return l2(o,Qt)},Rl=function(e){return Number(e.replace(/\s+|px/gi,""))||0},h2={PluginBase:nu,Menu:Sb,Grid:bb,Minimap:Lb,Bundling:kb,ToolBar:Wb,Tooltip:Vb,Fisheye:Fb,TimeBar:Xw,ImageMinimap:Kw,EdgeFilterLens:Qw,SnapLine:n2,Legend:s2,Annotation:c2},v2=h2,Zo=v2;cc("circle",{options:{size:bn.defaultNode.size,style:{x:0,y:0,stroke:bn.defaultNode.style.stroke,fill:bn.defaultNode.style.fill,lineWidth:bn.defaultNode.style.lineWidth},labelCfg:{style:{fill:bn.nodeLabel.style.fill,fontSize:bn.nodeLabel.style.fontSize,fontFamily:bn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:bn.defaultNode.linkPoints.size,lineWidth:bn.defaultNode.linkPoints.lineWidth,fill:bn.defaultNode.linkPoints.fill,stroke:bn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,m.__assign)({},bn.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=(0,d.deepMix)({},n,e.icon),s="".concat(this.type,"-keyShape"),u=t.addShape("circle",{attrs:a,className:s,name:s,draggable:!0});t.shapeMap[s]=u;var f=o.width,c=o.height,l=o.show,b=o.text;if(l){var w="".concat(this.type,"-icon");b?t.shapeMap[w]=t.addShape("text",{attrs:(0,m.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:w,name:w,draggable:!0}):t.shapeMap[w]=t.addShape("image",{attrs:(0,m.__assign)({x:-f/2,y:-c/2},o),className:w,name:w,draggable:!0})}return this.drawLinkPoints(e,t),u},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints;if(r){var n=r||{},a=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,l=(0,m.__rest)(n,["top","left","right","bottom","size","r"]),b=this.getSize(e),w=b[0]/2;if(o){var I="link-point-left";t.shapeMap[I]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},l),{x:-w,y:0,r:f/2||c||5}),className:I,name:I,isAnchorPoint:!0})}if(s){var W="link-point-right";t.shapeMap[W]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},l),{x:w,y:0,r:f/2||c||5}),className:W,name:W,isAnchorPoint:!0})}if(a){var H="link-point-top";t.shapeMap[H]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},l),{x:0,y:-w,r:f/2||c||5}),className:H,name:H,isAnchorPoint:!0})}if(u){var J="link-point-bottom";t.shapeMap[J]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},l),{x:0,y:w,r:f/2||c||5}),className:J,name:J,isAnchorPoint:!0})}}},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,d.deepMix)({},t,r),a=this.getSize(e),o=a[0]/2,s=(0,m.__assign)({x:0,y:0,r:o},n);return s},update:function(e,t,r){var n=t.getContainer(),a=this.getSize(e),o=(0,m.__assign)({},e.style);e.style.stroke===void 0&&e.color&&(o.stroke=e.color),e.style.r===void 0&&!isNaN(a[0])&&(o.r=a[0]/2),this.updateShape(e,t,o,!0,r),this.updateLinkPoints(e,n)}},"single-node"),cc("rect",{options:{size:[100,30],style:{radius:0,stroke:bn.defaultNode.style.stroke,fill:bn.defaultNode.style.fill,lineWidth:bn.defaultNode.style.lineWidth},labelCfg:{style:{fill:bn.nodeLabel.style.fill,fontSize:bn.nodeLabel.style.fontSize,fontFamily:bn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:bn.defaultNode.linkPoints.size,lineWidth:bn.defaultNode.linkPoints.lineWidth,fill:bn.defaultNode.linkPoints.fill,stroke:bn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,m.__assign)({},bn.nodeStateStyles)},shapeType:"rect",labelPosition:"center",drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("rect",{attrs:r,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return t.shapeMap["".concat(this.type,"-keyShape")]=n,this.drawLinkPoints(e,t),n},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,l=(0,m.__rest)(n,["top","left","right","bottom","size","r"]),b=this.getSize(e),w=b[0],I=b[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},l),{x:-w/2,y:0,r:f/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},l),{x:w/2,y:0,r:f/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},l),{x:0,y:-I/2,r:f/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},l),{x:0,y:I/2,r:f/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,d.mix)({},t,r),a=this.getSize(e),o=n.width||a[0],s=n.height||a[1],u=(0,m.__assign)({x:-o/2,y:-s/2,width:o,height:s},n);return u},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getSize(e),s=t.get("keyShape");e.size||(o[0]=s.attr("width")||a.width,o[1]=s.attr("height")||a.height);var u={stroke:e.color,x:-o[0]/2,y:-o[1]/2,width:o[0],height:o[1]},f=(0,d.mix)({},a,s.attr(),u);f=(0,d.mix)(f,e.style),this.updateShape(e,t,f,!1,r),this.updateLinkPoints(e,n)}},"single-node"),cc("ellipse",{options:{size:[80,40],style:{x:0,y:0,stroke:bn.defaultNode.style.stroke,fill:bn.defaultNode.style.fill,lineWidth:bn.defaultNode.style.lineWidth},labelCfg:{style:{fill:bn.nodeLabel.style.fill,fontSize:bn.nodeLabel.style.fontSize,fontFamily:bn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:bn.defaultNode.linkPoints.size,lineWidth:bn.defaultNode.linkPoints.lineWidth,fill:bn.defaultNode.linkPoints.fill,stroke:bn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,m.__assign)({},bn.nodeStateStyles)},shapeType:"ellipse",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=t.addShape("ellipse",{attrs:a,className:"ellipse-keyShape",name:"ellipse-keyShape",draggable:!0});t.shapeMap["ellipse-keyShape"]=o;var s=n.width,u=n.height,f=n.show,c=n.text;return f&&(c?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,m.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,m.__assign)({x:-s/2,y:-u/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,l=(0,m.__rest)(n,["top","left","right","bottom","size","r"]),b=this.getSize(e),w=b[0]/2,I=b[1]/2;o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},l),{x:-w,y:0,r:f/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},l),{x:w,y:0,r:f/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},l),{x:0,y:-I,r:f/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},l),{x:0,y:I,r:f/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,d.mix)({},t,r),a=this.getSize(e),o=a[0]/2,s=a[1]/2,u=(0,m.__assign)({x:0,y:0,rx:o,ry:s},n);return u},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getSize(e),s={stroke:e.color,rx:o[0]/2,ry:o[1]/2},u=t.get("keyShape"),f=(0,d.mix)({},a,u.attr(),s);f=(0,d.mix)(f,e.style),this.updateShape(e,t,f,!0,r),this.updateLinkPoints(e,n)}},"single-node"),cc("diamond",{options:{size:[80,80],style:{stroke:bn.defaultNode.style.stroke,fill:bn.defaultNode.style.fill,lineWidth:bn.defaultNode.style.lineWidth},labelCfg:{style:{fill:bn.nodeLabel.style.fill,fontSize:bn.nodeLabel.style.fontSize,fontFamily:bn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:bn.defaultNode.linkPoints.size,lineWidth:bn.defaultNode.linkPoints.lineWidth,fill:bn.defaultNode.linkPoints.fill,stroke:bn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,m.__assign)({},bn.nodeStateStyles)},shapeType:"diamond",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=t.addShape("path",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=o;var s=n.width,u=n.height,f=n.show,c=n.text;return f&&(c?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,m.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,m.__assign)({x:-s/2,y:-u/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,l=(0,m.__rest)(n,["top","left","right","bottom","size","r"]),b=this.getSize(e),w=b[0],I=b[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},l),{x:-w/2,y:0,r:f/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},l),{x:w/2,y:0,r:f/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},l),{x:0,y:-I/2,r:f/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},l),{x:0,y:I/2,r:f/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getPath:function(e){var t=this.getSize(e),r=t[0],n=t[1],a=[["M",0,-n/2],["L",r/2,0],["L",0,n/2],["L",-r/2,0],["Z"]];return a},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,d.mix)({},t,r),a=this.getPath(e),o=(0,m.__assign)({path:a},n);return o},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},u=t.get("keyShape"),f=(0,d.mix)({},a,u.attr(),s);f=(0,d.mix)(f,e.style),this.updateShape(e,t,f,!0,r),this.updateLinkPoints(e,n)}},"single-node"),cc("triangle",{options:{size:40,direction:"up",style:{stroke:bn.defaultNode.style.stroke,fill:bn.defaultNode.style.fill,lineWidth:bn.defaultNode.style.lineWidth},labelCfg:{style:{fill:bn.nodeLabel.style.fill,fontSize:bn.nodeLabel.style.fontSize},offset:15},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:bn.defaultNode.linkPoints.size,lineWidth:bn.defaultNode.linkPoints.lineWidth,fill:bn.defaultNode.linkPoints.fill,stroke:bn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20,offset:6},stateStyles:(0,m.__assign)({},bn.nodeStateStyles)},shapeType:"triangle",labelPosition:"bottom",drawShape:function(e,t){var r=this.mergeStyle||this.getOptions(e),n=r.icon,a=n===void 0?{}:n,o=r.direction,s=this.getShapeStyle(e),u=e.direction||o,f=t.addShape("path",{attrs:s,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=f;var c=a.width,l=a.height,b=a.show,w=a.offset,I=a.text;if(b)if(I)t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,m.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},a),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0});else{var W=-c/2,H=-l/2;(u==="up"||u==="down")&&(H+=w),(u==="left"||u==="right")&&(W+=w),t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,m.__assign)({x:W,y:H},a),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})}return this.drawLinkPoints(e,t),f},drawLinkPoints:function(e,t){var r=this.mergeStyle||this.getOptions(e),n=r.linkPoints,a=n===void 0?{}:n,o=r.direction,s=e.direction||o,u=a.top,f=a.left,c=a.right,l=a.bottom,b=a.size,w=a.r,I=(0,m.__rest)(a,["top","left","right","bottom","size","r"]),W=this.getSize(e),H=W[0];if(f){var J=null,at=H*Math.sin(1/3*Math.PI),ut=H*Math.sin(1/3*Math.PI);s==="up"?J=[-ut,at]:s==="down"?J=[-ut,-at]:s==="left"&&(J=[-ut,ut-at]),J&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},I),{x:J[0],y:J[1],r:b/2||w||5}),className:"link-point-left",name:"link-point-left"}))}if(c){var lt=null,at=H*Math.sin(1/3*Math.PI),ut=H*Math.sin(1/3*Math.PI);s==="up"?lt=[ut,at]:s==="down"?lt=[ut,-at]:s==="right"&&(lt=[ut,ut-at]),lt&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},I),{x:lt[0],y:lt[1],r:b/2||w||5}),className:"link-point-right",name:"link-point-right"}))}if(u){var _t=null,at=H*Math.sin(1/3*Math.PI),ut=H*Math.sin(1/3*Math.PI);s==="up"?_t=[ut-at,-at]:s==="left"?_t=[ut,-at]:s==="right"&&(_t=[-ut,-at]),_t&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},I),{x:_t[0],y:_t[1],r:b/2||w||5}),className:"link-point-top",name:"link-point-top"}))}if(l){var Bt=null,at=H*Math.sin(1/3*Math.PI),ut=H*Math.sin(1/3*Math.PI);s==="down"?Bt=[-ut+at,at]:s==="left"?Bt=[ut,at]:s==="right"&&(Bt=[-ut,at]),Bt&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},I),{x:Bt[0],y:Bt[1],r:b/2||w||5}),className:"link-point-bottom",name:"link-point-bottom"}))}},getPath:function(e){var t=(this.mergeStyle||this.getOptions(e)).direction,r=e.direction||t,n=this.getSize(e),a=n[0],o=a*Math.sin(1/3*Math.PI),s=a*Math.sin(1/3*Math.PI),u=[["M",-s,o],["L",0,-o],["L",s,o],["Z"]];return r==="down"?u=[["M",-s,-o],["L",s,-o],["L",0,o],["Z"]]:r==="left"?u=[["M",-s,s-o],["L",s,-s],["L",s,s],["Z"]]:r==="right"&&(u=[["M",s,s-o],["L",-s,s],["L",-s,-s],["Z"]]),u},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,d.mix)({},t,r),a=this.getPath(e),o=(0,m.__assign)({path:a},n);return o},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},u=t.get("keyShape"),f=(0,d.mix)({},a,u.attr(),s);f=(0,d.mix)(f,e.style),this.updateShape(e,t,f,!0,r),this.updateLinkPoints(e,n)},updateLinkPoints:function(e,t){var r=this.getOptions({}),n=r.linkPoints,a=r.direction,o=e.direction||a,s=t.shapeMap["link-point-left"]||t.find(function(Mr){return Mr.get("className")==="link-point-left"}),u=t.shapeMap["link-point-right"]||t.find(function(Mr){return Mr.get("className")==="link-point-right"}),f=t.shapeMap["link-point-top"]||t.find(function(Mr){return Mr.get("className")==="link-point-top"}),c=t.shapeMap["link-point-bottom"]||t.find(function(Mr){return Mr.get("className")==="link-point-bottom"}),l=n,b=s||u||f||c;b&&(l=b.attr());var w=(0,d.mix)({},l,e.linkPoints),I=w.fill,W=w.stroke,H=w.lineWidth,J=w.size/2;J||(J=w.r);var at=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},ut=at.left,lt=at.right,_t=at.top,Bt=at.bottom,Rt=this.getSize(e),Qt=Rt[0],de={r:J,fill:I,stroke:W,lineWidth:H},se=null,Te=Qt*Math.sin(1/3*Math.PI),je=Qt*Math.sin(1/3*Math.PI);o==="up"?se=[-je,Te]:o==="down"?se=[-je,-Te]:o==="left"&&(se=[-je,je-Te]),se&&(s?!ut&&ut!==void 0?(s.remove(),delete t.shapeMap["link-point-left"]):s.attr((0,m.__assign)((0,m.__assign)({},de),{x:se[0],y:se[1]})):ut&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},de),{x:se[0],y:se[1]}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})));var Dr=null;o==="up"?Dr=[je,Te]:o==="down"?Dr=[je,-Te]:o==="right"&&(Dr=[je,je-Te]),Dr&&(u?!lt&&lt!==void 0?(u.remove(),delete t.shapeMap["link-point-right"]):u.attr((0,m.__assign)((0,m.__assign)({},de),{x:Dr[0],y:Dr[1]})):lt&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},de),{x:Dr[0],y:Dr[1]}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})));var Kr=null;o==="up"?Kr=[je-Te,-Te]:o==="left"?Kr=[je,-Te]:o==="right"&&(Kr=[-je,-Te]),Kr&&(f?!_t&&_t!==void 0?(f.remove(),delete t.shapeMap["link-point-top"]):f.attr((0,m.__assign)((0,m.__assign)({},de),{x:Kr[0],y:Kr[1]})):_t&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},de),{x:Kr[0],y:Kr[1]}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})));var zr=null;o==="down"?zr=[-je+Te,Te]:o==="left"?zr=[je,Te]:o==="right"&&(zr=[-je,Te]),zr&&(c?!Bt&&Bt!==void 0?(c.remove(),delete t.shapeMap["link-point-bottom"]):c.attr((0,m.__assign)((0,m.__assign)({},de),{x:zr[0],y:zr[1]})):Bt&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},de),{x:zr[0],y:zr[1]}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})))}},"single-node"),cc("modelRect",{options:{size:[185,70],style:{radius:5,stroke:"#69c0ff",fill:"#ffffff",lineWidth:bn.defaultNode.style.lineWidth,fillOpacity:1},labelCfg:{style:{fill:"#595959",fontSize:14,fontFamily:bn.windowFontFamily},offset:30},descriptionCfg:{style:{fontSize:12,fill:"#bfbfbf",fontFamily:bn.windowFontFamily},paddingTop:0},preRect:{show:!0,width:4,fill:"#40a9ff",radius:2},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:10,lineWidth:1,fill:"#72CC4A",stroke:"#72CC4A"},logoIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg",width:16,height:16,offset:0},stateIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg",width:16,height:16,offset:-5},anchorPoints:[[0,.5],[1,.5]]},shapeType:"modelRect",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).preRect,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=this.getSize(e),s=o[0],u=o[1],f=t.addShape("rect",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=f;var c=n.show,l=(0,m.__rest)(n,["show"]);return c&&(t.shapeMap["pre-rect"]=t.addShape("rect",{attrs:(0,m.__assign)({x:-s/2,y:-u/2,height:u},l),className:"pre-rect",name:"pre-rect",draggable:!0})),this.drawLogoIcon(e,t),this.drawStateIcon(e,t),this.drawLinkPoints(e,t),f},drawLogoIcon:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).logoIcon,n=r===void 0?{}:r,a=this.getSize(e),o=a[0];if(n.show){var s=n.width,u=n.height,f=n.x,c=n.y,l=n.offset,b=n.text,w=(0,m.__rest)(n,["width","height","x","y","offset","text"]);b?t.shapeMap["rect-logo-icon"]=t.addShape("text",{attrs:(0,m.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},w),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0}):t.shapeMap["rect-logo-icon"]=t.addShape("image",{attrs:(0,m.__assign)((0,m.__assign)({},w),{x:f||-o/2+s+l,y:c||-u/2,width:s,height:u}),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0})}},drawStateIcon:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).stateIcon,n=r===void 0?{}:r,a=this.getSize(e),o=a[0];if(n.show){var s=n.width,u=n.height,f=n.x,c=n.y,l=n.offset,b=n.text,w=(0,m.__rest)(n,["width","height","x","y","offset","text"]);b?t.shapeMap["rect-state-icon"]=t.addShape("text",{attrs:(0,m.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},w),className:"rect-state-icon",name:"rect-state-icon",draggable:!0}):t.shapeMap["rect-state-icon"]=t.addShape("image",{attrs:(0,m.__assign)((0,m.__assign)({},w),{x:f||o/2-s+l,y:c||-u/2,width:s,height:u}),className:"rect-state-icon",name:"rect-state-icon",draggable:!0})}},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,l=(0,m.__rest)(n,["top","left","right","bottom","size","r"]),b=this.getSize(e),w=b[0],I=b[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},l),{x:-w/2,y:0,r:f/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},l),{x:w/2,y:0,r:f/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},l),{x:0,y:-I/2,r:f/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},l),{x:0,y:I/2,r:f/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},drawLabel:function(e,t){var r=this.getOptions(e),n=r.labelCfg,a=n===void 0?{}:n,o=r.logoIcon,s=o===void 0?{}:o,u=r.descriptionCfg,f=u===void 0?{}:u,c=this.getSize(e),l=c[0],b=null,w=s.show,I=s.width,W=-l/2+a.offset;w&&(W=-l/2+I+a.offset);var H=a.style,J=f.style,at=f.paddingTop;return(0,d.isString)(e.description)?(b=t.addShape("text",{attrs:(0,m.__assign)((0,m.__assign)({},H),{x:W,y:-5,text:e.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),t.shapeMap["text-shape"]=b,t.shapeMap["rect-description"]=t.addShape("text",{attrs:(0,m.__assign)((0,m.__assign)({},J),{x:W,y:17+(at||0),text:e.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0})):(b=t.addShape("text",{attrs:(0,m.__assign)((0,m.__assign)({},H),{x:W,y:7,text:e.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),t.shapeMap["text-shape"]=b),b},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,d.mix)({},t,r),a=this.getSize(e),o=n.width||a[0],s=n.height||a[1],u=(0,m.__assign)({x:-o/2,y:-s/2,width:o,height:s},n);return u},update:function(e,t){var r=this.mergeStyle||this.getOptions(e),n=r.style,a=n===void 0?{}:n,o=r.labelCfg,s=o===void 0?{}:o,u=r.descriptionCfg,f=u===void 0?{}:u,c=this.getSize(e),l=c[0],b=c[1],w=t.get("keyShape");w.attr((0,m.__assign)((0,m.__assign)({},a),{x:-l/2,y:-b/2,width:l,height:b}));var I=t.getContainer(),W=I.shapeMap["rect-logo-icon"]||I.find(function(Oa){return Oa.get("className")==="rect-logo-icon"}),H=W?W.attr():{},J=(0,d.mix)({},H,e.logoIcon),at=J.width;at===void 0&&(at=this.options.logoIcon.width);var ut=e.logoIcon?e.logoIcon.show:void 0,lt=s.offset,_t=-l/2+at+lt;!ut&&ut!==void 0&&(_t=-l/2+lt);var Bt=I.shapeMap["node-label"]||I.find(function(Oa){return Oa.get("className")==="node-label"}),Rt=I.shapeMap["rect-description"]||I.find(function(Oa){return Oa.get("className")==="rect-description"});if(e.label)if(!Bt)I.shapeMap["node-label"]=I.addShape("text",{attrs:(0,m.__assign)((0,m.__assign)({},s.style),{x:_t,y:e.description?-5:7,text:e.label}),className:"node-label",name:"node-label",draggable:!0,labelRelated:!0});else{var Qt=e.labelCfg?e.labelCfg.style:{},de=(0,d.mix)({},Bt.attr(),Qt);e.label&&(de.text=e.label),de.x=_t,(0,d.isString)(e.description)&&(de.y=-5),Rt&&(Rt.resetMatrix(),Rt.attr({x:_t})),Bt.resetMatrix(),Bt.attr(de)}if((0,d.isString)(e.description)){var se=f.paddingTop;if(!Rt)I.shapeMap["rect-description"]=I.addShape("text",{attrs:(0,m.__assign)((0,m.__assign)({},f.style),{x:_t,y:17+(se||0),text:e.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0});else{var Qt=e.descriptionCfg?e.descriptionCfg.style:{},Te=(0,d.mix)({},Rt.attr(),Qt);(0,d.isString)(e.description)&&(Te.text=e.description),Te.x=_t,Rt.resetMatrix(),Rt.attr((0,m.__assign)((0,m.__assign)({},Te),{y:17+(se||0)}))}}var je=I.shapeMap["pre-rect"]||I.find(function(Oa){return Oa.get("className")==="pre-rect"});if(je&&!je.destroyed){var Dr=(0,d.mix)({},je.attr(),e.preRect);je.attr((0,m.__assign)((0,m.__assign)({},Dr),{x:-l/2,y:-b/2,height:b}))}if(W&&!W.destroyed)if(!ut&&ut!==void 0)W.remove(),delete I.shapeMap["pre-rect"];else{var Kr=J.width,zr=J.height,Mr=J.x,En=J.y,yn=J.offset,Ar=(0,m.__rest)(J,["width","height","x","y","offset"]);W.attr((0,m.__assign)((0,m.__assign)({},Ar),{x:Mr||-l/2+Kr+yn,y:En||-zr/2,width:Kr,height:zr}))}else ut&&this.drawLogoIcon(e,I);var Xr=I.shapeMap["rect-state-icon"]||I.find(function(Oa){return Oa.get("className")==="rect-state-icon"}),sn=Xr?Xr.attr():{},un=(0,d.mix)({},sn,e.stateIcon);if(Xr){!un.show&&un.show!==void 0&&(Xr.remove(),delete I.shapeMap["rect-state-icon"]);var An=un.width,zr=un.height,Mr=un.x,En=un.y,Gn=un.offset,ga=(0,m.__rest)(un,["width","height","x","y","offset"]);Xr.attr((0,m.__assign)((0,m.__assign)({},ga),{x:Mr||l/2-An+Gn,y:En||-zr/2,width:An,height:zr}))}else un.show&&this.drawStateIcon(e,I);this.updateLinkPoints(e,I)},getOptions:function(e,t){return t==="move"?e:(0,d.deepMix)({},this.options,this.getCustomConfig(e)||{},e)}},"single-node"),cc("star",{options:{size:60,style:{stroke:bn.defaultNode.style.stroke,fill:bn.defaultNode.style.fill,lineWidth:bn.defaultNode.style.lineWidth},labelCfg:{style:{fill:bn.nodeLabel.style.fill,fontSize:bn.nodeLabel.style.fontSize,fontFamily:bn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:bn.defaultNode.linkPoints.size,lineWidth:bn.defaultNode.linkPoints.lineWidth,fill:bn.defaultNode.linkPoints.fill,stroke:bn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,m.__assign)({},bn.nodeStateStyles)},shapeType:"star",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=t.addShape("path",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=o;var s=n.width,u=n.height,f=n.show,c=n.text;return f&&(c?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,m.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,m.__assign)({x:-s/2,y:-u/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.leftBottom,f=n.rightBottom,c=n.size,l=n.r,b=(0,m.__rest)(n,["top","left","right","leftBottom","rightBottom","size","r"]),w=this.getSize(e),I=w[0];if(s){var W=Math.cos(.1*Math.PI)*I,H=Math.sin((18+72*0)/180*Math.PI)*I;t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},b),{x:W,y:-H,r:c/2||l||5}),className:"link-point-right",name:"link-point-right"})}if(a){var W=Math.cos(.5*Math.PI)*I,H=Math.sin((18+72*1)/180*Math.PI)*I;t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},b),{x:W,y:-H,r:c/2||l||5}),className:"link-point-top",name:"link-point-top"})}if(o){var W=Math.cos(.9*Math.PI)*I,H=Math.sin((18+72*2)/180*Math.PI)*I;t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},b),{x:W,y:-H,r:c/2||l||5}),className:"link-point-left",name:"link-point-left"})}if(u){var W=Math.cos(1.3*Math.PI)*I,H=Math.sin((18+72*3)/180*Math.PI)*I;t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},b),{x:W,y:-H,r:c/2||l||5}),className:"link-point-left-bottom",name:"link-point-left-bottom"})}if(f){var W=Math.cos(1.7*Math.PI)*I,H=Math.sin((18+72*4)/180*Math.PI)*I;t.shapeMap["link-point-right-bottom"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},b),{x:W,y:-H,r:c/2||l||5}),className:"link-point-right-bottom",name:"link-point-right-bottom"})}},getPath:function(e){var t=this.getSize(e),r=t[0],n=r*3/8,a=e.innerR||n;return _s.getStarPath(r,a)},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,d.mix)({},t,r),a=this.getPath(e),o=(0,m.__assign)({path:a},n);return o},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},u=t.get("keyShape"),f=(0,d.mix)({},a,u.attr(),s);f=(0,d.mix)(f,e.style),this.updateShape(e,t,f,!0,r),this.updateLinkPoints(e,n)},updateLinkPoints:function(e,t){var r=this.getOptions({}).linkPoints,n=t.shapeMap["link-point-left"]||t.find(function(Te){return Te.get("className")==="link-point-left"}),a=t.shapeMap["link-point-right"]||t.find(function(Te){return Te.get("className")==="link-point-right"}),o=t.shapeMap["link-point-top"]||t.find(function(Te){return Te.get("className")==="link-point-top"}),s=t.shapeMap["link-point-left-bottom"]||t.find(function(Te){return Te.get("className")==="link-point-left-bottom"}),u=t.shapeMap["link-point-left-bottom"]||t.find(function(Te){return Te.get("className")==="link-point-right-bottom"}),f=r,c=n||a||o||s||u;c&&(f=c.attr());var l=(0,d.mix)({},f,e.linkPoints),b=l.fill,w=l.stroke,I=l.lineWidth,W=l.size/2;W||(W=l.r);var H=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,leftBottom:void 0,rightBottom:void 0},J=H.left,at=H.right,ut=H.top,lt=H.leftBottom,_t=H.rightBottom,Bt=this.getSize(e),Rt=Bt[0],Qt={r:W,fill:b,stroke:w,lineWidth:I},de=Math.cos((18+72*0)/180*Math.PI)*Rt,se=Math.sin((18+72*0)/180*Math.PI)*Rt;a?!at&&at!==void 0?(a.remove(),delete t.shapeMap["link-point-right"]):a.attr((0,m.__assign)((0,m.__assign)({},Qt),{x:de,y:-se})):at&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},Qt),{x:de,y:-se}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),de=Math.cos((18+72*1)/180*Math.PI)*Rt,se=Math.sin((18+72*1)/180*Math.PI)*Rt,o?!ut&&ut!==void 0?(o.remove(),delete t.shapeMap["link-point-top"]):o.attr((0,m.__assign)((0,m.__assign)({},Qt),{x:de,y:-se})):ut&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},Qt),{x:de,y:-se}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),de=Math.cos((18+72*2)/180*Math.PI)*Rt,se=Math.sin((18+72*2)/180*Math.PI)*Rt,n?!J&&J!==void 0?(n.remove(),delete t.shapeMap["link-point-left"]):n.attr((0,m.__assign)((0,m.__assign)({},Qt),{x:de,y:-se})):J&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},Qt),{x:de,y:-se}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),de=Math.cos((18+72*3)/180*Math.PI)*Rt,se=Math.sin((18+72*3)/180*Math.PI)*Rt,s?!lt&&lt!==void 0?(s.remove(),delete t.shapeMap["link-point-left-bottom"]):s.attr((0,m.__assign)((0,m.__assign)({},Qt),{x:de,y:-se})):lt&&(t.shapeMap["link-point-left-bottom"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},Qt),{x:de,y:-se}),className:"link-point-left-bottom",name:"link-point-left-bottom",isAnchorPoint:!0})),de=Math.cos((18+72*4)/180*Math.PI)*Rt,se=Math.sin((18+72*4)/180*Math.PI)*Rt,u?!_t&&_t!==void 0?(u.remove(),delete t.shapeMap["link-point-right-bottom"]):u.attr((0,m.__assign)((0,m.__assign)({},Qt),{x:de,y:-se})):_t&&(t.shapeMap["link-point-right-bottom"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},Qt),{x:de,y:-se}),className:"link-point-right-bottom",name:"link-point-right-bottom",isAnchorPoint:!0}))}},"single-node");var Ap=_s.defaultSubjectColors,Yh="fan-shape-";cc("donut",{options:{size:bn.defaultNode.size,style:{x:0,y:0,stroke:bn.defaultNode.style.stroke,fill:bn.defaultNode.style.fill,lineWidth:bn.defaultNode.style.lineWidth},labelCfg:{style:{fill:bn.nodeLabel.style.fill,fontSize:bn.nodeLabel.style.fontSize,fontFamily:bn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:bn.defaultNode.linkPoints.size,lineWidth:bn.defaultNode.linkPoints.lineWidth,fill:bn.defaultNode.linkPoints.fill,stroke:bn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,m.__assign)({},bn.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=(0,d.deepMix)({},n,e.icon),s=t.addShape("circle",{attrs:a,className:"".concat(this.type,"-keyShape"),draggable:!0,name:"".concat(this.type,"-keyShape")});t.shapeMap["".concat(this.type,"-keyShape")]=s;var u=o.width,f=o.height,c=o.show,l=o.text;return c&&(l?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,m.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,m.__assign)({x:-u/2,y:-f/2},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),d2(e,t,s),this.drawLinkPoints(e,t),s},updateShape:function(e,t,r,n,a){var o=t.get("keyShape");o.attr((0,m.__assign)({},r)),g2(e,t,o),this.updateLabel(e,t,a),n&&this.updateIcon(e,t)}},"circle");var d2=function(e,t,r){var n=e.donutAttrs,a=n===void 0?{}:n,o=e.donutColorMap,s=o===void 0?{}:o,u=Object.keys(a).length;if(a&&u>1){var f=Cp(a,s),c=f.configs,l=f.totalValue;if(l){var b=Tp(r),w=b.lineWidth,I=b.arcR,W=[I,0],H=0;if(u===1){Nd(t,{arcR:I,arcBegin:W,beginAngle:H,config:c[0],fanIndex:0,lineWidth:w,totalValue:l,drawWhole:!0});return}for(var J=0;J<c.length;J++){var at=Nd(t,{arcR:I,arcBegin:W,beginAngle:H,config:c[J],fanIndex:J,lineWidth:w,totalValue:l});if(at.shouldEnd)return;W=at.arcBegin,H=at.beginAngle}}}},Nd=function(e,t){var r=t.arcR,n=t.arcBegin,a=t.beginAngle,o=t.config,s=t.fanIndex,u=t.lineWidth,f=t.totalValue,c=t.drawWhole,l=c===void 0?!1:c,b=t.updateShape,w=b===void 0?void 0:b,I=o.value/f;if(I<.001)return{beginAngle:a,arcBegin:n,shape:void 0,shouldEnd:!1};var W,H,J;if(l||I>.999)W=[r,1e-4],J=1;else{var at=I*Math.PI*2;H=a+at,W=[r*Math.cos(H),-r*Math.sin(H)],J=at>Math.PI?1:0}var ut={path:[["M",n[0],n[1]],["A",r,r,0,J,0,W[0],W[1]]],stroke:o.color||(w==null?void 0:w.attr("stroke"))||Ap[s%Ap.length],lineWidth:u};return w?w.attr(ut):e.shapeMap["".concat(Yh).concat(s)]=e.addShape("path",{attrs:ut,name:"".concat(Yh).concat(s),draggable:!0}),{beginAngle:H,arcBegin:W,shape:e.shapeMap["".concat(Yh).concat(s)],shouldEnd:l||I>.999}},g2=function(e,t,r){var n=e.donutAttrs,a=e.donutColorMap,o=a===void 0?{}:a,s={},u=t.getContainer();if(n){var f=Cp(n,o),c=f.configs,l=f.totalValue;if(l)for(var b=Tp(r),w=b.lineWidth,I=b.arcR,W=[I,0],H=0,J=0;J<c.length;J++){var at="".concat(Yh).concat(J),ut=Nd(u,{arcR:I,arcBegin:W,beginAngle:H,config:c[J],fanIndex:J,lineWidth:w,totalValue:l,drawWhole:c.length===1,updateShape:u.shapeMap[at]});if(ut.shape&&(s[at]=!0),ut.shouldEnd)break;W=ut.arcBegin,H=ut.beginAngle}}var lt=Object.keys(u.shapeMap).filter(function(_t){return _t.includes(Yh)});lt.forEach(function(_t){s[_t]||(u.shapeMap[_t].remove(!0),delete u.shapeMap[_t])})},Cp=function(e,t){var r=0,n=[];return Object.keys(e).forEach(function(a){var o=+e[a];isNaN(o)||(n.push({key:a,value:o,color:t[a]}),r+=o)}),{totalValue:r,configs:n}},Tp=function(e){var t=e.attr("r"),r=.6*t,n=(t+r)/2,a=t-r;return{lineWidth:a,arcR:n}},Av=function(e){var t=e.x,r=e.y;return{x:t,y:r,centerX:t,centerY:r,minX:t,minY:r,maxX:t,maxY:r,height:0,width:0}},p2=function(e){e===void 0&&(e=[]);var t=[],r=[];e.forEach(function(u){t.push(u.x),r.push(u.y)});var n=Math.min.apply(Math,t),a=Math.max.apply(Math,t),o=Math.min.apply(Math,r),s=Math.max.apply(Math,r);return{centerX:(n+a)/2,centerY:(o+s)/2,maxX:a,maxY:s,minX:n,minY:o,height:s-o,width:a-n}},rS=function(e,t){return Math.abs(e.centerX-t.centerX)*2<e.width+t.width&&Math.abs(e.centerY-t.centerY)*2<e.height+t.height},Pd=function(e){for(var t=[],r={},n=e.length,a=n-1;a>=0;a--){var o=e[a];o.id="".concat(o.x,"|||").concat(o.y),r[o.id]||(r[o.id]=o,t.push(o))}return t},Ip=function(e){return Pd(e)},nS=function(e,t){return[e,{x:e.x,y:t.y},t]},Cv=function(e,t){return e.width||e.height?{centerX:e.centerX,centerY:e.centerY,minX:e.minX-t,minY:e.minY-t,maxX:e.maxX+t,maxY:e.maxY+t,height:e.height+2*t,width:e.width+2*t}:e},y2=function(e,t){var r=Math.abs(e.x-t.centerX),n=Math.abs(e.y-t.centerY);return r===0&&n===0?0:r/t.width>n/t.height},kd=function(e,t,r){var n=y2(t,e);if(n===0){var a=e.centerX,o=e.centerY;return r.y<t.y?o=e.minY:r.x>t.x?a=e.maxX:r.x<t.x?a=e.minX:r.x===t.x&&(o=e.maxY),{x:a,y:o}}return n?{x:t.x>e.centerX?e.maxX:e.minX,y:t.y}:{x:t.x,y:t.y>e.centerY?e.maxY:e.minY}},Op=function(e,t){var r=Math.min(e.minX,t.minX),n=Math.min(e.minY,t.minY),a=Math.max(e.maxX,t.maxX),o=Math.max(e.maxY,t.maxY);return{centerX:(r+a)/2,centerY:(n+o)/2,minX:r,minY:n,maxX:a,maxY:o,height:o-n,width:a-r}},Rd=function(e){return[{x:e.minX,y:e.minY},{x:e.maxX,y:e.minY},{x:e.maxX,y:e.maxY},{x:e.minX,y:e.maxY}]},Tv=function(e,t){var r=e.x,n=e.y;return r<t.minX||r>t.maxX||n<t.minY||n>t.maxY},m2=function(e,t){return t<e.minX||t>e.maxX?[]:[{x:t,y:e.minY},{x:t,y:e.maxY}]},x2=function(e,t){return t<e.minY||t>e.maxY?[]:[{x:e.minX,y:t},{x:e.maxX,y:t}]},b2=function(e,t){return m2(e,t.x).concat(x2(e,t.y))},Vh=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},E2=function(e,t){var r=-2,n=0;return t.forEach(function(a){a&&(e.x===a.x&&(n+=r),e.y===a.y&&(n+=r))}),n},Lp=function(e,t,r,n,a){return Vh(e,t)+Vh(e,r)+E2(e,[t,r,n,a])},w2=function i(e,t,r,n,a){a===void 0&&(a=0),e.unshift(t[n]),r[n]&&r[n]!==n&&a<=100&&i(e,t,r,r[n],a+1)},aS=function(e,t){var r=e.indexOf(t);r>-1&&e.splice(r,1)},Iv=function(e,t,r,n){var a=r.x-e.x,o=r.y-e.y,s=n.x-e.x,u=n.y-e.y,f=r.x-t.x,c=r.y-t.y,l=n.x-t.x,b=n.y-t.y,w=a*u-o*s,I=f*b-c*l,W=a*c-o*f,H=s*b-u*l;return w*I<=0&&W*H<=0},Bd=function(e,t,r){if(r.width||r.height){var n=Rd(r),a=n[0],o=n[1],s=n[2],u=n[3];return Iv(e,t,a,o)||Iv(e,t,a,u)||Iv(e,t,o,s)||Iv(e,t,s,u)}return!1},_2=function(e,t,r,n){var a=[];return e.forEach(function(o){if(o!==t&&(o.x===t.x||o.y===t.y)){if(Bd(o,t,r)||Bd(o,t,n))return;a.push(o)}}),Pd(a)},S2=function(e,t,r,n,a,o,s){var u,f=[],c=(u={},u[t.id]=t,u),l={},b={},w={};b[t.id]=0,w[t.id]=Lp(t,r,t);var I=new Pp;I.add({id:t.id,value:w[t.id]});var W={};e.forEach(function(_t){W[_t.id]=_t});for(var H;Object.keys(c).length;){var J=I.minId(!1);if(J)H=c[J];else break;if(H===r){var at=[];return w2(at,W,l,r.id),at}delete c[H.id],I.remove(H.id),f.push(H);var ut=_2(e,H,n,a),lt=function(Bt){Bt.forEach(function(Rt){if(f.indexOf(Rt)===-1){var Qt=Rt.id;c[Qt]||(c[Qt]=Rt);var de=w[H.id]+Vh(H,Rt);if(b[Qt]&&de>=b[Qt]){I.add({id:Qt,value:w[Qt]});return}l[Qt]=H.id,b[Qt]=de,w[Qt]=b[Qt]+Lp(Rt,r,t,o,s),I.add({id:Qt,value:w[Qt]})}})};lt(ut)}return[t,r]},M2=function(e,t,r){return!(e.x===t.x&&t.x===r.x||e.y===t.y&&t.y===r.y)},A2=function(e,t,r,n){var a=Vh(e,t),o=Vh(r,t);a<n&&(n=a),o<n&&(n=o);var s={x:t.x-n/a*(t.x-e.x),y:t.y-n/a*(t.y-e.y)},u={x:t.x-n/o*(t.x-r.x),y:t.y-n/o*(t.y-r.y)};return[s,u]},Dp=function(e,t){var r=[],n=e[0];return r.push("M".concat(n.x," ").concat(n.y)),e.forEach(function(a,o){var s=e[o+1],u=e[o+2];if(s&&u)if(M2(a,s,u)){var f=A2(a,s,u,t),c=f[0],l=f[1];r.push("L".concat(c.x," ").concat(c.y)),r.push("Q".concat(s.x," ").concat(s.y," ").concat(l.x," ").concat(l.y)),r.push("L".concat(l.x," ").concat(l.y))}else r.push("L".concat(s.x," ").concat(s.y));else s&&r.push("L".concat(s.x," ").concat(s.y))}),r.join("")},Np=function(e,t,r,n,a){var o,s;if(!r||!r.getType())o=Av(e);else if(r.getType()==="combo"){var u=r.getKeyShape().getBBox();if(u){var f=r.getModel(),c=f.x,l=f.y;o={x:c,y:l,width:u.width,height:u.height,minX:u.minX+c,maxX:u.maxX+c,minY:u.minY+l,maxY:u.maxY+l},o.centerX=(o.minX+o.maxX)/2,o.centerY=(o.minY+o.maxY)/2}else o=Av(e)}else o=r&&r.getBBox();if(!n||!n.getType())s=Av(t);else if(n.getType()==="combo"){var b=n.getKeyShape().getBBox();if(b){var w=n.getModel(),I=w.x,W=w.y;s={x:I,y:W,width:b.width,height:b.height,minX:b.minX+I,maxX:b.maxX+I,minY:b.minY+W,maxY:b.maxY+W},s.centerX=(s.minX+s.maxX)/2,s.centerY=(s.minY+s.maxY)/2}else s=Av(t)}else s=n&&n.getBBox();var H=Cv(o,a),J=Cv(s,a),at=kd(H,e,t),ut=kd(J,t,e),lt=p2([at,ut]),_t=Op(H,lt),Bt=Op(J,lt),Rt=[];Rt=Rt.concat(Rd(_t)).concat(Rd(Bt));var Qt={x:(e.x+t.x)/2,y:(e.y+t.y)/2};[lt,_t,Bt].forEach(function(se){Rt=Rt.concat(b2(se,Qt).filter(function(Te){return Tv(Te,H)&&Tv(Te,J)}))}),[{x:at.x,y:ut.y},{x:ut.x,y:at.y}].forEach(function(se){Tv(se,H)&&Tv(se,J)&&Rt.push(se)}),Rt.unshift(at),Rt.push(ut),Rt=Pd(Rt);var de=S2(Rt,at,ut,o,s,e,t);return de.unshift(e),de.push(t),Ip(de)},C2=function(e){if(!(e!=null&&e.length))return e;for(var t=e[e.length-1],r={x:t.x,y:t.y},n=[t],a=[t],o=e.length-2;o>=0;o--){var s=e[o];if(s.x===r.x?n.push(s):(n=[s],r.x=s.x),s.y===r.y?a.push(s):(a=[s],r.y=s.y),n.length>2){var u=e.indexOf(n[1]);u>-1&&e.splice(u,1);continue}if(a.length>2){var u=e.indexOf(a[1]);u>-1&&e.splice(u,1)}}return e},Pp=function(){function i(){this.arr=[],this.map={},this.arr=[],this.map={}}return i.prototype._innerAdd=function(e,t){for(var r=[0,t-1];r[1]-r[0]>1;){var n=Math.floor((r[0]+r[1])/2);if(this.arr[n].value>e.value)r[1]=n;else if(this.arr[n].value<e.value)r[0]=n;else{this.arr.splice(n,0,e),this.map[e.id]=!0;return}}this.arr.splice(r[1],0,e),this.map[e.id]=!0},i.prototype.add=function(e){delete this.map[e.id];var t=this.arr.length;if(!t){this.arr.push(e),this.map[e.id]=!0;return}if(this.arr[t-1].value<e.value){this.arr.push(e),this.map[e.id]=!0;return}this._innerAdd(e,t)},i.prototype.remove=function(e){this.map[e]&&delete this.map[e]},i.prototype._clearAndGetMinId=function(){for(var e,t=this.arr.length-1;t>=0;t--)this.map[this.arr[t].id]?e=this.arr[t].id:this.arr.splice(t,1);return e},i.prototype._findFirstId=function(){for(;this.arr.length;){var e=this.arr.shift();if(this.map[e.id])return e.id}},i.prototype.minId=function(e){return e?this._clearAndGetMinId():this._findFirstId()},i}(),T2=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},I2=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},O2=function(e,t){return[e,t]},L2=function(e,t,r,n,a){return Ip(Np(e,t,r,n,a.offset))},D2={offset:20,maxAllowedDirectionChange:Math.PI/2,maximumLoops:2e3,gridSize:10,directions:[{stepX:1,stepY:0},{stepX:-1,stepY:0},{stepX:0,stepY:1},{stepX:0,stepY:-1}],get penalties(){return{0:0,45:this.gridSize/2,90:this.gridSize/2}},distFunc:T2,fallbackRoute:L2},iS={maxAllowedDirectionChange:Math.PI/4,directions:[{stepX:1,stepY:0},{stepX:1,stepY:1},{stepX:0,stepY:1},{stepX:-1,stepY:1},{stepX:-1,stepY:0},{stepX:-1,stepY:-1},{stepX:0,stepY:-1},{stepX:1,stepY:-1}],distFunc:I2,fallbackRoute:O2},pc=function(e,t){var r=Math.round(Math.abs(e/t)),n=e<0?-1:1;return r<0?0:n*r},N2=function(e,t,r){var n={};return e.forEach(function(a){if(a)for(var o=Cv(a.getBBox(),r),s=pc(o.minX,t);s<=pc(o.maxX,t);s+=1)for(var u=pc(o.minY,t);u<=pc(o.maxY,t);u+=1)n["".concat(s,"|||").concat(u)]=!0}),n},Fd=function(e,t){var r=t.x-e.x,n=t.y-e.y;return r||n?Math.atan2(n,r):0},kp=function(e,t){var r=Math.abs(e-t);return r>Math.PI?2*Math.PI-r:r},Rp=function(e,t,r){for(var n=1/0,a=0,o=t.length;a<o;a++){var s=r(e,t[a]);s<n&&(n=s)}return n},Bp=function(e,t,r,n,a){var o=[];if(!r)return[e];var s=a.directions,u=a.offset,f=r.getBBox(),c=t.x>f.minX&&t.x<f.maxX&&t.y>f.minY&&t.y<f.maxY,l=Cv(f,u);for(var b in l)l[b]=pc(l[b],a.gridSize);if(c){for(var w=0,I=s;w<I.length;w++)for(var W=I[w],H=[[{x:l.minX,y:l.minY},{x:l.maxX,y:l.minY}],[{x:l.minX,y:l.minY},{x:l.minX,y:l.maxY}],[{x:l.maxX,y:l.minY},{x:l.maxX,y:l.maxY}],[{x:l.minX,y:l.maxY},{x:l.maxX,y:l.maxY}]],b=0;b<4;b++){var J=H[b],at=_s.getLineIntersect(e,{x:e.x+W.stepX*l.width,y:e.y+W.stepY*l.height},J[0],J[1]);at&&!Bd(e,at,f)&&(at.id="".concat(at.x,"|||").concat(at.y),o.push(at))}return o}var ut=kd(l,e,n);return ut.id="".concat(ut.x,"|||").concat(ut.y),[ut]},Gd=function(e,t,r,n){var a=Fd(e,t),o=r[e.id];if(!o){var s=Fd(n,e);return kp(s,a)}var u=Fd({x:o.x,y:o.y},e);return kp(u,a)},P2=function(e,t,r,n,a,o,s){var u=[n],f=n,c=e.id,l=e.x,b=e.y,w={x:l,y:b,id:c};Gd(w,o,t,r)&&(f={x:o.x===n.x?n.x:w.x*s,y:o.y===n.y?n.y:w.y*s},u.unshift(f));for(var I=t[c];I&&I.id!==c;){var W={x:l,y:b,id:c},H={x:I.x,y:I.y,id:I.id},J=Gd(H,W,t,r);J&&(f={x:H.x===W.x?f.x:H.x*s,y:H.y===W.y?f.y:H.y*s},u.unshift(f)),c=H.id,l=H.x,b=H.y,I=t[c]}return u[0].x=l===r.x?a.x:f.x,u[0].y=b===r.y?a.y:f.y,u.unshift(a),u},k2=function(e,t,r,n,a){if(isNaN(e.x)||isNaN(t.x))return[];var o=(0,d.deepMix)(D2,a);o.obstacles=o.obstacles||[];var s=o.penalties,u=o.gridSize,f=N2(o.obstacles.concat([r,n]),u,o.offset),c={x:pc(e.x,u),y:pc(e.y,u)},l={x:pc(t.x,u),y:pc(t.y,u)};e.id="".concat(c.x,"|||").concat(c.y),t.id="".concat(l.x,"|||").concat(l.y);var b=Bp(c,e,r,l,o),w=Bp(l,t,n,c,o);b.forEach(function(Ar){delete f[Ar.id]}),w.forEach(function(Ar){delete f[Ar.id]});for(var I={},W={},H={},J={},at={},ut=new Pp,lt=0;lt<b.length;lt++){var _t=b[lt];I[_t.id]=_t,J[_t.id]=0,at[_t.id]=Rp(_t,w,o.distFunc),ut.add({id:_t.id,value:at[_t.id]})}var Bt=o.maximumLoops,Rt,Qt,de,se,Te,je,Dr=1/0,Kr={};for(w.forEach(function(Ar){Kr["".concat(Ar.x,"|||").concat(Ar.y)]=!0}),Object.keys(I).forEach(function(Ar){var Xr=I[Ar].id;at[Xr]<=Dr&&(Dr=at[Xr],Rt=I[Xr])});Object.keys(I).length>0&&Bt>0;){var zr=ut.minId((Bt+1)%30===0);if(zr)Rt=I[zr];else break;if(Kr["".concat(Rt.x,"|||").concat(Rt.y)])return P2(Rt,H,c,t,e,l,u);delete I[Rt.id],ut.remove(Rt.id),W[Rt.id]=!0;for(var lt=0;lt<o.directions.length;lt++){Qt=o.directions[lt];var Mr="".concat(Math.round(Rt.x)+Qt.stepX,"|||").concat(Math.round(Rt.y)+Qt.stepY);if(de={x:Rt.x+Qt.stepX,y:Rt.y+Qt.stepY,id:Mr},!W[Mr]&&(je=Gd(Rt,de,H,c),!(je>o.maxAllowedDirectionChange)&&!f[Mr])){I[Mr]||(I[Mr]=de);var En=s[je];se=o.distFunc(Rt,de)+(isNaN(En)?u:En),Te=J[Rt.id]+se;var yn=J[Mr];yn&&Te>=yn||(H[Mr]=Rt,J[Mr]=Te,at[Mr]=Te+Rp(de,w,o.distFunc),ut.add({id:Mr,value:at[Mr]}))}}Bt-=1}return o.fallbackRoute(e,t,r,n,o)};Cg("polyline",{options:{color:bn.defaultEdge.color,size:bn.defaultEdge.size,style:{radius:0,offset:15,x:0,y:0,stroke:bn.defaultEdge.style.stroke,lineAppendWidth:bn.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:bn.edgeLabel.style.fill,fontSize:bn.edgeLabel.style.fontSize,fontFamily:bn.windowFontFamily}},routeCfg:{obstacles:[],maxAllowedDirectionChange:Math.PI,maximumLoops:500,gridSize:10},stateStyles:(0,m.__assign)({},bn.edgeStateStyles)},shapeType:"polyline",labelPosition:"center",drawShape:function(e,t){var r=this.getShapeStyle(e);r.radius===0&&delete r.radius;var n=t.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:r});return t.shapeMap["edge-shape"]=n,n},getShapeStyle:function(e){var t=this.options.style,r={stroke:e.color},n=(0,d.mix)({},t,r,e.style);e=this.getPathPoints(e),this.radius=n.radius,this.offset=n.offset;var a=e.startPoint,o=e.endPoint,s=this.getControlPoints(e),u=[a];s&&(u=u.concat(s)),u.push(o);var f=e.sourceNode,c=e.targetNode,l=n.radius,b=this.options.routeCfg,w=(0,d.mix)({},b,e.routeCfg);w.offset=n.offset;var I=this.getPath(u,f,c,l,w,!s);((0,d.isArray)(I)&&I.length<=1||(0,d.isString)(I)&&I.indexOf("L")===-1)&&(I="M0 0, L0 0"),(isNaN(a.x)||isNaN(a.y)||isNaN(o.x)||isNaN(o.y))&&(I="M0 0, L0 0");var W=(0,d.mix)({},bn.defaultEdge.style,n,{lineWidth:e.size,path:I});return W},updateShapeStyle:function(e,t){var r=t.getContainer();if(t.isVisible()){var n={stroke:e.color},a=r.shapeMap["edge-shape"]||r.find(function(lt){return lt.get("className")==="edge-shape"})||t.getKeyShape(),o=e.size;e=this.getPathPoints(e);var s=e.startPoint,u=e.endPoint,f=this.getControlPoints(e),c=[s];f&&(c=c.concat(f)),c.push(u);var l=a.attr(),b=(0,d.mix)({},n,l,e.style),w=e.sourceNode,I=e.targetNode,W=b.radius,H=this.options.routeCfg,J=(0,d.mix)({},H,e.routeCfg);J.offset=b.offset;var at=this.getPath(c,w,I,W,J,!f);((0,d.isArray)(at)&&at.length<=1||(0,d.isString)(at)&&at.indexOf("L")===-1)&&(at="M0 0, L0 0"),(isNaN(s.x)||isNaN(s.y)||isNaN(u.x)||isNaN(u.y))&&(at="M0 0, L0 0"),l.endArrow&&b.endArrow===!1&&(e.style.endArrow={path:""}),l.startArrow&&b.startArrow===!1&&(e.style.startArrow={path:""});var ut=(0,d.mix)(n,a.attr(),{lineWidth:o,path:at},e.style);a&&a.attr(ut)}},getPath:function(e,t,r,n,a,o){var s=a.offset,u=a.obstacles,f=a.simple;if(!s||e.length>2||o===!1){if(n)return Dp(e,n);var c=[];return(0,d.each)(e,function(I,W){W===0?c.push(["M",I.x,I.y]):c.push(["L",I.x,I.y])}),c}f!==!1&&!(u!=null&&u.length)&&(f=!0);var l=f?Np(e[e.length-1],e[0],r,t,s):k2(e[0],e[e.length-1],t,r,a);if(!l||!l.length)return"M0 0, L0 0";if(n){var b=Dp(l,n);return b}l=C2(l);var w=_s.pointsToPolygon(l);return w}},"single-edge");var Fp=vc.cloneEvent,Gp=vc.isNaN,zp=Math.abs,R2=10,B2=["shift","ctrl","alt","control"],F2={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,scalableRange:0,allowDragOnItem:!1}},getEvents:function(){return{mousedown:"onMouseDown",drag:"onDragMove",dragend:"onMouseUp","canvas:click":"onMouseUp",keyup:"onKeyUp",focus:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onMouseUp"}},updateViewport:function(e){var t=this.origin,r=+e.clientX,n=+e.clientY;if(!(Gp(r)||Gp(n))){var a=r-t.x,o=n-t.y;this.get("direction")==="x"?o=0:this.get("direction")==="y"&&(a=0),this.origin={x:r,y:n};var s=this.graph.get("width"),u=this.graph.get("height"),f=this.graph.get("canvas").getCanvasBBox(),c=this.scalableRange,l=this.scalableRange;c<1&&c>-1&&(c=s*c,l=u*l),(f.minX<=s+c&&f.minX+a>s+c||f.maxX+c>=0&&f.maxX+c+a<0)&&(a=0),(f.minY<=u+l&&f.minY+o>u+l||f.maxY+l>=0&&f.maxY+l+o<0)&&(o=0),this.graph.translate(a,o)}},onTouchStart:function(e){var t=this,r=e.originalEvent.touches,n=r[0],a=r[1];n&&a||(e.preventDefault(),this.mousedown=!0,t.onDragStart(e))},onMouseDown:function(e){this.mousedown=!0},onDragMove:function(e){this.mousedown&&(this.dragstart?this.onDrag(e):(this.dragstart=!0,this.onDragStart(e)))},onDragStart:function(e){var t=this,r=e.originalEvent;if(!(r&&e.name!=="touchstart"&&r.button!==0)&&!(e.name!=="touchstart"&&typeof window!="undefined"&&window.event&&!window.event.buttons&&!window.event.button)&&this.shouldBegin(e,this)&&!t.keydown&&this.allowDrag(e)){if(t.origin={x:e.clientX,y:e.clientY},t.dragging=!1,this.enableOptimize){for(var n=this.graph,a=n.getEdges(),o=0,s=a.length;o<s;o++){var u=a[o].get("group").get("children");u&&u.forEach(function(ut){ut.set("ori-visibility",ut.get("ori-visibility")||ut.get("visible")),ut.hide()})}for(var f=n.getNodes(),c=0,l=f.length;c<l;c++)for(var b=f[c].getContainer(),w=b.get("children"),I=0,W=w;I<W.length;I++){var H=W[I],J=H.get("isKeyShape");J||(H.set("ori-visibility",H.get("ori-visibility")||H.get("visible")),H.hide())}}if(typeof window!="undefined"){var at=this;this.handleDOMContextMenu=function(ut){return at.onMouseUp(ut)},document.body.addEventListener("contextmenu",this.handleDOMContextMenu)}}},onTouchMove:function(e){var t=this,r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a){this.onMouseUp(e);return}e.preventDefault(),t.onDrag(e)},onDrag:function(e){if(this.mousedown){var t=this.graph;if(!this.keydown&&this.allowDrag(e)&&(e=Fp(e),!!this.origin)){if(this.dragging)e.type="drag",t.emit("canvas:drag",e);else{if(zp(this.origin.x-e.clientX)+zp(this.origin.y-e.clientY)<R2)return;this.shouldBegin(e,this)&&(e.type="dragstart",t.emit("canvas:dragstart",e),this.originPosition={x:e.clientX,y:e.clientY},this.dragging=!0)}this.shouldUpdate(e,this)&&this.updateViewport(e)}}},onMouseUp:function(e){var t,r;this.mousedown=!1,this.dragstart=!1;var n=this.graph;if(!this.keydown){var a=n.getZoom(),o=n.get("modeController"),s=(r=(t=o==null?void 0:o.modes[o.mode])===null||t===void 0?void 0:t.filter(function(Rt){return Rt.type==="zoom-canvas"}))===null||r===void 0?void 0:r[0],u=s?s.optimizeZoom||.1:0;if(this.enableOptimize){for(var f=n.getEdges(),c=0,l=f.length;c<l;c++){var b=f[c].get("group").get("children");b&&b.forEach(function(Rt){var Qt=Rt.get("ori-visibility");Rt.set("ori-visibility",void 0),Qt&&Rt.show()})}if(a>u)for(var w=n.getNodes(),I=0,W=w.length;I<W;I++)for(var H=w[I].getContainer(),J=H.get("children"),at=0,ut=J;at<ut.length;at++){var lt=ut[at],_t=lt.get("isKeyShape");if(!_t){var Bt=lt.get("ori-visibility");lt.set("ori-visibility",void 0),Bt&&lt.show()}}}if(!this.dragging){this.origin=null;return}e=Fp(e),this.shouldEnd(e,this)&&this.updateViewport(e),e.type="dragend",e.dx=e.clientX-this.originPosition.x,e.dy=e.clientY-this.originPosition.y,n.emit("canvas:dragend",e),this.endDrag(),typeof window!="undefined"&&document.body.removeEventListener("contextmenu",this.handleDOMContextMenu)}},endDrag:function(){this.origin=null,this.dragging=!1,this.dragbegin=!1,this.mousedown=!1,this.dragstart=!1},onKeyDown:function(e){var t=this,r=e.key;r&&(B2.indexOf(r.toLowerCase())>-1?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){this.keydown=!1,this.origin=null,this.dragging=!1,this.dragbegin=!1},allowDrag:function(e){var t,r,n=e.target,a=n&&n.isCanvas&&n.isCanvas();if((0,d.isBoolean)(this.allowDragOnItem)&&!this.allowDragOnItem&&!a)return!1;if((0,d.isObject)(this.allowDragOnItem)){var o=this.allowDragOnItem,s=o.node,u=o.edge,f=o.combo,c=(r=(t=e.item)===null||t===void 0?void 0:t.getType)===null||r===void 0?void 0:r.call(t);if(!s&&c==="node"||!u&&c==="edge"||!f&&c==="combo")return!1}return!0}},G2={getDefaultCfg:function(){return{updateEdge:!0,delegateStyle:{},enableDelegate:!1,onlyChangeComboSize:!1,comboActiveState:"",selectedState:"selected",enableOptimize:!1,enableDebounce:!1,enableStack:!0}},getEvents:function(){return{"node:mousedown":"onMouseDown",drag:"onDragMove",dragend:"onDragEnd","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave","combo:drop":"onDropCombo","node:drop":"onDropNode","canvas:drop":"onDropCanvas",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onDragEnd",afterchangedata:"onDragEnd"}},validationCombo:function(e){if(!this.origin||!e||e.destroyed)return!1;var t=e.getType();return t==="combo"},onTouchStart:function(e){if(e.item){var t=this;try{var r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a)return;e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}this.mousedown={item:e.item,target:e.target,origin:{x:e.x,y:e.y}},this.dragstart=!0,t.onDragStart(e)}},onTouchMove:function(e){var t=this;try{var r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a){t.onDragEnd(e);return}e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}t.onDrag(e)},onMouseDown:function(e){this.mousedown={item:e.item,target:e.target,origin:{x:e.x,y:e.y}},typeof window!="undefined"&&!this.windowEventBinded&&(this.windowEventBinded=!0,document.body.addEventListener("contextmenu",this.onDragEnd.bind(this)),document.body.addEventListener("mouseup",this.onDragEnd.bind(this)))},onDragMove:function(e){var t,r;if(((r=(t=e.item)===null||t===void 0?void 0:t.getType)===null||r===void 0?void 0:r.call(t))!=="node"){this.onDragEnd();return}this.mousedown&&(this.dragstart?this.onDrag((0,m.__assign)((0,m.__assign)({},e),this.mousedown)):(this.dragstart=!0,this.onDragStart(e)))},onDragStart:function(e){var t=this;if(this.currentShouldEnd=!0,!!this.shouldBegin((0,m.__assign)((0,m.__assign)({},e),this.mousedown),this)){var r=this.mousedown,n=r.item,a=r.target;if(!(!n||n.destroyed||n.hasLocked())){var o=n.getContainer();if(o.set("capture",!1),this.cachedCaptureItems||(this.cachedCaptureItems=[]),this.cachedCaptureItems.push(n),a){var s=a.get("isAnchorPoint");if(s)return}var u=this.graph;this.targets=[],this.targetCombo=null;var f=u.findAllByState("node",this.selectedState),c=n.get("id"),l=f.filter(function(w){var I=w.get("id");return c===I});if(l.length===0?this.targets.push(n):f.length>1?f.forEach(function(w){var I=w.hasLocked();I||t.targets.push(w)}):this.targets.push(n),this.graph.get("enabledStack")&&this.enableStack){var b=[];this.targets.forEach(function(w){var I=w.getModel(),W=I.x,H=I.y,J=I.id;b.push({x:W,y:H,id:J})}),this.set("beforeDragNodes",b)}this.hidenEdge={},this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(w){var I=w.getEdges();I.forEach(function(W){W.isVisible()&&(t.hidenEdge[W.getID()]=!0,W.hide())})}),this.origin=this.mousedown.origin,this.point={},this.originPoint={}}}},onDrag:function(e){var t=this;if(!(!this.mousedown||!this.origin)&&this.shouldUpdate(e,this))if(this.get("enableDelegate"))this.updateDelegate(e);else if(this.enableDebounce)this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:e,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos});else{var r={};this.targets.map(function(n){t.update(n,e);var a=n.getModel().comboId;a&&(r[a]=t.graph.findById(a))}),this.onlyChangeComboSize&&this.updateParentCombos()}},onDragEnd:function(e){var t=this,r;if(this.mousedown=!1,this.dragstart=!1,typeof window!="undefined"&&this.windowEventBinded&&(this.windowEventBinded=!1,document.body.removeEventListener("contextmenu",this.onDragEnd.bind(this)),document.body.removeEventListener("mouseup",this.onDragEnd.bind(this))),!!this.origin){(r=this.cachedCaptureItems)===null||r===void 0||r.forEach(function(o){var s=o.getContainer();s.set("capture",!0)}),this.cachedCaptureItems=[],this.delegateRect&&(this.delegateRect.remove(),this.delegateRect=null),this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(o){var s=o.getEdges();s.forEach(function(u){t.hidenEdge[u.getID()]&&u.show(),u.refresh()})}),this.hidenEdge={};var n=this.graph;if(n.get("enabledStack")&&this.enableStack){var a={before:{nodes:[],edges:[],combos:[]},after:{nodes:[],edges:[],combos:[]}};this.get("beforeDragNodes").forEach(function(o){a.before.nodes.push(o)}),this.targets.forEach(function(o){var s=o.getModel(),u=s.x,f=s.y,c=s.id;a.after.nodes.push({x:u,y:f,id:c})}),n.pushStack("update",(0,d.clone)(a))}n.emit("dragnodeend",{items:this.targets,targetItem:null}),this.point={},this.origin=null,this.originPoint={},this.targets.length=0,this.targetCombo=null}},onDropCombo:function(e){var t=e.item;if(this.currentShouldEnd=this.shouldEnd(e,t,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.currentShouldEnd||!this.validationCombo(t))){var r=this.graph;if(this.comboActiveState&&r.setItemState(t,this.comboActiveState,!1),this.targetCombo=t,this.onlyChangeComboSize)r.updateCombos();else{var n=t.getModel();this.targets.map(function(a){var o=a.getModel();o.comboId!==n.id&&r.updateComboTree(a,n.id)}),r.updateCombo(t)}r.emit("dragnodeend",{items:this.targets,targetItem:this.targetCombo})}},onDropCanvas:function(e){var t=this.graph;this.currentShouldEnd=this.shouldEnd(e,void 0,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.targets||this.targets.length===0||!this.currentShouldEnd)&&(this.onlyChangeComboSize?this.updateParentCombos():this.targets.map(function(r){var n=r.getModel();n.comboId&&t.updateComboTree(r)}))},onDropNode:function(e){if(!(!this.targets||this.targets.length===0)){var t=this,r=e.item,n=t.graph,a=r.getModel().comboId,o=a?n.findById(a):void 0;if(this.currentShouldEnd=this.shouldEnd(e,o,this),this.updatePositions(e,!this.currentShouldEnd),!!this.currentShouldEnd){if(this.onlyChangeComboSize)this.updateParentCombos();else if(a){var s=n.findById(a);t.comboActiveState&&n.setItemState(s,t.comboActiveState,!1),this.targets.map(function(u){var f=u.getModel();a!==f.comboId&&n.updateComboTree(u,a)}),n.updateCombo(s)}else this.targets.map(function(u){var f=u.getModel();f.comboId&&n.updateComboTree(u)});n.emit("dragnodeend",{items:this.targets,targetItem:r})}}},onDragEnter:function(e){var t=e.item;if(this.validationCombo(t)){var r=this.graph;this.comboActiveState&&r.setItemState(t,this.comboActiveState,!0)}},onDragLeave:function(e){var t=e.item;if(this.validationCombo(t)){var r=this.graph;this.comboActiveState&&r.setItemState(t,this.comboActiveState,!1)}},updatePositions:function(e,t){var r=this;!this.targets||this.targets.length===0||(this.get("enableDelegate")?this.enableDebounce?this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:e,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos}):t||this.targets.map(function(n){return r.update(n,e)}):this.targets.map(function(n){return r.update(n,e,t)}))},update:function(e,t,r){var n=this.origin,a=e.get("model"),o=e.get("id");this.point[o]||(this.point[o]={x:a.x||0,y:a.y||0});var s=t.x-n.x+this.point[o].x,u=t.y-n.y+this.point[o].y;r&&(s+=n.x-t.x,u+=n.y-t.y);var f={x:s,y:u};this.get("updateEdge")?this.graph.updateItem(e,f,!1):e.updatePosition(f)},debounceUpdate:(0,d.debounce)(function(i){var e=i.targets,t=i.graph,r=i.point,n=i.origin,a=i.evt,o=i.updateEdge,s=i.onlyChangeComboSize,u=i.updateParentCombos;e.map(function(f){var c=f.get("model"),l=f.get("id");r[l]||(r[l]={x:c.x||0,y:c.y||0});var b=a.x-n.x+r[l].x,w=a.y-n.y+r[l].y,I={x:b,y:w};o?t.updateItem(f,I,!1):f.updatePosition(I)}),s&&u(t,e)},50,!0),updateDelegate:function(e){var t=this.graph;if(this.delegateRect){var b=e.x-this.origin.x+this.originPoint.minX,w=e.y-this.origin.y+this.originPoint.minY;this.delegateRect.attr({x:b,y:w})}else{var r=t.get("group"),n=(0,d.deepMix)({},Ll.delegateStyle,this.delegateStyle),a=this.calculationGroupPosition(e),o=a.x,s=a.y,u=a.width,f=a.height,c=a.minX,l=a.minY;this.originPoint={x:o,y:s,width:u,height:f,minX:c,minY:l},this.delegateRect=r.addShape("rect",{attrs:(0,m.__assign)({width:u,height:f,x:o,y:s},n),name:"rect-delegate-shape"}),this.delegate=this.delegateRect,this.delegateRect.set("capture",!1)}},calculationGroupPosition:function(e){var t=this.targets;t.length===0&&t.push(e.item);for(var r=1/0,n=-1/0,a=1/0,o=-1/0,s=0;s<t.length;s++){var u=t[s],f=u.getBBox(),c=f.minX,l=f.minY,b=f.maxX,w=f.maxY;c<r&&(r=c),l<a&&(a=l),b>n&&(n=b),w>o&&(o=w)}var I=Math.floor(r),W=Math.floor(a),H=Math.ceil(n)-Math.floor(r),J=Math.ceil(o)-Math.floor(a);return{x:I,y:W,width:H,height:J,minX:r,minY:a}},updateParentCombos:function(e,t){var r=e||this.graph,n=t||this.targets,a={};n==null||n.forEach(function(o){var s=o.getModel().comboId;s&&(a[s]=r.findById(s))}),Object.values(a).forEach(function(o){o&&r.updateCombo(o)})}},Ov=null,z2={getDefaultCfg:function(){return{trigger:"mouseenter",activeState:"active",inactiveState:"inactive",resetSelected:!1,shouldClearStatusOnSecond:!1,shouldUpdate:function(){return!0}}},getEvents:function(){return this.get("trigger")==="mouseenter"?{"node:mouseenter":"setAllItemStates","combo:mouseenter":"setAllItemStates","node:mouseleave":"clearActiveState","combo:mouseleave":"clearActiveState"}:{"node:click":"setAllItemStates","combo:click":"setAllItemStates","canvas:click":"clearActiveState","node:touchstart":"setOnTouchStart","combo:touchstart":"setOnTouchStart","canvas:touchstart":"clearOnTouchStart"}},setOnTouchStart:function(e){var t=this;try{var r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a)return;e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}t.setAllItemStates(e)},clearOnTouchStart:function(e){var t=this;try{var r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a)return;e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}t.clearActiveState(e)},setAllItemStates:function(e){clearTimeout(this.timer),this.throttleSetAllItemStates(e,this)},clearActiveState:function(e){var t=this,r=this.shouldClearStatusOnSecond;r&&(Ov=null),this.timer=setTimeout(function(){t.throttleClearActiveState(e,t)},50)},throttleSetAllItemStates:(0,d.throttle)(function(i,e){var t=i.item,r=e.graph;if(!(!r||r.destroyed)&&(e.item=t,!!e.shouldUpdate(i.item,{event:i,action:"activate"},e))){var n=e.shouldClearStatusOnSecond,a=t.getModel().id;if(Ov===a&&n){e.throttleClearActiveState(i,e),Ov=null;return}for(var o=e.activeState,s=e.inactiveState,u=r.getNodes(),f=r.getCombos(),c=r.getEdges(),l=r.get("vedges"),b=u.length,w=f.length,I=c.length,W=l.length,H=e.inactiveItems||{},J=e.activeItems||{},at=0;at<b;at++){var ut=u[at],lt=ut.getID(),_t=ut.hasState("selected");e.resetSelected&&_t&&r.setItemState(ut,"selected",!1),J[lt]&&(r.setItemState(ut,o,!1),delete J[lt]),s&&!H[lt]&&(r.setItemState(ut,s,!0),H[lt]=ut)}for(var at=0;at<w;at++){var Bt=f[at],Rt=Bt.getID(),_t=Bt.hasState("selected");e.resetSelected&&_t&&r.setItemState(Bt,"selected",!1),J[Rt]&&(r.setItemState(Bt,o,!1),delete J[Rt]),s&&!H[Rt]&&(r.setItemState(Bt,s,!0),H[Rt]=Bt)}for(var at=0;at<I;at++){var Qt=c[at],de=Qt.getID();J[de]&&(r.setItemState(Qt,o,!1),delete J[de]),s&&!H[de]&&(r.setItemState(Qt,s,!0),H[de]=Qt)}for(var at=0;at<W;at++){var se=l[at],Te=se.getID();J[Te]&&(r.setItemState(se,o,!1),delete J[Te]),s&&!H[Te]&&(r.setItemState(se,s,!0),H[Te]=se)}if(t&&!t.destroyed){s&&(r.setItemState(t,s,!1),delete H[t.getID()]),J[t.getID()]||(r.setItemState(t,o,!0),J[t.getID()]=t);for(var je=t.getEdges(),Dr=je.length,at=0;at<Dr;at++){var Qt=je[at],de=Qt.getID(),Kr=void 0;Qt.getSource()===t?Kr=Qt.getTarget():Kr=Qt.getSource();var zr=Kr.getID();s&&H[zr]&&(r.setItemState(Kr,s,!1),delete H[zr]),J[zr]||(r.setItemState(Kr,o,!0),J[zr]=Kr),H[de]&&(r.setItemState(Qt,s,!1),delete H[de]),J[de]||(r.setItemState(Qt,o,!0),J[de]=Qt),Qt.toFront()}}e.activeItems=J,e.inactiveItems=H,n&&(Ov=t.getModel().id),r.emit("afteractivaterelations",{item:i.item,action:"activate"})}},50,{trailing:!0,leading:!0}),throttleClearActiveState:(0,d.throttle)(function(i,e){var t=e.get("graph");if(!(!t||t.destroyed)&&e.shouldUpdate(i.item,{event:i,action:"deactivate"},e)){var r=e.activeState,n=e.inactiveState,a=e.activeItems||{},o=e.inactiveItems||{};Object.values(a).filter(function(s){return!s.destroyed}).forEach(function(s){t.clearItemStates(s,r)}),Object.values(o).filter(function(s){return!s.destroyed}).forEach(function(s){t.clearItemStates(s,n)}),e.activeItems={},e.inactiveItems={},t.emit("afteractivaterelations",{item:i.item||e.get("item"),action:"deactivate"})}},50,{trailing:!0,leading:!0})},Lv=Math.min,Up=Math.max,Wp=Math.abs,Xp="shift",U2=["drag","shift","ctrl","alt","control"],W2={getDefaultCfg:function(){return{brushStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:Xp,includeEdges:!0,includeCombos:!1,selectOnCombo:!1,selectedEdges:[],selectedNodes:[],selectedCombos:[]}},getEvents:function(){return U2.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=Xp,console.warn("Behavior brush-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates"}:{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates",keyup:"onKeyUp",keydown:"onKeyDown"}},onMouseDown:function(e){var t=e.item,r=this.brush,n=this.selectOnCombo,a=(t==null?void 0:t.getType())==="combo";a&&!n||!a&&t||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates(),r||(r=this.createBrush()),this.originPoint={x:e.canvasX,y:e.canvasY},r.attr({width:0,height:0}),r.show(),this.dragging=!0)},onMouseMove:function(e){this.dragging&&(this.trigger!=="drag"&&!this.keydown||this.updateBrush(e))},onMouseUp:function(e){var t=this.graph;!this.brush&&!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.brush.remove(!0),this.brush=null,this.getSelectedNodes(e),this.dragging=!1)},clearStates:function(){var e=this,t=e.graph,r=e.selectedState,n=t.findAllByState("node",r),a=t.findAllByState("edge",r),o=t.findAllByState("combo",r);n.forEach(function(s){return t.setItemState(s,r,!1)}),a.forEach(function(s){return t.setItemState(s,r,!1)}),o.forEach(function(s){return t.setItemState(s,r,!1)}),this.selectedNodes=[],this.selectedEdges=[],this.selectedCombos=[],this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges,this.selectedCombos),t.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})},isBBoxCenterInRect:function(e,t,r,n,a){var o=e.getBBox();return o.centerX>=t&&o.centerX<=r&&o.centerY>=n&&o.centerY<=a},getSelectedNodes:function(e){var t=this,r=this,n=r.graph,a=r.originPoint,o=r.shouldUpdate,s=r.isBBoxCenterInRect,u=this.selectedState,f={x:e.x,y:e.y},c=n.getPointByCanvas(a.x,a.y),l=Lv(f.x,c.x),b=Up(f.x,c.x),w=Lv(f.y,c.y),I=Up(f.y,c.y),W=[],H=[];n.getNodes().forEach(function(ut){if(ut.isVisible()&&s(ut,l,b,w,I)&&o(ut,"select",t)){W.push(ut);var lt=ut.getModel();H.push(lt.id),n.setItemState(ut,u,!0)}});var J=[];this.includeEdges&&W.forEach(function(ut){var lt=ut.getOutEdges();lt.forEach(function(_t){if(_t.isVisible()){var Bt=_t.getModel(),Rt=Bt.source,Qt=Bt.target;H.includes(Rt)&&H.includes(Qt)&&o(_t,"select",t)&&(J.push(_t),n.setItemState(_t,t.selectedState,!0))}})});var at=[];this.includeCombos&&n.getCombos().forEach(function(ut){if(ut.isVisible()&&s(ut,l,b,w,I)&&o(ut,"select",t)){at.push(ut);var lt=ut.getModel();H.push(lt.id),n.setItemState(ut,u,!0)}}),this.selectedEdges=J,this.selectedNodes=W,this.selectedCombos=at,this.onSelect&&this.onSelect(W,J,at),n.emit("nodeselectchange",{selectedItems:{nodes:W,edges:J,combos:at},select:!0})},createBrush:function(){var e=this,t=e.graph.get("canvas").addShape("rect",{attrs:e.brushStyle,capture:!1,name:"brush-shape"});return this.brush=t,this.delegate=t,t},updateBrush:function(e){var t=this.originPoint;this.brush.attr({width:Wp(e.canvasX-t.x),height:Wp(e.canvasY-t.y),x:Lv(e.canvasX,t.x),y:Lv(e.canvasY,t.y)})},onKeyDown:function(e){var t=e.key;if(t){var r=this.trigger.toLowerCase(),n=t.toLowerCase();n===r||n==="control"&&r==="ctrl"||n==="ctrl"&&r==="control"?this.keydown=!0:this.keydown=!1}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.keydown=!1}},Yp="shift",X2=["shift","ctrl","alt","control"],Y2={getDefaultCfg:function(){return{multiple:!0,trigger:Yp,selectedState:"selected",selectNode:!0,selectEdge:!1,selectCombo:!0}},getEvents:function(){var e=this;return X2.indexOf(e.trigger.toLowerCase())>-1||(e.trigger=Yp,console.warn("Behavior click-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),e.multiple?{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick",keyup:"onKeyUp",keydown:"onKeyDown"}:{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick"}},onClick:function(e){var t=this,r=e.item;if(!(!r||r.destroyed)){var n=r.getType(),a=t.graph,o=t.keydown,s=t.multiple,u=t.shouldUpdate,f=t.shouldBegin;if(f(e,t)){if(!o||!s){var c=a.findAllByState("node",t.selectedState).concat(a.findAllByState("edge",t.selectedState)).concat(a.findAllByState("combo",t.selectedState));(0,d.each)(c,function(W){W!==r&&a.setItemState(W,t.selectedState,!1)})}var l=function(){switch(n){case"node":return t.selectNode;case"edge":return t.selectEdge;case"combo":return t.selectCombo;default:return!1}}();if(!l){var b=a.findAllByState("node",t.selectedState),w=a.findAllByState("edge",t.selectedState),I=a.findAllByState("combo",t.selectedState);a.emit("nodeselectchange",{selectedItems:{nodes:b,edges:w,combos:I},select:!1});return}if(r.hasState(t.selectedState)){u(e,t)&&a.setItemState(r,t.selectedState,!1);var b=a.findAllByState("node",t.selectedState),w=a.findAllByState("edge",t.selectedState),I=a.findAllByState("combo",t.selectedState);a.emit("nodeselectchange",{target:r,selectedItems:{nodes:b,edges:w,combos:I},select:!1})}else{u(e,t)&&a.setItemState(r,t.selectedState,!0);var b=a.findAllByState("node",t.selectedState),w=a.findAllByState("edge",t.selectedState),I=a.findAllByState("combo",t.selectedState);a.emit("nodeselectchange",{target:r,selectedItems:{nodes:b,edges:w,combos:I},select:!0})}}}},onCanvasClick:function(e){var t=this,r=this,n=r.graph,a=r.shouldBegin;if(a(e,this)){var o=n.findAllByState("node",this.selectedState);(0,d.each)(o,function(f){n.setItemState(f,t.selectedState,!1)});var s=n.findAllByState("edge",this.selectedState);(0,d.each)(s,function(f){n.setItemState(f,t.selectedState,!1)});var u=n.findAllByState("combo",this.selectedState);(0,d.each)(u,function(f){n.setItemState(f,t.selectedState,!1)}),n.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})}},onKeyDown:function(e){var t=this,r=e.key;r&&(r.toLowerCase()===this.trigger.toLowerCase()||r.toLowerCase()==="control"?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){var e=this;e.keydown=!1}},V2=Kt,Dv=.05,j2={getDefaultCfg:function(){return this.isFireFox=_0()==="firefox",{sensitivity:2,minZoom:void 0,maxZoom:void 0,enableOptimize:!1,optimizeZoom:.1,fixSelectedItems:{fixAll:!1,fixLineWidth:!1,fixLabel:!1,fixState:"selected"},animate:!1,animateCfg:{duration:500}}},getEvents:function(){var e=this.fixSelectedItems;return e.fixState||(e.fixState="selected"),e.fixAll&&(e.fixLineWidth=!0,e.fixLabel=!0),{wheel:"onWheel",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd"}},onTouchStart:function(e){var t=e.originalEvent.touches,r=t[0],n=t[1];e.preventDefault(),n&&(this.shouldBegin&&!this.shouldBegin(e,this)||(this.startPoint={pageX:r.pageX,pageY:r.pageY},this.moveable=!0,n&&(this.endPoint={pageX:n.pageX,pageY:n.pageY}),this.originScale=this.graph.getZoom()||this.currentScale||1))},onTouchMove:function(e){if(this.moveable){e.preventDefault();var t=e.originalEvent.touches,r=t[0],n=t[1];if(n){this.endPoint||(this.endPoint={pageX:n.pageX,pageY:n.pageY});var a=function(W,H){return Math.hypot(H.x-W.x,H.y-W.y)},o=a({x:r.pageX,y:r.pageY},{x:n.pageX,y:n.pageY})/a({x:this.startPoint.pageX,y:this.startPoint.pageY},{x:this.endPoint.pageX,y:this.endPoint.pageY}),s=this.originScale*o;this.currentScale=s;var u=this.get("minZoom")||this.graph.get("minZoom"),f=this.get("maxZoom")||this.graph.get("maxZoom");if(!(s>f||s<u)){var c=this.get("animate"),l=this.get("animateCfg"),b=this.graph.get("canvas"),w=b.getPointByClient(e.clientX,e.clientY);this.graph.zoomTo(s,{x:w.x,y:w.y},c,l),this.graph.emit("wheelzoom",e)}}}},onTouchEnd:function(){this.moveable=!1,this.endPoint=null},onWheel:function(e){var t=this,r=this,n=r.graph,a=r.fixSelectedItems;if(!(this.shouldBegin&&!this.shouldBegin(e,this))&&this.shouldUpdate(e,this)){e.preventDefault();var o=n.get("canvas"),s=o.getPointByClient(e.clientX,e.clientY),u=this.get("sensitivity"),f=n.getZoom(),c=f,l=f;this.isFireFox?e.deltaY>0||e.wheelDelta<0?c=1-Dv*u:c=1/(1-Dv*u):e.wheelDelta<0?c=1-Dv*u:c=1/(1-Dv*u),l=f*c;var b=this.get("minZoom")||n.get("minZoom"),w=this.get("maxZoom")||n.get("maxZoom");l>w?l=w:l<b&&(l=b);var I=this.get("enableOptimize");if(I){var W=this.get("optimizeZoom"),H=this.get("optimized"),J=n.getNodes(),at=n.getEdges(),ut=J.length,lt=at.length;if(!H){for(var _t=0;_t<ut;_t++){var Bt=J[_t];if(!Bt.destroyed)for(var Rt=Bt.get("group").get("children"),Qt=Rt.length,de=0;de<Qt;de++){var se=Rt[de];!se.destoryed&&!se.get("isKeyShape")&&(se.set("ori-visibility",se.get("ori-visibility")||se.get("visible")),se.hide())}}for(var Te=0;Te<lt;Te++)for(var je=at[Te],Rt=je.get("group").get("children"),Qt=Rt.length,de=0;de<Qt;de++){var se=Rt[de];se.set("ori-visibility",se.get("ori-visibility")||se.get("visible")),se.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var Dr=setTimeout(function(){var Va=n.getZoom(),hi=t.get("optimized");if(hi){t.set("optimized",!1);for(var Wa=0;Wa<ut;Wa++){var vi=J[Wa],Li=vi.get("group").get("children"),ra=Li.length;if(Va<W){var Ka=vi.getKeyShape(),$a=Ka.get("ori-visibility");Ka.set("ori-visibility",void 0),$a&&Ka.show()}else for(var Di=0;Di<ra;Di++){var Qa=Li[Di],$a=Qa.get("ori-visibility");Qa.set("ori-visibility",void 0),!Qa.get("visible")&&$a&&$a&&Qa.show()}}for(var ui=0;ui<lt;ui++){var oo=at[ui],Li=oo.get("group").get("children"),ra=Li.length;if(Va<W){var Ka=oo.getKeyShape(),$a=Ka.get("ori-visibility");Ka.set("ori-visibility",void 0),$a&&Ka.show()}else for(var Di=0;Di<ra;Di++){var Qa=Li[Di];if(!Qa.get("visible")){var $a=Qa.get("ori-visibility");Qa.set("ori-visibility",void 0),$a&&Qa.show()}}}}},100);this.set("timeout",Dr)}if(f<=1){var Kr=void 0,zr=void 0;if(a.fixAll||a.fixLineWidth||a.fixLabel){Kr=n.findAllByState("node",a.fixState),zr=n.findAllByState("edge",a.fixState);for(var Mr=f/l,En=Kr.length,yn=0;yn<En;yn++){var Bt=Kr[yn],Ar=Bt.getContainer(),Xr=Bt.getModel(),sn=Bt.getOriginStyle(),un=Bt.getStateStyle(a.fixState),An=Bt.get("shapeFactory").getShape(Xr.type).getStateStyle(a.fixState,Bt)[a.fixState];if(a.fixAll){if(l<=1){var Gn=(0,d.clone)(Ar.getMatrix());Gn||(Gn=[1,0,0,0,1,0,0,0,1]);var ga=Bt.getModel(),Oa=ga.x,gi=ga.y;Gn=V2(Gn,[["t",-Oa,-gi],["s",Mr,Mr],["t",Oa,gi]]),Ar.setMatrix(Gn)}}else for(var Rt=Ar.get("children"),Qt=Rt.length,de=0;de<Qt;de++){var se=Rt[de],ti=void 0,pi=void 0;if(a.fixLabel){var wi=se.get("type");if(wi==="text"){ti=se.attr("fontSize")||12;var ji=un[se.get("name")],Pi=An[se.get("name")],Gu=ji?ji.fontSize:12,$o=Pi?Pi.fontSize:12,zu=Gu||$o||12;if(l<=1&&se.attr("fontSize",zu/l),pi)break}}if(a.fixLineWidth&&se.get("isKeyShape")){pi=se.attr("lineWidth")||0;var qo=un.lineWidth||An.lineWidth||sn.lineWidth||0;if(l<=1&&se.attr("lineWidth",qo/l),ti)break}}}for(var Qo=zr.length,wu=0;wu<Qo;wu++)for(var je=zr[wu],Ar=je.getContainer(),Rt=Ar.get("children"),Xr=je.getModel(),un=je.getStateStyle(a.fixState),An=je.get("shapeFactory").getShape(Xr.type).getStateStyle(a.fixState,je)[a.fixState],Qt=Rt.length,de=0;de<Qt;de++){var se=Rt[de],ti=void 0,pi=void 0;if(a.fixLabel||a.fixAll){var wi=se.get("type");if(wi==="text"){ti=se.attr("fontSize")||12;var ji=un[se.get("name")],Pi=An[se.get("name")],Gu=ji?ji.fontSize:12,$o=Pi?Pi.fontSize:12,zu=Gu||$o||12;if(l<=1&&se.attr("fontSize",zu/l),pi)break}}if((a.fixLineWidth||a.fixAll)&&se.get("isKeyShape")){pi=se.attr("lineWidth")||0;var qo=un.lineWidth||An.lineWidth||1;if(l<=1&&se.attr("lineWidth",qo/l),ti)break}}}}var Ss=this.get("animate"),Hs=this.get("animateCfg");n.zoomTo(l,{x:s.x,y:s.y},Ss,Hs),n.emit("wheelzoom",e)}}},Vp={onMouseEnter:function(e){var t=e.item;this.currentTarget=t,this.showTooltip(e),this.graph.emit("tooltipchange",{item:e.item,action:"show"})},onMouseMove:function(e){if(!this.shouldUpdate(e,this)){this.hideTooltip();return}!this.currentTarget||e.item!==this.currentTarget||this.updatePosition(e)},onMouseLeave:function(e){this.shouldEnd(e,this)&&(this.hideTooltip(),this.graph.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null)},showTooltip:function(e){var t=this.container;if(!(!e.item||e.item.destroyed)){t||(t=this.createTooltip(this.graph.get("canvas")),this.container=t);var r=this.formatText(e.item.get("model"),e);t.innerHTML=r,Ya(this.container,{visibility:"visible"}),this.updatePosition(e)}},hideTooltip:function(){Ya(this.container,{visibility:"hidden"})},updatePosition:function(e){var t=this.get("shouldBegin"),r=this,n=r.width,a=r.height,o=r.container,s=r.graph;if(!t(e,this)){Ya(o,{visibility:"hidden"});return}var u=s.getPointByClient(e.clientX,e.clientY),f=s.getCanvasByPoint(u.x,u.y),c=f.x,l=f.y,b=o.getBoundingClientRect();c>n/2?c-=b.width:c+=this.offset,l>a/2?l-=b.height:l+=this.offset;var w="".concat(c,"px"),I="".concat(l,"px");Ya(this.container,{left:w,top:I,visibility:"visible"})},createTooltip:function(e){var t=e.get("el");t.style.position="relative";var r=Ji('<div class="g6-tooltip g6-'.concat(this.item,'-tooltip"></div>'));return t.parentNode.appendChild(r),Ya(r,{position:"absolute",visibility:"visible"}),this.width=e.get("width"),this.height=e.get("height"),this.container=r,this.graph.get("tooltips").push(r),r}},H2=(0,m.__assign)({getDefaultCfg:function(){return{item:"node",offset:12,formatText:function(t){return t.label}}},getEvents:function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},Vp),K2=(0,m.__assign)({getDefaultCfg:function(){return{item:"edge",offset:12,formatText:function(t){return"source: ".concat(t.source," target: ").concat(t.target)}}},getEvents:function(){return{"edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},Vp),jp="click",Z2=["click","dblclick"],$2={getDefaultCfg:function(){return{trigger:jp,onChange:function(){}}},getEvents:function(){var e,t;return Z2.includes(this.trigger)?t=this.trigger:(t=jp,console.warn("Behavior collapse-expand \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),e={},e["node:".concat(t)]="onNodeClick",e.touchstart="onNodeClick",e},onNodeClick:function(e){var t=this;if(this.trigger==="click"){if(this.timer){clearTimeout(this.timer),this.timer=0;return}this.timer=setTimeout(function(){t.toggle(e),clearTimeout(t.timer),t.timer=0},200)}else this.toggle(e)},toggle:function(e){var t=e.item;if(t){var r=this.graph.findDataById(t.get("id"));if(r){var n=r.children;if(!(!n||n.length===0)){var a=!r.collapsed;this.shouldBegin(e,a,this)&&(r.collapsed=a,t.getModel().collapsed=a,this.graph.emit("itemcollapsed",{item:e.item,collapsed:a}),this.shouldUpdate(e,a,this)&&(this.onChange(t,a,this),this.graph.layout()))}}}}},q2=vc.calculationItemsBBox,Q2=function i(e,t){if(t(e)!==!1&&e){var r=e.get("combos");if(r.length===0)return!1;(0,d.each)(r,function(n){i(n,t)})}},J2={getDefaultCfg:function(){return{enableDelegate:!1,delegateStyle:{},onlyChangeComboSize:!1,activeState:"",selectedState:"selected",enableStack:!0}},getEvents:function(){return{"combo:mousedown":"onMouseDown","combo:dragstart":"onDragStart","combo:drag":"onDrag","combo:dragend":"onDragEnd","combo:drop":"onDrop","node:drop":"onNodeDrop","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave"}},validationCombo:function(e){var t=e.item;if(!t||t.destroyed||!this.shouldUpdate(e,this))return!1;var r=t.getType();return r==="combo"},onMouseDown:function(e){this.origin={x:e.x,y:e.y}},onDragStart:function(e){var t=this,r=this.graph,n=e.item;if(this.currentShouldEnd=!0,!!this.validationCombo(e)){this.targets=[];var a=r.findAllByState("combo",this.selectedState),o=n.get("id"),s=a.filter(function(f){var c=f.get("id");return o===c});s.length===0?this.targets.push(n):this.targets=a;var u=[];this.targets.forEach(function(f){var c=f.getModel(),l=c.x,b=c.y,w=c.id;u.push({x:l,y:b,id:w})}),this.set("beforeDragItems",u),this.activeState&&this.targets.map(function(f){var c=f.getModel();if(c.parentId){var l=r.findById(c.parentId);l&&r.setItemState(l,t.activeState,!0)}}),this.point={},this.originPoint={},this.currentItemChildCombos=[],Q2(n,function(f){if(f.destroyed)return!1;var c=f.getModel();return t.currentItemChildCombos.push(c.id),!0})}},onDrag:function(e){var t=this;if(this.origin&&this.validationCombo(e))if(this.enableDelegate)this.updateDelegate(e);else{if(this.activeState){var r=this.graph,n=e.item,a=n.getModel(),o=r.getCombos(),s=n.getBBox(),u=s.centerX,f=s.centerY,c=s.width,l=o.filter(function(b){var w=b.getModel();return a.parentId,w.id!==a.id&&!t.currentItemChildCombos.includes(w.id)});l.map(function(b){var w=b.getBBox(),I=w.centerX,W=w.centerY,H=w.width,J=u-I,at=f-W,ut=2*Math.sqrt(J*J+at*at);c+H-ut>.8*c?r.setItemState(b,t.activeState,!0):r.setItemState(b,t.activeState,!1)})}(0,d.each)(this.targets,function(b){t.updateCombo(b,e)}),this.onlyChangeComboSize&&this.updateParentCombos()}},updatePositions:function(e,t){var r=this;(this.enableDelegate||t)&&(0,d.each)(this.targets,function(n){r.updateCombo(n,e,t)})},onDrop:function(e){var t=this,r=e.item;if(this.currentShouldEnd=this.shouldEnd(e,r,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.currentShouldEnd||!r||!this.targets||r.destroyed)){var n=this.graph,a=r.getModel();this.targets.map(function(o){var s=o.getModel();s.parentId!==a.id?(t.activeState&&n.setItemState(r,t.activeState,!1),t.onlyChangeComboSize?n.updateCombo(o):n.updateComboTree(o,a.id,!1)):n.updateCombo(r)}),this.end(r,e),this.endComparison=!0}},onNodeDrop:function(e){var t=this;if(!(!this.targets||this.targets.length===0)){var r=this.graph,n=e.item,a=n.getModel().comboId,o=a?r.findById(a):void 0;if(this.currentShouldEnd=this.shouldEnd(e,o,this),this.updatePositions(e,!this.currentShouldEnd),!!this.currentShouldEnd){var s;if(a){if(this.activeState){var u=r.findById(a);r.setItemState(u,this.activeState,!1)}this.targets.map(function(f){t.onlyChangeComboSize?r.updateCombo(f):a!==f.getID()&&(s=r.findById(a),a!==f.getModel().parentId&&r.updateComboTree(f,a,!1))})}else this.targets.map(function(f){if(t.onlyChangeComboSize)r.updateCombo(f);else{var c=f.getModel();c.comboId&&r.updateComboTree(f,void 0,!1)}});this.endComparison=!0,this.end(s,e)}}},onDragEnter:function(e){if(this.origin&&this.validationCombo(e)){var t=e.item,r=this.graph;this.activeState&&r.setItemState(t,this.activeState,!0)}},onDragLeave:function(e){if(this.origin&&this.validationCombo(e)){var t=e.item,r=this.graph;this.activeState&&r.setItemState(t,this.activeState,!1)}},onDragEnd:function(e){if(!(!this.targets||this.targets.length===0)){var t=e.item;this.currentShouldEnd&&this.updatePositions(e);var r=this.getParentCombo(t.getModel().parentId),n=this.graph;r&&this.activeState&&n.setItemState(r,this.activeState,!1),this.end(void 0,e)}},end:function(e,t){var r=this;if(this.origin){var n=this.graph;if(this.delegateShape){var a=n.get("delegateGroup");a.clear(),this.delegateShape=null}if(e&&this.activeState&&n.setItemState(e,this.activeState,!1),!e){var o=n.get("enabledStack")&&this.enableStack,s={before:{nodes:[],edges:[],combos:[].concat(this.get("beforeDragItems"))},after:{nodes:[],edges:[],combos:[]}};this.targets.map(function(u){if(!r.onlyChangeComboSize)n.updateComboTree(u,void 0,o);else{n.updateCombo(u);var f=u.getModel(),c=f.x,l=f.y,b=f.id;s.after.combos.push({x:c,y:l,id:b}),n.pushStack("update",s)}})}this.point=[],this.origin=null,this.originPoint=null,this.targets.length=0}},traverse:function(e,t,r){var n=this;if(r===void 0&&(r={}),t(e,r)!==!1&&e){var a=e.get("combos");(0,d.each)(a,function(s){n.traverse(s,t,r)});var o=e.get("nodes");(0,d.each)(o,function(s){n.traverse(s,t,r)})}},updateCombo:function(e,t,r){this.updateSingleItem(e,t,r);var n={};this.traverse(e,function(a,o){return a.destroyed?!1:(a.getEdges().forEach(function(s){return o[s.getID()]=s}),!0)},n),Object.values(n).forEach(function(a){return a.refresh()})},updateSingleItem:function(e,t,r){var n=this.origin,a=this.graph,o=e.getModel(),s=e.get("id");this.point[s]||(this.point[s]={x:o.x,y:o.y});var u=t.x-n.x+this.point[s].x,f=t.y-n.y+this.point[s].y;r&&(u+=n.x-t.x,f+=n.y-t.y),a.updateItem(e,{x:u,y:f},!1)},getParentCombo:function(e){var t=this.graph;if(e){var r=t.findById(e);if(r)return r}},updateDelegate:function(e){var t=this.graph;if(this.delegateShape){var b=e.x-this.origin.x+this.originPoint.minX,w=e.y-this.origin.y+this.originPoint.minY;this.delegateShape.attr({x:b,y:w})}else{var r=t.get("delegateGroup"),n=null;this.targets.length>1?n=q2(this.targets):n=this.targets[0].getBBox();var a=n.x,o=n.y,s=n.width,u=n.height,f=n.minX,c=n.minY;this.originPoint={x:a,y:o,width:s,height:u,minX:f,minY:c};var l=(0,m.__assign)((0,m.__assign)({},Ll.delegateStyle),this.delegateStyle);this.delegateShape=r.addShape("rect",{attrs:(0,m.__assign)({width:n.width,height:n.height,x:n.x,y:n.y},l),name:"combo-delegate-shape"}),this.delegateShape.set("capture",!1),this.delegate=this.delegateShape}},updateParentCombos:function(){var e=this,t=e.graph,r=e.targets,n={};r==null||r.forEach(function(a){var o=a.getModel().parentId;o&&(n[o]=t.findById(o))}),Object.values(n).forEach(function(a){a&&t.updateCombo(a)})}},Hp="dblclick",t_=["click","dblclick"],e_={getDefaultCfg:function(){return{trigger:Hp,relayout:!0}},getEvents:function(){var e,t;return t_.includes(this.trigger)?t=this.trigger:(t=Hp,console.warn("Behavior collapse-expand-group \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),e={},e["combo:".concat(t)]="onComboClick",e},onComboClick:function(e){var t=e.item,r=this,n=r.graph,a=r.relayout;if(!(!t||t.destroyed||t.getType()!=="combo")){var o=t.getModel(),s=o.id;s&&(n.collapseExpandCombo(s),a&&n.get("layout")?n.layout():n.refreshPositions())}}},r_=vc.isPolygonsIntersect,n_=vc.pathToPoints,Kp="shift",a_=["drag","shift","ctrl","alt","control"],i_=function(e,t){var r,n=e.getKeyShape();if(e.get("type")==="path")r=n_(n.attr("path"));else{var a=n.getCanvasBBox();r=[[a.minX,a.minY],[a.maxX,a.minY],[a.maxX,a.maxY],[a.minX,a.maxY]]}return r_(t,r)},o_={getDefaultCfg:function(){return{delegateStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},shouldDeselect:void 0,selectedState:"selected",trigger:Kp,includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return a_.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=Kp,console.warn("Behavior lasso-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd","canvas:click":"clearStates"}:{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd",keyup:"onKeyUp",keydown:"onKeyDown","canvas:click":"clearStates"}},onDragStart:function(e){var t=this.lasso,r=e.item;r||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates("dragstart"),t||(t=this.createLasso()),this.dragging=!0,this.originPoint={x:e.x,y:e.y},this.points.push(this.originPoint),t.show())},onDragMove:function(e){this.dragging&&(this.trigger!=="drag"&&!this.keydown||(this.points.push({x:e.x,y:e.y}),this.updateLasso(e)))},onDragEnd:function(e){!this.lasso&&!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.points.push(this.originPoint),this.getSelectedItems(),this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1)},getLassoPath:function(){var e=this.points,t=[];return e.length&&(e.forEach(function(r,n){n===0?t.push(["M",r.x,r.y]):t.push(["L",r.x,r.y])}),t.push(["L",e[0].x,e[0].y])),t},clearStates:function(e){e===void 0&&(e="canvas:click");var t=this,r=t.graph,n=t.selectedState,a=t.shouldDeselect,o=r.findAllByState("node",n),s=r.findAllByState("edge",n);(!a||a({action:e,nodes:o,edges:s}))&&(o.forEach(function(u){return r.setItemState(u,n,!1)}),s.forEach(function(u){return r.setItemState(u,n,!1)})),this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),this.selectedNodes=[],this.selectedEdges=[],r.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedItems:function(){var e=this,t=this,r=t.graph,n=t.shouldUpdate,a=this.points.map(function(c){return[r.getCanvasByPoint(c.x,c.y).x,r.getCanvasByPoint(c.x,c.y).y]}),o=this.selectedState,s=[],u=[];r.getNodes().forEach(function(c){if(c.isVisible()&&i_(c,a)&&n(c,"select",e)){s.push(c);var l=c.getModel();u.push(l.id),r.setItemState(c,o,!0)}});var f=[];this.includeEdges&&s.forEach(function(c){var l=c.getOutEdges();l.forEach(function(b){if(b.isVisible()){var w=b.getModel(),I=w.source,W=w.target;u.includes(I)&&u.includes(W)&&n(b,"select",e)&&(f.push(b),r.setItemState(b,e.selectedState,!0))}})}),this.selectedEdges=f,this.selectedNodes=s,this.onSelect&&this.onSelect(s,f),r.emit("nodeselectchange",{selectedItems:{nodes:s,edges:f},select:!0})},createLasso:function(){var e=this,t=e.graph.get("delegateGroup").addShape("path",{attrs:(0,m.__assign)({path:[]},e.delegateStyle),capture:!1,name:"lasso-shape"});return this.lasso=t,this.delegate=t,this.points=[],t},updateLasso:function(e){var t=this;this.lasso.attr({path:t.getLassoPath()})},onKeyDown:function(e){var t=e.key;t&&(t.toLowerCase()===this.trigger.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.lasso&&(this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1),this.keydown=!1}},Zp="click",s_=["click","drag"],$p=void 0,u_=["shift","ctrl","control","alt","meta",void 0],f_={getDefaultCfg:function(){return{trigger:Zp,key:$p,edgeConfig:{},getEdgeConfig:void 0}},getEvents:function(){var e=this;s_.indexOf(e.trigger.toLowerCase())>-1||(e.trigger=Zp,console.warn("Behavior create-edge \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click'\uFF0C'drag'")),e.key&&u_.indexOf(e.key.toLowerCase())===-1&&(e.trigger=$p,console.warn("Behavior create-edge \u7684 key \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'shift'\uFF0C'ctrl'\uFF0C'alt'\uFF0C'control'\uFF0C\u6216 undefined"));var t;return e.trigger==="drag"?t={"node:dragstart":"onClick","combo:dragstart":"onClick",drag:"updateEndPoint","node:drop":"onClick","combo:drop":"onClick",dragend:"onDragEnd"}:e.trigger==="click"&&(t={"node:click":"onClick",mousemove:"updateEndPoint","edge:click":"cancelCreating","canvas:click":"cancelCreating","combo:click":"onClick"}),e.key&&(t.keydown="onKeyDown",t.keyup="onKeyUp"),t},onDragEnd:function(e){var t=this;if(!(t.key&&!t.keydown)){var r=e.item;(!r||r.getID()===t.source||r.getType()!=="node")&&t.cancelCreating({item:t.edge,x:e.x,y:e.y})}},onClick:function(e){var t=this;if(!(t.key&&!t.keydown)){var r=e.item,n=t.graph,a=r.getModel(),o=t.getEdgeConfig;if(t.addingEdge&&t.edge){if(!t.shouldEnd(e,t))return;var s=void 0;o&&(0,d.isFunction)(o)?s=o({source:t.source,target:a.id},t):s=t.edgeConfig;var u=(0,m.__assign)({target:a.id},s);if(t.source===a.id&&(u.type="loop"),n.emit("beforecreateedge",{}),n.updateItem(t.edge,u,!1),n.get("enabledStack")){var f=(0,m.__assign)((0,m.__assign)({},t.edge.getModel()),{itemType:"edge"}),c={};c.edges=[f],n.pushStack("add",{before:{},after:c})}n.emit("aftercreateedge",{edge:t.edge}),t.edge.getKeyShape().set("capture",!0),t.edge=null,t.addingEdge=!1}else{if(!t.shouldBegin(e,t))return;var s=void 0;o&&(0,d.isFunction)(o)?s=o({source:a.id,target:a.id},t):s=t.edgeConfig,t.edge=n.addItem("edge",(0,m.__assign)({source:a.id,target:a.id},s),!1),t.source=a.id,t.addingEdge=!0,t.edge.getKeyShape().set("capture",!1)}}},updateEndPoint:function(e){var t=this;if(!(t.key&&!t.keydown)){t.edge&&t.edge.destroyed&&t.cancelCreating({item:t.edge});var r={x:e.x,y:e.y};if(!t.graph.findById(t.source)){t.addingEdge=!1;return}t.addingEdge&&t.edge&&t.graph.updateItem(t.edge,{target:r},!1)}},cancelCreating:function(e){var t,r,n=this;if(!(n.key&&!n.keydown)){var a=n.graph,o=e.item;if(n.addingEdge&&(n.edge===o||!((r=(t=e.target)===null||t===void 0?void 0:t.isCanvas)===null||r===void 0)&&r.call(t))){n.edge&&!n.edge.destroyed&&a.removeItem(n.edge,!1),n.edge=null,n.addingEdge=!1;return}}},onKeyDown:function(e){var t=this,r=e.key;r&&(r.toLowerCase()===t.key.toLowerCase()?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){var e=this;e.addingEdge&&e.edge&&(e.graph.removeItem(e.edge,!1),e.addingEdge=!1,e.edge=null),this.keydown=!1}},qp="ctrl",c_=["shift","ctrl","alt","control"],l_="1",h_={getDefaultCfg:function(){return{trigger:qp,combinedKey:l_,functionName:"fitView",functionParams:[]}},getEvents:function(){return c_.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=qp,console.warn("Behavior shortcuts-fit-view \u7684 trigger \u53C2\u6570 '".concat(this.trigger,"' \u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'"))),this.combinedKey===this.trigger&&(this.combinedKey=void 0),{keyup:"onKeyUp",keydown:"onKeyDown"}},onKeyDown:function(e){var t=e.key;if(t){var r=this.trigger.toLowerCase(),n=t.toLowerCase();this.triggerKeydown||(n===r||n==="control"&&r==="ctrl"||n==="ctrl"&&r==="control"?this.triggerKeydown=!0:this.triggerKeydown=!1);var a=this.graph;if(!a[this.functionName])return console.warn("Behavior shortcuts-fit-view \u7684 functionName \u53C2\u6570 '".concat(this.functionName,"' \u4E0D\u5408\u6CD5\uFF0C\u5B83\u4E0D\u662F Graph \u7684\u4E00\u4E2A\u51FD\u6570\u540D")),{};if(this.triggerKeydown&&!this.combinedKey){this.functionParams&&this.functionParams.length?a[this.functionName].apply(a,this.functionParams):a[this.functionName]();return}var o=this.combinedKey.toLowerCase();this.triggerKeydown&&(n===o||n==="control"&&o==="ctrl"||n==="ctrl"&&o==="control")&&(this.functionParams&&this.functionParams.length?a[this.functionName].apply(a,this.functionParams):a[this.functionName]())}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.triggerKeydown=!1}},v_=["shift","ctrl","alt","control","meta"],d_={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,zoomKey:"ctrl",scalableRange:0,allowDragOnItem:!0}},getEvents:function(){return(!this.zoomKey||v_.indexOf(this.zoomKey)===-1)&&(this.zoomKey="ctrl"),{wheel:"onWheel"}},onWheel:function(e){var t=this;if(this.allowDrag(e)){var r=this.graph,n=Array.isArray(this.zoomKey)?[].concat(this.zoomKey):[this.zoomKey];n.includes("control")&&n.push("ctrl");var a=n.some(function(Xr){return e["".concat(Xr,"Key")]});if(a){var o=r.get("canvas"),s=o.getPointByClient(e.clientX,e.clientY),u=r.getZoom();e.wheelDelta>0?u=u+u*.05:u=u-u*.05,r.zoomTo(u,{x:s.x,y:s.y})}else{var f=e.deltaX||e.movementX,c=e.deltaY||e.movementY;!c&&navigator.userAgent.indexOf("Firefox")>-1&&(c=-e.wheelDelta*125/3);var l=this.graph.get("width"),b=this.graph.get("height"),w=this.graph.get("canvas").getCanvasBBox(),I=this.scalableRange,W=this.scalableRange;I<1&&I>-1&&(I=l*I,W=b*W);var H=w.minX,J=w.maxX,at=w.minY,ut=w.maxY;f>0?J<-I?f=0:J-f<-I&&(f=J+I):f<0&&(H>l+I?f=0:H-f>l+I&&(f=H-(l+I))),c>0?ut<-W?c=0:ut-c<-W&&(c=ut+W):c<0&&(at>b+W?c=0:at-c>b+W&&(c=at-(b+W))),this.get("direction")==="x"?c=0:this.get("direction")==="y"&&(f=0),r.translate(-f,-c)}e.preventDefault();var lt=this.get("enableOptimize");if(lt){var _t=this.get("optimizeZoom"),Bt=this.get("optimized"),Rt=r.getNodes(),Qt=r.getEdges(),de=Rt.length,se=Qt.length;if(!Bt){for(var Te=0;Te<de;Te++){var je=Rt[Te];if(!je.destroyed)for(var Dr=je.get("group").get("children"),Kr=Dr.length,zr=0;zr<Kr;zr++){var Mr=Dr[zr];!Mr.destoryed&&!Mr.get("isKeyShape")&&(Mr.set("ori-visibility",Mr.get("ori-visibility")||Mr.get("visible")),Mr.hide())}}for(var En=0;En<se;En++)for(var yn=Qt[En],Dr=yn.get("group").get("children"),Kr=Dr.length,zr=0;zr<Kr;zr++){var Mr=Dr[zr];Mr.set("ori-visibility",Mr.get("ori-visibility")||Mr.get("visible")),Mr.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var Ar=setTimeout(function(){var Xr=r.getZoom(),sn=t.get("optimized");if(sn){t.set("optimized",!1);for(var un=0;un<de;un++){var An=Rt[un],Gn=An.get("group").get("children"),ga=Gn.length;if(Xr<_t){var Oa=An.getKeyShape(),gi=Oa.get("ori-visibility");gi&&Oa.show()}else for(var ti=0;ti<ga;ti++){var pi=Gn[ti],gi=pi.get("ori-visibility");!pi.get("visible")&&gi&&gi&&pi.show()}}for(var wi=0;wi<se;wi++){var ji=Qt[wi],Gn=ji.get("group").get("children"),ga=Gn.length;if(Xr<_t){var Oa=ji.getKeyShape(),gi=Oa.get("ori-visibility");gi&&Oa.show()}else for(var ti=0;ti<ga;ti++){var pi=Gn[ti];if(!pi.get("visible")){var gi=pi.get("ori-visibility");gi&&pi.show()}}}}},100);this.set("timeout",Ar)}}},allowDrag:function(e){var t,r,n=e.target,a=n&&n.isCanvas&&n.isCanvas();if((0,d.isBoolean)(this.allowDragOnItem)&&!this.allowDragOnItem&&!a)return!1;if((0,d.isObject)(this.allowDragOnItem)){var o=this.allowDragOnItem,s=o.node,u=o.edge,f=o.combo,c=(r=(t=e.item)===null||t===void 0?void 0:t.getType)===null||r===void 0?void 0:r.call(t);if(!s&&c==="node"||!u&&c==="edge"||!f&&c==="combo")return!1}return!0}},g_={"drag-canvas":F2,"zoom-canvas":j2,"drag-node":G2,"activate-relations":z2,"brush-select":W2,"click-select":Y2,"lasso-select":o_,tooltip:H2,"edge-tooltip":K2,"collapse-expand":$2,"drag-combo":J2,"collapse-expand-combo":e_,"create-edge":f_,"shortcuts-call":h_,"scroll-canvas":d_};(0,d.each)(g_,function(i,e){Tg(e,i)});var p_=(0,m.__assign)((0,m.__assign)({},G),fm),oS=Zo.Grid,sS=Zo.Minimap,uS=Zo.Bundling,fS=Zo.Menu,y_=Zo.Fisheye,cS=Zo.ToolBar,lS=Zo.Tooltip,m_=Zo.TimeBar,x_=Zo.ImageMinimap,b_=Zo.EdgeFilterLens,E_=Zo.SnapLine,hS=Zo.Legend,w_=Zo.Annotation,Qp={version:Ll.version,Graph:I0,TreeGraph:pb,Util:vc,Layout:Za.Layouts,TreeLayout:Jx,registerLayout:tb,Global:Ll,registerBehavior:Tg,registerCombo:um,registerEdge:Cg,registerNode:cc,Minimap:Zo.Minimap,Grid:Zo.Grid,Bundling:Zo.Bundling,Menu:Zo.Menu,ToolBar:Zo.ToolBar,Tooltip:Zo.Tooltip,Legend:Zo.Legend,TimeBar:m_,SnapLine:E_,Fisheye:y_,ImageMinimap:x_,EdgeFilterLens:b_,Annotation:w_,Algorithm:p_,Arrow:wg,Marker:_g,Shape:jc};Qp.version="4.8.23";var __=Qp,vS="4.8.23"},199905:function(He,F,z){"use strict";z.r(F),z.d(F,{Graph:function(){return q},GraphWithEvent:function(){return ee},algorithm:function(){return G},comparision:function(){return R},essence:function(){return X},generate:function(){return L}});var G={};z.r(G),z.d(G,{components:function(){return xe},dfs:function(){return Wt},dijkstra:function(){return Or},dijkstraAll:function(){return Sr},findCycles:function(){return Nn},floydWarshall:function(){return wt},isAcyclic:function(){return ft},postorder:function(){return k},preorder:function(){return C},prim:function(){return ae},tarjan:function(){return Rr},topsort:function(){return la}});var X={};z.r(X),z.d(X,{hasSelfLoop:function(){return Aa},isGraph:function(){return Rn},isNullGraph:function(){return Ga},isSimpleGraph:function(){return Jn}});var R={};z.r(R),z.d(R,{containAllSameEdges:function(){return mr},containAllSameNodes:function(){return ir},containSameEdges:function(){return Me},containSameNodes:function(){return Pt},getSameEdges:function(){return Ke},getSameNodes:function(){return ve},isGraphComplement:function(){return an},isGraphContainsAnother:function(){return Xe},isGraphOptionSame:function(){return br},isGraphSame:function(){return Mn}});var L={};z.r(L),z.d(L,{getGraphComplement:function(){return Vn}});var P;(function(me){me.DEFAULT_EDGE_NAME="\0",me.GRAPH_NODE="\0",me.EDGE_KEY_DELIM=""})(P||(P={}));function N(me,Dt){var fe=me.get(Dt)||0;me.set(Dt,fe+1)}function E(me,Dt){var fe=me.get(Dt);fe!==void 0&&(fe=fe-1,fe>0?me.set(Dt,fe):me.delete(Dt))}function x(me,Dt,fe,Ae){var be=String(Dt),De=String(fe);if(!me&&be>De){var sr=be;be=De,De=sr}return be+P.EDGE_KEY_DELIM+De+P.EDGE_KEY_DELIM+(Ae===void 0?P.DEFAULT_EDGE_NAME:Ae)}function p(me,Dt,fe,Ae){var be=String(Dt),De=String(fe),sr={v:Dt,w:fe};if(!me&&be>De){var Fr=sr.v;sr.v=sr.w,sr.w=Fr}return Ae!==void 0&&(sr.name=Ae),sr}function y(me,Dt){return x(me,Dt.v,Dt.w,Dt.name)}function g(me){return typeof me=="function"}var A=function(Dt){return Dt.nodes().map(function(fe){var Ae=Dt.node(fe),be=Dt.parent(fe),De={id:fe,value:Ae,parent:be};return De.value===void 0&&delete De.value,De.parent===void 0&&delete De.parent,De})},_=function(Dt){return Dt.edges().map(function(fe){var Ae=Dt.edge(fe),be={v:fe.v,w:fe.w,value:Ae,name:fe.name};return be.name===void 0&&delete be.name,be.value===void 0&&delete be.value,be})},S=function(Dt){var fe={options:{directed:Dt.isDirected(),multigraph:Dt.isMultigraph(),compound:Dt.isCompound()},nodes:A(Dt),edges:_(Dt),value:Dt.graph()};return fe.value===void 0&&delete fe.value,fe},O=function(Dt){var fe=new q(Dt.options);return Dt.value!==void 0&&fe.setGraph(Dt.value),Dt.nodes.forEach(function(Ae){fe.setNode(Ae.id,Ae.value),Ae.parent&&fe.setParent(Ae.id,Ae.parent)}),Dt.edges.forEach(function(Ae){fe.setEdge(Ae.v,Ae.w,Ae.value,Ae.name)}),fe};function B(me,Dt){var fe=Object.keys(me);if(Object.getOwnPropertySymbols){var Ae=Object.getOwnPropertySymbols(me);Dt&&(Ae=Ae.filter(function(be){return Object.getOwnPropertyDescriptor(me,be).enumerable})),fe.push.apply(fe,Ae)}return fe}function m(me){for(var Dt=1;Dt<arguments.length;Dt++){var fe=arguments[Dt]!=null?arguments[Dt]:{};Dt%2?B(Object(fe),!0).forEach(function(Ae){d(me,Ae,fe[Ae])}):Object.getOwnPropertyDescriptors?Object.defineProperties(me,Object.getOwnPropertyDescriptors(fe)):B(Object(fe)).forEach(function(Ae){Object.defineProperty(me,Ae,Object.getOwnPropertyDescriptor(fe,Ae))})}return me}function d(me,Dt,fe){return Dt in me?Object.defineProperty(me,Dt,{value:fe,enumerable:!0,configurable:!0,writable:!0}):me[Dt]=fe,me}function tt(me,Dt){if(!(me instanceof Dt))throw new TypeError("Cannot call a class as a function")}function Y(me,Dt){for(var fe=0;fe<Dt.length;fe++){var Ae=Dt[fe];Ae.enumerable=Ae.enumerable||!1,Ae.configurable=!0,"value"in Ae&&(Ae.writable=!0),Object.defineProperty(me,Ae.key,Ae)}}function V(me,Dt,fe){return Dt&&Y(me.prototype,Dt),fe&&Y(me,fe),Object.defineProperty(me,"prototype",{writable:!1}),me}var $={compound:!1,multigraph:!1,directed:!0},q=function(){function me(){var Dt=this,fe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};tt(this,me),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=P.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return Dt.directed},this.isMultigraph=function(){return Dt.multigraph},this.isCompound=function(){return Dt.compound},this.setGraph=function(be){return Dt.label=be,Dt},this.graph=function(){return Dt.label},this.setDefaultNodeLabel=function(be){return g(be)?Dt.defaultNodeLabelFn=be:Dt.defaultNodeLabelFn=function(){return be},Dt},this.nodeCount=function(){return Dt.nodeCountNum},this.node=function(be){return Dt.nodesLabelMap.get(be)},this.nodes=function(){return Array.from(Dt.nodesLabelMap.keys())},this.sources=function(){return Dt.nodes().filter(function(be){var De;return!(!((De=Dt.inEdgesMap.get(be))===null||De===void 0)&&De.size)})},this.sinks=function(){return Dt.nodes().filter(function(be){var De;return!(!((De=Dt.outEdgesMap.get(be))===null||De===void 0)&&De.size)})},this.setNodes=function(be,De){return be.map(function(sr){return Dt.setNode(sr,De)}),Dt},this.hasNode=function(be){return Dt.nodesLabelMap.has(be)},this.checkCompound=function(){if(!Dt.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(be){if(Dt.isCompound()){var De,sr=(De=Dt.parentMap)===null||De===void 0?void 0:De.get(be);if(sr!==Dt.GRAPH_NODE)return sr}},this.removeFromParentsChildList=function(be){var De=Dt.parentMap.get(be);Dt.childrenMap.get(De).delete(be)},this.setParent=function(be,De){var sr,Fr;Dt.checkCompound();for(var Jr=De===void 0?Dt.GRAPH_NODE:De,Pn=Dt.parent(Jr);Pn;){if(be===Pn)throw new Error("Setting "+De+" as parent of "+be+" would create a cycle");Pn=Dt.parent(Pn)}De&&Dt.setNode(De),Dt.setNode(be),Dt.removeFromParentsChildList(be),(sr=Dt.parentMap)===null||sr===void 0||sr.set(be,Jr);var Bn=Dt.childrenMap.get(Jr);return Bn.set(be,!0),(Fr=Dt.childrenMap)===null||Fr===void 0||Fr.set(Jr,Bn),Dt},this.children=function(be){var De=be===void 0?Dt.GRAPH_NODE:be;if(Dt.isCompound()){var sr,Fr=(sr=Dt.childrenMap)===null||sr===void 0?void 0:sr.get(De);return Fr?Array.from(Fr.keys()):void 0}if(De===Dt.GRAPH_NODE)return Dt.nodes();if(be&&Dt.hasNode(be))return[]},this.predecessors=function(be){var De=Dt.predecessorsMap.get(be);return De?Array.from(De.keys()):void 0},this.successors=function(be){var De=Dt.successorsMap.get(be);return De?Array.from(De.keys()):void 0},this.neighbors=function(be){var De;if(Dt.hasNode(be))return Array.from(new Set((De=Dt.predecessors(be))===null||De===void 0?void 0:De.concat(Dt.successors(be))))},this.isLeaf=function(be){var De;if(Dt.isDirected()){var sr;return!(!((sr=Dt.successors(be))===null||sr===void 0)&&sr.length)}return!(!((De=Dt.neighbors(be))===null||De===void 0)&&De.length)},this.filterNodes=function(be){var De=Dt.directed,sr=Dt.multigraph,Fr=Dt.compound,Jr=new me({directed:De,multigraph:sr,compound:Fr});if(Jr.setGraph(Dt.graph()),Dt.nodes().forEach(function(Bn){be(Bn)&&Jr.setNode(Bn,Dt.node(Bn))}),Dt.edges().forEach(function(Bn){Jr.hasNode(Bn.v)&&Jr.hasNode(Bn.w)&&Jr.setEdgeObj(Bn,Dt.edge(Bn))}),Fr){var Pn=function(Zn){for(var ba=Dt.parent(Zn);ba!==void 0&&!Jr.hasNode(ba);)ba=Dt.parent(ba);return ba};Jr.nodes().forEach(function(Bn){Jr.setParent(Bn,Pn(Bn))})}return Jr},this.setDefaultEdgeLabel=function(be){return g(be)?Dt.defaultEdgeLabelFn=be:Dt.defaultEdgeLabelFn=function(){return be},Dt},this.edgeCount=function(){return Dt.edgeCountNum},this.setEdgeObj=function(be,De){return Dt.setEdge(be.v,be.w,De,be.name)},this.setPath=function(be,De){return be.reduce(function(sr,Fr){return Dt.setEdge(sr,Fr,De),Fr}),Dt},this.edgeFromArgs=function(be,De,sr){return Dt.edge({v:be,w:De,name:sr})},this.edge=function(be){return Dt.edgesLabelsMap.get(y(Dt.isDirected(),be))},this.hasEdge=function(be,De,sr){return Dt.edgesLabelsMap.has(y(Dt.isDirected(),{v:be,w:De,name:sr}))},this.removeEdgeObj=function(be){var De=be.v,sr=be.w,Fr=be.name;return Dt.removeEdge(De,sr,Fr)},this.edges=function(){return Array.from(Dt.edgesMap.values())},this.inEdges=function(be,De){var sr=Dt.inEdgesMap.get(be);if(sr)return Array.from(sr.values()).filter(function(Fr){return!De||Fr.v===De})},this.outEdges=function(be,De){var sr=Dt.outEdgesMap.get(be);if(sr)return Array.from(sr.values()).filter(function(Fr){return!De||Fr.w===De})},this.nodeEdges=function(be,De){var sr;if(Dt.hasNode(be))return(sr=Dt.inEdges(be,De))===null||sr===void 0?void 0:sr.concat(Dt.outEdges(be,De))},this.toJSON=function(){return S(Dt)},this.nodeInDegree=function(be){var De=Dt.inEdgesMap.get(be);return De?De.size:0},this.nodeOutDegree=function(be){var De=Dt.outEdgesMap.get(be);return De?De.size:0},this.nodeDegree=function(be){return Dt.nodeInDegree(be)+Dt.nodeOutDegree(be)},this.source=function(be){return be.v},this.target=function(be){return be.w};var Ae=m(m({},$),fe);this.compound=Ae.compound,this.directed=Ae.directed,this.multigraph=Ae.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}return V(me,[{key:"setNode",value:function(fe,Ae){var be=this.nodesLabelMap,De=this.defaultNodeLabelFn,sr=this.isCompound,Fr=this.parentMap,Jr=this.childrenMap,Pn=this.inEdgesMap,Bn=this.outEdgesMap,Zn=this.predecessorsMap,ba=this.successorsMap;if(be.has(fe))return Ae!==void 0&&be.set(fe,Ae),this;if(be.set(fe,Ae||De(fe)),sr()){var Ca;Fr==null||Fr.set(fe,this.GRAPH_NODE),Jr==null||Jr.set(fe,new Map),Jr!=null&&Jr.has(this.GRAPH_NODE)||Jr==null||Jr.set(this.GRAPH_NODE,new Map),Jr==null||(Ca=Jr.get(this.GRAPH_NODE))===null||Ca===void 0||Ca.set(fe,!0)}return[Pn,Bn,Zn,ba].forEach(function(li){return li.set(fe,new Map)}),this.nodeCountNum+=1,this}},{key:"removeNode",value:function(fe){var Ae=this;if(this.hasNode(fe)){var be=function(fi){Ae.removeEdge(fi.v,fi.w,fi.name)},De=this.inEdgesMap,sr=this.outEdgesMap,Fr=this.predecessorsMap,Jr=this.successorsMap,Pn=this.nodesLabelMap;if(this.isCompound()){var Bn,Zn,ba;this.removeFromParentsChildList(fe),(Bn=this.parentMap)===null||Bn===void 0||Bn.delete(fe),(Zn=this.children(fe))===null||Zn===void 0||Zn.forEach(function(ta){return Ae.setParent(ta)}),(ba=this.childrenMap)===null||ba===void 0||ba.delete(fe)}var Ca=De.get(fe),li=sr.get(fe);Array.from(Ca.values()).forEach(function(ta){return be(ta)}),Array.from(li.values()).forEach(function(ta){return be(ta)}),Pn.delete(fe),De.delete(fe),sr.delete(fe),Fr.delete(fe),Jr.delete(fe),this.nodeCountNum-=1}return this}},{key:"setEdge",value:function(fe,Ae,be,De){var sr,Fr,Jr=p(this.isDirected(),fe,Ae,De),Pn=y(this.isDirected(),Jr),Bn=Jr.v,Zn=Jr.w;if(this.edgesLabelsMap.has(Pn))return this.edgesLabelsMap.set(Pn,be),this;if(De!==void 0&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(Bn),this.setNode(Zn),this.edgesLabelsMap.set(Pn,be||this.defaultEdgeLabelFn(Bn,Zn,De)),Object.freeze(Jr),this.edgesMap.set(Pn,Jr);var ba=this.predecessorsMap.get(Zn),Ca=this.successorsMap.get(Bn);return N(ba,Bn),N(Ca,Zn),(sr=this.inEdgesMap.get(Zn))===null||sr===void 0||sr.set(Pn,Jr),(Fr=this.outEdgesMap.get(Bn))===null||Fr===void 0||Fr.set(Pn,Jr),this.edgeCountNum+=1,this}},{key:"removeEdge",value:function(fe,Ae,be){var De=x(this.isDirected(),fe,Ae,be),sr=this.edgesMap.get(De);if(sr){var Fr=p(this.isDirected(),fe,Ae,be),Jr=Fr.v,Pn=Fr.w;this.edgesLabelsMap.delete(De),this.edgesMap.delete(De);var Bn=this.predecessorsMap.get(Pn),Zn=this.successorsMap.get(Jr);E(Bn,Jr),E(Zn,Pn),this.inEdgesMap.get(Pn).delete(De),this.outEdgesMap.get(Jr).delete(De),this.edgeCountNum-=1}return this}}]),me}();q.fromJSON=O;function rt(me){"@babel/helpers - typeof";return rt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Dt){return typeof Dt}:function(Dt){return Dt&&typeof Symbol=="function"&&Dt.constructor===Symbol&&Dt!==Symbol.prototype?"symbol":typeof Dt},rt(me)}function Q(me,Dt){if(!(me instanceof Dt))throw new TypeError("Cannot call a class as a function")}function it(me,Dt){for(var fe=0;fe<Dt.length;fe++){var Ae=Dt[fe];Ae.enumerable=Ae.enumerable||!1,Ae.configurable=!0,"value"in Ae&&(Ae.writable=!0),Object.defineProperty(me,Ae.key,Ae)}}function ht(me,Dt,fe){return Dt&&it(me.prototype,Dt),fe&&it(me,fe),Object.defineProperty(me,"prototype",{writable:!1}),me}function dt(){return typeof Reflect!="undefined"&&Reflect.get?dt=Reflect.get:dt=function(Dt,fe,Ae){var be=Ot(Dt,fe);if(be){var De=Object.getOwnPropertyDescriptor(be,fe);return De.get?De.get.call(arguments.length<3?Dt:Ae):De.value}},dt.apply(this,arguments)}function Ot(me,Dt){for(;!Object.prototype.hasOwnProperty.call(me,Dt)&&(me=kt(me),me!==null););return me}function It(me,Dt){if(typeof Dt!="function"&&Dt!==null)throw new TypeError("Super expression must either be null or a function");me.prototype=Object.create(Dt&&Dt.prototype,{constructor:{value:me,writable:!0,configurable:!0}}),Object.defineProperty(me,"prototype",{writable:!1}),Dt&&Kt(me,Dt)}function Kt(me,Dt){return Kt=Object.setPrototypeOf||function(Ae,be){return Ae.__proto__=be,Ae},Kt(me,Dt)}function Ft(me){var Dt=yt();return function(){var Ae=kt(me),be;if(Dt){var De=kt(this).constructor;be=Reflect.construct(Ae,arguments,De)}else be=Ae.apply(this,arguments);return Nt(this,be)}}function Nt(me,Dt){if(Dt&&(rt(Dt)==="object"||typeof Dt=="function"))return Dt;if(Dt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return st(me)}function st(me){if(me===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return me}function yt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(me){return!1}}function kt(me){return kt=Object.setPrototypeOf?Object.getPrototypeOf:function(fe){return fe.__proto__||Object.getPrototypeOf(fe)},kt(me)}var ee=function(me){It(fe,me);var Dt=Ft(fe);function fe(){var Ae;Q(this,fe);for(var be=arguments.length,De=new Array(be),sr=0;sr<be;sr++)De[sr]=arguments[sr];return Ae=Dt.call.apply(Dt,[this].concat(De)),Ae.eventPool={},Ae}return ht(fe,[{key:"appendEvent",value:function(be,De){this.eventPool[be]||(this.eventPool[be]=[]),this.eventPool[be].push(De)}},{key:"removeEvent",value:function(be,De){if(this.eventPool[be]){var sr=this.eventPool[be].indexOf(De);sr>-1&&this.eventPool[be].splice(sr,1)}}},{key:"emitEvent",value:function(be){for(var De=arguments.length,sr=new Array(De>1?De-1:0),Fr=1;Fr<De;Fr++)sr[Fr-1]=arguments[Fr];this.eventPool[be]&&this.eventPool[be].forEach(function(Jr){Jr.apply(void 0,sr)})}},{key:"setNode",value:function(be,De){return dt(kt(fe.prototype),"setNode",this).call(this,be,De),this.emitEvent("nodeAdd",be,De),this}},{key:"removeNode",value:function(be){return dt(kt(fe.prototype),"removeNode",this).call(this,be),this.emitEvent("nodeRemove",be),this}},{key:"setEdge",value:function(be,De,sr,Fr){return dt(kt(fe.prototype),"setEdge",this).call(this,be,De,sr,Fr),this.emitEvent("edgeAdd",be,De,sr,Fr),this}},{key:"removeEdge",value:function(be,De,sr){return dt(kt(fe.prototype),"removeEdge",this).call(this,be,De,sr),this.emitEvent("edgeRemove",be,De,sr),this}}]),fe}(q);function $t(me,Dt){for(var fe=0;fe<Dt.length;fe++){var Ae=Dt[fe];Ae.enumerable=Ae.enumerable||!1,Ae.configurable=!0,"value"in Ae&&(Ae.writable=!0),Object.defineProperty(me,Ae.key,Ae)}}function ge(me,Dt,fe){return Dt&&$t(me.prototype,Dt),fe&&$t(me,fe),Object.defineProperty(me,"prototype",{writable:!1}),me}function Pe(me,Dt){if(!(me instanceof Dt))throw new TypeError("Cannot call a class as a function")}var er=ge(function me(){var Dt=this;Pe(this,me),this.arr=[],this.keyIndice=new Map,this.size=function(){return Dt.arr.length},this.keys=function(){return Dt.arr.map(function(fe){return fe.key})},this.has=function(fe){return Dt.keyIndice.has(fe)},this.priority=function(fe){var Ae=Dt.keyIndice.get(fe);if(Ae!==void 0)return Dt.arr[Ae].priority},this.swap=function(fe,Ae){var be=Dt.arr,De=Dt.keyIndice,sr=[be[fe],be[Ae]],Fr=sr[0],Jr=sr[1];be[fe]=Jr,be[Ae]=Fr,De.set(Fr.key,Ae),De.set(Jr.key,fe)},this.innerDecrease=function(fe){for(var Ae=Dt.arr,be=Ae[fe].priority,De,sr=fe;sr!==0;){var Fr;if(De=sr>>1,((Fr=Ae[De])===null||Fr===void 0?void 0:Fr.priority)<be)break;Dt.swap(sr,De),sr=De}},this.heapify=function(fe){var Ae=Dt.arr,be=fe<<1,De=be+1,sr=fe;be<Ae.length&&(sr=Ae[be].priority<Ae[sr].priority?be:sr,De<Ae.length&&(sr=Ae[De].priority<Ae[sr].priority?De:sr),sr!==fe&&(Dt.swap(fe,sr),Dt.heapify(sr)))},this.min=function(){if(Dt.size()===0)throw new Error("Queue underflow");return Dt.arr[0].key},this.add=function(fe,Ae){var be=Dt.keyIndice,De=Dt.arr;if(!be.has(fe)){var sr=De.length;return be.set(fe,sr),De.push({key:fe,priority:Ae}),Dt.innerDecrease(sr),!0}return!1},this.removeMin=function(){Dt.swap(0,Dt.arr.length-1);var fe=Dt.arr.pop();return Dt.keyIndice.delete(fe.key),Dt.heapify(0),fe.key},this.decrease=function(fe,Ae){if(!Dt.has(fe))throw new Error("There's no key named ".concat(fe));var be=Dt.keyIndice.get(fe);if(Ae>Dt.arr[be].priority)throw new Error("New priority is greater than current priority.Key: ".concat(fe," Old: + ").concat(Dt.arr[be].priority," New: ").concat(Ae));Dt.arr[be].priority=Ae,Dt.innerDecrease(be)}}),Jt=function(Dt,fe){var Ae=new q,be=new Map,De=new er,sr;function Fr(Bn){var Zn=Bn.v===sr?Bn.w:Bn.v,ba=De.priority(Zn);if(ba!==void 0){var Ca=fe(Bn);Ca<ba&&(be.set(Zn,sr),De.decrease(Zn,Ca))}}if(Dt.nodeCount()===0)return Ae;Dt.nodes().forEach(function(Bn){De.add(Bn,Number.POSITIVE_INFINITY),Ae.setNode(Bn)}),De.decrease(Dt.nodes()[0],0);for(var Jr=!1;De.size()>0;){var Pn;if(sr=De.removeMin(),be.has(sr))Ae.setEdge(sr,be.get(sr));else{if(Jr)throw new Error("Input graph is not connected: "+Dt.graph());Jr=!0}(Pn=Dt.nodeEdges(sr))===null||Pn===void 0||Pn.forEach(Fr)}return Ae},ae=Jt,Se=function(Dt){var fe=new Set,Ae=[],be=Dt.nodes();return be.forEach(function(De){for(var sr=[],Fr=[De];Fr.length>0;){var Jr=Fr.pop();if(!fe.has(Jr)){var Pn,Bn;fe.add(Jr),sr.push(Jr),(Pn=Dt.successors(Jr))===null||Pn===void 0||Pn.forEach(function(Zn){return Fr.push(Zn)}),(Bn=Dt.predecessors(Jr))===null||Bn===void 0||Bn.forEach(function(Zn){return Fr.push(Zn)})}}sr.length&&Ae.push(sr)}),Ae},xe=Se,we=function me(Dt,fe,Ae,be,De,sr){be.includes(fe)||(be.push(fe),Ae||sr.push(fe),De(fe).forEach(function(Fr){return me(Dt,Fr,Ae,be,De,sr)}),Ae&&sr.push(fe))},zt=function(Dt,fe,Ae){var be=Array.isArray(fe)?fe:[fe],De=function(Pn){return Dt.isDirected()?Dt.successors(Pn):Dt.neighbors(Pn)},sr=[],Fr=[];return be.forEach(function(Jr){if(Dt.hasNode(Jr))we(Dt,Jr,Ae==="post",Fr,De,sr);else throw new Error("Graph does not have node: "+Jr)}),sr},Wt=zt;function Ie(me,Dt){return _e(me)||re(me,Dt)||ie(me,Dt)||Yt()}function Yt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ie(me,Dt){if(me){if(typeof me=="string")return Oe(me,Dt);var fe=Object.prototype.toString.call(me).slice(8,-1);if(fe==="Object"&&me.constructor&&(fe=me.constructor.name),fe==="Map"||fe==="Set")return Array.from(me);if(fe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(fe))return Oe(me,Dt)}}function Oe(me,Dt){(Dt==null||Dt>me.length)&&(Dt=me.length);for(var fe=0,Ae=new Array(Dt);fe<Dt;fe++)Ae[fe]=me[fe];return Ae}function re(me,Dt){var fe=me==null?null:typeof Symbol!="undefined"&&me[Symbol.iterator]||me["@@iterator"];if(fe!=null){var Ae=[],be=!0,De=!1,sr,Fr;try{for(fe=fe.call(me);!(be=(sr=fe.next()).done)&&(Ae.push(sr.value),!(Dt&&Ae.length===Dt));be=!0);}catch(Jr){De=!0,Fr=Jr}finally{try{!be&&fe.return!=null&&fe.return()}finally{if(De)throw Fr}}return Ae}}function _e(me){if(Array.isArray(me))return me}var Ge=function(){return 1},Ct=function(Dt,fe,Ae,be){return Nr(Dt,fe,Ae||Ge,be||function(De){return Dt.outEdges(De)})},Nr=function(Dt,fe,Ae,be){var De=new Map,sr=new er,Fr,Jr,Pn=function(ba){var Ca=ba.v!==Fr?ba.v:ba.w,li=De.get(Ca),ta=Ae(ba),fi=Jr.distance+ta;if(ta<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+ba+" Weight: "+ta);fi<li.distance&&(li.distance=fi,li.predecessor=Fr,sr.decrease(Ca,fi))};for(Dt.nodes().forEach(function(Zn){var ba=Zn===fe?0:Number.POSITIVE_INFINITY;De.set(Zn,{distance:ba}),sr.add(Zn,ba)});sr.size()>0&&(Fr=sr.removeMin(),Jr=De.get(Fr),!(Jr&&Jr.distance===Number.POSITIVE_INFINITY));)be(Fr).forEach(Pn);var Bn={};return Array.from(De.entries()).forEach(function(Zn){var ba=Ie(Zn,2),Ca=ba[0],li=ba[1];return Bn[String(Ca)]=li,Bn}),Bn},Or=Ct,Ur=function(Dt,fe,Ae){var be={};return Dt.nodes().forEach(function(De){return be[String(De)]=Or(Dt,De,fe,Ae),be}),be},Sr=Ur,gn=function(Dt){var fe=0,Ae=[],be=new Map,De=[];function sr(Fr){var Jr,Pn={onStack:!0,lowlink:fe,index:fe};if(be.set(Fr,Pn),fe+=1,Ae.push(Fr),(Jr=Dt.successors(Fr))===null||Jr===void 0||Jr.forEach(function(Ca){var li;if(be.has(Ca)){if(!((li=be.get(Ca))===null||li===void 0)&&li.onStack){var fi=be.get(Ca);Pn.lowlink=Math.min(Pn.lowlink,fi.index)}}else{sr(Ca);var ta=be.get(Ca);Pn.lowlink=Math.min(Pn.lowlink,ta.lowlink)}}),Pn.lowlink===Pn.index){var Bn=[],Zn;do{Zn=Ae.pop();var ba=be.get(Zn);ba.onStack=!1,Bn.push(Zn)}while(Fr!==Zn);De.push(Bn)}}return Dt.nodes().forEach(function(Fr){be.has(Fr)||sr(Fr)}),De},Rr=gn,ln=function(Dt){return Rr(Dt).filter(function(fe){return fe.length>1||fe.length===1&&Dt.hasEdge(fe[0],fe[0])})},Nn=ln;function Ln(me){"@babel/helpers - typeof";return Ln=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Dt){return typeof Dt}:function(Dt){return Dt&&typeof Symbol=="function"&&Dt.constructor===Symbol&&Dt!==Symbol.prototype?"symbol":typeof Dt},Ln(me)}function fn(me,Dt){for(var fe=0;fe<Dt.length;fe++){var Ae=Dt[fe];Ae.enumerable=Ae.enumerable||!1,Ae.configurable=!0,"value"in Ae&&(Ae.writable=!0),Object.defineProperty(me,Ae.key,Ae)}}function Qe(me,Dt,fe){return Dt&&fn(me.prototype,Dt),fe&&fn(me,fe),Object.defineProperty(me,"prototype",{writable:!1}),me}function nr(me,Dt){if(!(me instanceof Dt))throw new TypeError("Cannot call a class as a function")}function dr(me,Dt){if(typeof Dt!="function"&&Dt!==null)throw new TypeError("Super expression must either be null or a function");me.prototype=Object.create(Dt&&Dt.prototype,{constructor:{value:me,writable:!0,configurable:!0}}),Object.defineProperty(me,"prototype",{writable:!1}),Dt&&dn(me,Dt)}function Pr(me){var Dt=Hn();return function(){var Ae=Wn(me),be;if(Dt){var De=Wn(this).constructor;be=Reflect.construct(Ae,arguments,De)}else be=Ae.apply(this,arguments);return en(this,be)}}function en(me,Dt){if(Dt&&(Ln(Dt)==="object"||typeof Dt=="function"))return Dt;if(Dt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pn(me)}function pn(me){if(me===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return me}function rn(me){var Dt=typeof Map=="function"?new Map:void 0;return rn=function(Ae){if(Ae===null||!oa(Ae))return Ae;if(typeof Ae!="function")throw new TypeError("Super expression must either be null or a function");if(typeof Dt!="undefined"){if(Dt.has(Ae))return Dt.get(Ae);Dt.set(Ae,be)}function be(){return jn(Ae,arguments,Wn(this).constructor)}return be.prototype=Object.create(Ae.prototype,{constructor:{value:be,enumerable:!1,writable:!0,configurable:!0}}),dn(be,Ae)},rn(me)}function jn(me,Dt,fe){return Hn()?jn=Reflect.construct:jn=function(be,De,sr){var Fr=[null];Fr.push.apply(Fr,De);var Jr=Function.bind.apply(be,Fr),Pn=new Jr;return sr&&dn(Pn,sr.prototype),Pn},jn.apply(null,arguments)}function Hn(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(me){return!1}}function oa(me){return Function.toString.call(me).indexOf("[native code]")!==-1}function dn(me,Dt){return dn=Object.setPrototypeOf||function(Ae,be){return Ae.__proto__=be,Ae},dn(me,Dt)}function Wn(me){return Wn=Object.setPrototypeOf?Object.getPrototypeOf:function(fe){return fe.__proto__||Object.getPrototypeOf(fe)},Wn(me)}var Dn=function(me){dr(fe,me);var Dt=Pr(fe);function fe(){return nr(this,fe),Dt.apply(this,arguments)}return Qe(fe)}(rn(Error));function Cn(me){var Dt=new Set,fe=new Set,Ae=[];function be(De){if(fe.has(De))throw new Dn;if(!Dt.has(De)){var sr;fe.add(De),Dt.add(De),(sr=me.predecessors(De))===null||sr===void 0||sr.forEach(be),fe.delete(De),Ae.push(De)}}if(me.sinks().forEach(be),Dt.size!==me.nodeCount())throw new Dn;return Ae}var la=Cn,K=function(Dt){try{la(Dt)}catch(fe){if(fe instanceof Dn)return!1;throw fe}return!0},ft=K,nt=function(Dt,fe){return Wt(Dt,fe,"post")},k=nt,M=function(Dt,fe){return Wt(Dt,fe,"pre")},C=M,j=function(){return 1};function xt(me,Dt,fe){return At(me,Dt||j,fe||function(Ae){return me.outEdges(Ae)})}function At(me,Dt,fe){var Ae={},be=me.nodes();return be.forEach(function(De){var sr=String(De);Ae[sr]={},Ae[sr][sr]={distance:0},be.forEach(function(Fr){De!==Fr&&(Ae[sr][String(Fr)]={distance:Number.POSITIVE_INFINITY})}),fe(De).forEach(function(Fr){var Jr=Fr.v===De?Fr.w:Fr.v,Pn=Dt(Fr);Ae[sr][String(Jr)]={distance:Pn,predecessor:De}})}),be.forEach(function(De){var sr=String(De),Fr=Ae[sr];be.forEach(function(Jr){var Pn=String(Jr),Bn=Ae[Pn];be.forEach(function(Zn){var ba=String(Zn),Ca=Bn[sr],li=Fr[ba],ta=Bn[ba],fi=Ca.distance+li.distance;fi<ta.distance&&(ta.distance=fi,ta.predecessor=li.predecessor)})})}),Ae}var wt=xt,Pt=function(Dt,fe){for(var Ae=Dt.nodes(),be=0;be<Ae.length;be++){var De=Ae[be];if(fe.hasNode(De))return!0}return!1},Me=function(Dt,fe){for(var Ae=Dt.edges(),be=0;be<Ae.length;be++){var De=Ae[be];if(fe.hasEdge(De.v,De.w,De.name))return!0}return!1},ve=function(Dt,fe){var Ae=Dt.nodes(),be=Ae.filter(function(De){return fe.hasNode(De)});return be},Ke=function(Dt,fe){var Ae=Dt.edges(),be=Ae.filter(function(De){return fe.hasEdge(De.v,De.w,De.name)});return be},br=function(Dt,fe){return Dt.isCompound()===fe.isCompound()&&Dt.isDirected()===fe.isDirected()&&Dt.isMultigraph()===fe.isMultigraph()},ir=function(Dt,fe){var Ae=ve(Dt,fe);return Ae.length===Dt.nodes().length},mr=function(Dt,fe){var Ae=Ke(Dt,fe);return Ae.length===Dt.edges().length},Mn=function(Dt,fe){return br(Dt,fe)&&Dt.nodeCount()===fe.nodeCount()&&ir(Dt,fe)&&Dt.edgeCount()===fe.edgeCount()&&mr(Dt,fe)},Xe=function(Dt,fe){return ir(Dt,fe)&&mr(Dt,fe)};function vr(me,Dt){return Ta(me)||xa(me,Dt)||on(me,Dt)||Er()}function Er(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function on(me,Dt){if(me){if(typeof me=="string")return Wr(me,Dt);var fe=Object.prototype.toString.call(me).slice(8,-1);if(fe==="Object"&&me.constructor&&(fe=me.constructor.name),fe==="Map"||fe==="Set")return Array.from(me);if(fe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(fe))return Wr(me,Dt)}}function Wr(me,Dt){(Dt==null||Dt>me.length)&&(Dt=me.length);for(var fe=0,Ae=new Array(Dt);fe<Dt;fe++)Ae[fe]=me[fe];return Ae}function xa(me,Dt){var fe=me==null?null:typeof Symbol!="undefined"&&me[Symbol.iterator]||me["@@iterator"];if(fe!=null){var Ae=[],be=!0,De=!1,sr,Fr;try{for(fe=fe.call(me);!(be=(sr=fe.next()).done)&&(Ae.push(sr.value),!(Dt&&Ae.length===Dt));be=!0);}catch(Jr){De=!0,Fr=Jr}finally{try{!be&&fe.return!=null&&fe.return()}finally{if(De)throw Fr}}return Ae}}function Ta(me){if(Array.isArray(me))return me}function Rn(me){return me instanceof q}function Jn(me){if(me.isMultigraph())return!1;for(var Dt=me.edges(),fe=new Map,Ae=0;Ae<Dt.length;Ae++){var be=Dt[Ae];if(be.v===be.w)return!1;var De=[be.v,be.w].sort(),sr=vr(De,2),Fr=sr[0],Jr=sr[1],Pn="".concat(Fr,"-").concat(Jr);if(fe.has(Pn))return!1;fe.set(Pn,!0)}return!0}function Ga(me){return me.nodes().length===0}function Aa(me){for(var Dt=me.edges(),fe=0;fe<Dt.length;fe++){var Ae=Dt[fe];if(Ae.v===Ae.w)return!0}return!1}var an=function(Dt,fe){if(!Jn(Dt)||!Jn(fe)||!ir(Dt,fe)||Me(Dt,fe))return!1;var Ae=Dt.nodeCount();return Dt.edgeCount()+fe.edgeCount()===Ae*(Ae-1)/2},Vn=function(Dt){if(!Jn(Dt))return null;for(var fe=Dt.nodeCount(),Ae=new q({compound:Dt.isCompound(),directed:Dt.isDirected(),multigraph:Dt.isMultigraph()}),be=Dt.nodes(),De=0;De<fe;De++){var sr=be[De];Ae.setNode(sr,Dt.node(sr));for(var Fr=De+1;Fr<fe;Fr++){var Jr=be[Fr];Dt.hasEdge(sr,Jr)||Ae.setEdge(sr,Jr)}}return Ae}},981746:function(He){(function(z,G){He.exports=G()})(typeof self!="undefined"?self:this,function(){return function(F){var z={};function G(X){if(z[X])return z[X].exports;var R=z[X]={i:X,l:!1,exports:{}};return F[X].call(R.exports,R,R.exports,G),R.l=!0,R.exports}return G.m=F,G.c=z,G.d=function(X,R,L){G.o(X,R)||Object.defineProperty(X,R,{configurable:!1,enumerable:!0,get:L})},G.n=function(X){var R=X&&X.__esModule?function(){return X.default}:function(){return X};return G.d(R,"a",R),R},G.o=function(X,R){return Object.prototype.hasOwnProperty.call(X,R)},G.p="",G(G.s=36)}([function(F,z,G){"use strict";var X=G(3);z.a=function(R){return Array.isArray?Array.isArray(R):Object(X.a)(R,"Array")}},function(F,z,G){"use strict";var X=function(R){return R!==null&&typeof R!="function"&&isFinite(R.length)};z.a=X},function(F,z,G){"use strict";var X=G(3);z.a=function(R){return Object(X.a)(R,"Function")}},function(F,z,G){"use strict";var X={}.toString,R=function(L,P){return X.call(L)==="[object "+P+"]"};z.a=R},function(F,z,G){"use strict";var X=G(3);z.a=function(R){return Object(X.a)(R,"String")}},function(F,z,G){"use strict";var X=G(3),R=function(L){return Object(X.a)(L,"Number")};z.a=R},function(F,z,G){var X=G(38),R=X.mix;function L(P,N,E,x){return x===void 0&&(x="height"),E==="center"?(P[x]+N[x])/2:P.height}F.exports={assign:R,getHeight:L}},function(F,z,G){"use strict";var X=function(R){return R==null};z.a=X},function(F,z,G){"use strict";var X=G(0),R=G(12);function L(P,N){if(P){var E;if(Object(X.a)(P))for(var x=0,p=P.length;x<p&&(E=N(P[x],x),E!==!1);x++);else if(Object(R.a)(P)){for(var y in P)if(P.hasOwnProperty(y)&&(E=N(P[y],y),E===!1))break}}}z.a=L},function(F,z,G){"use strict";var X=G(7);z.a=function(R){return Object(X.a)(R)?"":R.toString()}},function(F,z,G){"use strict";var X=G(14),R=G(3),L=function(P){if(!Object(X.a)(P)||!Object(R.a)(P,"Object"))return!1;if(Object.getPrototypeOf(P)===null)return!0;for(var N=P;Object.getPrototypeOf(N)!==null;)N=Object.getPrototypeOf(N);return Object.getPrototypeOf(P)===N};z.a=L},function(F,z,G){var X=G(18),R=function(){function L(N,E){E===void 0&&(E={});var x=this;x.options=E,x.rootNode=X(N,E)}var P=L.prototype;return P.execute=function(){throw new Error("please override this method")},L}();F.exports=R},function(F,z,G){"use strict";z.a=function(X){var R=typeof X;return X!==null&&R==="object"||R==="function"}},function(F,z,G){"use strict";var X=G(1),R=function(L,P){return Object(X.a)(L)?L.indexOf(P)>-1:!1};z.a=R},function(F,z,G){"use strict";var X=function(R){return typeof R=="object"&&R!==null};z.a=X},function(F,z,G){"use strict";var X=G(8),R=G(2),L=Object.values?function(P){return Object.values(P)}:function(P){var N=[];return Object(X.a)(P,function(E,x){Object(R.a)(P)&&x==="prototype"||N.push(E)}),N};z.a=L},function(F,z,G){"use strict";z.a=R;function X(L,P){for(var N in P)P.hasOwnProperty(N)&&N!=="constructor"&&P[N]!==void 0&&(L[N]=P[N])}function R(L,P,N,E){return P&&X(L,P),N&&X(L,N),E&&X(L,E),L}},function(F,z,G){var X=G(35),R=["LR","RL","TB","BT","H","V"],L=["LR","RL","H"],P=function(x){return L.indexOf(x)>-1},N=R[0];F.exports=function(E,x,p){var y=x.direction||N;if(x.isHorizontal=P(y),y&&R.indexOf(y)===-1)throw new TypeError("Invalid direction: "+y);if(y===R[0])p(E,x);else if(y===R[1])p(E,x),E.right2left();else if(y===R[2])p(E,x);else if(y===R[3])p(E,x),E.bottom2top();else if(y===R[4]||y===R[5]){var g=X(E,x),A=g.left,_=g.right;p(A,x),p(_,x),x.isHorizontal?A.right2left():A.bottom2top(),_.translate(A.x-_.x,A.y-_.y),E.x=A.x,E.y=_.y;var S=E.getBoundingBox();x.isHorizontal?S.top<0&&E.translate(0,-S.top):S.left<0&&E.translate(-S.left,0)}var O=x.fixedRoot;return O===void 0&&(O=!0),O&&E.translate(-(E.x+E.width/2+E.hgap),-(E.y+E.height/2+E.vgap)),E}},function(F,z,G){var X=G(6),R=18,L=R*2,P=R,N={getId:function(y){return y.id||y.name},getPreH:function(y){return y.preH||0},getPreV:function(y){return y.preV||0},getHGap:function(y){return y.hgap||P},getVGap:function(y){return y.vgap||P},getChildren:function(y){return y.children},getHeight:function(y){return y.height||L},getWidth:function(y){var g=y.label||" ";return y.width||g.split("").length*R}};function E(p,y){var g=this;if(g.vgap=g.hgap=0,p instanceof E)return p;g.data=p;var A=y.getHGap(p),_=y.getVGap(p);return g.preH=y.getPreH(p),g.preV=y.getPreV(p),g.width=y.getWidth(p),g.height=y.getHeight(p),g.width+=g.preH,g.height+=g.preV,g.id=y.getId(p),g.x=g.y=0,g.depth=0,g.children||(g.children=[]),g.addGap(A,_),g}X.assign(E.prototype,{isRoot:function(){return this.depth===0},isLeaf:function(){return this.children.length===0},addGap:function(y,g){var A=this;A.hgap+=y,A.vgap+=g,A.width+=2*y,A.height+=2*g},eachNode:function(y){for(var g=this,A=[g],_;_=A.shift();)y(_),A=_.children.concat(A)},DFTraverse:function(y){this.eachNode(y)},BFTraverse:function(y){for(var g=this,A=[g],_;_=A.shift();)y(_),A=A.concat(_.children)},getBoundingBox:function(){var y={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(g){y.left=Math.min(y.left,g.x),y.top=Math.min(y.top,g.y),y.width=Math.max(y.width,g.x+g.width),y.height=Math.max(y.height,g.y+g.height)}),y},translate:function(y,g){y===void 0&&(y=0),g===void 0&&(g=0),this.eachNode(function(A){A.x+=y,A.y+=g,A.x+=A.preH,A.y+=A.preV})},right2left:function(){var y=this,g=y.getBoundingBox();y.eachNode(function(A){A.x=A.x-(A.x-g.left)*2-A.width}),y.translate(g.width,0)},bottom2top:function(){var y=this,g=y.getBoundingBox();y.eachNode(function(A){A.y=A.y-(A.y-g.top)*2-A.height}),y.translate(0,g.height)}});function x(p,y,g){y===void 0&&(y={}),y=X.assign({},N,y);var A=new E(p,y),_=[A],S;if(!g&&!p.collapsed){for(;S=_.shift();)if(!S.data.collapsed){var O=y.getChildren(S.data),B=O?O.length:0;if(S.children=new Array(B),O&&B)for(var m=0;m<B;m++){var d=new E(O[m],y);S.children[m]=d,_.push(d),d.parent=S,d.depth=S.depth+1}}}return A}F.exports=x},function(F,z,G){"use strict";var X=G(1),R=function(L,P){if(!Object(X.a)(L))return L;for(var N=[],E=0;E<L.length;E++){var x=L[E];P(x,E)&&N.push(x)}return N};z.a=R},function(F,z,G){"use strict";var X=G(7),R=G(21);function L(P,N){var E=Object(R.a)(N),x=E.length;if(Object(X.a)(P))return!x;for(var p=0;p<x;p+=1){var y=E[p];if(N[y]!==P[y]||!(y in P))return!1}return!0}z.a=L},function(F,z,G){"use strict";var X=G(8),R=G(2),L=Object.keys?function(P){return Object.keys(P)}:function(P){var N=[];return Object(X.a)(P,function(E,x){Object(R.a)(P)&&x==="prototype"||N.push(x)}),N};z.a=L},function(F,z,G){"use strict";var X=G(0);z.a=function(R){if(Object(X.a)(R))return R.reduce(function(L,P){return Math.max(L,P)},R[0])}},function(F,z,G){"use strict";var X=G(0);z.a=function(R){if(Object(X.a)(R))return R.reduce(function(L,P){return Math.min(L,P)},R[0])}},function(F,z,G){"use strict";var X=G(1),R=Array.prototype.splice,L=function(N,E){if(!Object(X.a)(N))return[];for(var x=N?E.length:0,p=x-1;x--;){var y=void 0,g=E[x];(x===p||g!==y)&&(y=g,R.call(N,g,1))}return N};z.a=L},function(F,z,G){"use strict";var X=G(8),R=G(0),L=G(10),P=function(N,E,x){if(!Object(R.a)(N)&&!Object(L.a)(N))return N;var p=x;return Object(X.a)(N,function(y,g){p=E(p,y,g)}),p};z.a=P},function(F,z,G){"use strict";z.a=X;function X(R,L){L===void 0&&(L=new Map);var P=[];if(Array.isArray(R))for(var N=0,E=R.length;N<E;N++){var x=R[N];L.has(x)||(P.push(x),L.set(x,!0))}return P}},function(F,z,G){"use strict";z.a=P;var X=G(0),R=G(2),L=G(28);function P(N,E){if(!E)return{0:N};if(!Object(R.a)(E)){var x=Object(X.a)(E)?E:E.replace(/\s+/g,"").split("*");E=function(p){for(var y="_",g=0,A=x.length;g<A;g++)y+=p[x[g]]&&p[x[g]].toString();return y}}return Object(L.a)(N,E)}},function(F,z,G){"use strict";var X=G(0),R=G(2),L=Object.prototype.hasOwnProperty;function P(N,E){if(!E||!Object(X.a)(N))return{};for(var x={},p=Object(R.a)(E)?E:function(_){return _[E]},y,g=0;g<N.length;g++){var A=N[g];y=p(A),L.call(x,y)?x[y].push(A):x[y]=[A]}return x}z.a=P},function(F,z,G){"use strict";z.a=function(X,R){return X.hasOwnProperty(R)}},function(F,z,G){"use strict";var X={}.toString,R=function(L){return X.call(L).replace(/^\[object /,"").replace(/]$/,"")};z.a=R},function(F,z,G){"use strict";var X=Object.prototype,R=function(L){var P=L&&L.constructor,N=typeof P=="function"&&P.prototype||X;return L===N};z.a=R},function(F,z,G){"use strict";var X=G(2);z.a=function(R,L){if(!Object(X.a)(R))throw new TypeError("Expected a function");var P=function(){for(var N=[],E=0;E<arguments.length;E++)N[E]=arguments[E];var x=L?L.apply(this,N):N[0],p=P.cache;if(p.has(x))return p.get(x);var y=R.apply(this,N);return p.set(x,y),y};return P.cache=new Map,P}},function(F,z,G){"use strict";var X=G(14),R=G(1),L=G(4),P=function(N,E){if(N===E)return!0;if(!N||!E||Object(L.a)(N)||Object(L.a)(E))return!1;if(Object(R.a)(N)||Object(R.a)(E)){if(N.length!==E.length)return!1;for(var x=!0,p=0;p<N.length&&(x=P(N[p],E[p]),!!x);p++);return x}if(Object(X.a)(N)||Object(X.a)(E)){var y=Object.keys(N),g=Object.keys(E);if(y.length!==g.length)return!1;for(var x=!0,p=0;p<y.length&&(x=P(N[y[p]],E[y[p]]),!!x);p++);return x}return!1};z.a=P},function(F,z,G){"use strict";var X=G(116),R=G(15),L=G(32),P=G(4),N;z.a=Object(L.a)(function(E,x){x===void 0&&(x={});var p=x.fontSize,y=x.fontFamily,g=x.fontWeight,A=x.fontStyle,_=x.fontVariant;return N||(N=document.createElement("canvas").getContext("2d")),N.font=[A,_,g,p+"px",y].join(" "),N.measureText(Object(P.a)(E)?E:"").width},function(E,x){return x===void 0&&(x={}),Object(X.a)([E],Object(R.a)(x)).join("")})},function(F,z,G){var X=G(18);F.exports=function(R,L){for(var P=X(R.data,L,!0),N=X(R.data,L,!0),E=R.children.length,x=Math.round(E/2),p=L.getSide||function(_,S){return S<x?"right":"left"},y=0;y<E;y++){var g=R.children[y],A=p(g,y);A==="right"?N.children.push(g):P.children.push(g)}return P.eachNode(function(_){_.isRoot()||(_.side="left")}),N.eachNode(function(_){_.isRoot()||(_.side="right")}),{left:P,right:N}}},function(F,z,G){var X={compactBox:G(37),dendrogram:G(120),indented:G(122),mindmap:G(124)};F.exports=X},function(F,z,G){function X(g,A){g.prototype=Object.create(A.prototype),g.prototype.constructor=g,R(g,A)}function R(g,A){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(S,O){return S.__proto__=O,S},R(g,A)}var L=G(11),P=G(119),N=G(17),E=G(6),x=function(g){X(A,g);function A(){return g.apply(this,arguments)||this}var _=A.prototype;return _.execute=function(){var O=this;return N(O.rootNode,O.options,P)},A}(L),p={};function y(g,A){return A=E.assign({},p,A),new x(g,A).execute()}F.exports=y},function(F,z,G){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var X=G(13);G.d(z,"contains",function(){return X.a}),G.d(z,"includes",function(){return X.a});var R=G(39);G.d(z,"difference",function(){return R.a});var L=G(40);G.d(z,"find",function(){return L.a});var P=G(41);G.d(z,"findIndex",function(){return P.a});var N=G(42);G.d(z,"firstValue",function(){return N.a});var E=G(43);G.d(z,"flatten",function(){return E.a});var x=G(44);G.d(z,"flattenDeep",function(){return x.a});var p=G(45);G.d(z,"getRange",function(){return p.a});var y=G(46);G.d(z,"pull",function(){return y.a});var g=G(24);G.d(z,"pullAt",function(){return g.a});var A=G(25);G.d(z,"reduce",function(){return A.a});var _=G(47);G.d(z,"remove",function(){return _.a});var S=G(48);G.d(z,"sortBy",function(){return S.a});var O=G(49);G.d(z,"union",function(){return O.a});var B=G(26);G.d(z,"uniq",function(){return B.a});var m=G(50);G.d(z,"valuesOfKey",function(){return m.a});var d=G(51);G.d(z,"head",function(){return d.a});var tt=G(52);G.d(z,"last",function(){return tt.a});var Y=G(53);G.d(z,"startsWith",function(){return Y.a});var V=G(54);G.d(z,"endsWith",function(){return V.a});var $=G(19);G.d(z,"filter",function(){return $.a});var q=G(55);G.d(z,"every",function(){return q.a});var rt=G(56);G.d(z,"some",function(){return rt.a});var Q=G(57);G.d(z,"group",function(){return Q.a});var it=G(28);G.d(z,"groupBy",function(){return it.a});var ht=G(27);G.d(z,"groupToMap",function(){return ht.a});var dt=G(58);G.d(z,"getWrapBehavior",function(){return dt.a});var Ot=G(59);G.d(z,"wrapBehavior",function(){return Ot.a});var It=G(60);G.d(z,"number2color",function(){return It.a});var Kt=G(61);G.d(z,"parseRadius",function(){return Kt.a});var Ft=G(62);G.d(z,"clamp",function(){return Ft.a});var Nt=G(63);G.d(z,"fixedBase",function(){return Nt.a});var st=G(64);G.d(z,"isDecimal",function(){return st.a});var yt=G(65);G.d(z,"isEven",function(){return yt.a});var kt=G(66);G.d(z,"isInteger",function(){return kt.a});var ee=G(67);G.d(z,"isNegative",function(){return ee.a});var $t=G(68);G.d(z,"isNumberEqual",function(){return $t.a});var ge=G(69);G.d(z,"isOdd",function(){return ge.a});var Pe=G(70);G.d(z,"isPositive",function(){return Pe.a});var er=G(22);G.d(z,"max",function(){return er.a});var Jt=G(71);G.d(z,"maxBy",function(){return Jt.a});var ae=G(23);G.d(z,"min",function(){return ae.a});var Se=G(72);G.d(z,"minBy",function(){return Se.a});var xe=G(73);G.d(z,"mod",function(){return xe.a});var we=G(74);G.d(z,"toDegree",function(){return we.a});var zt=G(75);G.d(z,"toInteger",function(){return zt.a});var Wt=G(76);G.d(z,"toRadian",function(){return Wt.a});var Ie=G(77);G.d(z,"forIn",function(){return Ie.a});var Yt=G(29);G.d(z,"has",function(){return Yt.a});var ie=G(78);G.d(z,"hasKey",function(){return ie.a});var Oe=G(79);G.d(z,"hasValue",function(){return Oe.a});var re=G(21);G.d(z,"keys",function(){return re.a});var _e=G(20);G.d(z,"isMatch",function(){return _e.a});var Ge=G(15);G.d(z,"values",function(){return Ge.a});var Ct=G(80);G.d(z,"lowerCase",function(){return Ct.a});var Nr=G(81);G.d(z,"lowerFirst",function(){return Nr.a});var Or=G(82);G.d(z,"substitute",function(){return Or.a});var Ur=G(83);G.d(z,"upperCase",function(){return Ur.a});var Sr=G(84);G.d(z,"upperFirst",function(){return Sr.a});var gn=G(30);G.d(z,"getType",function(){return gn.a});var Rr=G(85);G.d(z,"isArguments",function(){return Rr.a});var ln=G(0);G.d(z,"isArray",function(){return ln.a});var Nn=G(1);G.d(z,"isArrayLike",function(){return Nn.a});var Ln=G(86);G.d(z,"isBoolean",function(){return Ln.a});var fn=G(87);G.d(z,"isDate",function(){return fn.a});var Qe=G(88);G.d(z,"isError",function(){return Qe.a});var nr=G(2);G.d(z,"isFunction",function(){return nr.a});var dr=G(89);G.d(z,"isFinite",function(){return dr.a});var Pr=G(7);G.d(z,"isNil",function(){return Pr.a});var en=G(90);G.d(z,"isNull",function(){return en.a});var pn=G(5);G.d(z,"isNumber",function(){return pn.a});var rn=G(12);G.d(z,"isObject",function(){return rn.a});var jn=G(14);G.d(z,"isObjectLike",function(){return jn.a});var Hn=G(10);G.d(z,"isPlainObject",function(){return Hn.a});var oa=G(31);G.d(z,"isPrototype",function(){return oa.a});var dn=G(91);G.d(z,"isRegExp",function(){return dn.a});var Wn=G(4);G.d(z,"isString",function(){return Wn.a});var Dn=G(3);G.d(z,"isType",function(){return Dn.a});var Cn=G(92);G.d(z,"isUndefined",function(){return Cn.a});var la=G(93);G.d(z,"isElement",function(){return la.a});var K=G(94);G.d(z,"requestAnimationFrame",function(){return K.a});var ft=G(95);G.d(z,"clearAnimationFrame",function(){return ft.a});var nt=G(96);G.d(z,"augment",function(){return nt.a});var k=G(97);G.d(z,"clone",function(){return k.a});var M=G(98);G.d(z,"debounce",function(){return M.a});var C=G(32);G.d(z,"memoize",function(){return C.a});var j=G(99);G.d(z,"deepMix",function(){return j.a});var xt=G(8);G.d(z,"each",function(){return xt.a});var At=G(100);G.d(z,"extend",function(){return At.a});var wt=G(101);G.d(z,"indexOf",function(){return wt.a});var Pt=G(102);G.d(z,"isEmpty",function(){return Pt.a});var Me=G(33);G.d(z,"isEqual",function(){return Me.a});var ve=G(103);G.d(z,"isEqualWith",function(){return ve.a});var Ke=G(104);G.d(z,"map",function(){return Ke.a});var br=G(105);G.d(z,"mapValues",function(){return br.a});var ir=G(16);G.d(z,"mix",function(){return ir.a}),G.d(z,"assign",function(){return ir.a});var mr=G(106);G.d(z,"get",function(){return mr.a});var Mn=G(107);G.d(z,"set",function(){return Mn.a});var Xe=G(108);G.d(z,"pick",function(){return Xe.a});var vr=G(109);G.d(z,"omit",function(){return vr.a});var Er=G(110);G.d(z,"throttle",function(){return Er.a});var on=G(111);G.d(z,"toArray",function(){return on.a});var Wr=G(9);G.d(z,"toString",function(){return Wr.a});var xa=G(112);G.d(z,"uniqueId",function(){return xa.a});var Ta=G(113);G.d(z,"noop",function(){return Ta.a});var Rn=G(114);G.d(z,"identity",function(){return Rn.a});var Jn=G(115);G.d(z,"size",function(){return Jn.a});var Ga=G(34);G.d(z,"measureTextWidth",function(){return Ga.a});var Aa=G(117);G.d(z,"getEllipsisText",function(){return Aa.a});var an=G(118);G.d(z,"Cache",function(){return an.a})},function(F,z,G){"use strict";var X=G(19),R=G(13),L=function(P,N){return N===void 0&&(N=[]),Object(X.a)(P,function(E){return!Object(R.a)(N,E)})};z.a=L},function(F,z,G){"use strict";var X=G(2),R=G(20),L=G(0),P=G(10);function N(E,x){if(!Object(L.a)(E))return null;var p;if(Object(X.a)(x)&&(p=x),Object(P.a)(x)&&(p=function(g){return Object(R.a)(g,x)}),p){for(var y=0;y<E.length;y+=1)if(p(E[y]))return E[y]}return null}z.a=N},function(F,z,G){"use strict";function X(R,L,P){P===void 0&&(P=0);for(var N=P;N<R.length;N++)if(L(R[N],N))return N;return-1}z.a=X},function(F,z,G){"use strict";var X=G(7),R=G(0),L=function(P,N){for(var E=null,x=0;x<P.length;x++){var p=P[x],y=p[N];if(!Object(X.a)(y)){Object(R.a)(y)?E=y[0]:E=y;break}}return E};z.a=L},function(F,z,G){"use strict";var X=G(0),R=function(L){if(!Object(X.a)(L))return[];for(var P=[],N=0;N<L.length;N++)P=P.concat(L[N]);return P};z.a=R},function(F,z,G){"use strict";var X=G(0),R=function(L,P){if(P===void 0&&(P=[]),!Object(X.a)(L))P.push(L);else for(var N=0;N<L.length;N+=1)R(L[N],P);return P};z.a=R},function(F,z,G){"use strict";var X=G(0),R=G(22),L=G(23),P=function(N){var E=N.filter(function(A){return!isNaN(A)});if(!E.length)return{min:0,max:0};if(Object(X.a)(N[0])){for(var x=[],p=0;p<N.length;p++)x=x.concat(N[p]);E=x}var y=Object(R.a)(E),g=Object(L.a)(E);return{min:g,max:y}};z.a=P},function(F,z,G){"use strict";var X=Array.prototype,R=X.splice,L=X.indexOf,P=function(N){for(var E=[],x=1;x<arguments.length;x++)E[x-1]=arguments[x];for(var p=0;p<E.length;p++)for(var y=E[p],g=-1;(g=L.call(N,y))>-1;)R.call(N,g,1);return N};z.a=P},function(F,z,G){"use strict";var X=G(1),R=G(24),L=function(P,N){var E=[];if(!Object(X.a)(P))return E;for(var x=-1,p=[],y=P.length;++x<y;){var g=P[x];N(g,x,P)&&(E.push(g),p.push(x))}return Object(R.a)(P,p),E};z.a=L},function(F,z,G){"use strict";var X=G(0),R=G(4),L=G(2);function P(N,E){var x;if(Object(L.a)(E))x=function(y,g){return E(y)-E(g)};else{var p=[];Object(R.a)(E)?p.push(E):Object(X.a)(E)&&(p=E),x=function(y,g){for(var A=0;A<p.length;A+=1){var _=p[A];if(y[_]>g[_])return 1;if(y[_]<g[_])return-1}return 0}}return N.sort(x),N}z.a=P},function(F,z,G){"use strict";var X=G(26),R=function(){for(var L=[],P=0;P<arguments.length;P++)L[P]=arguments[P];return Object(X.a)([].concat.apply([],L))};z.a=R},function(F,z,G){"use strict";var X=G(0),R=G(7);z.a=function(L,P){for(var N=[],E={},x=0;x<L.length;x++){var p=L[x],y=p[P];if(!Object(R.a)(y)){Object(X.a)(y)||(y=[y]);for(var g=0;g<y.length;g++){var A=y[g];E[A]||(N.push(A),E[A]=!0)}}}return N}},function(F,z,G){"use strict";z.a=R;var X=G(1);function R(L){if(Object(X.a)(L))return L[0]}},function(F,z,G){"use strict";z.a=R;var X=G(1);function R(L){if(Object(X.a)(L)){var P=L;return P[P.length-1]}}},function(F,z,G){"use strict";var X=G(0),R=G(4);function L(P,N){return Object(X.a)(P)||Object(R.a)(P)?P[0]===N:!1}z.a=L},function(F,z,G){"use strict";var X=G(0),R=G(4);function L(P,N){return Object(X.a)(P)||Object(R.a)(P)?P[P.length-1]===N:!1}z.a=L},function(F,z,G){"use strict";var X=function(R,L){for(var P=0;P<R.length;P++)if(!L(R[P],P))return!1;return!0};z.a=X},function(F,z,G){"use strict";var X=function(R,L){for(var P=0;P<R.length;P++)if(L(R[P],P))return!0;return!1};z.a=X},function(F,z,G){"use strict";var X=G(27);z.a=function(R,L){if(!L)return[R];var P=Object(X.a)(R,L),N=[];for(var E in P)N.push(P[E]);return N}},function(F,z,G){"use strict";function X(R,L){return R["_wrap_"+L]}z.a=X},function(F,z,G){"use strict";function X(R,L){if(R["_wrap_"+L])return R["_wrap_"+L];var P=function(N){R[L](N)};return R["_wrap_"+L]=P,P}z.a=X},function(F,z,G){"use strict";var X={};function R(L){var P=X[L];if(!P){for(var N=L.toString(16),E=N.length;E<6;E++)N="0"+N;P="#"+N,X[L]=P}return P}z.a=R},function(F,z,G){"use strict";var X=G(0);function R(L){var P=0,N=0,E=0,x=0;return Object(X.a)(L)?L.length===1?P=N=E=x=L[0]:L.length===2?(P=E=L[0],N=x=L[1]):L.length===3?(P=L[0],N=x=L[1],E=L[2]):(P=L[0],N=L[1],E=L[2],x=L[3]):P=N=E=x=L,{r1:P,r2:N,r3:E,r4:x}}z.a=R},function(F,z,G){"use strict";var X=function(R,L,P){return R<L?L:R>P?P:R};z.a=X},function(F,z,G){"use strict";var X=function(R,L){var P=L.toString(),N=P.indexOf(".");if(N===-1)return Math.round(R);var E=P.substr(N+1).length;return E>20&&(E=20),parseFloat(R.toFixed(E))};z.a=X},function(F,z,G){"use strict";var X=G(5),R=function(L){return Object(X.a)(L)&&L%1!==0};z.a=R},function(F,z,G){"use strict";var X=G(5),R=function(L){return Object(X.a)(L)&&L%2===0};z.a=R},function(F,z,G){"use strict";var X=G(5),R=Number.isInteger?Number.isInteger:function(L){return Object(X.a)(L)&&L%1===0};z.a=R},function(F,z,G){"use strict";var X=G(5),R=function(L){return Object(X.a)(L)&&L<0};z.a=R},function(F,z,G){"use strict";z.a=R;var X=1e-5;function R(L,P,N){return N===void 0&&(N=X),Math.abs(L-P)<N}},function(F,z,G){"use strict";var X=G(5),R=function(L){return Object(X.a)(L)&&L%2!==0};z.a=R},function(F,z,G){"use strict";var X=G(5),R=function(L){return Object(X.a)(L)&&L>0};z.a=R},function(F,z,G){"use strict";var X=G(0),R=G(2);z.a=function(L,P){if(Object(X.a)(L)){for(var N,E=-1/0,x=0;x<L.length;x++){var p=L[x],y=Object(R.a)(P)?P(p):p[P];y>E&&(N=p,E=y)}return N}}},function(F,z,G){"use strict";var X=G(0),R=G(2);z.a=function(L,P){if(Object(X.a)(L)){for(var N,E=1/0,x=0;x<L.length;x++){var p=L[x],y=Object(R.a)(P)?P(p):p[P];y<E&&(N=p,E=y)}return N}}},function(F,z,G){"use strict";var X=function(R,L){return(R%L+L)%L};z.a=X},function(F,z,G){"use strict";var X=180/Math.PI,R=function(L){return X*L};z.a=R},function(F,z,G){"use strict";z.a=parseInt},function(F,z,G){"use strict";var X=Math.PI/180,R=function(L){return X*L};z.a=R},function(F,z,G){"use strict";var X=G(8);z.a=X.a},function(F,z,G){"use strict";var X=G(29);z.a=X.a},function(F,z,G){"use strict";var X=G(13),R=G(15);z.a=function(L,P){return Object(X.a)(Object(R.a)(L),P)}},function(F,z,G){"use strict";var X=G(9),R=function(L){return Object(X.a)(L).toLowerCase()};z.a=R},function(F,z,G){"use strict";var X=G(9),R=function(L){var P=Object(X.a)(L);return P.charAt(0).toLowerCase()+P.substring(1)};z.a=R},function(F,z,G){"use strict";function X(R,L){return!R||!L?R:R.replace(/\\?\{([^{}]+)\}/g,function(P,N){return P.charAt(0)==="\\"?P.slice(1):L[N]===void 0?"":L[N]})}z.a=X},function(F,z,G){"use strict";var X=G(9),R=function(L){return Object(X.a)(L).toUpperCase()};z.a=R},function(F,z,G){"use strict";var X=G(9),R=function(L){var P=Object(X.a)(L);return P.charAt(0).toUpperCase()+P.substring(1)};z.a=R},function(F,z,G){"use strict";var X=G(3),R=function(L){return Object(X.a)(L,"Arguments")};z.a=R},function(F,z,G){"use strict";var X=G(3),R=function(L){return Object(X.a)(L,"Boolean")};z.a=R},function(F,z,G){"use strict";var X=G(3),R=function(L){return Object(X.a)(L,"Date")};z.a=R},function(F,z,G){"use strict";var X=G(3),R=function(L){return Object(X.a)(L,"Error")};z.a=R},function(F,z,G){"use strict";var X=G(5);z.a=function(R){return Object(X.a)(R)&&isFinite(R)}},function(F,z,G){"use strict";var X=function(R){return R===null};z.a=X},function(F,z,G){"use strict";var X=G(3),R=function(L){return Object(X.a)(L,"RegExp")};z.a=R},function(F,z,G){"use strict";var X=function(R){return R===void 0};z.a=X},function(F,z,G){"use strict";var X=function(R){return R instanceof Element||R instanceof HTMLDocument};z.a=X},function(F,z,G){"use strict";z.a=X;function X(R){var L=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(P){return setTimeout(P,16)};return L(R)}},function(F,z,G){"use strict";z.a=X;function X(R){var L=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;L(R)}},function(F,z,G){"use strict";var X=G(16),R=G(2),L=function(){for(var P=[],N=0;N<arguments.length;N++)P[N]=arguments[N];for(var E=P[0],x=1;x<P.length;x++){var p=P[x];Object(R.a)(p)&&(p=p.prototype),Object(X.a)(E.prototype,p)}};z.a=L},function(F,z,G){"use strict";var X=G(0),R=function(L){if(typeof L!="object"||L===null)return L;var P;if(Object(X.a)(L)){P=[];for(var N=0,E=L.length;N<E;N++)typeof L[N]=="object"&&L[N]!=null?P[N]=R(L[N]):P[N]=L[N]}else{P={};for(var x in L)typeof L[x]=="object"&&L[x]!=null?P[x]=R(L[x]):P[x]=L[x]}return P};z.a=R},function(F,z,G){"use strict";function X(R,L,P){var N;return function(){var E=this,x=arguments,p=function(){N=null,P||R.apply(E,x)},y=P&&!N;clearTimeout(N),N=setTimeout(p,L),y&&R.apply(E,x)}}z.a=X},function(F,z,G){"use strict";var X=G(0),R=G(10),L=5;function P(E,x,p,y){p=p||0,y=y||L;for(var g in x)if(x.hasOwnProperty(g)){var A=x[g];A!==null&&Object(R.a)(A)?(Object(R.a)(E[g])||(E[g]={}),p<y?P(E[g],A,p+1,y):E[g]=x[g]):Object(X.a)(A)?(E[g]=[],E[g]=E[g].concat(A)):A!==void 0&&(E[g]=A)}}var N=function(E){for(var x=[],p=1;p<arguments.length;p++)x[p-1]=arguments[p];for(var y=0;y<x.length;y+=1)P(E,x[y]);return E};z.a=N},function(F,z,G){"use strict";var X=G(16),R=G(2),L=function(P,N,E,x){Object(R.a)(N)||(E=N,N=P,P=function(){});var p=Object.create?function(g,A){return Object.create(g,{constructor:{value:A}})}:function(g,A){function _(){}_.prototype=g;var S=new _;return S.constructor=A,S},y=p(N.prototype,P);return P.prototype=Object(X.a)(y,P.prototype),P.superclass=p(N.prototype,N),Object(X.a)(y,E),Object(X.a)(P,x),P};z.a=L},function(F,z,G){"use strict";var X=G(1),R=function(L,P){if(!Object(X.a)(L))return-1;var N=Array.prototype.indexOf;if(N)return N.call(L,P);for(var E=-1,x=0;x<L.length;x++)if(L[x]===P){E=x;break}return E};z.a=R},function(F,z,G){"use strict";var X=G(7),R=G(1),L=G(30),P=G(31),N=Object.prototype.hasOwnProperty;function E(x){if(Object(X.a)(x))return!0;if(Object(R.a)(x))return!x.length;var p=Object(L.a)(x);if(p==="Map"||p==="Set")return!x.size;if(Object(P.a)(x))return!Object.keys(x).length;for(var y in x)if(N.call(x,y))return!1;return!0}z.a=E},function(F,z,G){"use strict";var X=G(2),R=G(33);z.a=function(L,P,N){return Object(X.a)(N)?!!N(L,P):Object(R.a)(L,P)}},function(F,z,G){"use strict";var X=G(1),R=function(L,P){if(!Object(X.a)(L))return L;for(var N=[],E=0;E<L.length;E++){var x=L[E];N.push(P(x,E))}return N};z.a=R},function(F,z,G){"use strict";var X=G(7),R=G(12),L=function(P){return P};z.a=function(P,N){N===void 0&&(N=L);var E={};return Object(R.a)(P)&&!Object(X.a)(P)&&Object.keys(P).forEach(function(x){E[x]=N(P[x],x)}),E}},function(F,z,G){"use strict";var X=G(4);z.a=function(R,L,P){for(var N=0,E=Object(X.a)(L)?L.split("."):L;R&&N<E.length;)R=R[E[N++]];return R===void 0||N<E.length?P:R}},function(F,z,G){"use strict";var X=G(12),R=G(4),L=G(5);z.a=function(P,N,E){var x=P,p=Object(R.a)(N)?N.split("."):N;return p.forEach(function(y,g){g<p.length-1?(Object(X.a)(x[y])||(x[y]=Object(L.a)(p[g+1])?[]:{}),x=x[y]):x[y]=E}),P}},function(F,z,G){"use strict";var X=G(8),R=G(10),L=Object.prototype.hasOwnProperty;z.a=function(P,N){if(P===null||!Object(R.a)(P))return{};var E={};return Object(X.a)(N,function(x){L.call(P,x)&&(E[x]=P[x])}),E}},function(F,z,G){"use strict";var X=G(25);z.a=function(R,L){return Object(X.a)(R,function(P,N,E){return L.includes(E)||(P[E]=N),P},{})}},function(F,z,G){"use strict";z.a=function(X,R,L){var P,N,E,x,p=0;L||(L={});var y=function(){p=L.leading===!1?0:Date.now(),P=null,x=X.apply(N,E),P||(N=E=null)},g=function(){var A=Date.now();!p&&L.leading===!1&&(p=A);var _=R-(A-p);return N=this,E=arguments,_<=0||_>R?(P&&(clearTimeout(P),P=null),p=A,x=X.apply(N,E),P||(N=E=null)):!P&&L.trailing!==!1&&(P=setTimeout(y,_)),x};return g.cancel=function(){clearTimeout(P),p=0,P=N=E=null},g}},function(F,z,G){"use strict";var X=G(1);z.a=function(R){return Object(X.a)(R)?Array.prototype.slice.call(R):[]}},function(F,z,G){"use strict";var X={};z.a=function(R){return R=R||"g",X[R]?X[R]+=1:X[R]=1,R+X[R]}},function(F,z,G){"use strict";z.a=function(){}},function(F,z,G){"use strict";z.a=function(X){return X}},function(F,z,G){"use strict";z.a=L;var X=G(7),R=G(1);function L(P){return Object(X.a)(P)?0:Object(R.a)(P)?P.length:Object.keys(P).length}},function(F,z,G){"use strict";z.a=Y;var X=function(Nt,st){return X=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(yt,kt){yt.__proto__=kt}||function(yt,kt){for(var ee in kt)Object.prototype.hasOwnProperty.call(kt,ee)&&(yt[ee]=kt[ee])},X(Nt,st)};function R(Nt,st){if(typeof st!="function"&&st!==null)throw new TypeError("Class extends value "+String(st)+" is not a constructor or null");X(Nt,st);function yt(){this.constructor=Nt}Nt.prototype=st===null?Object.create(st):(yt.prototype=st.prototype,new yt)}var L=function(){return L=Object.assign||function(st){for(var yt,kt=1,ee=arguments.length;kt<ee;kt++){yt=arguments[kt];for(var $t in yt)Object.prototype.hasOwnProperty.call(yt,$t)&&(st[$t]=yt[$t])}return st},L.apply(this,arguments)};function P(Nt,st){var yt={};for(var kt in Nt)Object.prototype.hasOwnProperty.call(Nt,kt)&&st.indexOf(kt)<0&&(yt[kt]=Nt[kt]);if(Nt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ee=0,kt=Object.getOwnPropertySymbols(Nt);ee<kt.length;ee++)st.indexOf(kt[ee])<0&&Object.prototype.propertyIsEnumerable.call(Nt,kt[ee])&&(yt[kt[ee]]=Nt[kt[ee]]);return yt}function N(Nt,st,yt,kt){var ee=arguments.length,$t=ee<3?st:kt===null?kt=Object.getOwnPropertyDescriptor(st,yt):kt,ge;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")$t=Reflect.decorate(Nt,st,yt,kt);else for(var Pe=Nt.length-1;Pe>=0;Pe--)(ge=Nt[Pe])&&($t=(ee<3?ge($t):ee>3?ge(st,yt,$t):ge(st,yt))||$t);return ee>3&&$t&&Object.defineProperty(st,yt,$t),$t}function E(Nt,st){return function(yt,kt){st(yt,kt,Nt)}}function x(Nt,st,yt,kt,ee,$t){function ge(Yt){if(Yt!==void 0&&typeof Yt!="function")throw new TypeError("Function expected");return Yt}for(var Pe=kt.kind,er=Pe==="getter"?"get":Pe==="setter"?"set":"value",Jt=!st&&Nt?kt.static?Nt:Nt.prototype:null,ae=st||(Jt?Object.getOwnPropertyDescriptor(Jt,kt.name):{}),Se,xe=!1,we=yt.length-1;we>=0;we--){var zt={};for(var Wt in kt)zt[Wt]=Wt==="access"?{}:kt[Wt];for(var Wt in kt.access)zt.access[Wt]=kt.access[Wt];zt.addInitializer=function(Yt){if(xe)throw new TypeError("Cannot add initializers after decoration has completed");$t.push(ge(Yt||null))};var Ie=(0,yt[we])(Pe==="accessor"?{get:ae.get,set:ae.set}:ae[er],zt);if(Pe==="accessor"){if(Ie===void 0)continue;if(Ie===null||typeof Ie!="object")throw new TypeError("Object expected");(Se=ge(Ie.get))&&(ae.get=Se),(Se=ge(Ie.set))&&(ae.set=Se),(Se=ge(Ie.init))&&ee.push(Se)}else(Se=ge(Ie))&&(Pe==="field"?ee.push(Se):ae[er]=Se)}Jt&&Object.defineProperty(Jt,kt.name,ae),xe=!0}function p(Nt,st,yt){for(var kt=arguments.length>2,ee=0;ee<st.length;ee++)yt=kt?st[ee].call(Nt,yt):st[ee].call(Nt);return kt?yt:void 0}function y(Nt){return typeof Nt=="symbol"?Nt:"".concat(Nt)}function g(Nt,st,yt){return typeof st=="symbol"&&(st=st.description?"[".concat(st.description,"]"):""),Object.defineProperty(Nt,"name",{configurable:!0,value:yt?"".concat(yt," ",st):st})}function A(Nt,st){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(Nt,st)}function _(Nt,st,yt,kt){function ee($t){return $t instanceof yt?$t:new yt(function(ge){ge($t)})}return new(yt||(yt=Promise))(function($t,ge){function Pe(ae){try{Jt(kt.next(ae))}catch(Se){ge(Se)}}function er(ae){try{Jt(kt.throw(ae))}catch(Se){ge(Se)}}function Jt(ae){ae.done?$t(ae.value):ee(ae.value).then(Pe,er)}Jt((kt=kt.apply(Nt,st||[])).next())})}function S(Nt,st){var yt={label:0,sent:function(){if($t[0]&1)throw $t[1];return $t[1]},trys:[],ops:[]},kt,ee,$t,ge;return ge={next:Pe(0),throw:Pe(1),return:Pe(2)},typeof Symbol=="function"&&(ge[Symbol.iterator]=function(){return this}),ge;function Pe(Jt){return function(ae){return er([Jt,ae])}}function er(Jt){if(kt)throw new TypeError("Generator is already executing.");for(;ge&&(ge=0,Jt[0]&&(yt=0)),yt;)try{if(kt=1,ee&&($t=Jt[0]&2?ee.return:Jt[0]?ee.throw||(($t=ee.return)&&$t.call(ee),0):ee.next)&&!($t=$t.call(ee,Jt[1])).done)return $t;switch(ee=0,$t&&(Jt=[Jt[0]&2,$t.value]),Jt[0]){case 0:case 1:$t=Jt;break;case 4:return yt.label++,{value:Jt[1],done:!1};case 5:yt.label++,ee=Jt[1],Jt=[0];continue;case 7:Jt=yt.ops.pop(),yt.trys.pop();continue;default:if($t=yt.trys,!($t=$t.length>0&&$t[$t.length-1])&&(Jt[0]===6||Jt[0]===2)){yt=0;continue}if(Jt[0]===3&&(!$t||Jt[1]>$t[0]&&Jt[1]<$t[3])){yt.label=Jt[1];break}if(Jt[0]===6&&yt.label<$t[1]){yt.label=$t[1],$t=Jt;break}if($t&&yt.label<$t[2]){yt.label=$t[2],yt.ops.push(Jt);break}$t[2]&&yt.ops.pop(),yt.trys.pop();continue}Jt=st.call(Nt,yt)}catch(ae){Jt=[6,ae],ee=0}finally{kt=$t=0}if(Jt[0]&5)throw Jt[1];return{value:Jt[0]?Jt[1]:void 0,done:!0}}}var O=Object.create?function(Nt,st,yt,kt){kt===void 0&&(kt=yt);var ee=Object.getOwnPropertyDescriptor(st,yt);(!ee||("get"in ee?!st.__esModule:ee.writable||ee.configurable))&&(ee={enumerable:!0,get:function(){return st[yt]}}),Object.defineProperty(Nt,kt,ee)}:function(Nt,st,yt,kt){kt===void 0&&(kt=yt),Nt[kt]=st[yt]};function B(Nt,st){for(var yt in Nt)yt!=="default"&&!Object.prototype.hasOwnProperty.call(st,yt)&&O(st,Nt,yt)}function m(Nt){var st=typeof Symbol=="function"&&Symbol.iterator,yt=st&&Nt[st],kt=0;if(yt)return yt.call(Nt);if(Nt&&typeof Nt.length=="number")return{next:function(){return Nt&&kt>=Nt.length&&(Nt=void 0),{value:Nt&&Nt[kt++],done:!Nt}}};throw new TypeError(st?"Object is not iterable.":"Symbol.iterator is not defined.")}function d(Nt,st){var yt=typeof Symbol=="function"&&Nt[Symbol.iterator];if(!yt)return Nt;var kt=yt.call(Nt),ee,$t=[],ge;try{for(;(st===void 0||st-- >0)&&!(ee=kt.next()).done;)$t.push(ee.value)}catch(Pe){ge={error:Pe}}finally{try{ee&&!ee.done&&(yt=kt.return)&&yt.call(kt)}finally{if(ge)throw ge.error}}return $t}function tt(){for(var Nt=[],st=0;st<arguments.length;st++)Nt=Nt.concat(d(arguments[st]));return Nt}function Y(){for(var Nt=0,st=0,yt=arguments.length;st<yt;st++)Nt+=arguments[st].length;for(var kt=Array(Nt),ee=0,st=0;st<yt;st++)for(var $t=arguments[st],ge=0,Pe=$t.length;ge<Pe;ge++,ee++)kt[ee]=$t[ge];return kt}function V(Nt,st,yt){if(yt||arguments.length===2)for(var kt=0,ee=st.length,$t;kt<ee;kt++)($t||!(kt in st))&&($t||($t=Array.prototype.slice.call(st,0,kt)),$t[kt]=st[kt]);return Nt.concat($t||Array.prototype.slice.call(st))}function $(Nt){return this instanceof $?(this.v=Nt,this):new $(Nt)}function q(Nt,st,yt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var kt=yt.apply(Nt,st||[]),ee,$t=[];return ee={},ge("next"),ge("throw"),ge("return"),ee[Symbol.asyncIterator]=function(){return this},ee;function ge(xe){kt[xe]&&(ee[xe]=function(we){return new Promise(function(zt,Wt){$t.push([xe,we,zt,Wt])>1||Pe(xe,we)})})}function Pe(xe,we){try{er(kt[xe](we))}catch(zt){Se($t[0][3],zt)}}function er(xe){xe.value instanceof $?Promise.resolve(xe.value.v).then(Jt,ae):Se($t[0][2],xe)}function Jt(xe){Pe("next",xe)}function ae(xe){Pe("throw",xe)}function Se(xe,we){xe(we),$t.shift(),$t.length&&Pe($t[0][0],$t[0][1])}}function rt(Nt){var st,yt;return st={},kt("next"),kt("throw",function(ee){throw ee}),kt("return"),st[Symbol.iterator]=function(){return this},st;function kt(ee,$t){st[ee]=Nt[ee]?function(ge){return(yt=!yt)?{value:$(Nt[ee](ge)),done:!1}:$t?$t(ge):ge}:$t}}function Q(Nt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var st=Nt[Symbol.asyncIterator],yt;return st?st.call(Nt):(Nt=typeof m=="function"?m(Nt):Nt[Symbol.iterator](),yt={},kt("next"),kt("throw"),kt("return"),yt[Symbol.asyncIterator]=function(){return this},yt);function kt($t){yt[$t]=Nt[$t]&&function(ge){return new Promise(function(Pe,er){ge=Nt[$t](ge),ee(Pe,er,ge.done,ge.value)})}}function ee($t,ge,Pe,er){Promise.resolve(er).then(function(Jt){$t({value:Jt,done:Pe})},ge)}}function it(Nt,st){return Object.defineProperty?Object.defineProperty(Nt,"raw",{value:st}):Nt.raw=st,Nt}var ht=Object.create?function(Nt,st){Object.defineProperty(Nt,"default",{enumerable:!0,value:st})}:function(Nt,st){Nt.default=st};function dt(Nt){if(Nt&&Nt.__esModule)return Nt;var st={};if(Nt!=null)for(var yt in Nt)yt!=="default"&&Object.prototype.hasOwnProperty.call(Nt,yt)&&O(st,Nt,yt);return ht(st,Nt),st}function Ot(Nt){return Nt&&Nt.__esModule?Nt:{default:Nt}}function It(Nt,st,yt,kt){if(yt==="a"&&!kt)throw new TypeError("Private accessor was defined without a getter");if(typeof st=="function"?Nt!==st||!kt:!st.has(Nt))throw new TypeError("Cannot read private member from an object whose class did not declare it");return yt==="m"?kt:yt==="a"?kt.call(Nt):kt?kt.value:st.get(Nt)}function Kt(Nt,st,yt,kt,ee){if(kt==="m")throw new TypeError("Private method is not writable");if(kt==="a"&&!ee)throw new TypeError("Private accessor was defined without a setter");if(typeof st=="function"?Nt!==st||!ee:!st.has(Nt))throw new TypeError("Cannot write private member to an object whose class did not declare it");return kt==="a"?ee.call(Nt,yt):ee?ee.value=yt:st.set(Nt,yt),yt}function Ft(Nt,st){if(st===null||typeof st!="object"&&typeof st!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof Nt=="function"?st===Nt:Nt.has(st)}},function(F,z,G){"use strict";var X=G(4),R=G(9),L=G(34);z.a=function(P,N,E,x){x===void 0&&(x="...");var p=16,y=Object(L.a)(x,E),g=Object(X.a)(P)?P:Object(R.a)(P),A=N,_=[],S,O;if(Object(L.a)(P,E)<=N)return P;for(;S=g.substr(0,p),O=Object(L.a)(S,E),!(O+y>A&&O>A);)if(_.push(S),A-=O,g=g.substr(p),!g)return _.join("");for(;S=g.substr(0,1),O=Object(L.a)(S,E),!(O+y>A);)if(_.push(S),A-=O,g=g.substr(1),!g)return _.join("");return""+_.join("")+x}},function(F,z,G){"use strict";var X=function(){function R(){this.map={}}return R.prototype.has=function(L){return this.map[L]!==void 0},R.prototype.get=function(L,P){var N=this.map[L];return N===void 0?P:N},R.prototype.set=function(L,P){this.map[L]=P},R.prototype.clear=function(){this.map={}},R.prototype.delete=function(L){delete this.map[L]},R.prototype.size=function(){return Object.keys(this.map).length},R}();z.a=X},function(F,z){function G(E,x,p,y){y===void 0&&(y=[]);var g=this;g.w=E||0,g.h=x||0,g.y=p||0,g.x=0,g.c=y||[],g.cs=y.length,g.prelim=0,g.mod=0,g.shift=0,g.change=0,g.tl=null,g.tr=null,g.el=null,g.er=null,g.msel=0,g.mser=0}G.fromNode=function(E,x){if(!E)return null;var p=[];return E.children.forEach(function(y){p.push(G.fromNode(y,x))}),x?new G(E.height,E.width,E.x,p):new G(E.width,E.height,E.y,p)};function X(E,x,p){p?E.y+=x:E.x+=x,E.children.forEach(function(y){X(y,x,p)})}function R(E,x){var p=x?E.y:E.x;return E.children.forEach(function(y){p=Math.min(R(y,x),p)}),p}function L(E,x){var p=R(E,x);X(E,-p,x)}function P(E,x,p){p?x.y=E.x:x.x=E.x,E.c.forEach(function(y,g){P(y,x.children[g],p)})}function N(E,x,p){p===void 0&&(p=0),x?(E.x=p,p+=E.width):(E.y=p,p+=E.height),E.children.forEach(function(y){N(y,x,p)})}F.exports=function(E,x){x===void 0&&(x={});var p=x.isHorizontal;function y(Q){if(Q.cs===0){g(Q);return}y(Q.c[0]);for(var it=q(B(Q.c[0].el),0,null),ht=1;ht<Q.cs;++ht){y(Q.c[ht]);var dt=B(Q.c[ht].er);A(Q,ht,it),it=q(dt,ht,it)}tt(Q),g(Q)}function g(Q){Q.cs===0?(Q.el=Q,Q.er=Q,Q.msel=Q.mser=0):(Q.el=Q.c[0].el,Q.msel=Q.c[0].msel,Q.er=Q.c[Q.cs-1].er,Q.mser=Q.c[Q.cs-1].mser)}function A(Q,it,ht){for(var dt=Q.c[it-1],Ot=dt.mod,It=Q.c[it],Kt=It.mod;dt!==null&&It!==null;){B(dt)>ht.low&&(ht=ht.nxt);var Ft=Ot+dt.prelim+dt.w-(Kt+It.prelim);Ft>0&&(Kt+=Ft,_(Q,it,ht.index,Ft));var Nt=B(dt),st=B(It);Nt<=st&&(dt=O(dt),dt!==null&&(Ot+=dt.mod)),Nt>=st&&(It=S(It),It!==null&&(Kt+=It.mod))}!dt&&It?m(Q,it,It,Kt):dt&&!It&&d(Q,it,dt,Ot)}function _(Q,it,ht,dt){Q.c[it].mod+=dt,Q.c[it].msel+=dt,Q.c[it].mser+=dt,V(Q,it,ht,dt)}function S(Q){return Q.cs===0?Q.tl:Q.c[0]}function O(Q){return Q.cs===0?Q.tr:Q.c[Q.cs-1]}function B(Q){return Q.y+Q.h}function m(Q,it,ht,dt){var Ot=Q.c[0].el;Ot.tl=ht;var It=dt-ht.mod-Q.c[0].msel;Ot.mod+=It,Ot.prelim-=It,Q.c[0].el=Q.c[it].el,Q.c[0].msel=Q.c[it].msel}function d(Q,it,ht,dt){var Ot=Q.c[it].er;Ot.tr=ht;var It=dt-ht.mod-Q.c[it].mser;Ot.mod+=It,Ot.prelim-=It,Q.c[it].er=Q.c[it-1].er,Q.c[it].mser=Q.c[it-1].mser}function tt(Q){Q.prelim=(Q.c[0].prelim+Q.c[0].mod+Q.c[Q.cs-1].mod+Q.c[Q.cs-1].prelim+Q.c[Q.cs-1].w)/2-Q.w/2}function Y(Q,it){it+=Q.mod,Q.x=Q.prelim+it,$(Q);for(var ht=0;ht<Q.cs;ht++)Y(Q.c[ht],it)}function V(Q,it,ht,dt){if(ht!==it-1){var Ot=it-ht;Q.c[ht+1].shift+=dt/Ot,Q.c[it].shift-=dt/Ot,Q.c[it].change-=dt-dt/Ot}}function $(Q){for(var it=0,ht=0,dt=0;dt<Q.cs;dt++)it+=Q.c[dt].shift,ht+=it+Q.c[dt].change,Q.c[dt].mod+=ht}function q(Q,it,ht){for(;ht!==null&&Q>=ht.low;)ht=ht.nxt;return{low:Q,index:it,nxt:ht}}N(E,p);var rt=G.fromNode(E,p);return y(rt),Y(rt,0),P(rt,E,p),L(E,p),E}},function(F,z,G){function X(g,A){g.prototype=Object.create(A.prototype),g.prototype.constructor=g,R(g,A)}function R(g,A){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(S,O){return S.__proto__=O,S},R(g,A)}var L=G(11),P=G(121),N=G(17),E=G(6),x=function(g){X(A,g);function A(){return g.apply(this,arguments)||this}var _=A.prototype;return _.execute=function(){var O=this;return O.rootNode.width=0,N(O.rootNode,O.options,P)},A}(L),p={};function y(g,A){return A=E.assign({},p,A),new x(g,A).execute()}F.exports=y},function(F,z,G){var X=G(6);function R(N,E){N===void 0&&(N=0),E===void 0&&(E=[]);var x=this;x.x=x.y=0,x.leftChild=x.rightChild=null,x.height=0,x.children=E}var L={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function P(N,E,x){x?(E.x=N.x,E.y=N.y):(E.x=N.y,E.y=N.x),N.children.forEach(function(p,y){P(p,E.children[y],x)})}F.exports=function(N,E){E===void 0&&(E={}),E=X.assign({},L,E);var x=0;function p(S){if(!S)return null;S.width=0,S.depth&&S.depth>x&&(x=S.depth);var O=S.children,B=O.length,m=new R(S.height,[]);return O.forEach(function(d,tt){var Y=p(d);m.children.push(Y),tt===0&&(m.leftChild=Y),tt===B-1&&(m.rightChild=Y)}),m.originNode=S,m.isLeaf=S.isLeaf(),m}function y(S){if(S.isLeaf||S.children.length===0)S.drawingDepth=x;else{var O=S.children.map(function(m){return y(m)}),B=Math.min.apply(null,O);S.drawingDepth=B-1}return S.drawingDepth}var g;function A(S){S.x=S.drawingDepth*E.rankSep,S.isLeaf?(S.y=0,g&&(S.y=g.y+g.height+E.nodeSep,S.originNode.parent!==g.originNode.parent&&(S.y+=E.subTreeSep)),g=S):(S.children.forEach(function(O){A(O)}),S.y=(S.leftChild.y+S.rightChild.y)/2)}var _=p(N);return y(_),A(_),P(_,N,E.isHorizontal),N}},function(F,z,G){function X(_,S){_.prototype=Object.create(S.prototype),_.prototype.constructor=_,R(_,S)}function R(_,S){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(B,m){return B.__proto__=m,B},R(_,S)}var L=G(11),P=G(123),N=G(35),E=G(6),x=["LR","RL","H"],p=x[0],y=function(_){X(S,_);function S(){return _.apply(this,arguments)||this}var O=S.prototype;return O.execute=function(){var m=this,d=m.options,tt=m.rootNode;d.isHorizontal=!0;var Y=d.indent,V=Y===void 0?20:Y,$=d.dropCap,q=$===void 0?!0:$,rt=d.direction,Q=rt===void 0?p:rt,it=d.align;if(Q&&x.indexOf(Q)===-1)throw new TypeError("Invalid direction: "+Q);if(Q===x[0])P(tt,V,q,it);else if(Q===x[1])P(tt,V,q,it),tt.right2left();else if(Q===x[2]){var ht=N(tt,d),dt=ht.left,Ot=ht.right;P(dt,V,q,it),dt.right2left(),P(Ot,V,q,it);var It=dt.getBoundingBox();Ot.translate(It.width,0),tt.x=Ot.x-tt.width/2}return tt},S}(L),g={};function A(_,S){return S=E.assign({},g,S),new y(_,S).execute()}F.exports=A},function(F,z,G){var X=G(6);function R(L,P,N,E,x){var p=typeof N=="function"?N(L):N*L.depth;if(!E)try{if(L.id===L.parent.children[0].id){L.x+=p,L.y=P?P.y:0;return}}catch(A){}if(L.x+=p,P){if(L.y=P.y+X.getHeight(P,L,x),P.parent&&L.parent.id!==P.parent.id){var y=P.parent,g=y.y+X.getHeight(y,L,x);L.y=g>L.y?g:L.y}}else L.y=0}F.exports=function(L,P,N,E){var x=null;L.eachNode(function(p){R(p,x,P,N,E),x=p})}},function(F,z,G){function X(g,A){g.prototype=Object.create(A.prototype),g.prototype.constructor=g,R(g,A)}function R(g,A){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(S,O){return S.__proto__=O,S},R(g,A)}var L=G(11),P=G(125),N=G(17),E=G(6),x=function(g){X(A,g);function A(){return g.apply(this,arguments)||this}var _=A.prototype;return _.execute=function(){var O=this;return N(O.rootNode,O.options,P)},A}(L),p={};function y(g,A){return A=E.assign({},p,A),new x(g,A).execute()}F.exports=y},function(F,z,G){var X=G(6);function R(N,E){var x=0;return N.children.length?N.children.forEach(function(p){x+=R(p,E)}):x=N.height,N._subTreeSep=E.getSubTreeSep(N.data),N.totalHeight=Math.max(N.height,x)+2*N._subTreeSep,N.totalHeight}function L(N){var E=N.children,x=E.length;if(x){E.forEach(function(S){L(S)});var p=E[0],y=E[x-1],g=y.y-p.y+y.height,A=0;if(E.forEach(function(S){A+=S.totalHeight}),g>N.height)N.y=p.y+g/2-N.height/2;else if(E.length!==1||N.height>A){var _=N.y+(N.height-g)/2-p.y;E.forEach(function(S){S.translate(0,_)})}else N.y=(p.y+p.height/2+y.y+y.height/2)/2-N.height/2}}var P={getSubTreeSep:function(){return 0}};F.exports=function(N,E){E===void 0&&(E={}),E=X.assign({},P,E),N.parent={x:0,width:0,height:0,y:0},N.BFTraverse(function(x){x.x=x.parent.x+x.parent.width}),N.parent=null,R(N,E),N.startY=0,N.y=N.totalHeight/2-N.height/2,N.eachNode(function(x){var p=x.children,y=p.length;if(y){var g=p[0];if(g.startY=x.startY+x._subTreeSep,y===1)g.y=x.y+x.height/2-g.height/2;else{g.y=g.startY+g.totalHeight/2-g.height/2;for(var A=1;A<y;A++){var _=p[A];_.startY=p[A-1].startY+p[A-1].totalHeight,_.y=_.startY+_.totalHeight/2-_.height/2}}}}),L(N)}}])})},483360:function(He,F,z){"use strict";var G=this&&this.__createBinding||(Object.create?function(L,P,N,E){E===void 0&&(E=N);var x=Object.getOwnPropertyDescriptor(P,N);(!x||("get"in x?!P.__esModule:x.writable||x.configurable))&&(x={enumerable:!0,get:function(){return P[N]}}),Object.defineProperty(L,E,x)}:function(L,P,N,E){E===void 0&&(E=N),L[E]=P[N]}),X=this&&this.__exportStar||function(L,P){for(var N in L)N!=="default"&&!Object.prototype.hasOwnProperty.call(P,N)&&G(P,L,N)};Object.defineProperty(F,"__esModule",{value:!0}),F.getLayoutByName=F.unRegisterLayout=F.registerLayout=void 0;var R=z(695326);Object.defineProperty(F,"registerLayout",{enumerable:!0,get:function(){return R.registerLayout}}),Object.defineProperty(F,"unRegisterLayout",{enumerable:!0,get:function(){return R.unRegisterLayout}}),Object.defineProperty(F,"getLayoutByName",{enumerable:!0,get:function(){return R.getLayoutByName}}),X(z(702584),F)},762329:function(He,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.Base=void 0;var z=function(){function G(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=function(){}}return G.prototype.layout=function(X){return this.init(X),this.execute(!0)},G.prototype.init=function(X){this.nodes=X.nodes||[],this.edges=X.edges||[],this.combos=X.combos||[],this.comboEdges=X.comboEdges||[],this.hiddenNodes=X.hiddenNodes||[],this.hiddenEdges=X.hiddenEdges||[],this.hiddenCombos=X.hiddenCombos||[],this.vedges=X.vedges||[]},G.prototype.execute=function(X){},G.prototype.executeWithWorker=function(){},G.prototype.getDefaultCfg=function(){return{}},G.prototype.updateCfg=function(X){X&&Object.assign(this,X)},G.prototype.getType=function(){return"base"},G.prototype.destroy=function(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0},G}();F.Base=z},964885:function(He,F,z){"use strict";var G=this&&this.__extends||function(){var x=function(p,y){return x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,A){g.__proto__=A}||function(g,A){for(var _ in A)Object.prototype.hasOwnProperty.call(A,_)&&(g[_]=A[_])},x(p,y)};return function(p,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");x(p,y);function g(){this.constructor=p}p.prototype=y===null?Object.create(y):(g.prototype=y.prototype,new g)}}();Object.defineProperty(F,"__esModule",{value:!0}),F.CircularLayout=void 0;var X=z(762329),R=z(449784);function L(x,p,y,g){x.forEach(function(A,_){x[_].children=[],x[_].parent=[]}),g?p.forEach(function(A){var _=(0,R.getEdgeTerminal)(A,"source"),S=(0,R.getEdgeTerminal)(A,"target"),O=0;_&&(O=y[_]);var B=0;S&&(B=y[S]);var m=x[O].children,d=x[B].parent;m.push(x[B].id),d.push(x[O].id)}):p.forEach(function(A){var _=(0,R.getEdgeTerminal)(A,"source"),S=(0,R.getEdgeTerminal)(A,"target"),O=0;_&&(O=y[_]);var B=0;S&&(B=y[S]);var m=x[O].children,d=x[B].children;m.push(x[B].id),d.push(x[O].id)})}function P(x,p,y){for(var g=y.length,A=0;A<g;A++){var _=(0,R.getEdgeTerminal)(y[A],"source"),S=(0,R.getEdgeTerminal)(y[A],"target");if(x.id===_&&p.id===S||p.id===_&&x.id===S)return!0}return!1}function N(x,p){var y=x.degree,g=p.degree;return y<g?-1:y>g?1:0}var E=function(x){G(p,x);function p(y){var g=x.call(this)||this;return g.radius=null,g.nodeSize=void 0,g.startRadius=null,g.endRadius=null,g.startAngle=0,g.endAngle=2*Math.PI,g.clockwise=!0,g.divisions=1,g.ordering=null,g.angleRatio=1,g.nodes=[],g.edges=[],g.nodeMap={},g.degrees=[],g.width=300,g.height=300,g.updateCfg(y),g}return p.prototype.getDefaultCfg=function(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}},p.prototype.execute=function(){var y,g=this,A=g.nodes,_=g.edges,S=A.length;if(S===0){g.onLayoutEnd&&g.onLayoutEnd();return}!g.width&&typeof window!="undefined"&&(g.width=window.innerWidth),!g.height&&typeof window!="undefined"&&(g.height=window.innerHeight),g.center||(g.center=[g.width/2,g.height/2]);var O=g.center;if(S===1){A[0].x=O[0],A[0].y=O[1],g.onLayoutEnd&&g.onLayoutEnd();return}var B=g.radius,m=g.startRadius,d=g.endRadius,tt=g.divisions,Y=g.startAngle,V=g.endAngle,$=g.angleRatio,q=g.ordering,rt=g.clockwise,Q=g.nodeSpacing,it=g.nodeSize,ht=(V-Y)/S,dt={};A.forEach(function(Pe,er){dt[Pe.id]=er}),g.nodeMap=dt;var Ot=(0,R.getDegree)(A.length,dt,_);if(g.degrees=Ot,Q){var It=(0,R.getFuncByUnknownType)(10,Q),Kt=(0,R.getFuncByUnknownType)(10,it),Ft=-1/0;A.forEach(function(Pe){var er=Kt(Pe);Ft<er&&(Ft=er)});var Nt=0;A.forEach(function(Pe,er){er===0?Nt+=Ft||10:Nt+=(It(Pe)||0)+(Ft||10)}),B=Nt/(2*Math.PI)}else!B&&!m&&!d?B=g.height>g.width?g.width/2:g.height/2:!m&&d?m=d:m&&!d&&(d=m);var st=ht*$,yt=[];q==="topology"?yt=g.topologyOrdering():q==="topology-directed"?yt=g.topologyOrdering(!0):q==="degree"?yt=g.degreeOrdering():yt=A;for(var kt=Math.ceil(S/tt),ee=0;ee<S;++ee){var $t=B;!$t&&m!==null&&d!==null&&($t=m+ee*(d-m)/(S-1)),$t||($t=10+ee*100/(S-1));var ge=Y+ee%kt*st+2*Math.PI/tt*Math.floor(ee/kt);rt||(ge=V-ee%kt*st-2*Math.PI/tt*Math.floor(ee/kt)),yt[ee].x=O[0]+Math.cos(ge)*$t,yt[ee].y=O[1]+Math.sin(ge)*$t,yt[ee].weight=Ot[ee].all}return(y=g.onLayoutEnd)===null||y===void 0||y.call(g),{nodes:yt,edges:this.edges}},p.prototype.topologyOrdering=function(y){y===void 0&&(y=!1);var g=this,A=g.degrees,_=g.edges,S=g.nodes,O=(0,R.clone)(S),B=g.nodeMap,m=[O[0]],d=[S[0]],tt=[],Y=S.length;tt[0]=!0,L(O,_,B,y);var V=0;return O.forEach(function($,q){if(q!==0)if((q===Y-1||A[q].all!==A[q+1].all||P(m[V],$,_))&&!tt[q])m.push($),d.push(S[B[$.id]]),tt[q]=!0,V++;else{for(var rt=m[V].children,Q=!1,it=0;it<rt.length;it++){var ht=B[rt[it]];if(A[ht].all===A[q].all&&!tt[ht]){m.push(O[ht]),d.push(S[B[O[ht].id]]),tt[ht]=!0,Q=!0;break}}for(var dt=0;!Q&&(tt[dt]||(m.push(O[dt]),d.push(S[B[O[dt].id]]),tt[dt]=!0,Q=!0),dt++,dt!==Y););}}),d},p.prototype.degreeOrdering=function(){var y=this,g=y.nodes,A=[],_=y.degrees;return g.forEach(function(S,O){S.degree=_[O].all,A.push(S)}),A.sort(N),A},p.prototype.getType=function(){return"circular"},p}(X.Base);F.CircularLayout=E},263861:function(He,F,z){"use strict";var G=this&&this.__extends||function(){var x=function(p,y){return x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,A){g.__proto__=A}||function(g,A){for(var _ in A)Object.prototype.hasOwnProperty.call(A,_)&&(g[_]=A[_])},x(p,y)};return function(p,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");x(p,y);function g(){this.constructor=p}p.prototype=y===null?Object.create(y):(g.prototype=y.prototype,new g)}}(),X=this&&this.__assign||function(){return X=Object.assign||function(x){for(var p,y=1,g=arguments.length;y<g;y++){p=arguments[y];for(var A in p)Object.prototype.hasOwnProperty.call(p,A)&&(x[A]=p[A])}return x},X.apply(this,arguments)};Object.defineProperty(F,"__esModule",{value:!0}),F.ComboCombinedLayout=void 0;var R=z(416470),L=z(762329),P=z(449784),N=z(702584),E=function(x){G(p,x);function p(y){var g=x.call(this)||this;return g.center=[0,0],g.nodes=[],g.edges=[],g.combos=[],g.comboEdges=[],g.comboPadding=10,g.comboTrees=[],g.updateCfg(y),g}return p.prototype.getDefaultCfg=function(){return{}},p.prototype.execute=function(){var y=this,g=y.nodes,A=y.center;if(!g||g.length===0){y.onLayoutEnd&&y.onLayoutEnd();return}if(g.length===1){g[0].x=A[0],g[0].y=A[1],y.onLayoutEnd&&y.onLayoutEnd();return}y.initVals(),y.run(),y.onLayoutEnd&&y.onLayoutEnd()},p.prototype.run=function(){var y,g=this,A=g.nodes,_=g.edges,S=g.combos,O=g.comboEdges,B=g.center,m={};A.forEach(function(Ft){m[Ft.id]=Ft});var d={};S.forEach(function(Ft){d[Ft.id]=Ft});var tt=g.getInnerGraphs(m),Y=[],V=[],$={},q=!0;this.comboTrees.forEach(function(Ft){var Nt=tt[Ft.id],st=X(X({},Ft),{x:Nt.x||d[Ft.id].x,y:Nt.y||d[Ft.id].y,fx:Nt.fx||d[Ft.id].fx,fy:Nt.fy||d[Ft.id].fy,mass:Nt.mass||d[Ft.id].mass,size:Nt.size});V.push(st),!isNaN(st.x)&&st.x!==0&&!isNaN(st.y)&&st.y!==0?q=!1:(st.x=Math.random()*100,st.y=Math.random()*100),Y.push(Ft.id),(0,P.traverseTreeUp)(Ft,function(yt){return yt.id!==Ft.id&&($[yt.id]=Ft.id),!0})}),A.forEach(function(Ft){if(!(Ft.comboId&&d[Ft.comboId])){var Nt=X({},Ft);V.push(Nt),!isNaN(Nt.x)&&Nt.x!==0&&!isNaN(Nt.y)&&Nt.y!==0?q=!1:(Nt.x=Math.random()*100,Nt.y=Math.random()*100),Y.push(Ft.id)}});var rt=[];if(_.concat(O).forEach(function(Ft){var Nt=$[Ft.source]||Ft.source,st=$[Ft.target]||Ft.target;Nt!==st&&Y.includes(Nt)&&Y.includes(st)&&rt.push({source:Nt,target:st})}),V!=null&&V.length){if(V.length===1)V[0].x=B[0],V[0].y=B[1];else{var Q={nodes:V,edges:rt},it=this.outerLayout||new N.GForceLayout({gravity:1,factor:4,linkDistance:function(Ft,Nt,st){var yt,kt,ee=((((yt=Nt.size)===null||yt===void 0?void 0:yt[0])||30)+(((kt=st.size)===null||kt===void 0?void 0:kt[0])||30))/2;return Math.min(ee*1.5,700)}}),ht=(y=it.getType)===null||y===void 0?void 0:y.call(it);if(it.updateCfg({center:B,kg:5,preventOverlap:!0,animate:!1}),q&&R.FORCE_LAYOUT_TYPE_MAP[ht]){var dt=V.length<100?new N.MDSLayout:new N.GridLayout;dt.layout(Q)}it.layout(Q)}V.forEach(function(Ft){var Nt=tt[Ft.id];if(!Nt){var st=m[Ft.id];st&&(st.x=Ft.x,st.y=Ft.y);return}Nt.visited=!0,Nt.x=Ft.x,Nt.y=Ft.y,Nt.nodes.forEach(function(yt){yt.x+=Ft.x,yt.y+=Ft.y})})}for(var Ot=Object.keys(tt),It=function(Ft){var Nt=Ot[Ft],st=tt[Nt];if(!st)return"continue";st.nodes.forEach(function(yt){st.visited||(yt.x+=st.x||0,yt.y+=st.y||0),m[yt.id]&&(m[yt.id].x=yt.x,m[yt.id].y=yt.y)}),d[Nt]&&(d[Nt].x=st.x,d[Nt].y=st.y)},Kt=Ot.length-1;Kt>=0;Kt--)It(Kt);return{nodes:A,edges:_,combos:S,comboEdges:O}},p.prototype.getInnerGraphs=function(y){var g=this,A=g.comboTrees,_=g.nodeSize,S=g.edges,O=g.comboPadding,B=g.spacing,m={},d=this.innerLayout||new N.ConcentricLayout({type:"concentric",sortBy:"id"});return d.center=[0,0],d.preventOverlap=!0,d.nodeSpacing=B,(A||[]).forEach(function(tt){(0,P.traverseTreeUp)(tt,function(Y){var V,$=(O==null?void 0:O(Y))||10;if((0,P.isArray)($)&&($=Math.max.apply(Math,$)),!((V=Y.children)===null||V===void 0)&&V.length){var rt=Y.children.map(function(kt){if(kt.itemType==="combo")return m[kt.id];var ee=y[kt.id]||{};return X(X({},ee),kt)}),Q=rt.map(function(kt){return kt.id}),it={nodes:rt,edges:S.filter(function(kt){return Q.includes(kt.source)&&Q.includes(kt.target)})},ht=1/0;rt.forEach(function(kt){var ee;kt.size||(kt.size=((ee=m[kt.id])===null||ee===void 0?void 0:ee.size)||(_==null?void 0:_(kt))||[30,30]),(0,P.isNumber)(kt.size)&&(kt.size=[kt.size,kt.size]),ht>kt.size[0]&&(ht=kt.size[0]),ht>kt.size[1]&&(ht=kt.size[1])}),d.layout(it);var dt=(0,P.getLayoutBBox)(rt),Ot=dt.minX,It=dt.minY,Kt=dt.maxX,Ft=dt.maxY,Nt={x:(Kt+Ot)/2,y:(Ft+It)/2};it.nodes.forEach(function(kt){kt.x-=Nt.x,kt.y-=Nt.y});var st=Math.max(Kt-Ot,ht)+$*2,yt=Math.max(Ft-It,ht)+$*2;m[Y.id]={id:Y.id,nodes:rt,size:[st,yt]}}else if(Y.itemType==="combo"){var q=$?[$*2,$*2]:[30,30];m[Y.id]={id:Y.id,nodes:[],size:q}}return!0})}),m},p.prototype.initVals=function(){var y=this,g=y.nodeSize,A=y.spacing,_,S;if((0,P.isNumber)(A)?S=function(){return A}:(0,P.isFunction)(A)?S=A:S=function(){return 0},this.spacing=S,!g)_=function(Y){var V=S(Y);if(Y.size){if((0,P.isArray)(Y.size)){var $=Y.size[0]>Y.size[1]?Y.size[0]:Y.size[1];return($+V)/2}if((0,P.isObject)(Y.size)){var $=Y.size.width>Y.size.height?Y.size.width:Y.size.height;return($+V)/2}return(Y.size+V)/2}return 10+V/2};else if((0,P.isFunction)(g))_=function(Y){var V=g(Y),$=S(Y);if((0,P.isArray)(Y.size)){var q=Y.size[0]>Y.size[1]?Y.size[0]:Y.size[1];return(q+$)/2}return((V||10)+$)/2};else if((0,P.isArray)(g)){var O=g[0]>g[1]?g[0]:g[1],B=O/2;_=function(Y){return B+S(Y)/2}}else{var m=g/2;_=function(Y){return m+S(Y)/2}}this.nodeSize=_;var d=y.comboPadding,tt;(0,P.isNumber)(d)?tt=function(){return d}:(0,P.isArray)(d)?tt=function(){return Math.max.apply(null,d)}:(0,P.isFunction)(d)?tt=d:tt=function(){return 0},this.comboPadding=tt},p.prototype.getType=function(){return"comboCombined"},p}(L.Base);F.ComboCombinedLayout=E},366590:function(He,F,z){"use strict";var G=this&&this.__extends||function(){var P=function(N,E){return P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,p){x.__proto__=p}||function(x,p){for(var y in p)Object.prototype.hasOwnProperty.call(p,y)&&(x[y]=p[y])},P(N,E)};return function(N,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");P(N,E);function x(){this.constructor=N}N.prototype=E===null?Object.create(E):(x.prototype=E.prototype,new x)}}();Object.defineProperty(F,"__esModule",{value:!0}),F.ComboForceLayout=void 0;var X=z(762329),R=z(449784),L=function(P){G(N,P);function N(E){var x=P.call(this)||this;return x.center=[0,0],x.maxIteration=100,x.gravity=10,x.comboGravity=10,x.linkDistance=10,x.alpha=1,x.alphaMin=.001,x.alphaDecay=1-Math.pow(x.alphaMin,1/300),x.alphaTarget=0,x.velocityDecay=.6,x.edgeStrength=.6,x.nodeStrength=30,x.preventOverlap=!1,x.preventNodeOverlap=!1,x.preventComboOverlap=!1,x.collideStrength=void 0,x.nodeCollideStrength=.5,x.comboCollideStrength=.5,x.comboSpacing=20,x.comboPadding=10,x.optimizeRangeFactor=1,x.onTick=function(){},x.onLayoutEnd=function(){},x.depthAttractiveForceScale=1,x.depthRepulsiveForceScale=2,x.nodes=[],x.edges=[],x.combos=[],x.comboTrees=[],x.width=300,x.height=300,x.bias=[],x.nodeMap={},x.oriComboMap={},x.indexMap={},x.comboMap={},x.previousLayouted=!1,x.updateCfg(E),x}return N.prototype.getDefaultCfg=function(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}},N.prototype.execute=function(){var E=this,x=E.nodes,p=E.center;if(E.comboTree={id:"comboTreeRoot",depth:-1,children:E.comboTrees},!x||x.length===0){E.onLayoutEnd&&E.onLayoutEnd();return}if(x.length===1){x[0].x=p[0],x[0].y=p[1],E.onLayoutEnd&&E.onLayoutEnd();return}E.initVals(),E.run(),E.onLayoutEnd&&E.onLayoutEnd()},N.prototype.run=function(){var E=this,x=E.nodes,p=E.previousLayouted?E.maxIteration/5:E.maxIteration;!E.width&&typeof window!="undefined"&&(E.width=window.innerWidth),!E.height&&typeof window!="undefined"&&(E.height=window.innerHeight);var y=E.center,g=E.velocityDecay,A=E.comboMap;E.previousLayouted||E.initPos(A);for(var _=function(m){var d=[];x.forEach(function(tt,Y){d[Y]={x:0,y:0}}),E.applyCalculate(d),E.applyComboCenterForce(d),x.forEach(function(tt,Y){!(0,R.isNumber)(tt.x)||!(0,R.isNumber)(tt.y)||(tt.x+=d[Y].x*g,tt.y+=d[Y].y*g)}),E.alpha+=(E.alphaTarget-E.alpha)*E.alphaDecay,E.onTick()},S=0;S<p;S++)_(S);var O=[0,0];x.forEach(function(m){!(0,R.isNumber)(m.x)||!(0,R.isNumber)(m.y)||(O[0]+=m.x,O[1]+=m.y)}),O[0]/=x.length,O[1]/=x.length;var B=[y[0]-O[0],y[1]-O[1]];x.forEach(function(m,d){!(0,R.isNumber)(m.x)||!(0,R.isNumber)(m.y)||(m.x+=B[0],m.y+=B[1])}),E.combos.forEach(function(m){var d=A[m.id];d&&d.empty&&(m.x=d.cx||m.x,m.y=d.cy||m.y)}),E.previousLayouted=!0},N.prototype.initVals=function(){var E=this,x=E.edges,p=E.nodes,y=E.combos,g={},A={},_={};p.forEach(function($t,ge){A[$t.id]=$t,_[$t.id]=ge}),E.nodeMap=A,E.indexMap=_;var S={};y.forEach(function($t){S[$t.id]=$t}),E.oriComboMap=S,E.comboMap=E.getComboMap();var O=E.preventOverlap;E.preventComboOverlap=E.preventComboOverlap||O,E.preventNodeOverlap=E.preventNodeOverlap||O;var B=E.collideStrength;B&&(E.comboCollideStrength=B,E.nodeCollideStrength=B),E.comboCollideStrength=E.comboCollideStrength?E.comboCollideStrength:0,E.nodeCollideStrength=E.nodeCollideStrength?E.nodeCollideStrength:0;for(var m=0;m<x.length;++m){var d=(0,R.getEdgeTerminal)(x[m],"source"),tt=(0,R.getEdgeTerminal)(x[m],"target");g[d]?g[d]++:g[d]=1,g[tt]?g[tt]++:g[tt]=1}for(var Y=[],m=0;m<x.length;++m){var d=(0,R.getEdgeTerminal)(x[m],"source"),tt=(0,R.getEdgeTerminal)(x[m],"target");Y[m]=g[d]/(g[d]+g[tt])}this.bias=Y;var V=E.nodeSize,$=E.nodeSpacing,q,rt;if((0,R.isNumber)($)?rt=function(){return $}:(0,R.isFunction)($)?rt=$:rt=function(){return 0},this.nodeSpacing=rt,!V)q=function($t){if($t.size){if((0,R.isArray)($t.size)){var ge=$t.size[0]>$t.size[1]?$t.size[0]:$t.size[1];return ge/2}if((0,R.isObject)($t.size)){var ge=$t.size.width>$t.size.height?$t.size.width:$t.size.height;return ge/2}return $t.size/2}return 10};else if((0,R.isFunction)(V))q=function($t){return V($t)};else if((0,R.isArray)(V)){var Q=V[0]>V[1]?V[0]:V[1],it=Q/2;q=function($t){return it}}else{var ht=V/2;q=function($t){return ht}}this.nodeSize=q;var dt=E.comboSpacing,Ot;(0,R.isNumber)(dt)?Ot=function(){return dt}:(0,R.isFunction)(dt)?Ot=dt:Ot=function(){return 0},this.comboSpacing=Ot;var It=E.comboPadding,Kt;(0,R.isNumber)(It)?Kt=function(){return It}:(0,R.isArray)(It)?Kt=function(){return Math.max.apply(null,It)}:(0,R.isFunction)(It)?Kt=It:Kt=function(){return 0},this.comboPadding=Kt;var Ft=this.linkDistance,Nt;Ft||(Ft=10),(0,R.isNumber)(Ft)?Nt=function($t){return Ft}:Nt=Ft,this.linkDistance=Nt;var st=this.edgeStrength,yt;st||(st=1),(0,R.isNumber)(st)?yt=function($t){return st}:yt=st,this.edgeStrength=yt;var kt=this.nodeStrength,ee;kt||(kt=30),(0,R.isNumber)(kt)?ee=function($t){return kt}:ee=kt,this.nodeStrength=ee},N.prototype.initPos=function(E){var x=this,p=x.nodes;p.forEach(function(y,g){var A=y.comboId,_=E[A];A&&_?(y.x=_.cx+100/(g+1),y.y=_.cy+100/(g+1)):(y.x=100/(g+1),y.y=100/(g+1))})},N.prototype.getComboMap=function(){var E=this,x=E.nodeMap,p=E.comboTrees,y=E.oriComboMap,g={};return(p||[]).forEach(function(A){var _=[];(0,R.traverseTreeUp)(A,function(S){if(S.itemType==="node"||!y[S.id])return!0;if(g[S.id]===void 0){var O={id:S.id,name:S.id,cx:0,cy:0,count:0,depth:E.oriComboMap[S.id].depth||0,children:[]};g[S.id]=O}var B=S.children;B&&B.forEach(function(tt){if(!g[tt.id]&&!x[tt.id])return!0;_.push(tt)});var m=g[S.id];if(m.cx=0,m.cy=0,_.length===0){m.empty=!0;var d=y[S.id];m.cx=d.x,m.cy=d.y}return _.forEach(function(tt){if(m.count++,tt.itemType!=="node"){var Y=g[tt.id];(0,R.isNumber)(Y.cx)&&(m.cx+=Y.cx),(0,R.isNumber)(Y.cy)&&(m.cy+=Y.cy);return}var V=x[tt.id];V&&((0,R.isNumber)(V.x)&&(m.cx+=V.x),(0,R.isNumber)(V.y)&&(m.cy+=V.y))}),m.cx/=m.count||1,m.cy/=m.count||1,m.children=_,!0})}),g},N.prototype.applyComboCenterForce=function(E){var x=this,p=x.gravity,y=x.comboGravity||p,g=this.alpha,A=x.comboTrees,_=x.indexMap,S=x.nodeMap,O=x.comboMap;(A||[]).forEach(function(B){(0,R.traverseTreeUp)(B,function(m){if(m.itemType==="node")return!0;var d=O[m.id];if(!d)return!0;var tt=O[m.id],Y=(tt.depth+1)/10*.5,V=tt.cx,$=tt.cy;return tt.cx=0,tt.cy=0,tt.children.forEach(function(q){if(q.itemType!=="node"){var rt=O[q.id];rt&&(0,R.isNumber)(rt.cx)&&(tt.cx+=rt.cx),rt&&(0,R.isNumber)(rt.cy)&&(tt.cy+=rt.cy);return}var Q=S[q.id],it=Q.x-V||.005,ht=Q.y-$||.005,dt=Math.sqrt(it*it+ht*ht),Ot=_[Q.id],It=y*g/dt*Y;E[Ot].x-=it*It,E[Ot].y-=ht*It,(0,R.isNumber)(Q.x)&&(tt.cx+=Q.x),(0,R.isNumber)(Q.y)&&(tt.cy+=Q.y)}),tt.cx/=tt.count||1,tt.cy/=tt.count||1,!0})})},N.prototype.applyCalculate=function(E){var x=this,p=x.comboMap,y=x.nodes,g={};y.forEach(function(_,S){y.forEach(function(O,B){if(!(S<B)){var m=_.x-O.x||.005,d=_.y-O.y||.005,tt=m*m+d*d,Y=Math.sqrt(tt);tt<1&&(tt=Y),g["".concat(_.id,"-").concat(O.id)]={vx:m,vy:d,vl2:tt,vl:Y},g["".concat(O.id,"-").concat(_.id)]={vl2:tt,vl:Y,vx:-m,vy:-d}}})}),x.updateComboSizes(p),x.calRepulsive(E,g),x.calAttractive(E,g);var A=x.preventComboOverlap;A&&x.comboNonOverlapping(E,p)},N.prototype.updateComboSizes=function(E){var x=this,p=x.comboTrees,y=x.nodeMap,g=x.nodeSize,A=x.comboSpacing,_=x.comboPadding;(p||[]).forEach(function(S){var O=[];(0,R.traverseTreeUp)(S,function(B){if(B.itemType==="node")return!0;var m=E[B.id];if(!m)return!1;var d=B.children;d&&d.forEach(function(V){!E[V.id]&&!y[V.id]||O.push(V)}),m.minX=1/0,m.minY=1/0,m.maxX=-1/0,m.maxY=-1/0,O.forEach(function(V){if(V.itemType!=="node")return!0;var $=y[V.id];if(!$)return!0;var q=g($),rt=$.x-q,Q=$.y-q,it=$.x+q,ht=$.y+q;m.minX>rt&&(m.minX=rt),m.minY>Q&&(m.minY=Q),m.maxX<it&&(m.maxX=it),m.maxY<ht&&(m.maxY=ht)});var tt=x.oriComboMap[B.id].size||10;(0,R.isArray)(tt)&&(tt=tt[0]);var Y=Math.max(m.maxX-m.minX,m.maxY-m.minY,tt);return m.r=Y/2+A(m)/2+_(m),!0})})},N.prototype.comboNonOverlapping=function(E,x){var p=this,y=p.comboTree,g=p.comboCollideStrength,A=p.indexMap,_=p.nodeMap;(0,R.traverseTreeUp)(y,function(S){if(!x[S.id]&&!_[S.id]&&S.id!=="comboTreeRoot")return!1;var O=S.children;return O&&O.length>1&&O.forEach(function(B,m){if(B.itemType==="node")return!1;var d=x[B.id];d&&O.forEach(function(tt,Y){if(m<=Y||tt.itemType==="node")return!1;var V=x[tt.id];if(!V)return!1;var $=d.cx-V.cx||.005,q=d.cy-V.cy||.005,rt=$*$+q*q,Q=d.r||1,it=V.r||1,ht=Q+it,dt=it*it,Ot=Q*Q;if(rt<ht*ht){var It=B.children;if(!It||It.length===0)return!1;var Kt=tt.children;if(!Kt||Kt.length===0)return!1;var Ft=Math.sqrt(rt),Nt=(ht-Ft)/Ft*g,st=$*Nt,yt=q*Nt,kt=dt/(Ot+dt),ee=1-kt;It.forEach(function($t){if($t.itemType!=="node")return!1;if(_[$t.id]){var ge=A[$t.id];Kt.forEach(function(Pe){if(Pe.itemType!=="node"||!_[Pe.id])return!1;var er=A[Pe.id];E[ge].x+=st*kt,E[ge].y+=yt*kt,E[er].x-=st*ee,E[er].y-=yt*ee})}})}})}),!0})},N.prototype.calRepulsive=function(E,x){var p=this,y=p.nodes,g=p.width*p.optimizeRangeFactor,A=p.nodeStrength,_=p.alpha,S=p.nodeCollideStrength,O=p.preventNodeOverlap,B=p.nodeSize,m=p.nodeSpacing,d=p.depthRepulsiveForceScale,tt=p.center;y.forEach(function(Y,V){if(!(!Y.x||!Y.y)){if(tt){var $=p.gravity,q=Y.x-tt[0]||.005,rt=Y.y-tt[1]||.005,Q=Math.sqrt(q*q+rt*rt);E[V].x-=q*$*_/Q,E[V].y-=rt*$*_/Q}y.forEach(function(it,ht){if(V!==ht&&!(!it.x||!it.y)){var dt=x["".concat(Y.id,"-").concat(it.id)],Ot=dt.vl2,It=dt.vl;if(!(It>g)){var Kt=x["".concat(Y.id,"-").concat(it.id)],Ft=Kt.vx,Nt=Kt.vy,st=Math.log(Math.abs(it.depth-Y.depth)/10)+1||1;st=st<1?1:st,it.comboId!==Y.comboId&&(st+=1);var yt=st?Math.pow(d,st):1,kt=A(it)*_/Ot*yt;if(E[V].x+=Ft*kt,E[V].y+=Nt*kt,V<ht&&O){var ee=B(Y)+m(Y)||1,$t=B(it)+m(it)||1,ge=ee+$t;if(Ot<ge*ge){var Pe=(ge-It)/It*S,er=$t*$t,Jt=er/(ee*ee+er),ae=Ft*Pe,Se=Nt*Pe;E[V].x+=ae*Jt,E[V].y+=Se*Jt,Jt=1-Jt,E[ht].x-=ae*Jt,E[ht].y-=Se*Jt}}}}})}})},N.prototype.calAttractive=function(E,x){var p=this,y=p.edges,g=p.linkDistance,A=p.alpha,_=p.edgeStrength,S=p.bias,O=p.depthAttractiveForceScale;y.forEach(function(B,m){var d=(0,R.getEdgeTerminal)(B,"source"),tt=(0,R.getEdgeTerminal)(B,"target");if(!(!d||!tt||d===tt)){var Y=p.indexMap[d],V=p.indexMap[tt],$=p.nodeMap[d],q=p.nodeMap[tt];if(!(!$||!q)){var rt=$.depth===q.depth?0:Math.log(Math.abs($.depth-q.depth)/10);$.comboId===q.comboId&&(rt=rt/2);var Q=rt?Math.pow(O,rt):1;if($.comboId!==q.comboId&&Q===1?Q=O/2:$.comboId===q.comboId&&(Q=2),!(!(0,R.isNumber)(q.x)||!(0,R.isNumber)($.x)||!(0,R.isNumber)(q.y)||!(0,R.isNumber)($.y))){var it=x["".concat(tt,"-").concat(d)],ht=it.vl,dt=it.vx,Ot=it.vy,It=(ht-g(B))/ht*A*_(B)*Q,Kt=dt*It,Ft=Ot*It,Nt=S[m];E[V].x-=Kt*Nt,E[V].y-=Ft*Nt,E[Y].x+=Kt*(1-Nt),E[Y].y+=Ft*(1-Nt)}}}})},N.prototype.getType=function(){return"comboForce"},N}(X.Base);F.ComboForceLayout=L},843281:function(He,F,z){"use strict";var G=this&&this.__extends||function(){var P=function(N,E){return P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,p){x.__proto__=p}||function(x,p){for(var y in p)Object.prototype.hasOwnProperty.call(p,y)&&(x[y]=p[y])},P(N,E)};return function(N,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");P(N,E);function x(){this.constructor=N}N.prototype=E===null?Object.create(E):(x.prototype=E.prototype,new x)}}();Object.defineProperty(F,"__esModule",{value:!0}),F.ConcentricLayout=void 0;var X=z(449784),R=z(762329),L=function(P){G(N,P);function N(E){var x=P.call(this)||this;return x.nodeSize=30,x.minNodeSpacing=10,x.nodeSpacing=10,x.preventOverlap=!1,x.equidistant=!1,x.startAngle=3/2*Math.PI,x.clockwise=!0,x.sortBy="degree",x.nodes=[],x.edges=[],x.width=300,x.height=300,x.onLayoutEnd=function(){},x.updateCfg(E),x}return N.prototype.getDefaultCfg=function(){return{nodeSize:30,minNodeSpacing:10,nodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:3/2*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}},N.prototype.execute=function(){var E,x,p=this,y=p.nodes,g=p.edges,A=y.length;if(A===0){(E=p.onLayoutEnd)===null||E===void 0||E.call(p);return}!p.width&&typeof window!="undefined"&&(p.width=window.innerWidth),!p.height&&typeof window!="undefined"&&(p.height=window.innerHeight),p.center||(p.center=[p.width/2,p.height/2]);var _=p.center;if(A===1){y[0].x=_[0],y[0].y=_[1],(x=p.onLayoutEnd)===null||x===void 0||x.call(p);return}var S=p.nodeSize,O=p.nodeSpacing,B=[],m,d=0;(0,X.isArray)(S)?m=Math.max(S[0],S[1]):m=S,(0,X.isArray)(O)?d=Math.max(O[0],O[1]):(0,X.isNumber)(O)&&(d=O),y.forEach(function(st){B.push(st);var yt=m;(0,X.isArray)(st.size)?yt=Math.max(st.size[0],st.size[1]):(0,X.isNumber)(st.size)?yt=st.size:(0,X.isObject)(st.size)&&(yt=Math.max(st.size.width,st.size.height)),m=Math.max(m,yt),(0,X.isFunction)(O)&&(d=Math.max(O(st),d))}),p.clockwise=p.counterclockwise!==void 0?!p.counterclockwise:p.clockwise;var tt={},Y={};if(B.forEach(function(st,yt){tt[st.id]=st,Y[st.id]=yt}),(p.sortBy==="degree"||!(0,X.isString)(p.sortBy)||B[0][p.sortBy]===void 0)&&(p.sortBy="degree",!(0,X.isNumber)(y[0].degree))){var V=(0,X.getDegree)(y.length,Y,g);B.forEach(function(st,yt){st.degree=V[yt].all})}B.sort(function(st,yt){return yt[p.sortBy]-st[p.sortBy]}),p.maxValueNode=B[0],p.maxLevelDiff=p.maxLevelDiff||p.maxValueNode[p.sortBy]/4;var $=[[]],q=$[0];B.forEach(function(st){if(q.length>0){var yt=Math.abs(q[0][p.sortBy]-st[p.sortBy]);p.maxLevelDiff&&yt>=p.maxLevelDiff&&(q=[],$.push(q))}q.push(st)});var rt=m+(d||p.minNodeSpacing);if(!p.preventOverlap){var Q=$.length>0&&$[0].length>1,it=Math.min(p.width,p.height)/2-rt,ht=it/($.length+(Q?1:0));rt=Math.min(rt,ht)}var dt=0;if($.forEach(function(st){var yt=p.sweep;yt===void 0&&(yt=2*Math.PI-2*Math.PI/st.length);var kt=st.dTheta=yt/Math.max(1,st.length-1);if(st.length>1&&p.preventOverlap){var ee=Math.cos(kt)-Math.cos(0),$t=Math.sin(kt)-Math.sin(0),ge=Math.sqrt(rt*rt/(ee*ee+$t*$t));dt=Math.max(ge,dt)}st.r=dt,dt+=rt}),p.equidistant){for(var Ot=0,It=0,Kt=0;Kt<$.length;Kt++){var Ft=$[Kt],Nt=Ft.r-It;Ot=Math.max(Ot,Nt)}It=0,$.forEach(function(st,yt){yt===0&&(It=st.r),st.r=It,It+=Ot})}return $.forEach(function(st){var yt=st.dTheta,kt=st.r;st.forEach(function(ee,$t){var ge=p.startAngle+(p.clockwise?1:-1)*yt*$t;ee.x=_[0]+kt*Math.cos(ge),ee.y=_[1]+kt*Math.sin(ge)})}),p.onLayoutEnd&&p.onLayoutEnd(),{nodes:y,edges:g}},N.prototype.getType=function(){return"concentric"},N}(R.Base);F.ConcentricLayout=L},416470:function(He,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.FORCE_LAYOUT_TYPE_MAP=F.LAYOUT_MESSAGE=void 0,F.LAYOUT_MESSAGE={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"},F.FORCE_LAYOUT_TYPE_MAP={gForce:!0,force2:!0,fruchterman:!0,forceAtlas2:!0,force:!0,"graphin-force":!0}},960844:function(He,F,z){"use strict";var G=this&&this.__extends||function(){var p=function(y,g){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,_){A.__proto__=_}||function(A,_){for(var S in _)Object.prototype.hasOwnProperty.call(_,S)&&(A[S]=_[S])},p(y,g)};return function(y,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");p(y,g);function A(){this.constructor=y}y.prototype=g===null?Object.create(g):(A.prototype=g.prototype,new A)}}(),X=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(F,"__esModule",{value:!0}),F.DagreLayout=void 0;var R=X(z(441106)),L=z(449784),P=z(762329),N=z(627652),E=function(p){G(y,p);function y(g){var A=p.call(this)||this;return A.rankdir="TB",A.nodesep=50,A.ranksep=50,A.controlPoints=!1,A.sortByCombo=!1,A.edgeLabelSpace=!0,A.radial=!1,A.nodes=[],A.edges=[],A.onLayoutEnd=function(){},A.layoutNode=function(_){var S=A,O=S.nodes,B=O.find(function(d){return d.id===_});if(B){var m=B.layout!==!1;return m}return!0},A.updateCfg(g),A}return y.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}},y.prototype.execute=function(){var g=this,A,_,S,O,B=this,m=B.nodes,d=B.nodeSize,tt=B.rankdir,Y=B.combos,V=B.begin,$=B.radial,q=B.comboEdges,rt=q===void 0?[]:q,Q=B.vedges,it=Q===void 0?[]:Q;if(m){var ht=B.edges||[],dt=new N.Graph({multigraph:!0,compound:!0});B.nodeMap={};var Ot={};m.forEach(function(Qe){B.nodeMap[Qe.id]=Qe,Qe.comboId&&(Ot[Qe.comboId]=Ot[Qe.comboId]||[],Ot[Qe.comboId].push(Qe.id))});var It=[],Kt={};!((A=B.nodeOrder)===null||A===void 0)&&A.length?(B.nodeOrder.forEach(function(Qe){Kt[Qe]=!0,It.push(B.nodeMap[Qe])}),m.forEach(function(Qe){Kt[Qe.id]||It.push(Qe)})):It=m;var Ft;d?(0,L.isArray)(d)?Ft=function(){return d}:Ft=function(){return[d,d]}:Ft=function(Qe){return Qe.size?(0,L.isArray)(Qe.size)?Qe.size:(0,L.isObject)(Qe.size)?[Qe.size.width||40,Qe.size.height||40]:[Qe.size,Qe.size]:[40,40]};var Nt=(0,L.getFunc)(B.ranksep,50,B.ranksepFunc),st=(0,L.getFunc)(B.nodesep,50,B.nodesepFunc),yt=st,kt=Nt;(tt==="LR"||tt==="RL")&&(yt=Nt,kt=st),dt.setDefaultEdgeLabel(function(){return{}}),dt.setGraph(B);var ee={};this.sortByCombo&&Y&&Y.forEach(function(Qe){if(ee[Qe.id]=Qe,Qe.collapsed){var nr=Ft(Qe),dr=kt(Qe),Pr=yt(Qe),en=nr[0]+2*Pr,pn=nr[1]+2*dr;dt.setNode(Qe.id,{width:en,height:pn})}Qe.parentId&&(ee[Qe.parentId]||dt.setNode(Qe.parentId,{}),dt.setParent(Qe.id,Qe.parentId))}),It.filter(function(Qe){return Qe.layout!==!1}).forEach(function(Qe){var nr=Ft(Qe),dr=kt(Qe),Pr=yt(Qe),en=nr[0]+2*Pr,pn=nr[1]+2*dr,rn=Qe.layer;(0,L.isNumber)(rn)?dt.setNode(Qe.id,{width:en,height:pn,layer:rn}):dt.setNode(Qe.id,{width:en,height:pn}),g.sortByCombo&&Qe.comboId&&(ee[Qe.comboId]||(ee[Qe.comboId]={id:Qe.comboId},dt.setNode(Qe.comboId,{})),dt.setParent(Qe.id,Qe.comboId))}),ht.forEach(function(Qe){var nr=(0,L.getEdgeTerminal)(Qe,"source"),dr=(0,L.getEdgeTerminal)(Qe,"target");g.layoutNode(nr)&&g.layoutNode(dr)&&dt.setEdge(nr,dr,{weight:Qe.weight||1})}),(_=rt==null?void 0:rt.concat(it||[]))===null||_===void 0||_.forEach(function(Qe){var nr,dr,Pr=Qe.source,en=Qe.target,pn=!((nr=ee[Pr])===null||nr===void 0)&&nr.collapsed?[Pr]:Ot[Pr]||[Pr],rn=!((dr=ee[en])===null||dr===void 0)&&dr.collapsed?[en]:Ot[en]||[en];pn.forEach(function(jn){rn.forEach(function(Hn){dt.setEdge(jn,Hn,{weight:Qe.weight||1})})})});var $t=void 0;!((S=B.preset)===null||S===void 0)&&S.nodes&&($t=new N.Graph({multigraph:!0,compound:!0}),B.preset.nodes.forEach(function(Qe){$t==null||$t.setNode(Qe.id,Qe)})),R.default.layout(dt,{prevGraph:$t,edgeLabelSpace:B.edgeLabelSpace,keepNodeOrder:!!B.nodeOrder,nodeOrder:B.nodeOrder});var ge=[0,0];if(V){var Pe=1/0,er=1/0;dt.nodes().forEach(function(Qe){var nr=dt.node(Qe);Pe>nr.x&&(Pe=nr.x),er>nr.y&&(er=nr.y)}),dt.edges().forEach(function(Qe){var nr,dr=dt.edge(Qe);(nr=dr.points)===null||nr===void 0||nr.forEach(function(Pr){Pe>Pr.x&&(Pe=Pr.x),er>Pr.y&&(er=Pr.y)})}),ge[0]=V[0]-Pe,ge[1]=V[1]-er}var Jt=tt==="LR"||tt==="RL";if($){var ae=this,Se=ae.focusNode,xe=ae.ranksep,we=ae.getRadialPos,zt=(0,L.isString)(Se)?Se:Se==null?void 0:Se.id,Wt=zt?(O=dt.node(zt))===null||O===void 0?void 0:O._rank:0,Ie=[],Yt=Jt?"y":"x",ie=Jt?"height":"width",Oe=1/0,re=-1/0;dt.nodes().forEach(function(Qe){var nr=dt.node(Qe);if(B.nodeMap[Qe]){var dr=st(B.nodeMap[Qe]);if(Wt===0)Ie[nr._rank]||(Ie[nr._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),Ie[nr._rank].nodes.push(Qe),Ie[nr._rank].totalWidth+=dr*2+nr[ie],Ie[nr._rank].maxSize<Math.max(nr.width,nr.height)&&(Ie[nr._rank].maxSize=Math.max(nr.width,nr.height));else{var Pr=nr._rank-Wt;if(Pr===0)Ie[Pr]||(Ie[Pr]={nodes:[],totalWidth:0,maxSize:-1/0}),Ie[Pr].nodes.push(Qe),Ie[Pr].totalWidth+=dr*2+nr[ie],Ie[Pr].maxSize<Math.max(nr.width,nr.height)&&(Ie[Pr].maxSize=Math.max(nr.width,nr.height));else{var en=Math.abs(Pr);Ie[en]||(Ie[en]={left:[],right:[],totalWidth:0,maxSize:-1/0}),Ie[en].totalWidth+=dr*2+nr[ie],Ie[en].maxSize<Math.max(nr.width,nr.height)&&(Ie[en].maxSize=Math.max(nr.width,nr.height)),Pr<0?Ie[en].left.push(Qe):Ie[en].right.push(Qe)}}var pn=nr[Yt]-nr[ie]/2-dr,rn=nr[Yt]+nr[ie]/2+dr;pn<Oe&&(Oe=pn),rn>re&&(re=rn)}});var _e=xe||50,Ge={},Ct=(re-Oe)/.9,Nr=[(Oe+re-Ct)*.5,(Oe+re+Ct)*.5],Or=function(Qe,nr,dr,Pr){dr===void 0&&(dr=-1/0),Pr===void 0&&(Pr=[0,1]);var en=dr;return Qe.forEach(function(pn){var rn=dt.node(pn);Ge[pn]=nr;var jn=we(rn[Yt],Nr,Ct,nr,Pr),Hn=jn.x,oa=jn.y;if(B.nodeMap[pn]){B.nodeMap[pn].x=Hn+ge[0],B.nodeMap[pn].y=oa+ge[1],B.nodeMap[pn]._order=rn._order;var dn=Nt(B.nodeMap[pn]);en<dn&&(en=dn)}}),en},Ur=!0,Sr=0;Ie.forEach(function(Qe){var nr,dr,Pr,en,pn,rn,jn;if(!(!(!((nr=Qe==null?void 0:Qe.nodes)===null||nr===void 0)&&nr.length)&&!(!((dr=Qe==null?void 0:Qe.left)===null||dr===void 0)&&dr.length)&&!(!((Pr=Qe==null?void 0:Qe.right)===null||Pr===void 0)&&Pr.length))){if(Ur&&Qe.nodes.length===1){var Hn=Qe.nodes[0];if(!B.nodeMap[Hn])return;B.nodeMap[Hn].x=ge[0],B.nodeMap[Hn].y=ge[1],Ge[Qe.nodes[0]]=0,_e=Nt(B.nodeMap[Hn]),Ur=!1;return}_e=Math.max(_e,Qe.totalWidth/(2*Math.PI));var oa=-1/0;if(Wt===0||!((en=Qe.nodes)===null||en===void 0)&&en.length)oa=Or(Qe.nodes,_e,oa,[0,1]);else{var dn=((pn=Qe.left)===null||pn===void 0?void 0:pn.length)/(((rn=Qe.left)===null||rn===void 0?void 0:rn.length)+((jn=Qe.right)===null||jn===void 0?void 0:jn.length));oa=Or(Qe.left,_e,oa,[0,dn]),oa=Or(Qe.right,_e,oa,[dn+.05,1])}_e+=oa,Ur=!1,Sr-Qe.maxSize}}),dt.edges().forEach(function(Qe){var nr,dr,Pr,en=dt.edge(Qe),pn=ht.findIndex(function(Cn){var la=(0,L.getEdgeTerminal)(Cn,"source"),K=(0,L.getEdgeTerminal)(Cn,"target");return la===Qe.v&&K===Qe.w});if(!(pn<=-1)&&B.edgeLabelSpace&&B.controlPoints&&ht[pn].type!=="loop"){var rn=Yt==="x"?"y":"x",jn=(nr=en==null?void 0:en.points)===null||nr===void 0?void 0:nr.slice(1,en.points.length-1),Hn=[],oa=(dr=dt.node(Qe.v))===null||dr===void 0?void 0:dr[rn],dn=oa-((Pr=dt.node(Qe.w))===null||Pr===void 0?void 0:Pr[rn]),Wn=Ge[Qe.v],Dn=Wn-Ge[Qe.w];jn==null||jn.forEach(function(Cn){var la=(Cn[rn]-oa)/dn*Dn+Wn,K=we(Cn[Yt],Nr,Ct,la);Hn.push({x:K.x+ge[0],y:K.y+ge[1]})}),ht[pn].controlPoints=Hn}})}else{var gn=new Set,Rr=tt==="BT"||tt==="RL",ln=Rr?function(Qe,nr){return nr-Qe}:function(Qe,nr){return Qe-nr};dt.nodes().forEach(function(Qe){var nr=dt.node(Qe);if(nr){var dr=g.nodeMap[Qe];dr||(dr=Y==null?void 0:Y.find(function(Pr){return Pr.id===Qe})),dr&&(dr.x=nr.x+ge[0],dr.y=nr.y+ge[1],dr._order=nr._order,gn.add(Jt?dr.x:dr.y))}});var Nn=Array.from(gn).sort(ln),Ln=Jt?function(Qe,nr){return Qe.x!==nr.x}:function(Qe,nr){return Qe.y!==nr.y},fn=Jt?function(Qe,nr,dr){var Pr=Math.max(nr.y,dr.y),en=Math.min(nr.y,dr.y);return Qe.filter(function(pn){return pn.y<=Pr&&pn.y>=en})}:function(Qe,nr,dr){var Pr=Math.max(nr.x,dr.x),en=Math.min(nr.x,dr.x);return Qe.filter(function(pn){return pn.x<=Pr&&pn.x>=en})};dt.edges().forEach(function(Qe){var nr,dr=dt.edge(Qe),Pr=ht.findIndex(function(rn){var jn=(0,L.getEdgeTerminal)(rn,"source"),Hn=(0,L.getEdgeTerminal)(rn,"target");return jn===Qe.v&&Hn===Qe.w});if(!(Pr<=-1)&&B.edgeLabelSpace&&B.controlPoints&&ht[Pr].type!=="loop"){(nr=dr==null?void 0:dr.points)===null||nr===void 0||nr.forEach(function(rn){rn.x+=ge[0],rn.y+=ge[1]});var en=B.nodeMap[Qe.v],pn=B.nodeMap[Qe.w];ht[Pr].controlPoints=x(dr==null?void 0:dr.points,en,pn,Nn,Jt,Ln,fn)}})}return B.onLayoutEnd&&B.onLayoutEnd(),{nodes:m,edges:ht}}},y.prototype.getRadialPos=function(g,A,_,S,O){O===void 0&&(O=[0,1]);var B=(g-A[0])/_;B=B*(O[1]-O[0])+O[0];var m=B*2*Math.PI;return{x:Math.cos(m)*S,y:Math.sin(m)*S}},y.prototype.getType=function(){return"dagre"},y}(P.Base);F.DagreLayout=E;var x=function(p,y,g,A,_,S,O){var B=(p==null?void 0:p.slice(1,p.length-1))||[];if(y&&g){var m=y.x,d=y.y,tt=g.x,Y=g.y;if(_&&(m=y.y,d=y.x,tt=g.y,Y=g.x),Y!==d&&m!==tt){var V=A.indexOf(d),$=A[V+1];if($){var q=B[0],rt=_?{x:(d+$)/2,y:(q==null?void 0:q.y)||tt}:{x:(q==null?void 0:q.x)||tt,y:(d+$)/2};(!q||S(q,rt))&&B.unshift(rt)}var Q=A.indexOf(Y),it=Math.abs(Q-V);if(it===1)B=O(B,y,g),B.length||B.push(_?{x:(d+Y)/2,y:m}:{x:m,y:(d+Y)/2});else if(it>1){var ht=A[Q-1];if(ht){var dt=B[B.length-1],Ot=_?{x:(Y+ht)/2,y:(dt==null?void 0:dt.y)||tt}:{x:(dt==null?void 0:dt.x)||m,y:(Y+ht)/2};(!dt||S(dt,Ot))&&B.push(Ot)}}}}return B}},627652:function(He,F,z){"use strict";var G=this&&this.__extends||function(){var L=function(P,N){return L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,x){E.__proto__=x}||function(E,x){for(var p in x)Object.prototype.hasOwnProperty.call(x,p)&&(E[p]=x[p])},L(P,N)};return function(P,N){if(typeof N!="function"&&N!==null)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");L(P,N);function E(){this.constructor=P}P.prototype=N===null?Object.create(N):(E.prototype=N.prototype,new E)}}();Object.defineProperty(F,"__esModule",{value:!0}),F.Graph=void 0;var X=z(199905),R=function(L){G(P,L);function P(){return L!==null&&L.apply(this,arguments)||this}return P}(X.Graph);F.Graph=R},441106:function(He,F,z){"use strict";var G=this&&this.__importDefault||function(L){return L&&L.__esModule?L:{default:L}};Object.defineProperty(F,"__esModule",{value:!0});var X=G(z(265236)),R=z(269209);F.default={layout:X.default,util:{time:R.time,notime:R.notime}}},178029:function(He,F,z){"use strict";var G=this&&this.__importDefault||function(N){return N&&N.__esModule?N:{default:N}};Object.defineProperty(F,"__esModule",{value:!0});var X=G(z(40773)),R=function(N){var E=function(p){return function(y){var g;return((g=p.edge(y))===null||g===void 0?void 0:g.weight)||1}},x=N.graph().acyclicer==="greedy"?(0,X.default)(N,E(N)):L(N);x==null||x.forEach(function(p){var y=N.edge(p);N.removeEdgeObj(p),y.forwardName=p.name,y.reversed=!0,N.setEdge(p.w,p.v,y,"rev-".concat(Math.random()))})},L=function(N){var E=[],x={},p={},y=function(g){var A;p[g]||(p[g]=!0,x[g]=!0,(A=N.outEdges(g))===null||A===void 0||A.forEach(function(_){x[_.w]?E.push(_):y(_.w)}),delete x[g])};return N.nodes().forEach(y),E},P=function(N){N.edges().forEach(function(E){var x=N.edge(E);if(x.reversed){N.removeEdgeObj(E);var p=x.forwardName;delete x.reversed,delete x.forwardName,N.setEdge(E.w,E.v,x,p)}})};F.default={run:R,undo:P}},111500:function(He,F,z){"use strict";Object.defineProperty(F,"__esModule",{value:!0});var G=z(269209),X=function(L){var P,N=function(E){var x=L.children(E),p=L.node(E);if(x!=null&&x.length&&x.forEach(function(A){return N(A)}),p.hasOwnProperty("minRank")){p.borderLeft=[],p.borderRight=[];for(var y=p.minRank,g=p.maxRank+1;y<g;y+=1)R(L,"borderLeft","_bl",E,p,y),R(L,"borderRight","_br",E,p,y)}};(P=L.children())===null||P===void 0||P.forEach(function(E){return N(E)})},R=function(L,P,N,E,x,p){var y={rank:p,borderType:P,width:0,height:0},g=x[P][p-1],A=(0,G.addDummyNode)(L,"border",y,N);x[P][p]=A,L.setParent(A,E),g&&L.setEdge(g,A,{weight:1})};F.default=X},335279:function(He,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0});var z=function(x){var p,y=(p=x.graph().rankdir)===null||p===void 0?void 0:p.toLowerCase();(y==="lr"||y==="rl")&&X(x)},G=function(x){var p,y=(p=x.graph().rankdir)===null||p===void 0?void 0:p.toLowerCase();(y==="bt"||y==="rl")&&L(x),(y==="lr"||y==="rl")&&(N(x),X(x))},X=function(x){x.nodes().forEach(function(p){R(x.node(p))}),x.edges().forEach(function(p){R(x.edge(p))})},R=function(x){var p=x.width;x.width=x.height,x.height=p},L=function(x){x.nodes().forEach(function(p){P(x.node(p))}),x.edges().forEach(function(p){var y,g=x.edge(p);(y=g.points)===null||y===void 0||y.forEach(function(A){return P(A)}),g.hasOwnProperty("y")&&P(g)})},P=function(x){x!=null&&x.y&&(x.y=-x.y)},N=function(x){x.nodes().forEach(function(p){E(x.node(p))}),x.edges().forEach(function(p){var y,g=x.edge(p);(y=g.points)===null||y===void 0||y.forEach(function(A){return E(A)}),g.hasOwnProperty("x")&&E(g)})},E=function(x){var p=x.x;x.x=x.y,x.y=p};F.default={adjust:z,undo:G}},455532:function(He,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0});var z=function(R,L){if(R!=="next"&&R!=="prev")return L},G=function(R){R.prev.next=R.next,R.next.prev=R.prev,delete R.next,delete R.prev},X=function(){function R(){var L={};L.prev=L,L.next=L.prev,this.shortcut=L}return R.prototype.dequeue=function(){var L=this.shortcut,P=L.prev;if(P&&P!==L)return G(P),P},R.prototype.enqueue=function(L){var P=this.shortcut;L.prev&&L.next&&G(L),L.next=P.next,P.next.prev=L,P.next=L,L.prev=P},R.prototype.toString=function(){for(var L=[],P=this.shortcut,N=P.prev;N!==P;)L.push(JSON.stringify(N,z)),N=N==null?void 0:N.prev;return"[".concat(L.join(", "),"]")},R}();F.default=X},40773:function(He,F,z){"use strict";var G=this&&this.__extends||function(){var _=function(S,O){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,m){B.__proto__=m}||function(B,m){for(var d in m)Object.prototype.hasOwnProperty.call(m,d)&&(B[d]=m[d])},_(S,O)};return function(S,O){if(typeof O!="function"&&O!==null)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");_(S,O);function B(){this.constructor=S}S.prototype=O===null?Object.create(O):(B.prototype=O.prototype,new B)}}(),X=this&&this.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(F,"__esModule",{value:!0});var R=X(z(455532)),L=z(199905),P=function(_){G(S,_);function S(){return _!==null&&_.apply(this,arguments)||this}return S}(R.default),N=function(_){G(S,_);function S(){return _!==null&&_.apply(this,arguments)||this}return S}(L.Graph),E=function(){return 1},x=function(_,S){var O;if(_.nodeCount()<=1)return[];var B=g(_,S||E),m=p(B.graph,B.buckets,B.zeroIdx);return(O=m.map(function(d){return _.outEdges(d.v,d.w)}))===null||O===void 0?void 0:O.flat()},p=function(_,S,O){for(var B=[],m=S[S.length-1],d=S[0],tt;_.nodeCount();){for(;tt=d.dequeue();)y(_,S,O,tt);for(;tt=m.dequeue();)y(_,S,O,tt);if(_.nodeCount()){for(var Y=S.length-2;Y>0;--Y)if(tt=S[Y].dequeue(),tt){B=B.concat(y(_,S,O,tt,!0));break}}}return B},y=function(_,S,O,B,m){var d,tt,Y=[];return(d=_.inEdges(B.v))===null||d===void 0||d.forEach(function(V){var $=_.edge(V),q=_.node(V.v);m&&Y.push({v:V.v,w:V.w,in:0,out:0}),q.out===void 0&&(q.out=0),q.out-=$,A(S,O,q)}),(tt=_.outEdges(B.v))===null||tt===void 0||tt.forEach(function(V){var $=_.edge(V),q=V.w,rt=_.node(q);rt.in===void 0&&(rt.in=0),rt.in-=$,A(S,O,rt)}),_.removeNode(B.v),m?Y:void 0},g=function(_,S){var O=new N,B=0,m=0;_.nodes().forEach(function($){O.setNode($,{v:$,in:0,out:0})}),_.edges().forEach(function($){var q=O.edge($)||0,rt=(S==null?void 0:S($))||1,Q=q+rt;O.setEdge($.v,$.w,Q),m=Math.max(m,O.node($.v).out+=rt),B=Math.max(B,O.node($.w).in+=rt)});for(var d=[],tt=m+B+3,Y=0;Y<tt;Y++)d.push(new P);var V=B+1;return O.nodes().forEach(function($){A(d,V,O.node($))}),{buckets:d,zeroIdx:V,graph:O}},A=function(_,S,O){O.out?O.in?_[O.out-O.in+S].enqueue(O):_[_.length-1].enqueue(O):_[0].enqueue(O)};F.default=x},265236:function(He,F,z){"use strict";var G=this&&this.__assign||function(){return G=Object.assign||function(Jt){for(var ae,Se=1,xe=arguments.length;Se<xe;Se++){ae=arguments[Se];for(var we in ae)Object.prototype.hasOwnProperty.call(ae,we)&&(Jt[we]=ae[we])}return Jt},G.apply(this,arguments)},X=this&&this.__importDefault||function(Jt){return Jt&&Jt.__esModule?Jt:{default:Jt}};Object.defineProperty(F,"__esModule",{value:!0});var R=X(z(178029)),L=X(z(546171)),P=X(z(576827)),N=z(269209),E=X(z(933562)),x=X(z(59596)),p=X(z(111500)),y=X(z(335279)),g=X(z(819597)),A=X(z(100095)),_=X(z(724956)),S=z(627652),O=function(Jt,ae){var Se=ae&&ae.debugTiming?N.time:N.notime;Se("layout",function(){ae&&!ae.keepNodeOrder&&ae.prevGraph&&Se("  inheritOrder",function(){m(Jt,ae.prevGraph)});var xe=Se("  buildLayoutGraph",function(){return ht(Jt)});ae&&ae.edgeLabelSpace===!1||Se("  makeSpaceForEdgeLabels",function(){dt(xe)});try{Se("  runLayout",function(){B(xe,Se,ae)})}catch(we){if(we.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,we);return}throw we}Se("  updateInputGraph",function(){d(Jt,xe)})})},B=function(Jt,ae,Se){ae("    removeSelfEdges",function(){ee(Jt)}),ae("    acyclic",function(){R.default.run(Jt)}),ae("    nestingGraph.run",function(){x.default.run(Jt)}),ae("    rank",function(){(0,P.default)((0,N.asNonCompoundGraph)(Jt))}),ae("    injectEdgeLabelProxies",function(){Ot(Jt)}),ae("    removeEmptyRanks",function(){(0,N.removeEmptyRanks)(Jt)}),ae("    nestingGraph.cleanup",function(){x.default.cleanup(Jt)}),ae("    normalizeRanks",function(){(0,N.normalizeRanks)(Jt)}),ae("    assignRankMinMax",function(){It(Jt)}),ae("    removeEdgeLabelProxies",function(){Kt(Jt)}),ae("    normalize.run",function(){L.default.run(Jt)}),ae("    parentDummyChains",function(){(0,E.default)(Jt)}),ae("    addBorderSegments",function(){(0,p.default)(Jt)}),Se&&Se.keepNodeOrder&&ae("    initDataOrder",function(){(0,_.default)(Jt,Se.nodeOrder)}),ae("    order",function(){(0,g.default)(Jt,Se==null?void 0:Se.keepNodeOrder)}),ae("    insertSelfEdges",function(){$t(Jt)}),ae("    adjustCoordinateSystem",function(){y.default.adjust(Jt)}),ae("    position",function(){(0,A.default)(Jt)}),ae("    positionSelfEdges",function(){ge(Jt)}),ae("    removeBorderNodes",function(){kt(Jt)}),ae("    normalize.undo",function(){L.default.undo(Jt)}),ae("    fixupEdgeLabelCoords",function(){st(Jt)}),ae("    undoCoordinateSystem",function(){y.default.undo(Jt)}),ae("    translateGraph",function(){Ft(Jt)}),ae("    assignNodeIntersects",function(){Nt(Jt)}),ae("    reversePoints",function(){yt(Jt)}),ae("    acyclic.undo",function(){R.default.undo(Jt)})},m=function(Jt,ae){Jt.nodes().forEach(function(Se){var xe=Jt.node(Se),we=ae.node(Se);we!==void 0?(xe.fixorder=we._order,delete we._order):delete xe.fixorder})},d=function(Jt,ae){Jt.nodes().forEach(function(Se){var xe,we=Jt.node(Se);if(we){var zt=ae.node(Se);we.x=zt.x,we.y=zt.y,we._order=zt.order,we._rank=zt.rank,!((xe=ae.children(Se))===null||xe===void 0)&&xe.length&&(we.width=zt.width,we.height=zt.height)}}),Jt.edges().forEach(function(Se){var xe=Jt.edge(Se),we=ae.edge(Se);xe.points=we?we.points:[],we&&we.hasOwnProperty("x")&&(xe.x=we.x,xe.y=we.y)}),Jt.graph().width=ae.graph().width,Jt.graph().height=ae.graph().height},tt=["nodesep","edgesep","ranksep","marginx","marginy"],Y={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},V=["acyclicer","ranker","rankdir","align"],$=["width","height","layer","fixorder"],q={width:0,height:0},rt=["minlen","weight","width","height","labeloffset"],Q={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},it=["labelpos"],ht=function(Jt){var ae=new S.Graph({multigraph:!0,compound:!0}),Se=er(Jt.graph()),xe={};return V==null||V.forEach(function(we){Se[we]!==void 0&&(xe[we]=Se[we])}),ae.setGraph(Object.assign({},Y,Pe(Se,tt),xe)),Jt.nodes().forEach(function(we){var zt=er(Jt.node(we)),Wt=G(G({},q),zt),Ie=Pe(Wt,$);ae.setNode(we,Ie),ae.setParent(we,Jt.parent(we))}),Jt.edges().forEach(function(we){var zt=er(Jt.edge(we)),Wt={};it==null||it.forEach(function(Ie){zt[Ie]!==void 0&&(Wt[Ie]=zt[Ie])}),ae.setEdgeObj(we,Object.assign({},Q,Pe(zt,rt),Wt))}),ae},dt=function(Jt){var ae=Jt.graph();ae.ranksep||(ae.ranksep=0),ae.ranksep/=2,Jt.nodes().forEach(function(Se){var xe=Jt.node(Se);isNaN(xe.layer)||xe.layer||(xe.layer=0)}),Jt.edges().forEach(function(Se){var xe,we=Jt.edge(Se);we.minlen*=2,((xe=we.labelpos)===null||xe===void 0?void 0:xe.toLowerCase())!=="c"&&(ae.rankdir==="TB"||ae.rankdir==="BT"?we.width+=we.labeloffset:we.height+=we.labeloffset)})},Ot=function(Jt){Jt.edges().forEach(function(ae){var Se=Jt.edge(ae);if(Se.width&&Se.height){var xe=Jt.node(ae.v),we=Jt.node(ae.w),zt={e:ae,rank:(we.rank-xe.rank)/2+xe.rank};(0,N.addDummyNode)(Jt,"edge-proxy",zt,"_ep")}})},It=function(Jt){var ae=0;Jt.nodes().forEach(function(Se){var xe,we,zt=Jt.node(Se);zt.borderTop&&(zt.minRank=(xe=Jt.node(zt.borderTop))===null||xe===void 0?void 0:xe.rank,zt.maxRank=(we=Jt.node(zt.borderBottom))===null||we===void 0?void 0:we.rank,ae=Math.max(ae,zt.maxRank||-1/0))}),Jt.graph().maxRank=ae},Kt=function(Jt){Jt.nodes().forEach(function(ae){var Se=Jt.node(ae);Se.dummy==="edge-proxy"&&(Jt.edge(Se.e).labelRank=Se.rank,Jt.removeNode(ae))})},Ft=function(Jt){var ae,Se=0,xe,we=0,zt=Jt.graph(),Wt=zt.marginx||0,Ie=zt.marginy||0,Yt=function(ie){if(ie){var Oe=ie.x,re=ie.y,_e=ie.width,Ge=ie.height;!isNaN(Oe)&&!isNaN(_e)&&(ae===void 0&&(ae=Oe-_e/2),ae=Math.min(ae,Oe-_e/2),Se=Math.max(Se,Oe+_e/2)),!isNaN(re)&&!isNaN(Ge)&&(xe===void 0&&(xe=re-Ge/2),xe=Math.min(xe,re-Ge/2),we=Math.max(we,re+Ge/2))}};Jt.nodes().forEach(function(ie){Yt(Jt.node(ie))}),Jt.edges().forEach(function(ie){var Oe=Jt.edge(ie);Oe!=null&&Oe.hasOwnProperty("x")&&Yt(Oe)}),ae-=Wt,xe-=Ie,Jt.nodes().forEach(function(ie){var Oe=Jt.node(ie);Oe&&(Oe.x-=ae,Oe.y-=xe)}),Jt.edges().forEach(function(ie){var Oe,re=Jt.edge(ie);(Oe=re.points)===null||Oe===void 0||Oe.forEach(function(_e){_e.x-=ae,_e.y-=xe}),re.hasOwnProperty("x")&&(re.x-=ae),re.hasOwnProperty("y")&&(re.y-=xe)}),zt.width=Se-ae+Wt,zt.height=we-xe+Ie},Nt=function(Jt){Jt.edges().forEach(function(ae){var Se=Jt.edge(ae),xe=Jt.node(ae.v),we=Jt.node(ae.w),zt,Wt;Se.points?(zt=Se.points[0],Wt=Se.points[Se.points.length-1]):(Se.points=[],zt=we,Wt=xe),Se.points.unshift((0,N.intersectRect)(xe,zt)),Se.points.push((0,N.intersectRect)(we,Wt))})},st=function(Jt){Jt.edges().forEach(function(ae){var Se=Jt.edge(ae);if(Se!=null&&Se.hasOwnProperty("x"))switch((Se.labelpos==="l"||Se.labelpos==="r")&&(Se.width-=Se.labeloffset),Se.labelpos){case"l":Se.x-=Se.width/2+Se.labeloffset;break;case"r":Se.x+=Se.width/2+Se.labeloffset;break}})},yt=function(Jt){Jt.edges().forEach(function(ae){var Se,xe=Jt.edge(ae);xe.reversed&&((Se=xe.points)===null||Se===void 0||Se.reverse())})},kt=function(Jt){Jt.nodes().forEach(function(ae){var Se,xe,we;if(!((Se=Jt.children(ae))===null||Se===void 0)&&Se.length){var zt=Jt.node(ae),Wt=Jt.node(zt.borderTop),Ie=Jt.node(zt.borderBottom),Yt=Jt.node(zt.borderLeft[((xe=zt.borderLeft)===null||xe===void 0?void 0:xe.length)-1]),ie=Jt.node(zt.borderRight[((we=zt.borderRight)===null||we===void 0?void 0:we.length)-1]);zt.width=Math.abs((ie==null?void 0:ie.x)-(Yt==null?void 0:Yt.x))||10,zt.height=Math.abs((Ie==null?void 0:Ie.y)-(Wt==null?void 0:Wt.y))||10,zt.x=((Yt==null?void 0:Yt.x)||0)+zt.width/2,zt.y=((Wt==null?void 0:Wt.y)||0)+zt.height/2}}),Jt.nodes().forEach(function(ae){var Se;((Se=Jt.node(ae))===null||Se===void 0?void 0:Se.dummy)==="border"&&Jt.removeNode(ae)})},ee=function(Jt){Jt.edges().forEach(function(ae){if(ae.v===ae.w){var Se=Jt.node(ae.v);Se.selfEdges||(Se.selfEdges=[]),Se.selfEdges.push({e:ae,label:Jt.edge(ae)}),Jt.removeEdgeObj(ae)}})},$t=function(Jt){var ae=(0,N.buildLayerMatrix)(Jt);ae==null||ae.forEach(function(Se){var xe=0;Se==null||Se.forEach(function(we,zt){var Wt,Ie=Jt.node(we);Ie.order=zt+xe,(Wt=Ie.selfEdges)===null||Wt===void 0||Wt.forEach(function(Yt){(0,N.addDummyNode)(Jt,"selfedge",{width:Yt.label.width,height:Yt.label.height,rank:Ie.rank,order:zt+ ++xe,e:Yt.e,label:Yt.label},"_se")}),delete Ie.selfEdges})})},ge=function(Jt){Jt.nodes().forEach(function(ae){var Se=Jt.node(ae);if(Se.dummy==="selfedge"){var xe=Jt.node(Se.e.v),we=xe.x+xe.width/2,zt=xe.y,Wt=Se.x-we,Ie=xe.height/2;Jt.setEdgeObj(Se.e,Se.label),Jt.removeNode(ae),Se.label.points=[{x:we+2*Wt/3,y:zt-Ie},{x:we+5*Wt/6,y:zt-Ie},{y:zt,x:we+Wt},{x:we+5*Wt/6,y:zt+Ie},{x:we+2*Wt/3,y:zt+Ie}],Se.label.x=Se.x,Se.label.y=Se.y}})},Pe=function(Jt,ae){var Se={};return ae==null||ae.forEach(function(xe){Jt[xe]!==void 0&&(Se[xe]=+Jt[xe])}),Se},er=function(Jt){Jt===void 0&&(Jt={});var ae={};return Object.keys(Jt).forEach(function(Se){ae[Se.toLowerCase()]=Jt[Se]}),ae};F.default=O},59596:function(He,F,z){"use strict";Object.defineProperty(F,"__esModule",{value:!0});var G=z(269209),X=function(E){var x,p=(0,G.addDummyNode)(E,"root",{},"_root"),y=L(E),g=Math.max.apply(Math,Object.values(y));Math.abs(g)===1/0&&(g=1);var A=g-1,_=2*A+1;E.graph().nestingRoot=p,E.edges().forEach(function(O){E.edge(O).minlen*=_});var S=P(E)+1;(x=E.children())===null||x===void 0||x.forEach(function(O){R(E,p,_,S,A,y,O)}),E.graph().nodeRankFactor=_},R=function(E,x,p,y,g,A,_){var S=E.children(_);if(!(S!=null&&S.length)){_!==x&&E.setEdge(x,_,{weight:0,minlen:p});return}var O=(0,G.addBorderNode)(E,"_bt"),B=(0,G.addBorderNode)(E,"_bb"),m=E.node(_);E.setParent(O,_),m.borderTop=O,E.setParent(B,_),m.borderBottom=B,S==null||S.forEach(function(d){R(E,x,p,y,g,A,d);var tt=E.node(d),Y=tt.borderTop?tt.borderTop:d,V=tt.borderBottom?tt.borderBottom:d,$=tt.borderTop?y:2*y,q=Y!==V?1:g-A[_]+1;E.setEdge(O,Y,{minlen:q,weight:$,nestingEdge:!0}),E.setEdge(V,B,{minlen:q,weight:$,nestingEdge:!0})}),E.parent(_)||E.setEdge(x,O,{weight:0,minlen:g+A[_]})},L=function(E){var x,p={},y=function(g,A){var _=E.children(g);_==null||_.forEach(function(S){return y(S,A+1)}),p[g]=A};return(x=E.children())===null||x===void 0||x.forEach(function(g){return y(g,1)}),p},P=function(E){var x=0;return E.edges().forEach(function(p){x+=E.edge(p).weight}),x},N=function(E){var x=E.graph();x.nestingRoot&&E.removeNode(x.nestingRoot),delete x.nestingRoot,E.edges().forEach(function(p){var y=E.edge(p);y.nestingEdge&&E.removeEdgeObj(p)})};F.default={run:X,cleanup:N}},546171:function(He,F,z){"use strict";Object.defineProperty(F,"__esModule",{value:!0});var G=z(269209),X=function(P){P.graph().dummyChains=[],P.edges().forEach(function(N){return R(P,N)})},R=function(P,N){var E=N.v,x=P.node(E).rank,p=N.w,y=P.node(p).rank,g=N.name,A=P.edge(N),_=A.labelRank;if(y!==x+1){P.removeEdgeObj(N);var S=P.graph(),O,B,m;for(m=0,++x;x<y;++m,++x)A.points=[],B={edgeLabel:A,width:0,height:0,edgeObj:N,rank:x},O=(0,G.addDummyNode)(P,"edge",B,"_d"),x===_&&(B.width=A.width,B.height=A.height,B.dummy="edge-label",B.labelpos=A.labelpos),P.setEdge(E,O,{weight:A.weight},g),m===0&&(S.dummyChains||(S.dummyChains=[]),S.dummyChains.push(O)),E=O;P.setEdge(E,p,{weight:A.weight},g)}},L=function(P){var N;(N=P.graph().dummyChains)===null||N===void 0||N.forEach(function(E){var x=P.node(E),p=x.edgeLabel,y;x.edgeObj&&P.setEdgeObj(x.edgeObj,p);for(var g=E;x.dummy;)y=P.successors(g)[0],P.removeNode(g),p.points.push({x:x.x,y:x.y}),x.dummy==="edge-label"&&(p.x=x.x,p.y=x.y,p.width=x.width,p.height=x.height),g=y,x=P.node(g)})};F.default={run:X,undo:L}},680314:function(He,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0});var z=function(G,X,R){var L={},P;R==null||R.forEach(function(N){for(var E=G.parent(N),x,p;E;){if(x=G.parent(E),x?(p=L[x],L[x]=E):(p=P,P=E),p&&p!==E){X.setEdge(p,E);return}E=x}})};F.default=z},989921:function(He,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0});var z=function(G,X){return X.map(function(R){var L=G.inEdges(R);if(!(L!=null&&L.length))return{v:R};{var P={sum:0,weight:0};return L==null||L.forEach(function(N){var E=G.edge(N),x=G.node(N.v);P.sum+=E.weight*x.order,P.weight+=E.weight}),{v:R,barycenter:P.sum/P.weight,weight:P.weight}}})};F.default=z},277006:function(He,F,z){"use strict";Object.defineProperty(F,"__esModule",{value:!0});var G=z(627652),X=function(L,P,N){var E=R(L),x=new G.Graph({compound:!0}).setGraph({root:E}).setDefaultNodeLabel(function(p){return L.node(p)});return L.nodes().forEach(function(p){var y,g=L.node(p),A=L.parent(p);(g.rank===P||g.minRank<=P&&P<=g.maxRank)&&(x.setNode(p),x.setParent(p,A||E),(y=L[N](p))===null||y===void 0||y.forEach(function(_){var S=_.v===p?_.w:_.v,O=x.edgeFromArgs(S,p),B=O!==void 0?O.weight:0;x.setEdge(S,p,{weight:L.edge(_).weight+B})}),g.hasOwnProperty("minRank")&&x.setNode(p,{borderLeft:g.borderLeft[P],borderRight:g.borderRight[P]}))}),x},R=function(L){for(var P;L.hasNode(P="_root".concat(Math.random())););return P};F.default=X},632957:function(He,F,z){"use strict";Object.defineProperty(F,"__esModule",{value:!0});var G=z(269209),X=function(L,P,N){for(var E=(0,G.zipObject)(N,N.map(function(S,O){return O})),x=P.map(function(S){var O,B=(O=L.outEdges(S))===null||O===void 0?void 0:O.map(function(m){return{pos:E[m.w]||0,weight:L.edge(m).weight}});return B==null?void 0:B.sort(function(m,d){return m.pos-d.pos})}),p=x.flat().filter(function(S){return S!==void 0}),y=1;y<N.length;)y<<=1;var g=2*y-1;y-=1;var A=Array(g).fill(0,0,g),_=0;return p==null||p.forEach(function(S){if(S){var O=S.pos+y;A[O]+=S.weight;for(var B=0;O>0;)O%2&&(B+=A[O+1]),O=O-1>>1,A[O]+=S.weight;_+=S.weight*B}}),_},R=function(L,P){for(var N=0,E=1;E<(P==null?void 0:P.length);E+=1)N+=X(L,P[E-1],P[E]);return N};F.default=R},819597:function(He,F,z){"use strict";var G=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(F,"__esModule",{value:!0});var X=G(z(115697)),R=G(z(632957)),L=G(z(277006)),P=G(z(680314)),N=G(z(99455)),E=z(449784),x=z(627652),p=z(269209),y=function(S,O){for(var B=(0,p.maxRank)(S),m=[],d=[],tt=1;tt<B+1;tt++)m.push(tt);for(var tt=B-1;tt>-1;tt--)d.push(tt);var Y=g(S,m,"inEdges"),V=g(S,d,"outEdges"),$=(0,X.default)(S);_(S,$);for(var q=Number.POSITIVE_INFINITY,rt,tt=0,Q=0;Q<4;++tt,++Q){A(tt%2?Y:V,tt%4>=2,!1,O),$=(0,p.buildLayerMatrix)(S);var it=(0,R.default)(S,$);it<q&&(Q=0,rt=(0,E.clone)($),q=it)}$=(0,X.default)(S),_(S,$);for(var tt=0,Q=0;Q<4;++tt,++Q){A(tt%2?Y:V,tt%4>=2,!0,O),$=(0,p.buildLayerMatrix)(S);var it=(0,R.default)(S,$);it<q&&(Q=0,rt=(0,E.clone)($),q=it)}_(S,rt)},g=function(S,O,B){return O.map(function(m){return(0,L.default)(S,m,B)})},A=function(S,O,B,m){var d=new x.Graph;S==null||S.forEach(function(tt){for(var Y,V=tt.graph().root,$=(0,N.default)(tt,V,d,O,B,m),q=0;q<((Y=$.vs)===null||Y===void 0?void 0:Y.length);q++){var rt=tt.node($.vs[q]);rt&&(rt.order=q)}(0,P.default)(tt,d,$.vs)})},_=function(S,O){O==null||O.forEach(function(B){B==null||B.forEach(function(m,d){S.node(m).order=d})})};F.default=y},724956:function(He,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0});var z=function(G,X){for(var R=G.nodes().filter(function(x){var p;return!(!((p=G.children(x))===null||p===void 0)&&p.length)}),L=R.map(function(x){return G.node(x).rank}),P=Math.max.apply(Math,L),N=[],E=0;E<P+1;E++)N[E]=[];X==null||X.forEach(function(x){var p=G.node(x);!p||p!=null&&p.dummy||isNaN(p.rank)||(p.fixorder=N[p.rank].length,N[p.rank].push(x))})};F.default=z},115697:function(He,F,z){"use strict";Object.defineProperty(F,"__esModule",{value:!0});var G=z(772549),X=function(R){for(var L={},P=R.nodes().filter(function(S){var O;return!(!((O=R.children(S))===null||O===void 0)&&O.length)}),N=P.map(function(S){return R.node(S).rank}),E=(0,G.max)(N),x=[],p=0;p<E+1;p++)x.push([]);var y=function(S){var O;if(!L.hasOwnProperty(S)){L[S]=!0;var B=R.node(S);isNaN(B.rank)||x[B.rank].push(S),(O=R.successors(S))===null||O===void 0||O.forEach(function(m){return y(m)})}},g=P.sort(function(S,O){return R.node(S).rank-R.node(O).rank}),A=g.filter(function(S){return R.node(S).fixorder!==void 0}),_=A.sort(function(S,O){return R.node(S).fixorder-R.node(O).fixorder});return _==null||_.forEach(function(S){isNaN(R.node(S).rank)||x[R.node(S).rank].push(S),L[S]=!0}),g==null||g.forEach(y),x};F.default=X},707043:function(He,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0});var z=function(R,L){var P,N,E,x={};R==null||R.forEach(function(y,g){x[y.v]={i:g,indegree:0,in:[],out:[],vs:[y.v]};var A=x[y.v];y.barycenter!==void 0&&(A.barycenter=y.barycenter,A.weight=y.weight)}),(P=L.edges())===null||P===void 0||P.forEach(function(y){var g=x[y.v],A=x[y.w];g!==void 0&&A!==void 0&&(A.indegree++,g.out.push(x[y.w]))});var p=(E=(N=Object.values(x)).filter)===null||E===void 0?void 0:E.call(N,function(y){return!y.indegree});return G(p)},G=function(R){for(var L,P,N=[],E=function(A){return function(_){_.merged||(_.barycenter===void 0||A.barycenter===void 0||_.barycenter>=A.barycenter)&&X(A,_)}},x=function(A){return function(_){_.in.push(A),--_.indegree===0&&R.push(_)}},p=function(){var A=R.pop();N.push(A),(L=A.in.reverse())===null||L===void 0||L.forEach(function(_){return E(A)(_)}),(P=A.out)===null||P===void 0||P.forEach(function(_){return x(A)(_)})};R!=null&&R.length;)p();var y=N.filter(function(A){return!A.merged}),g=["vs","i","barycenter","weight"];return y.map(function(A){var _={};return g==null||g.forEach(function(S){A[S]!==void 0&&(_[S]=A[S])}),_})},X=function(R,L){var P,N=0,E=0;R.weight&&(N+=R.barycenter*R.weight,E+=R.weight),L.weight&&(N+=L.barycenter*L.weight,E+=L.weight),R.vs=(P=L.vs)===null||P===void 0?void 0:P.concat(R.vs),R.barycenter=N/E,R.weight=E,R.i=Math.min(L.i,R.i),L.merged=!0};F.default=z},99455:function(He,F,z){"use strict";var G=this&&this.__importDefault||function(x){return x&&x.__esModule?x:{default:x}};Object.defineProperty(F,"__esModule",{value:!0});var X=G(z(989921)),R=G(z(707043)),L=G(z(421498)),P=function(x,p,y,g,A,_){var S,O,B,m,d=x.children(p),tt=x.node(p),Y=tt?tt.borderLeft:void 0,V=tt?tt.borderRight:void 0,$={};Y&&(d=d==null?void 0:d.filter(function(dt){return dt!==Y&&dt!==V}));var q=(0,X.default)(x,d||[]);q==null||q.forEach(function(dt){var Ot;if(!((Ot=x.children(dt.v))===null||Ot===void 0)&&Ot.length){var It=P(x,dt.v,y,g,_);$[dt.v]=It,It.hasOwnProperty("barycenter")&&E(dt,It)}});var rt=(0,R.default)(q,y);N(rt,$),(S=rt.filter(function(dt){return dt.vs.length>0}))===null||S===void 0||S.forEach(function(dt){var Ot=x.node(dt.vs[0]);Ot&&(dt.fixorder=Ot.fixorder,dt.order=Ot.order)});var Q=(0,L.default)(rt,g,A,_);if(Y&&(Q.vs=[Y,Q.vs,V].flat(),!((O=x.predecessors(Y))===null||O===void 0)&&O.length)){var it=x.node(((B=x.predecessors(Y))===null||B===void 0?void 0:B[0])||""),ht=x.node(((m=x.predecessors(V))===null||m===void 0?void 0:m[0])||"");Q.hasOwnProperty("barycenter")||(Q.barycenter=0,Q.weight=0),Q.barycenter=(Q.barycenter*Q.weight+it.order+ht.order)/(Q.weight+2),Q.weight+=2}return Q},N=function(x,p){x==null||x.forEach(function(y){var g,A=(g=y.vs)===null||g===void 0?void 0:g.map(function(_){return p[_]?p[_].vs:_});y.vs=A.flat()})},E=function(x,p){x.barycenter!==void 0?(x.barycenter=(x.barycenter*x.weight+p.barycenter*p.weight)/(x.weight+p.weight),x.weight+=p.weight):(x.barycenter=p.barycenter,x.weight=p.weight)};F.default=P},421498:function(He,F,z){"use strict";Object.defineProperty(F,"__esModule",{value:!0});var G=z(269209),X=function(P,N,E,x){var p=(0,G.partition)(P,function(m){var d=m.hasOwnProperty("fixorder")&&!isNaN(m.fixorder);return x?!d&&m.hasOwnProperty("barycenter"):d||m.hasOwnProperty("barycenter")}),y=p.lhs,g=p.rhs.sort(function(m,d){return-m.i- -d.i}),A=[],_=0,S=0,O=0;y==null||y.sort(L(!!N,!!E)),O=R(A,g,O),y==null||y.forEach(function(m){var d;O+=(d=m.vs)===null||d===void 0?void 0:d.length,A.push(m.vs),_+=m.barycenter*m.weight,S+=m.weight,O=R(A,g,O)});var B={vs:A.flat()};return S&&(B.barycenter=_/S,B.weight=S),B},R=function(P,N,E){for(var x=E,p;N.length&&(p=N[N.length-1]).i<=x;)N.pop(),P==null||P.push(p.vs),x++;return x},L=function(P,N){return function(E,x){if(E.fixorder!==void 0&&x.fixorder!==void 0)return E.fixorder-x.fixorder;if(E.barycenter<x.barycenter)return-1;if(E.barycenter>x.barycenter)return 1;if(N&&E.order!==void 0&&x.order!==void 0){if(E.order<x.order)return-1;if(E.order>x.order)return 1}return P?x.i-E.i:E.i-x.i}};F.default=X},933562:function(He,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0});var z=function(R){var L,P={},N=0,E=function(x){var p,y=N;(p=R.children(x))===null||p===void 0||p.forEach(E),P[x]={low:y,lim:N++}};return(L=R.children())===null||L===void 0||L.forEach(E),P},G=function(R,L,P,N){var E=[],x=[],p=Math.min(L[P].low,L[N].low),y=Math.max(L[P].lim,L[N].lim),g,A;g=P;do g=R.parent(g),E.push(g);while(g&&(L[g].low>p||y>L[g].lim));for(A=g,g=N;g&&g!==A;)x.push(g),g=R.parent(g);return{lca:A,path:E.concat(x.reverse())}},X=function(R){var L,P=z(R);(L=R.graph().dummyChains)===null||L===void 0||L.forEach(function(N){var E,x,p=N,y=R.node(p),g=y.edgeObj;if(g)for(var A=G(R,P,g.v,g.w),_=A.path,S=A.lca,O=0,B=_[O],m=!0;p!==g.w;){if(y=R.node(p),m){for(;B!==S&&((E=R.node(B))===null||E===void 0?void 0:E.maxRank)<y.rank;)O++,B=_[O];B===S&&(m=!1)}if(!m){for(;O<_.length-1&&((x=R.node(_[O+1]))===null||x===void 0?void 0:x.minRank)<=y.rank;)O++;B=_[O]}R.setParent(p,B),p=R.successors(p)[0]}})};F.default=X},371963:function(He,F,z){"use strict";var G=this&&this.__extends||function(){var Y=function(V,$){return Y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,rt){q.__proto__=rt}||function(q,rt){for(var Q in rt)Object.prototype.hasOwnProperty.call(rt,Q)&&(q[Q]=rt[Q])},Y(V,$)};return function(V,$){if(typeof $!="function"&&$!==null)throw new TypeError("Class extends value "+String($)+" is not a constructor or null");Y(V,$);function q(){this.constructor=V}V.prototype=$===null?Object.create($):(q.prototype=$.prototype,new q)}}();Object.defineProperty(F,"__esModule",{value:!0}),F.width=F.sep=F.positionX=F.balance=F.alignCoordinates=F.findSmallestWidthAlignment=F.buildBlockGraph=F.horizontalCompaction=F.verticalAlignment=F.hasConflict=F.addConflict=F.findOtherInnerSegmentNode=F.findType2Conflicts=F.findType1Conflicts=void 0;var X=z(199905),R=z(772549),L=z(269209),P=function(Y){G(V,Y);function V(){return Y!==null&&Y.apply(this,arguments)||this}return V}(X.Graph),N=function(Y,V){var $={},q=function(rt,Q){var it=0,ht=0,dt=rt.length,Ot=Q==null?void 0:Q[(Q==null?void 0:Q.length)-1];return Q==null||Q.forEach(function(It,Kt){var Ft,Nt=(0,F.findOtherInnerSegmentNode)(Y,It),st=Nt?Y.node(Nt).order:dt;(Nt||It===Ot)&&((Ft=Q.slice(ht,Kt+1))===null||Ft===void 0||Ft.forEach(function(yt){var kt;(kt=Y.predecessors(yt))===null||kt===void 0||kt.forEach(function(ee){var $t,ge=Y.node(ee),Pe=ge.order;(Pe<it||st<Pe)&&!(ge.dummy&&(!(($t=Y.node(yt))===null||$t===void 0)&&$t.dummy))&&(0,F.addConflict)($,ee,yt)})}),ht=Kt+1,it=st)}),Q};return V!=null&&V.length&&V.reduce(q),$};F.findType1Conflicts=N;var E=function(Y,V){var $={};function q(ht,dt,Ot,It,Kt){for(var Ft,Nt,st,yt=dt;yt<Ot;yt++)st=ht[yt],!((Ft=Y.node(st))===null||Ft===void 0)&&Ft.dummy&&((Nt=Y.predecessors(st))===null||Nt===void 0||Nt.forEach(function(kt){var ee=Y.node(kt);ee.dummy&&(ee.order<It||ee.order>Kt)&&(0,F.addConflict)($,kt,st)}))}function rt(ht){return JSON.stringify(ht.slice(1))}function Q(ht,dt){var Ot=rt(ht);dt.get(Ot)||(q.apply(void 0,ht),dt.set(Ot,!0))}var it=function(ht,dt){var Ot=-1,It,Kt=0,Ft=new Map;return dt==null||dt.forEach(function(Nt,st){var yt;if(((yt=Y.node(Nt))===null||yt===void 0?void 0:yt.dummy)==="border"){var kt=Y.predecessors(Nt)||[];kt.length&&(It=Y.node(kt[0]).order,Q([dt,Kt,st,Ot,It],Ft),Kt=st,Ot=It)}Q([dt,Kt,dt.length,It,ht.length],Ft)}),dt};return V!=null&&V.length&&V.reduce(it),$};F.findType2Conflicts=E;var x=function(Y,V){var $,q;if(!(($=Y.node(V))===null||$===void 0)&&$.dummy)return(q=Y.predecessors(V))===null||q===void 0?void 0:q.find(function(rt){return Y.node(rt).dummy})};F.findOtherInnerSegmentNode=x;var p=function(Y,V,$){var q=V,rt=$;if(q>rt){var Q=q;q=rt,rt=Q}var it=Y[q];it||(Y[q]=it={}),it[rt]=!0};F.addConflict=p;var y=function(Y,V,$){var q=V,rt=$;if(q>rt){var Q=V;q=rt,rt=Q}return!!Y[q]};F.hasConflict=y;var g=function(Y,V,$,q){var rt={},Q={},it={};return V==null||V.forEach(function(ht){ht==null||ht.forEach(function(dt,Ot){rt[dt]=dt,Q[dt]=dt,it[dt]=Ot})}),V==null||V.forEach(function(ht){var dt=-1;ht==null||ht.forEach(function(Ot){var It=q(Ot);if(It.length){It=It.sort(function(yt,kt){return it[yt]-it[kt]});for(var Kt=(It.length-1)/2,Ft=Math.floor(Kt),Nt=Math.ceil(Kt);Ft<=Nt;++Ft){var st=It[Ft];Q[Ot]===Ot&&dt<it[st]&&!(0,F.hasConflict)($,Ot,st)&&(Q[st]=Ot,Q[Ot]=rt[Ot]=rt[st],dt=it[st])}}})}),{root:rt,align:Q}};F.verticalAlignment=g;var A=function(Y,V,$,q,rt){var Q,it={},ht=(0,F.buildBlockGraph)(Y,V,$,rt),dt=rt?"borderLeft":"borderRight",Ot=function(Ft,Nt){for(var st=ht.nodes(),yt=st.pop(),kt={};yt;)kt[yt]?Ft(yt):(kt[yt]=!0,st.push(yt),st=st.concat(Nt(yt))),yt=st.pop()},It=function(Ft){it[Ft]=(ht.inEdges(Ft)||[]).reduce(function(Nt,st){return Math.max(Nt,(it[st.v]||0)+ht.edge(st))},0)},Kt=function(Ft){var Nt=(ht.outEdges(Ft)||[]).reduce(function(yt,kt){return Math.min(yt,(it[kt.w]||0)-ht.edge(kt))},Number.POSITIVE_INFINITY),st=Y.node(Ft);Nt!==Number.POSITIVE_INFINITY&&st.borderType!==dt&&(it[Ft]=Math.max(it[Ft],Nt))};return Ot(It,ht.predecessors.bind(ht)),Ot(Kt,ht.successors.bind(ht)),(Q=Object.values(q))===null||Q===void 0||Q.forEach(function(Ft){it[Ft]=it[$[Ft]]}),it};F.horizontalCompaction=A;var _=function(Y,V,$,q){var rt=new P,Q=Y.graph(),it=(0,F.sep)(Q.nodesep,Q.edgesep,q);return V==null||V.forEach(function(ht){var dt;ht==null||ht.forEach(function(Ot){var It=$[Ot];if(rt.setNode(It),dt){var Kt=$[dt],Ft=rt.edgeFromArgs(Kt,It);rt.setEdge(Kt,It,Math.max(it(Y,Ot,dt),Ft||0))}dt=Ot})}),rt};F.buildBlockGraph=_;var S=function(Y,V){return(0,L.minBy)(Object.values(V),function($){var q,rt=Number.NEGATIVE_INFINITY,Q=Number.POSITIVE_INFINITY;return(q=Object.keys($))===null||q===void 0||q.forEach(function(it){var ht=$[it],dt=(0,F.width)(Y,it)/2;rt=Math.max(ht+dt,rt),Q=Math.min(ht-dt,Q)}),rt-Q})};F.findSmallestWidthAlignment=S;function O(Y,V){var $=Object.values(V),q=(0,R.min)($),rt=(0,R.max)($);["u","d"].forEach(function(Q){["l","r"].forEach(function(it){var ht=Q+it,dt=Y[ht],Ot;if(dt!==V){var It=Object.values(dt);Ot=it==="l"?q-(0,R.min)(It):rt-(0,R.max)(It),Ot&&(Y[ht]={},Object.keys(dt).forEach(function(Kt){Y[ht][Kt]=dt[Kt]+Ot}))}})})}F.alignCoordinates=O;var B=function(Y,V){var $={};return Object.keys(Y.ul).forEach(function(q){if(V)$[q]=Y[V.toLowerCase()][q];else{var rt=Object.values(Y).map(function(Q){return Q[q]});$[q]=(rt[0]+rt[1])/2}}),$};F.balance=B;var m=function(Y){var V=(0,L.buildLayerMatrix)(Y),$=Object.assign((0,F.findType1Conflicts)(Y,V),(0,F.findType2Conflicts)(Y,V)),q={},rt;["u","d"].forEach(function(it){rt=it==="u"?V:Object.values(V).reverse(),["l","r"].forEach(function(ht){ht==="r"&&(rt=rt.map(function(Kt){return Object.values(Kt).reverse()}));var dt=(it==="u"?Y.predecessors:Y.successors).bind(Y),Ot=(0,F.verticalAlignment)(Y,rt,$,dt),It=(0,F.horizontalCompaction)(Y,rt,Ot.root,Ot.align,ht==="r");ht==="r"&&Object.keys(It).forEach(function(Kt){It[Kt]=-It[Kt]}),q[it+ht]=It})});var Q=(0,F.findSmallestWidthAlignment)(Y,q);return O(q,Q),(0,F.balance)(q,Y.graph().align)};F.positionX=m;var d=function(Y,V,$){return function(q,rt,Q){var it=q.node(rt),ht=q.node(Q),dt=0,Ot;if(dt+=it.width/2,it.hasOwnProperty("labelpos"))switch((it.labelpos||"").toLowerCase()){case"l":Ot=-it.width/2;break;case"r":Ot=it.width/2;break}if(Ot&&(dt+=$?Ot:-Ot),Ot=0,dt+=(it.dummy?V:Y)/2,dt+=(ht.dummy?V:Y)/2,dt+=ht.width/2,ht.labelpos)switch((ht.labelpos||"").toLowerCase()){case"l":Ot=ht.width/2;break;case"r":Ot=-ht.width/2;break}return Ot&&(dt+=$?Ot:-Ot),Ot=0,dt}};F.sep=d;var tt=function(Y,V){return Y.node(V).width||0};F.width=tt},100095:function(He,F,z){"use strict";var G=this&&this.__spreadArray||function(E,x,p){if(p||arguments.length===2)for(var y=0,g=x.length,A;y<g;y++)(A||!(y in x))&&(A||(A=Array.prototype.slice.call(x,0,y)),A[y]=x[y]);return E.concat(A||Array.prototype.slice.call(x))};Object.defineProperty(F,"__esModule",{value:!0});var X=z(269209),R=z(371963),L=function(E){var x=(0,X.buildLayerMatrix)(E),p=E.graph().ranksep,y=0;x==null||x.forEach(function(g){var A=g.map(function(S){return E.node(S).height}),_=Math.max.apply(Math,G(G([],A,!1),[0],!1));g==null||g.forEach(function(S){E.node(S).y=y+_/2}),y+=_+p})},P=function(E){var x=(0,X.buildLayerMatrix)(E),p=Object.assign((0,R.findType1Conflicts)(E,x),(0,R.findType2Conflicts)(E,x)),y={},g=[];["u","d"].forEach(function(_){g=_==="u"?x:Object.values(x).reverse(),["l","r"].forEach(function(S){S==="r"&&(g=g.map(function(d){return Object.values(d).reverse()}));var O=(_==="u"?E.predecessors:E.successors).bind(E),B=(0,R.verticalAlignment)(E,g,p,O),m=(0,R.horizontalCompaction)(E,g,B.root,B.align,S==="r");S==="r"&&Object.keys(m).forEach(function(d){return m[d]=-m[d]}),y[_+S]=m})});var A=(0,R.findSmallestWidthAlignment)(E,y);return A&&(0,R.alignCoordinates)(y,A),(0,R.balance)(y,E.graph().align)},N=function(E){var x,p=(0,X.asNonCompoundGraph)(E);L(p);var y=P(p);(x=Object.keys(y))===null||x===void 0||x.forEach(function(g){p.node(g).x=y[g]})};F.default=N},813614:function(He,F,z){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.feasibleTreeWithLayer=F.feasibleTree=void 0;var G=z(337323),X=z(269209),R=z(627652),L=function(y){var g=new R.Graph({directed:!1}),A=y.nodes()[0],_=y.nodeCount();g.setNode(A,{});for(var S,O;P(g,y)<_;)S=x(g,y),O=g.hasNode(S.v)?(0,G.slack)(y,S):-(0,G.slack)(y,S),p(g,y,O);return g};F.feasibleTree=L;var P=function(y,g){var A=function(_){g.nodeEdges(_).forEach(function(S){var O=S.v,B=_===O?S.w:O;!y.hasNode(B)&&!(0,G.slack)(g,S)&&(y.setNode(B,{}),y.setEdge(_,B,{}),A(B))})};return y.nodes().forEach(A),y.nodeCount()},N=function(y){var g=new R.Graph({directed:!1}),A=y.nodes()[0],_=y.nodes().filter(function(B){return!!y.node(B)}).length;g.setNode(A,{});for(var S,O;E(g,y)<_;)S=x(g,y),O=g.hasNode(S.v)?(0,G.slack)(y,S):-(0,G.slack)(y,S),p(g,y,O);return g};F.feasibleTreeWithLayer=N;var E=function(y,g){var A=function(_){var S;(S=g.nodeEdges(_))===null||S===void 0||S.forEach(function(O){var B=O.v,m=_===B?O.w:B;!y.hasNode(m)&&(g.node(m).layer!==void 0||!(0,G.slack)(g,O))&&(y.setNode(m,{}),y.setEdge(_,m,{}),A(m))})};return y.nodes().forEach(A),y.nodeCount()},x=function(y,g){return(0,X.minBy)(g.edges(),function(A){return y.hasNode(A.v)!==y.hasNode(A.w)?(0,G.slack)(g,A):1/0})},p=function(y,g,A){y.nodes().forEach(function(_){g.node(_).rank||(g.node(_).rank=0),g.node(_).rank+=A})};F.default={feasibleTree:L,feasibleTreeWithLayer:N}},576827:function(He,F,z){"use strict";var G=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(F,"__esModule",{value:!0});var X=z(337323),R=z(813614),L=G(z(432253)),P=function(p){switch(p.graph().ranker){case"network-simplex":x(p);break;case"tight-tree":E(p);break;case"longest-path":N(p);break;default:E(p)}},N=X.longestPath,E=function(p){(0,X.longestPathWithLayer)(p),(0,R.feasibleTreeWithLayer)(p)},x=function(p){(0,L.default)(p)};F.default=P},432253:function(He,F,z){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.exchangeEdges=F.enterEdge=F.leaveEdge=F.initLowLimValues=F.calcCutValue=F.initCutValues=void 0;var G=z(813614),X=z(337323),R=z(269209),L=z(199905),P=L.algorithm.preorder,N=L.algorithm.postorder,E=function(tt){var Y=(0,R.simplify)(tt);(0,X.longestPath)(Y);var V=(0,G.feasibleTree)(Y);(0,F.initLowLimValues)(V),(0,F.initCutValues)(V,Y);for(var $,q;$=(0,F.leaveEdge)(V);)q=(0,F.enterEdge)(V,Y,$),(0,F.exchangeEdges)(V,Y,$,q)},x=function(tt,Y){var V=N(tt,tt.nodes());V=V==null?void 0:V.slice(0,(V==null?void 0:V.length)-1),V==null||V.forEach(function($){p(tt,Y,$)})};F.initCutValues=x;var p=function(tt,Y,V){var $=tt.node(V),q=$.parent;tt.edgeFromArgs(V,q).cutvalue=(0,F.calcCutValue)(tt,Y,V)},y=function(tt,Y,V){var $,q=tt.node(V),rt=q.parent,Q=!0,it=Y.edgeFromArgs(V,rt),ht=0;return it||(Q=!1,it=Y.edgeFromArgs(rt,V)),ht=it.weight,($=Y.nodeEdges(V))===null||$===void 0||$.forEach(function(dt){var Ot=dt.v===V,It=Ot?dt.w:dt.v;if(It!==rt){var Kt=Ot===Q,Ft=Y.edge(dt).weight;if(ht+=Kt?Ft:-Ft,m(tt,V,It)){var Nt=tt.edgeFromArgs(V,It).cutvalue;ht+=Kt?-Nt:Nt}}}),ht};F.calcCutValue=y;var g=function(tt,Y){Y===void 0&&(Y=tt.nodes()[0]),A(tt,{},1,Y)};F.initLowLimValues=g;var A=function(tt,Y,V,$,q){var rt,Q=V,it=V,ht=tt.node($);return Y[$]=!0,(rt=tt.neighbors($))===null||rt===void 0||rt.forEach(function(dt){Y[dt]||(it=A(tt,Y,it,dt,$))}),ht.low=Q,ht.lim=it++,q?ht.parent=q:delete ht.parent,it},_=function(tt){return tt.edges().find(function(Y){return tt.edge(Y).cutvalue<0})};F.leaveEdge=_;var S=function(tt,Y,V){var $=V.v,q=V.w;Y.hasEdge($,q)||($=V.w,q=V.v);var rt=tt.node($),Q=tt.node(q),it=rt,ht=!1;rt.lim>Q.lim&&(it=Q,ht=!0);var dt=Y.edges().filter(function(Ot){return ht===d(tt,tt.node(Ot.v),it)&&ht!==d(tt,tt.node(Ot.w),it)});return(0,R.minBy)(dt,function(Ot){return(0,X.slack)(Y,Ot)})};F.enterEdge=S;var O=function(tt,Y,V,$){var q=V.v,rt=V.w;tt.removeEdge(q,rt),tt.setEdge($.v,$.w,{}),(0,F.initLowLimValues)(tt),(0,F.initCutValues)(tt,Y),B(tt,Y)};F.exchangeEdges=O;var B=function(tt,Y){var V=tt.nodes().find(function(q){var rt;return!(!((rt=Y.node(q))===null||rt===void 0)&&rt.parent)}),$=P(tt,V);$=$==null?void 0:$.slice(1),$==null||$.forEach(function(q){var rt=tt.node(q).parent,Q=Y.edgeFromArgs(q,rt),it=!1;Q||(Q=Y.edgeFromArgs(rt,q),it=!0),Y.node(q).rank=Y.node(rt).rank+(it?Q.minlen:-Q.minlen)})},m=function(tt,Y,V){return tt.hasEdge(Y,V)},d=function(tt,Y,V){return V.low<=Y.lim&&Y.lim<=V.lim};F.default=E},337323:function(He,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.slack=F.longestPathWithLayer=F.longestPath=void 0;var z=function(R){var L,P={},N=function(E){var x,p=R.node(E);if(!p)return 0;if(P[E])return p.rank;P[E]=!0;var y;return(x=R.outEdges(E))===null||x===void 0||x.forEach(function(g){var A=N(g.w),_=R.edge(g).minlen,S=A-_;S&&(y===void 0||S<y)&&(y=S)}),y||(y=0),p.rank=y,y};(L=R.sources())===null||L===void 0||L.forEach(function(E){return N(E)})};F.longestPath=z;var G=function(R){var L,P={},N,E=function(y){var g,A=R.node(y);if(!A)return 0;if(P[y])return A.rank;P[y]=!0;var _;return(g=R.outEdges(y))===null||g===void 0||g.forEach(function(S){var O=E(S.w),B=R.edge(S).minlen,m=O-B;m&&(_===void 0||m<_)&&(_=m)}),_||(_=0),(N===void 0||_<N)&&(N=_),A.rank=_,_};(L=R.sources())===null||L===void 0||L.forEach(function(y){R.node(y)&&E(y)}),N===void 0&&(N=0);var x={},p=function(y,g){var A,_=R.node(y),S=isNaN(_.layer)?g:_.layer;(_.rank===void 0||_.rank<S)&&(_.rank=S),!x[y]&&(x[y]=!0,(A=R.outEdges(y))===null||A===void 0||A.map(function(O){p(O.w,S+R.edge(O).minlen)}))};R.nodes().forEach(function(y){var g=R.node(y);g&&(isNaN(g.layer)?g.rank-=N:p(y,g.layer))})};F.longestPathWithLayer=G;var X=function(R,L){return R.node(L.w).rank-R.node(L.v).rank-R.edge(L).minlen};F.slack=X,F.default={longestPath:z,longestPathWithLayer:G,slack:X}},269209:function(He,F,z){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.minBy=F.notime=F.time=F.partition=F.maxRank=F.addBorderNode=F.removeEmptyRanks=F.normalizeRanks=F.buildLayerMatrix=F.intersectRect=F.predecessorWeights=F.successorWeights=F.zipObject=F.asNonCompoundGraph=F.simplify=F.addDummyNode=void 0;var G=z(449784),X=z(627652),R=function(Y,V){return Number(Y)-Number(V)},L=function(Y,V,$,q){var rt;do rt="".concat(q).concat(Math.random());while(Y.hasNode(rt));return $.dummy=V,Y.setNode(rt,$),rt};F.addDummyNode=L;var P=function(Y){var V=new X.Graph().setGraph(Y.graph());return Y.nodes().forEach(function($){V.setNode($,Y.node($))}),Y.edges().forEach(function($){var q=V.edgeFromArgs($.v,$.w)||{weight:0,minlen:1},rt=Y.edge($);V.setEdge($.v,$.w,{weight:q.weight+rt.weight,minlen:Math.max(q.minlen,rt.minlen)})}),V};F.simplify=P;var N=function(Y){var V=new X.Graph({multigraph:Y.isMultigraph()}).setGraph(Y.graph());return Y.nodes().forEach(function($){var q;!((q=Y.children($))===null||q===void 0)&&q.length||V.setNode($,Y.node($))}),Y.edges().forEach(function($){V.setEdgeObj($,Y.edge($))}),V};F.asNonCompoundGraph=N;var E=function(Y,V){return Y==null?void 0:Y.reduce(function($,q,rt){return $[q]=V[rt],$},{})};F.zipObject=E;var x=function(Y){var V={};return Y.nodes().forEach(function($){var q,rt={};(q=Y.outEdges($))===null||q===void 0||q.forEach(function(Q){var it;rt[Q.w]=(rt[Q.w]||0)+(((it=Y.edge(Q))===null||it===void 0?void 0:it.weight)||0)}),V[$]=rt}),V};F.successorWeights=x;var p=function(Y){var V=Y.nodes(),$=V.map(function(q){var rt,Q={};return(rt=Y.inEdges(q))===null||rt===void 0||rt.forEach(function(it){Q[it.v]=(Q[it.v]||0)+Y.edge(it).weight}),Q});return(0,F.zipObject)(V,$)};F.predecessorWeights=p;var y=function(Y,V){var $=Number(Y.x),q=Number(Y.y),rt=Number(V.x)-$,Q=Number(V.y)-q,it=Number(Y.width)/2,ht=Number(Y.height)/2;if(!rt&&!Q)return{x:0,y:0};var dt,Ot;return Math.abs(Q)*it>Math.abs(rt)*ht?(Q<0&&(ht=-ht),dt=ht*rt/Q,Ot=ht):(rt<0&&(it=-it),dt=it,Ot=it*Q/rt),{x:$+dt,y:q+Ot}};F.intersectRect=y;var g=function(Y){for(var V=[],$=(0,F.maxRank)(Y)+1,q=0;q<$;q++)V.push([]);Y.nodes().forEach(function(rt){var Q=Y.node(rt);if(Q){var it=Q.rank;it!==void 0&&V[it]&&V[it].push(rt)}});for(var q=0;q<$;q++)V[q]=V[q].sort(function(Q,it){var ht,dt;return R((ht=Y.node(Q))===null||ht===void 0?void 0:ht.order,(dt=Y.node(it))===null||dt===void 0?void 0:dt.order)});return V};F.buildLayerMatrix=g;var A=function(Y){var V=Y.nodes().filter(function(q){var rt;return((rt=Y.node(q))===null||rt===void 0?void 0:rt.rank)!==void 0}).map(function(q){return Y.node(q).rank}),$=Math.min.apply(Math,V);Y.nodes().forEach(function(q){var rt=Y.node(q);rt.hasOwnProperty("rank")&&$!==1/0&&(rt.rank-=$)})};F.normalizeRanks=A;var _=function(Y){var V=Y.nodes(),$=V.filter(function(Ot){var It;return((It=Y.node(Ot))===null||It===void 0?void 0:It.rank)!==void 0}).map(function(Ot){return Y.node(Ot).rank}),q=Math.min.apply(Math,$),rt=[];V.forEach(function(Ot){var It,Kt=(((It=Y.node(Ot))===null||It===void 0?void 0:It.rank)||0)-q;rt[Kt]||(rt[Kt]=[]),rt[Kt].push(Ot)});for(var Q=0,it=Y.graph().nodeRankFactor||0,ht=0;ht<rt.length;ht++){var dt=rt[ht];dt===void 0?ht%it!==0&&(Q-=1):Q&&(dt==null||dt.forEach(function(Ot){var It=Y.node(Ot);It&&(It.rank=It.rank||0,It.rank+=Q)}))}};F.removeEmptyRanks=_;var S=function(Y,V,$,q){var rt={width:0,height:0};return(0,G.isNumber)($)&&(0,G.isNumber)(q)&&(rt.rank=$,rt.order=q),(0,F.addDummyNode)(Y,"border",rt,V)};F.addBorderNode=S;var O=function(Y){var V;return Y.nodes().forEach(function($){var q,rt=(q=Y.node($))===null||q===void 0?void 0:q.rank;rt!==void 0&&(V===void 0||rt>V)&&(V=rt)}),V||(V=0),V};F.maxRank=O;var B=function(Y,V){var $={lhs:[],rhs:[]};return Y==null||Y.forEach(function(q){V(q)?$.lhs.push(q):$.rhs.push(q)}),$};F.partition=B;var m=function(Y,V){var $=Date.now();try{return V()}finally{console.log("".concat(Y," time: ").concat(Date.now()-$,"ms"))}};F.time=m;var d=function(Y,V){return V()};F.notime=d;var tt=function(Y,V){return Y.reduce(function($,q){var rt=V($),Q=V(q);return rt>Q?q:$})};F.minBy=tt},177057:function(He,F,z){"use strict";var G=this&&this.__extends||function(){var x=function(p,y){return x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,A){g.__proto__=A}||function(g,A){for(var _ in A)Object.prototype.hasOwnProperty.call(A,_)&&(g[_]=A[_])},x(p,y)};return function(p,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");x(p,y);function g(){this.constructor=p}p.prototype=y===null?Object.create(y):(g.prototype=y.prototype,new g)}}(),X=this&&this.__assign||function(){return X=Object.assign||function(x){for(var p,y=1,g=arguments.length;y<g;y++){p=arguments[y];for(var A in p)Object.prototype.hasOwnProperty.call(p,A)&&(x[A]=p[A])}return x},X.apply(this,arguments)},R=this&&this.__spreadArray||function(x,p,y){if(y||arguments.length===2)for(var g=0,A=p.length,_;g<A;g++)(_||!(g in p))&&(_||(_=Array.prototype.slice.call(p,0,g)),_[g]=p[g]);return x.concat(_||Array.prototype.slice.call(p))};Object.defineProperty(F,"__esModule",{value:!0}),F.DagreCompoundLayout=void 0;var L=z(762329),P=z(631969),N=z(449784),E=function(x){G(p,x);function p(y){var g=x.call(this)||this;return g.rankdir="TB",g.nodesep=50,g.edgesep=5,g.ranksep=50,g.controlPoints=!0,g.anchorPoint=!0,g.nodes=[],g.edges=[],g.combos=[],g.onLayoutEnd=function(){},g.updateCfg(y),g}return p.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,begin:void 0,nodeSize:void 0,nodesep:50,ranksep:50,controlPoints:!0,anchorPoint:!0}},p.prototype.init=function(y){var g=y.hiddenNodes||[],A=y.hiddenEdges||[],_=y.hiddenCombos||[];this.nodes=this.getDataByOrder((y.nodes||[]).concat(g)),this.edges=this.getDataByOrder((y.edges||[]).concat(A)),this.combos=(y.combos||[]).concat(_.map(function(S){return X(X({},S),{collapsed:!0})}))},p.prototype.execute=function(){var y=this,g=y.nodes,A=y.edges;if(g){var _=y.getLayoutConfig(),S=_.graphDef,O=_.graphOption,B=_.graphSettings,m=(0,P.buildGraph)(S,O,B),d=(0,P.flatGraph)(m,!0);return this.updatePosition(d),y.onLayoutEnd&&y.onLayoutEnd(),{nodes:g,edges:A}}},p.prototype.getNodePath=function(y){var g=this,A=g.nodes,_=g.combos,S=A.find(function(B){return B.id===y}),O=function(B,m){m===void 0&&(m=[]);var d=_.find(function(tt){return tt.id===B});return d?(m.unshift(B),d.parentId?O(d.parentId,m):m):m};return S&&S.comboId?O(S.comboId,[y]):[y]},p.prototype.getLayoutConfig=function(){var y,g,A,_=this,S=_.nodes,O=_.edges,B=_.combos,m=_.nodeSize,d=_.rankdir,tt=_.align,Y=_.edgesep,V=_.nodesep,$=_.ranksep,q=_.settings,rt=(B||[]).reduce(function(Pe,er){var Jt=S.filter(function(Se){return Se.comboId===er.id}).map(function(Se){return Se.id}),ae=(B||[]).filter(function(Se){return Se.parentId===er.id}).map(function(Se){return Se.id});return(Jt.length||ae.length)&&(Pe[er.id]=R(R([],Jt,!0),ae,!0)),Pe},{}),Q;m?(0,N.isArray)(m)?Q=function(){return m}:Q=function(){return[m,m]}:Q=function(Pe){return Pe&&Pe.size?(0,N.isArray)(Pe.size)?Pe.size:(0,N.isObject)(Pe.size)?[Pe.size.width||40,Pe.size.height||40]:[Pe.size,Pe.size]:[40,40]};var it=function(Pe){return Pe&&Pe.size?(0,N.isArray)(Pe.size)?Pe.size:[Pe.size,Pe.size]:[80,40]},ht=it(B==null?void 0:B[0]),dt=ht[0],Ot=ht[1],It=(g=(y=_.graphSettings)===null||y===void 0?void 0:y.subScene)===null||g===void 0?void 0:g.meta,Kt=((A=B.find(function(Pe){return!Pe.collapsed}))===null||A===void 0?void 0:A.padding)||[20,20,20,20],Ft=Kt[0],Nt=Kt[1],st=Kt[2],yt=Kt[3],kt={compound:rt,nodes:R([],(S||[]).map(function(Pe){var er=Q(Pe),Jt=er[0],ae=er[1];return X(X({},Pe),{width:Jt,height:ae})}),!0),edges:R([],(O||[]).map(function(Pe){return X(X({},Pe),{v:Pe.source,w:Pe.target})}),!0)},ee={expanded:(B||[]).filter(function(Pe){return!Pe.collapsed}).map(function(Pe){return Pe.id})},$t={graph:{meta:{align:tt,rankDir:d,nodeSep:V,edgeSep:Y,rankSep:$}},subScene:{meta:{paddingTop:Ft||(It==null?void 0:It.paddingTop)||20,paddingRight:Nt||(It==null?void 0:It.paddingRight)||20,paddingBottom:st||(It==null?void 0:It.paddingBottom)||20,paddingLeft:yt||(It==null?void 0:It.paddingLeft)||20,labelHeight:0}},nodeSize:{meta:{width:dt,height:Ot}}},ge=(0,P.mergeConfig)(q,X({},(0,P.mergeConfig)($t,P.LAYOUT_CONFIG)));return _.graphSettings=ge,{graphDef:kt,graphOption:ee,graphSettings:ge}},p.prototype.updatePosition=function(y){var g=y.nodes,A=y.edges;this.updateNodePosition(g,A),this.updateEdgePosition(g,A)},p.prototype.getBegin=function(y,g){var A=this,_=A.begin,S=[0,0];if(_){var O=1/0,B=1/0;y.forEach(function(m){O>m.x&&(O=m.x),B>m.y&&(B=m.y)}),g.forEach(function(m){m.points.forEach(function(d){O>d.x&&(O=d.x),B>d.y&&(B=d.y)})}),S[0]=_[0]-O,S[1]=_[1]-B}return S},p.prototype.updateNodePosition=function(y,g){var A=this,_=A.combos,S=A.nodes,O=A.edges,B=A.anchorPoint,m=A.graphSettings,d=this.getBegin(y,g);y.forEach(function(tt){var Y,V=tt.x,$=tt.y,q=tt.id,rt=tt.type,Q=tt.coreBox;if(rt===P.HierarchyNodeType.META&&q!==P.ROOT_NAME){var it=_.findIndex(function(Kt){return Kt.id===q}),ht=(Y=m==null?void 0:m.subScene)===null||Y===void 0?void 0:Y.meta;_[it].offsetX=V+d[0],_[it].offsetY=$+d[1],_[it].fixSize=[Q.width,Q.height],_[it].fixCollapseSize=[Q.width,Q.height],tt.expanded?_[it].padding=[ht==null?void 0:ht.paddingTop,ht==null?void 0:ht.paddingRight,ht==null?void 0:ht.paddingBottom,ht==null?void 0:ht.paddingLeft]:_[it].padding=[0,0,0,0]}else if(rt===P.HierarchyNodeType.OP){var it=S.findIndex(function(Ft){return Ft.id===q});if(S[it].x=V+d[0],S[it].y=$+d[1],B){var dt=[],Ot=g.filter(function(Ft){return Ft.v===q}),It=g.filter(function(Ft){return Ft.w===q});Ot.length>0&&Ot.forEach(function(Ft){var Nt=Ft.points[0],st=(Nt.x-V)/tt.width+.5,yt=(Nt.y-$)/tt.height+.5;dt.push([st,yt]),Ft.baseEdgeList.forEach(function(kt){var ee=O.find(function($t){return $t.source===kt.v&&$t.target===kt.w});ee&&(ee.sourceAnchor=dt.length-1)})}),It.length>0&&It.forEach(function(Ft){var Nt=Ft.points[Ft.points.length-1],st=(Nt.x-V)/tt.width+.5,yt=(Nt.y-$)/tt.height+.5;dt.push([st,yt]),Ft.baseEdgeList.forEach(function(kt){var ee=O.find(function($t){return $t.source===kt.v&&$t.target===kt.w});ee&&(ee.targetAnchor=dt.length-1)})}),S[it].anchorPoints=dt.length>0?dt:S[it].anchorPoints||[]}}})},p.prototype.updateEdgePosition=function(y,g){var A=this,_=A.combos,S=A.edges,O=A.controlPoints,B=this.getBegin(y,g);O&&(_.forEach(function(m){m.inEdges=[],m.outEdges=[]}),S.forEach(function(m){var d,tt,Y,V,$=y.find(function(Kt){return Kt.id===m.source}),q=y.find(function(Kt){return Kt.id===m.target}),rt=[],Q=[];if($&&q)Q=(0,P.getEdges)($==null?void 0:$.id,q==null?void 0:q.id,y);else if(!$||!q){var it=A.getNodePath(m.source),ht=A.getNodePath(m.target),dt=it.reverse().slice($?0:1).find(function(Kt){return y.find(function(Ft){return Ft.id===Kt})}),Ot=ht.reverse().slice(q?0:1).find(function(Kt){return y.find(function(Ft){return Ft.id===Kt})});$=y.find(function(Kt){return Kt.id===dt}),q=y.find(function(Kt){return Kt.id===Ot}),Q=(0,P.getEdges)($==null?void 0:$.id,q==null?void 0:q.id,y,{v:m.source,w:m.target})}if(rt=Q.reduce(function(Kt,Ft){return R(R([],Kt,!0),Ft.points.map(function(Nt){return X(X({},Nt),{x:Nt.x+B[0],y:Nt.y+B[1]})}),!0)},[]),rt=rt.slice(1,-1),m.controlPoints=rt,(q==null?void 0:q.type)===P.NodeType.META){var It=_.findIndex(function(Kt){return Kt.id===(q==null?void 0:q.id)});if(!_[It]||!((d=_[It].inEdges)===null||d===void 0)&&d.some(function(Kt){return Kt.source===$.id&&Kt.target===q.id}))return;(tt=_[It].inEdges)===null||tt===void 0||tt.push({source:$.id,target:q.id,controlPoints:rt})}if(($==null?void 0:$.type)===P.NodeType.META){var It=_.findIndex(function(Ft){return Ft.id===($==null?void 0:$.id)});if(!_[It]||!((Y=_[It].outEdges)===null||Y===void 0)&&Y.some(function(Ft){return Ft.source===$.id&&Ft.target===q.id}))return;(V=_[It].outEdges)===null||V===void 0||V.push({source:$.id,target:q.id,controlPoints:rt})}}))},p.prototype.getType=function(){return"dagreCompound"},p.prototype.getDataByOrder=function(y){return y.every(function(g){return g.layoutOrder!==void 0})||y.forEach(function(g,A){g.layoutOrder=A}),y.sort(function(g,A){return g.layoutOrder-A.layoutOrder})},p}(L.Base);F.DagreCompoundLayout=E},934015:function(He,F,z){"use strict";var G=this&&this.__assign||function(){return G=Object.assign||function(g){for(var A,_=1,S=arguments.length;_<S;_++){A=arguments[_];for(var O in A)Object.prototype.hasOwnProperty.call(A,O)&&(g[O]=A[O])}return g},G.apply(this,arguments)},X=this&&this.__createBinding||(Object.create?function(g,A,_,S){S===void 0&&(S=_);var O=Object.getOwnPropertyDescriptor(A,_);(!O||("get"in O?!A.__esModule:O.writable||O.configurable))&&(O={enumerable:!0,get:function(){return A[_]}}),Object.defineProperty(g,S,O)}:function(g,A,_,S){S===void 0&&(S=_),g[S]=A[_]}),R=this&&this.__setModuleDefault||(Object.create?function(g,A){Object.defineProperty(g,"default",{enumerable:!0,value:A})}:function(g,A){g.default=A}),L=this&&this.__importStar||function(g){if(g&&g.__esModule)return g;var A={};if(g!=null)for(var _ in g)_!=="default"&&Object.prototype.hasOwnProperty.call(g,_)&&X(A,g,_);return R(A,g),A},P=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(F,"__esModule",{value:!0});var N=L(z(147460)),E=P(z(788221)),x=P(z(87064)),p=z(960844);function y(g,A){var _=g.nodes,S=g.edges,O=A.width,B=A.height;if(!(_!=null&&_.length))return Promise.resolve();var m=[];_.forEach(function(Q){var it=S.filter(function(dt){return dt.source===Q.id||dt.target===Q.id});if(it.length>1){var ht=G({},Q);delete ht.size,m.push(ht)}});var d=[];S.forEach(function(Q){var it=m.find(function(dt){return dt.id===Q.source}),ht=m.find(function(dt){return dt.id===Q.target});it&&ht&&d.push(Q)});var tt=new p.DagreLayout({type:"dagre",ranksep:A.nodeMinGap,nodesep:A.nodeMinGap}),Y=tt.layout({nodes:m,edges:d}).nodes;_.forEach(function(Q){var it=(Y||[]).find(function(ht){return ht.id===Q.id});Q.x=(it==null?void 0:it.x)||O/2,Q.y=(it==null?void 0:it.y)||B/2});var V=JSON.parse(JSON.stringify(_)),$=JSON.parse(JSON.stringify(S)),q=N.forceSimulation().nodes(V).force("link",N.forceLink($).id(function(Q){return Q.id}).distance(function(Q){var it=d.find(function(ht){return ht.source===Q.source&&ht.target===Q.target});return it?30:20})).force("charge",N.forceManyBody()).force("center",N.forceCenter(O/2,B/2)).force("x",N.forceX(O/2)).force("y",N.forceY(B/2)).alpha(.3).alphaDecay(.08).alphaMin(.001),rt=new Promise(function(Q){q.on("end",function(){_.forEach(function(Ft){var Nt=V.find(function(st){return st.id===Ft.id});Nt&&(Ft.x=Nt.x,Ft.y=Nt.y)});var it=Math.min.apply(Math,_.map(function(Ft){return Ft.x})),ht=Math.max.apply(Math,_.map(function(Ft){return Ft.x})),dt=Math.min.apply(Math,_.map(function(Ft){return Ft.y})),Ot=Math.max.apply(Math,_.map(function(Ft){return Ft.y})),It=O/(ht-it),Kt=B/(Ot-dt);_.forEach(function(Ft){Ft.x!==void 0&&It<1&&(Ft.x=(Ft.x-it)*It),Ft.y!==void 0&&Kt<1&&(Ft.y=(Ft.y-dt)*Kt)}),_.forEach(function(Ft){Ft.sizeTemp=Ft.size,Ft.size=[10,10]}),(0,x.default)(_,S),_.forEach(function(Ft){Ft.size=Ft.sizeTemp||[],delete Ft.sizeTemp}),(0,E.default)({nodes:_,edges:S},A),Q()})});return rt}F.default=y},788221:function(He,F,z){"use strict";var G=this&&this.__importDefault||function(L){return L&&L.__esModule?L:{default:L}};Object.defineProperty(F,"__esModule",{value:!0});var X=G(z(28611));function R(L,P){if(!L.nodes||L.nodes.length===0)return L;var N=P.width,E=P.height,x=P.nodeMinGap,p=1e4,y=1e4;L.nodes.forEach(function($){var q=$.size[0]||50,rt=$.size[1]||50;p=Math.min(q,p),y=Math.min(rt,y)});var g=new X.default;g.init(N,E,{CELL_H:y,CELL_W:p}),L.nodes.forEach(function($){var q=g.occupyNearest($);q&&(q.node={id:$.id,size:$.size},$.x=q.x,$.y=q.y,$.dx=q.dx,$.dy=q.dy)});for(var A=0;A<L.nodes.length;A++){var _=L.nodes[A],S=g.findGridByNodeId(_.id);if(!S)throw new Error("can not find node cell");var O=S.column,B=S.row;if(_.size[0]+x>p){for(var m=Math.ceil((_.size[0]+x)/p)-1,d=m,tt=0;tt<m;tt++){var Y=g.additionColumn.indexOf(O+tt+1)>-1;if(Y&&!g.cells[O+tt+1][B].node)d--;else break}g.insertColumn(O,d)}if(_.size[1]+x>y){for(var m=Math.ceil((_.size[1]+x)/y)-1,d=m,tt=0;tt<m;tt++){var Y=g.additionRow.indexOf(B+tt+1)>-1;if(Y&&!g.cells[O][B+tt+1].node)d--;else break}g.insertRow(B,d)}}for(var A=0;A<g.columnNum;A++)for(var V=function(q){var rt=g.cells[A][q];if(rt.node){var Q=L.nodes.find(function(it){var ht;return it.id===((ht=rt==null?void 0:rt.node)===null||ht===void 0?void 0:ht.id)});Q&&(Q.x=rt.x+Q.size[0]/2,Q.y=rt.y+Q.size[1]/2)}},tt=0;tt<g.rowNum;tt++)V(tt)}F.default=R},28611:function(He,F){"use strict";var z=this&&this.__assign||function(){return z=Object.assign||function(X){for(var R,L=1,P=arguments.length;L<P;L++){R=arguments[L];for(var N in R)Object.prototype.hasOwnProperty.call(R,N)&&(X[N]=R[N])}return X},z.apply(this,arguments)};Object.defineProperty(F,"__esModule",{value:!0});var G=function(){function X(){this.cells=[],this.columnNum=0,this.rowNum=0,this.additionColumn=[],this.additionRow=[]}return X.prototype.init=function(R,L,P){this.cells=[],this.CELL_W=P.CELL_W||X.DEFAULT_CELL_W,this.CELL_H=P.CELL_H||X.DEFAULT_CELL_H,this.columnNum=Math.ceil(R/this.CELL_W),this.rowNum=Math.ceil(L/this.CELL_H),X.MIN_DIST=Math.pow(R,2)+Math.pow(L,2);for(var N=0;N<this.columnNum;N++){for(var E=[],x=0;x<this.rowNum;x++){var p={dx:N,dy:x,x:N*this.CELL_W,y:x*this.CELL_H,occupied:!1};E.push(p)}this.cells.push(E)}},X.prototype.findGridByNodeId=function(R){for(var L,P,N=0;N<this.columnNum;N++)for(var E=0;E<this.rowNum;E++)if(this.cells[N][E].node&&((P=(L=this.cells[N][E])===null||L===void 0?void 0:L.node)===null||P===void 0?void 0:P.id)===R)return{column:N,row:E};return null},X.prototype.sqdist=function(R,L){return Math.pow(R.x-L.x,2)+Math.pow(R.y-L.y,2)},X.prototype.occupyNearest=function(R){for(var L=X.MIN_DIST,P,N=null,E=0;E<this.columnNum;E++)for(var x=0;x<this.rowNum;x++)!this.cells[E][x].occupied&&(P=this.sqdist(R,this.cells[E][x]))<L&&(L=P,N=this.cells[E][x]);return N&&(N.occupied=!0),N},X.prototype.insertColumn=function(R,L){if(!(L<=0)){for(var P=0;P<L;P++){this.cells[P+this.columnNum]=[];for(var N=0;N<this.rowNum;N++)this.cells[P+this.columnNum][N]={dx:P,dy:N,x:P*this.CELL_W,y:N*this.CELL_H,occupied:!1,node:null}}for(var P=this.columnNum-1;P>R;P--)for(var N=0;N<this.rowNum;N++)this.cells[P+L][N]=z(z({},this.cells[P][N]),{x:(P+L)*this.CELL_W,y:N*this.CELL_H}),this.cells[P][N]={x:P*this.CELL_W,y:N*this.CELL_H,occupied:!0,node:null};for(var N=0;N<this.additionColumn.length;N++)this.additionColumn[N]>=R&&(this.additionColumn[N]+=L);for(var P=0;P<L;P++)this.additionColumn.push(R+P+1);this.columnNum+=L}},X.prototype.insertRow=function(R,L){if(!(L<=0)){for(var P=0;P<L;P++)for(var N=0;N<this.columnNum;N++)this.cells[N][P+this.rowNum]={dx:N,dy:P,x:N*this.CELL_W,y:P*this.CELL_H,occupied:!1,node:null};for(var N=0;N<this.columnNum;N++)for(var P=this.rowNum-1;P>R;P--)this.cells[N][P+L]=z(z({},this.cells[N][P]),{dx:N,dy:P+L,x:N*this.CELL_W,y:(P+L)*this.CELL_H}),this.cells[N][P]={dx:N,dy:P,x:N*this.CELL_W,y:P*this.CELL_H,occupied:!1,node:null};for(var P=0;P<this.additionRow.length;P++)this.additionRow[P]>=R&&(this.additionRow[P]+=L);for(var N=0;N<L;N++)this.additionRow.push(R+N+1);this.rowNum+=L}},X.prototype.getNodes=function(){for(var R=[],L=0;L<this.columnNum;L++)for(var P=0;P<this.rowNum;P++)this.cells[L][P].node&&R.push(this.cells[L][P]);return R},X.MIN_DIST=50,X.DEFAULT_CELL_W=80,X.DEFAULT_CELL_H=80,X}();F.default=G},290441:function(He,F,z){"use strict";var G=this&&this.__extends||function(){var N=function(E,x){return N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,y){p.__proto__=y}||function(p,y){for(var g in y)Object.prototype.hasOwnProperty.call(y,g)&&(p[g]=y[g])},N(E,x)};return function(E,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");N(E,x);function p(){this.constructor=E}E.prototype=x===null?Object.create(x):(p.prototype=x.prototype,new p)}}(),X=this&&this.__importDefault||function(N){return N&&N.__esModule?N:{default:N}};Object.defineProperty(F,"__esModule",{value:!0}),F.ERLayout=void 0;var R=z(762329),L=X(z(934015)),P=function(N){G(E,N);function E(x){var p=N.call(this)||this;return p.width=300,p.height=300,p.nodeMinGap=50,p.onLayoutEnd=function(){},x&&p.updateCfg(x),p}return E.prototype.getDefaultCfg=function(){return{width:300,height:300,nodeMinGap:50}},E.prototype.execute=function(){var x=this,p=x.nodes,y=x.edges;return p==null||p.forEach(function(g){g.size||(g.size=[50,50])}),(0,L.default)({nodes:p,edges:y},{width:this.width,height:this.height,nodeMinGap:this.nodeMinGap}).then(function(){x.onLayoutEnd&&x.onLayoutEnd()})},E.prototype.getType=function(){return"er"},E}(R.Base);F.ERLayout=P},87064:function(He,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0});var z=1200,G=800,X=1e7,R=10,L=3.141592653589793,P=1.5707963267948966,N=L*.375,E=L*.625,x=new Map,p=10,y=10,g=.8,A=.1,_=.5;function S(V,$,q){var rt=V.x-V.size[0]/2,Q=V.y-V.size[1]/2,it=V.x+V.size[0]/2,ht=V.y+V.size[1]/2,dt=$.x-$.size[0]/2,Ot=$.y-$.size[1]/2,It=$.x+$.size[0]/2,Kt=$.y+$.size[1]/2,Ft=V.x,Nt=V.y,st=$.x,yt=$.y,kt=st-Ft,ee=Math.atan2(kt,yt-Nt),$t=0,ge=0,Pe=0,er=0;ee>P?(ge=Q-Kt,$t=dt-it,Pe=parseFloat(ge?(ge/Math.cos(ee)).toFixed(2):$t.toFixed(2)),er=parseFloat($t?($t/Math.sin(ee)).toFixed(2):ge.toFixed(2))):0<ee&&ee<=P?(ge=Ot-ht,$t=dt-it,ge>$t?Pe=er=parseFloat(ge?(ge/Math.cos(ee)).toFixed(2):$t.toFixed(2)):Pe=er=parseFloat($t?($t/Math.sin(ee)).toFixed(2):ge.toFixed(2))):ee<-P?(ge=Q-Kt,$t=-(It-rt),ge>$t?Pe=er=parseFloat(ge?(ge/Math.cos(ee)).toFixed(2):$t.toFixed(2)):Pe=er=parseFloat($t?($t/Math.sin(ee)).toFixed(2):ge.toFixed(2))):(ge=Ot-ht,Math.abs(kt)>(it-rt)/2?$t=rt-It:$t=kt,ge>$t?Pe=er=parseFloat(ge?(ge/Math.cos(ee)).toFixed(2):$t.toFixed(2)):Pe=er=parseFloat($t&&ee!==0?($t/Math.sin(ee)).toFixed(2):ge.toFixed(2)));var Jt=parseFloat(ee.toFixed(2)),ae=q;return q&&(ae=N<Jt&&Jt<E),{distance:Math.abs(Pe<er?Pe:er),isHoriz:ae}}function O(V,$){var q=x.get(V.id)||[],rt=q.find(function(re){return re.source===$.id||re.target===$.id}),Q=V.size[0]*V.size[1],it=$.size[0]*$.size[1],ht=Q>it?$:V,dt=Q>it?V:$,Ot=ht.x-ht.size[0]/2,It=ht.y-ht.size[1]/2,Kt=ht.x+ht.size[0]/2,Ft=ht.y+ht.size[1]/2,Nt=dt.x-dt.size[0]/2,st=dt.y-dt.size[1]/2,yt=dt.x+dt.size[0]/2,kt=dt.y+dt.size[1]/2,ee=ht.x,$t=ht.y,ge=dt.x,Pe=dt.y,er=Kt>=Nt&&yt>=Ot&&Ft>=st&&kt>=It,Jt=0,ae=0;if(er){ae=Math.sqrt(Math.pow(ge-ee,2)+Math.pow(Pe-$t,2));var Se=Ot>Nt?Ot:Nt,xe=It>st?It:st,we=Kt<yt?Kt:yt,zt=Ft<kt?Ft:kt,Wt=we-Se,Ie=zt-xe,Yt=Wt*Ie;ae===0&&(ae=1e-7),Jt=R*1/ae*100+Yt,Jt*=X}else{var ie=!1,Oe=S(ht,dt,ie);ae=Oe.distance,ie=Oe.isHoriz,ae<=R?ae!==0?rt?Jt+=R+X*1/ae:Jt+=R+X*R/ae:Jt+=X:(Jt+=ae,rt&&(Jt+=ae*ae))}return Jt}function B(V){for(var $=0,q=0;q<V.length;q++){var rt=V[q];(rt.x<0||rt.y<0||rt.x>z||rt.y>G)&&($+=1e12);for(var Q=q+1;Q<V.length;Q++)$+=O(rt,V[Q])}return $}function m(V,$,q,rt){var Q=new Map;q.forEach(function(ee,$t){Q.set(ee.id,ee)});var it=rt.filter(function(ee){return ee.source===V.id||ee.target===V.id})||[],ht=[];it.forEach(function(ee){var $t=ee.source===V.id?ee.target:ee.source,ge=Q.get($t);ge&&ht.push(ge)});for(var dt=!0,Ot=0;Ot<ht.length;Ot++){var It=ht[Ot],Kt=Math.atan((V.y-It.y)/(It.x-V.y))*180,Ft=Math.atan(($.y-It.y)/(It.x-$.y))*180,Nt=Kt<30||Kt>150,st=Ft<30||Ft>150,yt=Kt>70&&Kt<110,kt=Ft>70&&Ft<110;if(Nt&&!st||Kt*Ft<0){dt=!1;break}else if(yt&&!kt||Kt*Ft<0){dt=!1;break}else if((It.x-V.x)*(It.x-$.x)<0){dt=!1;break}else if((It.y-V.y)*(It.y-$.y)<0){dt=!1;break}}return dt}function d(V,$){for(var q=!1,rt=1,Q=p*rt,it=y*rt,ht=[Q,-Q,0,0],dt=[0,0,it,-it],Ot=0;Ot<V.length;++Ot)for(var It=V[Ot],Kt=tt(It,V),Ft=0;Ft<ht.length;Ft++){var Nt=m(It,{x:It.x+ht[Ft],y:It.y+dt[Ft]},V,$);if(Nt){It.x+=ht[Ft],It.y+=dt[Ft];var st=tt(It,V),yt=Math.random();st<Kt||yt<g&&yt>A?(Kt=st,q=!0):(It.x-=ht[Ft],It.y-=dt[Ft])}}return g>A&&(g*=_),q?B(V):0}function tt(V,$){var q=0;(V.x<0||V.y<0||V.x+V.size[0]+20>z||V.y+V.size[1]+20>G)&&(q+=1e12);for(var rt=0;rt<$.length;++rt)V.id!==$[rt].id&&(q+=O(V,$[rt]));return q}function Y(V,$){if(V.length===0)return{nodes:V,edges:$};V.forEach(function(It){var Kt=$.filter(function(Ft){return Ft.source===It.id||Ft.target===It.id});x.set(It,Kt)}),V.sort(function(It,Kt){var Ft,Nt;return((Ft=x.get(It.id))===null||Ft===void 0?void 0:Ft.length)-((Nt=x.get(Kt.id))===null||Nt===void 0?void 0:Nt.length)});for(var q=B(V),rt=20,Q=1,it=0,ht=50,dt=0;rt>0&&(dt++,!(dt>=ht));){var Ot=d(V,$);Ot!==0&&(it=Ot),Q=it-q,q=it,Q===0?--rt:rt=20}return V.forEach(function(It){It.x=It.x-It.size[0]/2,It.y=It.y-It.size[1]/2}),{nodes:V,edges:$}}F.default=Y},589806:function(He,F,z){"use strict";var G=this&&this.__createBinding||(Object.create?function(E,x,p,y){y===void 0&&(y=p);var g=Object.getOwnPropertyDescriptor(x,p);(!g||("get"in g?!x.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return x[p]}}),Object.defineProperty(E,y,g)}:function(E,x,p,y){y===void 0&&(y=p),E[y]=x[p]}),X=this&&this.__setModuleDefault||(Object.create?function(E,x){Object.defineProperty(E,"default",{enumerable:!0,value:x})}:function(E,x){E.default=x}),R=this&&this.__importStar||function(E){if(E&&E.__esModule)return E;var x={};if(E!=null)for(var p in E)p!=="default"&&Object.prototype.hasOwnProperty.call(E,p)&&G(x,E,p);return X(x,E),x};Object.defineProperty(F,"__esModule",{value:!0});var L=R(z(147460)),P=z(449784);function N(){function E(zt){return function(){return zt}}var x=function(zt){return zt.cluster},p=E(1),y=E(-1),g=E(100),A=E(.1),_=[0,0],S=[],O={},B=[],m=100,d=100,tt={none:{x:0,y:0}},Y=[],V,$="force",q=!0,rt=.1;function Q(zt){if(!q)return Q;V.tick(),Kt();for(var Wt=0,Ie=S.length,Yt=void 0,ie=zt*rt;Wt<Ie;++Wt)Yt=S[Wt],Yt.vx+=(tt[x(Yt)].x-Yt.x)*ie,Yt.vy+=(tt[x(Yt)].y-Yt.y)*ie}function it(){S&&ht()}function ht(){if(!(!S||!S.length)){if(x(S[0])===void 0)throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");var zt=dt();V=L.forceSimulation(zt.nodes).force("x",L.forceX(m).strength(.1)).force("y",L.forceY(d).strength(.1)).force("collide",L.forceCollide(function(Wt){return Wt.r}).iterations(4)).force("charge",L.forceManyBody().strength(y)).force("links",L.forceLink(zt.nodes.length?zt.links:[]).distance(g).strength(A)),Y=V.nodes(),Kt()}}function dt(){var zt=[],Wt=[],Ie={},Yt=[],ie={},Oe=[];return ie=Ot(S),Oe=It(B),Yt=Object.keys(ie),Yt.forEach(function(re,_e){var Ge=ie[re];zt.push({id:re,size:Ge.count,r:Math.sqrt(Ge.sumforceNodeSize/Math.PI)}),Ie[re]=_e}),Oe.forEach(function(re){var _e=(0,P.getEdgeTerminal)(re,"source"),Ge=(0,P.getEdgeTerminal)(re,"target"),Ct=Ie[_e],Nr=Ie[Ge];Ct!==void 0&&Nr!==void 0&&Wt.push({source:Ct,target:Nr,count:re.count})}),{nodes:zt,links:Wt}}function Ot(zt){var Wt={};return zt.forEach(function(Ie){var Yt=x(Ie);Wt[Yt]||(Wt[Yt]={count:0,sumforceNodeSize:0})}),zt.forEach(function(Ie){var Yt=x(Ie),ie=p(Ie),Oe=Wt[Yt];Oe.count=Oe.count+1,Oe.sumforceNodeSize=Oe.sumforceNodeSize+Math.PI*(ie*ie)*1.3,Wt[Yt]=Oe}),Wt}function It(zt){var Wt={},Ie=[];zt.forEach(function(ie){var Oe=Ft(ie),re=0;Wt[Oe]!==void 0&&(re=Wt[Oe]),re+=1,Wt[Oe]=re});var Yt=Object.entries(Wt);return Yt.forEach(function(ie){var Oe=ie[0],re=ie[1],_e=Oe.split("~")[0],Ge=Oe.split("~")[1];_e!==void 0&&Ge!==void 0&&Ie.push({source:_e,target:Ge,count:re})}),Ie}function Kt(){return tt={none:{x:0,y:0}},Y.forEach(function(zt){tt[zt.id]={x:zt.x-_[0],y:zt.y-_[1]}}),tt}function Ft(zt){var Wt=(0,P.getEdgeTerminal)(zt,"source"),Ie=(0,P.getEdgeTerminal)(zt,"target"),Yt=x(O[Wt]),ie=x(O[Ie]);return Yt<=ie?"".concat(Yt,"~").concat(ie):"".concat(ie,"~").concat(Yt)}function Nt(zt){O={},zt.forEach(function(Wt){O[Wt.id]=Wt})}function st(zt){return arguments.length?($=zt,it(),Q):$}function yt(zt){return arguments.length?typeof zt=="string"?(x=function(Wt){return Wt[zt]},Q):(x=zt,Q):x}function kt(zt){return arguments.length?(q=zt,Q):q}function ee(zt){return arguments.length?(rt=zt,Q):rt}function $t(zt){return arguments.length?(m=zt,Q):m}function ge(zt){return arguments.length?(d=zt,Q):d}function Pe(zt){return arguments.length?(Nt(zt||[]),S=zt||[],Q):S}function er(zt){return arguments.length?(B=zt||[],it(),Q):B}function Jt(zt){return arguments.length?(typeof zt=="function"?p=zt:p=E(+zt),it(),Q):p}function ae(zt){return arguments.length?(typeof zt=="function"?y=zt:y=E(+zt),it(),Q):y}function Se(zt){return arguments.length?(typeof zt=="function"?g=zt:g=E(+zt),it(),Q):g}function xe(zt){return arguments.length?(typeof zt=="function"?A=zt:A=E(+zt),it(),Q):A}function we(zt){return arguments.length?(_=zt,Q):_}return Q.initialize=function(zt){S=zt,it()},Q.template=st,Q.groupBy=yt,Q.enableGrouping=kt,Q.strength=ee,Q.centerX=$t,Q.centerY=ge,Q.nodes=Pe,Q.links=er,Q.forceNodeSize=Jt,Q.nodeSize=Q.forceNodeSize,Q.forceCharge=ae,Q.forceLinkDistance=Se,Q.forceLinkStrength=xe,Q.offset=we,Q.getFocis=Kt,Q}F.default=N},508810:function(He,F,z){"use strict";var G=this&&this.__extends||function(){var S=function(O,B){return S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,d){m.__proto__=d}||function(m,d){for(var tt in d)Object.prototype.hasOwnProperty.call(d,tt)&&(m[tt]=d[tt])},S(O,B)};return function(O,B){if(typeof B!="function"&&B!==null)throw new TypeError("Class extends value "+String(B)+" is not a constructor or null");S(O,B);function m(){this.constructor=O}O.prototype=B===null?Object.create(B):(m.prototype=B.prototype,new m)}}(),X=this&&this.__createBinding||(Object.create?function(S,O,B,m){m===void 0&&(m=B);var d=Object.getOwnPropertyDescriptor(O,B);(!d||("get"in d?!O.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return O[B]}}),Object.defineProperty(S,m,d)}:function(S,O,B,m){m===void 0&&(m=B),S[m]=O[B]}),R=this&&this.__setModuleDefault||(Object.create?function(S,O){Object.defineProperty(S,"default",{enumerable:!0,value:O})}:function(S,O){S.default=O}),L=this&&this.__importStar||function(S){if(S&&S.__esModule)return S;var O={};if(S!=null)for(var B in S)B!=="default"&&Object.prototype.hasOwnProperty.call(S,B)&&X(O,S,B);return R(O,S),O},P=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(F,"__esModule",{value:!0}),F.ForceLayout=void 0;var N=L(z(147460)),E=P(z(589806)),x=z(449784),p=z(762329),y=z(416470),g=function(S){G(O,S);function O(B){var m=S.call(this)||this;return m.center=[0,0],m.nodeStrength=null,m.edgeStrength=null,m.preventOverlap=!1,m.clusterNodeStrength=null,m.clusterEdgeStrength=null,m.clusterEdgeDistance=null,m.clusterNodeSize=null,m.clusterFociStrength=null,m.linkDistance=50,m.alphaDecay=.028,m.alphaMin=.001,m.alpha=.3,m.collideStrength=1,m.workerEnabled=!1,m.tick=function(){},m.onLayoutEnd=function(){},m.ticking=void 0,B&&m.updateCfg(B),m}return O.prototype.getDefaultCfg=function(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick:function(){},onLayoutEnd:function(){},workerEnabled:!1}},O.prototype.init=function(B){var m=this;m.nodes=B.nodes||[];var d=B.edges||[];m.edges=d.map(function(tt){var Y={},V=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(tt).forEach(function($){V.indexOf($)>-1||(Y[$]=tt[$])}),Y}),m.ticking=!1},O.prototype.execute=function(B){var m=this,d=m.nodes,tt=m.edges;if(!m.ticking){var Y=m.forceSimulation,V=m.alphaMin,$=m.alphaDecay,q=m.alpha;if(Y){if(B){if(m.clustering&&m.clusterForce&&(m.clusterForce.nodes(d),m.clusterForce.links(tt)),Y.nodes(d),tt&&m.edgeForce)m.edgeForce.links(tt);else if(tt&&!m.edgeForce){var it=N.forceLink().id(function(It){return It.id}).links(tt);m.edgeStrength&&it.strength(m.edgeStrength),m.linkDistance&&it.distance(m.linkDistance),m.edgeForce=it,Y.force("link",it)}}m.preventOverlap&&m.overlapProcess(Y),Y.alpha(q).restart(),this.ticking=!0}else try{var rt=N.forceManyBody();if(m.nodeStrength&&rt.strength(m.nodeStrength),Y=N.forceSimulation().nodes(d),m.clustering){var Q=(0,E.default)();Q.centerX(m.center[0]).centerY(m.center[1]).template("force").strength(m.clusterFociStrength),tt&&Q.links(tt),d&&Q.nodes(d),Q.forceLinkDistance(m.clusterEdgeDistance).forceLinkStrength(m.clusterEdgeStrength).forceCharge(m.clusterNodeStrength).forceNodeSize(m.clusterNodeSize),m.clusterForce=Q,Y.force("group",Q)}if(Y.force("center",N.forceCenter(m.center[0],m.center[1])).force("charge",rt).alpha(q).alphaDecay($).alphaMin(V),m.preventOverlap&&m.overlapProcess(Y),tt){var it=N.forceLink().id(function(Ot){return Ot.id}).links(tt);m.edgeStrength&&it.strength(m.edgeStrength),m.linkDistance&&it.distance(m.linkDistance),m.edgeForce=it,Y.force("link",it)}if(m.workerEnabled&&!_()&&(m.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),!m.workerEnabled)Y.on("tick",function(){m.tick()}).on("end",function(){m.ticking=!1,m.onLayoutEnd&&m.onLayoutEnd()}),m.ticking=!0;else{Y.stop();for(var ht=A(Y),dt=1;dt<=ht;dt++)Y.tick(),postMessage({nodes:d,currentTick:dt,totalTicks:ht,type:y.LAYOUT_MESSAGE.TICK},void 0);m.ticking=!1}m.forceSimulation=Y,m.ticking=!0}catch(Ot){m.ticking=!1,console.warn(Ot)}}},O.prototype.overlapProcess=function(B){var m=this,d=m.nodeSize,tt=m.nodeSpacing,Y,V,$=m.collideStrength;if((0,x.isNumber)(tt)?V=function(){return tt}:(0,x.isFunction)(tt)?V=tt:V=function(){return 0},!d)Y=function(it){if(it.size){if((0,x.isArray)(it.size)){var ht=it.size[0]>it.size[1]?it.size[0]:it.size[1];return ht/2+V(it)}if((0,x.isObject)(it.size)){var ht=it.size.width>it.size.height?it.size.width:it.size.height;return ht/2+V(it)}return it.size/2+V(it)}return 10+V(it)};else if((0,x.isFunction)(d))Y=function(it){var ht=d(it);return ht+V(it)};else if((0,x.isArray)(d)){var q=d[0]>d[1]?d[0]:d[1],rt=q/2;Y=function(it){return rt+V(it)}}else if((0,x.isNumber)(d)){var Q=d/2;Y=function(it){return Q+V(it)}}else Y=function(){return 10};B.force("collisionForce",N.forceCollide(Y).strength($))},O.prototype.updateCfg=function(B){var m=this;m.ticking&&(m.forceSimulation.stop(),m.ticking=!1),m.forceSimulation=null,Object.assign(m,B)},O.prototype.destroy=function(){var B=this;B.ticking&&(B.forceSimulation.stop(),B.ticking=!1),B.nodes=null,B.edges=null,B.destroyed=!0},O}(p.Base);F.ForceLayout=g;function A(S){var O=S.alphaMin(),B=S.alphaTarget(),m=S.alpha(),d=Math.log((O-B)/(m-B))/Math.log(1-S.alphaDecay()),tt=Math.ceil(d);return tt}function _(){return typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope}},885717:function(He,F,z){"use strict";var G=this&&this.__createBinding||(Object.create?function(R,L,P,N){N===void 0&&(N=P);var E=Object.getOwnPropertyDescriptor(L,P);(!E||("get"in E?!L.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return L[P]}}),Object.defineProperty(R,N,E)}:function(R,L,P,N){N===void 0&&(N=P),R[N]=L[P]}),X=this&&this.__exportStar||function(R,L){for(var P in R)P!=="default"&&!Object.prototype.hasOwnProperty.call(L,P)&&G(L,R,P)};Object.defineProperty(F,"__esModule",{value:!0}),X(z(508810),F)},191019:function(He,F,z){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.forceNBody=void 0;var G=z(971829),X=.81,R=.1;function L(x,p,y,g,A){var _=y/g,S=x.map(function(B,m){var d=p[B.id],tt=d.data,Y=d.x,V=d.y,$=d.size,q=tt.layout.force.nodeStrength;return{x:Y,y:V,size:$,index:m,vx:0,vy:0,weight:_*q}}),O=(0,G.quadtree)(S,function(B){return B.x},function(B){return B.y}).visitAfter(P);return S.forEach(function(B){E(B,O)}),S.map(function(B,m){var d=p[x[m].id],tt=d.data.layout.force.mass,Y=tt===void 0?1:tt;A[2*m]=B.vx/Y,A[2*m+1]=B.vy/Y}),A}F.forceNBody=L;function P(x){var p=0,y=0,g=0;if(x.length){for(var A=0;A<4;A++){var _=x[A];_&&_.weight&&(p+=_.weight,y+=_.x*_.weight,g+=_.y*_.weight)}x.x=y/p,x.y=g/p,x.weight=p}else{var _=x;x.x=_.data.x,x.y=_.data.y,x.weight=_.data.weight}}var N=function(x,p,y,g,A,_){var S=_.x-x.x||R,O=_.y-x.y||R,B=g-p,m=S*S+O*O,d=Math.sqrt(m)*m;if(B*B*X<m){var tt=x.weight/d;return _.vx+=S*tt,_.vy+=O*tt,!0}if(x.length)return!1;if(x.data!==_){var tt=x.data.weight/d;_.vx+=S*tt,_.vy+=O*tt}};function E(x,p){p.visit(function(y,g,A,_,S){return N(y,g,A,_,S,x)})}},306740:function(He,F,z){"use strict";var G=this&&this.__extends||function(){var x=function(p,y){return x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,A){g.__proto__=A}||function(g,A){for(var _ in A)Object.prototype.hasOwnProperty.call(A,_)&&(g[_]=A[_])},x(p,y)};return function(p,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");x(p,y);function g(){this.constructor=p}p.prototype=y===null?Object.create(y):(g.prototype=y.prototype,new g)}}(),X=this&&this.__assign||function(){return X=Object.assign||function(x){for(var p,y=1,g=arguments.length;y<g;y++){p=arguments[y];for(var A in p)Object.prototype.hasOwnProperty.call(p,A)&&(x[A]=p[A])}return x},X.apply(this,arguments)};Object.defineProperty(F,"__esModule",{value:!0}),F.Force2Layout=void 0;var R=z(762329),L=z(449784),P=z(191019),N=function(x,p){var y;return x?(0,L.isNumber)(x)?y=function(g){return x}:y=x:y=function(g){return p||1},y},E=function(x){G(p,x);function p(y){var g=x.call(this)||this;g.maxIteration=1e3,g.workerEnabled=!1,g.edgeStrength=200,g.nodeStrength=1e3,g.coulombDisScale=.005,g.damping=.9,g.maxSpeed=500,g.minMovement=.4,g.interval=.02,g.factor=1,g.linkDistance=200,g.gravity=0,g.clusterNodeStrength=20,g.preventOverlap=!0,g.distanceThresholdMode="mean",g.tick=function(){},g.nodes=[],g.edges=[],g.width=300,g.height=300,g.nodeMap={},g.nodeIdxMap={},g.judgingDistance=0,g.centripetalOptions={leaf:2,single:2,others:1,center:function(_){return{x:g.width/2,y:g.height/2}}};var A=y.getMass;return g.propsGetMass=A,g.updateCfg(y),g}return p.prototype.getCentripetalOptions=function(){var y=this,g=y.leafCluster,A=y.clustering,_=y.nodeClusterBy,S=y.nodes,O=y.nodeMap,B=y.clusterNodeStrength,m=function(ht){return typeof B=="function"?B(ht):B},d={},tt;if(g){tt=this.getSameTypeLeafMap()||{};var Y=Array.from(new Set(S==null?void 0:S.map(function(ht){return ht[_]})))||[];d={single:100,leaf:function(ht,dt,Ot){var It=tt[ht.id]||{},Kt=It.relativeLeafNodes,Ft=It.sameTypeLeafNodes;return(Ft==null?void 0:Ft.length)===(Kt==null?void 0:Kt.length)||(Y==null?void 0:Y.length)===1?1:m(ht)},others:1,center:function(ht,dt,Ot){var It,Kt=(((It=ht.data)===null||It===void 0?void 0:It.layout)||{}).degree;if(!Kt)return{x:100,y:100};var Ft;if(Kt===1){var Nt=(tt[ht.id]||{}).sameTypeLeafNodes,st=Nt===void 0?[]:Nt;st.length===1?Ft=void 0:st.length>1&&(Ft=(0,L.getAvgNodePosition)(st))}else Ft=void 0;return{x:Ft==null?void 0:Ft.x,y:Ft==null?void 0:Ft.y}}}}if(A){tt||(tt=this.getSameTypeLeafMap());var V=Array.from(new Set(S.map(function(ht,dt){return ht[_]}))).filter(function(ht){return ht!==void 0}),$={};V.forEach(function(ht){var dt=S.filter(function(Ot){return Ot[_]===ht}).map(function(Ot){return O[Ot.id]});$[ht]=(0,L.getAvgNodePosition)(dt)}),d={single:function(ht){return m(ht)},leaf:function(ht){return m(ht)},others:function(ht){return m(ht)},center:function(ht,dt,Ot){var It=$[ht[_]];return{x:It==null?void 0:It.x,y:It==null?void 0:It.y}}}}this.centripetalOptions=X(X({},this.centripetalOptions),d);var q=this.centripetalOptions,rt=q.leaf,Q=q.single,it=q.others;rt&&typeof rt!="function"&&(this.centripetalOptions.leaf=function(){return rt}),Q&&typeof Q!="function"&&(this.centripetalOptions.single=function(){return Q}),it&&typeof it!="function"&&(this.centripetalOptions.others=function(){return it})},p.prototype.updateCfg=function(y){y&&Object.assign(this,y)},p.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},p.prototype.execute=function(){var y=this;y.stop();var g=y.nodes,A=y.edges,_=y.defSpringLen;if(y.judgingDistance=0,!g||g.length===0){y.onLayoutEnd([]);return}!y.width&&typeof window!="undefined"&&(y.width=window.innerWidth),!y.height&&typeof window!="undefined"&&(y.height=window.innerHeight),y.center||(y.center=[y.width/2,y.height/2]);var S=y.center;if(g.length===1){g[0].x=S[0],g[0].y=S[1],y.onLayoutEnd([X({},g[0])]);return}y.degreesMap=(0,L.getDegreeMap)(g,A),y.propsGetMass?y.getMass=y.propsGetMass:y.getMass=function(V){var $=1;(0,L.isNumber)(V.mass)&&($=V.mass);var q=y.degreesMap[V.id].all;return!q||q<5?$:q*5*$};var O=y.nodeSize,B;if(y.preventOverlap){var m=y.nodeSpacing,d;(0,L.isNumber)(m)?d=function(){return m}:(0,L.isFunction)(m)?d=m:d=function(){return 0},O?(0,L.isArray)(O)?B=function(V){return Math.max(O[0],O[1])+d(V)}:B=function(V){return O+d(V)}:B=function(V){return V.size?(0,L.isArray)(V.size)?Math.max(V.size[0],V.size[1])+d(V):(0,L.isObject)(V.size)?Math.max(V.size.width,V.size.height)+d(V):V.size+d(V):10+d(V)}}y.nodeSize=B,y.linkDistance=N(y.linkDistance,1),y.nodeStrength=N(y.nodeStrength,1),y.edgeStrength=N(y.edgeStrength,1);var tt={},Y={};g.forEach(function(V,$){(0,L.isNumber)(V.x)||(V.x=Math.random()*y.width),(0,L.isNumber)(V.y)||(V.y=Math.random()*y.height);var q=y.degreesMap[V.id];tt[V.id]=X(X({},V),{data:X(X({},V.data),{size:y.nodeSize(V)||30,layout:{inDegree:q.in,outDegree:q.out,degree:q.all,tDegree:q.in,sDegree:q.out,force:{mass:y.getMass(V),nodeStrength:y.nodeStrength(V,A)}}})}),Y[V.id]=$}),y.nodeMap=tt,y.nodeIdxMap=Y,y.edgeInfos=[],A==null||A.forEach(function(V){var $=tt[V.source],q=tt[V.target];!$||!q?elf.edgeInfos.push({}):y.edgeInfos.push({edgeStrength:y.edgeStrength(V),linkDistance:_?_(X(X({},V),{source:$,target:q}),$,q):y.linkDistance(V,$,q)||1+(O($)+O($)||0)/2})}),this.getCentripetalOptions(),y.onLayoutEnd=y.onLayoutEnd||function(){},y.run()},p.prototype.run=function(){var y=this,g=y.maxIteration,A=y.nodes,_=y.edges,S=y.workerEnabled,O=y.minMovement,B=y.animate,m=y.nodeMap,d=y.height;if(y.currentMinY=0,y.currentMaxY=d,!!A){var tt=[];if(A.forEach(function(it,ht){tt[2*ht]=0,tt[2*ht+1]=0}),this.defSideCoe&&typeof this.defSideCoe=="function"){var Y={};_.forEach(function(it){var ht=it.source,dt=it.target;Y[ht]=Y[ht]||[],Y[ht].push(it),Y[dt]=Y[dt]||[],Y[dt].push(it)}),this.relatedEdges=Y}var V=g,$=!B;if(S||$){for(var q=0,rt=0;(y.judgingDistance>O||rt<1)&&rt<V;rt++)q=rt,y.runOneStep(rt,tt);y.onLayoutEnd(Object.values(m))}else{if(typeof window=="undefined")return;var Q=0;this.timeInterval=window.setInterval(function(){A&&(y.runOneStep(Q,tt),Q++,(Q>=V||y.judgingDistance<O)&&(y.onLayoutEnd(Object.values(m)),window.clearInterval(y.timeInterval)))},0)}}},p.prototype.runOneStep=function(y,g){var A,_=this,S=_.nodes,O=_.edges,B=_.nodeMap,m=_.monitor,d=[];if(S!=null&&S.length){_.calRepulsive(d),O&&_.calAttractive(d),_.calGravity(d),_.attractToSide(d);var tt=_.interval;if(_.updateVelocity(d,g,tt),_.updatePosition(g,tt),(A=_.tick)===null||A===void 0||A.call(_),m){var Y=this.calTotalEnergy(d);m({energy:Y,nodes:S,edges:O,iterations:y})}}},p.prototype.calTotalEnergy=function(y){var g=this,A=g.nodes,_=g.nodeMap;if(!(A!=null&&A.length))return 0;var S=0;return A.forEach(function(O,B){var m=y[2*B],d=y[2*B+1],tt=m*m+d*d,Y=_[O.id].data.layout.force.mass,V=Y===void 0?1:Y;S+=V*tt*.5}),S},p.prototype.calRepulsive=function(y){var g=this,A=g.nodes,_=g.nodeMap,S=g.factor,O=g.coulombDisScale,B=g.nodeSize;(0,P.forceNBody)(A,_,S,O*O,y)},p.prototype.calAttractive=function(y){var g=this,A=g.edges,_=g.nodeMap,S=g.nodeIdxMap,O=g.edgeInfos,B=g.nodeSize;A.forEach(function(m,d){var tt=(0,L.getEdgeTerminal)(m,"source"),Y=(0,L.getEdgeTerminal)(m,"target"),V=_[tt],$=_[Y];if(!(!V||!$)){var q=$.x-V.x,rt=$.y-V.y;!q&&!rt&&(q=Math.random()*.01,rt=Math.random()*.01);var Q=Math.sqrt(q*q+rt*rt),it=q/Q,ht=rt/Q,dt=O[d]||{},Ot=dt.linkDistance,It=Ot===void 0?200:Ot,Kt=dt.edgeStrength,Ft=Kt===void 0?200:Kt,Nt=It-Q,st=Nt*Ft,yt=V.data.layout.force.mass||1,kt=$.data.layout.force.mass||1,ee=1/yt,$t=1/kt,ge=it*st,Pe=ht*st,er=2*S[tt],Jt=2*S[Y];y[er]-=ge*ee,y[er+1]-=Pe*ee,y[Jt]+=ge*$t,y[Jt+1]+=Pe*$t}})},p.prototype.calGravity=function(y){var g,A=this,_=A.nodes,S=A.edges,O=S===void 0?[]:S,B=A.nodeMap,m=A.width,d=A.height,tt=A.center,Y=A.gravity,V=A.degreesMap,$=A.centripetalOptions;if(_)for(var q=_.length,rt=0;rt<q;rt++){var Q=2*rt,it=B[_[rt].id],ht=it.data.layout.force.mass,dt=ht===void 0?1:ht,Ot=0,It=0,Kt=Y,Ft=V[it.id],Nt=Ft.in,st=Ft.out,yt=Ft.all,kt=(g=A.getCenter)===null||g===void 0?void 0:g.call(A,it,yt);if(kt){var ee=kt[0],$t=kt[1],ge=kt[2];Ot=it.x-ee,It=it.y-$t,Kt=ge}else Ot=it.x-tt[0],It=it.y-tt[1];if(Kt&&(y[Q]-=Kt*Ot/dt,y[Q+1]-=Kt*It/dt),$){var Pe=$.leaf,er=$.single,Jt=$.others,ae=$.center,Se=(ae==null?void 0:ae(it,_,O,m,d))||{x:0,y:0,centerStrength:0},xe=Se.x,we=Se.y,zt=Se.centerStrength;if(!(0,L.isNumber)(xe)||!(0,L.isNumber)(we))continue;var Wt=(it.x-xe)/dt,Ie=(it.y-we)/dt;if(zt&&(y[Q]-=zt*Wt,y[Q+1]-=zt*Ie),yt===0){var Yt=er(it);if(!Yt)continue;y[Q]-=Yt*Wt,y[Q+1]-=Yt*Ie;continue}if(Nt===0||st===0){var ie=Pe(it,_,O);if(!ie)continue;y[Q]-=ie*Wt,y[Q+1]-=ie*Ie;continue}var Oe=Jt(it);if(!Oe)continue;y[Q]-=Oe*Wt,y[Q+1]-=Oe*Ie}}},p.prototype.attractToSide=function(y){var g=this,A=g.defSideCoe,_=g.height,S=g.nodes,O=g.relatedEdges,B=g.currentMinY,m=B===void 0?0:B,d=g.currentMaxY,tt=d===void 0?this.height:d;!A||typeof A!="function"||!(S!=null&&S.length)||S.forEach(function(Y,V){var $=A(Y,O[Y.id]||[]);if($!==0){var q=$<0?m:tt,rt=Math.abs($);y[2*V+1]-=rt*(Y.y-q)}})},p.prototype.updateVelocity=function(y,g,A){var _=this,S=_.nodes,O=_.damping,B=_.maxSpeed;S!=null&&S.length&&S.forEach(function(m,d){var tt=(g[2*d]+y[2*d]*A)*O||.01,Y=(g[2*d+1]+y[2*d+1]*A)*O||.01,V=Math.sqrt(tt*tt+Y*Y);if(V>B){var $=B/V;tt=$*tt,Y=$*Y}g[2*d]=tt,g[2*d+1]=Y})},p.prototype.updatePosition=function(y,g){var A=this,_=A.nodes,S=A.distanceThresholdMode,O=A.nodeMap;if(!(_!=null&&_.length)){this.judgingDistance=0;return}var B=0;S==="max"?A.judgingDistance=-1/0:S==="min"&&(A.judgingDistance=1/0);var m=1/0,d=-1/0;_.forEach(function(tt,Y){var V=O[tt.id];if((0,L.isNumber)(tt.fx)&&(0,L.isNumber)(tt.fy)){tt.x=tt.fx,tt.y=tt.fy,V.x=tt.x,V.y=tt.y;return}var $=y[2*Y]*g,q=y[2*Y+1]*g;tt.x+=$,tt.y+=q,V.x=tt.x,V.y=tt.y,tt.y<m&&(m=tt.y),tt.y>d&&(d=tt.y);var rt=Math.sqrt($*$+q*q);switch(S){case"max":A.judgingDistance<rt&&(A.judgingDistance=rt);break;case"min":A.judgingDistance>rt&&(A.judgingDistance=rt);break;default:B=B+rt;break}}),this.currentMinY=m,this.currentMaxY=d,(!S||S==="mean")&&(A.judgingDistance=B/_.length)},p.prototype.stop=function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)},p.prototype.destroy=function(){var y=this;y.stop(),y.tick=null,y.nodes=null,y.edges=null,y.destroyed=!0},p.prototype.getType=function(){return"force2"},p.prototype.getSameTypeLeafMap=function(){var y=this,g=y.nodeClusterBy,A=y.nodes,_=y.edges,S=y.nodeMap,O=y.degreesMap;if(A!=null&&A.length){var B={};return A.forEach(function(m,d){var tt=O[m.id].all;tt===1&&(B[m.id]=(0,L.getCoreNodeAndRelativeLeafNodes)("leaf",m,_,g,O,S))}),B}},p}(R.Base);F.Force2Layout=E},19712:function(He,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0});var z=function(){function G(X){this.id=X.id||0,this.rx=X.rx,this.ry=X.ry,this.fx=0,this.fy=0,this.mass=X.mass,this.degree=X.degree,this.g=X.g||0}return G.prototype.distanceTo=function(X){var R=this.rx-X.rx,L=this.ry-X.ry;return Math.hypot(R,L)},G.prototype.setPos=function(X,R){this.rx=X,this.ry=R},G.prototype.resetForce=function(){this.fx=0,this.fy=0},G.prototype.addForce=function(X){var R=X.rx-this.rx,L=X.ry-this.ry,P=Math.hypot(R,L);P=P<1e-4?1e-4:P;var N=this.g*(this.degree+1)*(X.degree+1)/P;this.fx+=N*R/P,this.fy+=N*L/P},G.prototype.in=function(X){return X.contains(this.rx,this.ry)},G.prototype.add=function(X){var R=this.mass+X.mass,L=(this.rx*this.mass+X.rx*X.mass)/R,P=(this.ry*this.mass+X.ry*X.mass)/R,N=this.degree+X.degree,E={rx:L,ry:P,mass:R,degree:N};return new G(E)},G}();F.default=z},148564:function(He,F,z){"use strict";var G=this&&this.__extends||function(){var p=function(y,g){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,_){A.__proto__=_}||function(A,_){for(var S in _)Object.prototype.hasOwnProperty.call(_,S)&&(A[S]=_[S])},p(y,g)};return function(y,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");p(y,g);function A(){this.constructor=y}y.prototype=g===null?Object.create(g):(A.prototype=g.prototype,new A)}}(),X=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(F,"__esModule",{value:!0}),F.ForceAtlas2Layout=void 0;var R=z(762329),L=z(449784),P=X(z(19712)),N=X(z(851638)),E=X(z(762732)),x=function(p){G(y,p);function y(g){var A=p.call(this)||this;return A.center=[0,0],A.width=300,A.height=300,A.nodes=[],A.edges=[],A.kr=5,A.kg=1,A.mode="normal",A.preventOverlap=!1,A.dissuadeHubs=!1,A.barnesHut=void 0,A.maxIteration=0,A.ks=.1,A.ksmax=10,A.tao=.1,A.onLayoutEnd=function(){},A.prune=void 0,A.updateCfg(g),A}return y.prototype.getDefaultCfg=function(){return{}},y.prototype.execute=function(){var g=this,A=g.nodes,_=g.onLayoutEnd,S=g.prune,O=g.maxIteration;!g.width&&typeof window!="undefined"&&(g.width=window.innerWidth),!g.height&&typeof window!="undefined"&&(g.height=window.innerHeight);for(var B=[],m=A.length,d=0;d<m;d+=1){var tt=A[d],Y=10,V=10;(0,L.isNumber)(tt.size)&&(Y=tt.size,V=tt.size),(0,L.isArray)(tt.size)?(isNaN(tt.size[0])||(Y=tt.size[0]),isNaN(tt.size[1])||(V=tt.size[1])):(0,L.isObject)(tt.size)&&(Y=tt.size.width,V=tt.size.height),g.getWidth&&!isNaN(g.getWidth(tt))&&(V=g.getWidth(tt)),g.getHeight&&!isNaN(g.getHeight(tt))&&(Y=g.getHeight(tt));var $=Math.max(Y,V);B.push($)}g.barnesHut===void 0&&m>250&&(g.barnesHut=!0),g.prune===void 0&&m>100&&(g.prune=!0),this.maxIteration===0&&!g.prune?(O=250,m<=200&&m>100?O=1e3:m>200&&(O=1200),this.maxIteration=O):this.maxIteration===0&&S&&(O=100,m<=200&&m>100?O=500:m>200&&(O=950),this.maxIteration=O),g.kr||(g.kr=50,m>100&&m<=500?g.kr=20:m>500&&(g.kr=1)),g.kg||(g.kg=20,m>100&&m<=500?g.kg=10:m>500&&(g.kg=1)),this.nodes=g.updateNodesByForces(B),_()},y.prototype.updateNodesByForces=function(g){for(var A=this,_=A.edges,S=A.maxIteration,O=A.nodes,B=_.filter(function(Ft){var Nt=(0,L.getEdgeTerminal)(Ft,"source"),st=(0,L.getEdgeTerminal)(Ft,"target");return Nt!==st}),m=O.length,d=B.length,tt=[],Y={},V={},$=[],q=0;q<m;q+=1)Y[O[q].id]=q,tt[q]=0,(O[q].x===void 0||isNaN(O[q].x))&&(O[q].x=Math.random()*1e3),(O[q].y===void 0||isNaN(O[q].y))&&(O[q].y=Math.random()*1e3),$.push({x:O[q].x,y:O[q].y});for(var q=0;q<d;q+=1){for(var rt=void 0,Q=void 0,it=0,ht=0,dt=0;dt<m;dt+=1){var Ot=(0,L.getEdgeTerminal)(B[q],"source"),It=(0,L.getEdgeTerminal)(B[q],"target");O[dt].id===Ot?(rt=O[dt],it=dt):O[dt].id===It&&(Q=O[dt],ht=dt),V[q]={sourceIdx:it,targetIdx:ht}}rt&&(tt[Y[rt.id]]+=1),Q&&(tt[Y[Q.id]]+=1)}var Kt=S;if(O=this.iterate(Kt,Y,V,d,tt,g),A.prune){for(var dt=0;dt<d;dt+=1)tt[V[dt].sourceIdx]<=1?(O[V[dt].sourceIdx].x=O[V[dt].targetIdx].x,O[V[dt].sourceIdx].y=O[V[dt].targetIdx].y):tt[V[dt].targetIdx]<=1&&(O[V[dt].targetIdx].x=O[V[dt].sourceIdx].x,O[V[dt].targetIdx].y=O[V[dt].sourceIdx].y);A.prune=!1,A.barnesHut=!1,Kt=100,O=this.iterate(Kt,Y,V,d,tt,g)}return O},y.prototype.iterate=function(g,A,_,S,O,B){for(var m=this,d=m.nodes,tt=m.kr,Y=m.preventOverlap,V=m.barnesHut,$=d.length,q=0,rt=100,Q=g,it=50,ht=[],dt=[],Ot=[],It=0;It<$;It+=1)if(ht[2*It]=0,ht[2*It+1]=0,V){var Kt={id:It,rx:d[It].x,ry:d[It].y,mass:1,g:tt,degree:O[It]};Ot[It]=new P.default(Kt)}for(;Q>0;){for(var It=0;It<$;It+=1)dt[2*It]=ht[2*It],dt[2*It+1]=ht[2*It+1],ht[2*It]=0,ht[2*It+1]=0;ht=this.getAttrForces(Q,it,S,A,_,O,B,ht),V&&(Y&&Q>it||!Y)?ht=this.getOptRepGraForces(ht,Ot,O):ht=this.getRepGraForces(Q,it,ht,rt,B,O);var Ft=this.updatePos(ht,dt,q,O);d=Ft.nodes,q=Ft.sg,Q--,m.tick&&m.tick()}return d},y.prototype.getAttrForces=function(g,A,_,S,O,B,m,d){for(var tt=this,Y=tt.nodes,V=tt.preventOverlap,$=tt.dissuadeHubs,q=tt.mode,rt=tt.prune,Q=0;Q<_;Q+=1){var it=Y[O[Q].sourceIdx],ht=O[Q].sourceIdx,dt=Y[O[Q].targetIdx],Ot=O[Q].targetIdx;if(!(rt&&(B[ht]<=1||B[Ot]<=1))){var It=[dt.x-it.x,dt.y-it.y],Kt=Math.hypot(It[0],It[1]);Kt=Kt<1e-4?1e-4:Kt,It[0]=It[0]/Kt,It[1]=It[1]/Kt,V&&g<A&&(Kt=Kt-m[ht]-m[Ot]);var Ft=Kt,Nt=Ft;q==="linlog"&&(Ft=Math.log(1+Kt),Nt=Ft),$&&(Ft=Kt/B[ht],Nt=Kt/B[Ot]),V&&g<A&&Kt<=0?(Ft=0,Nt=0):V&&g<A&&Kt>0&&(Ft=Kt,Nt=Kt),d[2*S[it.id]]+=Ft*It[0],d[2*S[dt.id]]-=Nt*It[0],d[2*S[it.id]+1]+=Ft*It[1],d[2*S[dt.id]+1]-=Nt*It[1]}}return d},y.prototype.getRepGraForces=function(g,A,_,S,O,B){for(var m=this,d=m.nodes,tt=m.preventOverlap,Y=m.kr,V=m.kg,$=m.center,q=m.prune,rt=d.length,Q=0;Q<rt;Q+=1){for(var it=Q+1;it<rt;it+=1)if(!(q&&(B[Q]<=1||B[it]<=1))){var ht=[d[it].x-d[Q].x,d[it].y-d[Q].y],dt=Math.hypot(ht[0],ht[1]);dt=dt<1e-4?1e-4:dt,ht[0]=ht[0]/dt,ht[1]=ht[1]/dt,tt&&g<A&&(dt=dt-O[Q]-O[it]);var Ot=Y*(B[Q]+1)*(B[it]+1)/dt;tt&&g<A&&dt<0?Ot=S*(B[Q]+1)*(B[it]+1):tt&&g<A&&dt===0?Ot=0:tt&&g<A&&dt>0&&(Ot=Y*(B[Q]+1)*(B[it]+1)/dt),_[2*Q]-=Ot*ht[0],_[2*it]+=Ot*ht[0],_[2*Q+1]-=Ot*ht[1],_[2*it+1]+=Ot*ht[1]}var It=[d[Q].x-$[0],d[Q].y-$[1]],Kt=Math.hypot(It[0],It[1]);It[0]=It[0]/Kt,It[1]=It[1]/Kt;var Ft=V*(B[Q]+1);_[2*Q]-=Ft*It[0],_[2*Q+1]-=Ft*It[1]}return _},y.prototype.getOptRepGraForces=function(g,A,_){for(var S=this,O=S.nodes,B=S.kg,m=S.center,d=S.prune,tt=O.length,Y=9e10,V=-9e10,$=9e10,q=-9e10,rt=0;rt<tt;rt+=1)d&&_[rt]<=1||(A[rt].setPos(O[rt].x,O[rt].y),O[rt].x>=V&&(V=O[rt].x),O[rt].x<=Y&&(Y=O[rt].x),O[rt].y>=q&&(q=O[rt].y),O[rt].y<=$&&($=O[rt].y));for(var Q=Math.max(V-Y,q-$),it={xmid:(V+Y)/2,ymid:(q+$)/2,length:Q,massCenter:m,mass:tt},ht=new N.default(it),dt=new E.default(ht),rt=0;rt<tt;rt+=1)d&&_[rt]<=1||A[rt].in(ht)&&dt.insert(A[rt]);for(var rt=0;rt<tt;rt+=1)if(!(d&&_[rt]<=1)){A[rt].resetForce(),dt.updateForce(A[rt]),g[2*rt]-=A[rt].fx,g[2*rt+1]-=A[rt].fy;var Ot=[O[rt].x-m[0],O[rt].y-m[1]],It=Math.hypot(Ot[0],Ot[1]);It=It<1e-4?1e-4:It,Ot[0]=Ot[0]/It,Ot[1]=Ot[1]/It;var Kt=B*(_[rt]+1);g[2*rt]-=Kt*Ot[0],g[2*rt+1]-=Kt*Ot[1]}return g},y.prototype.updatePos=function(g,A,_,S){for(var O=this,B=O.nodes,m=O.ks,d=O.tao,tt=O.prune,Y=O.ksmax,V=B.length,$=[],q=[],rt=0,Q=0,it=0;it<V;it+=1)if(!(tt&&S[it]<=1)){var ht=[g[2*it]-A[2*it],g[2*it+1]-A[2*it+1]],dt=Math.hypot(ht[0],ht[1]),Ot=[g[2*it]+A[2*it],g[2*it+1]+A[2*it+1]],It=Math.hypot(Ot[0],Ot[1]);$[it]=dt,q[it]=It/2,rt+=(S[it]+1)*$[it],Q+=(S[it]+1)*q[it]}var Kt=_;_=d*Q/rt,Kt!==0&&(_=_>1.5*Kt?1.5*Kt:_);for(var it=0;it<V;it+=1)if(!(tt&&S[it]<=1)&&!((0,L.isNumber)(B[it].fx)&&(0,L.isNumber)(B[it].fy))){var Ft=m*_/(1+_*Math.sqrt($[it])),Nt=Math.hypot(g[2*it],g[2*it+1]);Nt=Nt<1e-4?1e-4:Nt;var st=Y/Nt;Ft=Ft>st?st:Ft;var yt=Ft*g[2*it],kt=Ft*g[2*it+1];B[it].x+=yt,B[it].y+=kt}return{nodes:B,sg:_}},y}(R.Base);F.ForceAtlas2Layout=x},851638:function(He,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0});var z=function(){function G(X){this.xmid=X.xmid,this.ymid=X.ymid,this.length=X.length,this.massCenter=X.massCenter||[0,0],this.mass=X.mass||1}return G.prototype.getLength=function(){return this.length},G.prototype.contains=function(X,R){var L=this.length/2;return X<=this.xmid+L&&X>=this.xmid-L&&R<=this.ymid+L&&R>=this.ymid-L},G.prototype.NW=function(){var X=this.xmid-this.length/4,R=this.ymid+this.length/4,L=this.length/2,P={xmid:X,ymid:R,length:L},N=new G(P);return N},G.prototype.NE=function(){var X=this.xmid+this.length/4,R=this.ymid+this.length/4,L=this.length/2,P={xmid:X,ymid:R,length:L},N=new G(P);return N},G.prototype.SW=function(){var X=this.xmid-this.length/4,R=this.ymid-this.length/4,L=this.length/2,P={xmid:X,ymid:R,length:L},N=new G(P);return N},G.prototype.SE=function(){var X=this.xmid+this.length/4,R=this.ymid-this.length/4,L=this.length/2,P={xmid:X,ymid:R,length:L},N=new G(P);return N},G}();F.default=z},762732:function(He,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0});var z=function(){function G(X){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,X!=null&&(this.quad=X)}return G.prototype.insert=function(X){if(this.body==null){this.body=X;return}this._isExternal()?(this.quad&&(this.NW=new G(this.quad.NW()),this.NE=new G(this.quad.NE()),this.SW=new G(this.quad.SW()),this.SE=new G(this.quad.SE())),this._putBody(this.body),this._putBody(X),this.body=this.body.add(X)):(this.body=this.body.add(X),this._putBody(X))},G.prototype._putBody=function(X){this.quad&&(X.in(this.quad.NW())&&this.NW?this.NW.insert(X):X.in(this.quad.NE())&&this.NE?this.NE.insert(X):X.in(this.quad.SW())&&this.SW?this.SW.insert(X):X.in(this.quad.SE())&&this.SE&&this.SE.insert(X))},G.prototype._isExternal=function(){return this.NW==null&&this.NE==null&&this.SW==null&&this.SE==null},G.prototype.updateForce=function(X){if(!(this.body==null||X===this.body))if(this._isExternal())X.addForce(this.body);else{var R=this.quad?this.quad.getLength():0,L=this.body.distanceTo(X);R/L<this.theta?X.addForce(this.body):(this.NW&&this.NW.updateForce(X),this.NE&&this.NE.updateForce(X),this.SW&&this.SW.updateForce(X),this.SE&&this.SE.updateForce(X))}},G}();F.default=z},880374:function(He,F,z){"use strict";var G=this&&this.__extends||function(){var N=function(E,x){return N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,y){p.__proto__=y}||function(p,y){for(var g in y)Object.prototype.hasOwnProperty.call(y,g)&&(p[g]=y[g])},N(E,x)};return function(E,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");N(E,x);function p(){this.constructor=E}E.prototype=x===null?Object.create(x):(p.prototype=x.prototype,new p)}}();Object.defineProperty(F,"__esModule",{value:!0}),F.FruchtermanLayout=void 0;var X=z(762329),R=z(449784),L=800,P=function(N){G(E,N);function E(x){var p=N.call(this)||this;return p.maxIteration=1e3,p.workerEnabled=!1,p.gravity=10,p.speed=5,p.clustering=!1,p.clusterGravity=10,p.nodes=[],p.edges=[],p.width=300,p.height=300,p.nodeMap={},p.nodeIdxMap={},p.onLayoutEnd=function(){},p.tick=function(){},p.animate=!0,p.updateCfg(x),p}return E.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10,animate:!0}},E.prototype.execute=function(){var x=this,p,y,g=this,A=g.nodes;if(g.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(g.timeInterval),!A||A.length===0){(p=g.onLayoutEnd)===null||p===void 0||p.call(g);return}!g.width&&typeof window!="undefined"&&(g.width=window.innerWidth),!g.height&&typeof window!="undefined"&&(g.height=window.innerHeight),g.center||(g.center=[g.width/2,g.height/2]);var _=g.center;if(A.length===1){A[0].x=_[0],A[0].y=_[1],(y=g.onLayoutEnd)===null||y===void 0||y.call(g);return}var S={},O={};return A.forEach(function(B,m){(0,R.isNumber)(B.x)||(B.x=Math.random()*x.width),(0,R.isNumber)(B.y)||(B.y=Math.random()*x.height),S[B.id]=B,O[B.id]=m}),g.nodeMap=S,g.nodeIdxMap=O,g.run()},E.prototype.run=function(){var x,p=this,y=p.nodes;if(y){var g=p.edges,A=p.maxIteration,_=p.workerEnabled,S=p.clustering,O=p.animate,B={};if(S&&y.forEach(function(tt){B[tt.cluster]===void 0&&(B[tt.cluster]={name:tt.cluster,cx:0,cy:0,count:0})}),_||!O){for(var m=0;m<A;m++)p.runOneStep(B);(x=p.onLayoutEnd)===null||x===void 0||x.call(p)}else{if(typeof window=="undefined")return;var d=0;this.timeInterval=window.setInterval(function(){var tt;p.runOneStep(B),d++,d>=A&&((tt=p.onLayoutEnd)===null||tt===void 0||tt.call(p),window.clearInterval(p.timeInterval))},0)}return{nodes:y,edges:g}}},E.prototype.runOneStep=function(x){var p,y=this,g=y.nodes;if(g){var A=y.edges,_=y.center,S=y.gravity,O=y.speed,B=y.clustering,m=y.height*y.width,d=Math.sqrt(m)/10,tt=m/(g.length+1),Y=Math.sqrt(tt),V=[];if(g.forEach(function(rt,Q){V[Q]={x:0,y:0}}),y.applyCalculate(g,A,V,Y,tt),B){for(var $ in x)x[$].cx=0,x[$].cy=0,x[$].count=0;g.forEach(function(rt){var Q=x[rt.cluster];(0,R.isNumber)(rt.x)&&(Q.cx+=rt.x),(0,R.isNumber)(rt.y)&&(Q.cy+=rt.y),Q.count++});for(var $ in x)x[$].cx/=x[$].count,x[$].cy/=x[$].count;var q=y.clusterGravity||S;g.forEach(function(rt,Q){if(!(!(0,R.isNumber)(rt.x)||!(0,R.isNumber)(rt.y))){var it=x[rt.cluster],ht=Math.sqrt((rt.x-it.cx)*(rt.x-it.cx)+(rt.y-it.cy)*(rt.y-it.cy)),dt=Y*q;V[Q].x-=dt*(rt.x-it.cx)/ht,V[Q].y-=dt*(rt.y-it.cy)/ht}})}g.forEach(function(rt,Q){if(!(!(0,R.isNumber)(rt.x)||!(0,R.isNumber)(rt.y))){var it=.01*Y*S;V[Q].x-=it*(rt.x-_[0]),V[Q].y-=it*(rt.y-_[1])}}),g.forEach(function(rt,Q){if((0,R.isNumber)(rt.fx)&&(0,R.isNumber)(rt.fy)){rt.x=rt.fx,rt.y=rt.fy;return}if(!(!(0,R.isNumber)(rt.x)||!(0,R.isNumber)(rt.y))){var it=Math.sqrt(V[Q].x*V[Q].x+V[Q].y*V[Q].y);if(it>0){var ht=Math.min(d*(O/L),it);rt.x+=V[Q].x/it*ht,rt.y+=V[Q].y/it*ht}}}),(p=y.tick)===null||p===void 0||p.call(y)}},E.prototype.applyCalculate=function(x,p,y,g,A){var _=this;_.calRepulsive(x,y,A),p&&_.calAttractive(p,y,g)},E.prototype.calRepulsive=function(x,p,y){x.forEach(function(g,A){p[A]={x:0,y:0},x.forEach(function(_,S){if(A!==S&&!(!(0,R.isNumber)(g.x)||!(0,R.isNumber)(_.x)||!(0,R.isNumber)(g.y)||!(0,R.isNumber)(_.y))){var O=g.x-_.x,B=g.y-_.y,m=O*O+B*B;if(m===0){m=1;var d=A>S?1:-1;O=.01*d,B=.01*d}var tt=y/m;p[A].x+=O*tt,p[A].y+=B*tt}})})},E.prototype.calAttractive=function(x,p,y){var g=this;x.forEach(function(A){var _=(0,R.getEdgeTerminal)(A,"source"),S=(0,R.getEdgeTerminal)(A,"target");if(!(!_||!S)){var O=g.nodeIdxMap[_],B=g.nodeIdxMap[S];if(O!==B){var m=g.nodeMap[_],d=g.nodeMap[S];if(!(!(0,R.isNumber)(d.x)||!(0,R.isNumber)(m.x)||!(0,R.isNumber)(d.y)||!(0,R.isNumber)(m.y))){var tt=d.x-m.x,Y=d.y-m.y,V=Math.sqrt(tt*tt+Y*Y),$=V*V/y;p[B].x-=tt/V*$,p[B].y-=Y/V*$,p[O].x+=tt/V*$,p[O].y+=Y/V*$}}}})},E.prototype.stop=function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)},E.prototype.destroy=function(){var x=this;x.stop(),x.tick=null,x.nodes=null,x.edges=null,x.destroyed=!0},E.prototype.getType=function(){return"fruchterman"},E}(X.Base);F.FruchtermanLayout=P},113653:function(He,F,z){"use strict";var G=this&&this.__extends||function(){var N=function(E,x){return N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,y){p.__proto__=y}||function(p,y){for(var g in y)Object.prototype.hasOwnProperty.call(y,g)&&(p[g]=y[g])},N(E,x)};return function(E,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");N(E,x);function p(){this.constructor=E}E.prototype=x===null?Object.create(x):(p.prototype=x.prototype,new p)}}();Object.defineProperty(F,"__esModule",{value:!0}),F.GForceLayout=void 0;var X=z(762329),R=z(449784),L=function(N,E){var x;return N?(0,R.isNumber)(N)?x=function(p){return N}:x=N:x=function(p){return E||1},x},P=function(N){G(E,N);function E(x){var p=N.call(this)||this;return p.maxIteration=500,p.workerEnabled=!1,p.edgeStrength=200,p.nodeStrength=1e3,p.coulombDisScale=.005,p.damping=.9,p.maxSpeed=1e3,p.minMovement=.5,p.interval=.02,p.factor=1,p.linkDistance=1,p.gravity=10,p.preventOverlap=!0,p.collideStrength=1,p.tick=function(){},p.nodes=[],p.edges=[],p.width=300,p.height=300,p.nodeMap={},p.nodeIdxMap={},p.animate=!0,p.updateCfg(x),p}return E.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},E.prototype.execute=function(){var x,p,y=this,g=y.nodes;if(y.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(y.timeInterval),!g||g.length===0){(x=y.onLayoutEnd)===null||x===void 0||x.call(y);return}!y.width&&typeof window!="undefined"&&(y.width=window.innerWidth),!y.height&&typeof window!="undefined"&&(y.height=window.innerHeight),y.center||(y.center=[y.width/2,y.height/2]);var A=y.center;if(g.length===1){g[0].x=A[0],g[0].y=A[1],(p=y.onLayoutEnd)===null||p===void 0||p.call(y);return}var _={},S={};g.forEach(function(Y,V){(0,R.isNumber)(Y.x)||(Y.x=Math.random()*y.width),(0,R.isNumber)(Y.y)||(Y.y=Math.random()*y.height),_[Y.id]=Y,S[Y.id]=V}),y.nodeMap=_,y.nodeIdxMap=S,y.linkDistance=L(y.linkDistance,1),y.nodeStrength=L(y.nodeStrength,1),y.edgeStrength=L(y.edgeStrength,1);var O=y.nodeSize,B;if(y.preventOverlap){var m=y.nodeSpacing,d;(0,R.isNumber)(m)?d=function(){return m}:(0,R.isFunction)(m)?d=m:d=function(){return 0},O?(0,R.isArray)(O)?B=function(Y){return Math.max(O[0],O[1])+d(Y)}:B=function(Y){return O+d(Y)}:B=function(Y){return Y.size?(0,R.isArray)(Y.size)?Math.max(Y.size[0],Y.size[1])+d(Y):(0,R.isObject)(Y.size)?Math.max(Y.size.width,Y.size.height)+d(Y):Y.size+d(Y):10+d(Y)}}y.nodeSize=B;var tt=y.edges;y.degrees=(0,R.getDegree)(g.length,y.nodeIdxMap,tt),y.getMass||(y.getMass=function(Y){var V=Y.mass||y.degrees[y.nodeIdxMap[Y.id]].all||1;return V}),y.run()},E.prototype.run=function(){var x,p=this,y=p.maxIteration,g=p.nodes,A=p.workerEnabled,_=p.minMovement,S=p.animate;if(g)if(A||!S){for(var O=0;O<y;O++){var B=p.runOneStep(O);if(p.reachMoveThreshold(g,B,_))break}(x=p.onLayoutEnd)===null||x===void 0||x.call(p)}else{if(typeof window=="undefined")return;var m=0;this.timeInterval=window.setInterval(function(){var d,tt;if(g){var Y=p.runOneStep(m)||[];p.reachMoveThreshold(g,Y,_)&&((d=p.onLayoutEnd)===null||d===void 0||d.call(p),window.clearInterval(p.timeInterval)),m++,m>=y&&((tt=p.onLayoutEnd)===null||tt===void 0||tt.call(p),window.clearInterval(p.timeInterval))}},0)}},E.prototype.reachMoveThreshold=function(x,p,y){var g=0;return x.forEach(function(A,_){var S=A.x-p[_].x,O=A.y-p[_].y;g+=Math.sqrt(S*S+O*O)}),g/=x.length,g<y},E.prototype.runOneStep=function(x){var p,y=this,g=y.nodes,A=y.edges,_=[],S=[];if(g){g.forEach(function(m,d){_[2*d]=0,_[2*d+1]=0,S[2*d]=0,S[2*d+1]=0}),y.calRepulsive(_,g),A&&y.calAttractive(_,A),y.calGravity(_,g);var O=Math.max(.02,y.interval-x*.002);y.updateVelocity(_,S,O,g);var B=[];return g.forEach(function(m){B.push({x:m.x,y:m.y})}),y.updatePosition(S,O,g),(p=y.tick)===null||p===void 0||p.call(y),B}},E.prototype.calRepulsive=function(x,p){var y=this,g=y.getMass,A=y.factor,_=y.coulombDisScale,S=y.preventOverlap,O=y.collideStrength,B=O===void 0?1:O,m=y.nodeStrength,d=y.nodeSize;p.forEach(function(tt,Y){var V=g?g(tt):1;p.forEach(function($,q){if(!(Y>=q)){var rt=tt.x-$.x,Q=tt.y-$.y;rt===0&&Q===0&&(rt=Math.random()*.01,Q=Math.random()*.01);var it=rt*rt+Q*Q,ht=Math.sqrt(it),dt=(ht+.1)*_,Ot=rt/ht,It=Q/ht,Kt=(m(tt)+m($))*.5*A/(dt*dt),Ft=g?g($):1;if(x[2*Y]+=Ot*Kt,x[2*Y+1]+=It*Kt,x[2*q]-=Ot*Kt,x[2*q+1]-=It*Kt,S&&(d(tt)+d($))/2>ht){var Nt=B*(m(tt)+m($))*.5/it;x[2*Y]+=Ot*Nt/V,x[2*Y+1]+=It*Nt/V,x[2*q]-=Ot*Nt/Ft,x[2*q+1]-=It*Nt/Ft}}})})},E.prototype.calAttractive=function(x,p){var y=this,g=y.nodeMap,A=y.nodeIdxMap,_=y.linkDistance,S=y.edgeStrength,O=y.nodeSize,B=y.getMass;p.forEach(function(m,d){var tt=(0,R.getEdgeTerminal)(m,"source"),Y=(0,R.getEdgeTerminal)(m,"target"),V=g[tt],$=g[Y],q=$.x-V.x,rt=$.y-V.y;q===0&&rt===0&&(q=Math.random()*.01,rt=Math.random()*.01);var Q=Math.sqrt(q*q+rt*rt),it=q/Q,ht=rt/Q,dt=_(m,V,$)||1+(O(V)+O($)||0)/2,Ot=dt-Q,It=Ot*S(m),Kt=A[tt],Ft=A[Y],Nt=B?B(V):1,st=B?B($):1;x[2*Kt]-=it*It/Nt,x[2*Kt+1]-=ht*It/Nt,x[2*Ft]+=it*It/st,x[2*Ft+1]+=ht*It/st})},E.prototype.calGravity=function(x,p){for(var y=this,g=y.center,A=y.gravity,_=y.degrees,S=p.length,O=0;O<S;O++){var B=p[O],m=B.x-g[0],d=B.y-g[1],tt=A;if(y.getCenter){var Y=y.getCenter(B,_[O].all);Y&&(0,R.isNumber)(Y[0])&&(0,R.isNumber)(Y[1])&&(0,R.isNumber)(Y[2])&&(m=B.x-Y[0],d=B.y-Y[1],tt=Y[2])}tt&&(x[2*O]-=tt*m,x[2*O+1]-=tt*d)}},E.prototype.updateVelocity=function(x,p,y,g){var A=this,_=y*A.damping;g.forEach(function(S,O){var B=x[2*O]*_||.01,m=x[2*O+1]*_||.01,d=Math.sqrt(B*B+m*m);if(d>A.maxSpeed){var tt=A.maxSpeed/d;B=tt*B,m=tt*m}p[2*O]=B,p[2*O+1]=m})},E.prototype.updatePosition=function(x,p,y){y.forEach(function(g,A){if((0,R.isNumber)(g.fx)&&(0,R.isNumber)(g.fy)){g.x=g.fx,g.y=g.fy;return}var _=x[2*A]*p,S=x[2*A+1]*p;g.x+=_,g.y+=S})},E.prototype.stop=function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)},E.prototype.destroy=function(){var x=this;x.stop(),x.tick=null,x.nodes=null,x.edges=null,x.destroyed=!0},E.prototype.getType=function(){return"gForce"},E}(X.Base);F.GForceLayout=P},687745:function(He,F,z){"use strict";var G=this&&this.__extends||function(){var g=function(A,_){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,O){S.__proto__=O}||function(S,O){for(var B in O)Object.prototype.hasOwnProperty.call(O,B)&&(S[B]=O[B])},g(A,_)};return function(A,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");g(A,_);function S(){this.constructor=A}A.prototype=_===null?Object.create(_):(S.prototype=_.prototype,new S)}}(),X=this&&this.__awaiter||function(g,A,_,S){function O(B){return B instanceof _?B:new _(function(m){m(B)})}return new(_||(_=Promise))(function(B,m){function d(V){try{Y(S.next(V))}catch($){m($)}}function tt(V){try{Y(S.throw(V))}catch($){m($)}}function Y(V){V.done?B(V.value):O(V.value).then(d,tt)}Y((S=S.apply(g,A||[])).next())})},R=this&&this.__generator||function(g,A){var _={label:0,sent:function(){if(B[0]&1)throw B[1];return B[1]},trys:[],ops:[]},S,O,B,m;return m={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(m[Symbol.iterator]=function(){return this}),m;function d(Y){return function(V){return tt([Y,V])}}function tt(Y){if(S)throw new TypeError("Generator is already executing.");for(;m&&(m=0,Y[0]&&(_=0)),_;)try{if(S=1,O&&(B=Y[0]&2?O.return:Y[0]?O.throw||((B=O.return)&&B.call(O),0):O.next)&&!(B=B.call(O,Y[1])).done)return B;switch(O=0,B&&(Y=[Y[0]&2,B.value]),Y[0]){case 0:case 1:B=Y;break;case 4:return _.label++,{value:Y[1],done:!1};case 5:_.label++,O=Y[1],Y=[0];continue;case 7:Y=_.ops.pop(),_.trys.pop();continue;default:if(B=_.trys,!(B=B.length>0&&B[B.length-1])&&(Y[0]===6||Y[0]===2)){_=0;continue}if(Y[0]===3&&(!B||Y[1]>B[0]&&Y[1]<B[3])){_.label=Y[1];break}if(Y[0]===6&&_.label<B[1]){_.label=B[1],B=Y;break}if(B&&_.label<B[2]){_.label=B[2],_.ops.push(Y);break}B[2]&&_.ops.pop(),_.trys.pop();continue}Y=A.call(g,_)}catch(V){Y=[6,V],O=0}finally{S=B=0}if(Y[0]&5)throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}};Object.defineProperty(F,"__esModule",{value:!0}),F.FruchtermanGPULayout=void 0;var L=z(762329),P=z(449784),N=z(901029),E=z(248835),x=z(108574),p=z(416470),y=function(g){G(A,g);function A(_){var S=g.call(this)||this;return S.maxIteration=1e3,S.gravity=10,S.speed=1,S.clustering=!1,S.clusterField="cluster",S.clusterGravity=10,S.workerEnabled=!1,S.nodes=[],S.edges=[],S.width=300,S.height=300,S.nodeMap={},S.nodeIdxMap={},S.updateCfg(_),S}return A.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}},A.prototype.execute=function(){return X(this,void 0,void 0,function(){var _,S,O,B,m,d=this;return R(this,function(tt){switch(tt.label){case 0:return _=this,S=_.nodes,!S||S.length===0?(_.onLayoutEnd&&_.onLayoutEnd(),[2]):(!_.width&&typeof window!="undefined"&&(_.width=window.innerWidth),!_.height&&typeof window!="undefined"&&(_.height=window.innerHeight),_.center||(_.center=[_.width/2,_.height/2]),O=_.center,S.length===1?(S[0].x=O[0],S[0].y=O[1],_.onLayoutEnd&&_.onLayoutEnd(),[2]):(B={},m={},S.forEach(function(Y,V){(0,P.isNumber)(Y.x)||(Y.x=Math.random()*d.width),(0,P.isNumber)(Y.y)||(Y.y=Math.random()*d.height),B[Y.id]=Y,m[Y.id]=V}),_.nodeMap=B,_.nodeIdxMap=m,[4,_.run()]));case 1:return tt.sent(),[2]}})})},A.prototype.executeWithWorker=function(_,S){return X(this,void 0,void 0,function(){var O,B,m,d,tt,Y=this;return R(this,function(V){switch(V.label){case 0:return O=this,B=O.nodes,m=O.center,!B||B.length===0?[2]:B.length===1?(B[0].x=m[0],B[0].y=m[1],[2]):(d={},tt={},B.forEach(function($,q){(0,P.isNumber)($.x)||($.x=Math.random()*Y.width),(0,P.isNumber)($.y)||($.y=Math.random()*Y.height),d[$.id]=$,tt[$.id]=q}),O.nodeMap=d,O.nodeIdxMap=tt,[4,O.run(_,S)]);case 1:return V.sent(),[2]}})})},A.prototype.run=function(_,S){return X(this,void 0,void 0,function(){var O,B,m,d,tt,Y,V,$,q,rt,Q,it,ht,dt,Ot,It,Kt,Ft,Nt,st,yt,kt,ee,$t,ge,Pe,er=this;return R(this,function(Jt){switch(Jt.label){case 0:for(O=this,B=O.nodes,m=O.edges,d=O.maxIteration,tt=O.center,Y=O.height*O.width,V=Math.sqrt(Y)/10,$=Y/(B.length+1),q=Math.sqrt($),rt=O.speed,Q=O.clustering,it=(0,E.attributesToTextureData)([O.clusterField],B),ht=it.array,dt=it.count,B.forEach(function(ae,Se){var xe=0,we=0;(0,P.isNumber)(ae.fx)&&(0,P.isNumber)(ae.fy)&&(xe=ae.fx||.001,we=ae.fy||.001),ht[4*Se+1]=xe,ht[4*Se+2]=we}),Ot=B.length,It=(0,E.buildTextureData)(B,m),Kt=It.maxEdgePerVetex,Ft=It.array,Nt=O.workerEnabled,Nt?st=N.World.create({canvas:_,engineOptions:{supportCompute:!0}}):st=N.World.create({engineOptions:{supportCompute:!0}}),yt=O.onLayoutEnd,kt=[],ee=0;ee<dt;ee++)kt.push(0,0,0,0);return $t=st.createKernel(x.fruchtermanBundle).setDispatch([Ot,1,1]).setBinding({u_Data:Ft,u_K:q,u_K2:$,u_Gravity:O.gravity,u_ClusterGravity:O.clusterGravity||O.gravity||1,u_Speed:rt,u_MaxDisplace:V,u_Clustering:Q?1:0,u_Center:tt,u_AttributeArray:ht,u_ClusterCenters:kt,MAX_EDGE_PER_VERTEX:Kt,VERTEX_COUNT:Ot}),Q&&(ge=st.createKernel(x.clusterBundle).setDispatch([dt,1,1]).setBinding({u_Data:Ft,u_NodeAttributes:ht,u_ClusterCenters:kt,VERTEX_COUNT:Ot,CLUSTER_COUNT:dt})),Pe=function(){return X(er,void 0,void 0,function(){var ae,Se;return R(this,function(xe){switch(xe.label){case 0:ae=0,xe.label=1;case 1:return ae<d?[4,$t.execute()]:[3,6];case 2:return xe.sent(),Q?(ge.setBinding({u_Data:$t}),[4,ge.execute()]):[3,4];case 3:xe.sent(),$t.setBinding({u_ClusterCenters:ge}),xe.label=4;case 4:$t.setBinding({u_MaxDisplace:V*=.99}),xe.label=5;case 5:return ae++,[3,1];case 6:return[4,$t.getOutput()];case 7:return Se=xe.sent(),_?S.postMessage({type:p.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:Se}):B.forEach(function(we,zt){var Wt=Se[4*zt],Ie=Se[4*zt+1];we.x=Wt,we.y=Ie}),yt&&yt(),[2]}})})},[4,Pe()];case 1:return Jt.sent(),[2]}})})},A.prototype.getType=function(){return"fruchterman-gpu"},A}(L.Base);F.FruchtermanGPULayout=y},108574:function(He,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.clusterBundle=F.clusterCode=F.fruchtermanBundle=F.fruchtermanCode=void 0,F.fruchtermanCode=`
import { globalInvocationID } from 'g-webgpu';
const MAX_EDGE_PER_VERTEX;
const VERTEX_COUNT;
@numthreads(1, 1, 1)
class Fruchterman {
  @in @out
  u_Data: vec4[];
  @in
  u_K: float;
  @in
  u_K2: float;
  
  @in
  u_Center: vec2;
  @in
  u_Gravity: float;
  @in
  u_ClusterGravity: float;
  @in
  u_Speed: float;
  @in
  u_MaxDisplace: float;
  @in
  u_Clustering: float;
  @in
  u_AttributeArray: vec4[];
  @in
  u_ClusterCenters: vec4[];
  calcRepulsive(i: int, currentNode: vec4): vec2 {
    let dx = 0, dy = 0;
    for (let j = 0; j < VERTEX_COUNT; j++) {
      if (i != j) {
        const nextNode = this.u_Data[j];
        const xDist = currentNode[0] - nextNode[0];
        const yDist = currentNode[1] - nextNode[1];
        const dist = (xDist * xDist + yDist * yDist) + 0.01;
        let param = this.u_K2 / dist;
        
        if (dist > 0.0) {
          dx += param * xDist;
          dy += param * yDist;
          if (xDist == 0 && yDist == 0) {
            const sign = i < j ? 1 : -1;
            dx += param * sign;
            dy += param * sign;
          }
        }
      }
    }
    return [dx, dy];
  }
  calcGravity(currentNode: vec4, nodeAttributes: vec4): vec2 { // 
    let dx = 0, dy = 0;
    const vx = currentNode[0] - this.u_Center[0];
    const vy = currentNode[1] - this.u_Center[1];
    const gf = 0.01 * this.u_K * this.u_Gravity;
    dx = gf * vx;
    dy = gf * vy;
    if (this.u_Clustering == 1) {
      const clusterIdx = int(nodeAttributes[0]);
      const center = this.u_ClusterCenters[clusterIdx];
      const cvx = currentNode[0] - center[0];
      const cvy = currentNode[1] - center[1];
      const dist = sqrt(cvx * cvx + cvy * cvy) + 0.01;
      const parma = this.u_K * this.u_ClusterGravity / dist;
      dx += parma * cvx;
      dy += parma * cvy;
    }
    return [dx, dy];
  }
  calcAttractive(i: int, currentNode: vec4): vec2 {
    let dx = 0, dy = 0;
    const arr_offset = int(floor(currentNode[2] + 0.5));
    const length = int(floor(currentNode[3] + 0.5));
    const node_buffer: vec4;
    for (let p = 0; p < MAX_EDGE_PER_VERTEX; p++) {
      if (p >= length) break;
      const arr_idx = arr_offset + p;
      // when arr_idx % 4 == 0 update currentNodedx_buffer
      const buf_offset = arr_idx - arr_idx / 4 * 4;
      if (p == 0 || buf_offset == 0) {
        node_buffer = this.u_Data[int(arr_idx / 4)];
      }
      const float_j = buf_offset == 0 ? node_buffer[0] :
                      buf_offset == 1 ? node_buffer[1] :
                      buf_offset == 2 ? node_buffer[2] :
                                        node_buffer[3];
      const nextNode = this.u_Data[int(float_j)];
      const xDist = currentNode[0] - nextNode[0];
      const yDist = currentNode[1] - nextNode[1];
      const dist = sqrt(xDist * xDist + yDist * yDist) + 0.01;
      let attractiveF = dist / this.u_K;
    
      if (dist > 0.0) {
        dx -= xDist * attractiveF;
        dy -= yDist * attractiveF;
        if (xDist == 0 && yDist == 0) {
          const sign = i < int(float_j) ? 1 : -1;
          dx -= sign * attractiveF;
          dy -= sign * attractiveF;
        }
      }
    }
    return [dx, dy];
  }
  @main
  compute() {
    const i = globalInvocationID.x;
    const currentNode = this.u_Data[i];
    let dx = 0, dy = 0;
    if (i >= VERTEX_COUNT) {
      this.u_Data[i] = currentNode;
      return;
    }

    // [gravity, fx, fy, 0]
    const nodeAttributes = this.u_AttributeArray[i];

    if (nodeAttributes[1] != 0 && nodeAttributes[2] != 0) {
      // the node is fixed
      this.u_Data[i] = [
        nodeAttributes[1],
        nodeAttributes[2],
        currentNode[2],
        currentNode[3]
      ];
      return;
    }

    // repulsive
    const repulsive = this.calcRepulsive(i, currentNode);
    dx += repulsive[0];
    dy += repulsive[1];
    // attractive
    const attractive = this.calcAttractive(i, currentNode);
    dx += attractive[0];
    dy += attractive[1];
    // gravity
    const gravity = this.calcGravity(currentNode, nodeAttributes);
    dx -= gravity[0];
    dy -= gravity[1];
    // speed
    dx *= this.u_Speed;
    dy *= this.u_Speed;

    // move
    const distLength = sqrt(dx * dx + dy * dy);
    if (distLength > 0.0) {
      const limitedDist = min(this.u_MaxDisplace * this.u_Speed, distLength);
      this.u_Data[i] = [
        currentNode[0] + dx / distLength * limitedDist,
        currentNode[1] + dy / distLength * limitedDist,
        currentNode[2],
        currentNode[3]
      ];
    }
  }
}
`,F.fruchtermanBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w));\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',F.clusterCode=`
import { globalInvocationID } from 'g-webgpu';
const VERTEX_COUNT;
const CLUSTER_COUNT;
@numthreads(1, 1, 1)
class CalcCenter {
  @in
  u_Data: vec4[];
  @in
  u_NodeAttributes: vec4[]; // [[clusterIdx, 0, 0, 0], ...]
  @in @out
  u_ClusterCenters: vec4[]; // [[cx, cy, nodeCount, clusterIdx], ...]
  @main
  compute() {
    const i = globalInvocationID.x;
    const center = this.u_ClusterCenters[i];
    let sumx = 0;
    let sumy = 0;
    let count = 0;
    for (let j = 0; j < VERTEX_COUNT; j++) {
      const attributes = this.u_NodeAttributes[j];
      const clusterIdx = int(attributes[0]);
      const vertex = this.u_Data[j];
      if (clusterIdx == i) {
        sumx += vertex.x;
        sumy += vertex.y;
        count += 1;
      }
    }
    this.u_ClusterCenters[i] = [
      sumx / count,
      sumy / count,
      count,
      i
    ];
  }
}
`,F.clusterBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}'},785194:function(He,F,z){"use strict";var G=this&&this.__extends||function(){var A=function(_,S){return A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,B){O.__proto__=B}||function(O,B){for(var m in B)Object.prototype.hasOwnProperty.call(B,m)&&(O[m]=B[m])},A(_,S)};return function(_,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");A(_,S);function O(){this.constructor=_}_.prototype=S===null?Object.create(S):(O.prototype=S.prototype,new O)}}(),X=this&&this.__awaiter||function(A,_,S,O){function B(m){return m instanceof S?m:new S(function(d){d(m)})}return new(S||(S=Promise))(function(m,d){function tt($){try{V(O.next($))}catch(q){d(q)}}function Y($){try{V(O.throw($))}catch(q){d(q)}}function V($){$.done?m($.value):B($.value).then(tt,Y)}V((O=O.apply(A,_||[])).next())})},R=this&&this.__generator||function(A,_){var S={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},O,B,m,d;return d={next:tt(0),throw:tt(1),return:tt(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function tt(V){return function($){return Y([V,$])}}function Y(V){if(O)throw new TypeError("Generator is already executing.");for(;d&&(d=0,V[0]&&(S=0)),S;)try{if(O=1,B&&(m=V[0]&2?B.return:V[0]?B.throw||((m=B.return)&&m.call(B),0):B.next)&&!(m=m.call(B,V[1])).done)return m;switch(B=0,m&&(V=[V[0]&2,m.value]),V[0]){case 0:case 1:m=V;break;case 4:return S.label++,{value:V[1],done:!1};case 5:S.label++,B=V[1],V=[0];continue;case 7:V=S.ops.pop(),S.trys.pop();continue;default:if(m=S.trys,!(m=m.length>0&&m[m.length-1])&&(V[0]===6||V[0]===2)){S=0;continue}if(V[0]===3&&(!m||V[1]>m[0]&&V[1]<m[3])){S.label=V[1];break}if(V[0]===6&&S.label<m[1]){S.label=m[1],m=V;break}if(m&&S.label<m[2]){S.label=m[2],S.ops.push(V);break}m[2]&&S.ops.pop(),S.trys.pop();continue}V=_.call(A,S)}catch($){V=[6,$],B=0}finally{O=m=0}if(V[0]&5)throw V[1];return{value:V[0]?V[1]:void 0,done:!0}}};Object.defineProperty(F,"__esModule",{value:!0}),F.GForceGPULayout=void 0;var L=z(762329),P=z(449784),N=z(901029),E=z(248835),x=z(280628),p=z(549762),y=z(416470),g=function(A){G(_,A);function _(S){var O=A.call(this)||this;return O.maxIteration=1e3,O.edgeStrength=200,O.nodeStrength=1e3,O.coulombDisScale=.005,O.damping=.9,O.maxSpeed=1e3,O.minMovement=.5,O.interval=.02,O.factor=1,O.linkDistance=1,O.gravity=10,O.workerEnabled=!1,O.nodes=[],O.edges=[],O.width=300,O.height=300,O.nodeMap={},O.nodeIdxMap={},O.updateCfg(S),O}return _.prototype.getDefaultCfg=function(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}},_.prototype.execute=function(){return X(this,void 0,void 0,function(){var S,O,B,m,d;return R(this,function(tt){switch(tt.label){case 0:return S=this,O=S.nodes,!O||O.length===0?(S.onLayoutEnd&&S.onLayoutEnd(),[2]):(!S.width&&typeof window!="undefined"&&(S.width=window.innerWidth),!S.height&&typeof window!="undefined"&&(S.height=window.innerHeight),S.center||(S.center=[S.width/2,S.height/2]),B=S.center,O.length===1?(O[0].x=B[0],O[0].y=B[1],S.onLayoutEnd&&S.onLayoutEnd(),[2]):(m={},d={},O.forEach(function(Y,V){(0,P.isNumber)(Y.x)||(Y.x=Math.random()*S.width),(0,P.isNumber)(Y.y)||(Y.y=Math.random()*S.height),m[Y.id]=Y,d[Y.id]=V}),S.nodeMap=m,S.nodeIdxMap=d,S.nodeStrength=(0,E.proccessToFunc)(S.nodeStrength,1),S.edgeStrength=(0,E.proccessToFunc)(S.edgeStrength,1),[4,S.run()]));case 1:return tt.sent(),[2]}})})},_.prototype.executeWithWorker=function(S,O){var B=this,m=B.nodes,d=B.center;if(!(!m||m.length===0)){if(m.length===1){m[0].x=d[0],m[0].y=d[1];return}var tt={},Y={};m.forEach(function(V,$){(0,P.isNumber)(V.x)||(V.x=Math.random()*B.width),(0,P.isNumber)(V.y)||(V.y=Math.random()*B.height),tt[V.id]=V,Y[V.id]=$}),B.nodeMap=tt,B.nodeIdxMap=Y,B.nodeStrength=(0,E.proccessToFunc)(B.nodeStrength,1),B.edgeStrength=(0,E.proccessToFunc)(B.edgeStrength,1),B.run(S,O)}},_.prototype.run=function(S,O){return X(this,void 0,void 0,function(){var B,m,d,tt,Y,V,$,q,rt,Q,it,ht,dt,Ot,It,Kt,Ft,Nt,st,yt,kt,ee,$t,ge,Pe,er,Jt,ae=this;return R(this,function(Se){switch(Se.label){case 0:for(B=this,m=B.nodes,d=B.edges,tt=B.maxIteration,!B.width&&typeof window!="undefined"&&(B.width=window.innerWidth),!B.height&&typeof window!="undefined"&&(B.height=window.innerHeight),Y=m.length,B.linkDistance=(0,E.proccessToFunc)(B.linkDistance),B.edgeStrength=(0,E.proccessToFunc)(B.edgeStrength),V=(0,E.buildTextureDataWithTwoEdgeAttr)(m,d,B.linkDistance,B.edgeStrength),$=V.maxEdgePerVetex,q=V.array,B.degrees=(0,x.getDegree)(m.length,B.nodeIdxMap,d).map(function(xe){return xe.all}),rt=[],Q=[],it=[],ht=[],dt=[],Ot=[],It=[],B.getMass||(B.getMass=function(xe){return B.degrees[B.nodeIdxMap[xe.id]]||1}),Kt=B.gravity,Ft=B.center,m.forEach(function(xe,we){rt.push(B.getMass(xe)),Q.push(B.nodeStrength(xe)),B.degrees[we]||(B.degrees[we]=0);var zt=[Ft[0],Ft[1],Kt];if(B.getCenter){var Wt=B.getCenter(xe,B.degrees[we]);Wt&&(0,P.isNumber)(Wt[0])&&(0,P.isNumber)(Wt[1])&&(0,P.isNumber)(Wt[2])&&(zt=Wt)}it.push(zt[0]),ht.push(zt[1]),dt.push(zt[2]),(0,P.isNumber)(xe.fx)&&(0,P.isNumber)(xe.fy)?(Ot.push(xe.fx||.001),It.push(xe.fy||.001)):(Ot.push(0),It.push(0))}),Nt=(0,E.arrayToTextureData)([rt,B.degrees,Q,Ot]),st=(0,E.arrayToTextureData)([it,ht,dt,It]),yt=B.workerEnabled,yt?kt=N.World.create({canvas:S,engineOptions:{supportCompute:!0}}):kt=N.World.create({engineOptions:{supportCompute:!0}}),ee=B.onLayoutEnd,$t=[],q.forEach(function(xe){$t.push(xe)}),ge=0;ge<4;ge++)$t.push(0);return Pe=kt.createKernel(p.gForceBundle).setDispatch([Y,1,1]).setBinding({u_Data:q,u_damping:B.damping,u_maxSpeed:B.maxSpeed,u_minMovement:B.minMovement,u_coulombDisScale:B.coulombDisScale,u_factor:B.factor,u_NodeAttributeArray1:Nt,u_NodeAttributeArray2:st,MAX_EDGE_PER_VERTEX:$,VERTEX_COUNT:Y,u_AveMovement:$t,u_interval:B.interval}),er=kt.createKernel(p.aveMovementBundle).setDispatch([1,1,1]).setBinding({u_Data:q,VERTEX_COUNT:Y,u_AveMovement:[0,0,0,0]}),Jt=function(){return X(ae,void 0,void 0,function(){var xe,we,zt;return R(this,function(Wt){switch(Wt.label){case 0:xe=0,Wt.label=1;case 1:return xe<tt?[4,Pe.execute()]:[3,5];case 2:return Wt.sent(),er.setBinding({u_Data:Pe}),[4,er.execute()];case 3:Wt.sent(),we=Math.max(.02,B.interval-xe*.002),Pe.setBinding({u_interval:we,u_AveMovement:er}),Wt.label=4;case 4:return xe++,[3,1];case 5:return[4,Pe.getOutput()];case 6:return zt=Wt.sent(),S?O.postMessage({type:y.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:zt}):m.forEach(function(Ie,Yt){var ie=zt[4*Yt],Oe=zt[4*Yt+1];Ie.x=ie,Ie.y=Oe}),ee&&ee(),[2]}})})},[4,Jt()];case 1:return Se.sent(),[2]}})})},_.prototype.getType=function(){return"gForce-gpu"},_}(L.Base);F.GForceGPULayout=g},549762:function(He,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.aveMovementBundle=F.aveMovementCode=F.gForceBundle=F.gForceCode=void 0,F.gForceCode=`
import { globalInvocationID } from 'g-webgpu';

const MAX_EDGE_PER_VERTEX;
const VERTEX_COUNT;
const SHIFT_20 = 1048576;

@numthreads(1, 1, 1)
class GGForce {
  @in @out
  u_Data: vec4[];

  @in
  u_damping: float;
  
  @in
  u_maxSpeed: float;

  @in
  u_minMovement: float;

  @in
  u_AveMovement: vec4[];

  @in
  u_coulombDisScale: float;

  @in
  u_factor: float;

  @in
  u_NodeAttributeArray1: vec4[];

  @in
  u_NodeAttributeArray2: vec4[];

  @in
  u_interval: float;

  unpack_float(packedValue: float): ivec2 {
    const packedIntValue = int(packedValue);
    const v0 = packedIntValue / SHIFT_20;
    return [v0, packedIntValue - v0 * SHIFT_20];
  }

  calcRepulsive(i: int, currentNode: vec4): vec2 {
    let ax = 0, ay = 0;
    for (let j: int = 0; j < VERTEX_COUNT; j++) {
      if (i != j) {
        const nextNode = this.u_Data[j];
        const vx = currentNode[0] - nextNode[0];
        const vy = currentNode[1] - nextNode[1];
        const dist = sqrt(vx * vx + vy * vy) + 0.01;
        const n_dist = (dist + 0.1) * this.u_coulombDisScale;
        const direx = vx / dist;
        const direy = vy / dist;
        const attributesi = this.u_NodeAttributeArray1[i];
        const attributesj = this.u_NodeAttributeArray1[j];
        const massi = attributesi[0];
        const nodeStrengthi = attributesi[2];
        const nodeStrengthj = attributesj[2];
        const nodeStrength = (nodeStrengthi + nodeStrengthj) / 2;
        // const param = nodeStrength * this.u_factor / (n_dist * n_dist * massi);
        const param = nodeStrength * this.u_factor / (n_dist * n_dist);
        ax += direx * param;
        ay += direy * param;
      }
    }
    return [ax, ay];
  }

  calcGravity(i: int, currentNode: vec4, attributes2: vec4): vec2 {
    // note: attributes2 = [centerX, centerY, gravity, 0]

    const vx = currentNode[0] - attributes2[0];
    const vy = currentNode[1] - attributes2[1];
    
    const ax = vx * attributes2[2];
    const ay = vy * attributes2[2];
    
    return [ax, ay];
  }

  calcAttractive(i: int, currentNode: vec4, attributes1: vec4): vec2 {
    // note: attributes1 = [mass, degree, nodeSterngth, 0]

    const mass = attributes1[0];
    let ax = 0, ay = 0;
    // const arr_offset = int(floor(currentNode[2] + 0.5));
    // const length = int(floor(currentNode[3] + 0.5));

    const compressed = this.unpack_float(currentNode[2]);
    const length = compressed[0];
    const arr_offset = compressed[1];

    const node_buffer: vec4;
    for (let p: int = 0; p < MAX_EDGE_PER_VERTEX; p++) {
      if (p >= length) break;
      const arr_idx = arr_offset + 4 * p; // i \u8282\u70B9\u7684\u7B2C p \u6761\u8FB9\u5F00\u59CB\u7684\u5C0F\u683C\u5B50\u4F4D\u7F6E
      const buf_offset = arr_idx - arr_idx / 4 * 4;
      if (p == 0 || buf_offset == 0) {
        node_buffer = this.u_Data[int(arr_idx / 4)]; // \u5927\u683C\u5B50\uFF0C\u5927\u683C\u5B50\u4F4D\u7F6E=\u5C0F\u4E2A\u5B50\u4F4D\u7F6E / 4\uFF0C
      }

      let float_j: float = node_buffer[0];

      const nextNode = this.u_Data[int(float_j)];
      const vx = nextNode[0] - currentNode[0];
      const vy = nextNode[1] - currentNode[1];
      const dist = sqrt(vx * vx + vy * vy) + 0.01;
      const direx = vx / dist;
      const direy = vy / dist;
      const edgeLength = node_buffer[1];
      const edgeStrength = node_buffer[2];
      const diff: float = edgeLength - dist;//edgeLength
      // const param = diff * this.u_stiffness / mass; //
      const param = diff * edgeStrength / mass; // 
      ax -= direx * param;
      ay -= direy * param;
    }
    return [ax, ay];
  }

  @main
  compute() {
    const i = globalInvocationID.x;
    const currentNode = this.u_Data[i];
    const movement = u_AveMovement[0];
    let ax = 0, ay = 0;

    if (i >= VERTEX_COUNT || movement.x < u_minMovement) {
      this.u_Data[i] = currentNode;
      return;
    }

    // \u6BCF\u4E2A\u8282\u70B9\u5C5E\u6027\u5360\u4E24\u4E2A\u6570\u7EC4\u4E2D\u5404\u4E00\u683C
    // [mass, degree, nodeStrength, fx]
    const nodeAttributes1 = this.u_NodeAttributeArray1[i];
    // [centerX, centerY, centerGravity, fy]
    const nodeAttributes2 = this.u_NodeAttributeArray2[i];

    // repulsive
    const repulsive = this.calcRepulsive(i, currentNode);
    ax += repulsive[0];
    ay += repulsive[1];

    // attractive
    const attractive = this.calcAttractive(i, currentNode, nodeAttributes1);
    ax += attractive[0];
    ay += attractive[1];

    // gravity
    const gravity = this.calcGravity(i, currentNode, nodeAttributes2);
    ax -= gravity[0];
    ay -= gravity[1];

    // speed
    const param = this.u_interval * this.u_damping;
    let vx = ax * param;
    let vy = ay * param;
    const vlength = sqrt(vx * vx + vy * vy) + 0.0001;
    if (vlength > this.u_maxSpeed) {
      const param2 = this.u_maxSpeed / vlength;
      vx = param2 * vx;
      vy = param2 * vy;
    }

    // move
    if (nodeAttributes1[3] != 0 && nodeAttributes2[3] != 0) {
      this.u_Data[i] = [
        nodeAttributes1[3],
        nodeAttributes2[3],
        currentNode[2],
        0
      ];
    } else {
      const distx = vx * this.u_interval;
      const disty = vy * this.u_interval;
      const distLength = sqrt(distx * distx + disty * disty);
      this.u_Data[i] = [
        currentNode[0] + distx,
        currentNode[1] + disty,
        currentNode[2],
        distLength
      ];
    }
    
    // the avarage move distance
    // need to share memory
    
  }
}
`,F.gForceBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0));}else {float distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\ngl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',F.aveMovementCode=`
const VERTEX_COUNT;
@numthreads(1, 1, 1)
class CalcAveMovement {
  @in
  u_Data: vec4[];
  @in
  u_iter: float;
  @in @out
  u_AveMovement: vec4[];
  @main
  compute() {
    let movement = 0;
    for (let j: int = 0; j < VERTEX_COUNT; j++) {
      const vertex = this.u_Data[j];
      movement += vertex[3];
    }
    movement = movement / float(VERTEX_COUNT);
    this.u_AveMovement[0] = [movement, 0, 0, 0];
  }
}
`,F.aveMovementBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}'},694414:function(He,F,z){"use strict";var G=this&&this.__extends||function(){var P=function(N,E){return P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,p){x.__proto__=p}||function(x,p){for(var y in p)Object.prototype.hasOwnProperty.call(p,y)&&(x[y]=p[y])},P(N,E)};return function(N,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");P(N,E);function x(){this.constructor=N}N.prototype=E===null?Object.create(E):(x.prototype=E.prototype,new x)}}();Object.defineProperty(F,"__esModule",{value:!0}),F.GridLayout=void 0;var X=z(449784),R=z(762329),L=function(P){G(N,P);function N(E){var x=P.call(this)||this;return x.begin=[0,0],x.preventOverlap=!0,x.preventOverlapPadding=10,x.condense=!1,x.sortBy="degree",x.nodes=[],x.edges=[],x.width=300,x.height=300,x.row=0,x.col=0,x.cellWidth=0,x.cellHeight=0,x.cellUsed={},x.id2manPos={},x.onLayoutEnd=function(){},x.updateCfg(E),x}return N.prototype.getDefaultCfg=function(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}},N.prototype.execute=function(){var E=this,x=E.nodes,p=E.edges,y=E.begin,g=x.length;if(g===0)return E.onLayoutEnd&&E.onLayoutEnd(),{nodes:x,edges:p};if(g===1)return x[0].x=y[0],x[0].y=y[1],E.onLayoutEnd&&E.onLayoutEnd(),{nodes:x,edges:p};var A=E.sortBy,_=E.width,S=E.height,O=E.condense,B=E.preventOverlapPadding,m=E.preventOverlap,d=E.nodeSpacing,tt=E.nodeSize,Y=[];x.forEach(function(Nt){Y.push(Nt)});var V={};if(Y.forEach(function(Nt,st){V[Nt.id]=st}),(A==="degree"||!(0,X.isString)(A)||Y[0][A]===void 0)&&(A="degree",(0,X.isNaN)(x[0].degree))){var $=(0,X.getDegree)(Y.length,V,p);Y.forEach(function(Nt,st){Nt.degree=$[st].all})}Y.sort(function(Nt,st){return st[A]-Nt[A]}),!_&&typeof window!="undefined"&&(_=window.innerWidth),!S&&typeof window!="undefined"&&(S=window.innerHeight);var q=E.rows,rt=E.cols!=null?E.cols:E.columns;if(E.cells=g,q!=null&&rt!=null?(E.rows=q,E.cols=rt):q!=null&&rt==null?(E.rows=q,E.cols=Math.ceil(E.cells/E.rows)):q==null&&rt!=null?(E.cols=rt,E.rows=Math.ceil(E.cells/E.cols)):(E.splits=Math.sqrt(E.cells*E.height/E.width),E.rows=Math.round(E.splits),E.cols=Math.round(E.width/E.height*E.splits)),E.rows=Math.max(E.rows,1),E.cols=Math.max(E.cols,1),E.cols*E.rows>E.cells){var Q=E.small(),it=E.large();(Q-1)*it>=E.cells?E.small(Q-1):(it-1)*Q>=E.cells&&E.large(it-1)}else for(;E.cols*E.rows<E.cells;){var Q=E.small(),it=E.large();(it+1)*Q>=E.cells?E.large(it+1):E.small(Q+1)}if(E.cellWidth=_/E.cols,E.cellHeight=S/E.rows,O&&(E.cellWidth=0,E.cellHeight=0),m||d){var ht=(0,X.getFuncByUnknownType)(10,d),dt=(0,X.getFuncByUnknownType)(30,tt,!1);Y.forEach(function(Nt){(!Nt.x||!Nt.y)&&(Nt.x=0,Nt.y=0);var st=dt(Nt)||30,yt,kt;(0,X.isArray)(st)?(yt=st[0],kt=st[1]):(yt=st,kt=st);var ee=ht!==void 0?ht(Nt):B,$t=yt+ee,ge=kt+ee;E.cellWidth=Math.max(E.cellWidth,$t),E.cellHeight=Math.max(E.cellHeight,ge)})}E.cellUsed={},E.row=0,E.col=0,E.id2manPos={};for(var Ot=0;Ot<Y.length;Ot++){var It=Y[Ot],Kt=void 0;if(E.position&&(Kt=E.position(It)),Kt&&(Kt.row!==void 0||Kt.col!==void 0)){var Ft={row:Kt.row,col:Kt.col};if(Ft.col===void 0)for(Ft.col=0;E.used(Ft.row,Ft.col);)Ft.col++;else if(Ft.row===void 0)for(Ft.row=0;E.used(Ft.row,Ft.col);)Ft.row++;E.id2manPos[It.id]=Ft,E.use(Ft.row,Ft.col)}E.getPos(It)}return E.onLayoutEnd&&E.onLayoutEnd(),{edges:p,nodes:Y}},N.prototype.small=function(E){var x=this,p,y=x.rows||5,g=x.cols||5;if(E==null)p=Math.min(y,g);else{var A=Math.min(y,g);A===x.rows?x.rows=E:x.cols=E}return p},N.prototype.large=function(E){var x=this,p,y=x.rows||5,g=x.cols||5;if(E==null)p=Math.max(y,g);else{var A=Math.max(y,g);A===x.rows?x.rows=E:x.cols=E}return p},N.prototype.used=function(E,x){var p=this;return p.cellUsed["c-".concat(E,"-").concat(x)]||!1},N.prototype.use=function(E,x){var p=this;p.cellUsed["c-".concat(E,"-").concat(x)]=!0},N.prototype.moveToNextCell=function(){var E=this,x=E.cols||5;E.col++,E.col>=x&&(E.col=0,E.row++)},N.prototype.getPos=function(E){var x=this,p=x.begin,y=x.cellWidth,g=x.cellHeight,A,_,S=x.id2manPos[E.id];if(S)A=S.col*y+y/2+p[0],_=S.row*g+g/2+p[1];else{for(;x.used(x.row,x.col);)x.moveToNextCell();A=x.col*y+y/2+p[0],_=x.row*g+g/2+p[1],x.use(x.row,x.col),x.moveToNextCell()}E.x=A,E.y=_},N.prototype.getType=function(){return"grid"},N}(R.Base);F.GridLayout=L},702584:function(He,F,z){"use strict";var G=this&&this.__createBinding||(Object.create?function($,q,rt,Q){Q===void 0&&(Q=rt);var it=Object.getOwnPropertyDescriptor(q,rt);(!it||("get"in it?!q.__esModule:it.writable||it.configurable))&&(it={enumerable:!0,get:function(){return q[rt]}}),Object.defineProperty($,Q,it)}:function($,q,rt,Q){Q===void 0&&(Q=rt),$[Q]=q[rt]}),X=this&&this.__exportStar||function($,q){for(var rt in $)rt!=="default"&&!Object.prototype.hasOwnProperty.call(q,rt)&&G(q,$,rt)};Object.defineProperty(F,"__esModule",{value:!0}),F.ERLayout=F.ForceAtlas2Layout=F.ComboCombinedLayout=F.ComboForceLayout=F.GForceGPULayout=F.FruchtermanGPULayout=F.FruchtermanLayout=F.MDSLayout=F.ConcentricLayout=F.RadialLayout=F.DagreCompoundLayout=F.DagreLayout=F.CircularLayout=F.ForceLayout=F.Force2Layout=F.GForceLayout=F.RandomLayout=F.GridLayout=F.Layouts=F.Layout=void 0;var R=z(694414);Object.defineProperty(F,"GridLayout",{enumerable:!0,get:function(){return R.GridLayout}});var L=z(539711);Object.defineProperty(F,"RandomLayout",{enumerable:!0,get:function(){return L.RandomLayout}});var P=z(113653);Object.defineProperty(F,"GForceLayout",{enumerable:!0,get:function(){return P.GForceLayout}});var N=z(306740);Object.defineProperty(F,"Force2Layout",{enumerable:!0,get:function(){return N.Force2Layout}});var E=z(885717);Object.defineProperty(F,"ForceLayout",{enumerable:!0,get:function(){return E.ForceLayout}});var x=z(964885);Object.defineProperty(F,"CircularLayout",{enumerable:!0,get:function(){return x.CircularLayout}});var p=z(960844);Object.defineProperty(F,"DagreLayout",{enumerable:!0,get:function(){return p.DagreLayout}});var y=z(177057);Object.defineProperty(F,"DagreCompoundLayout",{enumerable:!0,get:function(){return y.DagreCompoundLayout}});var g=z(847944);Object.defineProperty(F,"RadialLayout",{enumerable:!0,get:function(){return g.RadialLayout}});var A=z(843281);Object.defineProperty(F,"ConcentricLayout",{enumerable:!0,get:function(){return A.ConcentricLayout}});var _=z(352899);Object.defineProperty(F,"MDSLayout",{enumerable:!0,get:function(){return _.MDSLayout}});var S=z(880374);Object.defineProperty(F,"FruchtermanLayout",{enumerable:!0,get:function(){return S.FruchtermanLayout}});var O=z(687745);Object.defineProperty(F,"FruchtermanGPULayout",{enumerable:!0,get:function(){return O.FruchtermanGPULayout}});var B=z(785194);Object.defineProperty(F,"GForceGPULayout",{enumerable:!0,get:function(){return B.GForceGPULayout}});var m=z(366590);Object.defineProperty(F,"ComboForceLayout",{enumerable:!0,get:function(){return m.ComboForceLayout}});var d=z(263861);Object.defineProperty(F,"ComboCombinedLayout",{enumerable:!0,get:function(){return d.ComboCombinedLayout}});var tt=z(148564);Object.defineProperty(F,"ForceAtlas2Layout",{enumerable:!0,get:function(){return tt.ForceAtlas2Layout}});var Y=z(290441);Object.defineProperty(F,"ERLayout",{enumerable:!0,get:function(){return Y.ERLayout}});var V=z(842875);Object.defineProperty(F,"Layout",{enumerable:!0,get:function(){return V.Layout}}),Object.defineProperty(F,"Layouts",{enumerable:!0,get:function(){return V.Layouts}}),X(z(932867),F)},842875:function(He,F,z){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.Layouts=F.Layout=void 0;var G=z(695326),X=z(694414),R=z(539711),L=z(306740),P=z(113653),N=z(885717),E=z(964885),x=z(960844),p=z(847944),y=z(843281),g=z(352899),A=z(880374),_=z(687745),S=z(785194),O=z(366590),B=z(263861),m=z(148564),d=z(290441),tt=z(177057),Y=z(449784),V=function(){function $(q){var rt=(0,G.getLayoutByName)(q.type);this.layoutInstance=new rt(q)}return $.prototype.layout=function(q){return this.layoutInstance.layout(q)},$.prototype.updateCfg=function(q){this.layoutInstance.updateCfg(q)},$.prototype.init=function(q){this.correctLayers(q.nodes),this.layoutInstance.init(q)},$.prototype.correctLayers=function(q){if(q!=null&&q.length){var rt=1/0,Q=[];if(q.forEach(function(ht){(0,Y.isString)(ht.layer)&&(ht.layer=parseInt(ht.layer,10)),!(ht.layer===void 0||isNaN(ht.layer))&&(Q.push(ht),ht.layer<rt&&(rt=ht.layer))}),rt<=0){var it=Math.abs(rt)+1;Q.forEach(function(ht){return ht.layer+=it})}}},$.prototype.execute=function(){this.layoutInstance.execute()},$.prototype.getDefaultCfg=function(){return this.layoutInstance.getDefaultCfg()},$.prototype.destroy=function(){return this.layoutInstance.destroy()},$}();F.Layout=V,F.Layouts={force:N.ForceLayout,fruchterman:A.FruchtermanLayout,forceAtlas2:m.ForceAtlas2Layout,gForce:P.GForceLayout,force2:L.Force2Layout,dagre:x.DagreLayout,dagreCompound:tt.DagreCompoundLayout,circular:E.CircularLayout,radial:p.RadialLayout,concentric:y.ConcentricLayout,grid:X.GridLayout,mds:g.MDSLayout,comboForce:O.ComboForceLayout,comboCombined:B.ComboCombinedLayout,random:R.RandomLayout,"gForce-gpu":S.GForceGPULayout,"fruchterman-gpu":_.FruchtermanGPULayout,er:d.ERLayout}},352899:function(He,F,z){"use strict";var G=this&&this.__extends||function(){var N=function(E,x){return N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,y){p.__proto__=y}||function(p,y){for(var g in y)Object.prototype.hasOwnProperty.call(y,g)&&(p[g]=y[g])},N(E,x)};return function(E,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");N(E,x);function p(){this.constructor=E}E.prototype=x===null?Object.create(x):(p.prototype=x.prototype,new p)}}();Object.defineProperty(F,"__esModule",{value:!0}),F.MDSLayout=void 0;var X=z(249612),R=z(449784),L=z(762329),P=function(N){G(E,N);function E(x){var p=N.call(this)||this;return p.center=[0,0],p.linkDistance=50,p.nodes=[],p.edges=[],p.onLayoutEnd=function(){},p.updateCfg(x),p}return E.prototype.getDefaultCfg=function(){return{center:[0,0],linkDistance:50}},E.prototype.execute=function(){var x=this,p=x.nodes,y=x.edges,g=y===void 0?[]:y,A=x.center;if(!p||p.length===0){x.onLayoutEnd&&x.onLayoutEnd();return}if(p.length===1){p[0].x=A[0],p[0].y=A[1],x.onLayoutEnd&&x.onLayoutEnd();return}var _=x.linkDistance,S=(0,R.getAdjMatrix)({nodes:p,edges:g},!1),O=(0,R.floydWarshall)(S);x.handleInfinity(O);var B=(0,R.scaleMatrix)(O,_);x.scaledDistances=B;var m=x.runMDS();return x.positions=m,m.forEach(function(d,tt){p[tt].x=d[0]+A[0],p[tt].y=d[1]+A[1]}),x.onLayoutEnd&&x.onLayoutEnd(),{nodes:p,edges:g}},E.prototype.runMDS=function(){var x=this,p=2,y=x.scaledDistances,g=X.Matrix.mul(X.Matrix.pow(y,2),-.5),A=g.mean("row"),_=g.mean("column"),S=g.mean();g.add(S).subRowVector(A).subColumnVector(_);var O=new X.SingularValueDecomposition(g),B=X.Matrix.sqrt(O.diagonalMatrix).diagonal();return O.leftSingularVectors.toJSON().map(function(m){return X.Matrix.mul([m],[B]).toJSON()[0].splice(0,p)})},E.prototype.handleInfinity=function(x){var p=-999999;x.forEach(function(y){y.forEach(function(g){g!==1/0&&p<g&&(p=g)})}),x.forEach(function(y,g){y.forEach(function(A,_){A===1/0&&(x[g][_]=p)})})},E.prototype.getType=function(){return"mds"},E}(L.Base);F.MDSLayout=P},847944:function(He,F,z){"use strict";var G=this&&this.__createBinding||(Object.create?function(R,L,P,N){N===void 0&&(N=P);var E=Object.getOwnPropertyDescriptor(L,P);(!E||("get"in E?!L.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return L[P]}}),Object.defineProperty(R,N,E)}:function(R,L,P,N){N===void 0&&(N=P),R[N]=L[P]}),X=this&&this.__exportStar||function(R,L){for(var P in R)P!=="default"&&!Object.prototype.hasOwnProperty.call(L,P)&&G(L,R,P)};Object.defineProperty(F,"__esModule",{value:!0}),X(z(255974),F)},366082:function(He,F,z){"use strict";Object.defineProperty(F,"__esModule",{value:!0});var G=z(249612),X=function(){function R(L){this.distances=L.distances,this.dimension=L.dimension||2,this.linkDistance=L.linkDistance}return R.prototype.layout=function(){var L=this,P=L.dimension,N=L.distances,E=L.linkDistance;try{var x=G.Matrix.mul(G.Matrix.pow(N,2),-.5),p=x.mean("row"),y=x.mean("column"),g=x.mean();x.add(g).subRowVector(p).subColumnVector(y);var A=new G.SingularValueDecomposition(x),_=G.Matrix.sqrt(A.diagonalMatrix).diagonal();return A.leftSingularVectors.toJSON().map(function(d){return G.Matrix.mul([d],[_]).toJSON()[0].splice(0,P)})}catch(d){for(var S=[],O=0;O<N.length;O++){var B=Math.random()*E,m=Math.random()*E;S.push([B,m])}return S}},R}();F.default=X},255974:function(He,F,z){"use strict";var G=this&&this.__extends||function(){var g=function(A,_){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,O){S.__proto__=O}||function(S,O){for(var B in O)Object.prototype.hasOwnProperty.call(O,B)&&(S[B]=O[B])},g(A,_)};return function(A,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");g(A,_);function S(){this.constructor=A}A.prototype=_===null?Object.create(_):(S.prototype=_.prototype,new S)}}(),X=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(F,"__esModule",{value:!0}),F.RadialLayout=void 0;var R=z(449784),L=z(762329),P=X(z(366082)),N=X(z(706290));function E(g){for(var A=g.length,_=g[0].length,S=[],O=0;O<A;O++){for(var B=[],m=0;m<_;m++)g[O][m]!==0?B.push(1/(g[O][m]*g[O][m])):B.push(0);S.push(B)}return S}function x(g,A){var _=-1;return g.forEach(function(S,O){S.id===A&&(_=O)}),_}function p(g,A){return Math.sqrt((g[0]-A[0])*(g[0]-A[0])+(g[1]-A[1])*(g[1]-A[1]))}var y=function(g){G(A,g);function A(_){var S=g.call(this)||this;return S.maxIteration=1e3,S.focusNode=null,S.unitRadius=null,S.linkDistance=50,S.preventOverlap=!1,S.strictRadial=!0,S.maxPreventOverlapIteration=200,S.sortStrength=10,S.nodes=[],S.edges=[],S.updateCfg(_),S}return A.prototype.getDefaultCfg=function(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10,initWithMDS:!0}},A.prototype.execute=function(){var _=this,S=_.nodes,O=_.edges||[];if(!S||S.length===0){_.onLayoutEnd&&_.onLayoutEnd();return}!_.width&&typeof window!="undefined"&&(_.width=window.innerWidth),!_.height&&typeof window!="undefined"&&(_.height=window.innerHeight),_.center||(_.center=[_.width/2,_.height/2]);var B=_.center;if(S.length===1){S[0].x=B[0],S[0].y=B[1],_.onLayoutEnd&&_.onLayoutEnd();return}var m=_.linkDistance,d=null;if((0,R.isString)(_.focusNode)){for(var tt=!1,Y=0;Y<S.length;Y++)S[Y].id===_.focusNode&&(d=S[Y],_.focusNode=d,tt=!0,Y=S.length);tt||(d=null)}else d=_.focusNode;d||(d=S[0],_.focusNode=d);var V=x(S,d.id);V<0&&(V=0),_.focusIndex=V;var $=(0,R.getAdjMatrix)({nodes:S,edges:O},!1),q=(0,R.floydWarshall)($),rt=_.maxToFocus(q,V);_.handleInfinity(q,V,rt+1),_.distances=q;var Q=q[V],it=_.width||500,ht=_.height||500,dt=it-B[0]>B[0]?B[0]:it-B[0],Ot=ht-B[1]>B[1]?B[1]:ht-B[1];dt===0&&(dt=it/2),Ot===0&&(Ot=ht/2);var It=Ot>dt?dt:Ot,Kt=Math.max.apply(Math,Q),Ft=[];Q.forEach(function(xe,we){_.unitRadius||(_.unitRadius=It/Kt),Ft[we]=xe*_.unitRadius}),_.radii=Ft;var Nt=_.eIdealDisMatrix();_.eIdealDistances=Nt;var st=E(Nt);if(_.weights=st,_.initWithMDS){var yt=new P.default({linkDistance:m,distances:Nt}),kt=yt.layout();kt.forEach(function(xe){(0,R.isNaN)(xe[0])&&(xe[0]=Math.random()*m),(0,R.isNaN)(xe[1])&&(xe[1]=Math.random()*m)}),_.positions=kt}else _.positions=S.map(function(xe,we){return[(Math.random()-.5)*Nt[we][V],(Math.random()-.5)*Nt[we][V]]});_.positions.forEach(function(xe,we){S[we].x=xe[0]+B[0],S[we].y=xe[1]+B[1]}),_.positions.forEach(function(xe){xe[0]-=_.positions[V][0],xe[1]-=_.positions[V][1]}),_.run();var ee=_.preventOverlap,$t=_.nodeSize,ge,Pe=_.strictRadial;if(ee){var er=_.nodeSpacing,Jt;(0,R.isNumber)(er)?Jt=function(){return er}:(0,R.isFunction)(er)?Jt=er:Jt=function(){return 0},$t?(0,R.isArray)($t)?ge=function(xe){var we=$t[0]>$t[1]?$t[0]:$t[1];return we+Jt(xe)}:ge=function(xe){return $t+Jt(xe)}:ge=function(xe){if(xe.size){if((0,R.isArray)(xe.size)){var we=xe.size[0]>xe.size[1]?xe.size[0]:xe.size[1];return we+Jt(xe)}if((0,R.isObject)(xe.size)){var we=xe.size.width>xe.size.height?xe.size.width:xe.size.height;return we+Jt(xe)}return xe.size+Jt(xe)}return 10+Jt(xe)};var ae={nodes:S,nodeSizeFunc:ge,adjMatrix:$,positions:_.positions,radii:Ft,height:ht,width:it,strictRadial:Pe,focusID:V,iterations:_.maxPreventOverlapIteration||200,k:_.positions.length/4.5},Se=new N.default(ae);_.positions=Se.layout()}return _.positions.forEach(function(xe,we){S[we].x=xe[0]+B[0],S[we].y=xe[1]+B[1]}),_.onLayoutEnd&&_.onLayoutEnd(),{nodes:S,edges:O}},A.prototype.run=function(){for(var _=this,S=_.maxIteration,O=_.positions||[],B=_.weights||[],m=_.eIdealDistances||[],d=_.radii||[],tt=0;tt<=S;tt++){var Y=tt/S;_.oneIteration(Y,O,d,m,B)}},A.prototype.oneIteration=function(_,S,O,B,m){var d=this,tt=1-_,Y=d.focusIndex;S.forEach(function(V,$){var q=p(V,[0,0]),rt=q===0?0:1/q;if($!==Y){var Q=0,it=0,ht=0;S.forEach(function(Ot,It){if($!==It){var Kt=p(V,Ot),Ft=Kt===0?0:1/Kt,Nt=B[It][$];ht+=m[$][It],Q+=m[$][It]*(Ot[0]+Nt*(V[0]-Ot[0])*Ft),it+=m[$][It]*(Ot[1]+Nt*(V[1]-Ot[1])*Ft)}});var dt=O[$]===0?0:1/O[$];ht*=tt,ht+=_*dt*dt,Q*=tt,Q+=_*dt*V[0]*rt,V[0]=Q/ht,it*=tt,it+=_*dt*V[1]*rt,V[1]=it/ht}})},A.prototype.eIdealDisMatrix=function(){var _=this,S=_.nodes;if(!S)return[];var O=_.distances,B=_.linkDistance,m=_.radii||[],d=_.unitRadius||50,tt=[];return O&&O.forEach(function(Y,V){var $=[];Y.forEach(function(q,rt){if(V===rt)$.push(0);else if(m[V]===m[rt])if(_.sortBy==="data")$.push(q*(Math.abs(V-rt)*_.sortStrength)/(m[V]/d));else if(_.sortBy){var Q=S[V][_.sortBy]||0,it=S[rt][_.sortBy]||0;(0,R.isString)(Q)&&(Q=Q.charCodeAt(0)),(0,R.isString)(it)&&(it=it.charCodeAt(0)),$.push(q*(Math.abs(Q-it)*_.sortStrength)/(m[V]/d))}else $.push(q*B/(m[V]/d));else{var ht=(B+d)/2;$.push(q*ht)}}),tt.push($)}),tt},A.prototype.handleInfinity=function(_,S,O){for(var B=_.length,m=0;m<B;m++)if(_[S][m]===1/0){_[S][m]=O,_[m][S]=O;for(var d=0;d<B;d++)_[m][d]!==1/0&&_[S][d]===1/0&&(_[S][d]=O+_[m][d],_[d][S]=O+_[m][d])}for(var m=0;m<B;m++)if(m!==S){for(var d=0;d<B;d++)if(_[m][d]===1/0){var tt=Math.abs(_[S][m]-_[S][d]);tt=tt===0?1:tt,_[m][d]=tt}}},A.prototype.maxToFocus=function(_,S){for(var O=0,B=0;B<_[S].length;B++)_[S][B]!==1/0&&(O=_[S][B]>O?_[S][B]:O);return O},A.prototype.getType=function(){return"radial"},A}(L.Base);F.RadialLayout=y},706290:function(He,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0});var z=800,G=function(){function X(R){this.disp=[],this.positions=R.positions,this.adjMatrix=R.adjMatrix,this.focusID=R.focusID,this.radii=R.radii,this.iterations=R.iterations||10,this.height=R.height||10,this.width=R.width||10,this.speed=R.speed||100,this.gravity=R.gravity||10,this.nodeSizeFunc=R.nodeSizeFunc,this.k=R.k||5,this.strictRadial=R.strictRadial,this.nodes=R.nodes}return X.prototype.layout=function(){var R=this,L=R.positions,P=[],N=R.iterations,E=R.width/10;R.maxDisplace=E,R.disp=P;for(var x=0;x<N;x++)L.forEach(function(p,y){P[y]={x:0,y:0}}),R.getRepulsion(),R.updatePositions();return L},X.prototype.getRepulsion=function(){var R=this,L=R.positions,P=R.nodes,N=R.disp,E=R.k,x=R.radii||[];L.forEach(function(p,y){N[y]={x:0,y:0},L.forEach(function(g,A){if(y!==A&&x[y]===x[A]){var _=p[0]-g[0],S=p[1]-g[1],O=Math.sqrt(_*_+S*S);if(O===0){O=1;var B=y>A?1:-1;_=.01*B,S=.01*B}if(O<R.nodeSizeFunc(P[y])/2+R.nodeSizeFunc(P[A])/2){var m=E*E/O;N[y].x+=_/O*m,N[y].y+=S/O*m}}})})},X.prototype.updatePositions=function(){var R=this,L=R.positions,P=R.disp,N=R.speed,E=R.strictRadial,x=R.focusID,p=R.maxDisplace||R.width/10;E&&P.forEach(function(g,A){var _=L[A][0]-L[x][0],S=L[A][1]-L[x][1],O=Math.sqrt(_*_+S*S),B=S/O,m=-_/O,d=Math.sqrt(g.x*g.x+g.y*g.y),tt=Math.acos((B*g.x+m*g.y)/d);tt>Math.PI/2&&(tt-=Math.PI/2,B*=-1,m*=-1);var Y=Math.cos(tt)*d;g.x=B*Y,g.y=m*Y});var y=R.radii;L.forEach(function(g,A){if(A!==x){var _=Math.sqrt(P[A].x*P[A].x+P[A].y*P[A].y);if(_>0&&A!==x){var S=Math.min(p*(N/z),_);if(g[0]+=P[A].x/_*S,g[1]+=P[A].y/_*S,E){var O=g[0]-L[x][0],B=g[1]-L[x][1],m=Math.sqrt(O*O+B*B);O=O/m*y[A],B=B/m*y[A],g[0]=L[x][0]+O,g[1]=L[x][1]+B}}}})},X}();F.default=G},539711:function(He,F,z){"use strict";var G=this&&this.__extends||function(){var L=function(P,N){return L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,x){E.__proto__=x}||function(E,x){for(var p in x)Object.prototype.hasOwnProperty.call(x,p)&&(E[p]=x[p])},L(P,N)};return function(P,N){if(typeof N!="function"&&N!==null)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");L(P,N);function E(){this.constructor=P}P.prototype=N===null?Object.create(N):(E.prototype=N.prototype,new E)}}();Object.defineProperty(F,"__esModule",{value:!0}),F.RandomLayout=void 0;var X=z(762329),R=function(L){G(P,L);function P(N){var E=L.call(this)||this;return E.center=[0,0],E.width=300,E.height=300,E.nodes=[],E.edges=[],E.onLayoutEnd=function(){},E.updateCfg(N),E}return P.prototype.getDefaultCfg=function(){return{center:[0,0],width:300,height:300}},P.prototype.execute=function(){var N=this,E=N.nodes,x=.9,p=N.center;return!N.width&&typeof window!="undefined"&&(N.width=window.innerWidth),!N.height&&typeof window!="undefined"&&(N.height=window.innerHeight),E&&E.forEach(function(y){y.x=(Math.random()-.5)*x*N.width+p[0],y.y=(Math.random()-.5)*x*N.height+p[1]}),N.onLayoutEnd&&N.onLayoutEnd(),{nodes:E,edges:this.edges}},P.prototype.getType=function(){return"random"},P}(X.Base);F.RandomLayout=R},932867:function(He,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0})},695326:function(He,F,z){"use strict";var G=this&&this.__extends||function(){var x=function(p,y){return x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,A){g.__proto__=A}||function(g,A){for(var _ in A)Object.prototype.hasOwnProperty.call(A,_)&&(g[_]=A[_])},x(p,y)};return function(p,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");x(p,y);function g(){this.constructor=p}p.prototype=y===null?Object.create(y):(g.prototype=y.prototype,new g)}}();Object.defineProperty(F,"__esModule",{value:!0}),F.getLayoutByName=F.unRegisterLayout=F.registerLayout=void 0;var X=z(762329),R=z(449784),L=new Map,P=function(x,p){if(L.get(x)&&console.warn("The layout with the name ".concat(x," exists already, it will be overridden")),(0,R.isObject)(p)){var y=function(g){G(A,g);function A(_){var S=this,O;S=g.call(this)||this;var B=S,m={},d=Object.assign({},B.getDefaultCfg(),((O=p.getDefaultCfg)===null||O===void 0?void 0:O.call(p))||{});return Object.assign(m,d,p,_),Object.keys(m).forEach(function(tt){var Y=m[tt];B[tt]=Y}),S}return A}(X.Base);L.set(x,y)}else L.set(x,p);return L.get(x)};F.registerLayout=P;var N=function(x){L.has(x)&&L.delete(x)};F.unRegisterLayout=N;var E=function(x){return L.has(x)?L.get(x):null};F.getLayoutByName=E},185087:function(He,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.isArray=void 0,F.isArray=Array.isArray},578732:function(He,F,z){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.getFuncByUnknownType=F.getFunc=F.isFunction=void 0;var G=z(449784),X=z(330627),R=function(N){return typeof N=="function"};F.isFunction=R;var L=function(N,E,x){var p;return x?p=x:(0,X.isNumber)(N)?p=function(){return N}:p=function(){return E},p};F.getFunc=L;var P=function(N,E,x){return x===void 0&&(x=!0),!E&&E!==0?function(p){return p.size?(0,G.isArray)(p.size)?p.size[0]>p.size[1]?p.size[0]:p.size[1]:(0,G.isObject)(p.size)?p.size.width>p.size.height?p.size.width:p.size.height:p.size:N}:(0,F.isFunction)(E)?E:(0,X.isNumber)(E)?function(){return E}:(0,G.isArray)(E)?function(){if(x){var p=Math.max.apply(Math,E);return isNaN(p)?N:p}return E}:(0,G.isObject)(E)?function(){if(x){var p=Math.max(E.width,E.height);return isNaN(p)?N:p}return[E.width,E.height]}:function(){return N}};F.getFuncByUnknownType=P},248835:function(He,F,z){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.arrayToTextureData=F.attributesToTextureData=F.buildTextureDataWithTwoEdgeAttr=F.buildTextureData=F.proccessToFunc=void 0;var G=z(449784),X=z(280628),R=function(x,p){var y;return x?(0,G.isNumber)(x)?y=function(){return x}:y=x:y=function(){return p||1},y};F.proccessToFunc=R;var L=function(x,p){var y=[],g=[],A={},_=0;for(_=0;_<x.length;_++){var S=x[_];A[S.id]=_,y.push(S.x),y.push(S.y),y.push(0),y.push(0),g.push([])}for(_=0;_<p.length;_++){var O=p[_],B=(0,X.getEdgeTerminal)(O,"source"),m=(0,X.getEdgeTerminal)(O,"target");!isNaN(A[B])&&!isNaN(A[m])&&(g[A[B]].push(A[m]),g[A[m]].push(A[B]))}var d=0;for(_=0;_<x.length;_++){var tt=y.length,Y=g[_],V=Y.length;y[_*4+2]=tt,y[_*4+3]=V,d=Math.max(d,V);for(var $=0;$<V;++$){var q=Y[$];y.push(+q)}}for(;y.length%4!==0;)y.push(0);return{maxEdgePerVetex:d,array:new Float32Array(y)}};F.buildTextureData=L;var P=function(x,p,y,g){var A=[],_=[],S={},O=0;for(O=0;O<x.length;O++){var B=x[O];S[B.id]=O,A.push(B.x),A.push(B.y),A.push(0),A.push(0),_.push([])}for(O=0;O<p.length;O++){var m=p[O],d=(0,X.getEdgeTerminal)(m,"source"),tt=(0,X.getEdgeTerminal)(m,"target");_[S[d]].push(S[tt]),_[S[d]].push(y(m)),_[S[d]].push(g(m)),_[S[d]].push(0),_[S[tt]].push(S[d]),_[S[tt]].push(y(m)),_[S[tt]].push(g(m)),_[S[tt]].push(0)}var Y=0;for(O=0;O<x.length;O++){var V=A.length,$=_[O],q=$.length;A[O*4+2]=V+1048576*q/4,A[O*4+3]=0,Y=Math.max(Y,q/4);for(var rt=0;rt<q;++rt){var Q=$[rt];A.push(+Q)}}for(;A.length%4!==0;)A.push(0);return{maxEdgePerVetex:Y,array:new Float32Array(A)}};F.buildTextureDataWithTwoEdgeAttr=P;var N=function(x,p){var y=[],g=x.length,A={};return p.forEach(function(_){x.forEach(function(S,O){if(A[_[S]]===void 0&&(A[_[S]]=Object.keys(A).length),y.push(A[_[S]]),O===g-1)for(;y.length%4!==0;)y.push(0)})}),{array:new Float32Array(y),count:Object.keys(A).length}};F.attributesToTextureData=N;var E=function(x){for(var p=[],y=x.length,g=x[0].length,A=function(S){x.forEach(function(O,B){if(p.push(O[S]),B===y-1)for(;p.length%4!==0;)p.push(0)})},_=0;_<g;_++)A(_);return new Float32Array(p)};F.arrayToTextureData=E},449784:function(He,F,z){"use strict";var G=this&&this.__createBinding||(Object.create?function(R,L,P,N){N===void 0&&(N=P);var E=Object.getOwnPropertyDescriptor(L,P);(!E||("get"in E?!L.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return L[P]}}),Object.defineProperty(R,N,E)}:function(R,L,P,N){N===void 0&&(N=P),R[N]=L[P]}),X=this&&this.__exportStar||function(R,L){for(var P in R)P!=="default"&&!Object.prototype.hasOwnProperty.call(L,P)&&G(L,R,P)};Object.defineProperty(F,"__esModule",{value:!0}),X(z(708055),F),X(z(185087),F),X(z(330627),F),X(z(280628),F),X(z(898130),F),X(z(578732),F)},280628:function(He,F,z){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.getCoreNodeAndRelativeLeafNodes=F.getAvgNodePosition=F.getLayoutBBox=F.traverseTreeUp=F.scaleMatrix=F.getAdjMatrix=F.floydWarshall=F.getDegreeMap=F.getDegree=F.getEdgeTerminal=void 0;var G=z(185087),X=z(330627),R=z(898130),L=function(d,tt){var Y=d[tt];return(0,R.isObject)(Y)?Y.cell:Y};F.getEdgeTerminal=L;var P=function(d,tt,Y){for(var V=[],$=0;$<d;$++)V[$]={in:0,out:0,all:0};return Y&&Y.forEach(function(q){var rt=(0,F.getEdgeTerminal)(q,"source"),Q=(0,F.getEdgeTerminal)(q,"target");rt&&V[tt[rt]]&&(V[tt[rt]].out+=1,V[tt[rt]].all+=1),Q&&V[tt[Q]]&&(V[tt[Q]].in+=1,V[tt[Q]].all+=1)}),V};F.getDegree=P;var N=function(d,tt){var Y={};return d.forEach(function(V){Y[V.id]={in:0,out:0,all:0}}),tt&&tt.forEach(function(V){var $=(0,F.getEdgeTerminal)(V,"source"),q=(0,F.getEdgeTerminal)(V,"target");$&&(Y[$].out+=1,Y[$].all+=1),q&&(Y[q].in+=1,Y[q].all+=1)}),Y};F.getDegreeMap=N;var E=function(d){for(var tt=[],Y=d.length,V=0;V<Y;V+=1){tt[V]=[];for(var $=0;$<Y;$+=1)V===$?tt[V][$]=0:d[V][$]===0||!d[V][$]?tt[V][$]=1/0:tt[V][$]=d[V][$]}for(var q=0;q<Y;q+=1)for(var V=0;V<Y;V+=1)for(var $=0;$<Y;$+=1)tt[V][$]>tt[V][q]+tt[q][$]&&(tt[V][$]=tt[V][q]+tt[q][$]);return tt};F.floydWarshall=E;var x=function(d,tt){var Y=d.nodes,V=d.edges,$=[],q={};if(!Y)throw new Error("invalid nodes data!");return Y&&Y.forEach(function(rt,Q){q[rt.id]=Q;var it=[];$.push(it)}),V==null||V.forEach(function(rt){var Q=(0,F.getEdgeTerminal)(rt,"source"),it=(0,F.getEdgeTerminal)(rt,"target"),ht=q[Q],dt=q[it];ht===void 0||dt===void 0||($[ht][dt]=1,tt||($[dt][ht]=1))}),$};F.getAdjMatrix=x;var p=function(d,tt){var Y=[];return d.forEach(function(V){var $=[];V.forEach(function(q){$.push(q*tt)}),Y.push($)}),Y};F.scaleMatrix=p;var y=function(d,tt){if(d&&d.children){for(var Y=d.children.length-1;Y>=0;Y--)if(!y(d.children[Y],tt))return}return!!tt(d)},g=function(d,tt){typeof tt=="function"&&y(d,tt)};F.traverseTreeUp=g;var A=function(d){var tt=1/0,Y=1/0,V=-1/0,$=-1/0;return d.forEach(function(q){var rt=q.size;(0,G.isArray)(rt)?rt.length===1&&(rt=[rt[0],rt[0]]):(0,X.isNumber)(rt)?rt=[rt,rt]:(rt===void 0||isNaN(rt))&&(rt=[30,30]);var Q=[rt[0]/2,rt[1]/2],it=q.x-Q[0],ht=q.x+Q[0],dt=q.y-Q[1],Ot=q.y+Q[1];tt>it&&(tt=it),Y>dt&&(Y=dt),V<ht&&(V=ht),$<Ot&&($=Ot)}),{minX:tt,minY:Y,maxX:V,maxY:$}};F.getLayoutBBox=A;var _=function(d){var tt={x:0,y:0};d.forEach(function(V){tt.x+=V.x||0,tt.y+=V.y||0});var Y=d.length||1;return{x:tt.x/Y,y:tt.y/Y}};F.getAvgNodePosition=_;var S=function(d,tt,Y){var V,$;return d==="source"?((V=Y==null?void 0:Y.find(function(q){return q.target===tt.id}))===null||V===void 0?void 0:V.source)||{}:(($=Y==null?void 0:Y.find(function(q){return q.source===tt.id}))===null||$===void 0?void 0:$.target)||{}},O=function(d,tt,Y){var V=[];switch(d){case"source":V=Y==null?void 0:Y.filter(function(q){return q.source===tt.id}).map(function(q){return q.target});break;case"target":V=Y==null?void 0:Y.filter(function(q){return q.target===tt.id}).map(function(q){return q.source});break;case"both":V=Y==null?void 0:Y.filter(function(q){return q.source===tt.id}).map(function(q){return q.target}).concat(Y==null?void 0:Y.filter(function(q){return q.target===tt.id}).map(function(q){return q.source}));break;default:break}var $=new Set(V);return Array.from($)},B=function(d,tt,Y,V,$){var q=Y[tt]||"",rt=(V==null?void 0:V.filter(function(Q){return Q[tt]===q}))||[];return d==="leaf"&&(rt=rt.filter(function(Q){var it,ht;return((it=$[Q.id])===null||it===void 0?void 0:it.in)===0||((ht=$[Q.id])===null||ht===void 0?void 0:ht.out)===0})),rt},m=function(d,tt,Y,V,$,q){var rt=$[tt.id],Q=rt.in,it=rt.out,ht=tt,dt=[];Q===0?(ht=S("source",tt,Y),dt=O("both",ht,Y).map(function(It){return q[It]})):it===0&&(ht=S("target",tt,Y),dt=O("both",ht,Y).map(function(It){return q[It]})),dt=dt.filter(function(It){return $[It.id]&&($[It.id].in===0||$[It.id].out===0)});var Ot=B(d,V,tt,dt,$);return{coreNode:ht,relativeLeafNodes:dt,sameTypeLeafNodes:Ot}};F.getCoreNodeAndRelativeLeafNodes=m},330627:function(He,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.toNumber=F.isNaN=F.isNumber=void 0;var z=function(R){return typeof R=="number"};F.isNumber=z;var G=function(R){return Number.isNaN(Number(R))};F.isNaN=G;var X=function(R){var L=parseFloat(R);return(0,F.isNaN)(L)?R:L};F.toNumber=X},898130:function(He,F){"use strict";var z=this&&this.__assign||function(){return z=Object.assign||function(R){for(var L,P=1,N=arguments.length;P<N;P++){L=arguments[P];for(var E in L)Object.prototype.hasOwnProperty.call(L,E)&&(R[E]=L[E])}return R},z.apply(this,arguments)};Object.defineProperty(F,"__esModule",{value:!0}),F.clone=F.isObject=void 0;var G=function(R){return R!==null&&typeof R=="object"};F.isObject=G;var X=function(R){if(R===null)return R;if(R instanceof Date)return new Date(R.getTime());if(R instanceof Array){var L=[];return R.forEach(function(N){L.push(N)}),L.map(function(N){return(0,F.clone)(N)})}if(typeof R=="object"&&Object.keys(R).length){var P=z({},R);return Object.keys(P).forEach(function(N){P[N]=(0,F.clone)(P[N])}),P}return R};F.clone=X},708055:function(He,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.camelize=F.isString=void 0;var z=function(R){return typeof R=="string"};F.isString=z;var G=function(R){var L=Object.create(null);return function(P){var N=L[P];return N||(L[P]=R(P))}},X=/-(\w)/g;F.camelize=G(function(R){return R.replace(X,function(L,P){return P?P.toUpperCase():""})})},772549:function(He,F,z){"use strict";z.r(F),z.d(F,{Cache:function(){return sf},angleTo:function(){return dt},arcToCubic:function(){return Ct},assign:function(){return pr},augment:function(){return qr},clamp:function(){return Eo},clearAnimationFrame:function(){return yr},clone:function(){return _n},clonePath:function(){return Rr},contains:function(){return Pt},createDOM:function(){return Yu},debounce:function(){return wa},deepMix:function(){return Ci},difference:function(){return br},direction:function(){return ht},distanceSquareRoot:function(){return Nn},each:function(){return xa},endsWith:function(){return Lo},equalizeSegments:function(){return j},every:function(){return zo},extend:function(){return Ti},filter:function(){return ve},find:function(){return fe},findIndex:function(){return be},firstValue:function(){return sr},fixedBase:function(){return co},flatten:function(){return Jr},flattenDeep:function(){return Bn},forIn:function(){return Tt},get:function(){return Ec},getDrawDirection:function(){return la},getPathArea:function(){return Cn},getPathBBox:function(){return jn},getPathBBoxTotalLength:function(){return oa},getPointAtLength:function(){return K},getRange:function(){return li},getRotatedCurve:function(){return Wn},getTotalLength:function(){return Hn},getType:function(){return Qs},getWrapBehavior:function(){return No},gradient:function(){return S},group:function(){return Do},groupBy:function(){return ei},groupToMap:function(){return fo},has:function(){return jt},hasKey:function(){return ze},hasValue:function(){return cn},head:function(){return Yn},identity:function(){return wn},includes:function(){return Pt},indexOf:function(){return Bi},isArguments:function(){return Is},isArray:function(){return Er},isArrayLike:function(){return At},isBoolean:function(){return cs},isDate:function(){return rf},isDecimal:function(){return no},isElement:function(){return Ce},isEmpty:function(){return ii},isEqual:function(){return ys},isEqualWith:function(){return ko},isError:function(){return Rf},isEven:function(){return Ki},isFinite:function(){return Os},isFunction:function(){return P},isInteger:function(){return wo},isMatch:function(){return Ga},isNegative:function(){return lo},isNil:function(){return mr},isNull:function(){return h},isNumber:function(){return ja},isNumberEqual:function(){return ou},isObject:function(){return on},isObjectLike:function(){return an},isOdd:function(){return ci},isPlainObject:function(){return me},isPointInPolygon:function(){return lu},isPointInStroke:function(){return k},isPolygonsIntersect:function(){return bi},isPositive:function(){return Wu},isPrototype:function(){return Et},isRegExp:function(){return Xt},isString:function(){return Ui},isType:function(){return vr},isUndefined:function(){return ue},keys:function(){return Rn},last:function(){return So},lowerCase:function(){return ai},lowerFirst:function(){return ao},map:function(){return Ff},mapValues:function(){return bc},max:function(){return Zn},maxBy:function(){return ho},memoize:function(){return N},min:function(){return ba},minBy:function(){return Bs},mix:function(){return pr},mod:function(){return Vo},modifyCSS:function(){return xs},noop:function(){return Sc},normalizePath:function(){return re},number2color:function(){return As},omit:function(){return nf},parseRadius:function(){return Xi},path2Absolute:function(){return ie},path2Curve:function(){return gn},path2String:function(){return Kt},pick:function(){return wc},pull:function(){return xi},pullAt:function(){return bo},reduce:function(){return Hi},remove:function(){return zi},requestAnimationFrame:function(){return Ye},reverseCurve:function(){return ln},rgb2arr:function(){return G},set:function(){return Gf},size:function(){return Tu},some:function(){return ps},sortBy:function(){return Ms},startsWith:function(){return Wi},substitute:function(){return Mu},throttle:function(){return af},toArray:function(){return _c},toCSSGradient:function(){return tt},toDegree:function(){return jo},toInteger:function(){return us},toRGB:function(){return g},toRadian:function(){return fs},toString:function(){return mn},transform:function(){return Q},union:function(){return Io},uniq:function(){return Go},uniqueId:function(){return cu},upperCase:function(){return vo},upperFirst:function(){return Xu},values:function(){return Cr},valuesOfKey:function(){return $s},vertical:function(){return Ot},wrapBehavior:function(){return Xo}});function G(et){return[parseInt(et.substr(1,2),16),parseInt(et.substr(3,2),16),parseInt(et.substr(5,2),16)]}function X(et){var pt=Math.round(et).toString(16);return pt.length===1?"0"+pt:pt}function R(et){return"#"+X(et[0])+X(et[1])+X(et[2])}function L(et){var pt,St,Ut,ne=et||1;function Be(ur,Br){++pt>ne&&(Ut=St,Ue(1),++pt),St[ur]=Br}function Ue(ur){pt=0,St=Object.create(null),ur||(Ut=Object.create(null))}return Ue(),{clear:Ue,has:function(ur){return St[ur]!==void 0||Ut[ur]!==void 0},get:function(ur){var Br=St[ur];if(Br!==void 0)return Br;if((Br=Ut[ur])!==void 0)return Be(ur,Br),Br},set:function(ur,Br){St[ur]!==void 0?St[ur]=Br:Be(ur,Br)}}}var P=function(et){return typeof et=="function"},N=function(et,pt,St){if(St===void 0&&(St=128),!P(et))throw new TypeError("Expected a function");var Ut=function(){for(var ne=[],Be=0;Be<arguments.length;Be++)ne[Be]=arguments[Be];var Ue=pt?pt.apply(this,ne):ne[0],ur=Ut.cache;if(ur.has(Ue))return ur.get(Ue);var Br=et.apply(this,ne);return ur.set(Ue,Br),Br};return Ut.cache=L(St),Ut},E=/rgba?\(([\s.,0-9]+)\)/;function x(){var et=document.createElement("i");return et.title="Web Colour Picker",et.style.display="none",document.body.appendChild(et),et}var p;function y(et){if(et[0]==="#"&&et.length===7)return et;p||(p=x()),p.style.color=et;var pt=document.defaultView.getComputedStyle(p,"").getPropertyValue("color"),St=E.exec(pt),Ut=St[1].split(/\s*,\s*/).map(function(ne){return Number(ne)});return pt=R(Ut),pt}var g=N(y,function(et){return et},256);function A(et,pt,St,Ut){return et[Ut]+(pt[Ut]-et[Ut])*St}function _(et,pt){var St=isNaN(Number(pt))||pt<0?0:pt>1?1:Number(pt),Ut=et.length-1,ne=Math.floor(Ut*St),Be=Ut*St-ne,Ue=et[ne],ur=ne===Ut?Ue:et[ne+1];return R([A(Ue,ur,Be,0),A(Ue,ur,Be,1),A(Ue,ur,Be,2)])}function S(et){var pt=typeof et=="string"?et.split("-"):et,St=pt.map(function(Ut){return G(Ut.indexOf("#")===-1?g(Ut):Ut)});return function(Ut){return _(St,Ut)}}var O=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,B=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,m=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function d(et){return/^[r,R,L,l]{1}[\s]*\(/.test(et)}function tt(et){if(d(et)){var pt,St=void 0;if(et[0]==="l"){var Ut=O.exec(et),ne=+Ut[1]+90;St=Ut[2],pt="linear-gradient("+ne+"deg, "}else if(et[0]==="r"){pt="radial-gradient(";var Ut=B.exec(et);St=Ut[4]}var Be=St.match(m);return Be.forEach(function(Ue,ur){var Br=Ue.split(":");pt+=Br[1]+" "+Number(Br[0])*100+"%",ur!==Be.length-1&&(pt+=", ")}),pt+=")",pt}return et}var Y=z(935600);function V(et,pt,St){var Ut=[0,0,0,0,0,0,0,0,0];return Y.fromTranslation(Ut,St),Y.multiply(et,Ut,pt)}function $(et,pt,St){var Ut=[0,0,0,0,0,0,0,0,0];return Y.fromRotation(Ut,St),Y.multiply(et,Ut,pt)}function q(et,pt,St){var Ut=[0,0,0,0,0,0,0,0,0];return Y.fromScaling(Ut,St),Y.multiply(et,Ut,pt)}function rt(et,pt,St){return Y.multiply(et,St,pt)}function Q(et,pt){for(var St=et?[].concat(et):[1,0,0,0,1,0,0,0,1],Ut=0,ne=pt.length;Ut<ne;Ut++){var Be=pt[Ut];switch(Be[0]){case"t":V(St,St,[Be[1],Be[2]]);break;case"s":q(St,St,[Be[1],Be[2]]);break;case"r":$(St,St,Be[1]);break;case"m":rt(St,St,Be[1]);break;default:break}}return St}var it=z(631437);function ht(et,pt){return et[0]*pt[1]-pt[0]*et[1]}function dt(et,pt,St){var Ut=it.angle(et,pt),ne=ht(et,pt)>=0;return St?ne?Math.PI*2-Ut:Ut:ne?Ut:Math.PI*2-Ut}function Ot(et,pt,St){return St?(et[0]=pt[1],et[1]=-1*pt[0]):(et[0]=-1*pt[1],et[1]=pt[0]),et}function It(et,pt){if(pt==="off")return[].concat(et);var St=typeof pt=="number"&&pt>=1?Math.pow(10,pt):1;return et.map(function(Ut){var ne=Ut.slice(1).map(Number).map(function(Be){return pt?Math.round(Be*St)/St:Math.round(Be)});return[Ut[0]].concat(ne)})}function Kt(et,pt){return pt===void 0&&(pt="off"),It(et,pt).map(function(St){return St[0]+St.slice(1).join(" ")}).join("")}var Ft=z(197582),Nt={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null};function st(et,pt,St){if(et[St].length>7){et[St].shift();for(var Ut=et[St],ne=St;Ut.length;)pt[St]="A",et.splice(ne+=1,0,["C"].concat(Ut.splice(0,6)));et.splice(St,1)}}var yt={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function kt(et){return Array.isArray(et)&&et.every(function(pt){var St=pt[0].toLowerCase();return yt[St]===pt.length-1&&"achlmqstvz".includes(St)})}function ee(et){return kt(et)&&et.every(function(pt){var St=pt[0];return St===St.toUpperCase()})}function $t(et){return ee(et)&&et.every(function(pt){var St=pt[0];return"ACLMQZ".includes(St)})}function ge(et){for(var pt=et.pathValue[et.segmentStart],St=pt.toLowerCase(),Ut=et.data;Ut.length>=yt[St]&&(St==="m"&&Ut.length>2?(et.segments.push([pt].concat(Ut.splice(0,2))),St="l",pt=pt==="m"?"l":"L"):et.segments.push([pt].concat(Ut.splice(0,yt[St]))),!!yt[St]););}function Pe(et){var pt=et.index,St=et.pathValue,Ut=St.charCodeAt(pt);if(Ut===48){et.param=0,et.index+=1;return}if(Ut===49){et.param=1,et.index+=1;return}et.err='[path-util]: invalid Arc flag "'+St[pt]+'", expecting 0 or 1 at index '+pt}function er(et){return et>=48&&et<=57||et===43||et===45||et===46}function Jt(et){return et>=48&&et<=57}function ae(et){var pt=et.max,St=et.pathValue,Ut=et.index,ne=Ut,Be=!1,Ue=!1,ur=!1,Br=!1,Hr;if(ne>=pt){et.err="[path-util]: Invalid path value at index "+ne+', "pathValue" is missing param';return}if(Hr=St.charCodeAt(ne),(Hr===43||Hr===45)&&(ne+=1,Hr=St.charCodeAt(ne)),!Jt(Hr)&&Hr!==46){et.err="[path-util]: Invalid path value at index "+ne+', "'+St[ne]+'" is not a number';return}if(Hr!==46){if(Be=Hr===48,ne+=1,Hr=St.charCodeAt(ne),Be&&ne<pt&&Hr&&Jt(Hr)){et.err="[path-util]: Invalid path value at index "+Ut+', "'+St[Ut]+'" illegal number';return}for(;ne<pt&&Jt(St.charCodeAt(ne));)ne+=1,Ue=!0;Hr=St.charCodeAt(ne)}if(Hr===46){for(Br=!0,ne+=1;Jt(St.charCodeAt(ne));)ne+=1,ur=!0;Hr=St.charCodeAt(ne)}if(Hr===101||Hr===69){if(Br&&!Ue&&!ur){et.err="[path-util]: Invalid path value at index "+ne+', "'+St[ne]+'" invalid float exponent';return}if(ne+=1,Hr=St.charCodeAt(ne),(Hr===43||Hr===45)&&(ne+=1),ne<pt&&Jt(St.charCodeAt(ne)))for(;ne<pt&&Jt(St.charCodeAt(ne));)ne+=1;else{et.err="[path-util]: Invalid path value at index "+ne+', "'+St[ne]+'" invalid integer exponent';return}}et.index=ne,et.param=+et.pathValue.slice(Ut,ne)}function Se(et){var pt=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];return et===10||et===13||et===8232||et===8233||et===32||et===9||et===11||et===12||et===160||et>=5760&&pt.includes(et)}function xe(et){for(var pt=et.pathValue,St=et.max;et.index<St&&Se(pt.charCodeAt(et.index));)et.index+=1}function we(et){switch(et|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}}function zt(et){return(et|32)===97}function Wt(et){var pt=et.max,St=et.pathValue,Ut=et.index,ne=St.charCodeAt(Ut),Be=yt[St[Ut].toLowerCase()];if(et.segmentStart=Ut,!we(ne)){et.err='[path-util]: Invalid path value "'+St[Ut]+'" is not a path command';return}if(et.index+=1,xe(et),et.data=[],!Be){ge(et);return}for(;;){for(var Ue=Be;Ue>0;Ue-=1){if(zt(ne)&&(Ue===3||Ue===4)?Pe(et):ae(et),et.err.length)return;et.data.push(et.param),xe(et),et.index<pt&&St.charCodeAt(et.index)===44&&(et.index+=1,xe(et))}if(et.index>=et.max||!er(St.charCodeAt(et.index)))break}ge(et)}var Ie=function(){function et(pt){this.pathValue=pt,this.segments=[],this.max=pt.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""}return et}();function Yt(et){if(kt(et))return[].concat(et);var pt=new Ie(et);for(xe(pt);pt.index<pt.max&&!pt.err.length;)Wt(pt);return pt.err?pt.err:pt.segments}function ie(et){if(ee(et))return[].concat(et);var pt=Yt(et),St=0,Ut=0,ne=0,Be=0;return pt.map(function(Ue){var ur=Ue.slice(1).map(Number),Br=Ue[0],Hr=Br.toUpperCase();if(Br==="M")return St=ur[0],Ut=ur[1],ne=St,Be=Ut,["M",St,Ut];var xn;if(Br!==Hr)switch(Hr){case"A":xn=[Hr,ur[0],ur[1],ur[2],ur[3],ur[4],ur[5]+St,ur[6]+Ut];break;case"V":xn=[Hr,ur[0]+Ut];break;case"H":xn=[Hr,ur[0]+St];break;default:{var Tn=ur.map(function(fa,da){return fa+(da%2?Ut:St)});xn=[Hr].concat(Tn)}}else xn=[Hr].concat(ur);var vn=xn.length;switch(Hr){case"Z":St=ne,Ut=Be;break;case"H":St=xn[1];break;case"V":Ut=xn[1];break;default:St=xn[vn-2],Ut=xn[vn-1],Hr==="M"&&(ne=St,Be=Ut)}return xn})}function Oe(et,pt){var St=et[0],Ut=pt.x1,ne=pt.y1,Be=pt.x2,Ue=pt.y2,ur=et.slice(1).map(Number),Br=et;if("TQ".includes(St)||(pt.qx=null,pt.qy=null),St==="H")Br=["L",et[1],ne];else if(St==="V")Br=["L",Ut,et[1]];else if(St==="S"){var Hr=Ut*2-Be,xn=ne*2-Ue;pt.x1=Hr,pt.y1=xn,Br=["C",Hr,xn].concat(ur)}else if(St==="T"){var Tn=Ut*2-pt.qx,vn=ne*2-pt.qy;pt.qx=Tn,pt.qy=vn,Br=["Q",Tn,vn].concat(ur)}else if(St==="Q"){var fa=ur[0],da=ur[1];pt.qx=fa,pt.qy=da}return Br}function re(et){if($t(et))return[].concat(et);for(var pt=ie(et),St=(0,Ft.__assign)({},Nt),Ut=0;Ut<pt.length;Ut+=1){pt[Ut]=Oe(pt[Ut],St);var ne=pt[Ut],Be=ne.length;St.x1=+ne[Be-2],St.y1=+ne[Be-1],St.x2=+ne[Be-4]||St.x1,St.y2=+ne[Be-3]||St.y1}return pt}function _e(et){return $t(et)&&et.every(function(pt){var St=pt[0];return"MC".includes(St)})}function Ge(et,pt,St){var Ut=et*Math.cos(St)-pt*Math.sin(St),ne=et*Math.sin(St)+pt*Math.cos(St);return{x:Ut,y:ne}}function Ct(et,pt,St,Ut,ne,Be,Ue,ur,Br,Hr){var xn=et,Tn=pt,vn=St,fa=Ut,da=ur,ya=Br,na=Math.PI*120/180,Da=Math.PI/180*(+ne||0),Fn=[],Ia,ia,Un,Ma,qa;if(Hr)ia=Hr[0],Un=Hr[1],Ma=Hr[2],qa=Hr[3];else{Ia=Ge(xn,Tn,-Da),xn=Ia.x,Tn=Ia.y,Ia=Ge(da,ya,-Da),da=Ia.x,ya=Ia.y;var ri=(xn-da)/2,Ba=(Tn-ya)/2,Fa=ri*ri/(vn*vn)+Ba*Ba/(fa*fa);Fa>1&&(Fa=Math.sqrt(Fa),vn*=Fa,fa*=Fa);var oi=vn*vn,Oi=fa*fa,Ei=(Be===Ue?-1:1)*Math.sqrt(Math.abs((oi*Oi-oi*Ba*Ba-Oi*ri*ri)/(oi*Ba*Ba+Oi*ri*ri)));Ma=Ei*vn*Ba/fa+(xn+da)/2,qa=Ei*-fa*ri/vn+(Tn+ya)/2,ia=Math.asin(((Tn-qa)/fa*Math.pow(10,9)>>0)/Math.pow(10,9)),Un=Math.asin(((ya-qa)/fa*Math.pow(10,9)>>0)/Math.pow(10,9)),ia=xn<Ma?Math.PI-ia:ia,Un=da<Ma?Math.PI-Un:Un,ia<0&&(ia=Math.PI*2+ia),Un<0&&(Un=Math.PI*2+Un),Ue&&ia>Un&&(ia-=Math.PI*2),!Ue&&Un>ia&&(Un-=Math.PI*2)}var bs=Un-ia;if(Math.abs(bs)>na){var uf=Un,tu=da,Ws=ya;Un=ia+na*(Ue&&Un>ia?1:-1),da=Ma+vn*Math.cos(Un),ya=qa+fa*Math.sin(Un),Fn=Ct(da,ya,vn,fa,ne,0,Ue,tu,Ws,[Un,uf,Ma,qa])}bs=Un-ia;var hu=Math.cos(ia),ff=Math.sin(ia),vu=Math.cos(Un),el=Math.sin(Un),Mc=Math.tan(bs/4),Vu=4/3*vn*Mc,cf=4/3*fa*Mc,lf=[xn,Tn],Es=[xn+Vu*ff,Tn-cf*hu],eu=[da+Vu*el,ya-cf*vu],Xs=[da,ya];if(Es[0]=2*lf[0]-Es[0],Es[1]=2*lf[1]-Es[1],Hr)return Es.concat(eu,Xs,Fn);Fn=Es.concat(eu,Xs,Fn);for(var ju=[],go=0,Ls=Fn.length;go<Ls;go+=1)ju[go]=go%2?Ge(Fn[go-1],Fn[go],Da).y:Ge(Fn[go],Fn[go+1],Da).x;return ju}function Nr(et,pt,St,Ut,ne,Be){var Ue=.3333333333333333,ur=2/3;return[Ue*et+ur*St,Ue*pt+ur*Ut,Ue*ne+ur*St,Ue*Be+ur*Ut,ne,Be]}function Or(et,pt,St){var Ut=et[0],ne=et[1],Be=pt[0],Ue=pt[1];return[Ut+(Be-Ut)*St,ne+(Ue-ne)*St]}var Ur=function(et,pt,St,Ut){var ne=.5,Be=Or([et,pt],[St,Ut],ne);return(0,Ft.__spreadArray)((0,Ft.__spreadArray)([],Be,!0),[St,Ut,St,Ut],!1)};function Sr(et,pt){var St=et[0],Ut=et.slice(1).map(Number),ne=Ut[0],Be=Ut[1],Ue,ur=pt.x1,Br=pt.y1,Hr=pt.x,xn=pt.y;switch("TQ".includes(St)||(pt.qx=null,pt.qy=null),St){case"M":return pt.x=ne,pt.y=Be,et;case"A":return Ue=[ur,Br].concat(Ut),["C"].concat(Ct(Ue[0],Ue[1],Ue[2],Ue[3],Ue[4],Ue[5],Ue[6],Ue[7],Ue[8],Ue[9]));case"Q":return pt.qx=ne,pt.qy=Be,Ue=[ur,Br].concat(Ut),["C"].concat(Nr(Ue[0],Ue[1],Ue[2],Ue[3],Ue[4],Ue[5]));case"L":return["C"].concat(Ur(ur,Br,ne,Be));case"Z":return ur===Hr&&Br===xn?["C",ur,Br,Hr,xn,Hr,xn]:["C"].concat(Ur(ur,Br,Hr,xn));default:}return et}function gn(et,pt){if(pt===void 0&&(pt=!1),_e(et)){var St=[].concat(et);return pt?[St,[]]:St}for(var Ut=re(et),ne=(0,Ft.__assign)({},Nt),Be=[],Ue="",ur=Ut.length,Br,Hr,xn=[],Tn=0;Tn<ur;Tn+=1){Ut[Tn]&&(Ue=Ut[Tn][0]),Be[Tn]=Ue;var vn=Sr(Ut[Tn],ne);Ut[Tn]=vn,st(Ut,Be,Tn),ur=Ut.length,Ue==="Z"&&xn.push(Tn),Br=Ut[Tn],Hr=Br.length,ne.x1=+Br[Hr-2],ne.y1=+Br[Hr-1],ne.x2=+Br[Hr-4]||ne.x1,ne.y2=+Br[Hr-3]||ne.y1}return pt?[Ut,xn]:Ut}function Rr(et){return et.map(function(pt){return Array.isArray(pt)?[].concat(pt):pt})}function ln(et){var pt=et.slice(1).map(function(St,Ut,ne){return Ut?ne[Ut-1].slice(-2).concat(St.slice(1)):et[0].slice(1).concat(St.slice(1))}).map(function(St){return St.map(function(Ut,ne){return St[St.length-ne-2*(1-ne%2)]})}).reverse();return[["M"].concat(pt[0].slice(0,2))].concat(pt.map(function(St){return["C"].concat(St.slice(2))}))}function Nn(et,pt){return Math.sqrt((et[0]-pt[0])*(et[0]-pt[0])+(et[1]-pt[1])*(et[1]-pt[1]))}function Ln(et,pt,St,Ut,ne){var Be=Nn([et,pt],[St,Ut]),Ue={x:0,y:0};if(typeof ne=="number")if(ne<=0)Ue={x:et,y:pt};else if(ne>=Be)Ue={x:St,y:Ut};else{var ur=Or([et,pt],[St,Ut],ne/Be),Br=ur[0],Hr=ur[1];Ue={x:Br,y:Hr}}return{length:Be,point:Ue,min:{x:Math.min(et,St),y:Math.min(pt,Ut)},max:{x:Math.max(et,St),y:Math.max(pt,Ut)}}}function fn(et,pt){var St=et.x,Ut=et.y,ne=pt.x,Be=pt.y,Ue=St*ne+Ut*Be,ur=Math.sqrt((Math.pow(St,2)+Math.pow(Ut,2))*(Math.pow(ne,2)+Math.pow(Be,2))),Br=St*Be-Ut*ne<0?-1:1,Hr=Br*Math.acos(Ue/ur);return Hr}function Qe(et,pt,St,Ut,ne,Be,Ue,ur,Br,Hr){var xn=Math.abs,Tn=Math.sin,vn=Math.cos,fa=Math.sqrt,da=Math.PI,ya=xn(St),na=xn(Ut),Da=(ne%360+360)%360,Fn=Da*(da/180);if(et===ur&&pt===Br)return{x:et,y:pt};if(ya===0||na===0)return Ln(et,pt,ur,Br,Hr).point;var Ia=(et-ur)/2,ia=(pt-Br)/2,Un={x:vn(Fn)*Ia+Tn(Fn)*ia,y:-Tn(Fn)*Ia+vn(Fn)*ia},Ma=Math.pow(Un.x,2)/Math.pow(ya,2)+Math.pow(Un.y,2)/Math.pow(na,2);Ma>1&&(ya*=fa(Ma),na*=fa(Ma));var qa=Math.pow(ya,2)*Math.pow(na,2)-Math.pow(ya,2)*Math.pow(Un.y,2)-Math.pow(na,2)*Math.pow(Un.x,2),ri=Math.pow(ya,2)*Math.pow(Un.y,2)+Math.pow(na,2)*Math.pow(Un.x,2),Ba=qa/ri;Ba=Ba<0?0:Ba;var Fa=(Be!==Ue?1:-1)*fa(Ba),oi={x:Fa*(ya*Un.y/na),y:Fa*(-(na*Un.x)/ya)},Oi={x:vn(Fn)*oi.x-Tn(Fn)*oi.y+(et+ur)/2,y:Tn(Fn)*oi.x+vn(Fn)*oi.y+(pt+Br)/2},Ei={x:(Un.x-oi.x)/ya,y:(Un.y-oi.y)/na},bs=fn({x:1,y:0},Ei),uf={x:(-Un.x-oi.x)/ya,y:(-Un.y-oi.y)/na},tu=fn(Ei,uf);!Ue&&tu>0?tu-=2*da:Ue&&tu<0&&(tu+=2*da),tu%=2*da;var Ws=bs+tu*Hr,hu=ya*vn(Ws),ff=na*Tn(Ws),vu={x:vn(Fn)*hu-Tn(Fn)*ff+Oi.x,y:Tn(Fn)*hu+vn(Fn)*ff+Oi.y};return vu}function nr(et,pt,St,Ut,ne,Be,Ue,ur,Br,Hr,xn){var Tn,vn=xn.bbox,fa=vn===void 0?!0:vn,da=xn.length,ya=da===void 0?!0:da,na=xn.sampleSize,Da=na===void 0?30:na,Fn=typeof Hr=="number",Ia=et,ia=pt,Un=0,Ma=[Ia,ia,Un],qa=[Ia,ia],ri=0,Ba={x:0,y:0},Fa=[{x:Ia,y:ia}];Fn&&Hr<=0&&(Ba={x:Ia,y:ia});for(var oi=0;oi<=Da;oi+=1){if(ri=oi/Da,Tn=Qe(et,pt,St,Ut,ne,Be,Ue,ur,Br,ri),Ia=Tn.x,ia=Tn.y,fa&&Fa.push({x:Ia,y:ia}),ya&&(Un+=Nn(qa,[Ia,ia])),qa=[Ia,ia],Fn&&Un>=Hr&&Hr>Ma[2]){var Oi=(Un-Hr)/(Un-Ma[2]);Ba={x:qa[0]*(1-Oi)+Ma[0]*Oi,y:qa[1]*(1-Oi)+Ma[1]*Oi}}Ma=[Ia,ia,Un]}return Fn&&Hr>=Un&&(Ba={x:ur,y:Br}),{length:Un,point:Ba,min:{x:Math.min.apply(null,Fa.map(function(Ei){return Ei.x})),y:Math.min.apply(null,Fa.map(function(Ei){return Ei.y}))},max:{x:Math.max.apply(null,Fa.map(function(Ei){return Ei.x})),y:Math.max.apply(null,Fa.map(function(Ei){return Ei.y}))}}}function dr(et,pt,St,Ut,ne,Be,Ue,ur,Br){var Hr=1-Br;return{x:Math.pow(Hr,3)*et+3*Math.pow(Hr,2)*Br*St+3*Hr*Math.pow(Br,2)*ne+Math.pow(Br,3)*Ue,y:Math.pow(Hr,3)*pt+3*Math.pow(Hr,2)*Br*Ut+3*Hr*Math.pow(Br,2)*Be+Math.pow(Br,3)*ur}}function Pr(et,pt,St,Ut,ne,Be,Ue,ur,Br,Hr){var xn,Tn=Hr.bbox,vn=Tn===void 0?!0:Tn,fa=Hr.length,da=fa===void 0?!0:fa,ya=Hr.sampleSize,na=ya===void 0?10:ya,Da=typeof Br=="number",Fn=et,Ia=pt,ia=0,Un=[Fn,Ia,ia],Ma=[Fn,Ia],qa=0,ri={x:0,y:0},Ba=[{x:Fn,y:Ia}];Da&&Br<=0&&(ri={x:Fn,y:Ia});for(var Fa=0;Fa<=na;Fa+=1){if(qa=Fa/na,xn=dr(et,pt,St,Ut,ne,Be,Ue,ur,qa),Fn=xn.x,Ia=xn.y,vn&&Ba.push({x:Fn,y:Ia}),da&&(ia+=Nn(Ma,[Fn,Ia])),Ma=[Fn,Ia],Da&&ia>=Br&&Br>Un[2]){var oi=(ia-Br)/(ia-Un[2]);ri={x:Ma[0]*(1-oi)+Un[0]*oi,y:Ma[1]*(1-oi)+Un[1]*oi}}Un=[Fn,Ia,ia]}return Da&&Br>=ia&&(ri={x:Ue,y:ur}),{length:ia,point:ri,min:{x:Math.min.apply(null,Ba.map(function(Oi){return Oi.x})),y:Math.min.apply(null,Ba.map(function(Oi){return Oi.y}))},max:{x:Math.max.apply(null,Ba.map(function(Oi){return Oi.x})),y:Math.max.apply(null,Ba.map(function(Oi){return Oi.y}))}}}function en(et,pt,St,Ut,ne,Be,Ue){var ur=1-Ue;return{x:Math.pow(ur,2)*et+2*ur*Ue*St+Math.pow(Ue,2)*ne,y:Math.pow(ur,2)*pt+2*ur*Ue*Ut+Math.pow(Ue,2)*Be}}function pn(et,pt,St,Ut,ne,Be,Ue,ur){var Br,Hr=ur.bbox,xn=Hr===void 0?!0:Hr,Tn=ur.length,vn=Tn===void 0?!0:Tn,fa=ur.sampleSize,da=fa===void 0?10:fa,ya=typeof Ue=="number",na=et,Da=pt,Fn=0,Ia=[na,Da,Fn],ia=[na,Da],Un=0,Ma={x:0,y:0},qa=[{x:na,y:Da}];ya&&Ue<=0&&(Ma={x:na,y:Da});for(var ri=0;ri<=da;ri+=1){if(Un=ri/da,Br=en(et,pt,St,Ut,ne,Be,Un),na=Br.x,Da=Br.y,xn&&qa.push({x:na,y:Da}),vn&&(Fn+=Nn(ia,[na,Da])),ia=[na,Da],ya&&Fn>=Ue&&Ue>Ia[2]){var Ba=(Fn-Ue)/(Fn-Ia[2]);Ma={x:ia[0]*(1-Ba)+Ia[0]*Ba,y:ia[1]*(1-Ba)+Ia[1]*Ba}}Ia=[na,Da,Fn]}return ya&&Ue>=Fn&&(Ma={x:ne,y:Be}),{length:Fn,point:Ma,min:{x:Math.min.apply(null,qa.map(function(Fa){return Fa.x})),y:Math.min.apply(null,qa.map(function(Fa){return Fa.y}))},max:{x:Math.max.apply(null,qa.map(function(Fa){return Fa.x})),y:Math.max.apply(null,qa.map(function(Fa){return Fa.y}))}}}function rn(et,pt,St){for(var Ut,ne,Be,Ue,ur,Br,Hr=re(et),xn=typeof pt=="number",Tn,vn=[],fa,da=0,ya=0,na=0,Da=0,Fn,Ia=[],ia=[],Un=0,Ma={x:0,y:0},qa=Ma,ri=Ma,Ba=Ma,Fa=0,oi=0,Oi=Hr.length;oi<Oi;oi+=1)Fn=Hr[oi],fa=Fn[0],Tn=fa==="M",vn=Tn?vn:[da,ya].concat(Fn.slice(1)),Tn?(na=Fn[1],Da=Fn[2],Ma={x:na,y:Da},qa=Ma,Un=0,xn&&pt<.001&&(Ba=Ma)):fa==="L"?(Ut=Ln(vn[0],vn[1],vn[2],vn[3],(pt||0)-Fa),Un=Ut.length,Ma=Ut.min,qa=Ut.max,ri=Ut.point):fa==="A"?(ne=nr(vn[0],vn[1],vn[2],vn[3],vn[4],vn[5],vn[6],vn[7],vn[8],(pt||0)-Fa,St||{}),Un=ne.length,Ma=ne.min,qa=ne.max,ri=ne.point):fa==="C"?(Be=Pr(vn[0],vn[1],vn[2],vn[3],vn[4],vn[5],vn[6],vn[7],(pt||0)-Fa,St||{}),Un=Be.length,Ma=Be.min,qa=Be.max,ri=Be.point):fa==="Q"?(Ue=pn(vn[0],vn[1],vn[2],vn[3],vn[4],vn[5],(pt||0)-Fa,St||{}),Un=Ue.length,Ma=Ue.min,qa=Ue.max,ri=Ue.point):fa==="Z"&&(vn=[da,ya,na,Da],ur=Ln(vn[0],vn[1],vn[2],vn[3],(pt||0)-Fa),Un=ur.length,Ma=ur.min,qa=ur.max,ri=ur.point),xn&&Fa<pt&&Fa+Un>=pt&&(Ba=ri),ia.push(qa),Ia.push(Ma),Fa+=Un,Br=fa!=="Z"?Fn.slice(-2):[na,Da],da=Br[0],ya=Br[1];return xn&&pt>=Fa&&(Ba={x:da,y:ya}),{length:Fa,point:Ba,min:{x:Math.min.apply(null,Ia.map(function(Ei){return Ei.x})),y:Math.min.apply(null,Ia.map(function(Ei){return Ei.y}))},max:{x:Math.max.apply(null,ia.map(function(Ei){return Ei.x})),y:Math.max.apply(null,ia.map(function(Ei){return Ei.y}))}}}function jn(et,pt){if(!et)return{x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0};var St=rn(et,void 0,(0,Ft.__assign)((0,Ft.__assign)({},pt),{length:!1})),Ut=St.min,ne=Ut.x,Be=Ut.y,Ue=St.max,ur=Ue.x,Br=Ue.y,Hr=ur-ne,xn=Br-Be;return{width:Hr,height:xn,x:ne,y:Be,x2:ur,y2:Br,cx:ne+Hr/2,cy:Be+xn/2,cz:Math.max(Hr,xn)+Math.min(Hr,xn)/2}}function Hn(et,pt){return rn(et,void 0,(0,Ft.__assign)((0,Ft.__assign)({},pt),{bbox:!1,length:!0})).length}function oa(et,pt){if(!et)return{length:0,x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0};var St=rn(et,void 0,(0,Ft.__assign)((0,Ft.__assign)({},pt),{bbox:!0,length:!0})),Ut=St.length,ne=St.min,Be=ne.x,Ue=ne.y,ur=St.max,Br=ur.x,Hr=ur.y,xn=Br-Be,Tn=Hr-Ue;return{length:Ut,width:xn,height:Tn,x:Be,y:Ue,x2:Br,y2:Hr,cx:Be+xn/2,cy:Ue+Tn/2,cz:Math.max(xn,Tn)+Math.min(xn,Tn)/2}}function dn(et){var pt=et.length,St=pt-1;return et.map(function(Ut,ne){return et.map(function(Be,Ue){var ur=ne+Ue,Br;return Ue===0||et[ur]&&et[ur][0]==="M"?(Br=et[ur],["M"].concat(Br.slice(-2))):(ur>=pt&&(ur-=St),et[ur])})})}function Wn(et,pt){var St=et.length-1,Ut=[],ne=0,Be=0,Ue=dn(et);return Ue.forEach(function(ur,Br){et.slice(1).forEach(function(Hr,xn){Be+=Nn(et[(Br+xn)%St].slice(-2),pt[xn%St].slice(-2))}),Ut[Br]=Be,Be=0}),ne=Ut.indexOf(Math.min.apply(null,Ut)),Ue[ne]}function Dn(et,pt,St,Ut,ne,Be,Ue,ur){return 3*((ur-pt)*(St+ne)-(Ue-et)*(Ut+Be)+Ut*(et-ne)-St*(pt-Be)+ur*(ne+et/3)-Ue*(Be+pt/3))/20}function Cn(et){var pt=0,St=0,Ut=0;return gn(et).map(function(ne){var Be;switch(ne[0]){case"M":return pt=ne[1],St=ne[2],0;default:var Ue=ne.slice(1),ur=Ue[0],Br=Ue[1],Hr=Ue[2],xn=Ue[3],Tn=Ue[4],vn=Ue[5];return Ut=Dn(pt,St,ur,Br,Hr,xn,Tn,vn),Be=ne.slice(-2),pt=Be[0],St=Be[1],Ut}}).reduce(function(ne,Be){return ne+Be},0)}function la(et){return Cn(et)>=0}function K(et,pt,St){return rn(et,pt,(0,Ft.__assign)((0,Ft.__assign)({},St),{bbox:!1,length:!0})).point}function ft(et,pt){var St=Yt(et);if(typeof St=="string")throw TypeError(St);var Ut=St.slice(),ne=Hn(Ut),Be=Ut.length-1,Ue=0,ur=0,Br=St[0],Hr=Br.slice(-2),xn=Hr[0],Tn=Hr[1],vn={x:xn,y:Tn};if(Be<=0||!pt||!Number.isFinite(pt))return{segment:Br,index:0,length:ur,point:vn,lengthAtSegment:Ue};if(pt>=ne)return Ut=St.slice(0,-1),Ue=Hn(Ut),ur=ne-Ue,{segment:St[Be],index:Be,length:ur,lengthAtSegment:Ue};for(var fa=[];Be>0;)Br=Ut[Be],Ut=Ut.slice(0,-1),Ue=Hn(Ut),ur=ne-Ue,ne=Ue,fa.push({segment:Br,index:Be,length:ur,lengthAtSegment:Ue}),Be-=1;return fa.find(function(da){var ya=da.lengthAtSegment;return ya<=pt})}function nt(et,pt){for(var St=Yt(et),Ut=re(St),ne=Hn(St),Be=function(Un){var Ma=Un.x-pt.x,qa=Un.y-pt.y;return Ma*Ma+qa*qa},Ue=8,ur,Br=0,Hr,xn=0,Tn=1/0,vn=0;vn<=ne;vn+=Ue)ur=K(Ut,vn),Br=Be(ur),Br<Tn&&(Hr=ur,xn=vn,Tn=Br);Ue/=2;for(var fa,da,ya=0,na=0,Da=0,Fn=0;Ue>.5;)ya=xn-Ue,fa=K(Ut,ya),Da=Be(fa),na=xn+Ue,da=K(Ut,na),Fn=Be(da),ya>=0&&Da<Tn?(Hr=fa,xn=ya,Tn=Da):na<=ne&&Fn<Tn?(Hr=da,xn=na,Tn=Fn):Ue/=2;var Ia=ft(St,xn),ia=Math.sqrt(Tn);return{closest:Hr,distance:ia,segment:Ia}}function k(et,pt){var St=nt(et,pt).distance;return Math.abs(St)<.001}function M(et,pt){pt===void 0&&(pt=.5);var St=et.slice(0,2),Ut=et.slice(2,4),ne=et.slice(4,6),Be=et.slice(6,8),Ue=Or(St,Ut,pt),ur=Or(Ut,ne,pt),Br=Or(ne,Be,pt),Hr=Or(Ue,ur,pt),xn=Or(ur,Br,pt),Tn=Or(Hr,xn,pt);return[["C"].concat(Ue,Hr,Tn),["C"].concat(xn,Br,Be)]}function C(et){return et.map(function(pt,St,Ut){var ne=St&&Ut[St-1].slice(-2).concat(pt.slice(1)),Be=St?Pr(ne[0],ne[1],ne[2],ne[3],ne[4],ne[5],ne[6],ne[7],ne[8],{bbox:!1}).length:0,Ue;return St?Ue=Be?M(ne):[pt,pt]:Ue=[pt],{s:pt,ss:Ue,l:Be}})}function j(et,pt,St){var Ut=C(et),ne=C(pt),Be=Ut.length,Ue=ne.length,ur=Ut.filter(function(na){return na.l}).length,Br=ne.filter(function(na){return na.l}).length,Hr=Ut.filter(function(na){return na.l}).reduce(function(na,Da){var Fn=Da.l;return na+Fn},0)/ur||0,xn=ne.filter(function(na){return na.l}).reduce(function(na,Da){var Fn=Da.l;return na+Fn},0)/Br||0,Tn=St||Math.max(Be,Ue),vn=[Hr,xn],fa=[Tn-Be,Tn-Ue],da=0,ya=[Ut,ne].map(function(na,Da){return na.l===Tn?na.map(function(Fn){return Fn.s}):na.map(function(Fn,Ia){return da=Ia&&fa[Da]&&Fn.l>=vn[Da],fa[Da]-=da?1:0,da?Fn.ss:[Fn.s]}).flat()});return ya[0].length===ya[1].length?ya:j(ya[0],ya[1],Tn)}var xt=function(et){return et!==null&&typeof et!="function"&&isFinite(et.length)},At=xt,wt=function(et,pt){return At(et)?et.indexOf(pt)>-1:!1},Pt=wt,Me=function(et,pt){if(!At(et))return et;for(var St=[],Ut=0;Ut<et.length;Ut++){var ne=et[Ut];pt(ne,Ut)&&St.push(ne)}return St},ve=Me,Ke=function(et,pt){return pt===void 0&&(pt=[]),ve(et,function(St){return!Pt(pt,St)})},br=Ke,ir=function(et){return et==null},mr=ir,Mn={}.toString,Xe=function(et,pt){return Mn.call(et)==="[object "+pt+"]"},vr=Xe,Er=function(et){return Array.isArray?Array.isArray(et):vr(et,"Array")},on=function(et){var pt=typeof et;return et!==null&&pt==="object"||pt==="function"};function Wr(et,pt){if(et){var St;if(Er(et))for(var Ut=0,ne=et.length;Ut<ne&&(St=pt(et[Ut],Ut),St!==!1);Ut++);else if(on(et)){for(var Be in et)if(et.hasOwnProperty(Be)&&(St=pt(et[Be],Be),St===!1))break}}}var xa=Wr,Ta=Object.keys?function(et){return Object.keys(et)}:function(et){var pt=[];return xa(et,function(St,Ut){P(et)&&Ut==="prototype"||pt.push(Ut)}),pt},Rn=Ta;function Jn(et,pt){var St=Rn(pt),Ut=St.length;if(mr(et))return!Ut;for(var ne=0;ne<Ut;ne+=1){var Be=St[ne];if(pt[Be]!==et[Be]||!(Be in et))return!1}return!0}var Ga=Jn,Aa=function(et){return typeof et=="object"&&et!==null},an=Aa,Vn=function(et){if(!an(et)||!vr(et,"Object"))return!1;if(Object.getPrototypeOf(et)===null)return!0;for(var pt=et;Object.getPrototypeOf(pt)!==null;)pt=Object.getPrototypeOf(pt);return Object.getPrototypeOf(et)===pt},me=Vn;function Dt(et,pt){if(!Er(et))return null;var St;if(P(pt)&&(St=pt),me(pt)&&(St=function(ne){return Ga(ne,pt)}),St){for(var Ut=0;Ut<et.length;Ut+=1)if(St(et[Ut]))return et[Ut]}return null}var fe=Dt;function Ae(et,pt,St){St===void 0&&(St=0);for(var Ut=St;Ut<et.length;Ut++)if(pt(et[Ut],Ut))return Ut;return-1}var be=Ae,De=function(et,pt){for(var St=null,Ut=0;Ut<et.length;Ut++){var ne=et[Ut],Be=ne[pt];if(!mr(Be)){Er(Be)?St=Be[0]:St=Be;break}}return St},sr=De,Fr=function(et){if(!Er(et))return[];for(var pt=[],St=0;St<et.length;St++)pt=pt.concat(et[St]);return pt},Jr=Fr,Pn=function(et,pt){if(pt===void 0&&(pt=[]),!Er(et))pt.push(et);else for(var St=0;St<et.length;St+=1)Pn(et[St],pt);return pt},Bn=Pn,Zn=function(et){if(Er(et))return et.reduce(function(pt,St){return Math.max(pt,St)},et[0])},ba=function(et){if(Er(et))return et.reduce(function(pt,St){return Math.min(pt,St)},et[0])},Ca=function(et){var pt=et.filter(function(Ue){return!isNaN(Ue)});if(!pt.length)return{min:0,max:0};if(Er(et[0])){for(var St=[],Ut=0;Ut<et.length;Ut++)St=St.concat(et[Ut]);pt=St}var ne=Zn(pt),Be=ba(pt);return{min:Be,max:ne}},li=Ca,ta=Array.prototype,fi=ta.splice,Co=ta.indexOf,La=function(et){for(var pt=[],St=1;St<arguments.length;St++)pt[St-1]=arguments[St];for(var Ut=0;Ut<pt.length;Ut++)for(var ne=pt[Ut],Be=-1;(Be=Co.call(et,ne))>-1;)fi.call(et,Be,1);return et},xi=La,so=Array.prototype.splice,To=function(pt,St){if(!At(pt))return[];for(var Ut=pt?St.length:0,ne=Ut-1;Ut--;){var Be=void 0,Ue=St[Ut];(Ut===ne||Ue!==Be)&&(Be=Ue,so.call(pt,Ue,1))}return pt},bo=To,uo=function(et,pt,St){if(!Er(et)&&!me(et))return et;var Ut=St;return xa(et,function(ne,Be){Ut=pt(Ut,ne,Be)}),Ut},Hi=uo,ds=function(et,pt){var St=[];if(!At(et))return St;for(var Ut=-1,ne=[],Be=et.length;++Ut<Be;){var Ue=et[Ut];pt(Ue,Ut,et)&&(St.push(Ue),ne.push(Ut))}return bo(et,ne),St},zi=ds,Ui=function(et){return vr(et,"String")};function gs(et,pt){var St;if(P(pt))St=function(ne,Be){return pt(ne)-pt(Be)};else{var Ut=[];Ui(pt)?Ut.push(pt):Er(pt)&&(Ut=pt),St=function(ne,Be){for(var Ue=0;Ue<Ut.length;Ue+=1){var ur=Ut[Ue];if(ne[ur]>Be[ur])return 1;if(ne[ur]<Be[ur])return-1}return 0}}return et.sort(St),et}var Ms=gs;function Go(et,pt){pt===void 0&&(pt=new Map);var St=[];if(Array.isArray(et))for(var Ut=0,ne=et.length;Ut<ne;Ut++){var Be=et[Ut];pt.has(Be)||(St.push(Be),pt.set(Be,!0))}return St}var _o=function(){for(var et=[],pt=0;pt<arguments.length;pt++)et[pt]=arguments[pt];return Go([].concat.apply([],et))},Io=_o,$s=function(et,pt){for(var St=[],Ut={},ne=0;ne<et.length;ne++){var Be=et[ne],Ue=Be[pt];if(!mr(Ue)){Er(Ue)||(Ue=[Ue]);for(var ur=0;ur<Ue.length;ur++){var Br=Ue[ur];Ut[Br]||(St.push(Br),Ut[Br]=!0)}}}return St};function Yn(et){if(At(et))return et[0]}function So(et){if(At(et)){var pt=et;return pt[pt.length-1]}}function Oo(et,pt){return Er(et)||Ui(et)?et[0]===pt:!1}var Wi=Oo;function zn(et,pt){return Er(et)||Ui(et)?et[et.length-1]===pt:!1}var Lo=zn,Ai=function(et,pt){for(var St=0;St<et.length;St++)if(!pt(et[St],St))return!1;return!0},zo=Ai,Uo=function(et,pt){for(var St=0;St<et.length;St++)if(pt(et[St],St))return!0;return!1},ps=Uo,eo=Object.prototype.hasOwnProperty;function ro(et,pt){if(!pt||!Er(et))return{};for(var St={},Ut=P(pt)?pt:function(ur){return ur[pt]},ne,Be=0;Be<et.length;Be++){var Ue=et[Be];ne=Ut(Ue),eo.call(St,ne)?St[ne].push(Ue):St[ne]=[Ue]}return St}var ei=ro;function fo(et,pt){if(!pt)return{0:et};if(!P(pt)){var St=Er(pt)?pt:pt.replace(/\s+/g,"").split("*");pt=function(Ut){for(var ne="_",Be=0,Ue=St.length;Be<Ue;Be++)ne+=Ut[St[Be]]&&Ut[St[Be]].toString();return ne}}return ei(et,pt)}var Do=function(et,pt){if(!pt)return[et];var St=fo(et,pt),Ut=[];for(var ne in St)Ut.push(St[ne]);return Ut};function Wo(et,pt){return et["_wrap_"+pt]}var No=Wo;function is(et,pt){if(et["_wrap_"+pt])return et["_wrap_"+pt];var St=function(Ut){et[pt](Ut)};return et["_wrap_"+pt]=St,St}var Xo=is,Jo={};function Xa(et){var pt=Jo[et];if(!pt){for(var St=et.toString(16),Ut=St.length;Ut<6;Ut++)St="0"+St;pt="#"+St,Jo[et]=pt}return pt}var As=Xa;function iu(et){var pt=0,St=0,Ut=0,ne=0;return Er(et)?et.length===1?pt=St=Ut=ne=et[0]:et.length===2?(pt=Ut=et[0],St=ne=et[1]):et.length===3?(pt=et[0],St=ne=et[1],Ut=et[2]):(pt=et[0],St=et[1],Ut=et[2],ne=et[3]):pt=St=Ut=ne=et,{r1:pt,r2:St,r3:Ut,r4:ne}}var Xi=iu,os=function(et,pt,St){return et<pt?pt:et>St?St:et},Eo=os,Yi=function(et,pt){var St=pt.toString(),Ut=St.indexOf(".");if(Ut===-1)return Math.round(et);var ne=St.substr(Ut+1).length;return ne>20&&(ne=20),parseFloat(et.toFixed(ne))},co=Yi,pa=function(et){return vr(et,"Number")},ja=pa,yi=function(et){return ja(et)&&et%1!==0},no=yi,ki=function(et){return ja(et)&&et%2===0},Ki=ki,Yo=Number.isInteger?Number.isInteger:function(et){return ja(et)&&et%1===0},wo=Yo,ts=function(et){return ja(et)&&et<0},lo=ts,Rs=1e-5;function ou(et,pt,St){return St===void 0&&(St=Rs),Math.abs(et-pt)<St}var Cs=function(et){return ja(et)&&et%2!==0},ci=Cs,Po=function(et){return ja(et)&&et>0},Wu=Po,ho=function(et,pt){if(Er(et)){for(var St,Ut=-1/0,ne=0;ne<et.length;ne++){var Be=et[ne],Ue=P(pt)?pt(Be):Be[pt];Ue>Ut&&(St=Be,Ut=Ue)}return St}},Bs=function(et,pt){if(Er(et)){for(var St,Ut=1/0,ne=0;ne<et.length;ne++){var Be=et[ne],Ue=P(pt)?pt(Be):Be[pt];Ue<Ut&&(St=Be,Ut=Ue)}return St}},Ts=function(et,pt){return(et%pt+pt)%pt},Vo=Ts,Fs=180/Math.PI,ss=function(et){return Fs*et},jo=ss,us=parseInt,su=Math.PI/180,Gs=function(et){return su*et},fs=Gs,Tt=xa,jt=function(et,pt){return et.hasOwnProperty(pt)},ze=jt,Ze=Object.values?function(et){return Object.values(et)}:function(et){var pt=[];return xa(et,function(St,Ut){P(et)&&Ut==="prototype"||pt.push(St)}),pt},Cr=Ze,cn=function(et,pt){return Pt(Cr(et),pt)},mn=function(et){return mr(et)?"":et.toString()},aa=function(et){return mn(et).toLowerCase()},ai=aa,Zi=function(et){var pt=mn(et);return pt.charAt(0).toLowerCase()+pt.substring(1)},ao=Zi;function zs(et,pt){return!et||!pt?et:et.replace(/\\?\{([^{}]+)\}/g,function(St,Ut){return St.charAt(0)==="\\"?St.slice(1):pt[Ut]===void 0?"":pt[Ut]})}var Mu=zs,Ri=function(et){return mn(et).toUpperCase()},vo=Ri,qs=function(et){var pt=mn(et);return pt.charAt(0).toUpperCase()+pt.substring(1)},Xu=qs,Au={}.toString,uu=function(et){return Au.call(et).replace(/^\[object /,"").replace(/]$/,"")},Qs=uu,fu=function(et){return vr(et,"Arguments")},Is=fu,Js=function(et){return vr(et,"Boolean")},cs=Js,Mo=function(et){return vr(et,"Date")},rf=Mo,kf=function(et){return vr(et,"Error")},Rf=kf;function Os(et){return ja(et)&&isFinite(et)}var Bf=function(et){return et===null},h=Bf,D=Object.prototype,vt=function(et){var pt=et&&et.constructor,St=typeof pt=="function"&&pt.prototype||D;return et===St},Et=vt,Lt=function(et){return vr(et,"RegExp")},Xt=Lt,Vt=function(et){return et===void 0},ue=Vt,he=function(et){return et instanceof Element||et instanceof Document},Ce=he;function Ye(et){var pt=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(St){return setTimeout(St,16)};return pt(et)}function yr(et){var pt=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;pt(et)}function xr(et,pt){for(var St in pt)pt.hasOwnProperty(St)&&St!=="constructor"&&pt[St]!==void 0&&(et[St]=pt[St])}function pr(et,pt,St,Ut){return pt&&xr(et,pt),St&&xr(et,St),Ut&&xr(et,Ut),et}var Zr=function(){for(var et=[],pt=0;pt<arguments.length;pt++)et[pt]=arguments[pt];for(var St=et[0],Ut=1;Ut<et.length;Ut++){var ne=et[Ut];P(ne)&&(ne=ne.prototype),pr(St.prototype,ne)}},qr=Zr,Tr=function(et){if(typeof et!="object"||et===null)return et;var pt;if(Er(et)){pt=[];for(var St=0,Ut=et.length;St<Ut;St++)typeof et[St]=="object"&&et[St]!=null?pt[St]=Tr(et[St]):pt[St]=et[St]}else{pt={};for(var ne in et)typeof et[ne]=="object"&&et[ne]!=null?pt[ne]=Tr(et[ne]):pt[ne]=et[ne]}return pt},_n=Tr;function Ea(et,pt,St){var Ut;return function(){var ne=this,Be=arguments,Ue=function(){Ut=null,St||et.apply(ne,Be)},ur=St&&!Ut;clearTimeout(Ut),Ut=setTimeout(Ue,pt),ur&&et.apply(ne,Be)}}var wa=Ea,ha=5;function qn(et,pt){if(Object.hasOwn)return Object.hasOwn(et,pt);if(et==null)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(et),pt)}function sa(et,pt,St,Ut){St=St||0,Ut=Ut||ha;for(var ne in pt)if(qn(pt,ne)){var Be=pt[ne];Be!==null&&me(Be)?(me(et[ne])||(et[ne]={}),St<Ut?sa(et[ne],Be,St+1,Ut):et[ne]=pt[ne]):Er(Be)?(et[ne]=[],et[ne]=et[ne].concat(Be)):Be!==void 0&&(et[ne]=Be)}}var Ni=function(et){for(var pt=[],St=1;St<arguments.length;St++)pt[St-1]=arguments[St];for(var Ut=0;Ut<pt.length;Ut+=1)sa(et,pt[Ut]);return et},Ci=Ni,_i=function(et,pt,St,Ut){P(pt)||(St=pt,pt=et,et=function(){});var ne=Object.create?function(Ue,ur){return Object.create(Ue,{constructor:{value:ur}})}:function(Ue,ur){function Br(){}Br.prototype=Ue;var Hr=new Br;return Hr.constructor=ur,Hr},Be=ne(pt.prototype,et);return et.prototype=pr(Be,et.prototype),et.superclass=ne(pt.prototype,pt),pr(Be,St),pr(et,Ut),et},Ti=_i,Ii=function(et,pt){if(!At(et))return-1;var St=Array.prototype.indexOf;if(St)return St.call(et,pt);for(var Ut=-1,ne=0;ne<et.length;ne++)if(et[ne]===pt){Ut=ne;break}return Ut},Bi=Ii,$i=Object.prototype.hasOwnProperty;function za(et){if(mr(et))return!0;if(At(et))return!et.length;var pt=Qs(et);if(pt==="Map"||pt==="Set")return!et.size;if(Et(et))return!Object.keys(et).length;for(var St in et)if($i.call(et,St))return!1;return!0}var ii=za,ls=function(et,pt){if(et===pt)return!0;if(!et||!pt||Ui(et)||Ui(pt))return!1;if(At(et)||At(pt)){if(et.length!==pt.length)return!1;for(var St=!0,Ut=0;Ut<et.length&&(St=ls(et[Ut],pt[Ut]),!!St);Ut++);return St}if(an(et)||an(pt)){var ne=Object.keys(et),Be=Object.keys(pt);if(ne.length!==Be.length)return!1;for(var St=!0,Ut=0;Ut<ne.length&&(St=ls(et[ne[Ut]],pt[ne[Ut]]),!!St);Ut++);return St}return!1},ys=ls,ko=function(et,pt,St){return P(St)?!!St(et,pt):ys(et,pt)},Cu=function(et,pt){if(!At(et))return et;for(var St=[],Ut=0;Ut<et.length;Ut++){var ne=et[Ut];St.push(pt(ne,Ut))}return St},Ff=Cu,xc=function(et){return et},bc=function(et,pt){pt===void 0&&(pt=xc);var St={};return on(et)&&!mr(et)&&Object.keys(et).forEach(function(Ut){St[Ut]=pt(et[Ut],Ut)}),St},Ec=function(et,pt,St){for(var Ut=0,ne=Ui(pt)?pt.split("."):pt;et&&Ut<ne.length;)et=et[ne[Ut++]];return et===void 0||Ut<ne.length?St:et},Gf=function(et,pt,St){var Ut=et,ne=Ui(pt)?pt.split("."):pt;return ne.forEach(function(Be,Ue){Ue<ne.length-1?(on(Ut[Be])||(Ut[Be]=ja(ne[Ue+1])?[]:{}),Ut=Ut[Be]):Ut[Be]=St}),et},zf=Object.prototype.hasOwnProperty,wc=function(et,pt){if(et===null||!me(et))return{};var St={};return xa(pt,function(Ut){zf.call(et,Ut)&&(St[Ut]=et[Ut])}),St},nf=function(et,pt){return Hi(et,function(St,Ut,ne){return pt.includes(ne)||(St[ne]=Ut),St},{})},af=function(et,pt,St){var Ut,ne,Be,Ue,ur=0;St||(St={});var Br=function(){ur=St.leading===!1?0:Date.now(),Ut=null,Ue=et.apply(ne,Be),Ut||(ne=Be=null)},Hr=function(){var xn=Date.now();!ur&&St.leading===!1&&(ur=xn);var Tn=pt-(xn-ur);return ne=this,Be=arguments,Tn<=0||Tn>pt?(Ut&&(clearTimeout(Ut),Ut=null),ur=xn,Ue=et.apply(ne,Be),Ut||(ne=Be=null)):!Ut&&St.trailing!==!1&&(Ut=setTimeout(Br,Tn)),Ue};return Hr.cancel=function(){clearTimeout(Ut),ur=0,Ut=ne=Be=null},Hr},_c=function(et){return At(et)?Array.prototype.slice.call(et):[]},of={},cu=function(et){return et=et||"g",of[et]?of[et]+=1:of[et]=1,et+of[et]},Sc=function(){},wn=function(et){return et};function Tu(et){return mr(et)?0:At(et)?et.length:Object.keys(et).length}var Ua=function(){function et(){this.map={}}return et.prototype.has=function(pt){return this.map[pt]!==void 0},et.prototype.get=function(pt,St){var Ut=this.map[pt];return Ut===void 0?St:Ut},et.prototype.set=function(pt,St){this.map[pt]=St},et.prototype.clear=function(){this.map={}},et.prototype.delete=function(pt){delete this.map[pt]},et.prototype.size=function(){return Object.keys(this.map).length},et}(),sf=Ua,Uf=1e-6;function Us(et){return Math.abs(et)<Uf?0:et<0?-1:1}function Wf(et,pt,St){return(St[0]-et[0])*(pt[1]-et[1])===(pt[0]-et[0])*(St[1]-et[1])&&Math.min(et[0],pt[0])<=St[0]&&St[0]<=Math.max(et[0],pt[0])&&Math.min(et[1],pt[1])<=St[1]&&St[1]<=Math.max(et[1],pt[1])}function lu(et,pt,St){var Ut=!1,ne=et.length;if(ne<=2)return!1;for(var Be=0;Be<ne;Be++){var Ue=et[Be],ur=et[(Be+1)%ne];if(Wf(Ue,ur,[pt,St]))return!0;Us(Ue[1]-St)>0!=Us(ur[1]-St)>0&&Us(pt-(St-Ue[1])*(Ue[0]-ur[0])/(Ue[1]-ur[1])-Ue[0])<0&&(Ut=!Ut)}return Ut}var Xf=function(et,pt,St){return et>=pt&&et<=St};function Yf(et,pt,St,Ut){var ne=.001,Be={x:St.x-et.x,y:St.y-et.y},Ue={x:pt.x-et.x,y:pt.y-et.y},ur={x:Ut.x-St.x,y:Ut.y-St.y},Br=Ue.x*ur.y-Ue.y*ur.x,Hr=Br*Br,xn=Ue.x*Ue.x+Ue.y*Ue.y,Tn=ur.x*ur.x+ur.y*ur.y,vn=null;if(Hr>ne*xn*Tn){var fa=(Be.x*ur.y-Be.y*ur.x)/Br,da=(Be.x*Ue.y-Be.y*Ue.x)/Br;Xf(fa,0,1)&&Xf(da,0,1)&&(vn={x:et.x+fa*Ue.x,y:et.y+fa*Ue.y})}return vn}function Vf(et){for(var pt=[],St=et.length,Ut=0;Ut<St-1;Ut++){var ne=et[Ut],Be=et[Ut+1];pt.push({from:{x:ne[0],y:ne[1]},to:{x:Be[0],y:Be[1]}})}if(pt.length>1){var Ue=et[0],ur=et[St-1];pt.push({from:{x:ur[0],y:ur[1]},to:{x:Ue[0],y:Ue[1]}})}return pt}function ms(et,pt){var St=!1;return et.forEach(function(Ut){if(Yf(Ut.from,Ut.to,pt.from,pt.to))return St=!0,!1}),St}function jf(et){var pt=et.map(function(Ut){return Ut[0]}),St=et.map(function(Ut){return Ut[1]});return{minX:Math.min.apply(null,pt),maxX:Math.max.apply(null,pt),minY:Math.min.apply(null,St),maxY:Math.max.apply(null,St)}}function Hf(et,pt){return!(pt.minX>et.maxX||pt.maxX<et.minX||pt.minY>et.maxY||pt.maxY<et.minY)}function bi(et,pt){if(et.length<2||pt.length<2)return!1;var St=jf(et),Ut=jf(pt);if(!Hf(St,Ut))return!1;var ne=!1;if(pt.forEach(function(Br){if(lu(et,Br[0],Br[1]))return ne=!0,!1}),ne||(et.forEach(function(Br){if(lu(pt,Br[0],Br[1]))return ne=!0,!1}),ne))return!0;var Be=Vf(et),Ue=Vf(pt),ur=!1;return Ue.forEach(function(Br){if(ms(Be,Br))return ur=!0,!1}),ur}function Yu(et){var pt=document.createElement("div");pt.innerHTML=et;var St=pt.childNodes[0];return St&&pt.contains(St)&&pt.removeChild(St),St}function xs(et,pt){if(et)return Object.keys(pt).forEach(function(St){et.style[St]=pt[St]}),et}},731278:function(He,F,z){"use strict";var G;G={value:!0};var X=z(858204);function R(g,A,_){var S=[0,0,0,0,0,0,0,0,0];return X.mat3.fromTranslation(S,_),X.mat3.multiply(g,S,A)}G=R;function L(g,A,_){var S=[0,0,0,0,0,0,0,0,0];return X.mat3.fromRotation(S,_),X.mat3.multiply(g,S,A)}G=L;function P(g,A,_){var S=[0,0,0,0,0,0,0,0,0];return X.mat3.fromScaling(S,_),X.mat3.multiply(g,S,A)}G=P;function N(g,A,_){return X.mat3.multiply(g,_,A)}function E(g,A){for(var _=g?[].concat(g):[1,0,0,0,1,0,0,0,1],S=0,O=A.length;S<O;S++){var B=A[S];switch(B[0]){case"t":R(_,_,[B[1],B[2]]);break;case"s":P(_,_,[B[1],B[2]]);break;case"r":L(_,_,B[1]);break;case"m":N(_,_,B[1]);break;default:break}}return _}F.vs=E;function x(g,A){return g[0]*A[1]-A[0]*g[1]}G=x;function p(g,A,_){var S=X.vec2.angle(g,A),O=x(g,A)>=0;return _?O?Math.PI*2-S:S:O?S:Math.PI*2-S}G=p;function y(g,A,_){return _?(g[0]=A[1],g[1]=-1*A[0]):(g[0]=-1*A[1],g[1]=A[0]),g}G=y},413810:function(He,F,z){"use strict";z.r(F),z.d(F,{Cache:function(){return fs},assign:function(){return ro},augment:function(){return fo},clamp:function(){return k},clearAnimationFrame:function(){return ps},clone:function(){return Wo},contains:function(){return L},debounce:function(){return is},deepMix:function(){return iu},difference:function(){return x},each:function(){return d},endsWith:function(){return Ln},every:function(){return Qe},extend:function(){return os},filter:function(){return N},find:function(){return dt},findIndex:function(){return It},firstValue:function(){return Ft},fixedBase:function(){return C},flatten:function(){return st},flattenDeep:function(){return kt},forIn:function(){return fe},get:function(){return lo},getEllipsisText:function(){return su},getRange:function(){return Pe},getType:function(){return To},getWrapBehavior:function(){return oa},group:function(){return jn},groupBy:function(){return pn},groupToMap:function(){return rn},has:function(){return Ae},hasKey:function(){return be},hasValue:function(){return Fr},head:function(){return Sr},identity:function(){return Vo},includes:function(){return L},indexOf:function(){return Yi},isArguments:function(){return uo},isArray:function(){return O},isArrayLike:function(){return X},isBoolean:function(){return ds},isDate:function(){return Ui},isDecimal:function(){return wt},isElement:function(){return zo},isEmpty:function(){return ja},isEqual:function(){return no},isEqualWith:function(){return ki},isError:function(){return Ms},isEven:function(){return Me},isFinite:function(){return Go},isFunction:function(){return A},isInteger:function(){return Ke},isMatch:function(){return $},isNegative:function(){return ir},isNil:function(){return S},isNull:function(){return Io},isNumber:function(){return xt},isNumberEqual:function(){return Mn},isObject:function(){return B},isObjectLike:function(){return rt},isOdd:function(){return vr},isPlainObject:function(){return it},isPositive:function(){return on},isPrototype:function(){return So},isRegExp:function(){return Wi},isString:function(){return re},isType:function(){return g},isUndefined:function(){return Lo},keys:function(){return Y},last:function(){return gn},lowerCase:function(){return Bn},lowerFirst:function(){return ba},map:function(){return Yo},mapValues:function(){return ts},max:function(){return ee},maxBy:function(){return Wr},measureTextWidth:function(){return us},memoize:function(){return Xo},min:function(){return $t},minBy:function(){return xa},mix:function(){return ro},mod:function(){return Rn},noop:function(){return Ts},number2color:function(){return la},omit:function(){return ci},parseRadius:function(){return ft},pick:function(){return Cs},pull:function(){return xe},pullAt:function(){return Wt},reduce:function(){return Yt},remove:function(){return Oe},requestAnimationFrame:function(){return Uo},set:function(){return Rs},size:function(){return Fs},some:function(){return dr},sortBy:function(){return Ge},startsWith:function(){return ln},substitute:function(){return li},throttle:function(){return Po},toArray:function(){return Wu},toDegree:function(){return Aa},toInteger:function(){return an},toRadian:function(){return Dt},toString:function(){return Jr},union:function(){return Or},uniq:function(){return Ct},uniqueId:function(){return Bs},upperCase:function(){return fi},upperFirst:function(){return La},values:function(){return sr},valuesOfKey:function(){return Ur},wrapBehavior:function(){return Wn}});var G=function(Tt){return Tt!==null&&typeof Tt!="function"&&isFinite(Tt.length)},X=G,R=function(Tt,jt){return X(Tt)?Tt.indexOf(jt)>-1:!1},L=R,P=function(Tt,jt){if(!X(Tt))return Tt;for(var ze=[],Ze=0;Ze<Tt.length;Ze++){var Cr=Tt[Ze];jt(Cr,Ze)&&ze.push(Cr)}return ze},N=P,E=function(Tt,jt){return jt===void 0&&(jt=[]),N(Tt,function(ze){return!L(jt,ze)})},x=E,p={}.toString,y=function(Tt,jt){return p.call(Tt)==="[object "+jt+"]"},g=y,A=function(Tt){return g(Tt,"Function")},_=function(Tt){return Tt==null},S=_,O=function(Tt){return Array.isArray?Array.isArray(Tt):g(Tt,"Array")},B=function(Tt){var jt=typeof Tt;return Tt!==null&&jt==="object"||jt==="function"};function m(Tt,jt){if(Tt){var ze;if(O(Tt))for(var Ze=0,Cr=Tt.length;Ze<Cr&&(ze=jt(Tt[Ze],Ze),ze!==!1);Ze++);else if(B(Tt)){for(var cn in Tt)if(Tt.hasOwnProperty(cn)&&(ze=jt(Tt[cn],cn),ze===!1))break}}}var d=m,tt=Object.keys?function(Tt){return Object.keys(Tt)}:function(Tt){var jt=[];return d(Tt,function(ze,Ze){A(Tt)&&Ze==="prototype"||jt.push(Ze)}),jt},Y=tt;function V(Tt,jt){var ze=Y(jt),Ze=ze.length;if(S(Tt))return!Ze;for(var Cr=0;Cr<Ze;Cr+=1){var cn=ze[Cr];if(jt[cn]!==Tt[cn]||!(cn in Tt))return!1}return!0}var $=V,q=function(Tt){return typeof Tt=="object"&&Tt!==null},rt=q,Q=function(Tt){if(!rt(Tt)||!g(Tt,"Object"))return!1;if(Object.getPrototypeOf(Tt)===null)return!0;for(var jt=Tt;Object.getPrototypeOf(jt)!==null;)jt=Object.getPrototypeOf(jt);return Object.getPrototypeOf(Tt)===jt},it=Q;function ht(Tt,jt){if(!O(Tt))return null;var ze;if(A(jt)&&(ze=jt),it(jt)&&(ze=function(Cr){return $(Cr,jt)}),ze){for(var Ze=0;Ze<Tt.length;Ze+=1)if(ze(Tt[Ze]))return Tt[Ze]}return null}var dt=ht;function Ot(Tt,jt,ze){ze===void 0&&(ze=0);for(var Ze=ze;Ze<Tt.length;Ze++)if(jt(Tt[Ze],Ze))return Ze;return-1}var It=Ot,Kt=function(Tt,jt){for(var ze=null,Ze=0;Ze<Tt.length;Ze++){var Cr=Tt[Ze],cn=Cr[jt];if(!S(cn)){O(cn)?ze=cn[0]:ze=cn;break}}return ze},Ft=Kt,Nt=function(Tt){if(!O(Tt))return[];for(var jt=[],ze=0;ze<Tt.length;ze++)jt=jt.concat(Tt[ze]);return jt},st=Nt,yt=function(Tt,jt){if(jt===void 0&&(jt=[]),!O(Tt))jt.push(Tt);else for(var ze=0;ze<Tt.length;ze+=1)yt(Tt[ze],jt);return jt},kt=yt,ee=function(Tt){if(O(Tt))return Tt.reduce(function(jt,ze){return Math.max(jt,ze)},Tt[0])},$t=function(Tt){if(O(Tt))return Tt.reduce(function(jt,ze){return Math.min(jt,ze)},Tt[0])},ge=function(Tt){var jt=Tt.filter(function(mn){return!isNaN(mn)});if(!jt.length)return{min:0,max:0};if(O(Tt[0])){for(var ze=[],Ze=0;Ze<Tt.length;Ze++)ze=ze.concat(Tt[Ze]);jt=ze}var Cr=ee(jt),cn=$t(jt);return{min:cn,max:Cr}},Pe=ge,er=Array.prototype,Jt=er.splice,ae=er.indexOf,Se=function(Tt){for(var jt=[],ze=1;ze<arguments.length;ze++)jt[ze-1]=arguments[ze];for(var Ze=0;Ze<jt.length;Ze++)for(var Cr=jt[Ze],cn=-1;(cn=ae.call(Tt,Cr))>-1;)Jt.call(Tt,cn,1);return Tt},xe=Se,we=Array.prototype.splice,zt=function(jt,ze){if(!X(jt))return[];for(var Ze=jt?ze.length:0,Cr=Ze-1;Ze--;){var cn=void 0,mn=ze[Ze];(Ze===Cr||mn!==cn)&&(cn=mn,we.call(jt,mn,1))}return jt},Wt=zt,Ie=function(Tt,jt,ze){if(!O(Tt)&&!it(Tt))return Tt;var Ze=ze;return d(Tt,function(Cr,cn){Ze=jt(Ze,Cr,cn)}),Ze},Yt=Ie,ie=function(Tt,jt){var ze=[];if(!X(Tt))return ze;for(var Ze=-1,Cr=[],cn=Tt.length;++Ze<cn;){var mn=Tt[Ze];jt(mn,Ze,Tt)&&(ze.push(mn),Cr.push(Ze))}return Wt(Tt,Cr),ze},Oe=ie,re=function(Tt){return g(Tt,"String")};function _e(Tt,jt){var ze;if(A(jt))ze=function(Cr,cn){return jt(Cr)-jt(cn)};else{var Ze=[];re(jt)?Ze.push(jt):O(jt)&&(Ze=jt),ze=function(Cr,cn){for(var mn=0;mn<Ze.length;mn+=1){var aa=Ze[mn];if(Cr[aa]>cn[aa])return 1;if(Cr[aa]<cn[aa])return-1}return 0}}return Tt.sort(ze),Tt}var Ge=_e;function Ct(Tt,jt){jt===void 0&&(jt=new Map);var ze=[];if(Array.isArray(Tt))for(var Ze=0,Cr=Tt.length;Ze<Cr;Ze++){var cn=Tt[Ze];jt.has(cn)||(ze.push(cn),jt.set(cn,!0))}return ze}var Nr=function(){for(var Tt=[],jt=0;jt<arguments.length;jt++)Tt[jt]=arguments[jt];return Ct([].concat.apply([],Tt))},Or=Nr,Ur=function(Tt,jt){for(var ze=[],Ze={},Cr=0;Cr<Tt.length;Cr++){var cn=Tt[Cr],mn=cn[jt];if(!S(mn)){O(mn)||(mn=[mn]);for(var aa=0;aa<mn.length;aa++){var ai=mn[aa];Ze[ai]||(ze.push(ai),Ze[ai]=!0)}}}return ze};function Sr(Tt){if(X(Tt))return Tt[0]}function gn(Tt){if(X(Tt)){var jt=Tt;return jt[jt.length-1]}}function Rr(Tt,jt){return O(Tt)||re(Tt)?Tt[0]===jt:!1}var ln=Rr;function Nn(Tt,jt){return O(Tt)||re(Tt)?Tt[Tt.length-1]===jt:!1}var Ln=Nn,fn=function(Tt,jt){for(var ze=0;ze<Tt.length;ze++)if(!jt(Tt[ze],ze))return!1;return!0},Qe=fn,nr=function(Tt,jt){for(var ze=0;ze<Tt.length;ze++)if(jt(Tt[ze],ze))return!0;return!1},dr=nr,Pr=Object.prototype.hasOwnProperty;function en(Tt,jt){if(!jt||!O(Tt))return{};for(var ze={},Ze=A(jt)?jt:function(aa){return aa[jt]},Cr,cn=0;cn<Tt.length;cn++){var mn=Tt[cn];Cr=Ze(mn),Pr.call(ze,Cr)?ze[Cr].push(mn):ze[Cr]=[mn]}return ze}var pn=en;function rn(Tt,jt){if(!jt)return{0:Tt};if(!A(jt)){var ze=O(jt)?jt:jt.replace(/\s+/g,"").split("*");jt=function(Ze){for(var Cr="_",cn=0,mn=ze.length;cn<mn;cn++)Cr+=Ze[ze[cn]]&&Ze[ze[cn]].toString();return Cr}}return pn(Tt,jt)}var jn=function(Tt,jt){if(!jt)return[Tt];var ze=rn(Tt,jt),Ze=[];for(var Cr in ze)Ze.push(ze[Cr]);return Ze};function Hn(Tt,jt){return Tt["_wrap_"+jt]}var oa=Hn;function dn(Tt,jt){if(Tt["_wrap_"+jt])return Tt["_wrap_"+jt];var ze=function(Ze){Tt[jt](Ze)};return Tt["_wrap_"+jt]=ze,ze}var Wn=dn,Dn={};function Cn(Tt){var jt=Dn[Tt];if(!jt){for(var ze=Tt.toString(16),Ze=ze.length;Ze<6;Ze++)ze="0"+ze;jt="#"+ze,Dn[Tt]=jt}return jt}var la=Cn;function K(Tt){var jt=0,ze=0,Ze=0,Cr=0;return O(Tt)?Tt.length===1?jt=ze=Ze=Cr=Tt[0]:Tt.length===2?(jt=Ze=Tt[0],ze=Cr=Tt[1]):Tt.length===3?(jt=Tt[0],ze=Cr=Tt[1],Ze=Tt[2]):(jt=Tt[0],ze=Tt[1],Ze=Tt[2],Cr=Tt[3]):jt=ze=Ze=Cr=Tt,{r1:jt,r2:ze,r3:Ze,r4:Cr}}var ft=K,nt=function(Tt,jt,ze){return Tt<jt?jt:Tt>ze?ze:Tt},k=nt,M=function(Tt,jt){var ze=jt.toString(),Ze=ze.indexOf(".");if(Ze===-1)return Math.round(Tt);var Cr=ze.substr(Ze+1).length;return Cr>20&&(Cr=20),parseFloat(Tt.toFixed(Cr))},C=M,j=function(Tt){return g(Tt,"Number")},xt=j,At=function(Tt){return xt(Tt)&&Tt%1!==0},wt=At,Pt=function(Tt){return xt(Tt)&&Tt%2===0},Me=Pt,ve=Number.isInteger?Number.isInteger:function(Tt){return xt(Tt)&&Tt%1===0},Ke=ve,br=function(Tt){return xt(Tt)&&Tt<0},ir=br,mr=1e-5;function Mn(Tt,jt,ze){return ze===void 0&&(ze=mr),Math.abs(Tt-jt)<ze}var Xe=function(Tt){return xt(Tt)&&Tt%2!==0},vr=Xe,Er=function(Tt){return xt(Tt)&&Tt>0},on=Er,Wr=function(Tt,jt){if(O(Tt)){for(var ze,Ze=-1/0,Cr=0;Cr<Tt.length;Cr++){var cn=Tt[Cr],mn=A(jt)?jt(cn):cn[jt];mn>Ze&&(ze=cn,Ze=mn)}return ze}},xa=function(Tt,jt){if(O(Tt)){for(var ze,Ze=1/0,Cr=0;Cr<Tt.length;Cr++){var cn=Tt[Cr],mn=A(jt)?jt(cn):cn[jt];mn<Ze&&(ze=cn,Ze=mn)}return ze}},Ta=function(Tt,jt){return(Tt%jt+jt)%jt},Rn=Ta,Jn=180/Math.PI,Ga=function(Tt){return Jn*Tt},Aa=Ga,an=parseInt,Vn=Math.PI/180,me=function(Tt){return Vn*Tt},Dt=me,fe=d,Ae=function(Tt,jt){return Tt.hasOwnProperty(jt)},be=Ae,De=Object.values?function(Tt){return Object.values(Tt)}:function(Tt){var jt=[];return d(Tt,function(ze,Ze){A(Tt)&&Ze==="prototype"||jt.push(ze)}),jt},sr=De,Fr=function(Tt,jt){return L(sr(Tt),jt)},Jr=function(Tt){return S(Tt)?"":Tt.toString()},Pn=function(Tt){return Jr(Tt).toLowerCase()},Bn=Pn,Zn=function(Tt){var jt=Jr(Tt);return jt.charAt(0).toLowerCase()+jt.substring(1)},ba=Zn;function Ca(Tt,jt){return!Tt||!jt?Tt:Tt.replace(/\\?\{([^{}]+)\}/g,function(ze,Ze){return ze.charAt(0)==="\\"?ze.slice(1):jt[Ze]===void 0?"":jt[Ze]})}var li=Ca,ta=function(Tt){return Jr(Tt).toUpperCase()},fi=ta,Co=function(Tt){var jt=Jr(Tt);return jt.charAt(0).toUpperCase()+jt.substring(1)},La=Co,xi={}.toString,so=function(Tt){return xi.call(Tt).replace(/^\[object /,"").replace(/]$/,"")},To=so,bo=function(Tt){return g(Tt,"Arguments")},uo=bo,Hi=function(Tt){return g(Tt,"Boolean")},ds=Hi,zi=function(Tt){return g(Tt,"Date")},Ui=zi,gs=function(Tt){return g(Tt,"Error")},Ms=gs;function Go(Tt){return xt(Tt)&&isFinite(Tt)}var _o=function(Tt){return Tt===null},Io=_o,$s=Object.prototype,Yn=function(Tt){var jt=Tt&&Tt.constructor,ze=typeof jt=="function"&&jt.prototype||$s;return Tt===ze},So=Yn,Oo=function(Tt){return g(Tt,"RegExp")},Wi=Oo,zn=function(Tt){return Tt===void 0},Lo=zn,Ai=function(Tt){return Tt instanceof Element||Tt instanceof HTMLDocument},zo=Ai;function Uo(Tt){var jt=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(ze){return setTimeout(ze,16)};return jt(Tt)}function ps(Tt){var jt=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;jt(Tt)}function eo(Tt,jt){for(var ze in jt)jt.hasOwnProperty(ze)&&ze!=="constructor"&&jt[ze]!==void 0&&(Tt[ze]=jt[ze])}function ro(Tt,jt,ze,Ze){return jt&&eo(Tt,jt),ze&&eo(Tt,ze),Ze&&eo(Tt,Ze),Tt}var ei=function(){for(var Tt=[],jt=0;jt<arguments.length;jt++)Tt[jt]=arguments[jt];for(var ze=Tt[0],Ze=1;Ze<Tt.length;Ze++){var Cr=Tt[Ze];A(Cr)&&(Cr=Cr.prototype),ro(ze.prototype,Cr)}},fo=ei,Do=function(Tt){if(typeof Tt!="object"||Tt===null)return Tt;var jt;if(O(Tt)){jt=[];for(var ze=0,Ze=Tt.length;ze<Ze;ze++)typeof Tt[ze]=="object"&&Tt[ze]!=null?jt[ze]=Do(Tt[ze]):jt[ze]=Tt[ze]}else{jt={};for(var Cr in Tt)typeof Tt[Cr]=="object"&&Tt[Cr]!=null?jt[Cr]=Do(Tt[Cr]):jt[Cr]=Tt[Cr]}return jt},Wo=Do;function No(Tt,jt,ze){var Ze;return function(){var Cr=this,cn=arguments,mn=function(){Ze=null,ze||Tt.apply(Cr,cn)},aa=ze&&!Ze;clearTimeout(Ze),Ze=setTimeout(mn,jt),aa&&Tt.apply(Cr,cn)}}var is=No,Xo=function(Tt,jt){if(!A(Tt))throw new TypeError("Expected a function");var ze=function(){for(var Ze=[],Cr=0;Cr<arguments.length;Cr++)Ze[Cr]=arguments[Cr];var cn=jt?jt.apply(this,Ze):Ze[0],mn=ze.cache;if(mn.has(cn))return mn.get(cn);var aa=Tt.apply(this,Ze);return mn.set(cn,aa),aa};return ze.cache=new Map,ze},Jo=5;function Xa(Tt,jt,ze,Ze){ze=ze||0,Ze=Ze||Jo;for(var Cr in jt)if(jt.hasOwnProperty(Cr)){var cn=jt[Cr];cn!==null&&it(cn)?(it(Tt[Cr])||(Tt[Cr]={}),ze<Ze?Xa(Tt[Cr],cn,ze+1,Ze):Tt[Cr]=jt[Cr]):O(cn)?(Tt[Cr]=[],Tt[Cr]=Tt[Cr].concat(cn)):cn!==void 0&&(Tt[Cr]=cn)}}var As=function(Tt){for(var jt=[],ze=1;ze<arguments.length;ze++)jt[ze-1]=arguments[ze];for(var Ze=0;Ze<jt.length;Ze+=1)Xa(Tt,jt[Ze]);return Tt},iu=As,Xi=function(Tt,jt,ze,Ze){A(jt)||(ze=jt,jt=Tt,Tt=function(){});var Cr=Object.create?function(mn,aa){return Object.create(mn,{constructor:{value:aa}})}:function(mn,aa){function ai(){}ai.prototype=mn;var Zi=new ai;return Zi.constructor=aa,Zi},cn=Cr(jt.prototype,Tt);return Tt.prototype=ro(cn,Tt.prototype),Tt.superclass=Cr(jt.prototype,jt),ro(cn,ze),ro(Tt,Ze),Tt},os=Xi,Eo=function(Tt,jt){if(!X(Tt))return-1;var ze=Array.prototype.indexOf;if(ze)return ze.call(Tt,jt);for(var Ze=-1,Cr=0;Cr<Tt.length;Cr++)if(Tt[Cr]===jt){Ze=Cr;break}return Ze},Yi=Eo,co=Object.prototype.hasOwnProperty;function pa(Tt){if(S(Tt))return!0;if(X(Tt))return!Tt.length;var jt=To(Tt);if(jt==="Map"||jt==="Set")return!Tt.size;if(So(Tt))return!Object.keys(Tt).length;for(var ze in Tt)if(co.call(Tt,ze))return!1;return!0}var ja=pa,yi=function(Tt,jt){if(Tt===jt)return!0;if(!Tt||!jt||re(Tt)||re(jt))return!1;if(X(Tt)||X(jt)){if(Tt.length!==jt.length)return!1;for(var ze=!0,Ze=0;Ze<Tt.length&&(ze=yi(Tt[Ze],jt[Ze]),!!ze);Ze++);return ze}if(rt(Tt)||rt(jt)){var Cr=Object.keys(Tt),cn=Object.keys(jt);if(Cr.length!==cn.length)return!1;for(var ze=!0,Ze=0;Ze<Cr.length&&(ze=yi(Tt[Cr[Ze]],jt[Cr[Ze]]),!!ze);Ze++);return ze}return!1},no=yi,ki=function(Tt,jt,ze){return A(ze)?!!ze(Tt,jt):no(Tt,jt)},Ki=function(Tt,jt){if(!X(Tt))return Tt;for(var ze=[],Ze=0;Ze<Tt.length;Ze++){var Cr=Tt[Ze];ze.push(jt(Cr,Ze))}return ze},Yo=Ki,wo=function(Tt){return Tt},ts=function(Tt,jt){jt===void 0&&(jt=wo);var ze={};return B(Tt)&&!S(Tt)&&Object.keys(Tt).forEach(function(Ze){ze[Ze]=jt(Tt[Ze],Ze)}),ze},lo=function(Tt,jt,ze){for(var Ze=0,Cr=re(jt)?jt.split("."):jt;Tt&&Ze<Cr.length;)Tt=Tt[Cr[Ze++]];return Tt===void 0||Ze<Cr.length?ze:Tt},Rs=function(Tt,jt,ze){var Ze=Tt,Cr=re(jt)?jt.split("."):jt;return Cr.forEach(function(cn,mn){mn<Cr.length-1?(B(Ze[cn])||(Ze[cn]=xt(Cr[mn+1])?[]:{}),Ze=Ze[cn]):Ze[cn]=ze}),Tt},ou=Object.prototype.hasOwnProperty,Cs=function(Tt,jt){if(Tt===null||!it(Tt))return{};var ze={};return d(jt,function(Ze){ou.call(Tt,Ze)&&(ze[Ze]=Tt[Ze])}),ze},ci=function(Tt,jt){return Yt(Tt,function(ze,Ze,Cr){return jt.includes(Cr)||(ze[Cr]=Ze),ze},{})},Po=function(Tt,jt,ze){var Ze,Cr,cn,mn,aa=0;ze||(ze={});var ai=function(){aa=ze.leading===!1?0:Date.now(),Ze=null,mn=Tt.apply(Cr,cn),Ze||(Cr=cn=null)},Zi=function(){var ao=Date.now();!aa&&ze.leading===!1&&(aa=ao);var zs=jt-(ao-aa);return Cr=this,cn=arguments,zs<=0||zs>jt?(Ze&&(clearTimeout(Ze),Ze=null),aa=ao,mn=Tt.apply(Cr,cn),Ze||(Cr=cn=null)):!Ze&&ze.trailing!==!1&&(Ze=setTimeout(ai,zs)),mn};return Zi.cancel=function(){clearTimeout(Ze),aa=0,Ze=Cr=cn=null},Zi},Wu=function(Tt){return X(Tt)?Array.prototype.slice.call(Tt):[]},ho={},Bs=function(Tt){return Tt=Tt||"g",ho[Tt]?ho[Tt]+=1:ho[Tt]=1,Tt+ho[Tt]},Ts=function(){},Vo=function(Tt){return Tt};function Fs(Tt){return S(Tt)?0:X(Tt)?Tt.length:Object.keys(Tt).length}var ss=z(197582),jo,us=Xo(function(Tt,jt){jt===void 0&&(jt={});var ze=jt.fontSize,Ze=jt.fontFamily,Cr=jt.fontWeight,cn=jt.fontStyle,mn=jt.fontVariant;return jo||(jo=document.createElement("canvas").getContext("2d")),jo.font=[cn,mn,Cr,ze+"px",Ze].join(" "),jo.measureText(re(Tt)?Tt:"").width},function(Tt,jt){return jt===void 0&&(jt={}),(0,ss.__spreadArrays)([Tt],sr(jt)).join("")}),su=function(Tt,jt,ze,Ze){Ze===void 0&&(Ze="...");var Cr=16,cn=us(Ze,ze),mn=re(Tt)?Tt:Jr(Tt),aa=jt,ai=[],Zi,ao;if(us(Tt,ze)<=jt)return Tt;for(;Zi=mn.substr(0,Cr),ao=us(Zi,ze),!(ao+cn>aa&&ao>aa);)if(ai.push(Zi),aa-=ao,mn=mn.substr(Cr),!mn)return ai.join("");for(;Zi=mn.substr(0,1),ao=us(Zi,ze),!(ao+cn>aa);)if(ai.push(Zi),aa-=ao,mn=mn.substr(1),!mn)return ai.join("");return""+ai.join("")+Ze},Gs=function(){function Tt(){this.map={}}return Tt.prototype.has=function(jt){return this.map[jt]!==void 0},Tt.prototype.get=function(jt,ze){var Ze=this.map[jt];return Ze===void 0?ze:Ze},Tt.prototype.set=function(jt,ze){this.map[jt]=ze},Tt.prototype.clear=function(){this.map={}},Tt.prototype.delete=function(jt){delete this.map[jt]},Tt.prototype.size=function(){return Object.keys(this.map).length},Tt}(),fs=Gs},147460:function(He,F,z){"use strict";z.r(F),z.d(F,{forceCenter:function(){return G},forceCollide:function(){return E},forceLink:function(){return A},forceManyBody:function(){return Ie},forceRadial:function(){return Yt},forceSimulation:function(){return Wt},forceX:function(){return ie},forceY:function(){return Oe}});function G(re,_e){var Ge,Ct=1;re==null&&(re=0),_e==null&&(_e=0);function Nr(){var Or,Ur=Ge.length,Sr,gn=0,Rr=0;for(Or=0;Or<Ur;++Or)Sr=Ge[Or],gn+=Sr.x,Rr+=Sr.y;for(gn=(gn/Ur-re)*Ct,Rr=(Rr/Ur-_e)*Ct,Or=0;Or<Ur;++Or)Sr=Ge[Or],Sr.x-=gn,Sr.y-=Rr}return Nr.initialize=function(Or){Ge=Or},Nr.x=function(Or){return arguments.length?(re=+Or,Nr):re},Nr.y=function(Or){return arguments.length?(_e=+Or,Nr):_e},Nr.strength=function(Or){return arguments.length?(Ct=+Or,Nr):Ct},Nr}var X=z(547148);function R(re){return function(){return re}}function L(re){return(re()-.5)*1e-6}function P(re){return re.x+re.vx}function N(re){return re.y+re.vy}function E(re){var _e,Ge,Ct,Nr=1,Or=1;typeof re!="function"&&(re=R(re==null?1:+re));function Ur(){for(var Rr,ln=_e.length,Nn,Ln,fn,Qe,nr,dr,Pr=0;Pr<Or;++Pr)for(Nn=(0,X.Z)(_e,P,N).visitAfter(Sr),Rr=0;Rr<ln;++Rr)Ln=_e[Rr],nr=Ge[Ln.index],dr=nr*nr,fn=Ln.x+Ln.vx,Qe=Ln.y+Ln.vy,Nn.visit(en);function en(pn,rn,jn,Hn,oa){var dn=pn.data,Wn=pn.r,Dn=nr+Wn;if(dn){if(dn.index>Ln.index){var Cn=fn-dn.x-dn.vx,la=Qe-dn.y-dn.vy,K=Cn*Cn+la*la;K<Dn*Dn&&(Cn===0&&(Cn=L(Ct),K+=Cn*Cn),la===0&&(la=L(Ct),K+=la*la),K=(Dn-(K=Math.sqrt(K)))/K*Nr,Ln.vx+=(Cn*=K)*(Dn=(Wn*=Wn)/(dr+Wn)),Ln.vy+=(la*=K)*Dn,dn.vx-=Cn*(Dn=1-Dn),dn.vy-=la*Dn)}return}return rn>fn+Dn||Hn<fn-Dn||jn>Qe+Dn||oa<Qe-Dn}}function Sr(Rr){if(Rr.data)return Rr.r=Ge[Rr.data.index];for(var ln=Rr.r=0;ln<4;++ln)Rr[ln]&&Rr[ln].r>Rr.r&&(Rr.r=Rr[ln].r)}function gn(){if(_e){var Rr,ln=_e.length,Nn;for(Ge=new Array(ln),Rr=0;Rr<ln;++Rr)Nn=_e[Rr],Ge[Nn.index]=+re(Nn,Rr,_e)}}return Ur.initialize=function(Rr,ln){_e=Rr,Ct=ln,gn()},Ur.iterations=function(Rr){return arguments.length?(Or=+Rr,Ur):Or},Ur.strength=function(Rr){return arguments.length?(Nr=+Rr,Ur):Nr},Ur.radius=function(Rr){return arguments.length?(re=typeof Rr=="function"?Rr:R(+Rr),gn(),Ur):re},Ur}var x=z(918698),p=z.n(x);function y(re){return re.index}function g(re,_e){var Ge=re.get(_e);if(!Ge)throw new Error("node not found: "+_e);return Ge}function A(re){var _e=y,Ge=Nn,Ct,Nr=R(30),Or,Ur,Sr,gn,Rr,ln=1;re==null&&(re=[]);function Nn(dr){return 1/Math.min(Sr[dr.source.index],Sr[dr.target.index])}function Ln(dr){for(var Pr=0,en=re.length;Pr<ln;++Pr)for(var pn=0,rn,jn,Hn,oa,dn,Wn,Dn;pn<en;++pn)rn=re[pn],jn=rn.source,Hn=rn.target,oa=Hn.x+Hn.vx-jn.x-jn.vx||L(Rr),dn=Hn.y+Hn.vy-jn.y-jn.vy||L(Rr),Wn=Math.sqrt(oa*oa+dn*dn),Wn=(Wn-Or[pn])/Wn*dr*Ct[pn],oa*=Wn,dn*=Wn,Hn.vx-=oa*(Dn=gn[pn]),Hn.vy-=dn*Dn,jn.vx+=oa*(Dn=1-Dn),jn.vy+=dn*Dn}function fn(){if(Ur){var dr,Pr=Ur.length,en=re.length,pn=new Map(Ur.map(function(jn,Hn){return[_e(jn,Hn,Ur),jn]})),rn;for(dr=0,Sr=new Array(Pr);dr<en;++dr)rn=re[dr],rn.index=dr,p()(rn.source)!=="object"&&(rn.source=g(pn,rn.source)),p()(rn.target)!=="object"&&(rn.target=g(pn,rn.target)),Sr[rn.source.index]=(Sr[rn.source.index]||0)+1,Sr[rn.target.index]=(Sr[rn.target.index]||0)+1;for(dr=0,gn=new Array(en);dr<en;++dr)rn=re[dr],gn[dr]=Sr[rn.source.index]/(Sr[rn.source.index]+Sr[rn.target.index]);Ct=new Array(en),Qe(),Or=new Array(en),nr()}}function Qe(){if(Ur)for(var dr=0,Pr=re.length;dr<Pr;++dr)Ct[dr]=+Ge(re[dr],dr,re)}function nr(){if(Ur)for(var dr=0,Pr=re.length;dr<Pr;++dr)Or[dr]=+Nr(re[dr],dr,re)}return Ln.initialize=function(dr,Pr){Ur=dr,Rr=Pr,fn()},Ln.links=function(dr){return arguments.length?(re=dr,fn(),Ln):re},Ln.id=function(dr){return arguments.length?(_e=dr,Ln):_e},Ln.iterations=function(dr){return arguments.length?(ln=+dr,Ln):ln},Ln.strength=function(dr){return arguments.length?(Ge=typeof dr=="function"?dr:R(+dr),Qe(),Ln):Ge},Ln.distance=function(dr){return arguments.length?(Nr=typeof dr=="function"?dr:R(+dr),nr(),Ln):Nr},Ln}var _={value:function(){}};function S(){for(var re=0,_e=arguments.length,Ge={},Ct;re<_e;++re){if(!(Ct=arguments[re]+"")||Ct in Ge||/[\s.]/.test(Ct))throw new Error("illegal type: "+Ct);Ge[Ct]=[]}return new O(Ge)}function O(re){this._=re}function B(re,_e){return re.trim().split(/^|\s+/).map(function(Ge){var Ct="",Nr=Ge.indexOf(".");if(Nr>=0&&(Ct=Ge.slice(Nr+1),Ge=Ge.slice(0,Nr)),Ge&&!_e.hasOwnProperty(Ge))throw new Error("unknown type: "+Ge);return{type:Ge,name:Ct}})}O.prototype=S.prototype={constructor:O,on:function(_e,Ge){var Ct=this._,Nr=B(_e+"",Ct),Or,Ur=-1,Sr=Nr.length;if(arguments.length<2){for(;++Ur<Sr;)if((Or=(_e=Nr[Ur]).type)&&(Or=m(Ct[Or],_e.name)))return Or;return}if(Ge!=null&&typeof Ge!="function")throw new Error("invalid callback: "+Ge);for(;++Ur<Sr;)if(Or=(_e=Nr[Ur]).type)Ct[Or]=d(Ct[Or],_e.name,Ge);else if(Ge==null)for(Or in Ct)Ct[Or]=d(Ct[Or],_e.name,null);return this},copy:function(){var _e={},Ge=this._;for(var Ct in Ge)_e[Ct]=Ge[Ct].slice();return new O(_e)},call:function(_e,Ge){if((Or=arguments.length-2)>0)for(var Ct=new Array(Or),Nr=0,Or,Ur;Nr<Or;++Nr)Ct[Nr]=arguments[Nr+2];if(!this._.hasOwnProperty(_e))throw new Error("unknown type: "+_e);for(Ur=this._[_e],Nr=0,Or=Ur.length;Nr<Or;++Nr)Ur[Nr].value.apply(Ge,Ct)},apply:function(_e,Ge,Ct){if(!this._.hasOwnProperty(_e))throw new Error("unknown type: "+_e);for(var Nr=this._[_e],Or=0,Ur=Nr.length;Or<Ur;++Or)Nr[Or].value.apply(Ge,Ct)}};function m(re,_e){for(var Ge=0,Ct=re.length,Nr;Ge<Ct;++Ge)if((Nr=re[Ge]).name===_e)return Nr.value}function d(re,_e,Ge){for(var Ct=0,Nr=re.length;Ct<Nr;++Ct)if(re[Ct].name===_e){re[Ct]=_,re=re.slice(0,Ct).concat(re.slice(Ct+1));break}return Ge!=null&&re.push({name:_e,value:Ge}),re}var tt=S,Y=0,V=0,$=0,q=1e3,rt,Q,it=0,ht=0,dt=0,Ot=typeof performance=="object"&&performance.now?performance:Date,It=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(re){setTimeout(re,17)};function Kt(){return ht||(It(Ft),ht=Ot.now()+dt)}function Ft(){ht=0}function Nt(){this._call=this._time=this._next=null}Nt.prototype=st.prototype={constructor:Nt,restart:function(re,_e,Ge){if(typeof re!="function")throw new TypeError("callback is not a function");Ge=(Ge==null?Kt():+Ge)+(_e==null?0:+_e),!this._next&&Q!==this&&(Q?Q._next=this:rt=this,Q=this),this._call=re,this._time=Ge,ge()},stop:function(){this._call&&(this._call=null,this._time=1/0,ge())}};function st(re,_e,Ge){var Ct=new Nt;return Ct.restart(re,_e,Ge),Ct}function yt(){Kt(),++Y;for(var re=rt,_e;re;)(_e=ht-re._time)>=0&&re._call.call(null,_e),re=re._next;--Y}function kt(){ht=(it=Ot.now())+dt,Y=V=0;try{yt()}finally{Y=0,$t(),ht=0}}function ee(){var re=Ot.now(),_e=re-it;_e>q&&(dt-=_e,it=re)}function $t(){for(var re,_e=rt,Ge,Ct=1/0;_e;)_e._call?(Ct>_e._time&&(Ct=_e._time),re=_e,_e=_e._next):(Ge=_e._next,_e._next=null,_e=re?re._next=Ge:rt=Ge);Q=re,ge(Ct)}function ge(re){if(!Y){V&&(V=clearTimeout(V));var _e=re-ht;_e>24?(re<1/0&&(V=setTimeout(kt,re-Ot.now()-dt)),$&&($=clearInterval($))):($||(it=Ot.now(),$=setInterval(ee,q)),Y=1,It(kt))}}var Pe=1664525,er=1013904223,Jt=4294967296;function ae(){var re=1;return function(){return(re=(Pe*re+er)%Jt)/Jt}}function Se(re){return re.x}function xe(re){return re.y}var we=10,zt=Math.PI*(3-Math.sqrt(5));function Wt(re){var _e,Ge=1,Ct=.001,Nr=1-Math.pow(Ct,1/300),Or=0,Ur=.6,Sr=new Map,gn=st(Nn),Rr=tt("tick","end"),ln=ae();re==null&&(re=[]);function Nn(){Ln(),Rr.call("tick",_e),Ge<Ct&&(gn.stop(),Rr.call("end",_e))}function Ln(nr){var dr,Pr=re.length,en;nr===void 0&&(nr=1);for(var pn=0;pn<nr;++pn)for(Ge+=(Or-Ge)*Nr,Sr.forEach(function(rn){rn(Ge)}),dr=0;dr<Pr;++dr)en=re[dr],en.fx==null?en.x+=en.vx*=Ur:(en.x=en.fx,en.vx=0),en.fy==null?en.y+=en.vy*=Ur:(en.y=en.fy,en.vy=0);return _e}function fn(){for(var nr=0,dr=re.length,Pr;nr<dr;++nr){if(Pr=re[nr],Pr.index=nr,Pr.fx!=null&&(Pr.x=Pr.fx),Pr.fy!=null&&(Pr.y=Pr.fy),isNaN(Pr.x)||isNaN(Pr.y)){var en=we*Math.sqrt(.5+nr),pn=nr*zt;Pr.x=en*Math.cos(pn),Pr.y=en*Math.sin(pn)}(isNaN(Pr.vx)||isNaN(Pr.vy))&&(Pr.vx=Pr.vy=0)}}function Qe(nr){return nr.initialize&&nr.initialize(re,ln),nr}return fn(),_e={tick:Ln,restart:function(){return gn.restart(Nn),_e},stop:function(){return gn.stop(),_e},nodes:function(dr){return arguments.length?(re=dr,fn(),Sr.forEach(Qe),_e):re},alpha:function(dr){return arguments.length?(Ge=+dr,_e):Ge},alphaMin:function(dr){return arguments.length?(Ct=+dr,_e):Ct},alphaDecay:function(dr){return arguments.length?(Nr=+dr,_e):+Nr},alphaTarget:function(dr){return arguments.length?(Or=+dr,_e):Or},velocityDecay:function(dr){return arguments.length?(Ur=1-dr,_e):1-Ur},randomSource:function(dr){return arguments.length?(ln=dr,Sr.forEach(Qe),_e):ln},force:function(dr,Pr){return arguments.length>1?(Pr==null?Sr.delete(dr):Sr.set(dr,Qe(Pr)),_e):Sr.get(dr)},find:function(dr,Pr,en){var pn=0,rn=re.length,jn,Hn,oa,dn,Wn;for(en==null?en=1/0:en*=en,pn=0;pn<rn;++pn)dn=re[pn],jn=dr-dn.x,Hn=Pr-dn.y,oa=jn*jn+Hn*Hn,oa<en&&(Wn=dn,en=oa);return Wn},on:function(dr,Pr){return arguments.length>1?(Rr.on(dr,Pr),_e):Rr.on(dr)}}}function Ie(){var re,_e,Ge,Ct,Nr=R(-30),Or,Ur=1,Sr=1/0,gn=.81;function Rr(fn){var Qe,nr=re.length,dr=(0,X.Z)(re,Se,xe).visitAfter(Nn);for(Ct=fn,Qe=0;Qe<nr;++Qe)_e=re[Qe],dr.visit(Ln)}function ln(){if(re){var fn,Qe=re.length,nr;for(Or=new Array(Qe),fn=0;fn<Qe;++fn)nr=re[fn],Or[nr.index]=+Nr(nr,fn,re)}}function Nn(fn){var Qe=0,nr,dr,Pr=0,en,pn,rn;if(fn.length){for(en=pn=rn=0;rn<4;++rn)(nr=fn[rn])&&(dr=Math.abs(nr.value))&&(Qe+=nr.value,Pr+=dr,en+=dr*nr.x,pn+=dr*nr.y);fn.x=en/Pr,fn.y=pn/Pr}else{nr=fn,nr.x=nr.data.x,nr.y=nr.data.y;do Qe+=Or[nr.data.index];while(nr=nr.next)}fn.value=Qe}function Ln(fn,Qe,nr,dr){if(!fn.value)return!0;var Pr=fn.x-_e.x,en=fn.y-_e.y,pn=dr-Qe,rn=Pr*Pr+en*en;if(pn*pn/gn<rn)return rn<Sr&&(Pr===0&&(Pr=L(Ge),rn+=Pr*Pr),en===0&&(en=L(Ge),rn+=en*en),rn<Ur&&(rn=Math.sqrt(Ur*rn)),_e.vx+=Pr*fn.value*Ct/rn,_e.vy+=en*fn.value*Ct/rn),!0;if(fn.length||rn>=Sr)return;(fn.data!==_e||fn.next)&&(Pr===0&&(Pr=L(Ge),rn+=Pr*Pr),en===0&&(en=L(Ge),rn+=en*en),rn<Ur&&(rn=Math.sqrt(Ur*rn)));do fn.data!==_e&&(pn=Or[fn.data.index]*Ct/rn,_e.vx+=Pr*pn,_e.vy+=en*pn);while(fn=fn.next)}return Rr.initialize=function(fn,Qe){re=fn,Ge=Qe,ln()},Rr.strength=function(fn){return arguments.length?(Nr=typeof fn=="function"?fn:R(+fn),ln(),Rr):Nr},Rr.distanceMin=function(fn){return arguments.length?(Ur=fn*fn,Rr):Math.sqrt(Ur)},Rr.distanceMax=function(fn){return arguments.length?(Sr=fn*fn,Rr):Math.sqrt(Sr)},Rr.theta=function(fn){return arguments.length?(gn=fn*fn,Rr):Math.sqrt(gn)},Rr}function Yt(re,_e,Ge){var Ct,Nr=R(.1),Or,Ur;typeof re!="function"&&(re=R(+re)),_e==null&&(_e=0),Ge==null&&(Ge=0);function Sr(Rr){for(var ln=0,Nn=Ct.length;ln<Nn;++ln){var Ln=Ct[ln],fn=Ln.x-_e||1e-6,Qe=Ln.y-Ge||1e-6,nr=Math.sqrt(fn*fn+Qe*Qe),dr=(Ur[ln]-nr)*Or[ln]*Rr/nr;Ln.vx+=fn*dr,Ln.vy+=Qe*dr}}function gn(){if(Ct){var Rr,ln=Ct.length;for(Or=new Array(ln),Ur=new Array(ln),Rr=0;Rr<ln;++Rr)Ur[Rr]=+re(Ct[Rr],Rr,Ct),Or[Rr]=isNaN(Ur[Rr])?0:+Nr(Ct[Rr],Rr,Ct)}}return Sr.initialize=function(Rr){Ct=Rr,gn()},Sr.strength=function(Rr){return arguments.length?(Nr=typeof Rr=="function"?Rr:R(+Rr),gn(),Sr):Nr},Sr.radius=function(Rr){return arguments.length?(re=typeof Rr=="function"?Rr:R(+Rr),gn(),Sr):re},Sr.x=function(Rr){return arguments.length?(_e=+Rr,Sr):_e},Sr.y=function(Rr){return arguments.length?(Ge=+Rr,Sr):Ge},Sr}function ie(re){var _e=R(.1),Ge,Ct,Nr;typeof re!="function"&&(re=R(re==null?0:+re));function Or(Sr){for(var gn=0,Rr=Ge.length,ln;gn<Rr;++gn)ln=Ge[gn],ln.vx+=(Nr[gn]-ln.x)*Ct[gn]*Sr}function Ur(){if(Ge){var Sr,gn=Ge.length;for(Ct=new Array(gn),Nr=new Array(gn),Sr=0;Sr<gn;++Sr)Ct[Sr]=isNaN(Nr[Sr]=+re(Ge[Sr],Sr,Ge))?0:+_e(Ge[Sr],Sr,Ge)}}return Or.initialize=function(Sr){Ge=Sr,Ur()},Or.strength=function(Sr){return arguments.length?(_e=typeof Sr=="function"?Sr:R(+Sr),Ur(),Or):_e},Or.x=function(Sr){return arguments.length?(re=typeof Sr=="function"?Sr:R(+Sr),Ur(),Or):re},Or}function Oe(re){var _e=R(.1),Ge,Ct,Nr;typeof re!="function"&&(re=R(re==null?0:+re));function Or(Sr){for(var gn=0,Rr=Ge.length,ln;gn<Rr;++gn)ln=Ge[gn],ln.vy+=(Nr[gn]-ln.y)*Ct[gn]*Sr}function Ur(){if(Ge){var Sr,gn=Ge.length;for(Ct=new Array(gn),Nr=new Array(gn),Sr=0;Sr<gn;++Sr)Ct[Sr]=isNaN(Nr[Sr]=+re(Ge[Sr],Sr,Ge))?0:+_e(Ge[Sr],Sr,Ge)}}return Or.initialize=function(Sr){Ge=Sr,Ur()},Or.strength=function(Sr){return arguments.length?(_e=typeof Sr=="function"?Sr:R(+Sr),Ur(),Or):_e},Or.y=function(Sr){return arguments.length?(re=typeof Sr=="function"?Sr:R(+Sr),Ur(),Or):re},Or}},249612:function(He,F,z){"use strict";var G=z(994993).default,X=z(861655).default,R=z(226389).default,L=z(918698).default,P=z(856690).default,N=z(689728).default;Object.defineProperty(F,"__esModule",{value:!0});var E=z(744091),x=z(975823),p=" ".repeat(2),y=" ".repeat(4);function g(){return A(this)}function A(ft){var nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},k=nt.maxRows,M=k===void 0?15:k,C=nt.maxColumns,j=C===void 0?10:C,xt=nt.maxNumSize,At=xt===void 0?8:xt,wt=nt.padMinus,Pt=wt===void 0?"auto":wt;return"".concat(ft.constructor.name,` {
`).concat(p,`[
`).concat(y).concat(_(ft,M,j,At,Pt),`
`).concat(p,`]
`).concat(p,"rows: ").concat(ft.rows,`
`).concat(p,"columns: ").concat(ft.columns,`
}`)}function _(ft,nt,k,M,C){var j=ft.rows,xt=ft.columns,At=Math.min(j,nt),wt=Math.min(xt,k),Pt=[];if(C==="auto"){C=!1;t:for(var Me=0;Me<At;Me++)for(var ve=0;ve<wt;ve++)if(ft.get(Me,ve)<0){C=!0;break t}}for(var Ke=0;Ke<At;Ke++){for(var br=[],ir=0;ir<wt;ir++)br.push(S(ft.get(Ke,ir),M,C));Pt.push("".concat(br.join(" ")))}return wt!==xt&&(Pt[Pt.length-1]+=" ... ".concat(xt-k," more columns")),At!==j&&Pt.push("... ".concat(j-nt," more rows")),Pt.join(`
`.concat(y))}function S(ft,nt,k){return(ft>=0&&k?" ".concat(O(ft,nt-1)):O(ft,nt)).padEnd(nt)}function O(ft,nt){var k=ft.toString();if(k.length<=nt)return k;var M=ft.toFixed(nt);if(M.length>nt&&(M=ft.toFixed(Math.max(0,nt-(M.length-nt)))),M.length<=nt&&!M.startsWith("0.000")&&!M.startsWith("-0.000"))return M;var C=ft.toExponential(nt);return C.length>nt&&(C=ft.toExponential(Math.max(0,nt-(C.length-nt)))),C.slice(0)}function B(ft,nt){ft.prototype.add=function(M){return typeof M=="number"?this.addS(M):this.addM(M)},ft.prototype.addS=function(M){for(var C=0;C<this.rows;C++)for(var j=0;j<this.columns;j++)this.set(C,j,this.get(C,j)+M);return this},ft.prototype.addM=function(M){if(M=nt.checkMatrix(M),this.rows!==M.rows||this.columns!==M.columns)throw new RangeError("Matrices dimensions must be equal");for(var C=0;C<this.rows;C++)for(var j=0;j<this.columns;j++)this.set(C,j,this.get(C,j)+M.get(C,j));return this},ft.add=function(M,C){var j=new nt(M);return j.add(C)},ft.prototype.sub=function(M){return typeof M=="number"?this.subS(M):this.subM(M)},ft.prototype.subS=function(M){for(var C=0;C<this.rows;C++)for(var j=0;j<this.columns;j++)this.set(C,j,this.get(C,j)-M);return this},ft.prototype.subM=function(M){if(M=nt.checkMatrix(M),this.rows!==M.rows||this.columns!==M.columns)throw new RangeError("Matrices dimensions must be equal");for(var C=0;C<this.rows;C++)for(var j=0;j<this.columns;j++)this.set(C,j,this.get(C,j)-M.get(C,j));return this},ft.sub=function(M,C){var j=new nt(M);return j.sub(C)},ft.prototype.subtract=ft.prototype.sub,ft.prototype.subtractS=ft.prototype.subS,ft.prototype.subtractM=ft.prototype.subM,ft.subtract=ft.sub,ft.prototype.mul=function(M){return typeof M=="number"?this.mulS(M):this.mulM(M)},ft.prototype.mulS=function(M){for(var C=0;C<this.rows;C++)for(var j=0;j<this.columns;j++)this.set(C,j,this.get(C,j)*M);return this},ft.prototype.mulM=function(M){if(M=nt.checkMatrix(M),this.rows!==M.rows||this.columns!==M.columns)throw new RangeError("Matrices dimensions must be equal");for(var C=0;C<this.rows;C++)for(var j=0;j<this.columns;j++)this.set(C,j,this.get(C,j)*M.get(C,j));return this},ft.mul=function(M,C){var j=new nt(M);return j.mul(C)},ft.prototype.multiply=ft.prototype.mul,ft.prototype.multiplyS=ft.prototype.mulS,ft.prototype.multiplyM=ft.prototype.mulM,ft.multiply=ft.mul,ft.prototype.div=function(M){return typeof M=="number"?this.divS(M):this.divM(M)},ft.prototype.divS=function(M){for(var C=0;C<this.rows;C++)for(var j=0;j<this.columns;j++)this.set(C,j,this.get(C,j)/M);return this},ft.prototype.divM=function(M){if(M=nt.checkMatrix(M),this.rows!==M.rows||this.columns!==M.columns)throw new RangeError("Matrices dimensions must be equal");for(var C=0;C<this.rows;C++)for(var j=0;j<this.columns;j++)this.set(C,j,this.get(C,j)/M.get(C,j));return this},ft.div=function(M,C){var j=new nt(M);return j.div(C)},ft.prototype.divide=ft.prototype.div,ft.prototype.divideS=ft.prototype.divS,ft.prototype.divideM=ft.prototype.divM,ft.divide=ft.div,ft.prototype.mod=function(M){return typeof M=="number"?this.modS(M):this.modM(M)},ft.prototype.modS=function(M){for(var C=0;C<this.rows;C++)for(var j=0;j<this.columns;j++)this.set(C,j,this.get(C,j)%M);return this},ft.prototype.modM=function(M){if(M=nt.checkMatrix(M),this.rows!==M.rows||this.columns!==M.columns)throw new RangeError("Matrices dimensions must be equal");for(var C=0;C<this.rows;C++)for(var j=0;j<this.columns;j++)this.set(C,j,this.get(C,j)%M.get(C,j));return this},ft.mod=function(M,C){var j=new nt(M);return j.mod(C)},ft.prototype.modulus=ft.prototype.mod,ft.prototype.modulusS=ft.prototype.modS,ft.prototype.modulusM=ft.prototype.modM,ft.modulus=ft.mod,ft.prototype.and=function(M){return typeof M=="number"?this.andS(M):this.andM(M)},ft.prototype.andS=function(M){for(var C=0;C<this.rows;C++)for(var j=0;j<this.columns;j++)this.set(C,j,this.get(C,j)&M);return this},ft.prototype.andM=function(M){if(M=nt.checkMatrix(M),this.rows!==M.rows||this.columns!==M.columns)throw new RangeError("Matrices dimensions must be equal");for(var C=0;C<this.rows;C++)for(var j=0;j<this.columns;j++)this.set(C,j,this.get(C,j)&M.get(C,j));return this},ft.and=function(M,C){var j=new nt(M);return j.and(C)},ft.prototype.or=function(M){return typeof M=="number"?this.orS(M):this.orM(M)},ft.prototype.orS=function(M){for(var C=0;C<this.rows;C++)for(var j=0;j<this.columns;j++)this.set(C,j,this.get(C,j)|M);return this},ft.prototype.orM=function(M){if(M=nt.checkMatrix(M),this.rows!==M.rows||this.columns!==M.columns)throw new RangeError("Matrices dimensions must be equal");for(var C=0;C<this.rows;C++)for(var j=0;j<this.columns;j++)this.set(C,j,this.get(C,j)|M.get(C,j));return this},ft.or=function(M,C){var j=new nt(M);return j.or(C)},ft.prototype.xor=function(M){return typeof M=="number"?this.xorS(M):this.xorM(M)},ft.prototype.xorS=function(M){for(var C=0;C<this.rows;C++)for(var j=0;j<this.columns;j++)this.set(C,j,this.get(C,j)^M);return this},ft.prototype.xorM=function(M){if(M=nt.checkMatrix(M),this.rows!==M.rows||this.columns!==M.columns)throw new RangeError("Matrices dimensions must be equal");for(var C=0;C<this.rows;C++)for(var j=0;j<this.columns;j++)this.set(C,j,this.get(C,j)^M.get(C,j));return this},ft.xor=function(M,C){var j=new nt(M);return j.xor(C)},ft.prototype.leftShift=function(M){return typeof M=="number"?this.leftShiftS(M):this.leftShiftM(M)},ft.prototype.leftShiftS=function(M){for(var C=0;C<this.rows;C++)for(var j=0;j<this.columns;j++)this.set(C,j,this.get(C,j)<<M);return this},ft.prototype.leftShiftM=function(M){if(M=nt.checkMatrix(M),this.rows!==M.rows||this.columns!==M.columns)throw new RangeError("Matrices dimensions must be equal");for(var C=0;C<this.rows;C++)for(var j=0;j<this.columns;j++)this.set(C,j,this.get(C,j)<<M.get(C,j));return this},ft.leftShift=function(M,C){var j=new nt(M);return j.leftShift(C)},ft.prototype.signPropagatingRightShift=function(M){return typeof M=="number"?this.signPropagatingRightShiftS(M):this.signPropagatingRightShiftM(M)},ft.prototype.signPropagatingRightShiftS=function(M){for(var C=0;C<this.rows;C++)for(var j=0;j<this.columns;j++)this.set(C,j,this.get(C,j)>>M);return this},ft.prototype.signPropagatingRightShiftM=function(M){if(M=nt.checkMatrix(M),this.rows!==M.rows||this.columns!==M.columns)throw new RangeError("Matrices dimensions must be equal");for(var C=0;C<this.rows;C++)for(var j=0;j<this.columns;j++)this.set(C,j,this.get(C,j)>>M.get(C,j));return this},ft.signPropagatingRightShift=function(M,C){var j=new nt(M);return j.signPropagatingRightShift(C)},ft.prototype.rightShift=function(M){return typeof M=="number"?this.rightShiftS(M):this.rightShiftM(M)},ft.prototype.rightShiftS=function(M){for(var C=0;C<this.rows;C++)for(var j=0;j<this.columns;j++)this.set(C,j,this.get(C,j)>>>M);return this},ft.prototype.rightShiftM=function(M){if(M=nt.checkMatrix(M),this.rows!==M.rows||this.columns!==M.columns)throw new RangeError("Matrices dimensions must be equal");for(var C=0;C<this.rows;C++)for(var j=0;j<this.columns;j++)this.set(C,j,this.get(C,j)>>>M.get(C,j));return this},ft.rightShift=function(M,C){var j=new nt(M);return j.rightShift(C)},ft.prototype.zeroFillRightShift=ft.prototype.rightShift,ft.prototype.zeroFillRightShiftS=ft.prototype.rightShiftS,ft.prototype.zeroFillRightShiftM=ft.prototype.rightShiftM,ft.zeroFillRightShift=ft.rightShift,ft.prototype.not=function(){for(var M=0;M<this.rows;M++)for(var C=0;C<this.columns;C++)this.set(M,C,~this.get(M,C));return this},ft.not=function(M){var C=new nt(M);return C.not()},ft.prototype.abs=function(){for(var M=0;M<this.rows;M++)for(var C=0;C<this.columns;C++)this.set(M,C,Math.abs(this.get(M,C)));return this},ft.abs=function(M){var C=new nt(M);return C.abs()},ft.prototype.acos=function(){for(var M=0;M<this.rows;M++)for(var C=0;C<this.columns;C++)this.set(M,C,Math.acos(this.get(M,C)));return this},ft.acos=function(M){var C=new nt(M);return C.acos()},ft.prototype.acosh=function(){for(var M=0;M<this.rows;M++)for(var C=0;C<this.columns;C++)this.set(M,C,Math.acosh(this.get(M,C)));return this},ft.acosh=function(M){var C=new nt(M);return C.acosh()},ft.prototype.asin=function(){for(var M=0;M<this.rows;M++)for(var C=0;C<this.columns;C++)this.set(M,C,Math.asin(this.get(M,C)));return this},ft.asin=function(M){var C=new nt(M);return C.asin()},ft.prototype.asinh=function(){for(var M=0;M<this.rows;M++)for(var C=0;C<this.columns;C++)this.set(M,C,Math.asinh(this.get(M,C)));return this},ft.asinh=function(M){var C=new nt(M);return C.asinh()},ft.prototype.atan=function(){for(var M=0;M<this.rows;M++)for(var C=0;C<this.columns;C++)this.set(M,C,Math.atan(this.get(M,C)));return this},ft.atan=function(M){var C=new nt(M);return C.atan()},ft.prototype.atanh=function(){for(var M=0;M<this.rows;M++)for(var C=0;C<this.columns;C++)this.set(M,C,Math.atanh(this.get(M,C)));return this},ft.atanh=function(M){var C=new nt(M);return C.atanh()},ft.prototype.cbrt=function(){for(var M=0;M<this.rows;M++)for(var C=0;C<this.columns;C++)this.set(M,C,Math.cbrt(this.get(M,C)));return this},ft.cbrt=function(M){var C=new nt(M);return C.cbrt()},ft.prototype.ceil=function(){for(var M=0;M<this.rows;M++)for(var C=0;C<this.columns;C++)this.set(M,C,Math.ceil(this.get(M,C)));return this},ft.ceil=function(M){var C=new nt(M);return C.ceil()},ft.prototype.clz32=function(){for(var M=0;M<this.rows;M++)for(var C=0;C<this.columns;C++)this.set(M,C,Math.clz32(this.get(M,C)));return this},ft.clz32=function(M){var C=new nt(M);return C.clz32()},ft.prototype.cos=function(){for(var M=0;M<this.rows;M++)for(var C=0;C<this.columns;C++)this.set(M,C,Math.cos(this.get(M,C)));return this},ft.cos=function(M){var C=new nt(M);return C.cos()},ft.prototype.cosh=function(){for(var M=0;M<this.rows;M++)for(var C=0;C<this.columns;C++)this.set(M,C,Math.cosh(this.get(M,C)));return this},ft.cosh=function(M){var C=new nt(M);return C.cosh()},ft.prototype.exp=function(){for(var M=0;M<this.rows;M++)for(var C=0;C<this.columns;C++)this.set(M,C,Math.exp(this.get(M,C)));return this},ft.exp=function(M){var C=new nt(M);return C.exp()},ft.prototype.expm1=function(){for(var M=0;M<this.rows;M++)for(var C=0;C<this.columns;C++)this.set(M,C,Math.expm1(this.get(M,C)));return this},ft.expm1=function(M){var C=new nt(M);return C.expm1()},ft.prototype.floor=function(){for(var M=0;M<this.rows;M++)for(var C=0;C<this.columns;C++)this.set(M,C,Math.floor(this.get(M,C)));return this},ft.floor=function(M){var C=new nt(M);return C.floor()},ft.prototype.fround=function(){for(var M=0;M<this.rows;M++)for(var C=0;C<this.columns;C++)this.set(M,C,Math.fround(this.get(M,C)));return this},ft.fround=function(M){var C=new nt(M);return C.fround()},ft.prototype.log=function(){for(var M=0;M<this.rows;M++)for(var C=0;C<this.columns;C++)this.set(M,C,Math.log(this.get(M,C)));return this},ft.log=function(M){var C=new nt(M);return C.log()},ft.prototype.log1p=function(){for(var M=0;M<this.rows;M++)for(var C=0;C<this.columns;C++)this.set(M,C,Math.log1p(this.get(M,C)));return this},ft.log1p=function(M){var C=new nt(M);return C.log1p()},ft.prototype.log10=function(){for(var M=0;M<this.rows;M++)for(var C=0;C<this.columns;C++)this.set(M,C,Math.log10(this.get(M,C)));return this},ft.log10=function(M){var C=new nt(M);return C.log10()},ft.prototype.log2=function(){for(var M=0;M<this.rows;M++)for(var C=0;C<this.columns;C++)this.set(M,C,Math.log2(this.get(M,C)));return this},ft.log2=function(M){var C=new nt(M);return C.log2()},ft.prototype.round=function(){for(var M=0;M<this.rows;M++)for(var C=0;C<this.columns;C++)this.set(M,C,Math.round(this.get(M,C)));return this},ft.round=function(M){var C=new nt(M);return C.round()},ft.prototype.sign=function(){for(var M=0;M<this.rows;M++)for(var C=0;C<this.columns;C++)this.set(M,C,Math.sign(this.get(M,C)));return this},ft.sign=function(M){var C=new nt(M);return C.sign()},ft.prototype.sin=function(){for(var M=0;M<this.rows;M++)for(var C=0;C<this.columns;C++)this.set(M,C,Math.sin(this.get(M,C)));return this},ft.sin=function(M){var C=new nt(M);return C.sin()},ft.prototype.sinh=function(){for(var M=0;M<this.rows;M++)for(var C=0;C<this.columns;C++)this.set(M,C,Math.sinh(this.get(M,C)));return this},ft.sinh=function(M){var C=new nt(M);return C.sinh()},ft.prototype.sqrt=function(){for(var M=0;M<this.rows;M++)for(var C=0;C<this.columns;C++)this.set(M,C,Math.sqrt(this.get(M,C)));return this},ft.sqrt=function(M){var C=new nt(M);return C.sqrt()},ft.prototype.tan=function(){for(var M=0;M<this.rows;M++)for(var C=0;C<this.columns;C++)this.set(M,C,Math.tan(this.get(M,C)));return this},ft.tan=function(M){var C=new nt(M);return C.tan()},ft.prototype.tanh=function(){for(var M=0;M<this.rows;M++)for(var C=0;C<this.columns;C++)this.set(M,C,Math.tanh(this.get(M,C)));return this},ft.tanh=function(M){var C=new nt(M);return C.tanh()},ft.prototype.trunc=function(){for(var M=0;M<this.rows;M++)for(var C=0;C<this.columns;C++)this.set(M,C,Math.trunc(this.get(M,C)));return this},ft.trunc=function(M){var C=new nt(M);return C.trunc()},ft.pow=function(M,C){var j=new nt(M);return j.pow(C)},ft.prototype.pow=function(M){return typeof M=="number"?this.powS(M):this.powM(M)},ft.prototype.powS=function(M){for(var C=0;C<this.rows;C++)for(var j=0;j<this.columns;j++)this.set(C,j,Math.pow(this.get(C,j),M));return this},ft.prototype.powM=function(M){if(M=nt.checkMatrix(M),this.rows!==M.rows||this.columns!==M.columns)throw new RangeError("Matrices dimensions must be equal");for(var C=0;C<this.rows;C++)for(var j=0;j<this.columns;j++)this.set(C,j,Math.pow(this.get(C,j),M.get(C,j)));return this}}function m(ft,nt,k){var M=k?ft.rows:ft.rows-1;if(nt<0||nt>M)throw new RangeError("Row index out of range")}function d(ft,nt,k){var M=k?ft.columns:ft.columns-1;if(nt<0||nt>M)throw new RangeError("Column index out of range")}function tt(ft,nt){if(nt.to1DArray&&(nt=nt.to1DArray()),nt.length!==ft.columns)throw new RangeError("vector size must be the same as the number of columns");return nt}function Y(ft,nt){if(nt.to1DArray&&(nt=nt.to1DArray()),nt.length!==ft.rows)throw new RangeError("vector size must be the same as the number of rows");return nt}function V(ft,nt){if(!E.isAnyArray(nt))throw new TypeError("row indices must be an array");for(var k=0;k<nt.length;k++)if(nt[k]<0||nt[k]>=ft.rows)throw new RangeError("row indices are out of range")}function $(ft,nt){if(!E.isAnyArray(nt))throw new TypeError("column indices must be an array");for(var k=0;k<nt.length;k++)if(nt[k]<0||nt[k]>=ft.columns)throw new RangeError("column indices are out of range")}function q(ft,nt,k,M,C){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(Q("startRow",nt),Q("endRow",k),Q("startColumn",M),Q("endColumn",C),nt>k||M>C||nt<0||nt>=ft.rows||k<0||k>=ft.rows||M<0||M>=ft.columns||C<0||C>=ft.columns)throw new RangeError("Submatrix indices are out of range")}function rt(ft){for(var nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,k=[],M=0;M<ft;M++)k.push(nt);return k}function Q(ft,nt){if(typeof nt!="number")throw new TypeError("".concat(ft," must be a number"))}function it(ft){if(ft.isEmpty())throw new Error("Empty matrix has no elements to index")}function ht(ft){for(var nt=rt(ft.rows),k=0;k<ft.rows;++k)for(var M=0;M<ft.columns;++M)nt[k]+=ft.get(k,M);return nt}function dt(ft){for(var nt=rt(ft.columns),k=0;k<ft.rows;++k)for(var M=0;M<ft.columns;++M)nt[M]+=ft.get(k,M);return nt}function Ot(ft){for(var nt=0,k=0;k<ft.rows;k++)for(var M=0;M<ft.columns;M++)nt+=ft.get(k,M);return nt}function It(ft){for(var nt=rt(ft.rows,1),k=0;k<ft.rows;++k)for(var M=0;M<ft.columns;++M)nt[k]*=ft.get(k,M);return nt}function Kt(ft){for(var nt=rt(ft.columns,1),k=0;k<ft.rows;++k)for(var M=0;M<ft.columns;++M)nt[M]*=ft.get(k,M);return nt}function Ft(ft){for(var nt=1,k=0;k<ft.rows;k++)for(var M=0;M<ft.columns;M++)nt*=ft.get(k,M);return nt}function Nt(ft,nt,k){for(var M=ft.rows,C=ft.columns,j=[],xt=0;xt<M;xt++){for(var At=0,wt=0,Pt=0,Me=0;Me<C;Me++)Pt=ft.get(xt,Me)-k[xt],At+=Pt,wt+=Pt*Pt;nt?j.push((wt-At*At/C)/(C-1)):j.push((wt-At*At/C)/C)}return j}function st(ft,nt,k){for(var M=ft.rows,C=ft.columns,j=[],xt=0;xt<C;xt++){for(var At=0,wt=0,Pt=0,Me=0;Me<M;Me++)Pt=ft.get(Me,xt)-k[xt],At+=Pt,wt+=Pt*Pt;nt?j.push((wt-At*At/M)/(M-1)):j.push((wt-At*At/M)/M)}return j}function yt(ft,nt,k){for(var M=ft.rows,C=ft.columns,j=M*C,xt=0,At=0,wt=0,Pt=0;Pt<M;Pt++)for(var Me=0;Me<C;Me++)wt=ft.get(Pt,Me)-k,xt+=wt,At+=wt*wt;return nt?(At-xt*xt/j)/(j-1):(At-xt*xt/j)/j}function kt(ft,nt){for(var k=0;k<ft.rows;k++)for(var M=0;M<ft.columns;M++)ft.set(k,M,ft.get(k,M)-nt[k])}function ee(ft,nt){for(var k=0;k<ft.rows;k++)for(var M=0;M<ft.columns;M++)ft.set(k,M,ft.get(k,M)-nt[M])}function $t(ft,nt){for(var k=0;k<ft.rows;k++)for(var M=0;M<ft.columns;M++)ft.set(k,M,ft.get(k,M)-nt)}function ge(ft){for(var nt=[],k=0;k<ft.rows;k++){for(var M=0,C=0;C<ft.columns;C++)M+=Math.pow(ft.get(k,C),2)/(ft.columns-1);nt.push(Math.sqrt(M))}return nt}function Pe(ft,nt){for(var k=0;k<ft.rows;k++)for(var M=0;M<ft.columns;M++)ft.set(k,M,ft.get(k,M)/nt[k])}function er(ft){for(var nt=[],k=0;k<ft.columns;k++){for(var M=0,C=0;C<ft.rows;C++)M+=Math.pow(ft.get(C,k),2)/(ft.rows-1);nt.push(Math.sqrt(M))}return nt}function Jt(ft,nt){for(var k=0;k<ft.rows;k++)for(var M=0;M<ft.columns;M++)ft.set(k,M,ft.get(k,M)/nt[M])}function ae(ft){for(var nt=ft.size-1,k=0,M=0;M<ft.columns;M++)for(var C=0;C<ft.rows;C++)k+=Math.pow(ft.get(C,M),2)/nt;return Math.sqrt(k)}function Se(ft,nt){for(var k=0;k<ft.rows;k++)for(var M=0;M<ft.columns;M++)ft.set(k,M,ft.get(k,M)/nt)}var xe=function(){function ft(){P(this,ft)}return N(ft,[{key:"size",get:function(){return this.rows*this.columns}},{key:"apply",value:function(k){if(typeof k!="function")throw new TypeError("callback must be a function");for(var M=0;M<this.rows;M++)for(var C=0;C<this.columns;C++)k.call(this,M,C);return this}},{key:"to1DArray",value:function(){for(var k=[],M=0;M<this.rows;M++)for(var C=0;C<this.columns;C++)k.push(this.get(M,C));return k}},{key:"to2DArray",value:function(){for(var k=[],M=0;M<this.rows;M++){k.push([]);for(var C=0;C<this.columns;C++)k[M].push(this.get(M,C))}return k}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return this.rows===1}},{key:"isColumnVector",value:function(){return this.columns===1}},{key:"isVector",value:function(){return this.rows===1||this.columns===1}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isEmpty",value:function(){return this.rows===0||this.columns===0}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var k=0;k<this.rows;k++)for(var M=0;M<=k;M++)if(this.get(k,M)!==this.get(M,k))return!1;return!0}return!1}},{key:"isEchelonForm",value:function(){for(var k=0,M=0,C=-1,j=!0,xt=!1;k<this.rows&&j;){for(M=0,xt=!1;M<this.columns&&xt===!1;)this.get(k,M)===0?M++:this.get(k,M)===1&&M>C?(xt=!0,C=M):(j=!1,xt=!0);k++}return j}},{key:"isReducedEchelonForm",value:function(){for(var k=0,M=0,C=-1,j=!0,xt=!1;k<this.rows&&j;){for(M=0,xt=!1;M<this.columns&&xt===!1;)this.get(k,M)===0?M++:this.get(k,M)===1&&M>C?(xt=!0,C=M):(j=!1,xt=!0);for(var At=M+1;At<this.rows;At++)this.get(k,At)!==0&&(j=!1);k++}return j}},{key:"echelonForm",value:function(){for(var k=this.clone(),M=0,C=0;M<k.rows&&C<k.columns;){for(var j=M,xt=M;xt<k.rows;xt++)k.get(xt,C)>k.get(j,C)&&(j=xt);if(k.get(j,C)===0)C++;else{k.swapRows(M,j);for(var At=k.get(M,C),wt=C;wt<k.columns;wt++)k.set(M,wt,k.get(M,wt)/At);for(var Pt=M+1;Pt<k.rows;Pt++){var Me=k.get(Pt,C)/k.get(M,C);k.set(Pt,C,0);for(var ve=C+1;ve<k.columns;ve++)k.set(Pt,ve,k.get(Pt,ve)-k.get(M,ve)*Me)}M++,C++}}return k}},{key:"reducedEchelonForm",value:function(){for(var k=this.echelonForm(),M=k.columns,C=k.rows,j=C-1;j>=0;)if(k.maxRow(j)===0)j--;else{for(var xt=0,At=!1;xt<C&&At===!1;)k.get(j,xt)===1?At=!0:xt++;for(var wt=0;wt<j;wt++)for(var Pt=k.get(wt,xt),Me=xt;Me<M;Me++){var ve=k.get(wt,Me)-Pt*k.get(j,Me);k.set(wt,Me,ve)}j--}return k}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(L(k)!=="object")throw new TypeError("options must be an object");var M=k.rows,C=M===void 0?1:M,j=k.columns,xt=j===void 0?1:j;if(!Number.isInteger(C)||C<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(xt)||xt<=0)throw new TypeError("columns must be a positive integer");for(var At=new Wt(this.rows*C,this.columns*xt),wt=0;wt<C;wt++)for(var Pt=0;Pt<xt;Pt++)At.setSubMatrix(this,this.rows*wt,this.columns*Pt);return At}},{key:"fill",value:function(k){for(var M=0;M<this.rows;M++)for(var C=0;C<this.columns;C++)this.set(M,C,k);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(k){m(this,k);for(var M=[],C=0;C<this.columns;C++)M.push(this.get(k,C));return M}},{key:"getRowVector",value:function(k){return Wt.rowVector(this.getRow(k))}},{key:"setRow",value:function(k,M){m(this,k),M=tt(this,M);for(var C=0;C<this.columns;C++)this.set(k,C,M[C]);return this}},{key:"swapRows",value:function(k,M){m(this,k),m(this,M);for(var C=0;C<this.columns;C++){var j=this.get(k,C);this.set(k,C,this.get(M,C)),this.set(M,C,j)}return this}},{key:"getColumn",value:function(k){d(this,k);for(var M=[],C=0;C<this.rows;C++)M.push(this.get(C,k));return M}},{key:"getColumnVector",value:function(k){return Wt.columnVector(this.getColumn(k))}},{key:"setColumn",value:function(k,M){d(this,k),M=Y(this,M);for(var C=0;C<this.rows;C++)this.set(C,k,M[C]);return this}},{key:"swapColumns",value:function(k,M){d(this,k),d(this,M);for(var C=0;C<this.rows;C++){var j=this.get(C,k);this.set(C,k,this.get(C,M)),this.set(C,M,j)}return this}},{key:"addRowVector",value:function(k){k=tt(this,k);for(var M=0;M<this.rows;M++)for(var C=0;C<this.columns;C++)this.set(M,C,this.get(M,C)+k[C]);return this}},{key:"subRowVector",value:function(k){k=tt(this,k);for(var M=0;M<this.rows;M++)for(var C=0;C<this.columns;C++)this.set(M,C,this.get(M,C)-k[C]);return this}},{key:"mulRowVector",value:function(k){k=tt(this,k);for(var M=0;M<this.rows;M++)for(var C=0;C<this.columns;C++)this.set(M,C,this.get(M,C)*k[C]);return this}},{key:"divRowVector",value:function(k){k=tt(this,k);for(var M=0;M<this.rows;M++)for(var C=0;C<this.columns;C++)this.set(M,C,this.get(M,C)/k[C]);return this}},{key:"addColumnVector",value:function(k){k=Y(this,k);for(var M=0;M<this.rows;M++)for(var C=0;C<this.columns;C++)this.set(M,C,this.get(M,C)+k[M]);return this}},{key:"subColumnVector",value:function(k){k=Y(this,k);for(var M=0;M<this.rows;M++)for(var C=0;C<this.columns;C++)this.set(M,C,this.get(M,C)-k[M]);return this}},{key:"mulColumnVector",value:function(k){k=Y(this,k);for(var M=0;M<this.rows;M++)for(var C=0;C<this.columns;C++)this.set(M,C,this.get(M,C)*k[M]);return this}},{key:"divColumnVector",value:function(k){k=Y(this,k);for(var M=0;M<this.rows;M++)for(var C=0;C<this.columns;C++)this.set(M,C,this.get(M,C)/k[M]);return this}},{key:"mulRow",value:function(k,M){m(this,k);for(var C=0;C<this.columns;C++)this.set(k,C,this.get(k,C)*M);return this}},{key:"mulColumn",value:function(k,M){d(this,k);for(var C=0;C<this.rows;C++)this.set(C,k,this.get(C,k)*M);return this}},{key:"max",value:function(k){if(this.isEmpty())return NaN;switch(k){case"row":{for(var M=new Array(this.rows).fill(Number.NEGATIVE_INFINITY),C=0;C<this.rows;C++)for(var j=0;j<this.columns;j++)this.get(C,j)>M[C]&&(M[C]=this.get(C,j));return M}case"column":{for(var xt=new Array(this.columns).fill(Number.NEGATIVE_INFINITY),At=0;At<this.rows;At++)for(var wt=0;wt<this.columns;wt++)this.get(At,wt)>xt[wt]&&(xt[wt]=this.get(At,wt));return xt}case void 0:{for(var Pt=this.get(0,0),Me=0;Me<this.rows;Me++)for(var ve=0;ve<this.columns;ve++)this.get(Me,ve)>Pt&&(Pt=this.get(Me,ve));return Pt}default:throw new Error("invalid option: ".concat(k))}}},{key:"maxIndex",value:function(){it(this);for(var k=this.get(0,0),M=[0,0],C=0;C<this.rows;C++)for(var j=0;j<this.columns;j++)this.get(C,j)>k&&(k=this.get(C,j),M[0]=C,M[1]=j);return M}},{key:"min",value:function(k){if(this.isEmpty())return NaN;switch(k){case"row":{for(var M=new Array(this.rows).fill(Number.POSITIVE_INFINITY),C=0;C<this.rows;C++)for(var j=0;j<this.columns;j++)this.get(C,j)<M[C]&&(M[C]=this.get(C,j));return M}case"column":{for(var xt=new Array(this.columns).fill(Number.POSITIVE_INFINITY),At=0;At<this.rows;At++)for(var wt=0;wt<this.columns;wt++)this.get(At,wt)<xt[wt]&&(xt[wt]=this.get(At,wt));return xt}case void 0:{for(var Pt=this.get(0,0),Me=0;Me<this.rows;Me++)for(var ve=0;ve<this.columns;ve++)this.get(Me,ve)<Pt&&(Pt=this.get(Me,ve));return Pt}default:throw new Error("invalid option: ".concat(k))}}},{key:"minIndex",value:function(){it(this);for(var k=this.get(0,0),M=[0,0],C=0;C<this.rows;C++)for(var j=0;j<this.columns;j++)this.get(C,j)<k&&(k=this.get(C,j),M[0]=C,M[1]=j);return M}},{key:"maxRow",value:function(k){if(m(this,k),this.isEmpty())return NaN;for(var M=this.get(k,0),C=1;C<this.columns;C++)this.get(k,C)>M&&(M=this.get(k,C));return M}},{key:"maxRowIndex",value:function(k){m(this,k),it(this);for(var M=this.get(k,0),C=[k,0],j=1;j<this.columns;j++)this.get(k,j)>M&&(M=this.get(k,j),C[1]=j);return C}},{key:"minRow",value:function(k){if(m(this,k),this.isEmpty())return NaN;for(var M=this.get(k,0),C=1;C<this.columns;C++)this.get(k,C)<M&&(M=this.get(k,C));return M}},{key:"minRowIndex",value:function(k){m(this,k),it(this);for(var M=this.get(k,0),C=[k,0],j=1;j<this.columns;j++)this.get(k,j)<M&&(M=this.get(k,j),C[1]=j);return C}},{key:"maxColumn",value:function(k){if(d(this,k),this.isEmpty())return NaN;for(var M=this.get(0,k),C=1;C<this.rows;C++)this.get(C,k)>M&&(M=this.get(C,k));return M}},{key:"maxColumnIndex",value:function(k){d(this,k),it(this);for(var M=this.get(0,k),C=[0,k],j=1;j<this.rows;j++)this.get(j,k)>M&&(M=this.get(j,k),C[0]=j);return C}},{key:"minColumn",value:function(k){if(d(this,k),this.isEmpty())return NaN;for(var M=this.get(0,k),C=1;C<this.rows;C++)this.get(C,k)<M&&(M=this.get(C,k));return M}},{key:"minColumnIndex",value:function(k){d(this,k),it(this);for(var M=this.get(0,k),C=[0,k],j=1;j<this.rows;j++)this.get(j,k)<M&&(M=this.get(j,k),C[0]=j);return C}},{key:"diag",value:function(){for(var k=Math.min(this.rows,this.columns),M=[],C=0;C<k;C++)M.push(this.get(C,C));return M}},{key:"norm",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"frobenius";switch(k){case"max":return this.max();case"frobenius":return Math.sqrt(this.dot(this));default:throw new RangeError("unknown norm type: ".concat(k))}}},{key:"cumulativeSum",value:function(){for(var k=0,M=0;M<this.rows;M++)for(var C=0;C<this.columns;C++)k+=this.get(M,C),this.set(M,C,k);return this}},{key:"dot",value:function(k){ft.isMatrix(k)&&(k=k.to1DArray());var M=this.to1DArray();if(M.length!==k.length)throw new RangeError("vectors do not have the same size");for(var C=0,j=0;j<M.length;j++)C+=M[j]*k[j];return C}},{key:"mmul",value:function(k){k=Wt.checkMatrix(k);for(var M=this.rows,C=this.columns,j=k.columns,xt=new Wt(M,j),At=new Float64Array(C),wt=0;wt<j;wt++){for(var Pt=0;Pt<C;Pt++)At[Pt]=k.get(Pt,wt);for(var Me=0;Me<M;Me++){for(var ve=0,Ke=0;Ke<C;Ke++)ve+=this.get(Me,Ke)*At[Ke];xt.set(Me,wt,ve)}}return xt}},{key:"strassen2x2",value:function(k){k=Wt.checkMatrix(k);var M=new Wt(2,2),C=this.get(0,0),j=k.get(0,0),xt=this.get(0,1),At=k.get(0,1),wt=this.get(1,0),Pt=k.get(1,0),Me=this.get(1,1),ve=k.get(1,1),Ke=(C+Me)*(j+ve),br=(wt+Me)*j,ir=C*(At-ve),mr=Me*(Pt-j),Mn=(C+xt)*ve,Xe=(wt-C)*(j+At),vr=(xt-Me)*(Pt+ve),Er=Ke+mr-Mn+vr,on=ir+Mn,Wr=br+mr,xa=Ke-br+ir+Xe;return M.set(0,0,Er),M.set(0,1,on),M.set(1,0,Wr),M.set(1,1,xa),M}},{key:"strassen3x3",value:function(k){k=Wt.checkMatrix(k);var M=new Wt(3,3),C=this.get(0,0),j=this.get(0,1),xt=this.get(0,2),At=this.get(1,0),wt=this.get(1,1),Pt=this.get(1,2),Me=this.get(2,0),ve=this.get(2,1),Ke=this.get(2,2),br=k.get(0,0),ir=k.get(0,1),mr=k.get(0,2),Mn=k.get(1,0),Xe=k.get(1,1),vr=k.get(1,2),Er=k.get(2,0),on=k.get(2,1),Wr=k.get(2,2),xa=(C+j+xt-At-wt-ve-Ke)*Xe,Ta=(C-At)*(-ir+Xe),Rn=wt*(-br+ir+Mn-Xe-vr-Er+Wr),Jn=(-C+At+wt)*(br-ir+Xe),Ga=(At+wt)*(-br+ir),Aa=C*br,an=(-C+Me+ve)*(br-mr+vr),Vn=(-C+Me)*(mr-vr),me=(Me+ve)*(-br+mr),Dt=(C+j+xt-wt-Pt-Me-ve)*vr,fe=ve*(-br+mr+Mn-Xe-vr-Er+on),Ae=(-xt+ve+Ke)*(Xe+Er-on),be=(xt-Ke)*(Xe-on),De=xt*Er,sr=(ve+Ke)*(-Er+on),Fr=(-xt+wt+Pt)*(vr+Er-Wr),Jr=(xt-Pt)*(vr-Wr),Pn=(wt+Pt)*(-Er+Wr),Bn=j*Mn,Zn=Pt*on,ba=At*mr,Ca=Me*ir,li=Ke*Wr,ta=Aa+De+Bn,fi=xa+Jn+Ga+Aa+Ae+De+sr,Co=Aa+an+me+Dt+De+Fr+Pn,La=Ta+Rn+Jn+Aa+De+Fr+Jr,xi=Ta+Jn+Ga+Aa+Zn,so=De+Fr+Jr+Pn+ba,To=Aa+an+Vn+fe+Ae+be+De,bo=Ae+be+De+sr+Ca,uo=Aa+an+Vn+me+li;return M.set(0,0,ta),M.set(0,1,fi),M.set(0,2,Co),M.set(1,0,La),M.set(1,1,xi),M.set(1,2,so),M.set(2,0,To),M.set(2,1,bo),M.set(2,2,uo),M}},{key:"mmulStrassen",value:function(k){k=Wt.checkMatrix(k);var M=this.clone(),C=M.rows,j=M.columns,xt=k.rows,At=k.columns;j!==xt&&console.warn("Multiplying ".concat(C," x ").concat(j," and ").concat(xt," x ").concat(At," matrix: dimensions do not match."));function wt(Ke,br,ir){var mr=Ke.rows,Mn=Ke.columns;if(mr===br&&Mn===ir)return Ke;var Xe=ft.zeros(br,ir);return Xe=Xe.setSubMatrix(Ke,0,0),Xe}var Pt=Math.max(C,xt),Me=Math.max(j,At);M=wt(M,Pt,Me),k=wt(k,Pt,Me);function ve(Ke,br,ir,mr){if(ir<=512||mr<=512)return Ke.mmul(br);ir%2===1&&mr%2===1?(Ke=wt(Ke,ir+1,mr+1),br=wt(br,ir+1,mr+1)):ir%2===1?(Ke=wt(Ke,ir+1,mr),br=wt(br,ir+1,mr)):mr%2===1&&(Ke=wt(Ke,ir,mr+1),br=wt(br,ir,mr+1));var Mn=parseInt(Ke.rows/2,10),Xe=parseInt(Ke.columns/2,10),vr=Ke.subMatrix(0,Mn-1,0,Xe-1),Er=br.subMatrix(0,Mn-1,0,Xe-1),on=Ke.subMatrix(0,Mn-1,Xe,Ke.columns-1),Wr=br.subMatrix(0,Mn-1,Xe,br.columns-1),xa=Ke.subMatrix(Mn,Ke.rows-1,0,Xe-1),Ta=br.subMatrix(Mn,br.rows-1,0,Xe-1),Rn=Ke.subMatrix(Mn,Ke.rows-1,Xe,Ke.columns-1),Jn=br.subMatrix(Mn,br.rows-1,Xe,br.columns-1),Ga=ve(ft.add(vr,Rn),ft.add(Er,Jn),Mn,Xe),Aa=ve(ft.add(xa,Rn),Er,Mn,Xe),an=ve(vr,ft.sub(Wr,Jn),Mn,Xe),Vn=ve(Rn,ft.sub(Ta,Er),Mn,Xe),me=ve(ft.add(vr,on),Jn,Mn,Xe),Dt=ve(ft.sub(xa,vr),ft.add(Er,Wr),Mn,Xe),fe=ve(ft.sub(on,Rn),ft.add(Ta,Jn),Mn,Xe),Ae=ft.add(Ga,Vn);Ae.sub(me),Ae.add(fe);var be=ft.add(an,me),De=ft.add(Aa,Vn),sr=ft.sub(Ga,Aa);sr.add(an),sr.add(Dt);var Fr=ft.zeros(2*Ae.rows,2*Ae.columns);return Fr=Fr.setSubMatrix(Ae,0,0),Fr=Fr.setSubMatrix(be,Ae.rows,0),Fr=Fr.setSubMatrix(De,0,Ae.columns),Fr=Fr.setSubMatrix(sr,Ae.rows,Ae.columns),Fr.subMatrix(0,ir-1,0,mr-1)}return ve(M,k,Pt,Me)}},{key:"scaleRows",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(L(k)!=="object")throw new TypeError("options must be an object");var M=k.min,C=M===void 0?0:M,j=k.max,xt=j===void 0?1:j;if(!Number.isFinite(C))throw new TypeError("min must be a number");if(!Number.isFinite(xt))throw new TypeError("max must be a number");if(C>=xt)throw new RangeError("min must be smaller than max");for(var At=new Wt(this.rows,this.columns),wt=0;wt<this.rows;wt++){var Pt=this.getRow(wt);Pt.length>0&&x(Pt,{min:C,max:xt,output:Pt}),At.setRow(wt,Pt)}return At}},{key:"scaleColumns",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(L(k)!=="object")throw new TypeError("options must be an object");var M=k.min,C=M===void 0?0:M,j=k.max,xt=j===void 0?1:j;if(!Number.isFinite(C))throw new TypeError("min must be a number");if(!Number.isFinite(xt))throw new TypeError("max must be a number");if(C>=xt)throw new RangeError("min must be smaller than max");for(var At=new Wt(this.rows,this.columns),wt=0;wt<this.columns;wt++){var Pt=this.getColumn(wt);Pt.length&&x(Pt,{min:C,max:xt,output:Pt}),At.setColumn(wt,Pt)}return At}},{key:"flipRows",value:function(){for(var k=Math.ceil(this.columns/2),M=0;M<this.rows;M++)for(var C=0;C<k;C++){var j=this.get(M,C),xt=this.get(M,this.columns-1-C);this.set(M,C,xt),this.set(M,this.columns-1-C,j)}return this}},{key:"flipColumns",value:function(){for(var k=Math.ceil(this.rows/2),M=0;M<this.columns;M++)for(var C=0;C<k;C++){var j=this.get(C,M),xt=this.get(this.rows-1-C,M);this.set(C,M,xt),this.set(this.rows-1-C,M,j)}return this}},{key:"kroneckerProduct",value:function(k){k=Wt.checkMatrix(k);for(var M=this.rows,C=this.columns,j=k.rows,xt=k.columns,At=new Wt(M*j,C*xt),wt=0;wt<M;wt++)for(var Pt=0;Pt<C;Pt++)for(var Me=0;Me<j;Me++)for(var ve=0;ve<xt;ve++)At.set(j*wt+Me,xt*Pt+ve,this.get(wt,Pt)*k.get(Me,ve));return At}},{key:"kroneckerSum",value:function(k){if(k=Wt.checkMatrix(k),!this.isSquare()||!k.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");var M=this.rows,C=k.rows,j=this.kroneckerProduct(Wt.eye(C,C)),xt=Wt.eye(M,M).kroneckerProduct(k);return j.add(xt)}},{key:"transpose",value:function(){for(var k=new Wt(this.columns,this.rows),M=0;M<this.rows;M++)for(var C=0;C<this.columns;C++)k.set(C,M,this.get(M,C));return k}},{key:"sortRows",value:function(){for(var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:we,M=0;M<this.rows;M++)this.setRow(M,this.getRow(M).sort(k));return this}},{key:"sortColumns",value:function(){for(var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:we,M=0;M<this.columns;M++)this.setColumn(M,this.getColumn(M).sort(k));return this}},{key:"subMatrix",value:function(k,M,C,j){q(this,k,M,C,j);for(var xt=new Wt(M-k+1,j-C+1),At=k;At<=M;At++)for(var wt=C;wt<=j;wt++)xt.set(At-k,wt-C,this.get(At,wt));return xt}},{key:"subMatrixRow",value:function(k,M,C){if(M===void 0&&(M=0),C===void 0&&(C=this.columns-1),M>C||M<0||M>=this.columns||C<0||C>=this.columns)throw new RangeError("Argument out of range");for(var j=new Wt(k.length,C-M+1),xt=0;xt<k.length;xt++)for(var At=M;At<=C;At++){if(k[xt]<0||k[xt]>=this.rows)throw new RangeError("Row index out of range: ".concat(k[xt]));j.set(xt,At-M,this.get(k[xt],At))}return j}},{key:"subMatrixColumn",value:function(k,M,C){if(M===void 0&&(M=0),C===void 0&&(C=this.rows-1),M>C||M<0||M>=this.rows||C<0||C>=this.rows)throw new RangeError("Argument out of range");for(var j=new Wt(C-M+1,k.length),xt=0;xt<k.length;xt++)for(var At=M;At<=C;At++){if(k[xt]<0||k[xt]>=this.columns)throw new RangeError("Column index out of range: ".concat(k[xt]));j.set(At-M,xt,this.get(At,k[xt]))}return j}},{key:"setSubMatrix",value:function(k,M,C){if(k=Wt.checkMatrix(k),k.isEmpty())return this;var j=M+k.rows-1,xt=C+k.columns-1;q(this,M,j,C,xt);for(var At=0;At<k.rows;At++)for(var wt=0;wt<k.columns;wt++)this.set(M+At,C+wt,k.get(At,wt));return this}},{key:"selection",value:function(k,M){V(this,k),$(this,M);for(var C=new Wt(k.length,M.length),j=0;j<k.length;j++)for(var xt=k[j],At=0;At<M.length;At++){var wt=M[At];C.set(j,At,this.get(xt,wt))}return C}},{key:"trace",value:function(){for(var k=Math.min(this.rows,this.columns),M=0,C=0;C<k;C++)M+=this.get(C,C);return M}},{key:"clone",value:function(){for(var k=new Wt(this.rows,this.columns),M=0;M<this.rows;M++)for(var C=0;C<this.columns;C++)k.set(M,C,this.get(M,C));return k}},{key:"sum",value:function(k){switch(k){case"row":return ht(this);case"column":return dt(this);case void 0:return Ot(this);default:throw new Error("invalid option: ".concat(k))}}},{key:"product",value:function(k){switch(k){case"row":return It(this);case"column":return Kt(this);case void 0:return Ft(this);default:throw new Error("invalid option: ".concat(k))}}},{key:"mean",value:function(k){var M=this.sum(k);switch(k){case"row":{for(var C=0;C<this.rows;C++)M[C]/=this.columns;return M}case"column":{for(var j=0;j<this.columns;j++)M[j]/=this.rows;return M}case void 0:return M/this.size;default:throw new Error("invalid option: ".concat(k))}}},{key:"variance",value:function(k){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(L(k)==="object"&&(M=k,k=void 0),L(M)!=="object")throw new TypeError("options must be an object");var C=M,j=C.unbiased,xt=j===void 0?!0:j,At=C.mean,wt=At===void 0?this.mean(k):At;if(typeof xt!="boolean")throw new TypeError("unbiased must be a boolean");switch(k){case"row":{if(!E.isAnyArray(wt))throw new TypeError("mean must be an array");return Nt(this,xt,wt)}case"column":{if(!E.isAnyArray(wt))throw new TypeError("mean must be an array");return st(this,xt,wt)}case void 0:{if(typeof wt!="number")throw new TypeError("mean must be a number");return yt(this,xt,wt)}default:throw new Error("invalid option: ".concat(k))}}},{key:"standardDeviation",value:function(k,M){L(k)==="object"&&(M=k,k=void 0);var C=this.variance(k,M);if(k===void 0)return Math.sqrt(C);for(var j=0;j<C.length;j++)C[j]=Math.sqrt(C[j]);return C}},{key:"center",value:function(k){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(L(k)==="object"&&(M=k,k=void 0),L(M)!=="object")throw new TypeError("options must be an object");var C=M,j=C.center,xt=j===void 0?this.mean(k):j;switch(k){case"row":{if(!E.isAnyArray(xt))throw new TypeError("center must be an array");return kt(this,xt),this}case"column":{if(!E.isAnyArray(xt))throw new TypeError("center must be an array");return ee(this,xt),this}case void 0:{if(typeof xt!="number")throw new TypeError("center must be a number");return $t(this,xt),this}default:throw new Error("invalid option: ".concat(k))}}},{key:"scale",value:function(k){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(L(k)==="object"&&(M=k,k=void 0),L(M)!=="object")throw new TypeError("options must be an object");var C=M.scale;switch(k){case"row":{if(C===void 0)C=ge(this);else if(!E.isAnyArray(C))throw new TypeError("scale must be an array");return Pe(this,C),this}case"column":{if(C===void 0)C=er(this);else if(!E.isAnyArray(C))throw new TypeError("scale must be an array");return Jt(this,C),this}case void 0:{if(C===void 0)C=ae(this);else if(typeof C!="number")throw new TypeError("scale must be a number");return Se(this,C),this}default:throw new Error("invalid option: ".concat(k))}}},{key:"toString",value:function(k){return A(this,k)}}],[{key:"from1DArray",value:function(k,M,C){var j=k*M;if(j!==C.length)throw new RangeError("data length does not match given dimensions");for(var xt=new Wt(k,M),At=0;At<k;At++)for(var wt=0;wt<M;wt++)xt.set(At,wt,C[At*M+wt]);return xt}},{key:"rowVector",value:function(k){for(var M=new Wt(1,k.length),C=0;C<k.length;C++)M.set(0,C,k[C]);return M}},{key:"columnVector",value:function(k){for(var M=new Wt(k.length,1),C=0;C<k.length;C++)M.set(C,0,k[C]);return M}},{key:"zeros",value:function(k,M){return new Wt(k,M)}},{key:"ones",value:function(k,M){return new Wt(k,M).fill(1)}},{key:"rand",value:function(k,M){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(L(C)!=="object")throw new TypeError("options must be an object");for(var j=C.random,xt=j===void 0?Math.random:j,At=new Wt(k,M),wt=0;wt<k;wt++)for(var Pt=0;Pt<M;Pt++)At.set(wt,Pt,xt());return At}},{key:"randInt",value:function(k,M){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(L(C)!=="object")throw new TypeError("options must be an object");var j=C.min,xt=j===void 0?0:j,At=C.max,wt=At===void 0?1e3:At,Pt=C.random,Me=Pt===void 0?Math.random:Pt;if(!Number.isInteger(xt))throw new TypeError("min must be an integer");if(!Number.isInteger(wt))throw new TypeError("max must be an integer");if(xt>=wt)throw new RangeError("min must be smaller than max");for(var ve=wt-xt,Ke=new Wt(k,M),br=0;br<k;br++)for(var ir=0;ir<M;ir++){var mr=xt+Math.round(Me()*ve);Ke.set(br,ir,mr)}return Ke}},{key:"eye",value:function(k,M,C){M===void 0&&(M=k),C===void 0&&(C=1);for(var j=Math.min(k,M),xt=this.zeros(k,M),At=0;At<j;At++)xt.set(At,At,C);return xt}},{key:"diag",value:function(k,M,C){var j=k.length;M===void 0&&(M=j),C===void 0&&(C=M);for(var xt=Math.min(j,M,C),At=this.zeros(M,C),wt=0;wt<xt;wt++)At.set(wt,wt,k[wt]);return At}},{key:"min",value:function(k,M){k=this.checkMatrix(k),M=this.checkMatrix(M);for(var C=k.rows,j=k.columns,xt=new Wt(C,j),At=0;At<C;At++)for(var wt=0;wt<j;wt++)xt.set(At,wt,Math.min(k.get(At,wt),M.get(At,wt)));return xt}},{key:"max",value:function(k,M){k=this.checkMatrix(k),M=this.checkMatrix(M);for(var C=k.rows,j=k.columns,xt=new this(C,j),At=0;At<C;At++)for(var wt=0;wt<j;wt++)xt.set(At,wt,Math.max(k.get(At,wt),M.get(At,wt)));return xt}},{key:"checkMatrix",value:function(k){return ft.isMatrix(k)?k:new Wt(k)}},{key:"isMatrix",value:function(k){return k!=null&&k.klass==="Matrix"}}]),ft}();xe.prototype.klass="Matrix",typeof Symbol!="undefined"&&(xe.prototype[Symbol.for("nodejs.util.inspect.custom")]=g);function we(ft,nt){return ft-nt}function zt(ft){return ft.every(function(nt){return typeof nt=="number"})}xe.random=xe.rand,xe.randomInt=xe.randInt,xe.diagonal=xe.diag,xe.prototype.diagonal=xe.prototype.diag,xe.identity=xe.eye,xe.prototype.negate=xe.prototype.neg,xe.prototype.tensorProduct=xe.prototype.kroneckerProduct;var Wt=function(ft){X(k,ft);var nt=R(k);function k(M,C){var j;if(P(this,k),j=nt.call(this),k.isMatrix(M))return G(j,M.clone());if(Number.isInteger(M)&&M>=0)if(j.data=[],Number.isInteger(C)&&C>=0)for(var xt=0;xt<M;xt++)j.data.push(new Float64Array(C));else throw new TypeError("nColumns must be a positive integer");else if(E.isAnyArray(M)){var At=M;if(M=At.length,C=M?At[0].length:0,typeof C!="number")throw new TypeError("Data must be a 2D array with at least one element");j.data=[];for(var wt=0;wt<M;wt++){if(At[wt].length!==C)throw new RangeError("Inconsistent array dimensions");if(!zt(At[wt]))throw new TypeError("Input data contains non-numeric values");j.data.push(Float64Array.from(At[wt]))}}else throw new TypeError("First argument must be a positive number or an array");return j.rows=M,j.columns=C,j}return N(k,[{key:"set",value:function(C,j,xt){return this.data[C][j]=xt,this}},{key:"get",value:function(C,j){return this.data[C][j]}},{key:"removeRow",value:function(C){return m(this,C),this.data.splice(C,1),this.rows-=1,this}},{key:"addRow",value:function(C,j){return j===void 0&&(j=C,C=this.rows),m(this,C,!0),j=Float64Array.from(tt(this,j)),this.data.splice(C,0,j),this.rows+=1,this}},{key:"removeColumn",value:function(C){d(this,C);for(var j=0;j<this.rows;j++){for(var xt=new Float64Array(this.columns-1),At=0;At<C;At++)xt[At]=this.data[j][At];for(var wt=C+1;wt<this.columns;wt++)xt[wt-1]=this.data[j][wt];this.data[j]=xt}return this.columns-=1,this}},{key:"addColumn",value:function(C,j){typeof j=="undefined"&&(j=C,C=this.columns),d(this,C,!0),j=Y(this,j);for(var xt=0;xt<this.rows;xt++){for(var At=new Float64Array(this.columns+1),wt=0;wt<C;wt++)At[wt]=this.data[xt][wt];for(At[wt++]=j[xt];wt<this.columns+1;wt++)At[wt]=this.data[xt][wt-1];this.data[xt]=At}return this.columns+=1,this}}]),k}(xe);B(xe,Wt);var Ie=function(ft){X(k,ft);var nt=R(k);function k(M,C,j){var xt;return P(this,k),xt=nt.call(this),xt.matrix=M,xt.rows=C,xt.columns=j,xt}return N(k)}(xe),Yt=function(ft){X(k,ft);var nt=R(k);function k(M,C){var j;return P(this,k),d(M,C),j=nt.call(this,M,M.rows,1),j.column=C,j}return N(k,[{key:"set",value:function(C,j,xt){return this.matrix.set(C,this.column,xt),this}},{key:"get",value:function(C){return this.matrix.get(C,this.column)}}]),k}(Ie),ie=function(ft){X(k,ft);var nt=R(k);function k(M,C){var j;return P(this,k),$(M,C),j=nt.call(this,M,M.rows,C.length),j.columnIndices=C,j}return N(k,[{key:"set",value:function(C,j,xt){return this.matrix.set(C,this.columnIndices[j],xt),this}},{key:"get",value:function(C,j){return this.matrix.get(C,this.columnIndices[j])}}]),k}(Ie),Oe=function(ft){X(k,ft);var nt=R(k);function k(M){return P(this,k),nt.call(this,M,M.rows,M.columns)}return N(k,[{key:"set",value:function(C,j,xt){return this.matrix.set(C,this.columns-j-1,xt),this}},{key:"get",value:function(C,j){return this.matrix.get(C,this.columns-j-1)}}]),k}(Ie),re=function(ft){X(k,ft);var nt=R(k);function k(M){return P(this,k),nt.call(this,M,M.rows,M.columns)}return N(k,[{key:"set",value:function(C,j,xt){return this.matrix.set(this.rows-C-1,j,xt),this}},{key:"get",value:function(C,j){return this.matrix.get(this.rows-C-1,j)}}]),k}(Ie),_e=function(ft){X(k,ft);var nt=R(k);function k(M,C){var j;return P(this,k),m(M,C),j=nt.call(this,M,1,M.columns),j.row=C,j}return N(k,[{key:"set",value:function(C,j,xt){return this.matrix.set(this.row,j,xt),this}},{key:"get",value:function(C,j){return this.matrix.get(this.row,j)}}]),k}(Ie),Ge=function(ft){X(k,ft);var nt=R(k);function k(M,C){var j;return P(this,k),V(M,C),j=nt.call(this,M,C.length,M.columns),j.rowIndices=C,j}return N(k,[{key:"set",value:function(C,j,xt){return this.matrix.set(this.rowIndices[C],j,xt),this}},{key:"get",value:function(C,j){return this.matrix.get(this.rowIndices[C],j)}}]),k}(Ie),Ct=function(ft){X(k,ft);var nt=R(k);function k(M,C,j){var xt;return P(this,k),V(M,C),$(M,j),xt=nt.call(this,M,C.length,j.length),xt.rowIndices=C,xt.columnIndices=j,xt}return N(k,[{key:"set",value:function(C,j,xt){return this.matrix.set(this.rowIndices[C],this.columnIndices[j],xt),this}},{key:"get",value:function(C,j){return this.matrix.get(this.rowIndices[C],this.columnIndices[j])}}]),k}(Ie),Nr=function(ft){X(k,ft);var nt=R(k);function k(M,C,j,xt,At){var wt;return P(this,k),q(M,C,j,xt,At),wt=nt.call(this,M,j-C+1,At-xt+1),wt.startRow=C,wt.startColumn=xt,wt}return N(k,[{key:"set",value:function(C,j,xt){return this.matrix.set(this.startRow+C,this.startColumn+j,xt),this}},{key:"get",value:function(C,j){return this.matrix.get(this.startRow+C,this.startColumn+j)}}]),k}(Ie),Or=function(ft){X(k,ft);var nt=R(k);function k(M){return P(this,k),nt.call(this,M,M.columns,M.rows)}return N(k,[{key:"set",value:function(C,j,xt){return this.matrix.set(j,C,xt),this}},{key:"get",value:function(C,j){return this.matrix.get(j,C)}}]),k}(Ie),Ur=function(ft){X(k,ft);var nt=R(k);function k(M){var C,j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};P(this,k);var xt=j.rows,At=xt===void 0?1:xt;if(M.length%At!==0)throw new Error("the data length is not divisible by the number of rows");return C=nt.call(this),C.rows=At,C.columns=M.length/At,C.data=M,C}return N(k,[{key:"set",value:function(C,j,xt){var At=this._calculateIndex(C,j);return this.data[At]=xt,this}},{key:"get",value:function(C,j){var xt=this._calculateIndex(C,j);return this.data[xt]}},{key:"_calculateIndex",value:function(C,j){return C*this.columns+j}}]),k}(xe),Sr=function(ft){X(k,ft);var nt=R(k);function k(M){var C;return P(this,k),C=nt.call(this),C.data=M,C.rows=M.length,C.columns=M[0].length,C}return N(k,[{key:"set",value:function(C,j,xt){return this.data[C][j]=xt,this}},{key:"get",value:function(C,j){return this.data[C][j]}}]),k}(xe);function gn(ft,nt){if(E.isAnyArray(ft))return ft[0]&&E.isAnyArray(ft[0])?new Sr(ft):new Ur(ft,nt);throw new Error("the argument is not an array")}var Rr=function(){function ft(nt){P(this,ft),nt=Sr.checkMatrix(nt);var k=nt.clone(),M=k.rows,C=k.columns,j=new Float64Array(M),xt=1,At,wt,Pt,Me,ve,Ke,br,ir,mr;for(At=0;At<M;At++)j[At]=At;for(ir=new Float64Array(M),wt=0;wt<C;wt++){for(At=0;At<M;At++)ir[At]=k.get(At,wt);for(At=0;At<M;At++){for(mr=Math.min(At,wt),ve=0,Pt=0;Pt<mr;Pt++)ve+=k.get(At,Pt)*ir[Pt];ir[At]-=ve,k.set(At,wt,ir[At])}for(Me=wt,At=wt+1;At<M;At++)Math.abs(ir[At])>Math.abs(ir[Me])&&(Me=At);if(Me!==wt){for(Pt=0;Pt<C;Pt++)Ke=k.get(Me,Pt),k.set(Me,Pt,k.get(wt,Pt)),k.set(wt,Pt,Ke);br=j[Me],j[Me]=j[wt],j[wt]=br,xt=-xt}if(wt<M&&k.get(wt,wt)!==0)for(At=wt+1;At<M;At++)k.set(At,wt,k.get(At,wt)/k.get(wt,wt))}this.LU=k,this.pivotVector=j,this.pivotSign=xt}return N(ft,[{key:"isSingular",value:function(){for(var k=this.LU,M=k.columns,C=0;C<M;C++)if(k.get(C,C)===0)return!0;return!1}},{key:"solve",value:function(k){k=Wt.checkMatrix(k);var M=this.LU,C=M.rows;if(C!==k.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");var j=k.columns,xt=k.subMatrixRow(this.pivotVector,0,j-1),At=M.columns,wt,Pt,Me;for(Me=0;Me<At;Me++)for(wt=Me+1;wt<At;wt++)for(Pt=0;Pt<j;Pt++)xt.set(wt,Pt,xt.get(wt,Pt)-xt.get(Me,Pt)*M.get(wt,Me));for(Me=At-1;Me>=0;Me--){for(Pt=0;Pt<j;Pt++)xt.set(Me,Pt,xt.get(Me,Pt)/M.get(Me,Me));for(wt=0;wt<Me;wt++)for(Pt=0;Pt<j;Pt++)xt.set(wt,Pt,xt.get(wt,Pt)-xt.get(Me,Pt)*M.get(wt,Me))}return xt}},{key:"determinant",get:function(){var k=this.LU;if(!k.isSquare())throw new Error("Matrix must be square");for(var M=this.pivotSign,C=k.columns,j=0;j<C;j++)M*=k.get(j,j);return M}},{key:"lowerTriangularMatrix",get:function(){for(var k=this.LU,M=k.rows,C=k.columns,j=new Wt(M,C),xt=0;xt<M;xt++)for(var At=0;At<C;At++)xt>At?j.set(xt,At,k.get(xt,At)):xt===At?j.set(xt,At,1):j.set(xt,At,0);return j}},{key:"upperTriangularMatrix",get:function(){for(var k=this.LU,M=k.rows,C=k.columns,j=new Wt(M,C),xt=0;xt<M;xt++)for(var At=0;At<C;At++)xt<=At?j.set(xt,At,k.get(xt,At)):j.set(xt,At,0);return j}},{key:"pivotPermutationVector",get:function(){return Array.from(this.pivotVector)}}]),ft}();function ln(ft,nt){var k=0;return Math.abs(ft)>Math.abs(nt)?(k=nt/ft,Math.abs(ft)*Math.sqrt(1+k*k)):nt!==0?(k=ft/nt,Math.abs(nt)*Math.sqrt(1+k*k)):0}var Nn=function(){function ft(nt){P(this,ft),nt=Sr.checkMatrix(nt);var k=nt.clone(),M=nt.rows,C=nt.columns,j=new Float64Array(C),xt,At,wt,Pt;for(wt=0;wt<C;wt++){var Me=0;for(xt=wt;xt<M;xt++)Me=ln(Me,k.get(xt,wt));if(Me!==0){for(k.get(wt,wt)<0&&(Me=-Me),xt=wt;xt<M;xt++)k.set(xt,wt,k.get(xt,wt)/Me);for(k.set(wt,wt,k.get(wt,wt)+1),At=wt+1;At<C;At++){for(Pt=0,xt=wt;xt<M;xt++)Pt+=k.get(xt,wt)*k.get(xt,At);for(Pt=-Pt/k.get(wt,wt),xt=wt;xt<M;xt++)k.set(xt,At,k.get(xt,At)+Pt*k.get(xt,wt))}}j[wt]=-Me}this.QR=k,this.Rdiag=j}return N(ft,[{key:"solve",value:function(k){k=Wt.checkMatrix(k);var M=this.QR,C=M.rows;if(k.rows!==C)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");var j=k.columns,xt=k.clone(),At=M.columns,wt,Pt,Me,ve;for(Me=0;Me<At;Me++)for(Pt=0;Pt<j;Pt++){for(ve=0,wt=Me;wt<C;wt++)ve+=M.get(wt,Me)*xt.get(wt,Pt);for(ve=-ve/M.get(Me,Me),wt=Me;wt<C;wt++)xt.set(wt,Pt,xt.get(wt,Pt)+ve*M.get(wt,Me))}for(Me=At-1;Me>=0;Me--){for(Pt=0;Pt<j;Pt++)xt.set(Me,Pt,xt.get(Me,Pt)/this.Rdiag[Me]);for(wt=0;wt<Me;wt++)for(Pt=0;Pt<j;Pt++)xt.set(wt,Pt,xt.get(wt,Pt)-xt.get(Me,Pt)*M.get(wt,Me))}return xt.subMatrix(0,At-1,0,j-1)}},{key:"isFullRank",value:function(){for(var k=this.QR.columns,M=0;M<k;M++)if(this.Rdiag[M]===0)return!1;return!0}},{key:"upperTriangularMatrix",get:function(){var k=this.QR,M=k.columns,C=new Wt(M,M),j,xt;for(j=0;j<M;j++)for(xt=0;xt<M;xt++)j<xt?C.set(j,xt,k.get(j,xt)):j===xt?C.set(j,xt,this.Rdiag[j]):C.set(j,xt,0);return C}},{key:"orthogonalMatrix",get:function(){var k=this.QR,M=k.rows,C=k.columns,j=new Wt(M,C),xt,At,wt,Pt;for(wt=C-1;wt>=0;wt--){for(xt=0;xt<M;xt++)j.set(xt,wt,0);for(j.set(wt,wt,1),At=wt;At<C;At++)if(k.get(wt,wt)!==0){for(Pt=0,xt=wt;xt<M;xt++)Pt+=k.get(xt,wt)*j.get(xt,At);for(Pt=-Pt/k.get(wt,wt),xt=wt;xt<M;xt++)j.set(xt,At,j.get(xt,At)+Pt*k.get(xt,wt))}}return j}}]),ft}(),Ln=function(){function ft(nt){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(P(this,ft),nt=Sr.checkMatrix(nt),nt.isEmpty())throw new Error("Matrix must be non-empty");var M=nt.rows,C=nt.columns,j=k.computeLeftSingularVectors,xt=j===void 0?!0:j,At=k.computeRightSingularVectors,wt=At===void 0?!0:At,Pt=k.autoTranspose,Me=Pt===void 0?!1:Pt,ve=!!xt,Ke=!!wt,br=!1,ir;if(M<C)if(!Me)ir=nt.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{ir=nt.transpose(),M=ir.rows,C=ir.columns,br=!0;var mr=ve;ve=Ke,Ke=mr}else ir=nt.clone();for(var Mn=Math.min(M,C),Xe=Math.min(M+1,C),vr=new Float64Array(Xe),Er=new Wt(M,Mn),on=new Wt(C,C),Wr=new Float64Array(C),xa=new Float64Array(M),Ta=new Float64Array(Xe),Rn=0;Rn<Xe;Rn++)Ta[Rn]=Rn;for(var Jn=Math.min(M-1,C),Ga=Math.max(0,Math.min(C-2,M)),Aa=Math.max(Jn,Ga),an=0;an<Aa;an++){if(an<Jn){vr[an]=0;for(var Vn=an;Vn<M;Vn++)vr[an]=ln(vr[an],ir.get(Vn,an));if(vr[an]!==0){ir.get(an,an)<0&&(vr[an]=-vr[an]);for(var me=an;me<M;me++)ir.set(me,an,ir.get(me,an)/vr[an]);ir.set(an,an,ir.get(an,an)+1)}vr[an]=-vr[an]}for(var Dt=an+1;Dt<C;Dt++){if(an<Jn&&vr[an]!==0){for(var fe=0,Ae=an;Ae<M;Ae++)fe+=ir.get(Ae,an)*ir.get(Ae,Dt);fe=-fe/ir.get(an,an);for(var be=an;be<M;be++)ir.set(be,Dt,ir.get(be,Dt)+fe*ir.get(be,an))}Wr[Dt]=ir.get(an,Dt)}if(ve&&an<Jn)for(var De=an;De<M;De++)Er.set(De,an,ir.get(De,an));if(an<Ga){Wr[an]=0;for(var sr=an+1;sr<C;sr++)Wr[an]=ln(Wr[an],Wr[sr]);if(Wr[an]!==0){Wr[an+1]<0&&(Wr[an]=0-Wr[an]);for(var Fr=an+1;Fr<C;Fr++)Wr[Fr]/=Wr[an];Wr[an+1]+=1}if(Wr[an]=-Wr[an],an+1<M&&Wr[an]!==0){for(var Jr=an+1;Jr<M;Jr++)xa[Jr]=0;for(var Pn=an+1;Pn<M;Pn++)for(var Bn=an+1;Bn<C;Bn++)xa[Pn]+=Wr[Bn]*ir.get(Pn,Bn);for(var Zn=an+1;Zn<C;Zn++)for(var ba=-Wr[Zn]/Wr[an+1],Ca=an+1;Ca<M;Ca++)ir.set(Ca,Zn,ir.get(Ca,Zn)+ba*xa[Ca])}if(Ke)for(var li=an+1;li<C;li++)on.set(li,an,Wr[li])}}var ta=Math.min(C,M+1);if(Jn<C&&(vr[Jn]=ir.get(Jn,Jn)),M<ta&&(vr[ta-1]=0),Ga+1<ta&&(Wr[Ga]=ir.get(Ga,ta-1)),Wr[ta-1]=0,ve){for(var fi=Jn;fi<Mn;fi++){for(var Co=0;Co<M;Co++)Er.set(Co,fi,0);Er.set(fi,fi,1)}for(var La=Jn-1;La>=0;La--)if(vr[La]!==0){for(var xi=La+1;xi<Mn;xi++){for(var so=0,To=La;To<M;To++)so+=Er.get(To,La)*Er.get(To,xi);so=-so/Er.get(La,La);for(var bo=La;bo<M;bo++)Er.set(bo,xi,Er.get(bo,xi)+so*Er.get(bo,La))}for(var uo=La;uo<M;uo++)Er.set(uo,La,-Er.get(uo,La));Er.set(La,La,1+Er.get(La,La));for(var Hi=0;Hi<La-1;Hi++)Er.set(Hi,La,0)}else{for(var ds=0;ds<M;ds++)Er.set(ds,La,0);Er.set(La,La,1)}}if(Ke)for(var zi=C-1;zi>=0;zi--){if(zi<Ga&&Wr[zi]!==0)for(var Ui=zi+1;Ui<C;Ui++){for(var gs=0,Ms=zi+1;Ms<C;Ms++)gs+=on.get(Ms,zi)*on.get(Ms,Ui);gs=-gs/on.get(zi+1,zi);for(var Go=zi+1;Go<C;Go++)on.set(Go,Ui,on.get(Go,Ui)+gs*on.get(Go,zi))}for(var _o=0;_o<C;_o++)on.set(_o,zi,0);on.set(zi,zi,1)}for(var Io=ta-1,$s=Number.EPSILON;ta>0;){var Yn=void 0,So=void 0;for(Yn=ta-2;Yn>=-1&&Yn!==-1;Yn--){var Oo=Number.MIN_VALUE+$s*Math.abs(vr[Yn]+Math.abs(vr[Yn+1]));if(Math.abs(Wr[Yn])<=Oo||Number.isNaN(Wr[Yn])){Wr[Yn]=0;break}}if(Yn===ta-2)So=4;else{var Wi=void 0;for(Wi=ta-1;Wi>=Yn&&Wi!==Yn;Wi--){var zn=(Wi!==ta?Math.abs(Wr[Wi]):0)+(Wi!==Yn+1?Math.abs(Wr[Wi-1]):0);if(Math.abs(vr[Wi])<=$s*zn){vr[Wi]=0;break}}Wi===Yn?So=3:Wi===ta-1?So=1:(So=2,Yn=Wi)}switch(Yn++,So){case 1:{var Lo=Wr[ta-2];Wr[ta-2]=0;for(var Ai=ta-2;Ai>=Yn;Ai--){var zo=ln(vr[Ai],Lo),Uo=vr[Ai]/zo,ps=Lo/zo;if(vr[Ai]=zo,Ai!==Yn&&(Lo=-ps*Wr[Ai-1],Wr[Ai-1]=Uo*Wr[Ai-1]),Ke)for(var eo=0;eo<C;eo++)zo=Uo*on.get(eo,Ai)+ps*on.get(eo,ta-1),on.set(eo,ta-1,-ps*on.get(eo,Ai)+Uo*on.get(eo,ta-1)),on.set(eo,Ai,zo)}break}case 2:{var ro=Wr[Yn-1];Wr[Yn-1]=0;for(var ei=Yn;ei<ta;ei++){var fo=ln(vr[ei],ro),Do=vr[ei]/fo,Wo=ro/fo;if(vr[ei]=fo,ro=-Wo*Wr[ei],Wr[ei]=Do*Wr[ei],ve)for(var No=0;No<M;No++)fo=Do*Er.get(No,ei)+Wo*Er.get(No,Yn-1),Er.set(No,Yn-1,-Wo*Er.get(No,ei)+Do*Er.get(No,Yn-1)),Er.set(No,ei,fo)}break}case 3:{var is=Math.max(Math.abs(vr[ta-1]),Math.abs(vr[ta-2]),Math.abs(Wr[ta-2]),Math.abs(vr[Yn]),Math.abs(Wr[Yn])),Xo=vr[ta-1]/is,Jo=vr[ta-2]/is,Xa=Wr[ta-2]/is,As=vr[Yn]/is,iu=Wr[Yn]/is,Xi=((Jo+Xo)*(Jo-Xo)+Xa*Xa)/2,os=Xo*Xa*(Xo*Xa),Eo=0;(Xi!==0||os!==0)&&(Xi<0?Eo=0-Math.sqrt(Xi*Xi+os):Eo=Math.sqrt(Xi*Xi+os),Eo=os/(Xi+Eo));for(var Yi=(As+Xo)*(As-Xo)+Eo,co=As*iu,pa=Yn;pa<ta-1;pa++){var ja=ln(Yi,co);ja===0&&(ja=Number.MIN_VALUE);var yi=Yi/ja,no=co/ja;if(pa!==Yn&&(Wr[pa-1]=ja),Yi=yi*vr[pa]+no*Wr[pa],Wr[pa]=yi*Wr[pa]-no*vr[pa],co=no*vr[pa+1],vr[pa+1]=yi*vr[pa+1],Ke)for(var ki=0;ki<C;ki++)ja=yi*on.get(ki,pa)+no*on.get(ki,pa+1),on.set(ki,pa+1,-no*on.get(ki,pa)+yi*on.get(ki,pa+1)),on.set(ki,pa,ja);if(ja=ln(Yi,co),ja===0&&(ja=Number.MIN_VALUE),yi=Yi/ja,no=co/ja,vr[pa]=ja,Yi=yi*Wr[pa]+no*vr[pa+1],vr[pa+1]=-no*Wr[pa]+yi*vr[pa+1],co=no*Wr[pa+1],Wr[pa+1]=yi*Wr[pa+1],ve&&pa<M-1)for(var Ki=0;Ki<M;Ki++)ja=yi*Er.get(Ki,pa)+no*Er.get(Ki,pa+1),Er.set(Ki,pa+1,-no*Er.get(Ki,pa)+yi*Er.get(Ki,pa+1)),Er.set(Ki,pa,ja)}Wr[ta-2]=Yi;break}case 4:{if(vr[Yn]<=0&&(vr[Yn]=vr[Yn]<0?-vr[Yn]:0,Ke))for(var Yo=0;Yo<=Io;Yo++)on.set(Yo,Yn,-on.get(Yo,Yn));for(;Yn<Io&&!(vr[Yn]>=vr[Yn+1]);){var wo=vr[Yn];if(vr[Yn]=vr[Yn+1],vr[Yn+1]=wo,Ke&&Yn<C-1)for(var ts=0;ts<C;ts++)wo=on.get(ts,Yn+1),on.set(ts,Yn+1,on.get(ts,Yn)),on.set(ts,Yn,wo);if(ve&&Yn<M-1)for(var lo=0;lo<M;lo++)wo=Er.get(lo,Yn+1),Er.set(lo,Yn+1,Er.get(lo,Yn)),Er.set(lo,Yn,wo);Yn++}ta--;break}}}if(br){var Rs=on;on=Er,Er=Rs}this.m=M,this.n=C,this.s=vr,this.U=Er,this.V=on}return N(ft,[{key:"solve",value:function(k){for(var M=k,C=this.threshold,j=this.s.length,xt=Wt.zeros(j,j),At=0;At<j;At++)Math.abs(this.s[At])<=C?xt.set(At,At,0):xt.set(At,At,1/this.s[At]);for(var wt=this.U,Pt=this.rightSingularVectors,Me=Pt.mmul(xt),ve=Pt.rows,Ke=wt.rows,br=Wt.zeros(ve,Ke),ir=0;ir<ve;ir++)for(var mr=0;mr<Ke;mr++){for(var Mn=0,Xe=0;Xe<j;Xe++)Mn+=Me.get(ir,Xe)*wt.get(mr,Xe);br.set(ir,mr,Mn)}return br.mmul(M)}},{key:"solveForDiagonal",value:function(k){return this.solve(Wt.diag(k))}},{key:"inverse",value:function(){for(var k=this.V,M=this.threshold,C=k.rows,j=k.columns,xt=new Wt(C,this.s.length),At=0;At<C;At++)for(var wt=0;wt<j;wt++)Math.abs(this.s[wt])>M&&xt.set(At,wt,k.get(At,wt)/this.s[wt]);for(var Pt=this.U,Me=Pt.rows,ve=Pt.columns,Ke=new Wt(C,Me),br=0;br<C;br++)for(var ir=0;ir<Me;ir++){for(var mr=0,Mn=0;Mn<ve;Mn++)mr+=xt.get(br,Mn)*Pt.get(ir,Mn);Ke.set(br,ir,mr)}return Ke}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var k=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,M=0,C=this.s,j=0,xt=C.length;j<xt;j++)C[j]>k&&M++;return M}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return Wt.diag(this.s)}}]),ft}();function fn(ft){var nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return ft=Sr.checkMatrix(ft),nt?new Ln(ft).inverse():Qe(ft,Wt.eye(ft.rows))}function Qe(ft,nt){var k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return ft=Sr.checkMatrix(ft),nt=Sr.checkMatrix(nt),k?new Ln(ft).solve(nt):ft.isSquare()?new Rr(ft).solve(nt):new Nn(ft).solve(nt)}function nr(ft){if(ft=Wt.checkMatrix(ft),ft.isSquare()){if(ft.columns===0)return 1;var nt,k,M,C;if(ft.columns===2)return nt=ft.get(0,0),k=ft.get(0,1),M=ft.get(1,0),C=ft.get(1,1),nt*C-k*M;if(ft.columns===3){var j,xt,At;return j=new Ct(ft,[1,2],[1,2]),xt=new Ct(ft,[1,2],[0,2]),At=new Ct(ft,[1,2],[0,1]),nt=ft.get(0,0),k=ft.get(0,1),M=ft.get(0,2),nt*nr(j)-k*nr(xt)+M*nr(At)}else return new Rr(ft).determinant}else throw Error("determinant can only be calculated for a square matrix")}function dr(ft,nt){for(var k=[],M=0;M<ft;M++)M!==nt&&k.push(M);return k}function Pr(ft,nt,k){var M=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1e-9,C=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1e-9;if(ft>C)return new Array(nt.rows+1).fill(0);for(var j=nt.addRow(k,[0]),xt=0;xt<j.rows;xt++)Math.abs(j.get(xt,0))<M&&j.set(xt,0,0);return j.to1DArray()}function en(ft){var nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},k=nt.thresholdValue,M=k===void 0?1e-9:k,C=nt.thresholdError,j=C===void 0?1e-9:C;ft=Wt.checkMatrix(ft);for(var xt=ft.rows,At=new Wt(xt,xt),wt=0;wt<xt;wt++){var Pt=Wt.columnVector(ft.getRow(wt)),Me=ft.subMatrixRow(dr(xt,wt)).transpose(),ve=new Ln(Me),Ke=ve.solve(Pt),br=Wt.sub(Pt,Me.mmul(Ke)).abs().max();At.setRow(wt,Pr(br,Ke,wt,M,j))}return At}function pn(ft){var nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.EPSILON;if(ft=Wt.checkMatrix(ft),ft.isEmpty())return ft.transpose();for(var k=new Ln(ft,{autoTranspose:!0}),M=k.leftSingularVectors,C=k.rightSingularVectors,j=k.diagonal,xt=0;xt<j.length;xt++)Math.abs(j[xt])>nt?j[xt]=1/j[xt]:j[xt]=0;return C.mmul(Wt.diag(j).mmul(M.transpose()))}function rn(ft){var nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ft,k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};ft=new Wt(ft);var M=!1;if(L(nt)==="object"&&!Wt.isMatrix(nt)&&!E.isAnyArray(nt)?(k=nt,nt=ft,M=!0):nt=new Wt(nt),ft.rows!==nt.rows)throw new TypeError("Both matrices must have the same number of rows");var C=k,j=C.center,xt=j===void 0?!0:j;xt&&(ft=ft.center("column"),M||(nt=nt.center("column")));for(var At=ft.transpose().mmul(nt),wt=0;wt<At.rows;wt++)for(var Pt=0;Pt<At.columns;Pt++)At.set(wt,Pt,At.get(wt,Pt)*(1/(ft.rows-1)));return At}function jn(ft){var nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ft,k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};ft=new Wt(ft);var M=!1;if(L(nt)==="object"&&!Wt.isMatrix(nt)&&!E.isAnyArray(nt)?(k=nt,nt=ft,M=!0):nt=new Wt(nt),ft.rows!==nt.rows)throw new TypeError("Both matrices must have the same number of rows");var C=k,j=C.center,xt=j===void 0?!0:j,At=C.scale,wt=At===void 0?!0:At;xt&&(ft.center("column"),M||nt.center("column")),wt&&(ft.scale("column"),M||nt.scale("column"));for(var Pt=ft.standardDeviation("column",{unbiased:!0}),Me=M?Pt:nt.standardDeviation("column",{unbiased:!0}),ve=ft.transpose().mmul(nt),Ke=0;Ke<ve.rows;Ke++)for(var br=0;br<ve.columns;br++)ve.set(Ke,br,ve.get(Ke,br)*(1/(Pt[Ke]*Me[br]))*(1/(ft.rows-1)));return ve}var Hn=function(){function ft(nt){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};P(this,ft);var M=k.assumeSymmetric,C=M===void 0?!1:M;if(nt=Sr.checkMatrix(nt),!nt.isSquare())throw new Error("Matrix is not a square matrix");if(nt.isEmpty())throw new Error("Matrix must be non-empty");var j=nt.columns,xt=new Wt(j,j),At=new Float64Array(j),wt=new Float64Array(j),Pt=nt,Me,ve,Ke=!1;if(C?Ke=!0:Ke=nt.isSymmetric(),Ke){for(Me=0;Me<j;Me++)for(ve=0;ve<j;ve++)xt.set(Me,ve,Pt.get(Me,ve));oa(j,wt,At,xt),dn(j,wt,At,xt)}else{var br=new Wt(j,j),ir=new Float64Array(j);for(ve=0;ve<j;ve++)for(Me=0;Me<j;Me++)br.set(Me,ve,Pt.get(Me,ve));Wn(j,br,ir,xt),Dn(j,wt,At,xt,br)}this.n=j,this.e=wt,this.d=At,this.V=xt}return N(ft,[{key:"realEigenvalues",get:function(){return Array.from(this.d)}},{key:"imaginaryEigenvalues",get:function(){return Array.from(this.e)}},{key:"eigenvectorMatrix",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){var k=this.n,M=this.e,C=this.d,j=new Wt(k,k),xt,At;for(xt=0;xt<k;xt++){for(At=0;At<k;At++)j.set(xt,At,0);j.set(xt,xt,C[xt]),M[xt]>0?j.set(xt,xt+1,M[xt]):M[xt]<0&&j.set(xt,xt-1,M[xt])}return j}}]),ft}();function oa(ft,nt,k,M){var C,j,xt,At,wt,Pt,Me,ve;for(wt=0;wt<ft;wt++)k[wt]=M.get(ft-1,wt);for(At=ft-1;At>0;At--){for(ve=0,xt=0,Pt=0;Pt<At;Pt++)ve=ve+Math.abs(k[Pt]);if(ve===0)for(nt[At]=k[At-1],wt=0;wt<At;wt++)k[wt]=M.get(At-1,wt),M.set(At,wt,0),M.set(wt,At,0);else{for(Pt=0;Pt<At;Pt++)k[Pt]/=ve,xt+=k[Pt]*k[Pt];for(C=k[At-1],j=Math.sqrt(xt),C>0&&(j=-j),nt[At]=ve*j,xt=xt-C*j,k[At-1]=C-j,wt=0;wt<At;wt++)nt[wt]=0;for(wt=0;wt<At;wt++){for(C=k[wt],M.set(wt,At,C),j=nt[wt]+M.get(wt,wt)*C,Pt=wt+1;Pt<=At-1;Pt++)j+=M.get(Pt,wt)*k[Pt],nt[Pt]+=M.get(Pt,wt)*C;nt[wt]=j}for(C=0,wt=0;wt<At;wt++)nt[wt]/=xt,C+=nt[wt]*k[wt];for(Me=C/(xt+xt),wt=0;wt<At;wt++)nt[wt]-=Me*k[wt];for(wt=0;wt<At;wt++){for(C=k[wt],j=nt[wt],Pt=wt;Pt<=At-1;Pt++)M.set(Pt,wt,M.get(Pt,wt)-(C*nt[Pt]+j*k[Pt]));k[wt]=M.get(At-1,wt),M.set(At,wt,0)}}k[At]=xt}for(At=0;At<ft-1;At++){if(M.set(ft-1,At,M.get(At,At)),M.set(At,At,1),xt=k[At+1],xt!==0){for(Pt=0;Pt<=At;Pt++)k[Pt]=M.get(Pt,At+1)/xt;for(wt=0;wt<=At;wt++){for(j=0,Pt=0;Pt<=At;Pt++)j+=M.get(Pt,At+1)*M.get(Pt,wt);for(Pt=0;Pt<=At;Pt++)M.set(Pt,wt,M.get(Pt,wt)-j*k[Pt])}}for(Pt=0;Pt<=At;Pt++)M.set(Pt,At+1,0)}for(wt=0;wt<ft;wt++)k[wt]=M.get(ft-1,wt),M.set(ft-1,wt,0);M.set(ft-1,ft-1,1),nt[0]=0}function dn(ft,nt,k,M){var C,j,xt,At,wt,Pt,Me,ve,Ke,br,ir,mr,Mn,Xe,vr,Er;for(xt=1;xt<ft;xt++)nt[xt-1]=nt[xt];nt[ft-1]=0;var on=0,Wr=0,xa=Number.EPSILON;for(Pt=0;Pt<ft;Pt++){for(Wr=Math.max(Wr,Math.abs(k[Pt])+Math.abs(nt[Pt])),Me=Pt;Me<ft&&!(Math.abs(nt[Me])<=xa*Wr);)Me++;if(Me>Pt)do{for(C=k[Pt],ve=(k[Pt+1]-C)/(2*nt[Pt]),Ke=ln(ve,1),ve<0&&(Ke=-Ke),k[Pt]=nt[Pt]/(ve+Ke),k[Pt+1]=nt[Pt]*(ve+Ke),br=k[Pt+1],j=C-k[Pt],xt=Pt+2;xt<ft;xt++)k[xt]-=j;for(on=on+j,ve=k[Me],ir=1,mr=ir,Mn=ir,Xe=nt[Pt+1],vr=0,Er=0,xt=Me-1;xt>=Pt;xt--)for(Mn=mr,mr=ir,Er=vr,C=ir*nt[xt],j=ir*ve,Ke=ln(ve,nt[xt]),nt[xt+1]=vr*Ke,vr=nt[xt]/Ke,ir=ve/Ke,ve=ir*k[xt]-vr*C,k[xt+1]=j+vr*(ir*C+vr*k[xt]),wt=0;wt<ft;wt++)j=M.get(wt,xt+1),M.set(wt,xt+1,vr*M.get(wt,xt)+ir*j),M.set(wt,xt,ir*M.get(wt,xt)-vr*j);ve=-vr*Er*Mn*Xe*nt[Pt]/br,nt[Pt]=vr*ve,k[Pt]=ir*ve}while(Math.abs(nt[Pt])>xa*Wr);k[Pt]=k[Pt]+on,nt[Pt]=0}for(xt=0;xt<ft-1;xt++){for(wt=xt,ve=k[xt],At=xt+1;At<ft;At++)k[At]<ve&&(wt=At,ve=k[At]);if(wt!==xt)for(k[wt]=k[xt],k[xt]=ve,At=0;At<ft;At++)ve=M.get(At,xt),M.set(At,xt,M.get(At,wt)),M.set(At,wt,ve)}}function Wn(ft,nt,k,M){var C=0,j=ft-1,xt,At,wt,Pt,Me,ve,Ke;for(ve=C+1;ve<=j-1;ve++){for(Ke=0,Pt=ve;Pt<=j;Pt++)Ke=Ke+Math.abs(nt.get(Pt,ve-1));if(Ke!==0){for(wt=0,Pt=j;Pt>=ve;Pt--)k[Pt]=nt.get(Pt,ve-1)/Ke,wt+=k[Pt]*k[Pt];for(At=Math.sqrt(wt),k[ve]>0&&(At=-At),wt=wt-k[ve]*At,k[ve]=k[ve]-At,Me=ve;Me<ft;Me++){for(xt=0,Pt=j;Pt>=ve;Pt--)xt+=k[Pt]*nt.get(Pt,Me);for(xt=xt/wt,Pt=ve;Pt<=j;Pt++)nt.set(Pt,Me,nt.get(Pt,Me)-xt*k[Pt])}for(Pt=0;Pt<=j;Pt++){for(xt=0,Me=j;Me>=ve;Me--)xt+=k[Me]*nt.get(Pt,Me);for(xt=xt/wt,Me=ve;Me<=j;Me++)nt.set(Pt,Me,nt.get(Pt,Me)-xt*k[Me])}k[ve]=Ke*k[ve],nt.set(ve,ve-1,Ke*At)}}for(Pt=0;Pt<ft;Pt++)for(Me=0;Me<ft;Me++)M.set(Pt,Me,Pt===Me?1:0);for(ve=j-1;ve>=C+1;ve--)if(nt.get(ve,ve-1)!==0){for(Pt=ve+1;Pt<=j;Pt++)k[Pt]=nt.get(Pt,ve-1);for(Me=ve;Me<=j;Me++){for(At=0,Pt=ve;Pt<=j;Pt++)At+=k[Pt]*M.get(Pt,Me);for(At=At/k[ve]/nt.get(ve,ve-1),Pt=ve;Pt<=j;Pt++)M.set(Pt,Me,M.get(Pt,Me)+At*k[Pt])}}}function Dn(ft,nt,k,M,C){var j=ft-1,xt=0,At=ft-1,wt=Number.EPSILON,Pt=0,Me=0,ve=0,Ke=0,br=0,ir=0,mr=0,Mn=0,Xe,vr,Er,on,Wr,xa,Ta,Rn,Jn,Ga,Aa,an,Vn,me,Dt;for(Xe=0;Xe<ft;Xe++)for((Xe<xt||Xe>At)&&(k[Xe]=C.get(Xe,Xe),nt[Xe]=0),vr=Math.max(Xe-1,0);vr<ft;vr++)Me=Me+Math.abs(C.get(Xe,vr));for(;j>=xt;){for(on=j;on>xt&&(ir=Math.abs(C.get(on-1,on-1))+Math.abs(C.get(on,on)),ir===0&&(ir=Me),!(Math.abs(C.get(on,on-1))<wt*ir));)on--;if(on===j)C.set(j,j,C.get(j,j)+Pt),k[j]=C.get(j,j),nt[j]=0,j--,Mn=0;else if(on===j-1){if(Ta=C.get(j,j-1)*C.get(j-1,j),ve=(C.get(j-1,j-1)-C.get(j,j))/2,Ke=ve*ve+Ta,mr=Math.sqrt(Math.abs(Ke)),C.set(j,j,C.get(j,j)+Pt),C.set(j-1,j-1,C.get(j-1,j-1)+Pt),Rn=C.get(j,j),Ke>=0){for(mr=ve>=0?ve+mr:ve-mr,k[j-1]=Rn+mr,k[j]=k[j-1],mr!==0&&(k[j]=Rn-Ta/mr),nt[j-1]=0,nt[j]=0,Rn=C.get(j,j-1),ir=Math.abs(Rn)+Math.abs(mr),ve=Rn/ir,Ke=mr/ir,br=Math.sqrt(ve*ve+Ke*Ke),ve=ve/br,Ke=Ke/br,vr=j-1;vr<ft;vr++)mr=C.get(j-1,vr),C.set(j-1,vr,Ke*mr+ve*C.get(j,vr)),C.set(j,vr,Ke*C.get(j,vr)-ve*mr);for(Xe=0;Xe<=j;Xe++)mr=C.get(Xe,j-1),C.set(Xe,j-1,Ke*mr+ve*C.get(Xe,j)),C.set(Xe,j,Ke*C.get(Xe,j)-ve*mr);for(Xe=xt;Xe<=At;Xe++)mr=M.get(Xe,j-1),M.set(Xe,j-1,Ke*mr+ve*M.get(Xe,j)),M.set(Xe,j,Ke*M.get(Xe,j)-ve*mr)}else k[j-1]=Rn+ve,k[j]=Rn+ve,nt[j-1]=mr,nt[j]=-mr;j=j-2,Mn=0}else{if(Rn=C.get(j,j),Jn=0,Ta=0,on<j&&(Jn=C.get(j-1,j-1),Ta=C.get(j,j-1)*C.get(j-1,j)),Mn===10){for(Pt+=Rn,Xe=xt;Xe<=j;Xe++)C.set(Xe,Xe,C.get(Xe,Xe)-Rn);ir=Math.abs(C.get(j,j-1))+Math.abs(C.get(j-1,j-2)),Rn=Jn=.75*ir,Ta=-.4375*ir*ir}if(Mn===30&&(ir=(Jn-Rn)/2,ir=ir*ir+Ta,ir>0)){for(ir=Math.sqrt(ir),Jn<Rn&&(ir=-ir),ir=Rn-Ta/((Jn-Rn)/2+ir),Xe=xt;Xe<=j;Xe++)C.set(Xe,Xe,C.get(Xe,Xe)-ir);Pt+=ir,Rn=Jn=Ta=.964}for(Mn=Mn+1,Wr=j-2;Wr>=on&&(mr=C.get(Wr,Wr),br=Rn-mr,ir=Jn-mr,ve=(br*ir-Ta)/C.get(Wr+1,Wr)+C.get(Wr,Wr+1),Ke=C.get(Wr+1,Wr+1)-mr-br-ir,br=C.get(Wr+2,Wr+1),ir=Math.abs(ve)+Math.abs(Ke)+Math.abs(br),ve=ve/ir,Ke=Ke/ir,br=br/ir,!(Wr===on||Math.abs(C.get(Wr,Wr-1))*(Math.abs(Ke)+Math.abs(br))<wt*(Math.abs(ve)*(Math.abs(C.get(Wr-1,Wr-1))+Math.abs(mr)+Math.abs(C.get(Wr+1,Wr+1))))));)Wr--;for(Xe=Wr+2;Xe<=j;Xe++)C.set(Xe,Xe-2,0),Xe>Wr+2&&C.set(Xe,Xe-3,0);for(Er=Wr;Er<=j-1&&(me=Er!==j-1,Er!==Wr&&(ve=C.get(Er,Er-1),Ke=C.get(Er+1,Er-1),br=me?C.get(Er+2,Er-1):0,Rn=Math.abs(ve)+Math.abs(Ke)+Math.abs(br),Rn!==0&&(ve=ve/Rn,Ke=Ke/Rn,br=br/Rn)),Rn!==0);Er++)if(ir=Math.sqrt(ve*ve+Ke*Ke+br*br),ve<0&&(ir=-ir),ir!==0){for(Er!==Wr?C.set(Er,Er-1,-ir*Rn):on!==Wr&&C.set(Er,Er-1,-C.get(Er,Er-1)),ve=ve+ir,Rn=ve/ir,Jn=Ke/ir,mr=br/ir,Ke=Ke/ve,br=br/ve,vr=Er;vr<ft;vr++)ve=C.get(Er,vr)+Ke*C.get(Er+1,vr),me&&(ve=ve+br*C.get(Er+2,vr),C.set(Er+2,vr,C.get(Er+2,vr)-ve*mr)),C.set(Er,vr,C.get(Er,vr)-ve*Rn),C.set(Er+1,vr,C.get(Er+1,vr)-ve*Jn);for(Xe=0;Xe<=Math.min(j,Er+3);Xe++)ve=Rn*C.get(Xe,Er)+Jn*C.get(Xe,Er+1),me&&(ve=ve+mr*C.get(Xe,Er+2),C.set(Xe,Er+2,C.get(Xe,Er+2)-ve*br)),C.set(Xe,Er,C.get(Xe,Er)-ve),C.set(Xe,Er+1,C.get(Xe,Er+1)-ve*Ke);for(Xe=xt;Xe<=At;Xe++)ve=Rn*M.get(Xe,Er)+Jn*M.get(Xe,Er+1),me&&(ve=ve+mr*M.get(Xe,Er+2),M.set(Xe,Er+2,M.get(Xe,Er+2)-ve*br)),M.set(Xe,Er,M.get(Xe,Er)-ve),M.set(Xe,Er+1,M.get(Xe,Er+1)-ve*Ke)}}}if(Me!==0){for(j=ft-1;j>=0;j--)if(ve=k[j],Ke=nt[j],Ke===0)for(on=j,C.set(j,j,1),Xe=j-1;Xe>=0;Xe--){for(Ta=C.get(Xe,Xe)-ve,br=0,vr=on;vr<=j;vr++)br=br+C.get(Xe,vr)*C.get(vr,j);if(nt[Xe]<0)mr=Ta,ir=br;else if(on=Xe,nt[Xe]===0?C.set(Xe,j,Ta!==0?-br/Ta:-br/(wt*Me)):(Rn=C.get(Xe,Xe+1),Jn=C.get(Xe+1,Xe),Ke=(k[Xe]-ve)*(k[Xe]-ve)+nt[Xe]*nt[Xe],xa=(Rn*ir-mr*br)/Ke,C.set(Xe,j,xa),C.set(Xe+1,j,Math.abs(Rn)>Math.abs(mr)?(-br-Ta*xa)/Rn:(-ir-Jn*xa)/mr)),xa=Math.abs(C.get(Xe,j)),wt*xa*xa>1)for(vr=Xe;vr<=j;vr++)C.set(vr,j,C.get(vr,j)/xa)}else if(Ke<0)for(on=j-1,Math.abs(C.get(j,j-1))>Math.abs(C.get(j-1,j))?(C.set(j-1,j-1,Ke/C.get(j,j-1)),C.set(j-1,j,-(C.get(j,j)-ve)/C.get(j,j-1))):(Dt=Cn(0,-C.get(j-1,j),C.get(j-1,j-1)-ve,Ke),C.set(j-1,j-1,Dt[0]),C.set(j-1,j,Dt[1])),C.set(j,j-1,0),C.set(j,j,1),Xe=j-2;Xe>=0;Xe--){for(Ga=0,Aa=0,vr=on;vr<=j;vr++)Ga=Ga+C.get(Xe,vr)*C.get(vr,j-1),Aa=Aa+C.get(Xe,vr)*C.get(vr,j);if(Ta=C.get(Xe,Xe)-ve,nt[Xe]<0)mr=Ta,br=Ga,ir=Aa;else if(on=Xe,nt[Xe]===0?(Dt=Cn(-Ga,-Aa,Ta,Ke),C.set(Xe,j-1,Dt[0]),C.set(Xe,j,Dt[1])):(Rn=C.get(Xe,Xe+1),Jn=C.get(Xe+1,Xe),an=(k[Xe]-ve)*(k[Xe]-ve)+nt[Xe]*nt[Xe]-Ke*Ke,Vn=(k[Xe]-ve)*2*Ke,an===0&&Vn===0&&(an=wt*Me*(Math.abs(Ta)+Math.abs(Ke)+Math.abs(Rn)+Math.abs(Jn)+Math.abs(mr))),Dt=Cn(Rn*br-mr*Ga+Ke*Aa,Rn*ir-mr*Aa-Ke*Ga,an,Vn),C.set(Xe,j-1,Dt[0]),C.set(Xe,j,Dt[1]),Math.abs(Rn)>Math.abs(mr)+Math.abs(Ke)?(C.set(Xe+1,j-1,(-Ga-Ta*C.get(Xe,j-1)+Ke*C.get(Xe,j))/Rn),C.set(Xe+1,j,(-Aa-Ta*C.get(Xe,j)-Ke*C.get(Xe,j-1))/Rn)):(Dt=Cn(-br-Jn*C.get(Xe,j-1),-ir-Jn*C.get(Xe,j),mr,Ke),C.set(Xe+1,j-1,Dt[0]),C.set(Xe+1,j,Dt[1]))),xa=Math.max(Math.abs(C.get(Xe,j-1)),Math.abs(C.get(Xe,j))),wt*xa*xa>1)for(vr=Xe;vr<=j;vr++)C.set(vr,j-1,C.get(vr,j-1)/xa),C.set(vr,j,C.get(vr,j)/xa)}for(Xe=0;Xe<ft;Xe++)if(Xe<xt||Xe>At)for(vr=Xe;vr<ft;vr++)M.set(Xe,vr,C.get(Xe,vr));for(vr=ft-1;vr>=xt;vr--)for(Xe=xt;Xe<=At;Xe++){for(mr=0,Er=xt;Er<=Math.min(vr,At);Er++)mr=mr+M.get(Xe,Er)*C.get(Er,vr);M.set(Xe,vr,mr)}}}function Cn(ft,nt,k,M){var C,j;return Math.abs(k)>Math.abs(M)?(C=M/k,j=k+C*M,[(ft+C*nt)/j,(nt-C*ft)/j]):(C=k/M,j=M+C*k,[(C*ft+nt)/j,(C*nt-ft)/j])}var la=function(){function ft(nt){if(P(this,ft),nt=Sr.checkMatrix(nt),!nt.isSymmetric())throw new Error("Matrix is not symmetric");var k=nt,M=k.rows,C=new Wt(M,M),j=!0,xt,At,wt;for(At=0;At<M;At++){var Pt=0;for(wt=0;wt<At;wt++){var Me=0;for(xt=0;xt<wt;xt++)Me+=C.get(wt,xt)*C.get(At,xt);Me=(k.get(At,wt)-Me)/C.get(wt,wt),C.set(At,wt,Me),Pt=Pt+Me*Me}for(Pt=k.get(At,At)-Pt,j&=Pt>0,C.set(At,At,Math.sqrt(Math.max(Pt,0))),wt=At+1;wt<M;wt++)C.set(At,wt,0)}this.L=C,this.positiveDefinite=!!j}return N(ft,[{key:"isPositiveDefinite",value:function(){return this.positiveDefinite}},{key:"solve",value:function(k){k=Sr.checkMatrix(k);var M=this.L,C=M.rows;if(k.rows!==C)throw new Error("Matrix dimensions do not match");if(this.isPositiveDefinite()===!1)throw new Error("Matrix is not positive definite");var j=k.columns,xt=k.clone(),At,wt,Pt;for(Pt=0;Pt<C;Pt++)for(wt=0;wt<j;wt++){for(At=0;At<Pt;At++)xt.set(Pt,wt,xt.get(Pt,wt)-xt.get(At,wt)*M.get(Pt,At));xt.set(Pt,wt,xt.get(Pt,wt)/M.get(Pt,Pt))}for(Pt=C-1;Pt>=0;Pt--)for(wt=0;wt<j;wt++){for(At=Pt+1;At<C;At++)xt.set(Pt,wt,xt.get(Pt,wt)-xt.get(At,wt)*M.get(At,Pt));xt.set(Pt,wt,xt.get(Pt,wt)/M.get(Pt,Pt))}return xt}},{key:"lowerTriangularMatrix",get:function(){return this.L}}]),ft}(),K=N(function ft(nt){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};P(this,ft),nt=Sr.checkMatrix(nt);var M=k.Y,C=k.scaleScores,j=C===void 0?!1:C,xt=k.maxIterations,At=xt===void 0?1e3:xt,wt=k.terminationCriteria,Pt=wt===void 0?1e-10:wt,Me;if(M){if(E.isAnyArray(M)&&typeof M[0]=="number"?M=Wt.columnVector(M):M=Sr.checkMatrix(M),M.rows!==nt.rows)throw new Error("Y should have the same number of rows as X");Me=M.getColumnVector(0)}else Me=nt.getColumnVector(0);for(var ve=1,Ke,br,ir,mr,Mn=0;Mn<At&&ve>Pt;Mn++)ir=nt.transpose().mmul(Me).div(Me.transpose().mmul(Me).get(0,0)),ir=ir.div(ir.norm()),Ke=nt.mmul(ir).div(ir.transpose().mmul(ir).get(0,0)),Mn>0&&(ve=Ke.clone().sub(mr).pow(2).sum()),mr=Ke.clone(),M?(br=M.transpose().mmul(Ke).div(Ke.transpose().mmul(Ke).get(0,0)),br=br.div(br.norm()),Me=M.mmul(br).div(br.transpose().mmul(br).get(0,0))):Me=Ke;if(M){var Xe=nt.transpose().mmul(Ke).div(Ke.transpose().mmul(Ke).get(0,0));Xe=Xe.div(Xe.norm());var vr=nt.clone().sub(Ke.clone().mmul(Xe.transpose())),Er=Me.transpose().mmul(Ke).div(Ke.transpose().mmul(Ke).get(0,0)),on=M.clone().sub(Ke.clone().mulS(Er.get(0,0)).mmul(br.transpose()));this.t=Ke,this.p=Xe.transpose(),this.w=ir.transpose(),this.q=br,this.u=Me,this.s=Ke.transpose().mmul(Ke),this.xResidual=vr,this.yResidual=on,this.betas=Er}else this.w=ir.transpose(),this.s=Ke.transpose().mmul(Ke).sqrt(),j?this.t=Ke.clone().div(this.s.get(0,0)):this.t=Ke,this.xResidual=nt.sub(Ke.mmul(ir.transpose()))});F.AbstractMatrix=xe,F.CHO=la,F.CholeskyDecomposition=la,F.EVD=Hn,F.EigenvalueDecomposition=Hn,F.LU=Rr,F.LuDecomposition=Rr,F.Matrix=Wt,F.MatrixColumnSelectionView=ie,F.MatrixColumnView=Yt,F.MatrixFlipColumnView=Oe,F.MatrixFlipRowView=re,F.MatrixRowSelectionView=Ge,F.MatrixRowView=_e,F.MatrixSelectionView=Ct,F.MatrixSubView=Nr,F.MatrixTransposeView=Or,F.NIPALS=K,F.Nipals=K,F.QR=Nn,F.QrDecomposition=Nn,F.SVD=Ln,F.SingularValueDecomposition=Ln,F.WrapperMatrix1D=Ur,F.WrapperMatrix2D=Sr,F.correlation=jn,F.covariance=rn,F.default=Wt,F.determinant=nr,F.inverse=fn,F.linearDependencies=en,F.pseudoInverse=pn,F.solve=Qe,F.wrap=gn},348168:function(He,F,z){var G=z(708874),X={};for(var R in G)G.hasOwnProperty(R)&&(X[G[R]]=R);var L=He.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var P in L)if(L.hasOwnProperty(P)){if(!("channels"in L[P]))throw new Error("missing channels property: "+P);if(!("labels"in L[P]))throw new Error("missing channel labels property: "+P);if(L[P].labels.length!==L[P].channels)throw new Error("channel and label counts mismatch: "+P);var N=L[P].channels,E=L[P].labels;delete L[P].channels,delete L[P].labels,Object.defineProperty(L[P],"channels",{value:N}),Object.defineProperty(L[P],"labels",{value:E})}L.rgb.hsl=function(p){var y=p[0]/255,g=p[1]/255,A=p[2]/255,_=Math.min(y,g,A),S=Math.max(y,g,A),O=S-_,B,m,d;return S===_?B=0:y===S?B=(g-A)/O:g===S?B=2+(A-y)/O:A===S&&(B=4+(y-g)/O),B=Math.min(B*60,360),B<0&&(B+=360),d=(_+S)/2,S===_?m=0:d<=.5?m=O/(S+_):m=O/(2-S-_),[B,m*100,d*100]},L.rgb.hsv=function(p){var y,g,A,_,S,O=p[0]/255,B=p[1]/255,m=p[2]/255,d=Math.max(O,B,m),tt=d-Math.min(O,B,m),Y=function(V){return(d-V)/6/tt+1/2};return tt===0?_=S=0:(S=tt/d,y=Y(O),g=Y(B),A=Y(m),O===d?_=A-g:B===d?_=1/3+y-A:m===d&&(_=2/3+g-y),_<0?_+=1:_>1&&(_-=1)),[_*360,S*100,d*100]},L.rgb.hwb=function(p){var y=p[0],g=p[1],A=p[2],_=L.rgb.hsl(p)[0],S=1/255*Math.min(y,Math.min(g,A));return A=1-1/255*Math.max(y,Math.max(g,A)),[_,S*100,A*100]},L.rgb.cmyk=function(p){var y=p[0]/255,g=p[1]/255,A=p[2]/255,_,S,O,B;return B=Math.min(1-y,1-g,1-A),_=(1-y-B)/(1-B)||0,S=(1-g-B)/(1-B)||0,O=(1-A-B)/(1-B)||0,[_*100,S*100,O*100,B*100]};function x(p,y){return Math.pow(p[0]-y[0],2)+Math.pow(p[1]-y[1],2)+Math.pow(p[2]-y[2],2)}L.rgb.keyword=function(p){var y=X[p];if(y)return y;var g=1/0,A;for(var _ in G)if(G.hasOwnProperty(_)){var S=G[_],O=x(p,S);O<g&&(g=O,A=_)}return A},L.keyword.rgb=function(p){return G[p]},L.rgb.xyz=function(p){var y=p[0]/255,g=p[1]/255,A=p[2]/255;y=y>.04045?Math.pow((y+.055)/1.055,2.4):y/12.92,g=g>.04045?Math.pow((g+.055)/1.055,2.4):g/12.92,A=A>.04045?Math.pow((A+.055)/1.055,2.4):A/12.92;var _=y*.4124+g*.3576+A*.1805,S=y*.2126+g*.7152+A*.0722,O=y*.0193+g*.1192+A*.9505;return[_*100,S*100,O*100]},L.rgb.lab=function(p){var y=L.rgb.xyz(p),g=y[0],A=y[1],_=y[2],S,O,B;return g/=95.047,A/=100,_/=108.883,g=g>.008856?Math.pow(g,1/3):7.787*g+16/116,A=A>.008856?Math.pow(A,1/3):7.787*A+16/116,_=_>.008856?Math.pow(_,1/3):7.787*_+16/116,S=116*A-16,O=500*(g-A),B=200*(A-_),[S,O,B]},L.hsl.rgb=function(p){var y=p[0]/360,g=p[1]/100,A=p[2]/100,_,S,O,B,m;if(g===0)return m=A*255,[m,m,m];A<.5?S=A*(1+g):S=A+g-A*g,_=2*A-S,B=[0,0,0];for(var d=0;d<3;d++)O=y+1/3*-(d-1),O<0&&O++,O>1&&O--,6*O<1?m=_+(S-_)*6*O:2*O<1?m=S:3*O<2?m=_+(S-_)*(2/3-O)*6:m=_,B[d]=m*255;return B},L.hsl.hsv=function(p){var y=p[0],g=p[1]/100,A=p[2]/100,_=g,S=Math.max(A,.01),O,B;return A*=2,g*=A<=1?A:2-A,_*=S<=1?S:2-S,B=(A+g)/2,O=A===0?2*_/(S+_):2*g/(A+g),[y,O*100,B*100]},L.hsv.rgb=function(p){var y=p[0]/60,g=p[1]/100,A=p[2]/100,_=Math.floor(y)%6,S=y-Math.floor(y),O=255*A*(1-g),B=255*A*(1-g*S),m=255*A*(1-g*(1-S));switch(A*=255,_){case 0:return[A,m,O];case 1:return[B,A,O];case 2:return[O,A,m];case 3:return[O,B,A];case 4:return[m,O,A];case 5:return[A,O,B]}},L.hsv.hsl=function(p){var y=p[0],g=p[1]/100,A=p[2]/100,_=Math.max(A,.01),S,O,B;return B=(2-g)*A,S=(2-g)*_,O=g*_,O/=S<=1?S:2-S,O=O||0,B/=2,[y,O*100,B*100]},L.hwb.rgb=function(p){var y=p[0]/360,g=p[1]/100,A=p[2]/100,_=g+A,S,O,B,m;_>1&&(g/=_,A/=_),S=Math.floor(6*y),O=1-A,B=6*y-S,S&1&&(B=1-B),m=g+B*(O-g);var d,tt,Y;switch(S){default:case 6:case 0:d=O,tt=m,Y=g;break;case 1:d=m,tt=O,Y=g;break;case 2:d=g,tt=O,Y=m;break;case 3:d=g,tt=m,Y=O;break;case 4:d=m,tt=g,Y=O;break;case 5:d=O,tt=g,Y=m;break}return[d*255,tt*255,Y*255]},L.cmyk.rgb=function(p){var y=p[0]/100,g=p[1]/100,A=p[2]/100,_=p[3]/100,S,O,B;return S=1-Math.min(1,y*(1-_)+_),O=1-Math.min(1,g*(1-_)+_),B=1-Math.min(1,A*(1-_)+_),[S*255,O*255,B*255]},L.xyz.rgb=function(p){var y=p[0]/100,g=p[1]/100,A=p[2]/100,_,S,O;return _=y*3.2406+g*-1.5372+A*-.4986,S=y*-.9689+g*1.8758+A*.0415,O=y*.0557+g*-.204+A*1.057,_=_>.0031308?1.055*Math.pow(_,1/2.4)-.055:_*12.92,S=S>.0031308?1.055*Math.pow(S,1/2.4)-.055:S*12.92,O=O>.0031308?1.055*Math.pow(O,1/2.4)-.055:O*12.92,_=Math.min(Math.max(0,_),1),S=Math.min(Math.max(0,S),1),O=Math.min(Math.max(0,O),1),[_*255,S*255,O*255]},L.xyz.lab=function(p){var y=p[0],g=p[1],A=p[2],_,S,O;return y/=95.047,g/=100,A/=108.883,y=y>.008856?Math.pow(y,1/3):7.787*y+16/116,g=g>.008856?Math.pow(g,1/3):7.787*g+16/116,A=A>.008856?Math.pow(A,1/3):7.787*A+16/116,_=116*g-16,S=500*(y-g),O=200*(g-A),[_,S,O]},L.lab.xyz=function(p){var y=p[0],g=p[1],A=p[2],_,S,O;S=(y+16)/116,_=g/500+S,O=S-A/200;var B=Math.pow(S,3),m=Math.pow(_,3),d=Math.pow(O,3);return S=B>.008856?B:(S-16/116)/7.787,_=m>.008856?m:(_-16/116)/7.787,O=d>.008856?d:(O-16/116)/7.787,_*=95.047,S*=100,O*=108.883,[_,S,O]},L.lab.lch=function(p){var y=p[0],g=p[1],A=p[2],_,S,O;return _=Math.atan2(A,g),S=_*360/2/Math.PI,S<0&&(S+=360),O=Math.sqrt(g*g+A*A),[y,O,S]},L.lch.lab=function(p){var y=p[0],g=p[1],A=p[2],_,S,O;return O=A/360*2*Math.PI,_=g*Math.cos(O),S=g*Math.sin(O),[y,_,S]},L.rgb.ansi16=function(p){var y=p[0],g=p[1],A=p[2],_=1 in arguments?arguments[1]:L.rgb.hsv(p)[2];if(_=Math.round(_/50),_===0)return 30;var S=30+(Math.round(A/255)<<2|Math.round(g/255)<<1|Math.round(y/255));return _===2&&(S+=60),S},L.hsv.ansi16=function(p){return L.rgb.ansi16(L.hsv.rgb(p),p[2])},L.rgb.ansi256=function(p){var y=p[0],g=p[1],A=p[2];if(y===g&&g===A)return y<8?16:y>248?231:Math.round((y-8)/247*24)+232;var _=16+36*Math.round(y/255*5)+6*Math.round(g/255*5)+Math.round(A/255*5);return _},L.ansi16.rgb=function(p){var y=p%10;if(y===0||y===7)return p>50&&(y+=3.5),y=y/10.5*255,[y,y,y];var g=(~~(p>50)+1)*.5,A=(y&1)*g*255,_=(y>>1&1)*g*255,S=(y>>2&1)*g*255;return[A,_,S]},L.ansi256.rgb=function(p){if(p>=232){var y=(p-232)*10+8;return[y,y,y]}p-=16;var g,A=Math.floor(p/36)/5*255,_=Math.floor((g=p%36)/6)/5*255,S=g%6/5*255;return[A,_,S]},L.rgb.hex=function(p){var y=((Math.round(p[0])&255)<<16)+((Math.round(p[1])&255)<<8)+(Math.round(p[2])&255),g=y.toString(16).toUpperCase();return"000000".substring(g.length)+g},L.hex.rgb=function(p){var y=p.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!y)return[0,0,0];var g=y[0];y[0].length===3&&(g=g.split("").map(function(B){return B+B}).join(""));var A=parseInt(g,16),_=A>>16&255,S=A>>8&255,O=A&255;return[_,S,O]},L.rgb.hcg=function(p){var y=p[0]/255,g=p[1]/255,A=p[2]/255,_=Math.max(Math.max(y,g),A),S=Math.min(Math.min(y,g),A),O=_-S,B,m;return O<1?B=S/(1-O):B=0,O<=0?m=0:_===y?m=(g-A)/O%6:_===g?m=2+(A-y)/O:m=4+(y-g)/O+4,m/=6,m%=1,[m*360,O*100,B*100]},L.hsl.hcg=function(p){var y=p[1]/100,g=p[2]/100,A=1,_=0;return g<.5?A=2*y*g:A=2*y*(1-g),A<1&&(_=(g-.5*A)/(1-A)),[p[0],A*100,_*100]},L.hsv.hcg=function(p){var y=p[1]/100,g=p[2]/100,A=y*g,_=0;return A<1&&(_=(g-A)/(1-A)),[p[0],A*100,_*100]},L.hcg.rgb=function(p){var y=p[0]/360,g=p[1]/100,A=p[2]/100;if(g===0)return[A*255,A*255,A*255];var _=[0,0,0],S=y%1*6,O=S%1,B=1-O,m=0;switch(Math.floor(S)){case 0:_[0]=1,_[1]=O,_[2]=0;break;case 1:_[0]=B,_[1]=1,_[2]=0;break;case 2:_[0]=0,_[1]=1,_[2]=O;break;case 3:_[0]=0,_[1]=B,_[2]=1;break;case 4:_[0]=O,_[1]=0,_[2]=1;break;default:_[0]=1,_[1]=0,_[2]=B}return m=(1-g)*A,[(g*_[0]+m)*255,(g*_[1]+m)*255,(g*_[2]+m)*255]},L.hcg.hsv=function(p){var y=p[1]/100,g=p[2]/100,A=y+g*(1-y),_=0;return A>0&&(_=y/A),[p[0],_*100,A*100]},L.hcg.hsl=function(p){var y=p[1]/100,g=p[2]/100,A=g*(1-y)+.5*y,_=0;return A>0&&A<.5?_=y/(2*A):A>=.5&&A<1&&(_=y/(2*(1-A))),[p[0],_*100,A*100]},L.hcg.hwb=function(p){var y=p[1]/100,g=p[2]/100,A=y+g*(1-y);return[p[0],(A-y)*100,(1-A)*100]},L.hwb.hcg=function(p){var y=p[1]/100,g=p[2]/100,A=1-g,_=A-y,S=0;return _<1&&(S=(A-_)/(1-_)),[p[0],_*100,S*100]},L.apple.rgb=function(p){return[p[0]/65535*255,p[1]/65535*255,p[2]/65535*255]},L.rgb.apple=function(p){return[p[0]/255*65535,p[1]/255*65535,p[2]/255*65535]},L.gray.rgb=function(p){return[p[0]/100*255,p[0]/100*255,p[0]/100*255]},L.gray.hsl=L.gray.hsv=function(p){return[0,0,p[0]]},L.gray.hwb=function(p){return[0,100,p[0]]},L.gray.cmyk=function(p){return[0,0,0,p[0]]},L.gray.lab=function(p){return[p[0],0,0]},L.gray.hex=function(p){var y=Math.round(p[0]/100*255)&255,g=(y<<16)+(y<<8)+y,A=g.toString(16).toUpperCase();return"000000".substring(A.length)+A},L.rgb.gray=function(p){var y=(p[0]+p[1]+p[2])/3;return[y/255*100]}},112085:function(He,F,z){var G=z(348168),X=z(804111),R={},L=Object.keys(G);function P(E){var x=function(p){return p==null?p:(arguments.length>1&&(p=Array.prototype.slice.call(arguments)),E(p))};return"conversion"in E&&(x.conversion=E.conversion),x}function N(E){var x=function(p){if(p==null)return p;arguments.length>1&&(p=Array.prototype.slice.call(arguments));var y=E(p);if(typeof y=="object")for(var g=y.length,A=0;A<g;A++)y[A]=Math.round(y[A]);return y};return"conversion"in E&&(x.conversion=E.conversion),x}L.forEach(function(E){R[E]={},Object.defineProperty(R[E],"channels",{value:G[E].channels}),Object.defineProperty(R[E],"labels",{value:G[E].labels});var x=X(E),p=Object.keys(x);p.forEach(function(y){var g=x[y];R[E][y]=N(g),R[E][y].raw=P(g)})}),He.exports=R},804111:function(He,F,z){var G=z(348168);function X(){for(var N={},E=Object.keys(G),x=E.length,p=0;p<x;p++)N[E[p]]={distance:-1,parent:null};return N}function R(N){var E=X(),x=[N];for(E[N].distance=0;x.length;)for(var p=x.pop(),y=Object.keys(G[p]),g=y.length,A=0;A<g;A++){var _=y[A],S=E[_];S.distance===-1&&(S.distance=E[p].distance+1,S.parent=p,x.unshift(_))}return E}function L(N,E){return function(x){return E(N(x))}}function P(N,E){for(var x=[E[N].parent,N],p=G[E[N].parent][N],y=E[N].parent;E[y].parent;)x.unshift(E[y].parent),p=L(G[E[y].parent][y],p),y=E[y].parent;return p.conversion=x,p}He.exports=function(N){for(var E=R(N),x={},p=Object.keys(E),y=p.length,g=0;g<y;g++){var A=p[g],_=E[A];_.parent!==null&&(x[A]=P(A,E))}return x}},708874:function(He){"use strict";He.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},843425:function(He,F,z){var G=z(708874),X=z(286851),R=Object.hasOwnProperty,L=Object.create(null);for(var P in G)R.call(G,P)&&(L[G[P]]=P);var N=He.exports={to:{},get:{}};N.get=function(p){var y=p.substring(0,3).toLowerCase(),g,A;switch(y){case"hsl":g=N.get.hsl(p),A="hsl";break;case"hwb":g=N.get.hwb(p),A="hwb";break;default:g=N.get.rgb(p),A="rgb";break}return g?{model:A,value:g}:null},N.get.rgb=function(p){if(!p)return null;var y=/^#([a-f0-9]{3,4})$/i,g=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,A=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,_=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,S=/^(\w+)$/,O=[0,0,0,1],B,m,d;if(B=p.match(g)){for(d=B[2],B=B[1],m=0;m<3;m++){var tt=m*2;O[m]=parseInt(B.slice(tt,tt+2),16)}d&&(O[3]=parseInt(d,16)/255)}else if(B=p.match(y)){for(B=B[1],d=B[3],m=0;m<3;m++)O[m]=parseInt(B[m]+B[m],16);d&&(O[3]=parseInt(d+d,16)/255)}else if(B=p.match(A)){for(m=0;m<3;m++)O[m]=parseInt(B[m+1],0);B[4]&&(B[5]?O[3]=parseFloat(B[4])*.01:O[3]=parseFloat(B[4]))}else if(B=p.match(_)){for(m=0;m<3;m++)O[m]=Math.round(parseFloat(B[m+1])*2.55);B[4]&&(B[5]?O[3]=parseFloat(B[4])*.01:O[3]=parseFloat(B[4]))}else return(B=p.match(S))?B[1]==="transparent"?[0,0,0,0]:R.call(G,B[1])?(O=G[B[1]],O[3]=1,O):null:null;for(m=0;m<3;m++)O[m]=E(O[m],0,255);return O[3]=E(O[3],0,1),O},N.get.hsl=function(p){if(!p)return null;var y=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,g=p.match(y);if(g){var A=parseFloat(g[4]),_=(parseFloat(g[1])%360+360)%360,S=E(parseFloat(g[2]),0,100),O=E(parseFloat(g[3]),0,100),B=E(isNaN(A)?1:A,0,1);return[_,S,O,B]}return null},N.get.hwb=function(p){if(!p)return null;var y=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,g=p.match(y);if(g){var A=parseFloat(g[4]),_=(parseFloat(g[1])%360+360)%360,S=E(parseFloat(g[2]),0,100),O=E(parseFloat(g[3]),0,100),B=E(isNaN(A)?1:A,0,1);return[_,S,O,B]}return null},N.to.hex=function(){var p=X(arguments);return"#"+x(p[0])+x(p[1])+x(p[2])+(p[3]<1?x(Math.round(p[3]*255)):"")},N.to.rgb=function(){var p=X(arguments);return p.length<4||p[3]===1?"rgb("+Math.round(p[0])+", "+Math.round(p[1])+", "+Math.round(p[2])+")":"rgba("+Math.round(p[0])+", "+Math.round(p[1])+", "+Math.round(p[2])+", "+p[3]+")"},N.to.rgb.percent=function(){var p=X(arguments),y=Math.round(p[0]/255*100),g=Math.round(p[1]/255*100),A=Math.round(p[2]/255*100);return p.length<4||p[3]===1?"rgb("+y+"%, "+g+"%, "+A+"%)":"rgba("+y+"%, "+g+"%, "+A+"%, "+p[3]+")"},N.to.hsl=function(){var p=X(arguments);return p.length<4||p[3]===1?"hsl("+p[0]+", "+p[1]+"%, "+p[2]+"%)":"hsla("+p[0]+", "+p[1]+"%, "+p[2]+"%, "+p[3]+")"},N.to.hwb=function(){var p=X(arguments),y="";return p.length>=4&&p[3]!==1&&(y=", "+p[3]),"hwb("+p[0]+", "+p[1]+"%, "+p[2]+"%"+y+")"},N.to.keyword=function(p){return L[p.slice(0,3)]};function E(p,y,g){return Math.min(Math.max(y,p),g)}function x(p){var y=Math.round(p).toString(16).toUpperCase();return y.length<2?"0"+y:y}},6767:function(He,F,z){"use strict";var G=z(843425),X=z(112085),R=[].slice,L=["keyword","gray","hex"],P={};Object.keys(X).forEach(function(S){P[R.call(X[S].labels).sort().join("")]=S});var N={};function E(S,O){if(!(this instanceof E))return new E(S,O);if(O&&O in L&&(O=null),O&&!(O in X))throw new Error("Unknown model: "+O);var B,m;if(S==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(S instanceof E)this.model=S.model,this.color=S.color.slice(),this.valpha=S.valpha;else if(typeof S=="string"){var d=G.get(S);if(d===null)throw new Error("Unable to parse color from string: "+S);this.model=d.model,m=X[this.model].channels,this.color=d.value.slice(0,m),this.valpha=typeof d.value[m]=="number"?d.value[m]:1}else if(S.length){this.model=O||"rgb",m=X[this.model].channels;var tt=R.call(S,0,m);this.color=_(tt,m),this.valpha=typeof S[m]=="number"?S[m]:1}else if(typeof S=="number")S&=16777215,this.model="rgb",this.color=[S>>16&255,S>>8&255,S&255],this.valpha=1;else{this.valpha=1;var Y=Object.keys(S);"alpha"in S&&(Y.splice(Y.indexOf("alpha"),1),this.valpha=typeof S.alpha=="number"?S.alpha:0);var V=Y.sort().join("");if(!(V in P))throw new Error("Unable to parse color from object: "+JSON.stringify(S));this.model=P[V];var $=X[this.model].labels,q=[];for(B=0;B<$.length;B++)q.push(S[$[B]]);this.color=_(q)}if(N[this.model])for(m=X[this.model].channels,B=0;B<m;B++){var rt=N[this.model][B];rt&&(this.color[B]=rt(this.color[B]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}E.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(S){var O=this.model in G.to?this:this.rgb();O=O.round(typeof S=="number"?S:1);var B=O.valpha===1?O.color:O.color.concat(this.valpha);return G.to[O.model](B)},percentString:function(S){var O=this.rgb().round(typeof S=="number"?S:1),B=O.valpha===1?O.color:O.color.concat(this.valpha);return G.to.rgb.percent(B)},array:function(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var S={},O=X[this.model].channels,B=X[this.model].labels,m=0;m<O;m++)S[B[m]]=this.color[m];return this.valpha!==1&&(S.alpha=this.valpha),S},unitArray:function(){var S=this.rgb().color;return S[0]/=255,S[1]/=255,S[2]/=255,this.valpha!==1&&S.push(this.valpha),S},unitObject:function(){var S=this.rgb().object();return S.r/=255,S.g/=255,S.b/=255,this.valpha!==1&&(S.alpha=this.valpha),S},round:function(S){return S=Math.max(S||0,0),new E(this.color.map(p(S)).concat(this.valpha),this.model)},alpha:function(S){return arguments.length?new E(this.color.concat(Math.max(0,Math.min(1,S))),this.model):this.valpha},red:y("rgb",0,g(255)),green:y("rgb",1,g(255)),blue:y("rgb",2,g(255)),hue:y(["hsl","hsv","hsl","hwb","hcg"],0,function(S){return(S%360+360)%360}),saturationl:y("hsl",1,g(100)),lightness:y("hsl",2,g(100)),saturationv:y("hsv",1,g(100)),value:y("hsv",2,g(100)),chroma:y("hcg",1,g(100)),gray:y("hcg",2,g(100)),white:y("hwb",1,g(100)),wblack:y("hwb",2,g(100)),cyan:y("cmyk",0,g(100)),magenta:y("cmyk",1,g(100)),yellow:y("cmyk",2,g(100)),black:y("cmyk",3,g(100)),x:y("xyz",0,g(100)),y:y("xyz",1,g(100)),z:y("xyz",2,g(100)),l:y("lab",0,g(100)),a:y("lab",1),b:y("lab",2),keyword:function(S){return arguments.length?new E(S):X[this.model].keyword(this.color)},hex:function(S){return arguments.length?new E(S):G.to.hex(this.rgb().round().color)},rgbNumber:function(){var S=this.rgb().color;return(S[0]&255)<<16|(S[1]&255)<<8|S[2]&255},luminosity:function(){for(var S=this.rgb().color,O=[],B=0;B<S.length;B++){var m=S[B]/255;O[B]=m<=.03928?m/12.92:Math.pow((m+.055)/1.055,2.4)}return .2126*O[0]+.7152*O[1]+.0722*O[2]},contrast:function(S){var O=this.luminosity(),B=S.luminosity();return O>B?(O+.05)/(B+.05):(B+.05)/(O+.05)},level:function(S){var O=this.contrast(S);return O>=7.1?"AAA":O>=4.5?"AA":""},isDark:function(){var S=this.rgb().color,O=(S[0]*299+S[1]*587+S[2]*114)/1e3;return O<128},isLight:function(){return!this.isDark()},negate:function(){for(var S=this.rgb(),O=0;O<3;O++)S.color[O]=255-S.color[O];return S},lighten:function(S){var O=this.hsl();return O.color[2]+=O.color[2]*S,O},darken:function(S){var O=this.hsl();return O.color[2]-=O.color[2]*S,O},saturate:function(S){var O=this.hsl();return O.color[1]+=O.color[1]*S,O},desaturate:function(S){var O=this.hsl();return O.color[1]-=O.color[1]*S,O},whiten:function(S){var O=this.hwb();return O.color[1]+=O.color[1]*S,O},blacken:function(S){var O=this.hwb();return O.color[2]+=O.color[2]*S,O},grayscale:function(){var S=this.rgb().color,O=S[0]*.3+S[1]*.59+S[2]*.11;return E.rgb(O,O,O)},fade:function(S){return this.alpha(this.valpha-this.valpha*S)},opaquer:function(S){return this.alpha(this.valpha+this.valpha*S)},rotate:function(S){var O=this.hsl(),B=O.color[0];return B=(B+S)%360,B=B<0?360+B:B,O.color[0]=B,O},mix:function(S,O){if(!S||!S.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof S);var B=S.rgb(),m=this.rgb(),d=O===void 0?.5:O,tt=2*d-1,Y=B.alpha()-m.alpha(),V=((tt*Y===-1?tt:(tt+Y)/(1+tt*Y))+1)/2,$=1-V;return E.rgb(V*B.red()+$*m.red(),V*B.green()+$*m.green(),V*B.blue()+$*m.blue(),B.alpha()*d+m.alpha()*(1-d))}},Object.keys(X).forEach(function(S){if(L.indexOf(S)===-1){var O=X[S].channels;E.prototype[S]=function(){if(this.model===S)return new E(this);if(arguments.length)return new E(arguments,S);var B=typeof arguments[O]=="number"?O:this.valpha;return new E(A(X[this.model][S].raw(this.color)).concat(B),S)},E[S]=function(B){return typeof B=="number"&&(B=_(R.call(arguments),O)),new E(B,S)}}});function x(S,O){return Number(S.toFixed(O))}function p(S){return function(O){return x(O,S)}}function y(S,O,B){return S=Array.isArray(S)?S:[S],S.forEach(function(m){(N[m]||(N[m]=[]))[O]=B}),S=S[0],function(m){var d;return arguments.length?(B&&(m=B(m)),d=this[S](),d.color[O]=m,d):(d=this[S]().color[O],B&&(d=B(d)),d)}}function g(S){return function(O){return Math.max(0,Math.min(S,O))}}function A(S){return Array.isArray(S)?S:[S]}function _(S,O){for(var B=0;B<O;B++)typeof S[B]!="number"&&(S[B]=0);return S}He.exports=E},971829:function(He,F,z){"use strict";z.r(F),z.d(F,{quadtree:function(){return G.Z}});var G=z(547148)},547148:function(He,F,z){"use strict";z.d(F,{Z:function(){return tt}});function G(q){const rt=+this._x.call(null,q),Q=+this._y.call(null,q);return X(this.cover(rt,Q),rt,Q,q)}function X(q,rt,Q,it){if(isNaN(rt)||isNaN(Q))return q;var ht,dt=q._root,Ot={data:it},It=q._x0,Kt=q._y0,Ft=q._x1,Nt=q._y1,st,yt,kt,ee,$t,ge,Pe,er;if(!dt)return q._root=Ot,q;for(;dt.length;)if(($t=rt>=(st=(It+Ft)/2))?It=st:Ft=st,(ge=Q>=(yt=(Kt+Nt)/2))?Kt=yt:Nt=yt,ht=dt,!(dt=dt[Pe=ge<<1|$t]))return ht[Pe]=Ot,q;if(kt=+q._x.call(null,dt.data),ee=+q._y.call(null,dt.data),rt===kt&&Q===ee)return Ot.next=dt,ht?ht[Pe]=Ot:q._root=Ot,q;do ht=ht?ht[Pe]=new Array(4):q._root=new Array(4),($t=rt>=(st=(It+Ft)/2))?It=st:Ft=st,(ge=Q>=(yt=(Kt+Nt)/2))?Kt=yt:Nt=yt;while((Pe=ge<<1|$t)===(er=(ee>=yt)<<1|kt>=st));return ht[er]=dt,ht[Pe]=Ot,q}function R(q){var rt,Q,it=q.length,ht,dt,Ot=new Array(it),It=new Array(it),Kt=1/0,Ft=1/0,Nt=-1/0,st=-1/0;for(Q=0;Q<it;++Q)isNaN(ht=+this._x.call(null,rt=q[Q]))||isNaN(dt=+this._y.call(null,rt))||(Ot[Q]=ht,It[Q]=dt,ht<Kt&&(Kt=ht),ht>Nt&&(Nt=ht),dt<Ft&&(Ft=dt),dt>st&&(st=dt));if(Kt>Nt||Ft>st)return this;for(this.cover(Kt,Ft).cover(Nt,st),Q=0;Q<it;++Q)X(this,Ot[Q],It[Q],q[Q]);return this}function L(q,rt){if(isNaN(q=+q)||isNaN(rt=+rt))return this;var Q=this._x0,it=this._y0,ht=this._x1,dt=this._y1;if(isNaN(Q))ht=(Q=Math.floor(q))+1,dt=(it=Math.floor(rt))+1;else{for(var Ot=ht-Q||1,It=this._root,Kt,Ft;Q>q||q>=ht||it>rt||rt>=dt;)switch(Ft=(rt<it)<<1|q<Q,Kt=new Array(4),Kt[Ft]=It,It=Kt,Ot*=2,Ft){case 0:ht=Q+Ot,dt=it+Ot;break;case 1:Q=ht-Ot,dt=it+Ot;break;case 2:ht=Q+Ot,it=dt-Ot;break;case 3:Q=ht-Ot,it=dt-Ot;break}this._root&&this._root.length&&(this._root=It)}return this._x0=Q,this._y0=it,this._x1=ht,this._y1=dt,this}function P(){var q=[];return this.visit(function(rt){if(!rt.length)do q.push(rt.data);while(rt=rt.next)}),q}function N(q){return arguments.length?this.cover(+q[0][0],+q[0][1]).cover(+q[1][0],+q[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function E(q,rt,Q,it,ht){this.node=q,this.x0=rt,this.y0=Q,this.x1=it,this.y1=ht}function x(q,rt,Q){var it,ht=this._x0,dt=this._y0,Ot,It,Kt,Ft,Nt=this._x1,st=this._y1,yt=[],kt=this._root,ee,$t;for(kt&&yt.push(new E(kt,ht,dt,Nt,st)),Q==null?Q=1/0:(ht=q-Q,dt=rt-Q,Nt=q+Q,st=rt+Q,Q*=Q);ee=yt.pop();)if(!(!(kt=ee.node)||(Ot=ee.x0)>Nt||(It=ee.y0)>st||(Kt=ee.x1)<ht||(Ft=ee.y1)<dt))if(kt.length){var ge=(Ot+Kt)/2,Pe=(It+Ft)/2;yt.push(new E(kt[3],ge,Pe,Kt,Ft),new E(kt[2],Ot,Pe,ge,Ft),new E(kt[1],ge,It,Kt,Pe),new E(kt[0],Ot,It,ge,Pe)),($t=(rt>=Pe)<<1|q>=ge)&&(ee=yt[yt.length-1],yt[yt.length-1]=yt[yt.length-1-$t],yt[yt.length-1-$t]=ee)}else{var er=q-+this._x.call(null,kt.data),Jt=rt-+this._y.call(null,kt.data),ae=er*er+Jt*Jt;if(ae<Q){var Se=Math.sqrt(Q=ae);ht=q-Se,dt=rt-Se,Nt=q+Se,st=rt+Se,it=kt.data}}return it}function p(q){if(isNaN(Nt=+this._x.call(null,q))||isNaN(st=+this._y.call(null,q)))return this;var rt,Q=this._root,it,ht,dt,Ot=this._x0,It=this._y0,Kt=this._x1,Ft=this._y1,Nt,st,yt,kt,ee,$t,ge,Pe;if(!Q)return this;if(Q.length)for(;;){if((ee=Nt>=(yt=(Ot+Kt)/2))?Ot=yt:Kt=yt,($t=st>=(kt=(It+Ft)/2))?It=kt:Ft=kt,rt=Q,!(Q=Q[ge=$t<<1|ee]))return this;if(!Q.length)break;(rt[ge+1&3]||rt[ge+2&3]||rt[ge+3&3])&&(it=rt,Pe=ge)}for(;Q.data!==q;)if(ht=Q,!(Q=Q.next))return this;return(dt=Q.next)&&delete Q.next,ht?(dt?ht.next=dt:delete ht.next,this):rt?(dt?rt[ge]=dt:delete rt[ge],(Q=rt[0]||rt[1]||rt[2]||rt[3])&&Q===(rt[3]||rt[2]||rt[1]||rt[0])&&!Q.length&&(it?it[Pe]=Q:this._root=Q),this):(this._root=dt,this)}function y(q){for(var rt=0,Q=q.length;rt<Q;++rt)this.remove(q[rt]);return this}function g(){return this._root}function A(){var q=0;return this.visit(function(rt){if(!rt.length)do++q;while(rt=rt.next)}),q}function _(q){var rt=[],Q,it=this._root,ht,dt,Ot,It,Kt;for(it&&rt.push(new E(it,this._x0,this._y0,this._x1,this._y1));Q=rt.pop();)if(!q(it=Q.node,dt=Q.x0,Ot=Q.y0,It=Q.x1,Kt=Q.y1)&&it.length){var Ft=(dt+It)/2,Nt=(Ot+Kt)/2;(ht=it[3])&&rt.push(new E(ht,Ft,Nt,It,Kt)),(ht=it[2])&&rt.push(new E(ht,dt,Nt,Ft,Kt)),(ht=it[1])&&rt.push(new E(ht,Ft,Ot,It,Nt)),(ht=it[0])&&rt.push(new E(ht,dt,Ot,Ft,Nt))}return this}function S(q){var rt=[],Q=[],it;for(this._root&&rt.push(new E(this._root,this._x0,this._y0,this._x1,this._y1));it=rt.pop();){var ht=it.node;if(ht.length){var dt,Ot=it.x0,It=it.y0,Kt=it.x1,Ft=it.y1,Nt=(Ot+Kt)/2,st=(It+Ft)/2;(dt=ht[0])&&rt.push(new E(dt,Ot,It,Nt,st)),(dt=ht[1])&&rt.push(new E(dt,Nt,It,Kt,st)),(dt=ht[2])&&rt.push(new E(dt,Ot,st,Nt,Ft)),(dt=ht[3])&&rt.push(new E(dt,Nt,st,Kt,Ft))}Q.push(it)}for(;it=Q.pop();)q(it.node,it.x0,it.y0,it.x1,it.y1);return this}function O(q){return q[0]}function B(q){return arguments.length?(this._x=q,this):this._x}function m(q){return q[1]}function d(q){return arguments.length?(this._y=q,this):this._y}function tt(q,rt,Q){var it=new Y(rt==null?O:rt,Q==null?m:Q,NaN,NaN,NaN,NaN);return q==null?it:it.addAll(q)}function Y(q,rt,Q,it,ht,dt){this._x=q,this._y=rt,this._x0=Q,this._y0=it,this._x1=ht,this._y1=dt,this._root=void 0}function V(q){for(var rt={data:q.data},Q=rt;q=q.next;)Q=Q.next={data:q.data};return rt}var $=tt.prototype=Y.prototype;$.copy=function(){var q=new Y(this._x,this._y,this._x0,this._y0,this._x1,this._y1),rt=this._root,Q,it;if(!rt)return q;if(!rt.length)return q._root=V(rt),q;for(Q=[{source:rt,target:q._root=new Array(4)}];rt=Q.pop();)for(var ht=0;ht<4;++ht)(it=rt.source[ht])&&(it.length?Q.push({source:it,target:rt.target[ht]=new Array(4)}):rt.target[ht]=V(it));return q},$.add=G,$.addAll=R,$.cover=L,$.data=P,$.extent=N,$.find=x,$.remove=p,$.removeAll=y,$.root=g,$.size=A,$.visit=_,$.visitAfter=S,$.x=B,$.y=d},631969:function(He,F,z){"use strict";z.r(F),z.d(F,{BRIDGE_GRAPH_NAME:function(){return P},GraphType:function(){return x},HierarchyNodeType:function(){return p},InclusionType:function(){return E},LAYOUT_CONFIG:function(){return G},NodeType:function(){return N},ROOT_NAME:function(){return L},buildGraph:function(){return hr},flatGraph:function(){return Yr},getEdges:function(){return Vr},mergeConfig:function(){return X}});const G={graph:{meta:{rankDir:"TB",nodeSep:50,rankSep:50,edgeSep:5,align:void 0}},subScene:{meta:{paddingTop:20,paddingBottom:20,paddingLeft:20,paddingRight:20,labelHeight:20}},nodeSize:{meta:{width:100,maxLabelWidth:0,height:20},node:{width:80,height:20,labelOffset:10,maxLabelWidth:40},bridge:{width:5,height:5,radius:2,labelOffset:0}}};function X(v={},T=G){var U,Z,ot,ct;const gt=JSON.parse(JSON.stringify(T)),bt=((U=v==null?void 0:v.graph)===null||U===void 0?void 0:U.meta)||{},Mt=((Z=v==null?void 0:v.subScene)===null||Z===void 0?void 0:Z.meta)||{},Gt=((ot=v==null?void 0:v.nodeSize)===null||ot===void 0?void 0:ot.meta)||{},te=((ct=v==null?void 0:v.nodeSize)===null||ct===void 0?void 0:ct.node)||{},Zt=gt.nodeSize.bridge;return{graph:{meta:Object.assign(gt.graph.meta,bt)},subScene:{meta:Object.assign(gt.subScene.meta,Mt)},nodeSize:{meta:Object.assign(gt.nodeSize.meta,Gt),node:Object.assign(gt.nodeSize.node,te),bridge:Zt}}}function R(v){return`\u25EC${v}\u25EC`}const L=R("ROOT"),P=R("BRIDGE_GRAPH");var N,E,x,p;(function(v){v[v.META=0]="META",v[v.NODE=1]="NODE",v[v.BRIDGE=2]="BRIDGE"})(N||(N={})),function(v){v[v.INCLUDE=0]="INCLUDE",v[v.EXCLUDE=1]="EXCLUDE",v[v.UNSPECIFIED=2]="UNSPECIFIED"}(E||(E={})),function(v){v[v.META=0]="META",v[v.CORE=1]="CORE",v[v.BRIDGE=2]="BRIDGE"}(x||(x={})),function(v){v[v.META=0]="META",v[v.OP=1]="OP",v[v.SERIES=2]="SERIES"}(p||(p={}));var y=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof z.g!="undefined"?z.g:typeof self!="undefined"?self:{};function g(v,T){return v(T={exports:{}},T.exports),T.exports}var A=function(){this.__data__=[],this.size=0},_=function(v,T){return v===T||v!=v&&T!=T},S=function(v,T){for(var U=v.length;U--;)if(_(v[U][0],T))return U;return-1},O=Array.prototype.splice,B=function(v){var T=this.__data__,U=S(T,v);return!(U<0)&&(U==T.length-1?T.pop():O.call(T,U,1),--this.size,!0)},m=function(v){var T=this.__data__,U=S(T,v);return U<0?void 0:T[U][1]},d=function(v){return S(this.__data__,v)>-1},tt=function(v,T){var U=this.__data__,Z=S(U,v);return Z<0?(++this.size,U.push([v,T])):U[Z][1]=T,this};function Y(v){var T=-1,U=v==null?0:v.length;for(this.clear();++T<U;){var Z=v[T];this.set(Z[0],Z[1])}}Y.prototype.clear=A,Y.prototype.delete=B,Y.prototype.get=m,Y.prototype.has=d,Y.prototype.set=tt;var V=Y,$=function(){this.__data__=new V,this.size=0},q=function(v){var T=this.__data__,U=T.delete(v);return this.size=T.size,U},rt=function(v){return this.__data__.get(v)},Q=function(v){return this.__data__.has(v)},it=typeof y=="object"&&y&&y.Object===Object&&y,ht=typeof self=="object"&&self&&self.Object===Object&&self,dt=it||ht||Function("return this")(),Ot=dt.Symbol,It=Object.prototype,Kt=It.hasOwnProperty,Ft=It.toString,Nt=Ot?Ot.toStringTag:void 0,st=function(v){var T=Kt.call(v,Nt),U=v[Nt];try{v[Nt]=void 0;var Z=!0}catch(ct){}var ot=Ft.call(v);return Z&&(T?v[Nt]=U:delete v[Nt]),ot},yt=Object.prototype.toString,kt=function(v){return yt.call(v)},ee=Ot?Ot.toStringTag:void 0,$t=function(v){return v==null?v===void 0?"[object Undefined]":"[object Null]":ee&&ee in Object(v)?st(v):kt(v)},ge=function(v){var T=typeof v;return v!=null&&(T=="object"||T=="function")},Pe,er=function(v){if(!ge(v))return!1;var T=$t(v);return T=="[object Function]"||T=="[object GeneratorFunction]"||T=="[object AsyncFunction]"||T=="[object Proxy]"},Jt=dt["__core-js_shared__"],ae=(Pe=/[^.]+$/.exec(Jt&&Jt.keys&&Jt.keys.IE_PROTO||""))?"Symbol(src)_1."+Pe:"",Se=function(v){return!!ae&&ae in v},xe=Function.prototype.toString,we=function(v){if(v!=null){try{return xe.call(v)}catch(T){}try{return v+""}catch(T){}}return""},zt=/^\[object .+?Constructor\]$/,Wt=Function.prototype,Ie=Object.prototype,Yt=Wt.toString,ie=Ie.hasOwnProperty,Oe=RegExp("^"+Yt.call(ie).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),re=function(v){return!(!ge(v)||Se(v))&&(er(v)?Oe:zt).test(we(v))},_e=function(v,T){return v==null?void 0:v[T]},Ge=function(v,T){var U=_e(v,T);return re(U)?U:void 0},Ct=Ge(dt,"Map"),Nr=Ge(Object,"create"),Or=function(){this.__data__=Nr?Nr(null):{},this.size=0},Ur=function(v){var T=this.has(v)&&delete this.__data__[v];return this.size-=T?1:0,T},Sr=Object.prototype.hasOwnProperty,gn=function(v){var T=this.__data__;if(Nr){var U=T[v];return U==="__lodash_hash_undefined__"?void 0:U}return Sr.call(T,v)?T[v]:void 0},Rr=Object.prototype.hasOwnProperty,ln=function(v){var T=this.__data__;return Nr?T[v]!==void 0:Rr.call(T,v)},Nn=function(v,T){var U=this.__data__;return this.size+=this.has(v)?0:1,U[v]=Nr&&T===void 0?"__lodash_hash_undefined__":T,this};function Ln(v){var T=-1,U=v==null?0:v.length;for(this.clear();++T<U;){var Z=v[T];this.set(Z[0],Z[1])}}Ln.prototype.clear=Or,Ln.prototype.delete=Ur,Ln.prototype.get=gn,Ln.prototype.has=ln,Ln.prototype.set=Nn;var fn=Ln,Qe=function(){this.size=0,this.__data__={hash:new fn,map:new(Ct||V),string:new fn}},nr=function(v){var T=typeof v;return T=="string"||T=="number"||T=="symbol"||T=="boolean"?v!=="__proto__":v===null},dr=function(v,T){var U=v.__data__;return nr(T)?U[typeof T=="string"?"string":"hash"]:U.map},Pr=function(v){var T=dr(this,v).delete(v);return this.size-=T?1:0,T},en=function(v){return dr(this,v).get(v)},pn=function(v){return dr(this,v).has(v)},rn=function(v,T){var U=dr(this,v),Z=U.size;return U.set(v,T),this.size+=U.size==Z?0:1,this};function jn(v){var T=-1,U=v==null?0:v.length;for(this.clear();++T<U;){var Z=v[T];this.set(Z[0],Z[1])}}jn.prototype.clear=Qe,jn.prototype.delete=Pr,jn.prototype.get=en,jn.prototype.has=pn,jn.prototype.set=rn;var Hn=jn,oa=function(v,T){var U=this.__data__;if(U instanceof V){var Z=U.__data__;if(!Ct||Z.length<199)return Z.push([v,T]),this.size=++U.size,this;U=this.__data__=new Hn(Z)}return U.set(v,T),this.size=U.size,this};function dn(v){var T=this.__data__=new V(v);this.size=T.size}dn.prototype.clear=$,dn.prototype.delete=q,dn.prototype.get=rt,dn.prototype.has=Q,dn.prototype.set=oa;var Wn=dn,Dn=function(v,T){for(var U=-1,Z=v==null?0:v.length;++U<Z&&T(v[U],U,v)!==!1;);return v},Cn=function(){try{var v=Ge(Object,"defineProperty");return v({},"",{}),v}catch(T){}}(),la=function(v,T,U){T=="__proto__"&&Cn?Cn(v,T,{configurable:!0,enumerable:!0,value:U,writable:!0}):v[T]=U},K=Object.prototype.hasOwnProperty,ft=function(v,T,U){var Z=v[T];K.call(v,T)&&_(Z,U)&&(U!==void 0||T in v)||la(v,T,U)},nt=function(v,T,U,Z){var ot=!U;U||(U={});for(var ct=-1,gt=T.length;++ct<gt;){var bt=T[ct],Mt=Z?Z(U[bt],v[bt],bt,U,v):void 0;Mt===void 0&&(Mt=v[bt]),ot?la(U,bt,Mt):ft(U,bt,Mt)}return U},k=function(v,T){for(var U=-1,Z=Array(v);++U<v;)Z[U]=T(U);return Z},M=function(v){return v!=null&&typeof v=="object"},C=function(v){return M(v)&&$t(v)=="[object Arguments]"},j=Object.prototype,xt=j.hasOwnProperty,At=j.propertyIsEnumerable,wt=C(function(){return arguments}())?C:function(v){return M(v)&&xt.call(v,"callee")&&!At.call(v,"callee")},Pt=Array.isArray,Me=function(){return!1},ve=g(function(v,T){var U=T&&!T.nodeType&&T,Z=U&&v&&!v.nodeType&&v,ot=Z&&Z.exports===U?dt.Buffer:void 0,ct=(ot?ot.isBuffer:void 0)||Me;v.exports=ct}),Ke=/^(?:0|[1-9]\d*)$/,br=function(v,T){var U=typeof v;return!!(T=T==null?9007199254740991:T)&&(U=="number"||U!="symbol"&&Ke.test(v))&&v>-1&&v%1==0&&v<T},ir=function(v){return typeof v=="number"&&v>-1&&v%1==0&&v<=9007199254740991},mr={};mr["[object Float32Array]"]=mr["[object Float64Array]"]=mr["[object Int8Array]"]=mr["[object Int16Array]"]=mr["[object Int32Array]"]=mr["[object Uint8Array]"]=mr["[object Uint8ClampedArray]"]=mr["[object Uint16Array]"]=mr["[object Uint32Array]"]=!0,mr["[object Arguments]"]=mr["[object Array]"]=mr["[object ArrayBuffer]"]=mr["[object Boolean]"]=mr["[object DataView]"]=mr["[object Date]"]=mr["[object Error]"]=mr["[object Function]"]=mr["[object Map]"]=mr["[object Number]"]=mr["[object Object]"]=mr["[object RegExp]"]=mr["[object Set]"]=mr["[object String]"]=mr["[object WeakMap]"]=!1;var Mn=function(v){return M(v)&&ir(v.length)&&!!mr[$t(v)]},Xe=function(v){return function(T){return v(T)}},vr=g(function(v,T){var U=T&&!T.nodeType&&T,Z=U&&v&&!v.nodeType&&v,ot=Z&&Z.exports===U&&it.process,ct=function(){try{var gt=Z&&Z.require&&Z.require("util").types;return gt||ot&&ot.binding&&ot.binding("util")}catch(bt){}}();v.exports=ct}),Er=vr&&vr.isTypedArray,on=Er?Xe(Er):Mn,Wr=Object.prototype.hasOwnProperty,xa=function(v,T){var U=Pt(v),Z=!U&&wt(v),ot=!U&&!Z&&ve(v),ct=!U&&!Z&&!ot&&on(v),gt=U||Z||ot||ct,bt=gt?k(v.length,String):[],Mt=bt.length;for(var Gt in v)!T&&!Wr.call(v,Gt)||gt&&(Gt=="length"||ot&&(Gt=="offset"||Gt=="parent")||ct&&(Gt=="buffer"||Gt=="byteLength"||Gt=="byteOffset")||br(Gt,Mt))||bt.push(Gt);return bt},Ta=Object.prototype,Rn=function(v){var T=v&&v.constructor;return v===(typeof T=="function"&&T.prototype||Ta)},Jn=function(v,T){return function(U){return v(T(U))}},Ga=Jn(Object.keys,Object),Aa=Object.prototype.hasOwnProperty,an=function(v){if(!Rn(v))return Ga(v);var T=[];for(var U in Object(v))Aa.call(v,U)&&U!="constructor"&&T.push(U);return T},Vn=function(v){return v!=null&&ir(v.length)&&!er(v)},me=function(v){return Vn(v)?xa(v):an(v)},Dt=function(v,T){return v&&nt(T,me(T),v)},fe=function(v){var T=[];if(v!=null)for(var U in Object(v))T.push(U);return T},Ae=Object.prototype.hasOwnProperty,be=function(v){if(!ge(v))return fe(v);var T=Rn(v),U=[];for(var Z in v)(Z!="constructor"||!T&&Ae.call(v,Z))&&U.push(Z);return U},De=function(v){return Vn(v)?xa(v,!0):be(v)},sr=function(v,T){return v&&nt(T,De(T),v)},Fr=g(function(v,T){var U=T&&!T.nodeType&&T,Z=U&&v&&!v.nodeType&&v,ot=Z&&Z.exports===U?dt.Buffer:void 0,ct=ot?ot.allocUnsafe:void 0;v.exports=function(gt,bt){if(bt)return gt.slice();var Mt=gt.length,Gt=ct?ct(Mt):new gt.constructor(Mt);return gt.copy(Gt),Gt}}),Jr=function(v,T){var U=-1,Z=v.length;for(T||(T=Array(Z));++U<Z;)T[U]=v[U];return T},Pn=function(v,T){for(var U=-1,Z=v==null?0:v.length,ot=0,ct=[];++U<Z;){var gt=v[U];T(gt,U,v)&&(ct[ot++]=gt)}return ct},Bn=function(){return[]},Zn=Object.prototype.propertyIsEnumerable,ba=Object.getOwnPropertySymbols,Ca=ba?function(v){return v==null?[]:(v=Object(v),Pn(ba(v),function(T){return Zn.call(v,T)}))}:Bn,li=function(v,T){return nt(v,Ca(v),T)},ta=function(v,T){for(var U=-1,Z=T.length,ot=v.length;++U<Z;)v[ot+U]=T[U];return v},fi=Jn(Object.getPrototypeOf,Object),Co=Object.getOwnPropertySymbols?function(v){for(var T=[];v;)ta(T,Ca(v)),v=fi(v);return T}:Bn,La=function(v,T){return nt(v,Co(v),T)},xi=function(v,T,U){var Z=T(v);return Pt(v)?Z:ta(Z,U(v))},so=function(v){return xi(v,me,Ca)},To=function(v){return xi(v,De,Co)},bo=Ge(dt,"DataView"),uo=Ge(dt,"Promise"),Hi=Ge(dt,"Set"),ds=Ge(dt,"WeakMap"),zi=we(bo),Ui=we(Ct),gs=we(uo),Ms=we(Hi),Go=we(ds),_o=$t;(bo&&_o(new bo(new ArrayBuffer(1)))!="[object DataView]"||Ct&&_o(new Ct)!="[object Map]"||uo&&_o(uo.resolve())!="[object Promise]"||Hi&&_o(new Hi)!="[object Set]"||ds&&_o(new ds)!="[object WeakMap]")&&(_o=function(v){var T=$t(v),U=T=="[object Object]"?v.constructor:void 0,Z=U?we(U):"";if(Z)switch(Z){case zi:return"[object DataView]";case Ui:return"[object Map]";case gs:return"[object Promise]";case Ms:return"[object Set]";case Go:return"[object WeakMap]"}return T});var Io=_o,$s=Object.prototype.hasOwnProperty,Yn=function(v){var T=v.length,U=new v.constructor(T);return T&&typeof v[0]=="string"&&$s.call(v,"index")&&(U.index=v.index,U.input=v.input),U},So=dt.Uint8Array,Oo=function(v){var T=new v.constructor(v.byteLength);return new So(T).set(new So(v)),T},Wi=function(v,T){var U=T?Oo(v.buffer):v.buffer;return new v.constructor(U,v.byteOffset,v.byteLength)},zn=/\w*$/,Lo=function(v){var T=new v.constructor(v.source,zn.exec(v));return T.lastIndex=v.lastIndex,T},Ai=Ot?Ot.prototype:void 0,zo=Ai?Ai.valueOf:void 0,Uo=function(v){return zo?Object(zo.call(v)):{}},ps=function(v,T){var U=T?Oo(v.buffer):v.buffer;return new v.constructor(U,v.byteOffset,v.length)},eo=function(v,T,U){var Z=v.constructor;switch(T){case"[object ArrayBuffer]":return Oo(v);case"[object Boolean]":case"[object Date]":return new Z(+v);case"[object DataView]":return Wi(v,U);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return ps(v,U);case"[object Map]":return new Z;case"[object Number]":case"[object String]":return new Z(v);case"[object RegExp]":return Lo(v);case"[object Set]":return new Z;case"[object Symbol]":return Uo(v)}},ro=Object.create,ei=function(){function v(){}return function(T){if(!ge(T))return{};if(ro)return ro(T);v.prototype=T;var U=new v;return v.prototype=void 0,U}}(),fo=function(v){return typeof v.constructor!="function"||Rn(v)?{}:ei(fi(v))},Do=function(v){return M(v)&&Io(v)=="[object Map]"},Wo=vr&&vr.isMap,No=Wo?Xe(Wo):Do,is=function(v){return M(v)&&Io(v)=="[object Set]"},Xo=vr&&vr.isSet,Jo=Xo?Xe(Xo):is,Xa={};Xa["[object Arguments]"]=Xa["[object Array]"]=Xa["[object ArrayBuffer]"]=Xa["[object DataView]"]=Xa["[object Boolean]"]=Xa["[object Date]"]=Xa["[object Float32Array]"]=Xa["[object Float64Array]"]=Xa["[object Int8Array]"]=Xa["[object Int16Array]"]=Xa["[object Int32Array]"]=Xa["[object Map]"]=Xa["[object Number]"]=Xa["[object Object]"]=Xa["[object RegExp]"]=Xa["[object Set]"]=Xa["[object String]"]=Xa["[object Symbol]"]=Xa["[object Uint8Array]"]=Xa["[object Uint8ClampedArray]"]=Xa["[object Uint16Array]"]=Xa["[object Uint32Array]"]=!0,Xa["[object Error]"]=Xa["[object Function]"]=Xa["[object WeakMap]"]=!1;var As=function v(T,U,Z,ot,ct,gt){var bt,Mt=1&U,Gt=2&U,te=4&U;if(Z&&(bt=ct?Z(T,ot,ct,gt):Z(T)),bt!==void 0)return bt;if(!ge(T))return T;var Zt=Pt(T);if(Zt){if(bt=Yn(T),!Mt)return Jr(T,bt)}else{var ye=Io(T),We=ye=="[object Function]"||ye=="[object GeneratorFunction]";if(ve(T))return Fr(T,Mt);if(ye=="[object Object]"||ye=="[object Arguments]"||We&&!ct){if(bt=Gt||We?{}:fo(T),!Mt)return Gt?La(T,sr(bt,T)):li(T,Dt(bt,T))}else{if(!Xa[ye])return ct?T:{};bt=eo(T,ye,Mt)}}gt||(gt=new Wn);var wr=gt.get(T);if(wr)return wr;gt.set(T,bt),Jo(T)?T.forEach(function(tr){bt.add(v(tr,U,Z,tr,T,gt))}):No(T)&&T.forEach(function(tr,Je){bt.set(Je,v(tr,U,Z,Je,T,gt))});var $e=Zt?void 0:(te?Gt?To:so:Gt?De:me)(T);return Dn($e||T,function(tr,Je){$e&&(tr=T[Je=tr]),ft(bt,Je,v(tr,U,Z,Je,T,gt))}),bt},iu=function(v){return As(v,4)},Xi=function(v){return function(){return v}},os=function(v){return function(T,U,Z){for(var ot=-1,ct=Object(T),gt=Z(T),bt=gt.length;bt--;){var Mt=gt[v?bt:++ot];if(U(ct[Mt],Mt,ct)===!1)break}return T}}(),Eo=function(v,T){return v&&os(v,T,me)},Yi=function(v,T){return function(U,Z){if(U==null)return U;if(!Vn(U))return v(U,Z);for(var ot=U.length,ct=T?ot:-1,gt=Object(U);(T?ct--:++ct<ot)&&Z(gt[ct],ct,gt)!==!1;);return U}}(Eo),co=function(v){return v},pa=function(v){return typeof v=="function"?v:co},ja=function(v,T){return(Pt(v)?Dn:Yi)(v,pa(T))},yi=ja,no=function(v,T){var U=[];return Yi(v,function(Z,ot,ct){T(Z,ot,ct)&&U.push(Z)}),U},ki=function(v){return this.__data__.set(v,"__lodash_hash_undefined__"),this},Ki=function(v){return this.__data__.has(v)};function Yo(v){var T=-1,U=v==null?0:v.length;for(this.__data__=new Hn;++T<U;)this.add(v[T])}Yo.prototype.add=Yo.prototype.push=ki,Yo.prototype.has=Ki;var wo=Yo,ts=function(v,T){for(var U=-1,Z=v==null?0:v.length;++U<Z;)if(T(v[U],U,v))return!0;return!1},lo=function(v,T){return v.has(T)},Rs=function(v,T,U,Z,ot,ct){var gt=1&U,bt=v.length,Mt=T.length;if(bt!=Mt&&!(gt&&Mt>bt))return!1;var Gt=ct.get(v),te=ct.get(T);if(Gt&&te)return Gt==T&&te==v;var Zt=-1,ye=!0,We=2&U?new wo:void 0;for(ct.set(v,T),ct.set(T,v);++Zt<bt;){var wr=v[Zt],$e=T[Zt];if(Z)var tr=gt?Z($e,wr,Zt,T,v,ct):Z(wr,$e,Zt,v,T,ct);if(tr!==void 0){if(tr)continue;ye=!1;break}if(We){if(!ts(T,function(Je,jr){if(!lo(We,jr)&&(wr===Je||ot(wr,Je,U,Z,ct)))return We.push(jr)})){ye=!1;break}}else if(wr!==$e&&!ot(wr,$e,U,Z,ct)){ye=!1;break}}return ct.delete(v),ct.delete(T),ye},ou=function(v){var T=-1,U=Array(v.size);return v.forEach(function(Z,ot){U[++T]=[ot,Z]}),U},Cs=function(v){var T=-1,U=Array(v.size);return v.forEach(function(Z){U[++T]=Z}),U},ci=Ot?Ot.prototype:void 0,Po=ci?ci.valueOf:void 0,Wu=function(v,T,U,Z,ot,ct,gt){switch(U){case"[object DataView]":if(v.byteLength!=T.byteLength||v.byteOffset!=T.byteOffset)return!1;v=v.buffer,T=T.buffer;case"[object ArrayBuffer]":return!(v.byteLength!=T.byteLength||!ct(new So(v),new So(T)));case"[object Boolean]":case"[object Date]":case"[object Number]":return _(+v,+T);case"[object Error]":return v.name==T.name&&v.message==T.message;case"[object RegExp]":case"[object String]":return v==T+"";case"[object Map]":var bt=ou;case"[object Set]":var Mt=1&Z;if(bt||(bt=Cs),v.size!=T.size&&!Mt)return!1;var Gt=gt.get(v);if(Gt)return Gt==T;Z|=2,gt.set(v,T);var te=Rs(bt(v),bt(T),Z,ot,ct,gt);return gt.delete(v),te;case"[object Symbol]":if(Po)return Po.call(v)==Po.call(T)}return!1},ho=Object.prototype.hasOwnProperty,Bs=function(v,T,U,Z,ot,ct){var gt=1&U,bt=so(v),Mt=bt.length;if(Mt!=so(T).length&&!gt)return!1;for(var Gt=Mt;Gt--;){var te=bt[Gt];if(!(gt?te in T:ho.call(T,te)))return!1}var Zt=ct.get(v),ye=ct.get(T);if(Zt&&ye)return Zt==T&&ye==v;var We=!0;ct.set(v,T),ct.set(T,v);for(var wr=gt;++Gt<Mt;){var $e=v[te=bt[Gt]],tr=T[te];if(Z)var Je=gt?Z(tr,$e,te,T,v,ct):Z($e,tr,te,v,T,ct);if(!(Je===void 0?$e===tr||ot($e,tr,U,Z,ct):Je)){We=!1;break}wr||(wr=te=="constructor")}if(We&&!wr){var jr=v.constructor,hn=T.constructor;jr==hn||!("constructor"in v)||!("constructor"in T)||typeof jr=="function"&&jr instanceof jr&&typeof hn=="function"&&hn instanceof hn||(We=!1)}return ct.delete(v),ct.delete(T),We},Ts=Object.prototype.hasOwnProperty,Vo=function(v,T,U,Z,ot,ct){var gt=Pt(v),bt=Pt(T),Mt=gt?"[object Array]":Io(v),Gt=bt?"[object Array]":Io(T),te=(Mt=Mt=="[object Arguments]"?"[object Object]":Mt)=="[object Object]",Zt=(Gt=Gt=="[object Arguments]"?"[object Object]":Gt)=="[object Object]",ye=Mt==Gt;if(ye&&ve(v)){if(!ve(T))return!1;gt=!0,te=!1}if(ye&&!te)return ct||(ct=new Wn),gt||on(v)?Rs(v,T,U,Z,ot,ct):Wu(v,T,Mt,U,Z,ot,ct);if(!(1&U)){var We=te&&Ts.call(v,"__wrapped__"),wr=Zt&&Ts.call(T,"__wrapped__");if(We||wr){var $e=We?v.value():v,tr=wr?T.value():T;return ct||(ct=new Wn),ot($e,tr,U,Z,ct)}}return!!ye&&(ct||(ct=new Wn),Bs(v,T,U,Z,ot,ct))},Fs=function v(T,U,Z,ot,ct){return T===U||(T==null||U==null||!M(T)&&!M(U)?T!=T&&U!=U:Vo(T,U,Z,ot,v,ct))},ss=function(v,T,U,Z){var ot=U.length,ct=ot,gt=!Z;if(v==null)return!ct;for(v=Object(v);ot--;){var bt=U[ot];if(gt&&bt[2]?bt[1]!==v[bt[0]]:!(bt[0]in v))return!1}for(;++ot<ct;){var Mt=(bt=U[ot])[0],Gt=v[Mt],te=bt[1];if(gt&&bt[2]){if(Gt===void 0&&!(Mt in v))return!1}else{var Zt=new Wn;if(Z)var ye=Z(Gt,te,Mt,v,T,Zt);if(!(ye===void 0?Fs(te,Gt,3,Z,Zt):ye))return!1}}return!0},jo=function(v){return v==v&&!ge(v)},us=function(v){for(var T=me(v),U=T.length;U--;){var Z=T[U],ot=v[Z];T[U]=[Z,ot,jo(ot)]}return T},su=function(v,T){return function(U){return U!=null&&U[v]===T&&(T!==void 0||v in Object(U))}},Gs=function(v){var T=us(v);return T.length==1&&T[0][2]?su(T[0][0],T[0][1]):function(U){return U===v||ss(U,v,T)}},fs=function(v){return typeof v=="symbol"||M(v)&&$t(v)=="[object Symbol]"},Tt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,jt=/^\w*$/,ze=function(v,T){if(Pt(v))return!1;var U=typeof v;return!(U!="number"&&U!="symbol"&&U!="boolean"&&v!=null&&!fs(v))||jt.test(v)||!Tt.test(v)||T!=null&&v in Object(T)};function Ze(v,T){if(typeof v!="function"||T!=null&&typeof T!="function")throw new TypeError("Expected a function");var U=function(){var Z=arguments,ot=T?T.apply(this,Z):Z[0],ct=U.cache;if(ct.has(ot))return ct.get(ot);var gt=v.apply(this,Z);return U.cache=ct.set(ot,gt)||ct,gt};return U.cache=new(Ze.Cache||Hn),U}Ze.Cache=Hn;var Cr=Ze,cn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,mn=/\\(\\)?/g,aa=function(v){var T=Cr(v,function(Z){return U.size===500&&U.clear(),Z}),U=T.cache;return T}(function(v){var T=[];return v.charCodeAt(0)===46&&T.push(""),v.replace(cn,function(U,Z,ot,ct){T.push(ot?ct.replace(mn,"$1"):Z||U)}),T}),ai=function(v,T){for(var U=-1,Z=v==null?0:v.length,ot=Array(Z);++U<Z;)ot[U]=T(v[U],U,v);return ot},Zi=Ot?Ot.prototype:void 0,ao=Zi?Zi.toString:void 0,zs=function v(T){if(typeof T=="string")return T;if(Pt(T))return ai(T,v)+"";if(fs(T))return ao?ao.call(T):"";var U=T+"";return U=="0"&&1/T==-1/0?"-0":U},Mu=function(v){return v==null?"":zs(v)},Ri=function(v,T){return Pt(v)?v:ze(v,T)?[v]:aa(Mu(v))},vo=function(v){if(typeof v=="string"||fs(v))return v;var T=v+"";return T=="0"&&1/v==-1/0?"-0":T},qs=function(v,T){for(var U=0,Z=(T=Ri(T,v)).length;v!=null&&U<Z;)v=v[vo(T[U++])];return U&&U==Z?v:void 0},Xu=function(v,T,U){var Z=v==null?void 0:qs(v,T);return Z===void 0?U:Z},Au=function(v,T){return v!=null&&T in Object(v)},uu=function(v,T,U){for(var Z=-1,ot=(T=Ri(T,v)).length,ct=!1;++Z<ot;){var gt=vo(T[Z]);if(!(ct=v!=null&&U(v,gt)))break;v=v[gt]}return ct||++Z!=ot?ct:!!(ot=v==null?0:v.length)&&ir(ot)&&br(gt,ot)&&(Pt(v)||wt(v))},Qs=function(v,T){return v!=null&&uu(v,T,Au)},fu=function(v,T){return ze(v)&&jo(T)?su(vo(v),T):function(U){var Z=Xu(U,v);return Z===void 0&&Z===T?Qs(U,v):Fs(T,Z,3)}},Is=function(v){return function(T){return T==null?void 0:T[v]}},Js=function(v){return function(T){return qs(T,v)}},cs=function(v){return ze(v)?Is(vo(v)):Js(v)},Mo=function(v){return typeof v=="function"?v:v==null?co:typeof v=="object"?Pt(v)?fu(v[0],v[1]):Gs(v):cs(v)},rf=function(v,T){return(Pt(v)?Pn:no)(v,Mo(T))},kf=Object.prototype.hasOwnProperty,Rf=function(v,T){return v!=null&&kf.call(v,T)},Os=function(v,T){return v!=null&&uu(v,T,Rf)},Bf=Object.prototype.hasOwnProperty,h=function(v){if(v==null)return!0;if(Vn(v)&&(Pt(v)||typeof v=="string"||typeof v.splice=="function"||ve(v)||on(v)||wt(v)))return!v.length;var T=Io(v);if(T=="[object Map]"||T=="[object Set]")return!v.size;if(Rn(v))return!an(v).length;for(var U in v)if(Bf.call(v,U))return!1;return!0},D=function(v){return v===void 0},vt=function(v,T){var U=-1,Z=Vn(v)?Array(v.length):[];return Yi(v,function(ot,ct,gt){Z[++U]=T(ot,ct,gt)}),Z},Et=function(v,T){return(Pt(v)?ai:vt)(v,Mo(T))},Lt=function(v,T,U,Z){var ot=-1,ct=v==null?0:v.length;for(Z&&ct&&(U=v[++ot]);++ot<ct;)U=T(U,v[ot],ot,v);return U},Xt=function(v,T,U,Z,ot){return ot(v,function(ct,gt,bt){U=Z?(Z=!1,ct):T(U,ct,gt,bt)}),U},Vt=function(v,T,U){var Z=Pt(v)?Lt:Xt,ot=arguments.length<3;return Z(v,Mo(T),U,ot,Yi)},ue=function(v){return typeof v=="string"||!Pt(v)&&M(v)&&$t(v)=="[object String]"},he=Is("length"),Ce=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),Ye=function(v){return Ce.test(v)},yr="[\\ud800-\\udfff]",xr="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",pr="\\ud83c[\\udffb-\\udfff]",Zr="[^\\ud800-\\udfff]",qr="(?:\\ud83c[\\udde6-\\uddff]){2}",Tr="[\\ud800-\\udbff][\\udc00-\\udfff]",_n="(?:"+xr+"|"+pr+")?",Ea="[\\ufe0e\\ufe0f]?"+_n+("(?:\\u200d(?:"+[Zr,qr,Tr].join("|")+")[\\ufe0e\\ufe0f]?"+_n+")*"),wa="(?:"+[Zr+xr+"?",xr,qr,Tr,yr].join("|")+")",ha=RegExp(pr+"(?="+pr+")|"+wa+Ea,"g"),qn=function(v){for(var T=ha.lastIndex=0;ha.test(v);)++T;return T},sa=function(v){return Ye(v)?qn(v):he(v)},Ni=function(v){if(v==null)return 0;if(Vn(v))return ue(v)?sa(v):v.length;var T=Io(v);return T=="[object Map]"||T=="[object Set]"?v.size:an(v).length},Ci=function(v,T,U){var Z=Pt(v),ot=Z||ve(v)||on(v);if(T=Mo(T),U==null){var ct=v&&v.constructor;U=ot?Z?new ct:[]:ge(v)&&er(ct)?ei(fi(v)):{}}return(ot?Dn:Eo)(v,function(gt,bt,Mt){return T(U,gt,bt,Mt)}),U},_i=Ot?Ot.isConcatSpreadable:void 0,Ti=function(v){return Pt(v)||wt(v)||!!(_i&&v&&v[_i])},Ii=function v(T,U,Z,ot,ct){var gt=-1,bt=T.length;for(Z||(Z=Ti),ct||(ct=[]);++gt<bt;){var Mt=T[gt];U>0&&Z(Mt)?U>1?v(Mt,U-1,Z,ot,ct):ta(ct,Mt):ot||(ct[ct.length]=Mt)}return ct},Bi=function(v,T,U){switch(U.length){case 0:return v.call(T);case 1:return v.call(T,U[0]);case 2:return v.call(T,U[0],U[1]);case 3:return v.call(T,U[0],U[1],U[2])}return v.apply(T,U)},$i=Math.max,za=function(v,T,U){return T=$i(T===void 0?v.length-1:T,0),function(){for(var Z=arguments,ot=-1,ct=$i(Z.length-T,0),gt=Array(ct);++ot<ct;)gt[ot]=Z[T+ot];ot=-1;for(var bt=Array(T+1);++ot<T;)bt[ot]=Z[ot];return bt[T]=U(gt),Bi(v,this,bt)}},ii=Cn?function(v,T){return Cn(v,"toString",{configurable:!0,enumerable:!1,value:Xi(T),writable:!0})}:co,ls=Date.now,ys=function(v){var T=0,U=0;return function(){var Z=ls(),ot=16-(Z-U);if(U=Z,ot>0){if(++T>=800)return arguments[0]}else T=0;return v.apply(void 0,arguments)}}(ii),ko=function(v,T){return ys(za(v,T,co),v+"")},Cu=function(v,T,U,Z){for(var ot=v.length,ct=U+(Z?1:-1);Z?ct--:++ct<ot;)if(T(v[ct],ct,v))return ct;return-1},Ff=function(v){return v!=v},xc=function(v,T,U){for(var Z=U-1,ot=v.length;++Z<ot;)if(v[Z]===T)return Z;return-1},bc=function(v,T,U){return T==T?xc(v,T,U):Cu(v,Ff,U)},Ec=function(v,T){return!!(v!=null&&v.length)&&bc(v,T,0)>-1},Gf=function(v,T,U){for(var Z=-1,ot=v==null?0:v.length;++Z<ot;)if(U(T,v[Z]))return!0;return!1},zf=function(){},wc=Hi&&1/Cs(new Hi([,-0]))[1]==1/0?function(v){return new Hi(v)}:zf,nf=function(v,T,U){var Z=-1,ot=Ec,ct=v.length,gt=!0,bt=[],Mt=bt;if(U)gt=!1,ot=Gf;else if(ct>=200){var Gt=T?null:wc(v);if(Gt)return Cs(Gt);gt=!1,ot=lo,Mt=new wo}else Mt=T?[]:bt;t:for(;++Z<ct;){var te=v[Z],Zt=T?T(te):te;if(te=U||te!==0?te:0,gt&&Zt==Zt){for(var ye=Mt.length;ye--;)if(Mt[ye]===Zt)continue t;T&&Mt.push(Zt),bt.push(te)}else ot(Mt,Zt,U)||(Mt!==bt&&Mt.push(Zt),bt.push(te))}return bt},af=function(v){return M(v)&&Vn(v)},_c=ko(function(v){return nf(Ii(v,1,af,!0))}),of=function(v,T){return ai(T,function(U){return v[U]})},cu,Sc=function(v){return v==null?[]:of(v,me(v))};try{cu={clone:iu,constant:Xi,each:yi,filter:rf,has:Os,isArray:Pt,isEmpty:h,isFunction:er,isUndefined:D,keys:me,map:Et,reduce:Vt,size:Ni,transform:Ci,union:_c,values:Sc}}catch(v){}cu||(cu=window._);var wn=cu,Tu=Ua;function Ua(v){this._isDirected=!wn.has(v,"directed")||v.directed,this._isMultigraph=!!wn.has(v,"multigraph")&&v.multigraph,this._isCompound=!!wn.has(v,"compound")&&v.compound,this._label=void 0,this._defaultNodeLabelFn=wn.constant(void 0),this._defaultEdgeLabelFn=wn.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function sf(v,T){v[T]?v[T]++:v[T]=1}function Uf(v,T){--v[T]||delete v[T]}function Us(v,T,U,Z){var ot=""+T,ct=""+U;if(!v&&ot>ct){var gt=ot;ot=ct,ct=gt}return ot+""+ct+""+(wn.isUndefined(Z)?"\0":Z)}function Wf(v,T,U,Z){var ot=""+T,ct=""+U;if(!v&&ot>ct){var gt=ot;ot=ct,ct=gt}var bt={v:ot,w:ct};return Z&&(bt.name=Z),bt}function lu(v,T){return Us(v,T.v,T.w,T.name)}Ua.prototype._nodeCount=0,Ua.prototype._edgeCount=0,Ua.prototype.isDirected=function(){return this._isDirected},Ua.prototype.isMultigraph=function(){return this._isMultigraph},Ua.prototype.isCompound=function(){return this._isCompound},Ua.prototype.setGraph=function(v){return this._label=v,this},Ua.prototype.graph=function(){return this._label},Ua.prototype.setDefaultNodeLabel=function(v){return wn.isFunction(v)||(v=wn.constant(v)),this._defaultNodeLabelFn=v,this},Ua.prototype.nodeCount=function(){return this._nodeCount},Ua.prototype.nodes=function(){return wn.keys(this._nodes)},Ua.prototype.sources=function(){var v=this;return wn.filter(this.nodes(),function(T){return wn.isEmpty(v._in[T])})},Ua.prototype.sinks=function(){var v=this;return wn.filter(this.nodes(),function(T){return wn.isEmpty(v._out[T])})},Ua.prototype.setNodes=function(v,T){var U=arguments,Z=this;return wn.each(v,function(ot){U.length>1?Z.setNode(ot,T):Z.setNode(ot)}),this},Ua.prototype.setNode=function(v,T){return wn.has(this._nodes,v)?(arguments.length>1&&(this._nodes[v]=T),this):(this._nodes[v]=arguments.length>1?T:this._defaultNodeLabelFn(v),this._isCompound&&(this._parent[v]="\0",this._children[v]={},this._children["\0"][v]=!0),this._in[v]={},this._preds[v]={},this._out[v]={},this._sucs[v]={},++this._nodeCount,this)},Ua.prototype.node=function(v){return this._nodes[v]},Ua.prototype.hasNode=function(v){return wn.has(this._nodes,v)},Ua.prototype.removeNode=function(v){var T=this;if(wn.has(this._nodes,v)){var U=function(Z){T.removeEdge(T._edgeObjs[Z])};delete this._nodes[v],this._isCompound&&(this._removeFromParentsChildList(v),delete this._parent[v],wn.each(this.children(v),function(Z){T.setParent(Z)}),delete this._children[v]),wn.each(wn.keys(this._in[v]),U),delete this._in[v],delete this._preds[v],wn.each(wn.keys(this._out[v]),U),delete this._out[v],delete this._sucs[v],--this._nodeCount}return this},Ua.prototype.setParent=function(v,T){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(wn.isUndefined(T))T="\0";else{for(var U=T+="";!wn.isUndefined(U);U=this.parent(U))if(U===v)throw new Error("Setting "+T+" as parent of "+v+" would create a cycle");this.setNode(T)}return this.setNode(v),this._removeFromParentsChildList(v),this._parent[v]=T,this._children[T][v]=!0,this},Ua.prototype._removeFromParentsChildList=function(v){delete this._children[this._parent[v]][v]},Ua.prototype.parent=function(v){if(this._isCompound){var T=this._parent[v];if(T!=="\0")return T}},Ua.prototype.children=function(v){if(wn.isUndefined(v)&&(v="\0"),this._isCompound){var T=this._children[v];if(T)return wn.keys(T)}else{if(v==="\0")return this.nodes();if(this.hasNode(v))return[]}},Ua.prototype.predecessors=function(v){var T=this._preds[v];if(T)return wn.keys(T)},Ua.prototype.successors=function(v){var T=this._sucs[v];if(T)return wn.keys(T)},Ua.prototype.neighbors=function(v){var T=this.predecessors(v);if(T)return wn.union(T,this.successors(v))},Ua.prototype.isLeaf=function(v){return(this.isDirected()?this.successors(v):this.neighbors(v)).length===0},Ua.prototype.filterNodes=function(v){var T=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});T.setGraph(this.graph());var U=this;wn.each(this._nodes,function(ct,gt){v(gt)&&T.setNode(gt,ct)}),wn.each(this._edgeObjs,function(ct){T.hasNode(ct.v)&&T.hasNode(ct.w)&&T.setEdge(ct,U.edge(ct))});var Z={};function ot(ct){var gt=U.parent(ct);return gt===void 0||T.hasNode(gt)?(Z[ct]=gt,gt):gt in Z?Z[gt]:ot(gt)}return this._isCompound&&wn.each(T.nodes(),function(ct){T.setParent(ct,ot(ct))}),T},Ua.prototype.setDefaultEdgeLabel=function(v){return wn.isFunction(v)||(v=wn.constant(v)),this._defaultEdgeLabelFn=v,this},Ua.prototype.edgeCount=function(){return this._edgeCount},Ua.prototype.edges=function(){return wn.values(this._edgeObjs)},Ua.prototype.setPath=function(v,T){var U=this,Z=arguments;return wn.reduce(v,function(ot,ct){return Z.length>1?U.setEdge(ot,ct,T):U.setEdge(ot,ct),ct}),this},Ua.prototype.setEdge=function(){var v,T,U,Z,ot=!1,ct=arguments[0];typeof ct=="object"&&ct!==null&&"v"in ct?(v=ct.v,T=ct.w,U=ct.name,arguments.length===2&&(Z=arguments[1],ot=!0)):(v=ct,T=arguments[1],U=arguments[3],arguments.length>2&&(Z=arguments[2],ot=!0)),v=""+v,T=""+T,wn.isUndefined(U)||(U=""+U);var gt=Us(this._isDirected,v,T,U);if(wn.has(this._edgeLabels,gt))return ot&&(this._edgeLabels[gt]=Z),this;if(!wn.isUndefined(U)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(v),this.setNode(T),this._edgeLabels[gt]=ot?Z:this._defaultEdgeLabelFn(v,T,U);var bt=Wf(this._isDirected,v,T,U);return v=bt.v,T=bt.w,Object.freeze(bt),this._edgeObjs[gt]=bt,sf(this._preds[T],v),sf(this._sucs[v],T),this._in[T][gt]=bt,this._out[v][gt]=bt,this._edgeCount++,this},Ua.prototype.edge=function(v,T,U){var Z=arguments.length===1?lu(this._isDirected,arguments[0]):Us(this._isDirected,v,T,U);return this._edgeLabels[Z]},Ua.prototype.hasEdge=function(v,T,U){var Z=arguments.length===1?lu(this._isDirected,arguments[0]):Us(this._isDirected,v,T,U);return wn.has(this._edgeLabels,Z)},Ua.prototype.removeEdge=function(v,T,U){var Z=arguments.length===1?lu(this._isDirected,arguments[0]):Us(this._isDirected,v,T,U),ot=this._edgeObjs[Z];return ot&&(v=ot.v,T=ot.w,delete this._edgeLabels[Z],delete this._edgeObjs[Z],Uf(this._preds[T],v),Uf(this._sucs[v],T),delete this._in[T][Z],delete this._out[v][Z],this._edgeCount--),this},Ua.prototype.inEdges=function(v,T){var U=this._in[v];if(U){var Z=wn.values(U);return T?wn.filter(Z,function(ot){return ot.v===T}):Z}},Ua.prototype.outEdges=function(v,T){var U=this._out[v];if(U){var Z=wn.values(U);return T?wn.filter(Z,function(ot){return ot.w===T}):Z}},Ua.prototype.nodeEdges=function(v,T){var U=this.inEdges(v,T);if(U)return U.concat(this.outEdges(v,T))};var Xf={Graph:Tu,version:"2.1.8"},Yf={write:function(v){var T={options:{directed:v.isDirected(),multigraph:v.isMultigraph(),compound:v.isCompound()},nodes:Vf(v),edges:ms(v)};return wn.isUndefined(v.graph())||(T.value=wn.clone(v.graph())),T},read:function(v){var T=new Tu(v.options).setGraph(v.value);return wn.each(v.nodes,function(U){T.setNode(U.v,U.value),U.parent&&T.setParent(U.v,U.parent)}),wn.each(v.edges,function(U){T.setEdge({v:U.v,w:U.w,name:U.name},U.value)}),T}};function Vf(v){return wn.map(v.nodes(),function(T){var U=v.node(T),Z=v.parent(T),ot={v:T};return wn.isUndefined(U)||(ot.value=U),wn.isUndefined(Z)||(ot.parent=Z),ot})}function ms(v){return wn.map(v.edges(),function(T){var U=v.edge(T),Z={v:T.v,w:T.w};return wn.isUndefined(T.name)||(Z.name=T.name),wn.isUndefined(U)||(Z.value=U),Z})}var jf=function(v){var T,U={},Z=[];function ot(ct){wn.has(U,ct)||(U[ct]=!0,T.push(ct),wn.each(v.successors(ct),ot),wn.each(v.predecessors(ct),ot))}return wn.each(v.nodes(),function(ct){T=[],ot(ct),T.length&&Z.push(T)}),Z},Hf=bi;function bi(){this._arr=[],this._keyIndices={}}bi.prototype.size=function(){return this._arr.length},bi.prototype.keys=function(){return this._arr.map(function(v){return v.key})},bi.prototype.has=function(v){return wn.has(this._keyIndices,v)},bi.prototype.priority=function(v){var T=this._keyIndices[v];if(T!==void 0)return this._arr[T].priority},bi.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},bi.prototype.add=function(v,T){var U=this._keyIndices;if(v=String(v),!wn.has(U,v)){var Z=this._arr,ot=Z.length;return U[v]=ot,Z.push({key:v,priority:T}),this._decrease(ot),!0}return!1},bi.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var v=this._arr.pop();return delete this._keyIndices[v.key],this._heapify(0),v.key},bi.prototype.decrease=function(v,T){var U=this._keyIndices[v];if(T>this._arr[U].priority)throw new Error("New priority is greater than current priority. Key: "+v+" Old: "+this._arr[U].priority+" New: "+T);this._arr[U].priority=T,this._decrease(U)},bi.prototype._heapify=function(v){var T=this._arr,U=2*v,Z=U+1,ot=v;U<T.length&&(ot=T[U].priority<T[ot].priority?U:ot,Z<T.length&&(ot=T[Z].priority<T[ot].priority?Z:ot),ot!==v&&(this._swap(v,ot),this._heapify(ot)))},bi.prototype._decrease=function(v){for(var T,U=this._arr,Z=U[v].priority;v!==0&&!(U[T=v>>1].priority<Z);)this._swap(v,T),v=T},bi.prototype._swap=function(v,T){var U=this._arr,Z=this._keyIndices,ot=U[v],ct=U[T];U[v]=ct,U[T]=ot,Z[ct.key]=v,Z[ot.key]=T};var Yu=function(v,T,U,Z){return function(ot,ct,gt,bt){var Mt,Gt,te={},Zt=new Hf,ye=function(We){var wr=We.v!==Mt?We.v:We.w,$e=te[wr],tr=gt(We),Je=Gt.distance+tr;if(tr<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+We+" Weight: "+tr);Je<$e.distance&&($e.distance=Je,$e.predecessor=Mt,Zt.decrease(wr,Je))};for(ot.nodes().forEach(function(We){var wr=We===ct?0:Number.POSITIVE_INFINITY;te[We]={distance:wr},Zt.add(We,wr)});Zt.size()>0&&(Mt=Zt.removeMin(),(Gt=te[Mt]).distance!==Number.POSITIVE_INFINITY);)bt(Mt).forEach(ye);return te}(v,String(T),U||xs,Z||function(ot){return v.outEdges(ot)})},xs=wn.constant(1),et=function(v,T,U){return wn.transform(v.nodes(),function(Z,ot){Z[ot]=Yu(v,ot,T,U)},{})},pt=function(v){var T=0,U=[],Z={},ot=[];function ct(gt){var bt=Z[gt]={onStack:!0,lowlink:T,index:T++};if(U.push(gt),v.successors(gt).forEach(function(te){wn.has(Z,te)?Z[te].onStack&&(bt.lowlink=Math.min(bt.lowlink,Z[te].index)):(ct(te),bt.lowlink=Math.min(bt.lowlink,Z[te].lowlink))}),bt.lowlink===bt.index){var Mt,Gt=[];do Mt=U.pop(),Z[Mt].onStack=!1,Gt.push(Mt);while(gt!==Mt);ot.push(Gt)}}return v.nodes().forEach(function(gt){wn.has(Z,gt)||ct(gt)}),ot},St=function(v){return wn.filter(pt(v),function(T){return T.length>1||T.length===1&&v.hasEdge(T[0],T[0])})},Ut=function(v,T,U){return function(Z,ot,ct){var gt={},bt=Z.nodes();return bt.forEach(function(Mt){gt[Mt]={},gt[Mt][Mt]={distance:0},bt.forEach(function(Gt){Mt!==Gt&&(gt[Mt][Gt]={distance:Number.POSITIVE_INFINITY})}),ct(Mt).forEach(function(Gt){var te=Gt.v===Mt?Gt.w:Gt.v,Zt=ot(Gt);gt[Mt][te]={distance:Zt,predecessor:Mt}})}),bt.forEach(function(Mt){var Gt=gt[Mt];bt.forEach(function(te){var Zt=gt[te];bt.forEach(function(ye){var We=Zt[Mt],wr=Gt[ye],$e=Zt[ye],tr=We.distance+wr.distance;tr<$e.distance&&($e.distance=tr,$e.predecessor=wr.predecessor)})})}),gt}(v,T||ne,U||function(Z){return v.outEdges(Z)})},ne=wn.constant(1),Be=Ue;function Ue(v){var T={},U={},Z=[];if(wn.each(v.sinks(),function ot(ct){if(wn.has(U,ct))throw new ur;wn.has(T,ct)||(U[ct]=!0,T[ct]=!0,wn.each(v.predecessors(ct),ot),delete U[ct],Z.push(ct))}),wn.size(T)!==v.nodeCount())throw new ur;return Z}function ur(){}Ue.CycleException=ur,ur.prototype=new Error;var Br=function(v,T,U){wn.isArray(T)||(T=[T]);var Z=(v.isDirected()?v.successors:v.neighbors).bind(v),ot=[],ct={};return wn.each(T,function(gt){if(!v.hasNode(gt))throw new Error("Graph does not have node: "+gt);Hr(v,gt,U==="post",ct,Z,ot)}),ot};function Hr(v,T,U,Z,ot,ct){wn.has(Z,T)||(Z[T]=!0,U||ct.push(T),wn.each(ot(T),function(gt){Hr(v,gt,U,Z,ot,ct)}),U&&ct.push(T))}var xn,Tn={Graph:Xf.Graph,json:Yf,alg:{components:jf,dijkstra:Yu,dijkstraAll:et,findCycles:St,floydWarshall:Ut,isAcyclic:function(v){try{Be(v)}catch(T){if(T instanceof Be.CycleException)return!1;throw T}return!0},postorder:function(v,T){return Br(v,T,"post")},preorder:function(v,T){return Br(v,T,"pre")},prim:function(v,T){var U,Z=new Tu,ot={},ct=new Hf;function gt(Mt){var Gt=Mt.v===U?Mt.w:Mt.v,te=ct.priority(Gt);if(te!==void 0){var Zt=T(Mt);Zt<te&&(ot[Gt]=U,ct.decrease(Gt,Zt))}}if(v.nodeCount()===0)return Z;wn.each(v.nodes(),function(Mt){ct.add(Mt,Number.POSITIVE_INFINITY),Z.setNode(Mt)}),ct.decrease(v.nodes()[0],0);for(var bt=!1;ct.size()>0;){if(U=ct.removeMin(),wn.has(ot,U))Z.setEdge(U,ot[U]);else{if(bt)throw new Error("Input graph is not connected: "+v);bt=!0}v.nodeEdges(U).forEach(gt)}return Z},tarjan:pt,topsort:Be},version:Xf.version};try{xn=Tn}catch(v){}xn||(xn=window.graphlib);var vn=xn,fa=function(v){return As(v,5)},da=function(v,T,U){if(!ge(U))return!1;var Z=typeof T;return!!(Z=="number"?Vn(U)&&br(T,U.length):Z=="string"&&T in U)&&_(U[T],v)},ya=Object.prototype,na=ya.hasOwnProperty,Da=ko(function(v,T){v=Object(v);var U=-1,Z=T.length,ot=Z>2?T[2]:void 0;for(ot&&da(T[0],T[1],ot)&&(Z=1);++U<Z;)for(var ct=T[U],gt=De(ct),bt=-1,Mt=gt.length;++bt<Mt;){var Gt=gt[bt],te=v[Gt];(te===void 0||_(te,ya[Gt])&&!na.call(v,Gt))&&(v[Gt]=ct[Gt])}return v}),Fn=function(v){return function(T,U,Z){var ot=Object(T);if(!Vn(T)){var ct=Mo(U);T=me(T),U=function(bt){return ct(ot[bt],bt,ot)}}var gt=v(T,U,Z);return gt>-1?ot[ct?T[gt]:gt]:void 0}},Ia=/^\s+|\s+$/g,ia=/^[-+]0x[0-9a-f]+$/i,Un=/^0b[01]+$/i,Ma=/^0o[0-7]+$/i,qa=parseInt,ri=function(v){if(typeof v=="number")return v;if(fs(v))return NaN;if(ge(v)){var T=typeof v.valueOf=="function"?v.valueOf():v;v=ge(T)?T+"":T}if(typeof v!="string")return v===0?v:+v;v=v.replace(Ia,"");var U=Un.test(v);return U||Ma.test(v)?qa(v.slice(2),U?2:8):ia.test(v)?NaN:+v},Ba=function(v){return v?(v=ri(v))===1/0||v===-1/0?17976931348623157e292*(v<0?-1:1):v==v?v:0:v===0?v:0},Fa=function(v){var T=Ba(v),U=T%1;return T==T?U?T-U:T:0},oi=Math.max,Oi=Fn(function(v,T,U){var Z=v==null?0:v.length;if(!Z)return-1;var ot=U==null?0:Fa(U);return ot<0&&(ot=oi(Z+ot,0)),Cu(v,Mo(T),ot)}),Ei=function(v){return v!=null&&v.length?Ii(v,1):[]},bs=function(v,T){return v==null?v:os(v,pa(T),De)},uf=function(v){var T=v==null?0:v.length;return T?v[T-1]:void 0},tu=function(v,T){var U={};return T=Mo(T),Eo(v,function(Z,ot,ct){la(U,ot,T(Z,ot,ct))}),U},Ws=function(v,T,U){for(var Z=-1,ot=v.length;++Z<ot;){var ct=v[Z],gt=T(ct);if(gt!=null&&(bt===void 0?gt==gt&&!fs(gt):U(gt,bt)))var bt=gt,Mt=ct}return Mt},hu=function(v,T){return v>T},ff=function(v){return v&&v.length?Ws(v,co,hu):void 0},vu=function(v,T,U){(U!==void 0&&!_(v[T],U)||U===void 0&&!(T in v))&&la(v,T,U)},el=Function.prototype,Mc=Object.prototype,Vu=el.toString,cf=Mc.hasOwnProperty,lf=Vu.call(Object),Es=function(v){if(!M(v)||$t(v)!="[object Object]")return!1;var T=fi(v);if(T===null)return!0;var U=cf.call(T,"constructor")&&T.constructor;return typeof U=="function"&&U instanceof U&&Vu.call(U)==lf},eu=function(v,T){if((T!=="constructor"||typeof v[T]!="function")&&T!="__proto__")return v[T]},Xs=function(v){return nt(v,De(v))},ju=function(v,T,U,Z,ot,ct,gt){var bt=eu(v,U),Mt=eu(T,U),Gt=gt.get(Mt);if(Gt)vu(v,U,Gt);else{var te=ct?ct(bt,Mt,U+"",v,T,gt):void 0,Zt=te===void 0;if(Zt){var ye=Pt(Mt),We=!ye&&ve(Mt),wr=!ye&&!We&&on(Mt);te=Mt,ye||We||wr?Pt(bt)?te=bt:af(bt)?te=Jr(bt):We?(Zt=!1,te=Fr(Mt,!0)):wr?(Zt=!1,te=ps(Mt,!0)):te=[]:Es(Mt)||wt(Mt)?(te=bt,wt(bt)?te=Xs(bt):ge(bt)&&!er(bt)||(te=fo(Mt))):Zt=!1}Zt&&(gt.set(Mt,te),ot(te,Mt,Z,ct,gt),gt.delete(Mt)),vu(v,U,te)}},go=function v(T,U,Z,ot,ct){T!==U&&os(U,function(gt,bt){if(ct||(ct=new Wn),ge(gt))ju(T,U,bt,Z,v,ot,ct);else{var Mt=ot?ot(eu(T,bt),gt,bt+"",T,U,ct):void 0;Mt===void 0&&(Mt=gt),vu(T,bt,Mt)}},De)},Ls=function(v){return ko(function(T,U){var Z=-1,ot=U.length,ct=ot>1?U[ot-1]:void 0,gt=ot>2?U[2]:void 0;for(ct=v.length>3&&typeof ct=="function"?(ot--,ct):void 0,gt&&da(U[0],U[1],gt)&&(ct=ot<3?void 0:ct,ot=1),T=Object(T);++Z<ot;){var bt=U[Z];bt&&v(T,bt,Z,ct)}return T})}(function(v,T,U){go(v,T,U)}),Ys=function(v,T){return v<T},hf=function(v){return v&&v.length?Ws(v,co,Ys):void 0},Gl=function(v,T){return v&&v.length?Ws(v,Mo(T),Ys):void 0},vf=function(){return dt.Date.now()},rl=function(v,T,U,Z){if(!ge(v))return v;for(var ot=-1,ct=(T=Ri(T,v)).length,gt=ct-1,bt=v;bt!=null&&++ot<ct;){var Mt=vo(T[ot]),Gt=U;if(Mt==="__proto__"||Mt==="constructor"||Mt==="prototype")return v;if(ot!=gt){var te=bt[Mt];(Gt=Z?Z(te,Mt,bt):void 0)===void 0&&(Gt=ge(te)?te:br(T[ot+1])?[]:{})}ft(bt,Mt,Gt),bt=bt[Mt]}return v},nl=function(v,T,U){for(var Z=-1,ot=T.length,ct={};++Z<ot;){var gt=T[Z],bt=qs(v,gt);U(bt,gt)&&rl(ct,Ri(gt,v),bt)}return ct},al=function(v,T){return nl(v,T,function(U,Z){return Qs(v,Z)})},il=function(v){return ys(za(v,void 0,Ei),v+"")}(function(v,T){return v==null?{}:al(v,T)}),Ac=Math.ceil,Kf=Math.max,zl=function(v,T,U,Z){for(var ot=-1,ct=Kf(Ac((T-v)/(U||1)),0),gt=Array(ct);ct--;)gt[Z?ct:++ot]=v,v+=U;return gt},Ul=function(v){return function(T,U,Z){return Z&&typeof Z!="number"&&da(T,U,Z)&&(U=Z=void 0),T=Ba(T),U===void 0?(U=T,T=0):U=Ba(U),Z=Z===void 0?T<U?1:-1:Ba(Z),zl(T,U,Z,v)}}(),ol=function(v,T){var U=v.length;for(v.sort(T);U--;)v[U]=v[U].value;return v},df=function(v,T){if(v!==T){var U=v!==void 0,Z=v===null,ot=v==v,ct=fs(v),gt=T!==void 0,bt=T===null,Mt=T==T,Gt=fs(T);if(!bt&&!Gt&&!ct&&v>T||ct&&gt&&Mt&&!bt&&!Gt||Z&&gt&&Mt||!U&&Mt||!ot)return 1;if(!Z&&!ct&&!Gt&&v<T||Gt&&U&&ot&&!Z&&!ct||bt&&U&&ot||!gt&&ot||!Mt)return-1}return 0},sl=function(v,T,U){for(var Z=-1,ot=v.criteria,ct=T.criteria,gt=ot.length,bt=U.length;++Z<gt;){var Mt=df(ot[Z],ct[Z]);if(Mt)return Z>=bt?Mt:Mt*(U[Z]=="desc"?-1:1)}return v.index-T.index},gf=function(v,T,U){T=T.length?ai(T,function(ct){return Pt(ct)?function(gt){return qs(gt,ct.length===1?ct[0]:ct)}:ct}):[co];var Z=-1;T=ai(T,Xe(Mo));var ot=vt(v,function(ct,gt,bt){return{criteria:ai(T,function(Mt){return Mt(ct)}),index:++Z,value:ct}});return ol(ot,function(ct,gt){return sl(ct,gt,U)})},ul=ko(function(v,T){if(v==null)return[];var U=T.length;return U>1&&da(v,T[0],T[1])?T=[]:U>2&&da(T[0],T[1],T[2])&&(T=[T[0]]),gf(v,Ii(T,1),[])}),Zf=0,es=function(v){var T=++Zf;return Mu(v)+T},fl=function(v,T,U){for(var Z=-1,ot=v.length,ct=T.length,gt={};++Z<ot;){var bt=Z<ct?T[Z]:void 0;U(gt,v[Z],bt)}return gt},$f,Cc=function(v,T){return fl(v||[],T||[],ft)};try{$f={cloneDeep:fa,constant:Xi,defaults:Da,each:yi,filter:rf,find:Oi,flatten:Ei,forEach:ja,forIn:bs,has:Os,isUndefined:D,last:uf,map:Et,mapValues:tu,max:ff,merge:Ls,min:hf,minBy:Gl,now:vf,pick:il,range:Ul,reduce:Vt,sortBy:ul,uniqueId:es,values:Sc,zipObject:Cc}}catch(v){}$f||($f=window._);var Ne=$f,Iu=Ds;function Ds(){var v={};v._next=v._prev=v,this._sentinel=v}function qf(v){v._prev._next=v._next,v._next._prev=v._prev,delete v._next,delete v._prev}function cl(v,T){if(v!=="_next"&&v!=="_prev")return T}Ds.prototype.dequeue=function(){var v=this._sentinel,T=v._prev;if(T!==v)return qf(T),T},Ds.prototype.enqueue=function(v){var T=this._sentinel;v._prev&&v._next&&qf(v),v._next=T._next,T._next._prev=v,T._next=v,v._prev=T},Ds.prototype.toString=function(){for(var v=[],T=this._sentinel,U=T._prev;U!==T;)v.push(JSON.stringify(U,cl)),U=U._prev;return"["+v.join(", ")+"]"};var ll=vn.Graph,Ns=function(v,T){if(v.nodeCount()<=1)return[];var U=function(ot,ct){var gt=new ll,bt=0,Mt=0;Ne.forEach(ot.nodes(),function(Zt){gt.setNode(Zt,{v:Zt,in:0,out:0})}),Ne.forEach(ot.edges(),function(Zt){var ye=gt.edge(Zt.v,Zt.w)||0,We=ct(Zt),wr=ye+We;gt.setEdge(Zt.v,Zt.w,wr),Mt=Math.max(Mt,gt.node(Zt.v).out+=We),bt=Math.max(bt,gt.node(Zt.w).in+=We)});var Gt=Ne.range(Mt+bt+3).map(function(){return new Iu}),te=bt+1;return Ne.forEach(gt.nodes(),function(Zt){pf(Gt,te,gt.node(Zt))}),{graph:gt,buckets:Gt,zeroIdx:te}}(v,T||hl),Z=function(ot,ct,gt){for(var bt,Mt=[],Gt=ct[ct.length-1],te=ct[0];ot.nodeCount();){for(;bt=te.dequeue();)Ou(ot,ct,gt,bt);for(;bt=Gt.dequeue();)Ou(ot,ct,gt,bt);if(ot.nodeCount()){for(var Zt=ct.length-2;Zt>0;--Zt)if(bt=ct[Zt].dequeue()){Mt=Mt.concat(Ou(ot,ct,gt,bt,!0));break}}}return Mt}(U.graph,U.buckets,U.zeroIdx);return Ne.flatten(Ne.map(Z,function(ot){return v.outEdges(ot.v,ot.w)}),!0)},hl=Ne.constant(1);function Ou(v,T,U,Z,ot){var ct=ot?[]:void 0;return Ne.forEach(v.inEdges(Z.v),function(gt){var bt=v.edge(gt),Mt=v.node(gt.v);ot&&ct.push({v:gt.v,w:gt.w}),Mt.out-=bt,pf(T,U,Mt)}),Ne.forEach(v.outEdges(Z.v),function(gt){var bt=v.edge(gt),Mt=gt.w,Gt=v.node(Mt);Gt.in-=bt,pf(T,U,Gt)}),v.removeNode(Z.v),ct}function pf(v,T,U){U.out?U.in?v[U.out-U.in+T].enqueue(U):v[v.length-1].enqueue(U):v[0].enqueue(U)}var Tc={run:function(v){var T=v.graph().acyclicer==="greedy"?Ns(v,function(U){return function(Z){return U.edge(Z).weight}}(v)):function(U){var Z=[],ot={},ct={};function gt(bt){Ne.has(ct,bt)||(ct[bt]=!0,ot[bt]=!0,Ne.forEach(U.outEdges(bt),function(Mt){Ne.has(ot,Mt.w)?Z.push(Mt):gt(Mt.w)}),delete ot[bt])}return Ne.forEach(U.nodes(),gt),Z}(v);Ne.forEach(T,function(U){var Z=v.edge(U);v.removeEdge(U),Z.forwardName=U.name,Z.reversed=!0,v.setEdge(U.w,U.v,Z,Ne.uniqueId("rev"))})},undo:function(v){Ne.forEach(v.edges(),function(T){var U=v.edge(T);if(U.reversed){v.removeEdge(T);var Z=U.forwardName;delete U.reversed,delete U.forwardName,v.setEdge(T.w,T.v,U,Z)}})}},Ic=vn.Graph,po={addDummyNode:Lu,simplify:function(v){var T=new Ic().setGraph(v.graph());return Ne.forEach(v.nodes(),function(U){T.setNode(U,v.node(U))}),Ne.forEach(v.edges(),function(U){var Z=T.edge(U.v,U.w)||{weight:0,minlen:1},ot=v.edge(U);T.setEdge(U.v,U.w,{weight:Z.weight+ot.weight,minlen:Math.max(Z.minlen,ot.minlen)})}),T},asNonCompoundGraph:function(v){var T=new Ic({multigraph:v.isMultigraph()}).setGraph(v.graph());return Ne.forEach(v.nodes(),function(U){v.children(U).length||T.setNode(U,v.node(U))}),Ne.forEach(v.edges(),function(U){T.setEdge(U,v.edge(U))}),T},successorWeights:function(v){var T=Ne.map(v.nodes(),function(U){var Z={};return Ne.forEach(v.outEdges(U),function(ot){Z[ot.w]=(Z[ot.w]||0)+v.edge(ot).weight}),Z});return Ne.zipObject(v.nodes(),T)},predecessorWeights:function(v){var T=Ne.map(v.nodes(),function(U){var Z={};return Ne.forEach(v.inEdges(U),function(ot){Z[ot.v]=(Z[ot.v]||0)+v.edge(ot).weight}),Z});return Ne.zipObject(v.nodes(),T)},intersectRect:function(v,T){var U,Z,ot=v.x,ct=v.y,gt=T.x-ot,bt=T.y-ct,Mt=v.width/2,Gt=v.height/2;if(!gt&&!bt)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(bt)*Mt>Math.abs(gt)*Gt?(bt<0&&(Gt=-Gt),U=Gt*gt/bt,Z=Gt):(gt<0&&(Mt=-Mt),U=Mt,Z=Mt*bt/gt),{x:ot+U,y:ct+Z}},buildLayerMatrix:function(v){var T=Ne.map(Ne.range(Oc(v)+1),function(){return[]});return Ne.forEach(v.nodes(),function(U){var Z=v.node(U),ot=Z.rank;Ne.isUndefined(ot)||(T[ot][Z.order]=U)}),T},normalizeRanks:function(v){var T=Ne.min(Ne.map(v.nodes(),function(U){return v.node(U).rank}));Ne.forEach(v.nodes(),function(U){var Z=v.node(U);Ne.has(Z,"rank")&&(Z.rank-=T)})},removeEmptyRanks:function(v){var T=Ne.min(Ne.map(v.nodes(),function(ct){return v.node(ct).rank})),U=[];Ne.forEach(v.nodes(),function(ct){var gt=v.node(ct).rank-T;U[gt]||(U[gt]=[]),U[gt].push(ct)});var Z=0,ot=v.graph().nodeRankFactor;Ne.forEach(U,function(ct,gt){Ne.isUndefined(ct)&&gt%ot!=0?--Z:Z&&Ne.forEach(ct,function(bt){v.node(bt).rank+=Z})})},addBorderNode:function(v,T,U,Z){var ot={width:0,height:0};return arguments.length>=4&&(ot.rank=U,ot.order=Z),Lu(v,"border",ot,T)},maxRank:Oc,partition:function(v,T){var U={lhs:[],rhs:[]};return Ne.forEach(v,function(Z){T(Z)?U.lhs.push(Z):U.rhs.push(Z)}),U},time:function(v,T){var U=Ne.now();try{return T()}finally{console.log(v+" time: "+(Ne.now()-U)+"ms")}},notime:function(v,T){return T()}};function Lu(v,T,U,Z){var ot;do ot=Ne.uniqueId(Z);while(v.hasNode(ot));return U.dummy=T,v.setNode(ot,U),ot}function Oc(v){return Ne.max(Ne.map(v.nodes(),function(T){var U=v.node(T).rank;if(!Ne.isUndefined(U))return U}))}var Qf={run:function(v){v.graph().dummyChains=[],Ne.forEach(v.edges(),function(T){(function(U,Z){var ot,ct,gt,bt=Z.v,Mt=U.node(bt).rank,Gt=Z.w,te=U.node(Gt).rank,Zt=Z.name,ye=U.edge(Z),We=ye.labelRank;if(te!==Mt+1){for(U.removeEdge(Z),gt=0,++Mt;Mt<te;++gt,++Mt)ye.points=[],ct={width:0,height:0,edgeLabel:ye,edgeObj:Z,rank:Mt},ot=po.addDummyNode(U,"edge",ct,"_d"),Mt===We&&(ct.width=ye.width,ct.height=ye.height,ct.dummy="edge-label",ct.labelpos=ye.labelpos),U.setEdge(bt,ot,{weight:ye.weight},Zt),gt===0&&U.graph().dummyChains.push(ot),bt=ot;U.setEdge(bt,Gt,{weight:ye.weight},Zt)}})(v,T)})},undo:function(v){Ne.forEach(v.graph().dummyChains,function(T){var U,Z=v.node(T),ot=Z.edgeLabel;for(v.setEdge(Z.edgeObj,ot);Z.dummy;)U=v.successors(T)[0],v.removeNode(T),ot.points.push({x:Z.x,y:Z.y}),Z.dummy==="edge-label"&&(ot.x=Z.x,ot.y=Z.y,ot.width=Z.width,ot.height=Z.height),T=U,Z=v.node(T)})}},du=function(v){var T={};Ne.forEach(v.sources(),function U(Z){var ot=v.node(Z);if(Ne.has(T,Z))return ot.rank;T[Z]=!0;var ct=Ne.min(Ne.map(v.outEdges(Z),function(gt){return U(gt.w)-v.edge(gt).minlen}));return ct!==Number.POSITIVE_INFINITY&&ct!=null||(ct=0),ot.rank=ct})},yf=function(v,T){return v.node(T.w).rank-v.node(T.v).rank-v.edge(T).minlen},Du=vn.Graph,gu=yf,Hu=function(v){var T,U,Z=new Du({directed:!1}),ot=v.nodes()[0],ct=v.nodeCount();for(Z.setNode(ot,{});mf(Z,v)<ct;)T=xf(Z,v),U=Z.hasNode(T.v)?gu(v,T):-gu(v,T),Nu(Z,v,U);return Z};function mf(v,T){return Ne.forEach(v.nodes(),function U(Z){Ne.forEach(T.nodeEdges(Z),function(ot){var ct=ot.v,gt=Z===ct?ot.w:ct;v.hasNode(gt)||gu(T,ot)||(v.setNode(gt,{}),v.setEdge(Z,gt,{}),U(gt))})}),v.nodeCount()}function xf(v,T){return Ne.minBy(T.edges(),function(U){if(v.hasNode(U.v)!==v.hasNode(U.w))return gu(T,U)})}function Nu(v,T,U){Ne.forEach(v.nodes(),function(Z){T.node(Z).rank+=U})}var Jf=yf,Lc=du,bf=vn.alg.preorder,vl=vn.alg.postorder,tc=po.simplify,Ef=hs;function hs(v){v=tc(v),Lc(v);var T,U=Hu(v);for(Dc(U),ec(U,v);T=wf(U);)Ku(U,v,T,Xl(U,v,T))}function ec(v,T){var U=vl(v,v.nodes());U=U.slice(0,U.length-1),Ne.forEach(U,function(Z){(function(ot,ct,gt){var bt=ot.node(gt).parent;ot.edge(gt,bt).cutvalue=Wl(ot,ct,gt)})(v,T,Z)})}function Wl(v,T,U){var Z=v.node(U).parent,ot=!0,ct=T.edge(U,Z),gt=0;return ct||(ot=!1,ct=T.edge(Z,U)),gt=ct.weight,Ne.forEach(T.nodeEdges(U),function(bt){var Mt,Gt,te=bt.v===U,Zt=te?bt.w:bt.v;if(Zt!==Z){var ye=te===ot,We=T.edge(bt).weight;if(gt+=ye?We:-We,Mt=U,Gt=Zt,v.hasEdge(Mt,Gt)){var wr=v.edge(U,Zt).cutvalue;gt+=ye?-wr:wr}}}),gt}function Dc(v,T){arguments.length<2&&(T=v.nodes()[0]),dl(v,{},1,T)}function dl(v,T,U,Z,ot){var ct=U,gt=v.node(Z);return T[Z]=!0,Ne.forEach(v.neighbors(Z),function(bt){Ne.has(T,bt)||(U=dl(v,T,U,bt,Z))}),gt.low=ct,gt.lim=U++,ot?gt.parent=ot:delete gt.parent,U}function wf(v){return Ne.find(v.edges(),function(T){return v.edge(T).cutvalue<0})}function Xl(v,T,U){var Z=U.v,ot=U.w;T.hasEdge(Z,ot)||(Z=U.w,ot=U.v);var ct=v.node(Z),gt=v.node(ot),bt=ct,Mt=!1;ct.lim>gt.lim&&(bt=gt,Mt=!0);var Gt=Ne.filter(T.edges(),function(te){return Mt===Yl(v,v.node(te.v),bt)&&Mt!==Yl(v,v.node(te.w),bt)});return Ne.minBy(Gt,function(te){return Jf(T,te)})}function Ku(v,T,U,Z){var ot=U.v,ct=U.w;v.removeEdge(ot,ct),v.setEdge(Z.v,Z.w,{}),Dc(v),ec(v,T),function(gt,bt){var Mt=Ne.find(gt.nodes(),function(te){return!bt.node(te).parent}),Gt=bf(gt,Mt);Gt=Gt.slice(1),Ne.forEach(Gt,function(te){var Zt=gt.node(te).parent,ye=bt.edge(te,Zt),We=!1;ye||(ye=bt.edge(Zt,te),We=!0),bt.node(te).rank=bt.node(Zt).rank+(We?ye.minlen:-ye.minlen)})}(v,T)}function Yl(v,T,U){return U.low<=T.lim&&T.lim<=U.lim}hs.initLowLimValues=Dc,hs.initCutValues=ec,hs.calcCutValue=Wl,hs.leaveEdge=wf,hs.enterEdge=Xl,hs.exchangeEdges=Ku;var gl=du,ph=function(v){switch(v.graph().ranker){case"network-simplex":pl(v);break;case"tight-tree":(function(T){gl(T),Hu(T)})(v);break;case"longest-path":Vl(v);break;default:pl(v)}},Vl=gl;function pl(v){Ef(v)}var yl=function(v){var T=function(U){var Z={},ot=0;function ct(gt){var bt=ot;Ne.forEach(U.children(gt),ct),Z[gt]={low:bt,lim:ot++}}return Ne.forEach(U.children(),ct),Z}(v);Ne.forEach(v.graph().dummyChains,function(U){for(var Z=v.node(U),ot=Z.edgeObj,ct=function(Zt,ye,We,wr){var $e,tr,Je=[],jr=[],hn=Math.min(ye[We].low,ye[wr].low),tn=Math.max(ye[We].lim,ye[wr].lim);$e=We;do $e=Zt.parent($e),Je.push($e);while($e&&(ye[$e].low>hn||tn>ye[$e].lim));for(tr=$e,$e=wr;($e=Zt.parent($e))!==tr;)jr.push($e);return{path:Je.concat(jr.reverse()),lca:tr}}(v,T,ot.v,ot.w),gt=ct.path,bt=ct.lca,Mt=0,Gt=gt[Mt],te=!0;U!==ot.w;){if(Z=v.node(U),te){for(;(Gt=gt[Mt])!==bt&&v.node(Gt).maxRank<Z.rank;)Mt++;Gt===bt&&(te=!1)}if(!te){for(;Mt<gt.length-1&&v.node(Gt=gt[Mt+1]).minRank<=Z.rank;)Mt++;Gt=gt[Mt]}v.setParent(U,Gt),U=v.successors(U)[0]}})},jl={run:function(v){var T=po.addDummyNode(v,"root",{},"_root"),U=function(gt){var bt={};function Mt(Gt,te){var Zt=gt.children(Gt);Zt&&Zt.length&&Ne.forEach(Zt,function(ye){Mt(ye,te+1)}),bt[Gt]=te}return Ne.forEach(gt.children(),function(Gt){Mt(Gt,1)}),bt}(v),Z=Ne.max(Ne.values(U))-1,ot=2*Z+1;v.graph().nestingRoot=T,Ne.forEach(v.edges(),function(gt){v.edge(gt).minlen*=ot});var ct=function(gt){return Ne.reduce(gt.edges(),function(bt,Mt){return bt+gt.edge(Mt).weight},0)}(v)+1;Ne.forEach(v.children(),function(gt){Hl(v,T,ot,ct,Z,U,gt)}),v.graph().nodeRankFactor=ot},cleanup:function(v){var T=v.graph();v.removeNode(T.nestingRoot),delete T.nestingRoot,Ne.forEach(v.edges(),function(U){v.edge(U).nestingEdge&&v.removeEdge(U)})}};function Hl(v,T,U,Z,ot,ct,gt){var bt=v.children(gt);if(bt.length){var Mt=po.addBorderNode(v,"_bt"),Gt=po.addBorderNode(v,"_bb"),te=v.node(gt);v.setParent(Mt,gt),te.borderTop=Mt,v.setParent(Gt,gt),te.borderBottom=Gt,Ne.forEach(bt,function(Zt){Hl(v,T,U,Z,ot,ct,Zt);var ye=v.node(Zt),We=ye.borderTop?ye.borderTop:Zt,wr=ye.borderBottom?ye.borderBottom:Zt,$e=ye.borderTop?Z:2*Z,tr=We!==wr?1:ot-ct[gt]+1;v.setEdge(Mt,We,{weight:$e,minlen:tr,nestingEdge:!0}),v.setEdge(wr,Gt,{weight:$e,minlen:tr,nestingEdge:!0})}),v.parent(gt)||v.setEdge(T,Mt,{weight:0,minlen:ot+ct[gt]})}else gt!==T&&v.setEdge(T,gt,{weight:0,minlen:U})}var Kl=function(v){Ne.forEach(v.children(),function T(U){var Z=v.children(U),ot=v.node(U);if(Z.length&&Ne.forEach(Z,T),Ne.has(ot,"minRank")){ot.borderLeft=[],ot.borderRight=[];for(var ct=ot.minRank,gt=ot.maxRank+1;ct<gt;++ct)ml(v,"borderLeft","_bl",U,ot,ct),ml(v,"borderRight","_br",U,ot,ct)}})};function ml(v,T,U,Z,ot,ct){var gt={width:0,height:0,rank:ct,borderType:T},bt=ot[T][ct-1],Mt=po.addDummyNode(v,"border",gt,U);ot[T][ct]=Mt,v.setParent(Mt,Z),bt&&v.setEdge(bt,Mt,{weight:1})}var xl={adjust:function(v){var T=v.graph().rankdir.toLowerCase();T!=="lr"&&T!=="rl"||Zl(v)},undo:function(v){var T=v.graph().rankdir.toLowerCase();T!=="bt"&&T!=="rl"||function(U){Ne.forEach(U.nodes(),function(Z){Nc(U.node(Z))}),Ne.forEach(U.edges(),function(Z){var ot=U.edge(Z);Ne.forEach(ot.points,Nc),Ne.has(ot,"y")&&Nc(ot)})}(v),T!=="lr"&&T!=="rl"||(function(U){Ne.forEach(U.nodes(),function(Z){Ps(U.node(Z))}),Ne.forEach(U.edges(),function(Z){var ot=U.edge(Z);Ne.forEach(ot.points,Ps),Ne.has(ot,"x")&&Ps(ot)})}(v),Zl(v))}};function Zl(v){Ne.forEach(v.nodes(),function(T){$l(v.node(T))}),Ne.forEach(v.edges(),function(T){$l(v.edge(T))})}function $l(v){var T=v.width;v.width=v.height,v.height=T}function Nc(v){v.y=-v.y}function Ps(v){var T=v.x;v.x=v.y,v.y=T}var Pc=function(v){var T={},U=Ne.filter(v.nodes(),function(bt){return!v.children(bt).length}),Z=Ne.max(Ne.map(U,function(bt){return v.node(bt).rank})),ot=Ne.map(Ne.range(Z+1),function(){return[]});function ct(bt){if(!Ne.has(T,bt)){T[bt]=!0;var Mt=v.node(bt);ot[Mt.rank].push(bt),Ne.forEach(v.successors(bt),ct)}}var gt=Ne.sortBy(U,function(bt){return v.node(bt).rank});return Ne.forEach(gt,ct),ot},kc=function(v,T){for(var U=0,Z=1;Z<T.length;++Z)U+=rc(v,T[Z-1],T[Z]);return U};function rc(v,T,U){for(var Z=Ne.zipObject(U,Ne.map(U,function(Gt,te){return te})),ot=Ne.flatten(Ne.map(T,function(Gt){return Ne.sortBy(Ne.map(v.outEdges(Gt),function(te){return{pos:Z[te.w],weight:v.edge(te).weight}}),"pos")}),!0),ct=1;ct<U.length;)ct<<=1;var gt=2*ct-1;ct-=1;var bt=Ne.map(new Array(gt),function(){return 0}),Mt=0;return Ne.forEach(ot.forEach(function(Gt){var te=Gt.pos+ct;bt[te]+=Gt.weight;for(var Zt=0;te>0;)te%2&&(Zt+=bt[te+1]),bt[te=te-1>>1]+=Gt.weight;Mt+=Gt.weight*Zt})),Mt}var bl=function(v,T){return Ne.map(T,function(U){var Z=v.inEdges(U);if(Z.length){var ot=Ne.reduce(Z,function(ct,gt){var bt=v.edge(gt),Mt=v.node(gt.v);return{sum:ct.sum+bt.weight*Mt.order,weight:ct.weight+bt.weight}},{sum:0,weight:0});return{v:U,barycenter:ot.sum/ot.weight,weight:ot.weight}}return{v:U}})},Rc=function(v,T){var U={};return Ne.forEach(v,function(Z,ot){var ct=U[Z.v]={indegree:0,in:[],out:[],vs:[Z.v],i:ot};Ne.isUndefined(Z.barycenter)||(ct.barycenter=Z.barycenter,ct.weight=Z.weight)}),Ne.forEach(T.edges(),function(Z){var ot=U[Z.v],ct=U[Z.w];Ne.isUndefined(ot)||Ne.isUndefined(ct)||(ct.indegree++,ot.out.push(U[Z.w]))}),function(Z){var ot=[];function ct(Mt){return function(Gt){Gt.merged||(Ne.isUndefined(Gt.barycenter)||Ne.isUndefined(Mt.barycenter)||Gt.barycenter>=Mt.barycenter)&&function(te,Zt){var ye=0,We=0;te.weight&&(ye+=te.barycenter*te.weight,We+=te.weight),Zt.weight&&(ye+=Zt.barycenter*Zt.weight,We+=Zt.weight),te.vs=Zt.vs.concat(te.vs),te.barycenter=ye/We,te.weight=We,te.i=Math.min(Zt.i,te.i),Zt.merged=!0}(Mt,Gt)}}function gt(Mt){return function(Gt){Gt.in.push(Mt),--Gt.indegree==0&&Z.push(Gt)}}for(;Z.length;){var bt=Z.pop();ot.push(bt),Ne.forEach(bt.in.reverse(),ct(bt)),Ne.forEach(bt.out,gt(bt))}return Ne.map(Ne.filter(ot,function(Mt){return!Mt.merged}),function(Mt){return Ne.pick(Mt,["vs","i","barycenter","weight"])})}(Ne.filter(U,function(Z){return!Z.indegree}))},nc=function(v,T){var U=po.partition(v,function(Zt){return Ne.has(Zt,"barycenter")}),Z=U.lhs,ot=Ne.sortBy(U.rhs,function(Zt){return-Zt.i}),ct=[],gt=0,bt=0,Mt=0;Z.sort((Gt=!!T,function(Zt,ye){return Zt.barycenter<ye.barycenter?-1:Zt.barycenter>ye.barycenter?1:Gt?ye.i-Zt.i:Zt.i-ye.i})),Mt=Zu(ct,ot,Mt),Ne.forEach(Z,function(Zt){Mt+=Zt.vs.length,ct.push(Zt.vs),gt+=Zt.barycenter*Zt.weight,bt+=Zt.weight,Mt=Zu(ct,ot,Mt)});var Gt,te={vs:Ne.flatten(ct,!0)};return bt&&(te.barycenter=gt/bt,te.weight=bt),te};function Zu(v,T,U){for(var Z;T.length&&(Z=Ne.last(T)).i<=U;)T.pop(),v.push(Z.vs),U++;return U}var El=function v(T,U,Z,ot){var ct=T.children(U),gt=T.node(U),bt=gt?gt.borderLeft:void 0,Mt=gt?gt.borderRight:void 0,Gt={};bt&&(ct=Ne.filter(ct,function($e){return $e!==bt&&$e!==Mt}));var te=bl(T,ct);Ne.forEach(te,function($e){if(T.children($e.v).length){var tr=v(T,$e.v,Z,ot);Gt[$e.v]=tr,Ne.has(tr,"barycenter")&&(Je=$e,jr=tr,Ne.isUndefined(Je.barycenter)?(Je.barycenter=jr.barycenter,Je.weight=jr.weight):(Je.barycenter=(Je.barycenter*Je.weight+jr.barycenter*jr.weight)/(Je.weight+jr.weight),Je.weight+=jr.weight))}var Je,jr});var Zt=Rc(te,Z);(function($e,tr){Ne.forEach($e,function(Je){Je.vs=Ne.flatten(Je.vs.map(function(jr){return tr[jr]?tr[jr].vs:jr}),!0)})})(Zt,Gt);var ye=nc(Zt,ot);if(bt&&(ye.vs=Ne.flatten([bt,ye.vs,Mt],!0),T.predecessors(bt).length)){var We=T.node(T.predecessors(bt)[0]),wr=T.node(T.predecessors(Mt)[0]);Ne.has(ye,"barycenter")||(ye.barycenter=0,ye.weight=0),ye.barycenter=(ye.barycenter*ye.weight+We.order+wr.order)/(ye.weight+2),ye.weight+=2}return ye},Bc=vn.Graph,Fc=function(v,T,U){var Z=function(ct){for(var gt;ct.hasNode(gt=Ne.uniqueId("_root")););return gt}(v),ot=new Bc({compound:!0}).setGraph({root:Z}).setDefaultNodeLabel(function(ct){return v.node(ct)});return Ne.forEach(v.nodes(),function(ct){var gt=v.node(ct),bt=v.parent(ct);(gt.rank===T||gt.minRank<=T&&T<=gt.maxRank)&&(ot.setNode(ct),ot.setParent(ct,bt||Z),Ne.forEach(v[U](ct),function(Mt){var Gt=Mt.v===ct?Mt.w:Mt.v,te=ot.edge(Gt,ct),Zt=Ne.isUndefined(te)?0:te.weight;ot.setEdge(Gt,ct,{weight:v.edge(Mt).weight+Zt})}),Ne.has(gt,"minRank")&&ot.setNode(ct,{borderLeft:gt.borderLeft[T],borderRight:gt.borderRight[T]}))}),ot},Gc=function(v,T,U){var Z,ot={};Ne.forEach(U,function(ct){for(var gt,bt,Mt=v.parent(ct);Mt;){if((gt=v.parent(Mt))?(bt=ot[gt],ot[gt]=Mt):(bt=Z,Z=Mt),bt&&bt!==Mt)return void T.setEdge(bt,Mt);Mt=gt}})},ac=vn.Graph,ic=function(v){var T=po.maxRank(v),U=_f(v,Ne.range(1,T+1),"inEdges"),Z=_f(v,Ne.range(T-1,-1,-1),"outEdges"),ot=Pc(v);pu(v,ot);for(var ct,gt=Number.POSITIVE_INFINITY,bt=0,Mt=0;Mt<4;++bt,++Mt){oc(bt%2?U:Z,bt%4>=2),ot=po.buildLayerMatrix(v);var Gt=kc(v,ot);Gt<gt&&(Mt=0,ct=Ne.cloneDeep(ot),gt=Gt)}pu(v,ct)};function _f(v,T,U){return Ne.map(T,function(Z){return Fc(v,Z,U)})}function oc(v,T){var U=new ac;Ne.forEach(v,function(Z){var ot=Z.graph().root,ct=El(Z,ot,U,T);Ne.forEach(ct.vs,function(gt,bt){Z.node(gt).order=bt}),Gc(Z,U,ct.vs)})}function pu(v,T){Ne.forEach(T,function(U){Ne.forEach(U,function(Z,ot){v.node(Z).order=ot})})}var ql=vn.Graph,yu=function(v){var T,U=po.buildLayerMatrix(v),Z=Ne.merge($u(v,U),zc(v,U)),ot={};Ne.forEach(["u","d"],function(gt){T=gt==="u"?U:Ne.values(U).reverse(),Ne.forEach(["l","r"],function(bt){bt==="r"&&(T=Ne.map(T,function(Zt){return Ne.values(Zt).reverse()}));var Mt=(gt==="u"?v.predecessors:v.successors).bind(v),Gt=Ql(v,T,Z,Mt),te=Sf(v,T,Gt.root,Gt.align,bt==="r");bt==="r"&&(te=Ne.mapValues(te,function(Zt){return-Zt})),ot[gt+bt]=te})});var ct=ru(v,ot);return Wc(ot,ct),Jl(ot,v.graph().align)};function $u(v,T){var U={};return Ne.reduce(T,function(Z,ot){var ct=0,gt=0,bt=Z.length,Mt=Ne.last(ot);return Ne.forEach(ot,function(Gt,te){var Zt=function(We,wr){if(We.node(wr).dummy)return Ne.find(We.predecessors(wr),function($e){return We.node($e).dummy})}(v,Gt),ye=Zt?v.node(Zt).order:bt;(Zt||Gt===Mt)&&(Ne.forEach(ot.slice(gt,te+1),function(We){Ne.forEach(v.predecessors(We),function(wr){var $e=v.node(wr),tr=$e.order;!(tr<ct||ye<tr)||$e.dummy&&v.node(We).dummy||Uc(U,wr,We)})}),gt=te+1,ct=ye)}),ot}),U}function zc(v,T){var U={};function Z(ot,ct,gt,bt,Mt){var Gt;Ne.forEach(Ne.range(ct,gt),function(te){Gt=ot[te],v.node(Gt).dummy&&Ne.forEach(v.predecessors(Gt),function(Zt){var ye=v.node(Zt);ye.dummy&&(ye.order<bt||ye.order>Mt)&&Uc(U,Zt,Gt)})})}return Ne.reduce(T,function(ot,ct){var gt,bt=-1,Mt=0;return Ne.forEach(ct,function(Gt,te){if(v.node(Gt).dummy==="border"){var Zt=v.predecessors(Gt);Zt.length&&(gt=v.node(Zt[0]).order,Z(ct,Mt,te,bt,gt),Mt=te,bt=gt)}Z(ct,Mt,ct.length,gt,ot.length)}),ct}),U}function Uc(v,T,U){if(T>U){var Z=T;T=U,U=Z}var ot=v[T];ot||(v[T]=ot={}),ot[U]=!0}function yh(v,T,U){if(T>U){var Z=T;T=U,U=Z}return Ne.has(v[T],U)}function Ql(v,T,U,Z){var ot={},ct={},gt={};return Ne.forEach(T,function(bt){Ne.forEach(bt,function(Mt,Gt){ot[Mt]=Mt,ct[Mt]=Mt,gt[Mt]=Gt})}),Ne.forEach(T,function(bt){var Mt=-1;Ne.forEach(bt,function(Gt){var te=Z(Gt);if(te.length)for(var Zt=((te=Ne.sortBy(te,function($e){return gt[$e]})).length-1)/2,ye=Math.floor(Zt),We=Math.ceil(Zt);ye<=We;++ye){var wr=te[ye];ct[Gt]===Gt&&Mt<gt[wr]&&!yh(U,Gt,wr)&&(ct[wr]=Gt,ct[Gt]=ot[Gt]=ot[wr],Mt=gt[wr])}})}),{root:ot,align:ct}}function Sf(v,T,U,Z,ot){var ct={},gt=function(Gt,te,Zt,ye){var We=new ql,wr=Gt.graph(),$e=function(tr,Je,jr){return function(hn,tn,kn){var In,Kn=hn.node(tn),ca=hn.node(kn),ea=0;if(ea+=Kn.width/2,Ne.has(Kn,"labelpos"))switch(Kn.labelpos.toLowerCase()){case"l":In=-Kn.width/2;break;case"r":In=Kn.width/2}if(In&&(ea+=jr?In:-In),In=0,ea+=(Kn.dummy?Je:tr)/2,ea+=(ca.dummy?Je:tr)/2,ea+=ca.width/2,Ne.has(ca,"labelpos"))switch(ca.labelpos.toLowerCase()){case"l":In=ca.width/2;break;case"r":In=-ca.width/2}return In&&(ea+=jr?In:-In),In=0,ea}}(wr.nodesep,wr.edgesep,ye);return Ne.forEach(te,function(tr){var Je;Ne.forEach(tr,function(jr){var hn=Zt[jr];if(We.setNode(hn),Je){var tn=Zt[Je],kn=We.edge(tn,hn);We.setEdge(tn,hn,Math.max($e(Gt,jr,Je),kn||0))}Je=jr})}),We}(v,T,U,ot),bt=ot?"borderLeft":"borderRight";function Mt(Gt,te){for(var Zt=gt.nodes(),ye=Zt.pop(),We={};ye;)We[ye]?Gt(ye):(We[ye]=!0,Zt.push(ye),Zt=Zt.concat(te(ye))),ye=Zt.pop()}return Mt(function(Gt){ct[Gt]=gt.inEdges(Gt).reduce(function(te,Zt){return Math.max(te,ct[Zt.v]+gt.edge(Zt))},0)},gt.predecessors.bind(gt)),Mt(function(Gt){var te=gt.outEdges(Gt).reduce(function(ye,We){return Math.min(ye,ct[We.w]-gt.edge(We))},Number.POSITIVE_INFINITY),Zt=v.node(Gt);te!==Number.POSITIVE_INFINITY&&Zt.borderType!==bt&&(ct[Gt]=Math.max(ct[Gt],te))},gt.successors.bind(gt)),Ne.forEach(Z,function(Gt){ct[Gt]=ct[U[Gt]]}),ct}function ru(v,T){return Ne.minBy(Ne.values(T),function(U){var Z=Number.NEGATIVE_INFINITY,ot=Number.POSITIVE_INFINITY;return Ne.forIn(U,function(ct,gt){var bt=function(Mt,Gt){return Mt.node(Gt).width}(v,gt)/2;Z=Math.max(ct+bt,Z),ot=Math.min(ct-bt,ot)}),Z-ot})}function Wc(v,T){var U=Ne.values(T),Z=Ne.min(U),ot=Ne.max(U);Ne.forEach(["u","d"],function(ct){Ne.forEach(["l","r"],function(gt){var bt,Mt=ct+gt,Gt=v[Mt];if(Gt!==T){var te=Ne.values(Gt);(bt=gt==="l"?Z-Ne.min(te):ot-Ne.max(te))&&(v[Mt]=Ne.mapValues(Gt,function(Zt){return Zt+bt}))}})})}function Jl(v,T){return Ne.mapValues(v.ul,function(U,Z){if(T)return v[T.toLowerCase()][Z];var ot=Ne.sortBy(Ne.map(v,Z));return(ot[1]+ot[2])/2})}var wl=yu,mh=function(v){(function(T){var U=po.buildLayerMatrix(T),Z=T.graph().ranksep,ot=0;Ne.forEach(U,function(ct){var gt=Ne.max(Ne.map(ct,function(bt){return T.node(bt).height}));Ne.forEach(ct,function(bt){T.node(bt).y=ot+gt/2}),ot+=gt+Z})})(v=po.asNonCompoundGraph(v)),Ne.forEach(wl(v),function(T,U){v.node(U).x=T})},_l=po.normalizeRanks,xh=po.removeEmptyRanks,Ho=po,th=vn.Graph,Mf=function(v,T){var U=T&&T.debugTiming?Ho.time:Ho.notime;U("layout",function(){var Z=U("  buildLayoutGraph",function(){return function(ot){var ct=new th({multigraph:!0,compound:!0}),gt=Ml(ot.graph());return ct.setGraph(Ne.merge({},eh,Ro(gt,mu),Ne.pick(gt,Sl))),Ne.forEach(ot.nodes(),function(bt){var Mt=Ml(ot.node(bt));ct.setNode(bt,Ne.defaults(Ro(Mt,Xc),rh)),ct.setParent(bt,ot.parent(bt))}),Ne.forEach(ot.edges(),function(bt){var Mt=Ml(ot.edge(bt));ct.setEdge(bt,Ne.merge({},xu,Ro(Mt,rs),Ne.pick(Mt,qi)))}),ct}(v)});U("  runLayout",function(){(function(ot,ct){ct("    makeSpaceForEdgeLabels",function(){(function(gt){var bt=gt.graph();bt.ranksep/=2,Ne.forEach(gt.edges(),function(Mt){var Gt=gt.edge(Mt);Gt.minlen*=2,Gt.labelpos.toLowerCase()!=="c"&&(bt.rankdir==="TB"||bt.rankdir==="BT"?Gt.width+=Gt.labeloffset:Gt.height+=Gt.labeloffset)})})(ot)}),ct("    removeSelfEdges",function(){(function(gt){Ne.forEach(gt.edges(),function(bt){if(bt.v===bt.w){var Mt=gt.node(bt.v);Mt.selfEdges||(Mt.selfEdges=[]),Mt.selfEdges.push({e:bt,label:gt.edge(bt)}),gt.removeEdge(bt)}})})(ot)}),ct("    acyclic",function(){Tc.run(ot)}),ct("    nestingGraph.run",function(){jl.run(ot)}),ct("    rank",function(){ph(Ho.asNonCompoundGraph(ot))}),ct("    injectEdgeLabelProxies",function(){(function(gt){Ne.forEach(gt.edges(),function(bt){var Mt=gt.edge(bt);if(Mt.width&&Mt.height){var Gt=gt.node(bt.v),te={rank:(gt.node(bt.w).rank-Gt.rank)/2+Gt.rank,e:bt};Ho.addDummyNode(gt,"edge-proxy",te,"_ep")}})})(ot)}),ct("    removeEmptyRanks",function(){xh(ot)}),ct("    nestingGraph.cleanup",function(){jl.cleanup(ot)}),ct("    normalizeRanks",function(){_l(ot)}),ct("    assignRankMinMax",function(){(function(gt){var bt=0;Ne.forEach(gt.nodes(),function(Mt){var Gt=gt.node(Mt);Gt.borderTop&&(Gt.minRank=gt.node(Gt.borderTop).rank,Gt.maxRank=gt.node(Gt.borderBottom).rank,bt=Ne.max(bt,Gt.maxRank))}),gt.graph().maxRank=bt})(ot)}),ct("    removeEdgeLabelProxies",function(){(function(gt){Ne.forEach(gt.nodes(),function(bt){var Mt=gt.node(bt);Mt.dummy==="edge-proxy"&&(gt.edge(Mt.e).labelRank=Mt.rank,gt.removeNode(bt))})})(ot)}),ct("    normalize.run",function(){Qf.run(ot)}),ct("    parentDummyChains",function(){yl(ot)}),ct("    addBorderSegments",function(){Kl(ot)}),ct("    order",function(){ic(ot)}),ct("    insertSelfEdges",function(){(function(gt){var bt=Ho.buildLayerMatrix(gt);Ne.forEach(bt,function(Mt){var Gt=0;Ne.forEach(Mt,function(te,Zt){var ye=gt.node(te);ye.order=Zt+Gt,Ne.forEach(ye.selfEdges,function(We){Ho.addDummyNode(gt,"selfedge",{width:We.label.width,height:We.label.height,rank:ye.rank,order:Zt+ ++Gt,e:We.e,label:We.label},"_se")}),delete ye.selfEdges})})})(ot)}),ct("    adjustCoordinateSystem",function(){xl.adjust(ot)}),ct("    position",function(){mh(ot)}),ct("    positionSelfEdges",function(){(function(gt){Ne.forEach(gt.nodes(),function(bt){var Mt=gt.node(bt);if(Mt.dummy==="selfedge"){var Gt=gt.node(Mt.e.v),te=Gt.x+Gt.width/2,Zt=Gt.y,ye=Mt.x-te,We=Gt.height/2;gt.setEdge(Mt.e,Mt.label),gt.removeNode(bt),Mt.label.points=[{x:te+2*ye/3,y:Zt-We},{x:te+5*ye/6,y:Zt-We},{x:te+ye,y:Zt},{x:te+5*ye/6,y:Zt+We},{x:te+2*ye/3,y:Zt+We}],Mt.label.x=Mt.x,Mt.label.y=Mt.y}})})(ot)}),ct("    removeBorderNodes",function(){(function(gt){Ne.forEach(gt.nodes(),function(bt){if(gt.children(bt).length){var Mt=gt.node(bt),Gt=gt.node(Mt.borderTop),te=gt.node(Mt.borderBottom),Zt=gt.node(Ne.last(Mt.borderLeft)),ye=gt.node(Ne.last(Mt.borderRight));Mt.width=Math.abs(ye.x-Zt.x),Mt.height=Math.abs(te.y-Gt.y),Mt.x=Zt.x+Mt.width/2,Mt.y=Gt.y+Mt.height/2}}),Ne.forEach(gt.nodes(),function(bt){gt.node(bt).dummy==="border"&&gt.removeNode(bt)})})(ot)}),ct("    normalize.undo",function(){Qf.undo(ot)}),ct("    fixupEdgeLabelCoords",function(){(function(gt){Ne.forEach(gt.edges(),function(bt){var Mt=gt.edge(bt);if(Ne.has(Mt,"x"))switch(Mt.labelpos!=="l"&&Mt.labelpos!=="r"||(Mt.width-=Mt.labeloffset),Mt.labelpos){case"l":Mt.x-=Mt.width/2+Mt.labeloffset;break;case"r":Mt.x+=Mt.width/2+Mt.labeloffset}})})(ot)}),ct("    undoCoordinateSystem",function(){xl.undo(ot)}),ct("    translateGraph",function(){(function(gt){var bt=Number.POSITIVE_INFINITY,Mt=0,Gt=Number.POSITIVE_INFINITY,te=0,Zt=gt.graph(),ye=Zt.marginx||0,We=Zt.marginy||0;function wr($e){var tr=$e.x,Je=$e.y,jr=$e.width,hn=$e.height;bt=Math.min(bt,tr-jr/2),Mt=Math.max(Mt,tr+jr/2),Gt=Math.min(Gt,Je-hn/2),te=Math.max(te,Je+hn/2)}Ne.forEach(gt.nodes(),function($e){wr(gt.node($e))}),Ne.forEach(gt.edges(),function($e){var tr=gt.edge($e);Ne.has(tr,"x")&&wr(tr)}),bt-=ye,Gt-=We,Ne.forEach(gt.nodes(),function($e){var tr=gt.node($e);tr.x-=bt,tr.y-=Gt}),Ne.forEach(gt.edges(),function($e){var tr=gt.edge($e);Ne.forEach(tr.points,function(Je){Je.x-=bt,Je.y-=Gt}),Ne.has(tr,"x")&&(tr.x-=bt),Ne.has(tr,"y")&&(tr.y-=Gt)}),Zt.width=Mt-bt+ye,Zt.height=te-Gt+We})(ot)}),ct("    assignNodeIntersects",function(){(function(gt){Ne.forEach(gt.edges(),function(bt){var Mt,Gt,te=gt.edge(bt),Zt=gt.node(bt.v),ye=gt.node(bt.w);te.points?(Mt=te.points[0],Gt=te.points[te.points.length-1]):(te.points=[],Mt=ye,Gt=Zt),te.points.unshift(Ho.intersectRect(Zt,Mt)),te.points.push(Ho.intersectRect(ye,Gt))})})(ot)}),ct("    reversePoints",function(){(function(gt){Ne.forEach(gt.edges(),function(bt){var Mt=gt.edge(bt);Mt.reversed&&Mt.points.reverse()})})(ot)}),ct("    acyclic.undo",function(){Tc.undo(ot)})})(Z,U)}),U("  updateInputGraph",function(){(function(ot,ct){Ne.forEach(ot.nodes(),function(gt){var bt=ot.node(gt),Mt=ct.node(gt);bt&&(bt.x=Mt.x,bt.y=Mt.y,ct.children(gt).length&&(bt.width=Mt.width,bt.height=Mt.height))}),Ne.forEach(ot.edges(),function(gt){var bt=ot.edge(gt),Mt=ct.edge(gt);bt.points=Mt.points,Ne.has(Mt,"x")&&(bt.x=Mt.x,bt.y=Mt.y)}),ot.graph().width=ct.graph().width,ot.graph().height=ct.graph().height})(v,Z)})})},mu=["nodesep","edgesep","ranksep","marginx","marginy"],eh={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Sl=["acyclicer","ranker","rankdir","align"],Xc=["width","height"],rh={width:0,height:0},rs=["minlen","weight","width","height","labeloffset"],xu={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},qi=["labelpos"];function Ro(v,T){return Ne.mapValues(Ne.pick(v,T),Number)}function Ml(v){var T={};return Ne.forEach(v,function(U,Z){T[Z.toLowerCase()]=U}),T}var nh=vn.Graph,ah={graphlib:vn,layout:Mf,debug:{debugOrdering:function(v){var T=po.buildLayerMatrix(v),U=new nh({compound:!0,multigraph:!0}).setGraph({});return Ne.forEach(v.nodes(),function(Z){U.setNode(Z,{label:Z}),U.setParent(Z,"layer"+v.node(Z).rank)}),Ne.forEach(v.edges(),function(Z){U.setEdge(Z.v,Z.w,{},Z.name)}),Ne.forEach(T,function(Z,ot){var ct="layer"+ot;U.setNode(ct,{rank:"same"}),Ne.reduce(Z,function(gt,bt){return U.setEdge(gt,bt,{style:"invis"}),bt})}),U}},util:{time:po.time,notime:po.notime},version:"0.8.5"},bh=ah.graphlib,Eh=ah.layout;class Al{constructor(T){this.cardinality=1,this.include=E.UNSPECIFIED,this.isGroupNode=!1,this.parentNode=null,this.type=N.NODE,this.name=T.name,this.attr=T.attr||{},this.inputs=T.inputs,this.path=T.path||[],this.width=T.width,this.height=T.height}}class ih{constructor(){this.nodes={},this.edges=[],this.nodes={},this.edges=[]}}function wh(v){const T=new ih;return v.nodes.map(U=>new Al(U)).forEach(U=>{T.nodes[U.name]=U,U.inputs.forEach(Z=>{(function(ot,ct,gt){gt.name!==ct.name&&ot.edges.push(Object.assign(Object.assign({},gt.attr),{v:gt.name,w:ct.name}))})(T,U,Z)})}),T}class _h{constructor(T,U={}){this.attr=null,this.bridgeGraph=null,this.cardinality=0,this.depth=1,this.include=E.UNSPECIFIED,this.isGroupNode=!0,this.parentNode=null,this.type=N.META,this.path=[],this.name=T,this.metaGraph=Vc(T,x.META,U)}getFirstChild(){return this.metaGraph.node(this.metaGraph.nodes()[0])}getChildren(){return this.metaGraph.nodes().map(T=>this.metaGraph.node(T))}leaves(){let T,U=[],Z=[this];for(;Z.length;){let ot=Z.shift();ot.isGroupNode?(T=ot.metaGraph,T.nodes().forEach(ct=>Z.push(T.node(ct)))):U.push(ot.name)}return U}}class oh{constructor(T,U){this.v=T,this.w=U,this.baseEdgeList=[],this.inbound=null,this.name=null}addBaseEdge(T,U){this.baseEdgeList.push(T)}}function sh(v,T={}){return new _h(v,T)}function Yc(v,T){return new oh(v,T)}function Vc(v,T,U){const Z=U||{},ot=new bh.Graph(Z);return ot.setGraph({name:v,rankdir:Z.rankdir,type:T,align:Z.align}),ot}class Cl{constructor(T={}){this.graphOptions=T,this.index={},this.graphOptions.compound=!0,this.root=sh(L,this.graphOptions),this.index[L]=this.root}getNodeMap(){return this.index}node(T){return this.index[T]}setNode(T,U){this.index[T]=U}getBridgeGraph(T){const U=this.index[T];if(!U)throw Error("Could not find node in hierarchy: "+T);if(!("metaGraph"in U))return null;const Z=U;if(Z.bridgeGraph)return Z.bridgeGraph;const ot=Vc(P,x.BRIDGE,this.graphOptions);if(Z.bridgeGraph=ot,!U.parentNode||!("metaGraph"in U.parentNode))return ot;const ct=U.parentNode;return[ct.metaGraph,this.getBridgeGraph(ct.name)].forEach(gt=>{gt.edges().filter(bt=>bt.v===T||bt.w===T).forEach(bt=>{const Mt=bt.w===T;gt.edge(bt).baseEdgeList.forEach(Gt=>{const[te,Zt]=Mt?[Gt.w,bt.v]:[Gt.v,bt.w],ye=this.getChildName(T,te),We={v:Mt?Zt:ye,w:Mt?ye:Zt};let wr=ot.edge(We);wr||(wr=Yc(We.v,We.w),wr.inbound=Mt,ot.setEdge(We.v,We.w,wr)),wr.addBaseEdge(Gt,this)})})}),ot}getChildName(T,U){let Z=this.index[U];for(;Z;){if(Z.parentNode&&Z.parentNode.name===T)return Z.name;Z=Z.parentNode}throw Error("Could not find immediate child for descendant: "+U)}getPredecessors(T){const U=this.index[T];if(!U)throw Error("Could not find node with name: "+T);return this.getOneWayEdges(U,!0)}getSuccessors(T){const U=this.index[T];if(!U)throw Error("Could not find node with name: "+T);return this.getOneWayEdges(U,!1)}getOneWayEdges(T,U){const Z=[];if(!T.parentNode||!T.parentNode.isGroupNode)return Z;const ot=T.parentNode,ct=ot.metaGraph,gt=this.getBridgeGraph(ot.name);return Vs(ct,T,U,Z),Vs(gt,T,U,Z),Z}}function uh(v,T){const{rankDirection:U,align:Z}=T,ot=new Cl({rankdir:U,align:Z});return function(ct,gt){Object.keys(gt.nodes).forEach(bt=>{const Mt=gt.nodes[bt],Gt=Mt.path;let te=ct.root;te.depth=Math.max(Gt.length,te.depth);for(let Zt=0;Zt<Gt.length&&(te.depth=Math.max(te.depth,Gt.length-Zt),te.cardinality+=Mt.cardinality,Zt!==Gt.length-1);Zt++){const ye=Gt[Zt];let We=ct.node(ye);We||(We=sh(ye,ct.graphOptions),We.path=Mt.path.slice(0,Zt+1),We.parentNode=te,ct.setNode(ye,We),te.metaGraph.setNode(ye,We)),te=We}ct.setNode(Mt.name,Mt),Mt.parentNode=te,te.metaGraph.setNode(Mt.name,Mt)})}(ot,v),function(ct,gt){const bt=ct.getNodeMap();let Mt=[],Gt=[];const te=(Zt,ye)=>{let We=0;for(;Zt;)ye[We++]=Zt.name,Zt=Zt.parentNode;return We-1};gt.edges.forEach(Zt=>{Mt=[],Gt=[];let ye=te(gt.nodes[Zt.v],Mt),We=te(gt.nodes[Zt.w],Gt);for(;Mt[ye]===Gt[We];)if(ye--,We--,ye<0||We<0)throw Error("No difference found between ancestor paths.");const wr=bt[Mt[ye+1]],$e=Mt[ye],tr=Gt[We];let Je=wr.metaGraph.edge($e,tr);Je||(Je=Yc($e,tr),wr.metaGraph.setEdge($e,tr,Je)),Je.addBaseEdge(Zt,ct)})}(ot,v),ot}function Vs(v,T,U,Z){(U?v.inEdges(T.name):v.outEdges(T.name)).forEach(ot=>{const ct=v.edge(ot);Z.push(ct)})}class Tl{constructor(T){this.hierarchy=T,this.index={},this.hasSubHierarchy={},this.root=new qt(this.hierarchy.root,this.hierarchy.graphOptions),this.index[T.root.name]=this.root,this.buildSubHierarchy(T.root.name),this.root.expanded=!0}getRenderInfoNodes(){return Object.values(this.index)}getSubHierarchy(){return this.hasSubHierarchy}buildSubHierarchy(T){if(T in this.hasSubHierarchy)return;this.hasSubHierarchy[T]=!0;const U=this.index[T];if(U.node.type!==N.META)return;const Z=U,ot=Z.node.metaGraph,ct=Z.coreGraph;ot.nodes().forEach(te=>{const Zt=this.getOrCreateRenderNodeByName(te);ct.setNode(te,Zt)}),ot.edges().forEach(te=>{const Zt=ot.edge(te),ye=new mt(Zt);ct.setEdge(te.v,te.w,ye)});const gt=Z.node.parentNode;if(!gt)return;const bt=this.getRenderNodeByName(gt.name),Mt=(te,...Zt)=>Zt.concat([te?"IN":"OUT"]).join("~~"),Gt=this.hierarchy.getBridgeGraph(T);Gt.edges().forEach(te=>{const Zt=Gt.edge(te),ye=!!ot.node(te.w),[We,wr]=ye?[te.w,te.v]:[te.v,te.w],$e=kn=>{const In=ye?{v:kn,w:T}:{v:T,w:kn};return bt.coreGraph.edge(In)};let tr=$e(wr);tr||(tr=$e(Mt(ye,wr,gt.name)));const Je=Mt(ye,T),jr=Mt(ye,wr,T);let hn=ct.node(jr);if(!hn){let kn=ct.node(Je);if(!kn){const Kn={name:Je,type:N.BRIDGE,isGroupNode:!1,cardinality:0,parentNode:null,include:E.UNSPECIFIED,inbound:ye,attr:{}};kn=new sc(Kn),this.index[Je]=kn,ct.setNode(Je,kn)}const In={name:jr,type:N.BRIDGE,isGroupNode:!1,cardinality:1,parentNode:null,include:E.UNSPECIFIED,inbound:ye,attr:{}};hn=new sc(In),this.index[jr]=hn,ct.setNode(jr,hn),ct.setParent(jr,Je),kn.node.cardinality++}const tn=new mt(Zt);tn.adjoiningMetaEdge=tr,ye?ct.setEdge(jr,We,tn):ct.setEdge(We,jr,tn)})}getOrCreateRenderNodeByName(T){if(!T)return null;if(T in this.index)return this.index[T];const U=this.getNodeByName(T);return U?(this.index[T]=U.isGroupNode?new qt(U,this.hierarchy.graphOptions):new sc(U),this.index[T]):null}getRenderNodeByName(T){return this.index[T]}getNodeByName(T){return this.hierarchy.node(T)}}class sc{constructor(T){this.node=T,this.expanded=!1,this.x=0,this.y=0,this.coreBox={width:0,height:0},this.outboxWidth=0,this.labelOffset=0,this.radius=0,this.labelHeight=0,this.paddingTop=0,this.paddingLeft=0,this.paddingRight=0,this.paddingBottom=0,this.width=T.width||0,this.height=T.height||0,this.displayName=T.name,this.attr=T.attr}}class mt{constructor(T){this.metaEdge=T,this.adjoiningMetaEdge=null,this.weight=1,this.points=[]}}class qt extends sc{constructor(T,U){super(T);const Z=T.metaGraph.graph();U.compound=!0,this.coreGraph=Vc(Z.name,x.CORE,U)}}function Ee(v,T){v.node.isGroupNode&&function(U,Z){const ot=X(Z);U.coreGraph.nodes().map(ct=>U.coreGraph.node(ct)).forEach(ct=>{var gt,bt,Mt,Gt,te,Zt;const{height:ye,width:We}=ct;switch(ct.node.type){case N.NODE:Object.assign(ct,ot.nodeSize.node),ct.height=ye||ot.nodeSize.node.height,ct.width=We||ot.nodeSize.node.width;break;case N.BRIDGE:Object.assign(ct,ot.nodeSize.bridge);break;case N.META:ct.expanded?Ee(ct,Z):(Object.assign(ct,ot.nodeSize.meta),ct.height=ot.nodeSize.meta.height,ct.width=ot.nodeSize.meta.width);break;default:throw Error("Unrecognized node type: "+ct.node.type)}if(!ct.expanded){const wr=ct.attr;(function($e,tr=!1){if($e.coreBox.width=$e.width,$e.coreBox.height=$e.height,!tr){const Je=`${$e.displayName}`.length,jr=3;$e.width=Math.max($e.coreBox.width,Je*jr)}})(ct,Z&&(ct.node.type===0&&!!(!((bt=(gt=Z==null?void 0:Z.nodeSize)===null||gt===void 0?void 0:gt.meta)===null||bt===void 0)&&bt.width)||ct.node.type===1&&(!!(!((Gt=(Mt=Z==null?void 0:Z.nodeSize)===null||Mt===void 0?void 0:Mt.node)===null||Gt===void 0)&&Gt.width)||!!wr.width)||ct.node.type===2&&!!(!((Zt=(te=Z==null?void 0:Z.nodeSize)===null||te===void 0?void 0:te.bridge)===null||Zt===void 0)&&Zt.width)))}})}(v,T),v.node.type===N.META&&function(U,Z){const ot=X(Z),ct=ot.subScene.meta;Object.assign(U,ct);const{nodeSep:gt,rankSep:bt,edgeSep:Mt,align:Gt}=ot.graph.meta,te={nodesep:gt,ranksep:bt,edgesep:Mt,align:Gt};Object.assign(U.coreBox,function(We,wr){const{ranksep:$e,nodesep:tr,edgesep:Je,align:jr}=wr;Object.assign(We.graph(),{ranksep:$e,nodesep:tr,edgesep:Je,align:jr});const hn=[];if(We.nodes().forEach(ca=>{We.node(ca).node.type!==N.BRIDGE&&hn.push(ca)}),!hn.length)return{width:0,height:0};Eh(We);let tn=1/0,kn=1/0,In=-1/0,Kn=-1/0;return hn.forEach(ca=>{const ea=We.node(ca),mi=.5*ea.width,va=ea.x-mi,Si=ea.x+mi;tn=va<tn?va:tn,In=Si>In?Si:In;const di=.5*ea.height,Pa=ea.y-di,Mi=ea.y+di;kn=Pa<kn?Pa:kn,Kn=Mi>Kn?Mi:Kn}),We.edges().forEach(ca=>{const ea=We.edge(ca),mi=We.node(ea.metaEdge.v),va=We.node(ea.metaEdge.w);if(ea.points.length===3&&function(Pa){let Mi=cr(Pa[0],Pa[1]);for(let Fi=1;Fi<Pa.length-1;Fi++){const yo=cr(Pa[Fi],Pa[Fi+1]);if(Math.abs(yo-Mi)>1)return!1;Mi=yo}return!0}(ea.points)){if(mi!=null){const Pa=mi.expanded?mi.x:Lr(mi);ea.points[0].x=Pa}if(va!=null){const Pa=va.expanded?va.x:Lr(va);ea.points[2].x=Pa}ea.points=[ea.points[0],ea.points[1]]}const Si=ea.points[ea.points.length-2];va!=null&&(ea.points[ea.points.length-1]=lr(Si,va));const di=ea.points[1];mi!=null&&(ea.points[0]=lr(di,mi)),ea.points.forEach(Pa=>{tn=Pa.x<tn?Pa.x:tn,In=Pa.x>In?Pa.x:In,kn=Pa.y<kn?Pa.y:kn,Kn=Pa.y>Kn?Pa.y:Kn})}),We.nodes().forEach(ca=>{const ea=We.node(ca);ea.x-=tn,ea.y-=kn}),We.edges().forEach(ca=>{We.edge(ca).points.forEach(ea=>{ea.x-=tn,ea.y-=kn})}),{width:In-tn,height:Kn-kn}}(U.coreGraph,te));let Zt=0;U.coreGraph.nodeCount()>0&&Zt++;const ye=Zt<=1?0:Zt;U.coreBox.width+=ye+ye,U.coreBox.height=ct.labelHeight+U.coreBox.height,U.width=U.coreBox.width+ct.paddingLeft+ct.paddingRight,U.height=U.paddingTop+U.coreBox.height+U.paddingBottom}(v,T)}function cr(v,T){const U=T.x-v.x,Z=T.y-v.y;return 180*Math.atan(Z/U)/Math.PI}function Lr(v){return v.expanded?v.x:v.x-v.width/2+0+v.coreBox.width/2}function lr(v,T){const U=T.expanded?T.x:Lr(T),Z=T.y,ot=v.x-U,ct=v.y-Z;let gt,bt,Mt=T.expanded?T.width:T.coreBox.width,Gt=T.expanded?T.height:T.coreBox.height;return Math.abs(ct)*Mt/2>Math.abs(ot)*Gt/2?(ct<0&&(Gt=-Gt),gt=ct===0?0:Gt/2*ot/ct,bt=Gt/2):(ot<0&&(Mt=-Mt),gt=Mt/2,bt=ot===0?0:Mt/2*ct/ot),{x:U+gt,y:Z+bt}}function hr(v,T,U){var Z,ot,ct,gt;const bt=v.nodes.filter((Zt,ye,We)=>We.findIndex(wr=>wr.id===Zt.id)!==ye).map(Zt=>Zt.id);if(bt.length)throw new Error(`Duplicated ids found: ${bt.join(", ")}`);const Mt=function(Zt){const ye={nodes:[]},We=Zt.compound,wr=Object.keys(We||{}),$e=new Map,tr=(jr,hn=[])=>{if($e.has(jr))return $e.get(jr);for(let tn=0;tn<wr.length;tn++){let kn=wr[tn];if(We&&We[kn].indexOf(jr)!==-1)return hn.unshift(kn),tr(kn,hn)}return hn.length===0&&$e.set(jr,hn),hn},Je=jr=>Zt.edges.filter(hn=>hn.w===jr).map(hn=>({name:hn.v}));return Zt.nodes.forEach(jr=>{const hn=jr.id,tn=[...tr(hn),hn];let kn=Je(hn);ye.nodes.push({name:hn,path:tn,inputs:kn,width:jr.width,height:jr.height,attr:Object.assign({},jr)})}),ye}(v),Gt=function(Zt,ye){const We=($e,tr)=>{for(let Je of tr.values())if(Je.includes($e))return!0;return!1},wr=($e,tr=[])=>{if(Object.keys($e).length===0)return[...new Set(tr)];const Je=new Map(Object.keys($e).map(hn=>[hn,$e[hn]])),jr={};for(let[hn,tn]of Je)We(hn,Je)?jr[hn]=tn:tr=tr.concat(hn,tn);return wr(jr,tr)};return wr(Zt).filter($e=>ye.includes($e))}(v.compound||{},(T==null?void 0:T.expanded)||[]),te=function(Zt,ye){return function(We){return new Tl(We)}(uh(wh(Zt),ye))}(Mt,{rankDirection:((ot=(Z=U==null?void 0:U.graph)===null||Z===void 0?void 0:Z.meta)===null||ot===void 0?void 0:ot.rankDir)||(T==null?void 0:T.rankDirection)||G.graph.meta.rankDir,align:((gt=(ct=U==null?void 0:U.graph)===null||ct===void 0?void 0:ct.meta)===null||gt===void 0?void 0:gt.align)||G.graph.meta.align});return function(Zt,ye){ye.forEach(We=>{const wr=Zt.getRenderInfoNodes().find(Je=>Je.displayName===We);let $e=wr&&wr.node&&wr.node.name||"";const tr=Zt.getRenderNodeByName($e);if(!tr)throw new Error(`No nodes found: ${$e}`);tr.expanded=!0,Zt.buildSubHierarchy($e)})}(te,Gt),Ee(te.root,U),$r(te.root)}function Yr(v,T=!1){const U=JSON.parse(JSON.stringify(v)),Z={nodes:[U],edges:[...U.edges]};return U.nodes.forEach(function ot(ct){(ct.type===0||ct.type===1)&&Z.nodes.push(ct),ct.type===0&&(Z.edges=Z.edges.concat(ct.edges)),Array.isArray(ct.nodes)&&ct.nodes.forEach(ot)}),T&&Z.nodes.forEach(ot=>{const ct=Z.nodes.find(gt=>gt.id===ot.parentNodeName);if(ct){const gt=ct.x-ct.width/2+ct.paddingLeft,bt=ct.y-ct.height/2+ct.labelHeight+ct.paddingTop;ct.id!==L&&(ot.x+=gt,ot.y+=bt),ot.type===0&&ot.edges.forEach(Mt=>{Mt.points.forEach(Gt=>{Gt.x+=ot.x-ot.width/2+ot.paddingLeft,Gt.y+=ot.y-ot.height/2+ot.labelHeight+ot.paddingTop})})}}),Z}function Vr(v,T,U,Z){var ot,ct;let gt=[];const bt=((ot=U.find(Zt=>Zt.id===v))===null||ot===void 0?void 0:ot.path)||[],Mt=((ct=U.find(Zt=>Zt.id===T))===null||ct===void 0?void 0:ct.path)||[],Gt=[L,...bt].slice(0,bt.length).reverse(),te=[L,...Mt].slice(0,Mt.length);return Gt.forEach(Zt=>{const ye=U.find(We=>We.id===Zt);gt=gt.concat(ye.edges.filter(We=>We.baseEdgeList.some(wr=>wr.v===((Z==null?void 0:Z.v)||v)&&wr.w===((Z==null?void 0:Z.w)||T))))}),te.filter(Zt=>!Gt.includes(Zt)).forEach(Zt=>{const ye=U.find(We=>We.id===Zt);gt=gt.concat(ye.edges.filter(We=>We.baseEdgeList.some(wr=>wr.v===((Z==null?void 0:Z.v)||v)&&wr.w===((Z==null?void 0:Z.w)||T))))}),gt}function $r(v){const T=v.coreGraph.nodes().map(Z=>v.coreGraph.node(Z));return Object.assign(Object.assign({},Gr(v)),{expanded:v.expanded,nodes:v.expanded?(U=T,U.map(Z=>Z.node.type===N.META?$r(Z):Gr(Z))):[],edges:v.expanded?nn(v):[]});var U}function Gr(v){return{id:v.node.name,name:v.node.name,type:v.node.type,cardinality:v.node.cardinality,attr:v.attr,parentNodeName:v.node.parentNode?v.node.parentNode.name:null,coreBox:Object.assign({},v.coreBox),x:v.x,y:v.y,width:v.width,height:v.height,radius:v.radius,labelHeight:v.labelHeight,labelOffset:v.labelOffset,outboxWidth:v.outboxWidth,paddingLeft:v.paddingLeft,paddingTop:v.paddingTop,paddingRight:v.paddingRight,paddingBottom:v.paddingBottom,path:v.node.path}}function nn(v){return v.coreGraph.edges().map(T=>({renderInfoEdge:v.coreGraph.edge(T),edge:T})).filter(({renderInfoEdge:T})=>T.metaEdge).map(({edge:T,renderInfoEdge:U})=>{const Z=function(ot,ct){const gt=ct.points.map(bt=>Object.assign({},bt));if(ct.adjoiningMetaEdge){const bt=ct.adjoiningMetaEdge.points,Mt=ct.metaEdge.inbound,Gt=Mt?bt[bt.length-1]:bt[0],te=gt[Mt?0:gt.length-1],Zt=ot.x-ot.width/2,ye=ot.y-ot.height/2,We=Gt.x-Zt,wr=Gt.y-ye,$e=-ot.paddingLeft,tr=-(ot.paddingTop+ot.labelHeight);te.x=We+$e,te.y=wr+tr}return gt}(v,U);return{adjoiningEdge:U.adjoiningMetaEdge?{w:U.adjoiningMetaEdge.metaEdge.w,v:U.adjoiningMetaEdge.metaEdge.v}:null,inbound:U.metaEdge.inbound,w:T.w,v:T.v,points:Z,weight:U.weight,baseEdgeList:U.metaEdge.baseEdgeList,parentNodeName:v.node.name}})}},249685:function(He,F,z){"use strict";z.r(F),z.d(F,{ARRAY_TYPE:function(){return X},EPSILON:function(){return G},RANDOM:function(){return R},equals:function(){return E},setMatrixArrayType:function(){return L},toRadian:function(){return N}});var G=1e-6,X=typeof Float32Array!="undefined"?Float32Array:Array,R=Math.random;function L(x){X=x}var P=Math.PI/180;function N(x){return x*P}function E(x,p){return Math.abs(x-p)<=G*Math.max(1,Math.abs(x),Math.abs(p))}Math.hypot||(Math.hypot=function(){for(var x=0,p=arguments.length;p--;)x+=arguments[p]*arguments[p];return Math.sqrt(x)})},858204:function(He,F,z){"use strict";z.r(F),z.d(F,{glMatrix:function(){return E},mat2:function(){return G},mat2d:function(){return X},mat3:function(){return Ur},mat4:function(){return R},quat:function(){return P},quat2:function(){return N},vec2:function(){return Bf},vec3:function(){return an},vec4:function(){return L}});var G={};z.r(G),z.d(G,{LDU:function(){return Q},add:function(){return it},adjoint:function(){return B},clone:function(){return p},copy:function(){return y},create:function(){return x},determinant:function(){return m},equals:function(){return Ot},exactEquals:function(){return dt},frob:function(){return rt},fromRotation:function(){return V},fromScaling:function(){return $},fromValues:function(){return A},identity:function(){return g},invert:function(){return O},mul:function(){return Ft},multiply:function(){return d},multiplyScalar:function(){return It},multiplyScalarAndAdd:function(){return Kt},rotate:function(){return tt},scale:function(){return Y},set:function(){return _},str:function(){return q},sub:function(){return Nt},subtract:function(){return ht},transpose:function(){return S}});var X={};z.r(X),z.d(X,{add:function(){return ie},clone:function(){return yt},copy:function(){return kt},create:function(){return st},determinant:function(){return er},equals:function(){return Ct},exactEquals:function(){return Ge},frob:function(){return Yt},fromRotation:function(){return we},fromScaling:function(){return zt},fromTranslation:function(){return Wt},fromValues:function(){return $t},identity:function(){return ee},invert:function(){return Pe},mul:function(){return Nr},multiply:function(){return Jt},multiplyScalar:function(){return re},multiplyScalarAndAdd:function(){return _e},rotate:function(){return ae},scale:function(){return Se},set:function(){return ge},str:function(){return Ie},sub:function(){return Or},subtract:function(){return Oe},translate:function(){return xe}});var R={};z.r(R),z.d(R,{add:function(){return on},adjoint:function(){return nr},clone:function(){return gn},copy:function(){return Rr},create:function(){return Sr},determinant:function(){return dr},equals:function(){return Jn},exactEquals:function(){return Rn},frob:function(){return Er},fromQuat:function(){return At},fromQuat2:function(){return nt},fromRotation:function(){return Dn},fromRotationTranslation:function(){return ft},fromRotationTranslationScale:function(){return j},fromRotationTranslationScaleOrigin:function(){return xt},fromScaling:function(){return Wn},fromTranslation:function(){return dn},fromValues:function(){return ln},fromXRotation:function(){return Cn},fromYRotation:function(){return la},fromZRotation:function(){return K},frustum:function(){return wt},getRotation:function(){return C},getScaling:function(){return M},getTranslation:function(){return k},identity:function(){return Ln},invert:function(){return Qe},lookAt:function(){return Mn},mul:function(){return Ga},multiply:function(){return Pr},multiplyScalar:function(){return xa},multiplyScalarAndAdd:function(){return Ta},ortho:function(){return ir},orthoNO:function(){return br},orthoZO:function(){return mr},perspective:function(){return Me},perspectiveFromFieldOfView:function(){return Ke},perspectiveNO:function(){return Pt},perspectiveZO:function(){return ve},rotate:function(){return rn},rotateX:function(){return jn},rotateY:function(){return Hn},rotateZ:function(){return oa},scale:function(){return pn},set:function(){return Nn},str:function(){return vr},sub:function(){return Aa},subtract:function(){return Wr},targetTo:function(){return Xe},translate:function(){return en},transpose:function(){return fn}});var L={};z.r(L),z.d(L,{add:function(){return be},ceil:function(){return Jr},clone:function(){return me},copy:function(){return fe},create:function(){return Vn},cross:function(){return uo},dist:function(){return So},distance:function(){return ta},div:function(){return Yn},divide:function(){return Fr},dot:function(){return bo},equals:function(){return _o},exactEquals:function(){return Go},floor:function(){return Pn},forEach:function(){return Lo},fromValues:function(){return Dt},inverse:function(){return so},len:function(){return Wi},length:function(){return Co},lerp:function(){return Hi},max:function(){return Zn},min:function(){return Bn},mul:function(){return $s},multiply:function(){return sr},negate:function(){return xi},normalize:function(){return To},random:function(){return ds},round:function(){return ba},scale:function(){return Ca},scaleAndAdd:function(){return li},set:function(){return Ae},sqrDist:function(){return Oo},sqrLen:function(){return zn},squaredDistance:function(){return fi},squaredLength:function(){return La},str:function(){return Ms},sub:function(){return Io},subtract:function(){return De},transformMat4:function(){return zi},transformQuat:function(){return Ui},zero:function(){return gs}});var P={};z.r(P),z.d(P,{add:function(){return yi},calculateW:function(){return Wo},clone:function(){return Yi},conjugate:function(){return iu},copy:function(){return pa},create:function(){return Ai},dot:function(){return Ki},equals:function(){return ci},exactEquals:function(){return Cs},exp:function(){return No},fromEuler:function(){return os},fromMat3:function(){return Xi},fromValues:function(){return co},getAngle:function(){return eo},getAxisAngle:function(){return ps},identity:function(){return zo},invert:function(){return As},len:function(){return ts},length:function(){return wo},lerp:function(){return Yo},ln:function(){return is},mul:function(){return no},multiply:function(){return ro},normalize:function(){return ou},pow:function(){return Xo},random:function(){return Xa},rotateX:function(){return ei},rotateY:function(){return fo},rotateZ:function(){return Do},rotationTo:function(){return Po},scale:function(){return ki},set:function(){return ja},setAxes:function(){return ho},setAxisAngle:function(){return Uo},slerp:function(){return Jo},sqlerp:function(){return Wu},sqrLen:function(){return Rs},squaredLength:function(){return lo},str:function(){return Eo}});var N={};z.r(N),z.d(N,{add:function(){return Ri},clone:function(){return Ts},conjugate:function(){return fu},copy:function(){return Gs},create:function(){return Bs},dot:function(){return Au},equals:function(){return Os},exactEquals:function(){return Rf},fromMat4:function(){return su},fromRotation:function(){return us},fromRotationTranslation:function(){return ss},fromRotationTranslationValues:function(){return Fs},fromTranslation:function(){return jo},fromValues:function(){return Vo},getDual:function(){return ze},getReal:function(){return jt},getTranslation:function(){return cn},identity:function(){return fs},invert:function(){return Qs},len:function(){return Js},length:function(){return Is},lerp:function(){return uu},mul:function(){return qs},multiply:function(){return vo},normalize:function(){return rf},rotateAroundAxis:function(){return Mu},rotateByQuatAppend:function(){return ao},rotateByQuatPrepend:function(){return zs},rotateX:function(){return aa},rotateY:function(){return ai},rotateZ:function(){return Zi},scale:function(){return Xu},set:function(){return Tt},setDual:function(){return Cr},setReal:function(){return Ze},sqrLen:function(){return Mo},squaredLength:function(){return cs},str:function(){return kf},translate:function(){return mn}});var E=z(249685);function x(){var h=new E.ARRAY_TYPE(4);return E.ARRAY_TYPE!=Float32Array&&(h[1]=0,h[2]=0),h[0]=1,h[3]=1,h}function p(h){var D=new E.ARRAY_TYPE(4);return D[0]=h[0],D[1]=h[1],D[2]=h[2],D[3]=h[3],D}function y(h,D){return h[0]=D[0],h[1]=D[1],h[2]=D[2],h[3]=D[3],h}function g(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=1,h}function A(h,D,vt,Et){var Lt=new E.ARRAY_TYPE(4);return Lt[0]=h,Lt[1]=D,Lt[2]=vt,Lt[3]=Et,Lt}function _(h,D,vt,Et,Lt){return h[0]=D,h[1]=vt,h[2]=Et,h[3]=Lt,h}function S(h,D){if(h===D){var vt=D[1];h[1]=D[2],h[2]=vt}else h[0]=D[0],h[1]=D[2],h[2]=D[1],h[3]=D[3];return h}function O(h,D){var vt=D[0],Et=D[1],Lt=D[2],Xt=D[3],Vt=vt*Xt-Lt*Et;return Vt?(Vt=1/Vt,h[0]=Xt*Vt,h[1]=-Et*Vt,h[2]=-Lt*Vt,h[3]=vt*Vt,h):null}function B(h,D){var vt=D[0];return h[0]=D[3],h[1]=-D[1],h[2]=-D[2],h[3]=vt,h}function m(h){return h[0]*h[3]-h[2]*h[1]}function d(h,D,vt){var Et=D[0],Lt=D[1],Xt=D[2],Vt=D[3],ue=vt[0],he=vt[1],Ce=vt[2],Ye=vt[3];return h[0]=Et*ue+Xt*he,h[1]=Lt*ue+Vt*he,h[2]=Et*Ce+Xt*Ye,h[3]=Lt*Ce+Vt*Ye,h}function tt(h,D,vt){var Et=D[0],Lt=D[1],Xt=D[2],Vt=D[3],ue=Math.sin(vt),he=Math.cos(vt);return h[0]=Et*he+Xt*ue,h[1]=Lt*he+Vt*ue,h[2]=Et*-ue+Xt*he,h[3]=Lt*-ue+Vt*he,h}function Y(h,D,vt){var Et=D[0],Lt=D[1],Xt=D[2],Vt=D[3],ue=vt[0],he=vt[1];return h[0]=Et*ue,h[1]=Lt*ue,h[2]=Xt*he,h[3]=Vt*he,h}function V(h,D){var vt=Math.sin(D),Et=Math.cos(D);return h[0]=Et,h[1]=vt,h[2]=-vt,h[3]=Et,h}function $(h,D){return h[0]=D[0],h[1]=0,h[2]=0,h[3]=D[1],h}function q(h){return"mat2("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+")"}function rt(h){return Math.hypot(h[0],h[1],h[2],h[3])}function Q(h,D,vt,Et){return h[2]=Et[2]/Et[0],vt[0]=Et[0],vt[1]=Et[1],vt[3]=Et[3]-h[2]*vt[1],[h,D,vt]}function it(h,D,vt){return h[0]=D[0]+vt[0],h[1]=D[1]+vt[1],h[2]=D[2]+vt[2],h[3]=D[3]+vt[3],h}function ht(h,D,vt){return h[0]=D[0]-vt[0],h[1]=D[1]-vt[1],h[2]=D[2]-vt[2],h[3]=D[3]-vt[3],h}function dt(h,D){return h[0]===D[0]&&h[1]===D[1]&&h[2]===D[2]&&h[3]===D[3]}function Ot(h,D){var vt=h[0],Et=h[1],Lt=h[2],Xt=h[3],Vt=D[0],ue=D[1],he=D[2],Ce=D[3];return Math.abs(vt-Vt)<=E.EPSILON*Math.max(1,Math.abs(vt),Math.abs(Vt))&&Math.abs(Et-ue)<=E.EPSILON*Math.max(1,Math.abs(Et),Math.abs(ue))&&Math.abs(Lt-he)<=E.EPSILON*Math.max(1,Math.abs(Lt),Math.abs(he))&&Math.abs(Xt-Ce)<=E.EPSILON*Math.max(1,Math.abs(Xt),Math.abs(Ce))}function It(h,D,vt){return h[0]=D[0]*vt,h[1]=D[1]*vt,h[2]=D[2]*vt,h[3]=D[3]*vt,h}function Kt(h,D,vt,Et){return h[0]=D[0]+vt[0]*Et,h[1]=D[1]+vt[1]*Et,h[2]=D[2]+vt[2]*Et,h[3]=D[3]+vt[3]*Et,h}var Ft=d,Nt=ht;function st(){var h=new E.ARRAY_TYPE(6);return E.ARRAY_TYPE!=Float32Array&&(h[1]=0,h[2]=0,h[4]=0,h[5]=0),h[0]=1,h[3]=1,h}function yt(h){var D=new E.ARRAY_TYPE(6);return D[0]=h[0],D[1]=h[1],D[2]=h[2],D[3]=h[3],D[4]=h[4],D[5]=h[5],D}function kt(h,D){return h[0]=D[0],h[1]=D[1],h[2]=D[2],h[3]=D[3],h[4]=D[4],h[5]=D[5],h}function ee(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=1,h[4]=0,h[5]=0,h}function $t(h,D,vt,Et,Lt,Xt){var Vt=new E.ARRAY_TYPE(6);return Vt[0]=h,Vt[1]=D,Vt[2]=vt,Vt[3]=Et,Vt[4]=Lt,Vt[5]=Xt,Vt}function ge(h,D,vt,Et,Lt,Xt,Vt){return h[0]=D,h[1]=vt,h[2]=Et,h[3]=Lt,h[4]=Xt,h[5]=Vt,h}function Pe(h,D){var vt=D[0],Et=D[1],Lt=D[2],Xt=D[3],Vt=D[4],ue=D[5],he=vt*Xt-Et*Lt;return he?(he=1/he,h[0]=Xt*he,h[1]=-Et*he,h[2]=-Lt*he,h[3]=vt*he,h[4]=(Lt*ue-Xt*Vt)*he,h[5]=(Et*Vt-vt*ue)*he,h):null}function er(h){return h[0]*h[3]-h[1]*h[2]}function Jt(h,D,vt){var Et=D[0],Lt=D[1],Xt=D[2],Vt=D[3],ue=D[4],he=D[5],Ce=vt[0],Ye=vt[1],yr=vt[2],xr=vt[3],pr=vt[4],Zr=vt[5];return h[0]=Et*Ce+Xt*Ye,h[1]=Lt*Ce+Vt*Ye,h[2]=Et*yr+Xt*xr,h[3]=Lt*yr+Vt*xr,h[4]=Et*pr+Xt*Zr+ue,h[5]=Lt*pr+Vt*Zr+he,h}function ae(h,D,vt){var Et=D[0],Lt=D[1],Xt=D[2],Vt=D[3],ue=D[4],he=D[5],Ce=Math.sin(vt),Ye=Math.cos(vt);return h[0]=Et*Ye+Xt*Ce,h[1]=Lt*Ye+Vt*Ce,h[2]=Et*-Ce+Xt*Ye,h[3]=Lt*-Ce+Vt*Ye,h[4]=ue,h[5]=he,h}function Se(h,D,vt){var Et=D[0],Lt=D[1],Xt=D[2],Vt=D[3],ue=D[4],he=D[5],Ce=vt[0],Ye=vt[1];return h[0]=Et*Ce,h[1]=Lt*Ce,h[2]=Xt*Ye,h[3]=Vt*Ye,h[4]=ue,h[5]=he,h}function xe(h,D,vt){var Et=D[0],Lt=D[1],Xt=D[2],Vt=D[3],ue=D[4],he=D[5],Ce=vt[0],Ye=vt[1];return h[0]=Et,h[1]=Lt,h[2]=Xt,h[3]=Vt,h[4]=Et*Ce+Xt*Ye+ue,h[5]=Lt*Ce+Vt*Ye+he,h}function we(h,D){var vt=Math.sin(D),Et=Math.cos(D);return h[0]=Et,h[1]=vt,h[2]=-vt,h[3]=Et,h[4]=0,h[5]=0,h}function zt(h,D){return h[0]=D[0],h[1]=0,h[2]=0,h[3]=D[1],h[4]=0,h[5]=0,h}function Wt(h,D){return h[0]=1,h[1]=0,h[2]=0,h[3]=1,h[4]=D[0],h[5]=D[1],h}function Ie(h){return"mat2d("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+", "+h[4]+", "+h[5]+")"}function Yt(h){return Math.hypot(h[0],h[1],h[2],h[3],h[4],h[5],1)}function ie(h,D,vt){return h[0]=D[0]+vt[0],h[1]=D[1]+vt[1],h[2]=D[2]+vt[2],h[3]=D[3]+vt[3],h[4]=D[4]+vt[4],h[5]=D[5]+vt[5],h}function Oe(h,D,vt){return h[0]=D[0]-vt[0],h[1]=D[1]-vt[1],h[2]=D[2]-vt[2],h[3]=D[3]-vt[3],h[4]=D[4]-vt[4],h[5]=D[5]-vt[5],h}function re(h,D,vt){return h[0]=D[0]*vt,h[1]=D[1]*vt,h[2]=D[2]*vt,h[3]=D[3]*vt,h[4]=D[4]*vt,h[5]=D[5]*vt,h}function _e(h,D,vt,Et){return h[0]=D[0]+vt[0]*Et,h[1]=D[1]+vt[1]*Et,h[2]=D[2]+vt[2]*Et,h[3]=D[3]+vt[3]*Et,h[4]=D[4]+vt[4]*Et,h[5]=D[5]+vt[5]*Et,h}function Ge(h,D){return h[0]===D[0]&&h[1]===D[1]&&h[2]===D[2]&&h[3]===D[3]&&h[4]===D[4]&&h[5]===D[5]}function Ct(h,D){var vt=h[0],Et=h[1],Lt=h[2],Xt=h[3],Vt=h[4],ue=h[5],he=D[0],Ce=D[1],Ye=D[2],yr=D[3],xr=D[4],pr=D[5];return Math.abs(vt-he)<=E.EPSILON*Math.max(1,Math.abs(vt),Math.abs(he))&&Math.abs(Et-Ce)<=E.EPSILON*Math.max(1,Math.abs(Et),Math.abs(Ce))&&Math.abs(Lt-Ye)<=E.EPSILON*Math.max(1,Math.abs(Lt),Math.abs(Ye))&&Math.abs(Xt-yr)<=E.EPSILON*Math.max(1,Math.abs(Xt),Math.abs(yr))&&Math.abs(Vt-xr)<=E.EPSILON*Math.max(1,Math.abs(Vt),Math.abs(xr))&&Math.abs(ue-pr)<=E.EPSILON*Math.max(1,Math.abs(ue),Math.abs(pr))}var Nr=Jt,Or=Oe,Ur=z(935600);function Sr(){var h=new E.ARRAY_TYPE(16);return E.ARRAY_TYPE!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=0,h[12]=0,h[13]=0,h[14]=0),h[0]=1,h[5]=1,h[10]=1,h[15]=1,h}function gn(h){var D=new E.ARRAY_TYPE(16);return D[0]=h[0],D[1]=h[1],D[2]=h[2],D[3]=h[3],D[4]=h[4],D[5]=h[5],D[6]=h[6],D[7]=h[7],D[8]=h[8],D[9]=h[9],D[10]=h[10],D[11]=h[11],D[12]=h[12],D[13]=h[13],D[14]=h[14],D[15]=h[15],D}function Rr(h,D){return h[0]=D[0],h[1]=D[1],h[2]=D[2],h[3]=D[3],h[4]=D[4],h[5]=D[5],h[6]=D[6],h[7]=D[7],h[8]=D[8],h[9]=D[9],h[10]=D[10],h[11]=D[11],h[12]=D[12],h[13]=D[13],h[14]=D[14],h[15]=D[15],h}function ln(h,D,vt,Et,Lt,Xt,Vt,ue,he,Ce,Ye,yr,xr,pr,Zr,qr){var Tr=new E.ARRAY_TYPE(16);return Tr[0]=h,Tr[1]=D,Tr[2]=vt,Tr[3]=Et,Tr[4]=Lt,Tr[5]=Xt,Tr[6]=Vt,Tr[7]=ue,Tr[8]=he,Tr[9]=Ce,Tr[10]=Ye,Tr[11]=yr,Tr[12]=xr,Tr[13]=pr,Tr[14]=Zr,Tr[15]=qr,Tr}function Nn(h,D,vt,Et,Lt,Xt,Vt,ue,he,Ce,Ye,yr,xr,pr,Zr,qr,Tr){return h[0]=D,h[1]=vt,h[2]=Et,h[3]=Lt,h[4]=Xt,h[5]=Vt,h[6]=ue,h[7]=he,h[8]=Ce,h[9]=Ye,h[10]=yr,h[11]=xr,h[12]=pr,h[13]=Zr,h[14]=qr,h[15]=Tr,h}function Ln(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function fn(h,D){if(h===D){var vt=D[1],Et=D[2],Lt=D[3],Xt=D[6],Vt=D[7],ue=D[11];h[1]=D[4],h[2]=D[8],h[3]=D[12],h[4]=vt,h[6]=D[9],h[7]=D[13],h[8]=Et,h[9]=Xt,h[11]=D[14],h[12]=Lt,h[13]=Vt,h[14]=ue}else h[0]=D[0],h[1]=D[4],h[2]=D[8],h[3]=D[12],h[4]=D[1],h[5]=D[5],h[6]=D[9],h[7]=D[13],h[8]=D[2],h[9]=D[6],h[10]=D[10],h[11]=D[14],h[12]=D[3],h[13]=D[7],h[14]=D[11],h[15]=D[15];return h}function Qe(h,D){var vt=D[0],Et=D[1],Lt=D[2],Xt=D[3],Vt=D[4],ue=D[5],he=D[6],Ce=D[7],Ye=D[8],yr=D[9],xr=D[10],pr=D[11],Zr=D[12],qr=D[13],Tr=D[14],_n=D[15],Ea=vt*ue-Et*Vt,wa=vt*he-Lt*Vt,ha=vt*Ce-Xt*Vt,qn=Et*he-Lt*ue,sa=Et*Ce-Xt*ue,Ni=Lt*Ce-Xt*he,Ci=Ye*qr-yr*Zr,_i=Ye*Tr-xr*Zr,Ti=Ye*_n-pr*Zr,Ii=yr*Tr-xr*qr,Bi=yr*_n-pr*qr,$i=xr*_n-pr*Tr,za=Ea*$i-wa*Bi+ha*Ii+qn*Ti-sa*_i+Ni*Ci;return za?(za=1/za,h[0]=(ue*$i-he*Bi+Ce*Ii)*za,h[1]=(Lt*Bi-Et*$i-Xt*Ii)*za,h[2]=(qr*Ni-Tr*sa+_n*qn)*za,h[3]=(xr*sa-yr*Ni-pr*qn)*za,h[4]=(he*Ti-Vt*$i-Ce*_i)*za,h[5]=(vt*$i-Lt*Ti+Xt*_i)*za,h[6]=(Tr*ha-Zr*Ni-_n*wa)*za,h[7]=(Ye*Ni-xr*ha+pr*wa)*za,h[8]=(Vt*Bi-ue*Ti+Ce*Ci)*za,h[9]=(Et*Ti-vt*Bi-Xt*Ci)*za,h[10]=(Zr*sa-qr*ha+_n*Ea)*za,h[11]=(yr*ha-Ye*sa-pr*Ea)*za,h[12]=(ue*_i-Vt*Ii-he*Ci)*za,h[13]=(vt*Ii-Et*_i+Lt*Ci)*za,h[14]=(qr*wa-Zr*qn-Tr*Ea)*za,h[15]=(Ye*qn-yr*wa+xr*Ea)*za,h):null}function nr(h,D){var vt=D[0],Et=D[1],Lt=D[2],Xt=D[3],Vt=D[4],ue=D[5],he=D[6],Ce=D[7],Ye=D[8],yr=D[9],xr=D[10],pr=D[11],Zr=D[12],qr=D[13],Tr=D[14],_n=D[15];return h[0]=ue*(xr*_n-pr*Tr)-yr*(he*_n-Ce*Tr)+qr*(he*pr-Ce*xr),h[1]=-(Et*(xr*_n-pr*Tr)-yr*(Lt*_n-Xt*Tr)+qr*(Lt*pr-Xt*xr)),h[2]=Et*(he*_n-Ce*Tr)-ue*(Lt*_n-Xt*Tr)+qr*(Lt*Ce-Xt*he),h[3]=-(Et*(he*pr-Ce*xr)-ue*(Lt*pr-Xt*xr)+yr*(Lt*Ce-Xt*he)),h[4]=-(Vt*(xr*_n-pr*Tr)-Ye*(he*_n-Ce*Tr)+Zr*(he*pr-Ce*xr)),h[5]=vt*(xr*_n-pr*Tr)-Ye*(Lt*_n-Xt*Tr)+Zr*(Lt*pr-Xt*xr),h[6]=-(vt*(he*_n-Ce*Tr)-Vt*(Lt*_n-Xt*Tr)+Zr*(Lt*Ce-Xt*he)),h[7]=vt*(he*pr-Ce*xr)-Vt*(Lt*pr-Xt*xr)+Ye*(Lt*Ce-Xt*he),h[8]=Vt*(yr*_n-pr*qr)-Ye*(ue*_n-Ce*qr)+Zr*(ue*pr-Ce*yr),h[9]=-(vt*(yr*_n-pr*qr)-Ye*(Et*_n-Xt*qr)+Zr*(Et*pr-Xt*yr)),h[10]=vt*(ue*_n-Ce*qr)-Vt*(Et*_n-Xt*qr)+Zr*(Et*Ce-Xt*ue),h[11]=-(vt*(ue*pr-Ce*yr)-Vt*(Et*pr-Xt*yr)+Ye*(Et*Ce-Xt*ue)),h[12]=-(Vt*(yr*Tr-xr*qr)-Ye*(ue*Tr-he*qr)+Zr*(ue*xr-he*yr)),h[13]=vt*(yr*Tr-xr*qr)-Ye*(Et*Tr-Lt*qr)+Zr*(Et*xr-Lt*yr),h[14]=-(vt*(ue*Tr-he*qr)-Vt*(Et*Tr-Lt*qr)+Zr*(Et*he-Lt*ue)),h[15]=vt*(ue*xr-he*yr)-Vt*(Et*xr-Lt*yr)+Ye*(Et*he-Lt*ue),h}function dr(h){var D=h[0],vt=h[1],Et=h[2],Lt=h[3],Xt=h[4],Vt=h[5],ue=h[6],he=h[7],Ce=h[8],Ye=h[9],yr=h[10],xr=h[11],pr=h[12],Zr=h[13],qr=h[14],Tr=h[15],_n=D*Vt-vt*Xt,Ea=D*ue-Et*Xt,wa=D*he-Lt*Xt,ha=vt*ue-Et*Vt,qn=vt*he-Lt*Vt,sa=Et*he-Lt*ue,Ni=Ce*Zr-Ye*pr,Ci=Ce*qr-yr*pr,_i=Ce*Tr-xr*pr,Ti=Ye*qr-yr*Zr,Ii=Ye*Tr-xr*Zr,Bi=yr*Tr-xr*qr;return _n*Bi-Ea*Ii+wa*Ti+ha*_i-qn*Ci+sa*Ni}function Pr(h,D,vt){var Et=D[0],Lt=D[1],Xt=D[2],Vt=D[3],ue=D[4],he=D[5],Ce=D[6],Ye=D[7],yr=D[8],xr=D[9],pr=D[10],Zr=D[11],qr=D[12],Tr=D[13],_n=D[14],Ea=D[15],wa=vt[0],ha=vt[1],qn=vt[2],sa=vt[3];return h[0]=wa*Et+ha*ue+qn*yr+sa*qr,h[1]=wa*Lt+ha*he+qn*xr+sa*Tr,h[2]=wa*Xt+ha*Ce+qn*pr+sa*_n,h[3]=wa*Vt+ha*Ye+qn*Zr+sa*Ea,wa=vt[4],ha=vt[5],qn=vt[6],sa=vt[7],h[4]=wa*Et+ha*ue+qn*yr+sa*qr,h[5]=wa*Lt+ha*he+qn*xr+sa*Tr,h[6]=wa*Xt+ha*Ce+qn*pr+sa*_n,h[7]=wa*Vt+ha*Ye+qn*Zr+sa*Ea,wa=vt[8],ha=vt[9],qn=vt[10],sa=vt[11],h[8]=wa*Et+ha*ue+qn*yr+sa*qr,h[9]=wa*Lt+ha*he+qn*xr+sa*Tr,h[10]=wa*Xt+ha*Ce+qn*pr+sa*_n,h[11]=wa*Vt+ha*Ye+qn*Zr+sa*Ea,wa=vt[12],ha=vt[13],qn=vt[14],sa=vt[15],h[12]=wa*Et+ha*ue+qn*yr+sa*qr,h[13]=wa*Lt+ha*he+qn*xr+sa*Tr,h[14]=wa*Xt+ha*Ce+qn*pr+sa*_n,h[15]=wa*Vt+ha*Ye+qn*Zr+sa*Ea,h}function en(h,D,vt){var Et=vt[0],Lt=vt[1],Xt=vt[2],Vt,ue,he,Ce,Ye,yr,xr,pr,Zr,qr,Tr,_n;return D===h?(h[12]=D[0]*Et+D[4]*Lt+D[8]*Xt+D[12],h[13]=D[1]*Et+D[5]*Lt+D[9]*Xt+D[13],h[14]=D[2]*Et+D[6]*Lt+D[10]*Xt+D[14],h[15]=D[3]*Et+D[7]*Lt+D[11]*Xt+D[15]):(Vt=D[0],ue=D[1],he=D[2],Ce=D[3],Ye=D[4],yr=D[5],xr=D[6],pr=D[7],Zr=D[8],qr=D[9],Tr=D[10],_n=D[11],h[0]=Vt,h[1]=ue,h[2]=he,h[3]=Ce,h[4]=Ye,h[5]=yr,h[6]=xr,h[7]=pr,h[8]=Zr,h[9]=qr,h[10]=Tr,h[11]=_n,h[12]=Vt*Et+Ye*Lt+Zr*Xt+D[12],h[13]=ue*Et+yr*Lt+qr*Xt+D[13],h[14]=he*Et+xr*Lt+Tr*Xt+D[14],h[15]=Ce*Et+pr*Lt+_n*Xt+D[15]),h}function pn(h,D,vt){var Et=vt[0],Lt=vt[1],Xt=vt[2];return h[0]=D[0]*Et,h[1]=D[1]*Et,h[2]=D[2]*Et,h[3]=D[3]*Et,h[4]=D[4]*Lt,h[5]=D[5]*Lt,h[6]=D[6]*Lt,h[7]=D[7]*Lt,h[8]=D[8]*Xt,h[9]=D[9]*Xt,h[10]=D[10]*Xt,h[11]=D[11]*Xt,h[12]=D[12],h[13]=D[13],h[14]=D[14],h[15]=D[15],h}function rn(h,D,vt,Et){var Lt=Et[0],Xt=Et[1],Vt=Et[2],ue=Math.hypot(Lt,Xt,Vt),he,Ce,Ye,yr,xr,pr,Zr,qr,Tr,_n,Ea,wa,ha,qn,sa,Ni,Ci,_i,Ti,Ii,Bi,$i,za,ii;return ue<E.EPSILON?null:(ue=1/ue,Lt*=ue,Xt*=ue,Vt*=ue,he=Math.sin(vt),Ce=Math.cos(vt),Ye=1-Ce,yr=D[0],xr=D[1],pr=D[2],Zr=D[3],qr=D[4],Tr=D[5],_n=D[6],Ea=D[7],wa=D[8],ha=D[9],qn=D[10],sa=D[11],Ni=Lt*Lt*Ye+Ce,Ci=Xt*Lt*Ye+Vt*he,_i=Vt*Lt*Ye-Xt*he,Ti=Lt*Xt*Ye-Vt*he,Ii=Xt*Xt*Ye+Ce,Bi=Vt*Xt*Ye+Lt*he,$i=Lt*Vt*Ye+Xt*he,za=Xt*Vt*Ye-Lt*he,ii=Vt*Vt*Ye+Ce,h[0]=yr*Ni+qr*Ci+wa*_i,h[1]=xr*Ni+Tr*Ci+ha*_i,h[2]=pr*Ni+_n*Ci+qn*_i,h[3]=Zr*Ni+Ea*Ci+sa*_i,h[4]=yr*Ti+qr*Ii+wa*Bi,h[5]=xr*Ti+Tr*Ii+ha*Bi,h[6]=pr*Ti+_n*Ii+qn*Bi,h[7]=Zr*Ti+Ea*Ii+sa*Bi,h[8]=yr*$i+qr*za+wa*ii,h[9]=xr*$i+Tr*za+ha*ii,h[10]=pr*$i+_n*za+qn*ii,h[11]=Zr*$i+Ea*za+sa*ii,D!==h&&(h[12]=D[12],h[13]=D[13],h[14]=D[14],h[15]=D[15]),h)}function jn(h,D,vt){var Et=Math.sin(vt),Lt=Math.cos(vt),Xt=D[4],Vt=D[5],ue=D[6],he=D[7],Ce=D[8],Ye=D[9],yr=D[10],xr=D[11];return D!==h&&(h[0]=D[0],h[1]=D[1],h[2]=D[2],h[3]=D[3],h[12]=D[12],h[13]=D[13],h[14]=D[14],h[15]=D[15]),h[4]=Xt*Lt+Ce*Et,h[5]=Vt*Lt+Ye*Et,h[6]=ue*Lt+yr*Et,h[7]=he*Lt+xr*Et,h[8]=Ce*Lt-Xt*Et,h[9]=Ye*Lt-Vt*Et,h[10]=yr*Lt-ue*Et,h[11]=xr*Lt-he*Et,h}function Hn(h,D,vt){var Et=Math.sin(vt),Lt=Math.cos(vt),Xt=D[0],Vt=D[1],ue=D[2],he=D[3],Ce=D[8],Ye=D[9],yr=D[10],xr=D[11];return D!==h&&(h[4]=D[4],h[5]=D[5],h[6]=D[6],h[7]=D[7],h[12]=D[12],h[13]=D[13],h[14]=D[14],h[15]=D[15]),h[0]=Xt*Lt-Ce*Et,h[1]=Vt*Lt-Ye*Et,h[2]=ue*Lt-yr*Et,h[3]=he*Lt-xr*Et,h[8]=Xt*Et+Ce*Lt,h[9]=Vt*Et+Ye*Lt,h[10]=ue*Et+yr*Lt,h[11]=he*Et+xr*Lt,h}function oa(h,D,vt){var Et=Math.sin(vt),Lt=Math.cos(vt),Xt=D[0],Vt=D[1],ue=D[2],he=D[3],Ce=D[4],Ye=D[5],yr=D[6],xr=D[7];return D!==h&&(h[8]=D[8],h[9]=D[9],h[10]=D[10],h[11]=D[11],h[12]=D[12],h[13]=D[13],h[14]=D[14],h[15]=D[15]),h[0]=Xt*Lt+Ce*Et,h[1]=Vt*Lt+Ye*Et,h[2]=ue*Lt+yr*Et,h[3]=he*Lt+xr*Et,h[4]=Ce*Lt-Xt*Et,h[5]=Ye*Lt-Vt*Et,h[6]=yr*Lt-ue*Et,h[7]=xr*Lt-he*Et,h}function dn(h,D){return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=D[0],h[13]=D[1],h[14]=D[2],h[15]=1,h}function Wn(h,D){return h[0]=D[0],h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=D[1],h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=D[2],h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function Dn(h,D,vt){var Et=vt[0],Lt=vt[1],Xt=vt[2],Vt=Math.hypot(Et,Lt,Xt),ue,he,Ce;return Vt<E.EPSILON?null:(Vt=1/Vt,Et*=Vt,Lt*=Vt,Xt*=Vt,ue=Math.sin(D),he=Math.cos(D),Ce=1-he,h[0]=Et*Et*Ce+he,h[1]=Lt*Et*Ce+Xt*ue,h[2]=Xt*Et*Ce-Lt*ue,h[3]=0,h[4]=Et*Lt*Ce-Xt*ue,h[5]=Lt*Lt*Ce+he,h[6]=Xt*Lt*Ce+Et*ue,h[7]=0,h[8]=Et*Xt*Ce+Lt*ue,h[9]=Lt*Xt*Ce-Et*ue,h[10]=Xt*Xt*Ce+he,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h)}function Cn(h,D){var vt=Math.sin(D),Et=Math.cos(D);return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=Et,h[6]=vt,h[7]=0,h[8]=0,h[9]=-vt,h[10]=Et,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function la(h,D){var vt=Math.sin(D),Et=Math.cos(D);return h[0]=Et,h[1]=0,h[2]=-vt,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=vt,h[9]=0,h[10]=Et,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function K(h,D){var vt=Math.sin(D),Et=Math.cos(D);return h[0]=Et,h[1]=vt,h[2]=0,h[3]=0,h[4]=-vt,h[5]=Et,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function ft(h,D,vt){var Et=D[0],Lt=D[1],Xt=D[2],Vt=D[3],ue=Et+Et,he=Lt+Lt,Ce=Xt+Xt,Ye=Et*ue,yr=Et*he,xr=Et*Ce,pr=Lt*he,Zr=Lt*Ce,qr=Xt*Ce,Tr=Vt*ue,_n=Vt*he,Ea=Vt*Ce;return h[0]=1-(pr+qr),h[1]=yr+Ea,h[2]=xr-_n,h[3]=0,h[4]=yr-Ea,h[5]=1-(Ye+qr),h[6]=Zr+Tr,h[7]=0,h[8]=xr+_n,h[9]=Zr-Tr,h[10]=1-(Ye+pr),h[11]=0,h[12]=vt[0],h[13]=vt[1],h[14]=vt[2],h[15]=1,h}function nt(h,D){var vt=new E.ARRAY_TYPE(3),Et=-D[0],Lt=-D[1],Xt=-D[2],Vt=D[3],ue=D[4],he=D[5],Ce=D[6],Ye=D[7],yr=Et*Et+Lt*Lt+Xt*Xt+Vt*Vt;return yr>0?(vt[0]=(ue*Vt+Ye*Et+he*Xt-Ce*Lt)*2/yr,vt[1]=(he*Vt+Ye*Lt+Ce*Et-ue*Xt)*2/yr,vt[2]=(Ce*Vt+Ye*Xt+ue*Lt-he*Et)*2/yr):(vt[0]=(ue*Vt+Ye*Et+he*Xt-Ce*Lt)*2,vt[1]=(he*Vt+Ye*Lt+Ce*Et-ue*Xt)*2,vt[2]=(Ce*Vt+Ye*Xt+ue*Lt-he*Et)*2),ft(h,D,vt),h}function k(h,D){return h[0]=D[12],h[1]=D[13],h[2]=D[14],h}function M(h,D){var vt=D[0],Et=D[1],Lt=D[2],Xt=D[4],Vt=D[5],ue=D[6],he=D[8],Ce=D[9],Ye=D[10];return h[0]=Math.hypot(vt,Et,Lt),h[1]=Math.hypot(Xt,Vt,ue),h[2]=Math.hypot(he,Ce,Ye),h}function C(h,D){var vt=new E.ARRAY_TYPE(3);M(vt,D);var Et=1/vt[0],Lt=1/vt[1],Xt=1/vt[2],Vt=D[0]*Et,ue=D[1]*Lt,he=D[2]*Xt,Ce=D[4]*Et,Ye=D[5]*Lt,yr=D[6]*Xt,xr=D[8]*Et,pr=D[9]*Lt,Zr=D[10]*Xt,qr=Vt+Ye+Zr,Tr=0;return qr>0?(Tr=Math.sqrt(qr+1)*2,h[3]=.25*Tr,h[0]=(yr-pr)/Tr,h[1]=(xr-he)/Tr,h[2]=(ue-Ce)/Tr):Vt>Ye&&Vt>Zr?(Tr=Math.sqrt(1+Vt-Ye-Zr)*2,h[3]=(yr-pr)/Tr,h[0]=.25*Tr,h[1]=(ue+Ce)/Tr,h[2]=(xr+he)/Tr):Ye>Zr?(Tr=Math.sqrt(1+Ye-Vt-Zr)*2,h[3]=(xr-he)/Tr,h[0]=(ue+Ce)/Tr,h[1]=.25*Tr,h[2]=(yr+pr)/Tr):(Tr=Math.sqrt(1+Zr-Vt-Ye)*2,h[3]=(ue-Ce)/Tr,h[0]=(xr+he)/Tr,h[1]=(yr+pr)/Tr,h[2]=.25*Tr),h}function j(h,D,vt,Et){var Lt=D[0],Xt=D[1],Vt=D[2],ue=D[3],he=Lt+Lt,Ce=Xt+Xt,Ye=Vt+Vt,yr=Lt*he,xr=Lt*Ce,pr=Lt*Ye,Zr=Xt*Ce,qr=Xt*Ye,Tr=Vt*Ye,_n=ue*he,Ea=ue*Ce,wa=ue*Ye,ha=Et[0],qn=Et[1],sa=Et[2];return h[0]=(1-(Zr+Tr))*ha,h[1]=(xr+wa)*ha,h[2]=(pr-Ea)*ha,h[3]=0,h[4]=(xr-wa)*qn,h[5]=(1-(yr+Tr))*qn,h[6]=(qr+_n)*qn,h[7]=0,h[8]=(pr+Ea)*sa,h[9]=(qr-_n)*sa,h[10]=(1-(yr+Zr))*sa,h[11]=0,h[12]=vt[0],h[13]=vt[1],h[14]=vt[2],h[15]=1,h}function xt(h,D,vt,Et,Lt){var Xt=D[0],Vt=D[1],ue=D[2],he=D[3],Ce=Xt+Xt,Ye=Vt+Vt,yr=ue+ue,xr=Xt*Ce,pr=Xt*Ye,Zr=Xt*yr,qr=Vt*Ye,Tr=Vt*yr,_n=ue*yr,Ea=he*Ce,wa=he*Ye,ha=he*yr,qn=Et[0],sa=Et[1],Ni=Et[2],Ci=Lt[0],_i=Lt[1],Ti=Lt[2],Ii=(1-(qr+_n))*qn,Bi=(pr+ha)*qn,$i=(Zr-wa)*qn,za=(pr-ha)*sa,ii=(1-(xr+_n))*sa,ls=(Tr+Ea)*sa,ys=(Zr+wa)*Ni,ko=(Tr-Ea)*Ni,Cu=(1-(xr+qr))*Ni;return h[0]=Ii,h[1]=Bi,h[2]=$i,h[3]=0,h[4]=za,h[5]=ii,h[6]=ls,h[7]=0,h[8]=ys,h[9]=ko,h[10]=Cu,h[11]=0,h[12]=vt[0]+Ci-(Ii*Ci+za*_i+ys*Ti),h[13]=vt[1]+_i-(Bi*Ci+ii*_i+ko*Ti),h[14]=vt[2]+Ti-($i*Ci+ls*_i+Cu*Ti),h[15]=1,h}function At(h,D){var vt=D[0],Et=D[1],Lt=D[2],Xt=D[3],Vt=vt+vt,ue=Et+Et,he=Lt+Lt,Ce=vt*Vt,Ye=Et*Vt,yr=Et*ue,xr=Lt*Vt,pr=Lt*ue,Zr=Lt*he,qr=Xt*Vt,Tr=Xt*ue,_n=Xt*he;return h[0]=1-yr-Zr,h[1]=Ye+_n,h[2]=xr-Tr,h[3]=0,h[4]=Ye-_n,h[5]=1-Ce-Zr,h[6]=pr+qr,h[7]=0,h[8]=xr+Tr,h[9]=pr-qr,h[10]=1-Ce-yr,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function wt(h,D,vt,Et,Lt,Xt,Vt){var ue=1/(vt-D),he=1/(Lt-Et),Ce=1/(Xt-Vt);return h[0]=Xt*2*ue,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=Xt*2*he,h[6]=0,h[7]=0,h[8]=(vt+D)*ue,h[9]=(Lt+Et)*he,h[10]=(Vt+Xt)*Ce,h[11]=-1,h[12]=0,h[13]=0,h[14]=Vt*Xt*2*Ce,h[15]=0,h}function Pt(h,D,vt,Et,Lt){var Xt=1/Math.tan(D/2),Vt;return h[0]=Xt/vt,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=Xt,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=-1,h[12]=0,h[13]=0,h[15]=0,Lt!=null&&Lt!==1/0?(Vt=1/(Et-Lt),h[10]=(Lt+Et)*Vt,h[14]=2*Lt*Et*Vt):(h[10]=-1,h[14]=-2*Et),h}var Me=Pt;function ve(h,D,vt,Et,Lt){var Xt=1/Math.tan(D/2),Vt;return h[0]=Xt/vt,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=Xt,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=-1,h[12]=0,h[13]=0,h[15]=0,Lt!=null&&Lt!==1/0?(Vt=1/(Et-Lt),h[10]=Lt*Vt,h[14]=Lt*Et*Vt):(h[10]=-1,h[14]=-Et),h}function Ke(h,D,vt,Et){var Lt=Math.tan(D.upDegrees*Math.PI/180),Xt=Math.tan(D.downDegrees*Math.PI/180),Vt=Math.tan(D.leftDegrees*Math.PI/180),ue=Math.tan(D.rightDegrees*Math.PI/180),he=2/(Vt+ue),Ce=2/(Lt+Xt);return h[0]=he,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=Ce,h[6]=0,h[7]=0,h[8]=-((Vt-ue)*he*.5),h[9]=(Lt-Xt)*Ce*.5,h[10]=Et/(vt-Et),h[11]=-1,h[12]=0,h[13]=0,h[14]=Et*vt/(vt-Et),h[15]=0,h}function br(h,D,vt,Et,Lt,Xt,Vt){var ue=1/(D-vt),he=1/(Et-Lt),Ce=1/(Xt-Vt);return h[0]=-2*ue,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=-2*he,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=2*Ce,h[11]=0,h[12]=(D+vt)*ue,h[13]=(Lt+Et)*he,h[14]=(Vt+Xt)*Ce,h[15]=1,h}var ir=br;function mr(h,D,vt,Et,Lt,Xt,Vt){var ue=1/(D-vt),he=1/(Et-Lt),Ce=1/(Xt-Vt);return h[0]=-2*ue,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=-2*he,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=Ce,h[11]=0,h[12]=(D+vt)*ue,h[13]=(Lt+Et)*he,h[14]=Xt*Ce,h[15]=1,h}function Mn(h,D,vt,Et){var Lt,Xt,Vt,ue,he,Ce,Ye,yr,xr,pr,Zr=D[0],qr=D[1],Tr=D[2],_n=Et[0],Ea=Et[1],wa=Et[2],ha=vt[0],qn=vt[1],sa=vt[2];return Math.abs(Zr-ha)<E.EPSILON&&Math.abs(qr-qn)<E.EPSILON&&Math.abs(Tr-sa)<E.EPSILON?Ln(h):(Ye=Zr-ha,yr=qr-qn,xr=Tr-sa,pr=1/Math.hypot(Ye,yr,xr),Ye*=pr,yr*=pr,xr*=pr,Lt=Ea*xr-wa*yr,Xt=wa*Ye-_n*xr,Vt=_n*yr-Ea*Ye,pr=Math.hypot(Lt,Xt,Vt),pr?(pr=1/pr,Lt*=pr,Xt*=pr,Vt*=pr):(Lt=0,Xt=0,Vt=0),ue=yr*Vt-xr*Xt,he=xr*Lt-Ye*Vt,Ce=Ye*Xt-yr*Lt,pr=Math.hypot(ue,he,Ce),pr?(pr=1/pr,ue*=pr,he*=pr,Ce*=pr):(ue=0,he=0,Ce=0),h[0]=Lt,h[1]=ue,h[2]=Ye,h[3]=0,h[4]=Xt,h[5]=he,h[6]=yr,h[7]=0,h[8]=Vt,h[9]=Ce,h[10]=xr,h[11]=0,h[12]=-(Lt*Zr+Xt*qr+Vt*Tr),h[13]=-(ue*Zr+he*qr+Ce*Tr),h[14]=-(Ye*Zr+yr*qr+xr*Tr),h[15]=1,h)}function Xe(h,D,vt,Et){var Lt=D[0],Xt=D[1],Vt=D[2],ue=Et[0],he=Et[1],Ce=Et[2],Ye=Lt-vt[0],yr=Xt-vt[1],xr=Vt-vt[2],pr=Ye*Ye+yr*yr+xr*xr;pr>0&&(pr=1/Math.sqrt(pr),Ye*=pr,yr*=pr,xr*=pr);var Zr=he*xr-Ce*yr,qr=Ce*Ye-ue*xr,Tr=ue*yr-he*Ye;return pr=Zr*Zr+qr*qr+Tr*Tr,pr>0&&(pr=1/Math.sqrt(pr),Zr*=pr,qr*=pr,Tr*=pr),h[0]=Zr,h[1]=qr,h[2]=Tr,h[3]=0,h[4]=yr*Tr-xr*qr,h[5]=xr*Zr-Ye*Tr,h[6]=Ye*qr-yr*Zr,h[7]=0,h[8]=Ye,h[9]=yr,h[10]=xr,h[11]=0,h[12]=Lt,h[13]=Xt,h[14]=Vt,h[15]=1,h}function vr(h){return"mat4("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+", "+h[4]+", "+h[5]+", "+h[6]+", "+h[7]+", "+h[8]+", "+h[9]+", "+h[10]+", "+h[11]+", "+h[12]+", "+h[13]+", "+h[14]+", "+h[15]+")"}function Er(h){return Math.hypot(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],h[8],h[9],h[10],h[11],h[12],h[13],h[14],h[15])}function on(h,D,vt){return h[0]=D[0]+vt[0],h[1]=D[1]+vt[1],h[2]=D[2]+vt[2],h[3]=D[3]+vt[3],h[4]=D[4]+vt[4],h[5]=D[5]+vt[5],h[6]=D[6]+vt[6],h[7]=D[7]+vt[7],h[8]=D[8]+vt[8],h[9]=D[9]+vt[9],h[10]=D[10]+vt[10],h[11]=D[11]+vt[11],h[12]=D[12]+vt[12],h[13]=D[13]+vt[13],h[14]=D[14]+vt[14],h[15]=D[15]+vt[15],h}function Wr(h,D,vt){return h[0]=D[0]-vt[0],h[1]=D[1]-vt[1],h[2]=D[2]-vt[2],h[3]=D[3]-vt[3],h[4]=D[4]-vt[4],h[5]=D[5]-vt[5],h[6]=D[6]-vt[6],h[7]=D[7]-vt[7],h[8]=D[8]-vt[8],h[9]=D[9]-vt[9],h[10]=D[10]-vt[10],h[11]=D[11]-vt[11],h[12]=D[12]-vt[12],h[13]=D[13]-vt[13],h[14]=D[14]-vt[14],h[15]=D[15]-vt[15],h}function xa(h,D,vt){return h[0]=D[0]*vt,h[1]=D[1]*vt,h[2]=D[2]*vt,h[3]=D[3]*vt,h[4]=D[4]*vt,h[5]=D[5]*vt,h[6]=D[6]*vt,h[7]=D[7]*vt,h[8]=D[8]*vt,h[9]=D[9]*vt,h[10]=D[10]*vt,h[11]=D[11]*vt,h[12]=D[12]*vt,h[13]=D[13]*vt,h[14]=D[14]*vt,h[15]=D[15]*vt,h}function Ta(h,D,vt,Et){return h[0]=D[0]+vt[0]*Et,h[1]=D[1]+vt[1]*Et,h[2]=D[2]+vt[2]*Et,h[3]=D[3]+vt[3]*Et,h[4]=D[4]+vt[4]*Et,h[5]=D[5]+vt[5]*Et,h[6]=D[6]+vt[6]*Et,h[7]=D[7]+vt[7]*Et,h[8]=D[8]+vt[8]*Et,h[9]=D[9]+vt[9]*Et,h[10]=D[10]+vt[10]*Et,h[11]=D[11]+vt[11]*Et,h[12]=D[12]+vt[12]*Et,h[13]=D[13]+vt[13]*Et,h[14]=D[14]+vt[14]*Et,h[15]=D[15]+vt[15]*Et,h}function Rn(h,D){return h[0]===D[0]&&h[1]===D[1]&&h[2]===D[2]&&h[3]===D[3]&&h[4]===D[4]&&h[5]===D[5]&&h[6]===D[6]&&h[7]===D[7]&&h[8]===D[8]&&h[9]===D[9]&&h[10]===D[10]&&h[11]===D[11]&&h[12]===D[12]&&h[13]===D[13]&&h[14]===D[14]&&h[15]===D[15]}function Jn(h,D){var vt=h[0],Et=h[1],Lt=h[2],Xt=h[3],Vt=h[4],ue=h[5],he=h[6],Ce=h[7],Ye=h[8],yr=h[9],xr=h[10],pr=h[11],Zr=h[12],qr=h[13],Tr=h[14],_n=h[15],Ea=D[0],wa=D[1],ha=D[2],qn=D[3],sa=D[4],Ni=D[5],Ci=D[6],_i=D[7],Ti=D[8],Ii=D[9],Bi=D[10],$i=D[11],za=D[12],ii=D[13],ls=D[14],ys=D[15];return Math.abs(vt-Ea)<=E.EPSILON*Math.max(1,Math.abs(vt),Math.abs(Ea))&&Math.abs(Et-wa)<=E.EPSILON*Math.max(1,Math.abs(Et),Math.abs(wa))&&Math.abs(Lt-ha)<=E.EPSILON*Math.max(1,Math.abs(Lt),Math.abs(ha))&&Math.abs(Xt-qn)<=E.EPSILON*Math.max(1,Math.abs(Xt),Math.abs(qn))&&Math.abs(Vt-sa)<=E.EPSILON*Math.max(1,Math.abs(Vt),Math.abs(sa))&&Math.abs(ue-Ni)<=E.EPSILON*Math.max(1,Math.abs(ue),Math.abs(Ni))&&Math.abs(he-Ci)<=E.EPSILON*Math.max(1,Math.abs(he),Math.abs(Ci))&&Math.abs(Ce-_i)<=E.EPSILON*Math.max(1,Math.abs(Ce),Math.abs(_i))&&Math.abs(Ye-Ti)<=E.EPSILON*Math.max(1,Math.abs(Ye),Math.abs(Ti))&&Math.abs(yr-Ii)<=E.EPSILON*Math.max(1,Math.abs(yr),Math.abs(Ii))&&Math.abs(xr-Bi)<=E.EPSILON*Math.max(1,Math.abs(xr),Math.abs(Bi))&&Math.abs(pr-$i)<=E.EPSILON*Math.max(1,Math.abs(pr),Math.abs($i))&&Math.abs(Zr-za)<=E.EPSILON*Math.max(1,Math.abs(Zr),Math.abs(za))&&Math.abs(qr-ii)<=E.EPSILON*Math.max(1,Math.abs(qr),Math.abs(ii))&&Math.abs(Tr-ls)<=E.EPSILON*Math.max(1,Math.abs(Tr),Math.abs(ls))&&Math.abs(_n-ys)<=E.EPSILON*Math.max(1,Math.abs(_n),Math.abs(ys))}var Ga=Pr,Aa=Wr,an=z(277160);function Vn(){var h=new E.ARRAY_TYPE(4);return E.ARRAY_TYPE!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0,h[3]=0),h}function me(h){var D=new E.ARRAY_TYPE(4);return D[0]=h[0],D[1]=h[1],D[2]=h[2],D[3]=h[3],D}function Dt(h,D,vt,Et){var Lt=new E.ARRAY_TYPE(4);return Lt[0]=h,Lt[1]=D,Lt[2]=vt,Lt[3]=Et,Lt}function fe(h,D){return h[0]=D[0],h[1]=D[1],h[2]=D[2],h[3]=D[3],h}function Ae(h,D,vt,Et,Lt){return h[0]=D,h[1]=vt,h[2]=Et,h[3]=Lt,h}function be(h,D,vt){return h[0]=D[0]+vt[0],h[1]=D[1]+vt[1],h[2]=D[2]+vt[2],h[3]=D[3]+vt[3],h}function De(h,D,vt){return h[0]=D[0]-vt[0],h[1]=D[1]-vt[1],h[2]=D[2]-vt[2],h[3]=D[3]-vt[3],h}function sr(h,D,vt){return h[0]=D[0]*vt[0],h[1]=D[1]*vt[1],h[2]=D[2]*vt[2],h[3]=D[3]*vt[3],h}function Fr(h,D,vt){return h[0]=D[0]/vt[0],h[1]=D[1]/vt[1],h[2]=D[2]/vt[2],h[3]=D[3]/vt[3],h}function Jr(h,D){return h[0]=Math.ceil(D[0]),h[1]=Math.ceil(D[1]),h[2]=Math.ceil(D[2]),h[3]=Math.ceil(D[3]),h}function Pn(h,D){return h[0]=Math.floor(D[0]),h[1]=Math.floor(D[1]),h[2]=Math.floor(D[2]),h[3]=Math.floor(D[3]),h}function Bn(h,D,vt){return h[0]=Math.min(D[0],vt[0]),h[1]=Math.min(D[1],vt[1]),h[2]=Math.min(D[2],vt[2]),h[3]=Math.min(D[3],vt[3]),h}function Zn(h,D,vt){return h[0]=Math.max(D[0],vt[0]),h[1]=Math.max(D[1],vt[1]),h[2]=Math.max(D[2],vt[2]),h[3]=Math.max(D[3],vt[3]),h}function ba(h,D){return h[0]=Math.round(D[0]),h[1]=Math.round(D[1]),h[2]=Math.round(D[2]),h[3]=Math.round(D[3]),h}function Ca(h,D,vt){return h[0]=D[0]*vt,h[1]=D[1]*vt,h[2]=D[2]*vt,h[3]=D[3]*vt,h}function li(h,D,vt,Et){return h[0]=D[0]+vt[0]*Et,h[1]=D[1]+vt[1]*Et,h[2]=D[2]+vt[2]*Et,h[3]=D[3]+vt[3]*Et,h}function ta(h,D){var vt=D[0]-h[0],Et=D[1]-h[1],Lt=D[2]-h[2],Xt=D[3]-h[3];return Math.hypot(vt,Et,Lt,Xt)}function fi(h,D){var vt=D[0]-h[0],Et=D[1]-h[1],Lt=D[2]-h[2],Xt=D[3]-h[3];return vt*vt+Et*Et+Lt*Lt+Xt*Xt}function Co(h){var D=h[0],vt=h[1],Et=h[2],Lt=h[3];return Math.hypot(D,vt,Et,Lt)}function La(h){var D=h[0],vt=h[1],Et=h[2],Lt=h[3];return D*D+vt*vt+Et*Et+Lt*Lt}function xi(h,D){return h[0]=-D[0],h[1]=-D[1],h[2]=-D[2],h[3]=-D[3],h}function so(h,D){return h[0]=1/D[0],h[1]=1/D[1],h[2]=1/D[2],h[3]=1/D[3],h}function To(h,D){var vt=D[0],Et=D[1],Lt=D[2],Xt=D[3],Vt=vt*vt+Et*Et+Lt*Lt+Xt*Xt;return Vt>0&&(Vt=1/Math.sqrt(Vt)),h[0]=vt*Vt,h[1]=Et*Vt,h[2]=Lt*Vt,h[3]=Xt*Vt,h}function bo(h,D){return h[0]*D[0]+h[1]*D[1]+h[2]*D[2]+h[3]*D[3]}function uo(h,D,vt,Et){var Lt=vt[0]*Et[1]-vt[1]*Et[0],Xt=vt[0]*Et[2]-vt[2]*Et[0],Vt=vt[0]*Et[3]-vt[3]*Et[0],ue=vt[1]*Et[2]-vt[2]*Et[1],he=vt[1]*Et[3]-vt[3]*Et[1],Ce=vt[2]*Et[3]-vt[3]*Et[2],Ye=D[0],yr=D[1],xr=D[2],pr=D[3];return h[0]=yr*Ce-xr*he+pr*ue,h[1]=-(Ye*Ce)+xr*Vt-pr*Xt,h[2]=Ye*he-yr*Vt+pr*Lt,h[3]=-(Ye*ue)+yr*Xt-xr*Lt,h}function Hi(h,D,vt,Et){var Lt=D[0],Xt=D[1],Vt=D[2],ue=D[3];return h[0]=Lt+Et*(vt[0]-Lt),h[1]=Xt+Et*(vt[1]-Xt),h[2]=Vt+Et*(vt[2]-Vt),h[3]=ue+Et*(vt[3]-ue),h}function ds(h,D){D=D||1;var vt,Et,Lt,Xt,Vt,ue;do vt=E.RANDOM()*2-1,Et=E.RANDOM()*2-1,Vt=vt*vt+Et*Et;while(Vt>=1);do Lt=E.RANDOM()*2-1,Xt=E.RANDOM()*2-1,ue=Lt*Lt+Xt*Xt;while(ue>=1);var he=Math.sqrt((1-Vt)/ue);return h[0]=D*vt,h[1]=D*Et,h[2]=D*Lt*he,h[3]=D*Xt*he,h}function zi(h,D,vt){var Et=D[0],Lt=D[1],Xt=D[2],Vt=D[3];return h[0]=vt[0]*Et+vt[4]*Lt+vt[8]*Xt+vt[12]*Vt,h[1]=vt[1]*Et+vt[5]*Lt+vt[9]*Xt+vt[13]*Vt,h[2]=vt[2]*Et+vt[6]*Lt+vt[10]*Xt+vt[14]*Vt,h[3]=vt[3]*Et+vt[7]*Lt+vt[11]*Xt+vt[15]*Vt,h}function Ui(h,D,vt){var Et=D[0],Lt=D[1],Xt=D[2],Vt=vt[0],ue=vt[1],he=vt[2],Ce=vt[3],Ye=Ce*Et+ue*Xt-he*Lt,yr=Ce*Lt+he*Et-Vt*Xt,xr=Ce*Xt+Vt*Lt-ue*Et,pr=-Vt*Et-ue*Lt-he*Xt;return h[0]=Ye*Ce+pr*-Vt+yr*-he-xr*-ue,h[1]=yr*Ce+pr*-ue+xr*-Vt-Ye*-he,h[2]=xr*Ce+pr*-he+Ye*-ue-yr*-Vt,h[3]=D[3],h}function gs(h){return h[0]=0,h[1]=0,h[2]=0,h[3]=0,h}function Ms(h){return"vec4("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+")"}function Go(h,D){return h[0]===D[0]&&h[1]===D[1]&&h[2]===D[2]&&h[3]===D[3]}function _o(h,D){var vt=h[0],Et=h[1],Lt=h[2],Xt=h[3],Vt=D[0],ue=D[1],he=D[2],Ce=D[3];return Math.abs(vt-Vt)<=E.EPSILON*Math.max(1,Math.abs(vt),Math.abs(Vt))&&Math.abs(Et-ue)<=E.EPSILON*Math.max(1,Math.abs(Et),Math.abs(ue))&&Math.abs(Lt-he)<=E.EPSILON*Math.max(1,Math.abs(Lt),Math.abs(he))&&Math.abs(Xt-Ce)<=E.EPSILON*Math.max(1,Math.abs(Xt),Math.abs(Ce))}var Io=De,$s=sr,Yn=Fr,So=ta,Oo=fi,Wi=Co,zn=La,Lo=function(){var h=Vn();return function(D,vt,Et,Lt,Xt,Vt){var ue,he;for(vt||(vt=4),Et||(Et=0),Lt?he=Math.min(Lt*vt+Et,D.length):he=D.length,ue=Et;ue<he;ue+=vt)h[0]=D[ue],h[1]=D[ue+1],h[2]=D[ue+2],h[3]=D[ue+3],Xt(h,h,Vt),D[ue]=h[0],D[ue+1]=h[1],D[ue+2]=h[2],D[ue+3]=h[3];return D}}();function Ai(){var h=new E.ARRAY_TYPE(4);return E.ARRAY_TYPE!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0),h[3]=1,h}function zo(h){return h[0]=0,h[1]=0,h[2]=0,h[3]=1,h}function Uo(h,D,vt){vt=vt*.5;var Et=Math.sin(vt);return h[0]=Et*D[0],h[1]=Et*D[1],h[2]=Et*D[2],h[3]=Math.cos(vt),h}function ps(h,D){var vt=Math.acos(D[3])*2,Et=Math.sin(vt/2);return Et>E.EPSILON?(h[0]=D[0]/Et,h[1]=D[1]/Et,h[2]=D[2]/Et):(h[0]=1,h[1]=0,h[2]=0),vt}function eo(h,D){var vt=Ki(h,D);return Math.acos(2*vt*vt-1)}function ro(h,D,vt){var Et=D[0],Lt=D[1],Xt=D[2],Vt=D[3],ue=vt[0],he=vt[1],Ce=vt[2],Ye=vt[3];return h[0]=Et*Ye+Vt*ue+Lt*Ce-Xt*he,h[1]=Lt*Ye+Vt*he+Xt*ue-Et*Ce,h[2]=Xt*Ye+Vt*Ce+Et*he-Lt*ue,h[3]=Vt*Ye-Et*ue-Lt*he-Xt*Ce,h}function ei(h,D,vt){vt*=.5;var Et=D[0],Lt=D[1],Xt=D[2],Vt=D[3],ue=Math.sin(vt),he=Math.cos(vt);return h[0]=Et*he+Vt*ue,h[1]=Lt*he+Xt*ue,h[2]=Xt*he-Lt*ue,h[3]=Vt*he-Et*ue,h}function fo(h,D,vt){vt*=.5;var Et=D[0],Lt=D[1],Xt=D[2],Vt=D[3],ue=Math.sin(vt),he=Math.cos(vt);return h[0]=Et*he-Xt*ue,h[1]=Lt*he+Vt*ue,h[2]=Xt*he+Et*ue,h[3]=Vt*he-Lt*ue,h}function Do(h,D,vt){vt*=.5;var Et=D[0],Lt=D[1],Xt=D[2],Vt=D[3],ue=Math.sin(vt),he=Math.cos(vt);return h[0]=Et*he+Lt*ue,h[1]=Lt*he-Et*ue,h[2]=Xt*he+Vt*ue,h[3]=Vt*he-Xt*ue,h}function Wo(h,D){var vt=D[0],Et=D[1],Lt=D[2];return h[0]=vt,h[1]=Et,h[2]=Lt,h[3]=Math.sqrt(Math.abs(1-vt*vt-Et*Et-Lt*Lt)),h}function No(h,D){var vt=D[0],Et=D[1],Lt=D[2],Xt=D[3],Vt=Math.sqrt(vt*vt+Et*Et+Lt*Lt),ue=Math.exp(Xt),he=Vt>0?ue*Math.sin(Vt)/Vt:0;return h[0]=vt*he,h[1]=Et*he,h[2]=Lt*he,h[3]=ue*Math.cos(Vt),h}function is(h,D){var vt=D[0],Et=D[1],Lt=D[2],Xt=D[3],Vt=Math.sqrt(vt*vt+Et*Et+Lt*Lt),ue=Vt>0?Math.atan2(Vt,Xt)/Vt:0;return h[0]=vt*ue,h[1]=Et*ue,h[2]=Lt*ue,h[3]=.5*Math.log(vt*vt+Et*Et+Lt*Lt+Xt*Xt),h}function Xo(h,D,vt){return is(h,D),ki(h,h,vt),No(h,h),h}function Jo(h,D,vt,Et){var Lt=D[0],Xt=D[1],Vt=D[2],ue=D[3],he=vt[0],Ce=vt[1],Ye=vt[2],yr=vt[3],xr,pr,Zr,qr,Tr;return pr=Lt*he+Xt*Ce+Vt*Ye+ue*yr,pr<0&&(pr=-pr,he=-he,Ce=-Ce,Ye=-Ye,yr=-yr),1-pr>E.EPSILON?(xr=Math.acos(pr),Zr=Math.sin(xr),qr=Math.sin((1-Et)*xr)/Zr,Tr=Math.sin(Et*xr)/Zr):(qr=1-Et,Tr=Et),h[0]=qr*Lt+Tr*he,h[1]=qr*Xt+Tr*Ce,h[2]=qr*Vt+Tr*Ye,h[3]=qr*ue+Tr*yr,h}function Xa(h){var D=E.RANDOM(),vt=E.RANDOM(),Et=E.RANDOM(),Lt=Math.sqrt(1-D),Xt=Math.sqrt(D);return h[0]=Lt*Math.sin(2*Math.PI*vt),h[1]=Lt*Math.cos(2*Math.PI*vt),h[2]=Xt*Math.sin(2*Math.PI*Et),h[3]=Xt*Math.cos(2*Math.PI*Et),h}function As(h,D){var vt=D[0],Et=D[1],Lt=D[2],Xt=D[3],Vt=vt*vt+Et*Et+Lt*Lt+Xt*Xt,ue=Vt?1/Vt:0;return h[0]=-vt*ue,h[1]=-Et*ue,h[2]=-Lt*ue,h[3]=Xt*ue,h}function iu(h,D){return h[0]=-D[0],h[1]=-D[1],h[2]=-D[2],h[3]=D[3],h}function Xi(h,D){var vt=D[0]+D[4]+D[8],Et;if(vt>0)Et=Math.sqrt(vt+1),h[3]=.5*Et,Et=.5/Et,h[0]=(D[5]-D[7])*Et,h[1]=(D[6]-D[2])*Et,h[2]=(D[1]-D[3])*Et;else{var Lt=0;D[4]>D[0]&&(Lt=1),D[8]>D[Lt*3+Lt]&&(Lt=2);var Xt=(Lt+1)%3,Vt=(Lt+2)%3;Et=Math.sqrt(D[Lt*3+Lt]-D[Xt*3+Xt]-D[Vt*3+Vt]+1),h[Lt]=.5*Et,Et=.5/Et,h[3]=(D[Xt*3+Vt]-D[Vt*3+Xt])*Et,h[Xt]=(D[Xt*3+Lt]+D[Lt*3+Xt])*Et,h[Vt]=(D[Vt*3+Lt]+D[Lt*3+Vt])*Et}return h}function os(h,D,vt,Et){var Lt=.5*Math.PI/180;D*=Lt,vt*=Lt,Et*=Lt;var Xt=Math.sin(D),Vt=Math.cos(D),ue=Math.sin(vt),he=Math.cos(vt),Ce=Math.sin(Et),Ye=Math.cos(Et);return h[0]=Xt*he*Ye-Vt*ue*Ce,h[1]=Vt*ue*Ye+Xt*he*Ce,h[2]=Vt*he*Ce-Xt*ue*Ye,h[3]=Vt*he*Ye+Xt*ue*Ce,h}function Eo(h){return"quat("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+")"}var Yi=me,co=Dt,pa=fe,ja=Ae,yi=be,no=ro,ki=Ca,Ki=bo,Yo=Hi,wo=Co,ts=wo,lo=La,Rs=lo,ou=To,Cs=Go,ci=_o,Po=function(){var h=an.create(),D=an.fromValues(1,0,0),vt=an.fromValues(0,1,0);return function(Et,Lt,Xt){var Vt=an.dot(Lt,Xt);return Vt<-.999999?(an.cross(h,D,Lt),an.len(h)<1e-6&&an.cross(h,vt,Lt),an.normalize(h,h),Uo(Et,h,Math.PI),Et):Vt>.999999?(Et[0]=0,Et[1]=0,Et[2]=0,Et[3]=1,Et):(an.cross(h,Lt,Xt),Et[0]=h[0],Et[1]=h[1],Et[2]=h[2],Et[3]=1+Vt,ou(Et,Et))}}(),Wu=function(){var h=Ai(),D=Ai();return function(vt,Et,Lt,Xt,Vt,ue){return Jo(h,Et,Vt,ue),Jo(D,Lt,Xt,ue),Jo(vt,h,D,2*ue*(1-ue)),vt}}(),ho=function(){var h=Ur.create();return function(D,vt,Et,Lt){return h[0]=Et[0],h[3]=Et[1],h[6]=Et[2],h[1]=Lt[0],h[4]=Lt[1],h[7]=Lt[2],h[2]=-vt[0],h[5]=-vt[1],h[8]=-vt[2],ou(D,Xi(D,h))}}();function Bs(){var h=new E.ARRAY_TYPE(8);return E.ARRAY_TYPE!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0,h[4]=0,h[5]=0,h[6]=0,h[7]=0),h[3]=1,h}function Ts(h){var D=new E.ARRAY_TYPE(8);return D[0]=h[0],D[1]=h[1],D[2]=h[2],D[3]=h[3],D[4]=h[4],D[5]=h[5],D[6]=h[6],D[7]=h[7],D}function Vo(h,D,vt,Et,Lt,Xt,Vt,ue){var he=new E.ARRAY_TYPE(8);return he[0]=h,he[1]=D,he[2]=vt,he[3]=Et,he[4]=Lt,he[5]=Xt,he[6]=Vt,he[7]=ue,he}function Fs(h,D,vt,Et,Lt,Xt,Vt){var ue=new E.ARRAY_TYPE(8);ue[0]=h,ue[1]=D,ue[2]=vt,ue[3]=Et;var he=Lt*.5,Ce=Xt*.5,Ye=Vt*.5;return ue[4]=he*Et+Ce*vt-Ye*D,ue[5]=Ce*Et+Ye*h-he*vt,ue[6]=Ye*Et+he*D-Ce*h,ue[7]=-he*h-Ce*D-Ye*vt,ue}function ss(h,D,vt){var Et=vt[0]*.5,Lt=vt[1]*.5,Xt=vt[2]*.5,Vt=D[0],ue=D[1],he=D[2],Ce=D[3];return h[0]=Vt,h[1]=ue,h[2]=he,h[3]=Ce,h[4]=Et*Ce+Lt*he-Xt*ue,h[5]=Lt*Ce+Xt*Vt-Et*he,h[6]=Xt*Ce+Et*ue-Lt*Vt,h[7]=-Et*Vt-Lt*ue-Xt*he,h}function jo(h,D){return h[0]=0,h[1]=0,h[2]=0,h[3]=1,h[4]=D[0]*.5,h[5]=D[1]*.5,h[6]=D[2]*.5,h[7]=0,h}function us(h,D){return h[0]=D[0],h[1]=D[1],h[2]=D[2],h[3]=D[3],h[4]=0,h[5]=0,h[6]=0,h[7]=0,h}function su(h,D){var vt=Ai();C(vt,D);var Et=new E.ARRAY_TYPE(3);return k(Et,D),ss(h,vt,Et),h}function Gs(h,D){return h[0]=D[0],h[1]=D[1],h[2]=D[2],h[3]=D[3],h[4]=D[4],h[5]=D[5],h[6]=D[6],h[7]=D[7],h}function fs(h){return h[0]=0,h[1]=0,h[2]=0,h[3]=1,h[4]=0,h[5]=0,h[6]=0,h[7]=0,h}function Tt(h,D,vt,Et,Lt,Xt,Vt,ue,he){return h[0]=D,h[1]=vt,h[2]=Et,h[3]=Lt,h[4]=Xt,h[5]=Vt,h[6]=ue,h[7]=he,h}var jt=pa;function ze(h,D){return h[0]=D[4],h[1]=D[5],h[2]=D[6],h[3]=D[7],h}var Ze=pa;function Cr(h,D){return h[4]=D[0],h[5]=D[1],h[6]=D[2],h[7]=D[3],h}function cn(h,D){var vt=D[4],Et=D[5],Lt=D[6],Xt=D[7],Vt=-D[0],ue=-D[1],he=-D[2],Ce=D[3];return h[0]=(vt*Ce+Xt*Vt+Et*he-Lt*ue)*2,h[1]=(Et*Ce+Xt*ue+Lt*Vt-vt*he)*2,h[2]=(Lt*Ce+Xt*he+vt*ue-Et*Vt)*2,h}function mn(h,D,vt){var Et=D[0],Lt=D[1],Xt=D[2],Vt=D[3],ue=vt[0]*.5,he=vt[1]*.5,Ce=vt[2]*.5,Ye=D[4],yr=D[5],xr=D[6],pr=D[7];return h[0]=Et,h[1]=Lt,h[2]=Xt,h[3]=Vt,h[4]=Vt*ue+Lt*Ce-Xt*he+Ye,h[5]=Vt*he+Xt*ue-Et*Ce+yr,h[6]=Vt*Ce+Et*he-Lt*ue+xr,h[7]=-Et*ue-Lt*he-Xt*Ce+pr,h}function aa(h,D,vt){var Et=-D[0],Lt=-D[1],Xt=-D[2],Vt=D[3],ue=D[4],he=D[5],Ce=D[6],Ye=D[7],yr=ue*Vt+Ye*Et+he*Xt-Ce*Lt,xr=he*Vt+Ye*Lt+Ce*Et-ue*Xt,pr=Ce*Vt+Ye*Xt+ue*Lt-he*Et,Zr=Ye*Vt-ue*Et-he*Lt-Ce*Xt;return ei(h,D,vt),Et=h[0],Lt=h[1],Xt=h[2],Vt=h[3],h[4]=yr*Vt+Zr*Et+xr*Xt-pr*Lt,h[5]=xr*Vt+Zr*Lt+pr*Et-yr*Xt,h[6]=pr*Vt+Zr*Xt+yr*Lt-xr*Et,h[7]=Zr*Vt-yr*Et-xr*Lt-pr*Xt,h}function ai(h,D,vt){var Et=-D[0],Lt=-D[1],Xt=-D[2],Vt=D[3],ue=D[4],he=D[5],Ce=D[6],Ye=D[7],yr=ue*Vt+Ye*Et+he*Xt-Ce*Lt,xr=he*Vt+Ye*Lt+Ce*Et-ue*Xt,pr=Ce*Vt+Ye*Xt+ue*Lt-he*Et,Zr=Ye*Vt-ue*Et-he*Lt-Ce*Xt;return fo(h,D,vt),Et=h[0],Lt=h[1],Xt=h[2],Vt=h[3],h[4]=yr*Vt+Zr*Et+xr*Xt-pr*Lt,h[5]=xr*Vt+Zr*Lt+pr*Et-yr*Xt,h[6]=pr*Vt+Zr*Xt+yr*Lt-xr*Et,h[7]=Zr*Vt-yr*Et-xr*Lt-pr*Xt,h}function Zi(h,D,vt){var Et=-D[0],Lt=-D[1],Xt=-D[2],Vt=D[3],ue=D[4],he=D[5],Ce=D[6],Ye=D[7],yr=ue*Vt+Ye*Et+he*Xt-Ce*Lt,xr=he*Vt+Ye*Lt+Ce*Et-ue*Xt,pr=Ce*Vt+Ye*Xt+ue*Lt-he*Et,Zr=Ye*Vt-ue*Et-he*Lt-Ce*Xt;return Do(h,D,vt),Et=h[0],Lt=h[1],Xt=h[2],Vt=h[3],h[4]=yr*Vt+Zr*Et+xr*Xt-pr*Lt,h[5]=xr*Vt+Zr*Lt+pr*Et-yr*Xt,h[6]=pr*Vt+Zr*Xt+yr*Lt-xr*Et,h[7]=Zr*Vt-yr*Et-xr*Lt-pr*Xt,h}function ao(h,D,vt){var Et=vt[0],Lt=vt[1],Xt=vt[2],Vt=vt[3],ue=D[0],he=D[1],Ce=D[2],Ye=D[3];return h[0]=ue*Vt+Ye*Et+he*Xt-Ce*Lt,h[1]=he*Vt+Ye*Lt+Ce*Et-ue*Xt,h[2]=Ce*Vt+Ye*Xt+ue*Lt-he*Et,h[3]=Ye*Vt-ue*Et-he*Lt-Ce*Xt,ue=D[4],he=D[5],Ce=D[6],Ye=D[7],h[4]=ue*Vt+Ye*Et+he*Xt-Ce*Lt,h[5]=he*Vt+Ye*Lt+Ce*Et-ue*Xt,h[6]=Ce*Vt+Ye*Xt+ue*Lt-he*Et,h[7]=Ye*Vt-ue*Et-he*Lt-Ce*Xt,h}function zs(h,D,vt){var Et=D[0],Lt=D[1],Xt=D[2],Vt=D[3],ue=vt[0],he=vt[1],Ce=vt[2],Ye=vt[3];return h[0]=Et*Ye+Vt*ue+Lt*Ce-Xt*he,h[1]=Lt*Ye+Vt*he+Xt*ue-Et*Ce,h[2]=Xt*Ye+Vt*Ce+Et*he-Lt*ue,h[3]=Vt*Ye-Et*ue-Lt*he-Xt*Ce,ue=vt[4],he=vt[5],Ce=vt[6],Ye=vt[7],h[4]=Et*Ye+Vt*ue+Lt*Ce-Xt*he,h[5]=Lt*Ye+Vt*he+Xt*ue-Et*Ce,h[6]=Xt*Ye+Vt*Ce+Et*he-Lt*ue,h[7]=Vt*Ye-Et*ue-Lt*he-Xt*Ce,h}function Mu(h,D,vt,Et){if(Math.abs(Et)<E.EPSILON)return Gs(h,D);var Lt=Math.hypot(vt[0],vt[1],vt[2]);Et=Et*.5;var Xt=Math.sin(Et),Vt=Xt*vt[0]/Lt,ue=Xt*vt[1]/Lt,he=Xt*vt[2]/Lt,Ce=Math.cos(Et),Ye=D[0],yr=D[1],xr=D[2],pr=D[3];h[0]=Ye*Ce+pr*Vt+yr*he-xr*ue,h[1]=yr*Ce+pr*ue+xr*Vt-Ye*he,h[2]=xr*Ce+pr*he+Ye*ue-yr*Vt,h[3]=pr*Ce-Ye*Vt-yr*ue-xr*he;var Zr=D[4],qr=D[5],Tr=D[6],_n=D[7];return h[4]=Zr*Ce+_n*Vt+qr*he-Tr*ue,h[5]=qr*Ce+_n*ue+Tr*Vt-Zr*he,h[6]=Tr*Ce+_n*he+Zr*ue-qr*Vt,h[7]=_n*Ce-Zr*Vt-qr*ue-Tr*he,h}function Ri(h,D,vt){return h[0]=D[0]+vt[0],h[1]=D[1]+vt[1],h[2]=D[2]+vt[2],h[3]=D[3]+vt[3],h[4]=D[4]+vt[4],h[5]=D[5]+vt[5],h[6]=D[6]+vt[6],h[7]=D[7]+vt[7],h}function vo(h,D,vt){var Et=D[0],Lt=D[1],Xt=D[2],Vt=D[3],ue=vt[4],he=vt[5],Ce=vt[6],Ye=vt[7],yr=D[4],xr=D[5],pr=D[6],Zr=D[7],qr=vt[0],Tr=vt[1],_n=vt[2],Ea=vt[3];return h[0]=Et*Ea+Vt*qr+Lt*_n-Xt*Tr,h[1]=Lt*Ea+Vt*Tr+Xt*qr-Et*_n,h[2]=Xt*Ea+Vt*_n+Et*Tr-Lt*qr,h[3]=Vt*Ea-Et*qr-Lt*Tr-Xt*_n,h[4]=Et*Ye+Vt*ue+Lt*Ce-Xt*he+yr*Ea+Zr*qr+xr*_n-pr*Tr,h[5]=Lt*Ye+Vt*he+Xt*ue-Et*Ce+xr*Ea+Zr*Tr+pr*qr-yr*_n,h[6]=Xt*Ye+Vt*Ce+Et*he-Lt*ue+pr*Ea+Zr*_n+yr*Tr-xr*qr,h[7]=Vt*Ye-Et*ue-Lt*he-Xt*Ce+Zr*Ea-yr*qr-xr*Tr-pr*_n,h}var qs=vo;function Xu(h,D,vt){return h[0]=D[0]*vt,h[1]=D[1]*vt,h[2]=D[2]*vt,h[3]=D[3]*vt,h[4]=D[4]*vt,h[5]=D[5]*vt,h[6]=D[6]*vt,h[7]=D[7]*vt,h}var Au=Ki;function uu(h,D,vt,Et){var Lt=1-Et;return Au(D,vt)<0&&(Et=-Et),h[0]=D[0]*Lt+vt[0]*Et,h[1]=D[1]*Lt+vt[1]*Et,h[2]=D[2]*Lt+vt[2]*Et,h[3]=D[3]*Lt+vt[3]*Et,h[4]=D[4]*Lt+vt[4]*Et,h[5]=D[5]*Lt+vt[5]*Et,h[6]=D[6]*Lt+vt[6]*Et,h[7]=D[7]*Lt+vt[7]*Et,h}function Qs(h,D){var vt=cs(D);return h[0]=-D[0]/vt,h[1]=-D[1]/vt,h[2]=-D[2]/vt,h[3]=D[3]/vt,h[4]=-D[4]/vt,h[5]=-D[5]/vt,h[6]=-D[6]/vt,h[7]=D[7]/vt,h}function fu(h,D){return h[0]=-D[0],h[1]=-D[1],h[2]=-D[2],h[3]=D[3],h[4]=-D[4],h[5]=-D[5],h[6]=-D[6],h[7]=D[7],h}var Is=wo,Js=Is,cs=lo,Mo=cs;function rf(h,D){var vt=cs(D);if(vt>0){vt=Math.sqrt(vt);var Et=D[0]/vt,Lt=D[1]/vt,Xt=D[2]/vt,Vt=D[3]/vt,ue=D[4],he=D[5],Ce=D[6],Ye=D[7],yr=Et*ue+Lt*he+Xt*Ce+Vt*Ye;h[0]=Et,h[1]=Lt,h[2]=Xt,h[3]=Vt,h[4]=(ue-Et*yr)/vt,h[5]=(he-Lt*yr)/vt,h[6]=(Ce-Xt*yr)/vt,h[7]=(Ye-Vt*yr)/vt}return h}function kf(h){return"quat2("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+", "+h[4]+", "+h[5]+", "+h[6]+", "+h[7]+")"}function Rf(h,D){return h[0]===D[0]&&h[1]===D[1]&&h[2]===D[2]&&h[3]===D[3]&&h[4]===D[4]&&h[5]===D[5]&&h[6]===D[6]&&h[7]===D[7]}function Os(h,D){var vt=h[0],Et=h[1],Lt=h[2],Xt=h[3],Vt=h[4],ue=h[5],he=h[6],Ce=h[7],Ye=D[0],yr=D[1],xr=D[2],pr=D[3],Zr=D[4],qr=D[5],Tr=D[6],_n=D[7];return Math.abs(vt-Ye)<=E.EPSILON*Math.max(1,Math.abs(vt),Math.abs(Ye))&&Math.abs(Et-yr)<=E.EPSILON*Math.max(1,Math.abs(Et),Math.abs(yr))&&Math.abs(Lt-xr)<=E.EPSILON*Math.max(1,Math.abs(Lt),Math.abs(xr))&&Math.abs(Xt-pr)<=E.EPSILON*Math.max(1,Math.abs(Xt),Math.abs(pr))&&Math.abs(Vt-Zr)<=E.EPSILON*Math.max(1,Math.abs(Vt),Math.abs(Zr))&&Math.abs(ue-qr)<=E.EPSILON*Math.max(1,Math.abs(ue),Math.abs(qr))&&Math.abs(he-Tr)<=E.EPSILON*Math.max(1,Math.abs(he),Math.abs(Tr))&&Math.abs(Ce-_n)<=E.EPSILON*Math.max(1,Math.abs(Ce),Math.abs(_n))}var Bf=z(631437)},935600:function(He,F,z){"use strict";z.r(F),z.d(F,{add:function(){return it},adjoint:function(){return g},clone:function(){return L},copy:function(){return P},create:function(){return X},determinant:function(){return A},equals:function(){return Kt},exactEquals:function(){return It},frob:function(){return Q},fromMat2d:function(){return Y},fromMat4:function(){return R},fromQuat:function(){return V},fromRotation:function(){return d},fromScaling:function(){return tt},fromTranslation:function(){return m},fromValues:function(){return N},identity:function(){return x},invert:function(){return y},mul:function(){return Ft},multiply:function(){return _},multiplyScalar:function(){return dt},multiplyScalarAndAdd:function(){return Ot},normalFromMat4:function(){return $},projection:function(){return q},rotate:function(){return O},scale:function(){return B},set:function(){return E},str:function(){return rt},sub:function(){return Nt},subtract:function(){return ht},translate:function(){return S},transpose:function(){return p}});var G=z(249685);function X(){var st=new G.ARRAY_TYPE(9);return G.ARRAY_TYPE!=Float32Array&&(st[1]=0,st[2]=0,st[3]=0,st[5]=0,st[6]=0,st[7]=0),st[0]=1,st[4]=1,st[8]=1,st}function R(st,yt){return st[0]=yt[0],st[1]=yt[1],st[2]=yt[2],st[3]=yt[4],st[4]=yt[5],st[5]=yt[6],st[6]=yt[8],st[7]=yt[9],st[8]=yt[10],st}function L(st){var yt=new G.ARRAY_TYPE(9);return yt[0]=st[0],yt[1]=st[1],yt[2]=st[2],yt[3]=st[3],yt[4]=st[4],yt[5]=st[5],yt[6]=st[6],yt[7]=st[7],yt[8]=st[8],yt}function P(st,yt){return st[0]=yt[0],st[1]=yt[1],st[2]=yt[2],st[3]=yt[3],st[4]=yt[4],st[5]=yt[5],st[6]=yt[6],st[7]=yt[7],st[8]=yt[8],st}function N(st,yt,kt,ee,$t,ge,Pe,er,Jt){var ae=new G.ARRAY_TYPE(9);return ae[0]=st,ae[1]=yt,ae[2]=kt,ae[3]=ee,ae[4]=$t,ae[5]=ge,ae[6]=Pe,ae[7]=er,ae[8]=Jt,ae}function E(st,yt,kt,ee,$t,ge,Pe,er,Jt,ae){return st[0]=yt,st[1]=kt,st[2]=ee,st[3]=$t,st[4]=ge,st[5]=Pe,st[6]=er,st[7]=Jt,st[8]=ae,st}function x(st){return st[0]=1,st[1]=0,st[2]=0,st[3]=0,st[4]=1,st[5]=0,st[6]=0,st[7]=0,st[8]=1,st}function p(st,yt){if(st===yt){var kt=yt[1],ee=yt[2],$t=yt[5];st[1]=yt[3],st[2]=yt[6],st[3]=kt,st[5]=yt[7],st[6]=ee,st[7]=$t}else st[0]=yt[0],st[1]=yt[3],st[2]=yt[6],st[3]=yt[1],st[4]=yt[4],st[5]=yt[7],st[6]=yt[2],st[7]=yt[5],st[8]=yt[8];return st}function y(st,yt){var kt=yt[0],ee=yt[1],$t=yt[2],ge=yt[3],Pe=yt[4],er=yt[5],Jt=yt[6],ae=yt[7],Se=yt[8],xe=Se*Pe-er*ae,we=-Se*ge+er*Jt,zt=ae*ge-Pe*Jt,Wt=kt*xe+ee*we+$t*zt;return Wt?(Wt=1/Wt,st[0]=xe*Wt,st[1]=(-Se*ee+$t*ae)*Wt,st[2]=(er*ee-$t*Pe)*Wt,st[3]=we*Wt,st[4]=(Se*kt-$t*Jt)*Wt,st[5]=(-er*kt+$t*ge)*Wt,st[6]=zt*Wt,st[7]=(-ae*kt+ee*Jt)*Wt,st[8]=(Pe*kt-ee*ge)*Wt,st):null}function g(st,yt){var kt=yt[0],ee=yt[1],$t=yt[2],ge=yt[3],Pe=yt[4],er=yt[5],Jt=yt[6],ae=yt[7],Se=yt[8];return st[0]=Pe*Se-er*ae,st[1]=$t*ae-ee*Se,st[2]=ee*er-$t*Pe,st[3]=er*Jt-ge*Se,st[4]=kt*Se-$t*Jt,st[5]=$t*ge-kt*er,st[6]=ge*ae-Pe*Jt,st[7]=ee*Jt-kt*ae,st[8]=kt*Pe-ee*ge,st}function A(st){var yt=st[0],kt=st[1],ee=st[2],$t=st[3],ge=st[4],Pe=st[5],er=st[6],Jt=st[7],ae=st[8];return yt*(ae*ge-Pe*Jt)+kt*(-ae*$t+Pe*er)+ee*(Jt*$t-ge*er)}function _(st,yt,kt){var ee=yt[0],$t=yt[1],ge=yt[2],Pe=yt[3],er=yt[4],Jt=yt[5],ae=yt[6],Se=yt[7],xe=yt[8],we=kt[0],zt=kt[1],Wt=kt[2],Ie=kt[3],Yt=kt[4],ie=kt[5],Oe=kt[6],re=kt[7],_e=kt[8];return st[0]=we*ee+zt*Pe+Wt*ae,st[1]=we*$t+zt*er+Wt*Se,st[2]=we*ge+zt*Jt+Wt*xe,st[3]=Ie*ee+Yt*Pe+ie*ae,st[4]=Ie*$t+Yt*er+ie*Se,st[5]=Ie*ge+Yt*Jt+ie*xe,st[6]=Oe*ee+re*Pe+_e*ae,st[7]=Oe*$t+re*er+_e*Se,st[8]=Oe*ge+re*Jt+_e*xe,st}function S(st,yt,kt){var ee=yt[0],$t=yt[1],ge=yt[2],Pe=yt[3],er=yt[4],Jt=yt[5],ae=yt[6],Se=yt[7],xe=yt[8],we=kt[0],zt=kt[1];return st[0]=ee,st[1]=$t,st[2]=ge,st[3]=Pe,st[4]=er,st[5]=Jt,st[6]=we*ee+zt*Pe+ae,st[7]=we*$t+zt*er+Se,st[8]=we*ge+zt*Jt+xe,st}function O(st,yt,kt){var ee=yt[0],$t=yt[1],ge=yt[2],Pe=yt[3],er=yt[4],Jt=yt[5],ae=yt[6],Se=yt[7],xe=yt[8],we=Math.sin(kt),zt=Math.cos(kt);return st[0]=zt*ee+we*Pe,st[1]=zt*$t+we*er,st[2]=zt*ge+we*Jt,st[3]=zt*Pe-we*ee,st[4]=zt*er-we*$t,st[5]=zt*Jt-we*ge,st[6]=ae,st[7]=Se,st[8]=xe,st}function B(st,yt,kt){var ee=kt[0],$t=kt[1];return st[0]=ee*yt[0],st[1]=ee*yt[1],st[2]=ee*yt[2],st[3]=$t*yt[3],st[4]=$t*yt[4],st[5]=$t*yt[5],st[6]=yt[6],st[7]=yt[7],st[8]=yt[8],st}function m(st,yt){return st[0]=1,st[1]=0,st[2]=0,st[3]=0,st[4]=1,st[5]=0,st[6]=yt[0],st[7]=yt[1],st[8]=1,st}function d(st,yt){var kt=Math.sin(yt),ee=Math.cos(yt);return st[0]=ee,st[1]=kt,st[2]=0,st[3]=-kt,st[4]=ee,st[5]=0,st[6]=0,st[7]=0,st[8]=1,st}function tt(st,yt){return st[0]=yt[0],st[1]=0,st[2]=0,st[3]=0,st[4]=yt[1],st[5]=0,st[6]=0,st[7]=0,st[8]=1,st}function Y(st,yt){return st[0]=yt[0],st[1]=yt[1],st[2]=0,st[3]=yt[2],st[4]=yt[3],st[5]=0,st[6]=yt[4],st[7]=yt[5],st[8]=1,st}function V(st,yt){var kt=yt[0],ee=yt[1],$t=yt[2],ge=yt[3],Pe=kt+kt,er=ee+ee,Jt=$t+$t,ae=kt*Pe,Se=ee*Pe,xe=ee*er,we=$t*Pe,zt=$t*er,Wt=$t*Jt,Ie=ge*Pe,Yt=ge*er,ie=ge*Jt;return st[0]=1-xe-Wt,st[3]=Se-ie,st[6]=we+Yt,st[1]=Se+ie,st[4]=1-ae-Wt,st[7]=zt-Ie,st[2]=we-Yt,st[5]=zt+Ie,st[8]=1-ae-xe,st}function $(st,yt){var kt=yt[0],ee=yt[1],$t=yt[2],ge=yt[3],Pe=yt[4],er=yt[5],Jt=yt[6],ae=yt[7],Se=yt[8],xe=yt[9],we=yt[10],zt=yt[11],Wt=yt[12],Ie=yt[13],Yt=yt[14],ie=yt[15],Oe=kt*er-ee*Pe,re=kt*Jt-$t*Pe,_e=kt*ae-ge*Pe,Ge=ee*Jt-$t*er,Ct=ee*ae-ge*er,Nr=$t*ae-ge*Jt,Or=Se*Ie-xe*Wt,Ur=Se*Yt-we*Wt,Sr=Se*ie-zt*Wt,gn=xe*Yt-we*Ie,Rr=xe*ie-zt*Ie,ln=we*ie-zt*Yt,Nn=Oe*ln-re*Rr+_e*gn+Ge*Sr-Ct*Ur+Nr*Or;return Nn?(Nn=1/Nn,st[0]=(er*ln-Jt*Rr+ae*gn)*Nn,st[1]=(Jt*Sr-Pe*ln-ae*Ur)*Nn,st[2]=(Pe*Rr-er*Sr+ae*Or)*Nn,st[3]=($t*Rr-ee*ln-ge*gn)*Nn,st[4]=(kt*ln-$t*Sr+ge*Ur)*Nn,st[5]=(ee*Sr-kt*Rr-ge*Or)*Nn,st[6]=(Ie*Nr-Yt*Ct+ie*Ge)*Nn,st[7]=(Yt*_e-Wt*Nr-ie*re)*Nn,st[8]=(Wt*Ct-Ie*_e+ie*Oe)*Nn,st):null}function q(st,yt,kt){return st[0]=2/yt,st[1]=0,st[2]=0,st[3]=0,st[4]=-2/kt,st[5]=0,st[6]=-1,st[7]=1,st[8]=1,st}function rt(st){return"mat3("+st[0]+", "+st[1]+", "+st[2]+", "+st[3]+", "+st[4]+", "+st[5]+", "+st[6]+", "+st[7]+", "+st[8]+")"}function Q(st){return Math.hypot(st[0],st[1],st[2],st[3],st[4],st[5],st[6],st[7],st[8])}function it(st,yt,kt){return st[0]=yt[0]+kt[0],st[1]=yt[1]+kt[1],st[2]=yt[2]+kt[2],st[3]=yt[3]+kt[3],st[4]=yt[4]+kt[4],st[5]=yt[5]+kt[5],st[6]=yt[6]+kt[6],st[7]=yt[7]+kt[7],st[8]=yt[8]+kt[8],st}function ht(st,yt,kt){return st[0]=yt[0]-kt[0],st[1]=yt[1]-kt[1],st[2]=yt[2]-kt[2],st[3]=yt[3]-kt[3],st[4]=yt[4]-kt[4],st[5]=yt[5]-kt[5],st[6]=yt[6]-kt[6],st[7]=yt[7]-kt[7],st[8]=yt[8]-kt[8],st}function dt(st,yt,kt){return st[0]=yt[0]*kt,st[1]=yt[1]*kt,st[2]=yt[2]*kt,st[3]=yt[3]*kt,st[4]=yt[4]*kt,st[5]=yt[5]*kt,st[6]=yt[6]*kt,st[7]=yt[7]*kt,st[8]=yt[8]*kt,st}function Ot(st,yt,kt,ee){return st[0]=yt[0]+kt[0]*ee,st[1]=yt[1]+kt[1]*ee,st[2]=yt[2]+kt[2]*ee,st[3]=yt[3]+kt[3]*ee,st[4]=yt[4]+kt[4]*ee,st[5]=yt[5]+kt[5]*ee,st[6]=yt[6]+kt[6]*ee,st[7]=yt[7]+kt[7]*ee,st[8]=yt[8]+kt[8]*ee,st}function It(st,yt){return st[0]===yt[0]&&st[1]===yt[1]&&st[2]===yt[2]&&st[3]===yt[3]&&st[4]===yt[4]&&st[5]===yt[5]&&st[6]===yt[6]&&st[7]===yt[7]&&st[8]===yt[8]}function Kt(st,yt){var kt=st[0],ee=st[1],$t=st[2],ge=st[3],Pe=st[4],er=st[5],Jt=st[6],ae=st[7],Se=st[8],xe=yt[0],we=yt[1],zt=yt[2],Wt=yt[3],Ie=yt[4],Yt=yt[5],ie=yt[6],Oe=yt[7],re=yt[8];return Math.abs(kt-xe)<=G.EPSILON*Math.max(1,Math.abs(kt),Math.abs(xe))&&Math.abs(ee-we)<=G.EPSILON*Math.max(1,Math.abs(ee),Math.abs(we))&&Math.abs($t-zt)<=G.EPSILON*Math.max(1,Math.abs($t),Math.abs(zt))&&Math.abs(ge-Wt)<=G.EPSILON*Math.max(1,Math.abs(ge),Math.abs(Wt))&&Math.abs(Pe-Ie)<=G.EPSILON*Math.max(1,Math.abs(Pe),Math.abs(Ie))&&Math.abs(er-Yt)<=G.EPSILON*Math.max(1,Math.abs(er),Math.abs(Yt))&&Math.abs(Jt-ie)<=G.EPSILON*Math.max(1,Math.abs(Jt),Math.abs(ie))&&Math.abs(ae-Oe)<=G.EPSILON*Math.max(1,Math.abs(ae),Math.abs(Oe))&&Math.abs(Se-re)<=G.EPSILON*Math.max(1,Math.abs(Se),Math.abs(re))}var Ft=_,Nt=ht},631437:function(He,F,z){"use strict";z.r(F),z.d(F,{add:function(){return E},angle:function(){return st},ceil:function(){return g},clone:function(){return R},copy:function(){return P},create:function(){return X},cross:function(){return it},dist:function(){return ae},distance:function(){return d},div:function(){return Jt},divide:function(){return y},dot:function(){return Q},equals:function(){return $t},exactEquals:function(){return ee},floor:function(){return A},forEach:function(){return we},fromValues:function(){return L},inverse:function(){return q},len:function(){return ge},length:function(){return Y},lerp:function(){return ht},max:function(){return S},min:function(){return _},mul:function(){return er},multiply:function(){return p},negate:function(){return $},normalize:function(){return rt},random:function(){return dt},rotate:function(){return Nt},round:function(){return O},scale:function(){return B},scaleAndAdd:function(){return m},set:function(){return N},sqrDist:function(){return Se},sqrLen:function(){return xe},squaredDistance:function(){return tt},squaredLength:function(){return V},str:function(){return kt},sub:function(){return Pe},subtract:function(){return x},transformMat2:function(){return Ot},transformMat2d:function(){return It},transformMat3:function(){return Kt},transformMat4:function(){return Ft},zero:function(){return yt}});var G=z(249685);function X(){var zt=new G.ARRAY_TYPE(2);return G.ARRAY_TYPE!=Float32Array&&(zt[0]=0,zt[1]=0),zt}function R(zt){var Wt=new G.ARRAY_TYPE(2);return Wt[0]=zt[0],Wt[1]=zt[1],Wt}function L(zt,Wt){var Ie=new G.ARRAY_TYPE(2);return Ie[0]=zt,Ie[1]=Wt,Ie}function P(zt,Wt){return zt[0]=Wt[0],zt[1]=Wt[1],zt}function N(zt,Wt,Ie){return zt[0]=Wt,zt[1]=Ie,zt}function E(zt,Wt,Ie){return zt[0]=Wt[0]+Ie[0],zt[1]=Wt[1]+Ie[1],zt}function x(zt,Wt,Ie){return zt[0]=Wt[0]-Ie[0],zt[1]=Wt[1]-Ie[1],zt}function p(zt,Wt,Ie){return zt[0]=Wt[0]*Ie[0],zt[1]=Wt[1]*Ie[1],zt}function y(zt,Wt,Ie){return zt[0]=Wt[0]/Ie[0],zt[1]=Wt[1]/Ie[1],zt}function g(zt,Wt){return zt[0]=Math.ceil(Wt[0]),zt[1]=Math.ceil(Wt[1]),zt}function A(zt,Wt){return zt[0]=Math.floor(Wt[0]),zt[1]=Math.floor(Wt[1]),zt}function _(zt,Wt,Ie){return zt[0]=Math.min(Wt[0],Ie[0]),zt[1]=Math.min(Wt[1],Ie[1]),zt}function S(zt,Wt,Ie){return zt[0]=Math.max(Wt[0],Ie[0]),zt[1]=Math.max(Wt[1],Ie[1]),zt}function O(zt,Wt){return zt[0]=Math.round(Wt[0]),zt[1]=Math.round(Wt[1]),zt}function B(zt,Wt,Ie){return zt[0]=Wt[0]*Ie,zt[1]=Wt[1]*Ie,zt}function m(zt,Wt,Ie,Yt){return zt[0]=Wt[0]+Ie[0]*Yt,zt[1]=Wt[1]+Ie[1]*Yt,zt}function d(zt,Wt){var Ie=Wt[0]-zt[0],Yt=Wt[1]-zt[1];return Math.hypot(Ie,Yt)}function tt(zt,Wt){var Ie=Wt[0]-zt[0],Yt=Wt[1]-zt[1];return Ie*Ie+Yt*Yt}function Y(zt){var Wt=zt[0],Ie=zt[1];return Math.hypot(Wt,Ie)}function V(zt){var Wt=zt[0],Ie=zt[1];return Wt*Wt+Ie*Ie}function $(zt,Wt){return zt[0]=-Wt[0],zt[1]=-Wt[1],zt}function q(zt,Wt){return zt[0]=1/Wt[0],zt[1]=1/Wt[1],zt}function rt(zt,Wt){var Ie=Wt[0],Yt=Wt[1],ie=Ie*Ie+Yt*Yt;return ie>0&&(ie=1/Math.sqrt(ie)),zt[0]=Wt[0]*ie,zt[1]=Wt[1]*ie,zt}function Q(zt,Wt){return zt[0]*Wt[0]+zt[1]*Wt[1]}function it(zt,Wt,Ie){var Yt=Wt[0]*Ie[1]-Wt[1]*Ie[0];return zt[0]=zt[1]=0,zt[2]=Yt,zt}function ht(zt,Wt,Ie,Yt){var ie=Wt[0],Oe=Wt[1];return zt[0]=ie+Yt*(Ie[0]-ie),zt[1]=Oe+Yt*(Ie[1]-Oe),zt}function dt(zt,Wt){Wt=Wt||1;var Ie=G.RANDOM()*2*Math.PI;return zt[0]=Math.cos(Ie)*Wt,zt[1]=Math.sin(Ie)*Wt,zt}function Ot(zt,Wt,Ie){var Yt=Wt[0],ie=Wt[1];return zt[0]=Ie[0]*Yt+Ie[2]*ie,zt[1]=Ie[1]*Yt+Ie[3]*ie,zt}function It(zt,Wt,Ie){var Yt=Wt[0],ie=Wt[1];return zt[0]=Ie[0]*Yt+Ie[2]*ie+Ie[4],zt[1]=Ie[1]*Yt+Ie[3]*ie+Ie[5],zt}function Kt(zt,Wt,Ie){var Yt=Wt[0],ie=Wt[1];return zt[0]=Ie[0]*Yt+Ie[3]*ie+Ie[6],zt[1]=Ie[1]*Yt+Ie[4]*ie+Ie[7],zt}function Ft(zt,Wt,Ie){var Yt=Wt[0],ie=Wt[1];return zt[0]=Ie[0]*Yt+Ie[4]*ie+Ie[12],zt[1]=Ie[1]*Yt+Ie[5]*ie+Ie[13],zt}function Nt(zt,Wt,Ie,Yt){var ie=Wt[0]-Ie[0],Oe=Wt[1]-Ie[1],re=Math.sin(Yt),_e=Math.cos(Yt);return zt[0]=ie*_e-Oe*re+Ie[0],zt[1]=ie*re+Oe*_e+Ie[1],zt}function st(zt,Wt){var Ie=zt[0],Yt=zt[1],ie=Wt[0],Oe=Wt[1],re=Math.sqrt(Ie*Ie+Yt*Yt)*Math.sqrt(ie*ie+Oe*Oe),_e=re&&(Ie*ie+Yt*Oe)/re;return Math.acos(Math.min(Math.max(_e,-1),1))}function yt(zt){return zt[0]=0,zt[1]=0,zt}function kt(zt){return"vec2("+zt[0]+", "+zt[1]+")"}function ee(zt,Wt){return zt[0]===Wt[0]&&zt[1]===Wt[1]}function $t(zt,Wt){var Ie=zt[0],Yt=zt[1],ie=Wt[0],Oe=Wt[1];return Math.abs(Ie-ie)<=G.EPSILON*Math.max(1,Math.abs(Ie),Math.abs(ie))&&Math.abs(Yt-Oe)<=G.EPSILON*Math.max(1,Math.abs(Yt),Math.abs(Oe))}var ge=Y,Pe=x,er=p,Jt=y,ae=d,Se=tt,xe=V,we=function(){var zt=X();return function(Wt,Ie,Yt,ie,Oe,re){var _e,Ge;for(Ie||(Ie=2),Yt||(Yt=0),ie?Ge=Math.min(ie*Ie+Yt,Wt.length):Ge=Wt.length,_e=Yt;_e<Ge;_e+=Ie)zt[0]=Wt[_e],zt[1]=Wt[_e+1],Oe(zt,zt,re),Wt[_e]=zt[0],Wt[_e+1]=zt[1];return Wt}}()},277160:function(He,F,z){"use strict";z.r(F),z.d(F,{add:function(){return x},angle:function(){return ee},bezier:function(){return Ot},ceil:function(){return A},clone:function(){return R},copy:function(){return N},create:function(){return X},cross:function(){return it},dist:function(){return xe},distance:function(){return tt},div:function(){return Se},divide:function(){return g},dot:function(){return Q},equals:function(){return er},exactEquals:function(){return Pe},floor:function(){return _},forEach:function(){return Ie},fromValues:function(){return P},hermite:function(){return dt},inverse:function(){return q},len:function(){return zt},length:function(){return L},lerp:function(){return ht},max:function(){return O},min:function(){return S},mul:function(){return ae},multiply:function(){return y},negate:function(){return $},normalize:function(){return rt},random:function(){return It},rotateX:function(){return st},rotateY:function(){return yt},rotateZ:function(){return kt},round:function(){return B},scale:function(){return m},scaleAndAdd:function(){return d},set:function(){return E},sqrDist:function(){return we},sqrLen:function(){return Wt},squaredDistance:function(){return Y},squaredLength:function(){return V},str:function(){return ge},sub:function(){return Jt},subtract:function(){return p},transformMat3:function(){return Ft},transformMat4:function(){return Kt},transformQuat:function(){return Nt},zero:function(){return $t}});var G=z(249685);function X(){var Yt=new G.ARRAY_TYPE(3);return G.ARRAY_TYPE!=Float32Array&&(Yt[0]=0,Yt[1]=0,Yt[2]=0),Yt}function R(Yt){var ie=new G.ARRAY_TYPE(3);return ie[0]=Yt[0],ie[1]=Yt[1],ie[2]=Yt[2],ie}function L(Yt){var ie=Yt[0],Oe=Yt[1],re=Yt[2];return Math.hypot(ie,Oe,re)}function P(Yt,ie,Oe){var re=new G.ARRAY_TYPE(3);return re[0]=Yt,re[1]=ie,re[2]=Oe,re}function N(Yt,ie){return Yt[0]=ie[0],Yt[1]=ie[1],Yt[2]=ie[2],Yt}function E(Yt,ie,Oe,re){return Yt[0]=ie,Yt[1]=Oe,Yt[2]=re,Yt}function x(Yt,ie,Oe){return Yt[0]=ie[0]+Oe[0],Yt[1]=ie[1]+Oe[1],Yt[2]=ie[2]+Oe[2],Yt}function p(Yt,ie,Oe){return Yt[0]=ie[0]-Oe[0],Yt[1]=ie[1]-Oe[1],Yt[2]=ie[2]-Oe[2],Yt}function y(Yt,ie,Oe){return Yt[0]=ie[0]*Oe[0],Yt[1]=ie[1]*Oe[1],Yt[2]=ie[2]*Oe[2],Yt}function g(Yt,ie,Oe){return Yt[0]=ie[0]/Oe[0],Yt[1]=ie[1]/Oe[1],Yt[2]=ie[2]/Oe[2],Yt}function A(Yt,ie){return Yt[0]=Math.ceil(ie[0]),Yt[1]=Math.ceil(ie[1]),Yt[2]=Math.ceil(ie[2]),Yt}function _(Yt,ie){return Yt[0]=Math.floor(ie[0]),Yt[1]=Math.floor(ie[1]),Yt[2]=Math.floor(ie[2]),Yt}function S(Yt,ie,Oe){return Yt[0]=Math.min(ie[0],Oe[0]),Yt[1]=Math.min(ie[1],Oe[1]),Yt[2]=Math.min(ie[2],Oe[2]),Yt}function O(Yt,ie,Oe){return Yt[0]=Math.max(ie[0],Oe[0]),Yt[1]=Math.max(ie[1],Oe[1]),Yt[2]=Math.max(ie[2],Oe[2]),Yt}function B(Yt,ie){return Yt[0]=Math.round(ie[0]),Yt[1]=Math.round(ie[1]),Yt[2]=Math.round(ie[2]),Yt}function m(Yt,ie,Oe){return Yt[0]=ie[0]*Oe,Yt[1]=ie[1]*Oe,Yt[2]=ie[2]*Oe,Yt}function d(Yt,ie,Oe,re){return Yt[0]=ie[0]+Oe[0]*re,Yt[1]=ie[1]+Oe[1]*re,Yt[2]=ie[2]+Oe[2]*re,Yt}function tt(Yt,ie){var Oe=ie[0]-Yt[0],re=ie[1]-Yt[1],_e=ie[2]-Yt[2];return Math.hypot(Oe,re,_e)}function Y(Yt,ie){var Oe=ie[0]-Yt[0],re=ie[1]-Yt[1],_e=ie[2]-Yt[2];return Oe*Oe+re*re+_e*_e}function V(Yt){var ie=Yt[0],Oe=Yt[1],re=Yt[2];return ie*ie+Oe*Oe+re*re}function $(Yt,ie){return Yt[0]=-ie[0],Yt[1]=-ie[1],Yt[2]=-ie[2],Yt}function q(Yt,ie){return Yt[0]=1/ie[0],Yt[1]=1/ie[1],Yt[2]=1/ie[2],Yt}function rt(Yt,ie){var Oe=ie[0],re=ie[1],_e=ie[2],Ge=Oe*Oe+re*re+_e*_e;return Ge>0&&(Ge=1/Math.sqrt(Ge)),Yt[0]=ie[0]*Ge,Yt[1]=ie[1]*Ge,Yt[2]=ie[2]*Ge,Yt}function Q(Yt,ie){return Yt[0]*ie[0]+Yt[1]*ie[1]+Yt[2]*ie[2]}function it(Yt,ie,Oe){var re=ie[0],_e=ie[1],Ge=ie[2],Ct=Oe[0],Nr=Oe[1],Or=Oe[2];return Yt[0]=_e*Or-Ge*Nr,Yt[1]=Ge*Ct-re*Or,Yt[2]=re*Nr-_e*Ct,Yt}function ht(Yt,ie,Oe,re){var _e=ie[0],Ge=ie[1],Ct=ie[2];return Yt[0]=_e+re*(Oe[0]-_e),Yt[1]=Ge+re*(Oe[1]-Ge),Yt[2]=Ct+re*(Oe[2]-Ct),Yt}function dt(Yt,ie,Oe,re,_e,Ge){var Ct=Ge*Ge,Nr=Ct*(2*Ge-3)+1,Or=Ct*(Ge-2)+Ge,Ur=Ct*(Ge-1),Sr=Ct*(3-2*Ge);return Yt[0]=ie[0]*Nr+Oe[0]*Or+re[0]*Ur+_e[0]*Sr,Yt[1]=ie[1]*Nr+Oe[1]*Or+re[1]*Ur+_e[1]*Sr,Yt[2]=ie[2]*Nr+Oe[2]*Or+re[2]*Ur+_e[2]*Sr,Yt}function Ot(Yt,ie,Oe,re,_e,Ge){var Ct=1-Ge,Nr=Ct*Ct,Or=Ge*Ge,Ur=Nr*Ct,Sr=3*Ge*Nr,gn=3*Or*Ct,Rr=Or*Ge;return Yt[0]=ie[0]*Ur+Oe[0]*Sr+re[0]*gn+_e[0]*Rr,Yt[1]=ie[1]*Ur+Oe[1]*Sr+re[1]*gn+_e[1]*Rr,Yt[2]=ie[2]*Ur+Oe[2]*Sr+re[2]*gn+_e[2]*Rr,Yt}function It(Yt,ie){ie=ie||1;var Oe=G.RANDOM()*2*Math.PI,re=G.RANDOM()*2-1,_e=Math.sqrt(1-re*re)*ie;return Yt[0]=Math.cos(Oe)*_e,Yt[1]=Math.sin(Oe)*_e,Yt[2]=re*ie,Yt}function Kt(Yt,ie,Oe){var re=ie[0],_e=ie[1],Ge=ie[2],Ct=Oe[3]*re+Oe[7]*_e+Oe[11]*Ge+Oe[15];return Ct=Ct||1,Yt[0]=(Oe[0]*re+Oe[4]*_e+Oe[8]*Ge+Oe[12])/Ct,Yt[1]=(Oe[1]*re+Oe[5]*_e+Oe[9]*Ge+Oe[13])/Ct,Yt[2]=(Oe[2]*re+Oe[6]*_e+Oe[10]*Ge+Oe[14])/Ct,Yt}function Ft(Yt,ie,Oe){var re=ie[0],_e=ie[1],Ge=ie[2];return Yt[0]=re*Oe[0]+_e*Oe[3]+Ge*Oe[6],Yt[1]=re*Oe[1]+_e*Oe[4]+Ge*Oe[7],Yt[2]=re*Oe[2]+_e*Oe[5]+Ge*Oe[8],Yt}function Nt(Yt,ie,Oe){var re=Oe[0],_e=Oe[1],Ge=Oe[2],Ct=Oe[3],Nr=ie[0],Or=ie[1],Ur=ie[2],Sr=_e*Ur-Ge*Or,gn=Ge*Nr-re*Ur,Rr=re*Or-_e*Nr,ln=_e*Rr-Ge*gn,Nn=Ge*Sr-re*Rr,Ln=re*gn-_e*Sr,fn=Ct*2;return Sr*=fn,gn*=fn,Rr*=fn,ln*=2,Nn*=2,Ln*=2,Yt[0]=Nr+Sr+ln,Yt[1]=Or+gn+Nn,Yt[2]=Ur+Rr+Ln,Yt}function st(Yt,ie,Oe,re){var _e=[],Ge=[];return _e[0]=ie[0]-Oe[0],_e[1]=ie[1]-Oe[1],_e[2]=ie[2]-Oe[2],Ge[0]=_e[0],Ge[1]=_e[1]*Math.cos(re)-_e[2]*Math.sin(re),Ge[2]=_e[1]*Math.sin(re)+_e[2]*Math.cos(re),Yt[0]=Ge[0]+Oe[0],Yt[1]=Ge[1]+Oe[1],Yt[2]=Ge[2]+Oe[2],Yt}function yt(Yt,ie,Oe,re){var _e=[],Ge=[];return _e[0]=ie[0]-Oe[0],_e[1]=ie[1]-Oe[1],_e[2]=ie[2]-Oe[2],Ge[0]=_e[2]*Math.sin(re)+_e[0]*Math.cos(re),Ge[1]=_e[1],Ge[2]=_e[2]*Math.cos(re)-_e[0]*Math.sin(re),Yt[0]=Ge[0]+Oe[0],Yt[1]=Ge[1]+Oe[1],Yt[2]=Ge[2]+Oe[2],Yt}function kt(Yt,ie,Oe,re){var _e=[],Ge=[];return _e[0]=ie[0]-Oe[0],_e[1]=ie[1]-Oe[1],_e[2]=ie[2]-Oe[2],Ge[0]=_e[0]*Math.cos(re)-_e[1]*Math.sin(re),Ge[1]=_e[0]*Math.sin(re)+_e[1]*Math.cos(re),Ge[2]=_e[2],Yt[0]=Ge[0]+Oe[0],Yt[1]=Ge[1]+Oe[1],Yt[2]=Ge[2]+Oe[2],Yt}function ee(Yt,ie){var Oe=Yt[0],re=Yt[1],_e=Yt[2],Ge=ie[0],Ct=ie[1],Nr=ie[2],Or=Math.sqrt(Oe*Oe+re*re+_e*_e),Ur=Math.sqrt(Ge*Ge+Ct*Ct+Nr*Nr),Sr=Or*Ur,gn=Sr&&Q(Yt,ie)/Sr;return Math.acos(Math.min(Math.max(gn,-1),1))}function $t(Yt){return Yt[0]=0,Yt[1]=0,Yt[2]=0,Yt}function ge(Yt){return"vec3("+Yt[0]+", "+Yt[1]+", "+Yt[2]+")"}function Pe(Yt,ie){return Yt[0]===ie[0]&&Yt[1]===ie[1]&&Yt[2]===ie[2]}function er(Yt,ie){var Oe=Yt[0],re=Yt[1],_e=Yt[2],Ge=ie[0],Ct=ie[1],Nr=ie[2];return Math.abs(Oe-Ge)<=G.EPSILON*Math.max(1,Math.abs(Oe),Math.abs(Ge))&&Math.abs(re-Ct)<=G.EPSILON*Math.max(1,Math.abs(re),Math.abs(Ct))&&Math.abs(_e-Nr)<=G.EPSILON*Math.max(1,Math.abs(_e),Math.abs(Nr))}var Jt=p,ae=y,Se=g,xe=tt,we=Y,zt=L,Wt=V,Ie=function(){var Yt=X();return function(ie,Oe,re,_e,Ge,Ct){var Nr,Or;for(Oe||(Oe=3),re||(re=0),_e?Or=Math.min(_e*Oe+re,ie.length):Or=ie.length,Nr=re;Nr<Or;Nr+=Oe)Yt[0]=ie[Nr],Yt[1]=ie[Nr+1],Yt[2]=ie[Nr+2],Ge(Yt,Yt,Ct),ie[Nr]=Yt[0],ie[Nr+1]=Yt[1],ie[Nr+2]=Yt[2];return ie}}()},738186:function(He){var F=[],z=[],G="insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).";function X(L,P){if(P=P||{},L===void 0)throw new Error(G);var N=P.prepend===!0?"prepend":"append",E=P.container!==void 0?P.container:document.querySelector("head"),x=F.indexOf(E);x===-1&&(x=F.push(E)-1,z[x]={});var p;return z[x]!==void 0&&z[x][N]!==void 0?p=z[x][N]:(p=z[x][N]=R(),N==="prepend"?E.insertBefore(p,E.childNodes[0]):E.appendChild(p)),L.charCodeAt(0)===65279&&(L=L.substr(1,L.length)),p.styleSheet?p.styleSheet.cssText+=L:p.textContent+=L,p}function R(){var L=document.createElement("style");return L.setAttribute("type","text/css"),L}He.exports=X,He.exports.insertCss=X},744091:function(He,F,z){"use strict";z.r(F),z.d(F,{isAnyArray:function(){return X}});const G=Object.prototype.toString;function X(R){const L=G.call(R);return L.endsWith("Array]")&&!L.includes("Big")}},238749:function(He,F,z){var G=z(644239),X=z(541780),R=z(637005),L="[object Arguments]",P="[object Array]",N="[object Boolean]",E="[object Date]",x="[object Error]",p="[object Function]",y="[object Map]",g="[object Number]",A="[object Object]",_="[object RegExp]",S="[object Set]",O="[object String]",B="[object WeakMap]",m="[object ArrayBuffer]",d="[object DataView]",tt="[object Float32Array]",Y="[object Float64Array]",V="[object Int8Array]",$="[object Int16Array]",q="[object Int32Array]",rt="[object Uint8Array]",Q="[object Uint8ClampedArray]",it="[object Uint16Array]",ht="[object Uint32Array]",dt={};dt[tt]=dt[Y]=dt[V]=dt[$]=dt[q]=dt[rt]=dt[Q]=dt[it]=dt[ht]=!0,dt[L]=dt[P]=dt[m]=dt[N]=dt[d]=dt[E]=dt[x]=dt[p]=dt[y]=dt[g]=dt[A]=dt[_]=dt[S]=dt[O]=dt[B]=!1;function Ot(It){return R(It)&&X(It.length)&&!!dt[G(It)]}He.exports=Ot},385924:function(He,F,z){var G=z(205569),X=G(Object.getPrototypeOf,Object);He.exports=X},531167:function(He,F,z){He=z.nmd(He);var G=z(431957),X=F&&!F.nodeType&&F,R=X&&!0&&He&&!He.nodeType&&He,L=R&&R.exports===X,P=L&&G.process,N=function(){try{var E=R&&R.require&&R.require("util").types;return E||P&&P.binding&&P.binding("util")}catch(x){}}();He.exports=N},205569:function(He){function F(z,G){return function(X){return z(G(X))}}He.exports=F},281763:function(He,F,z){var G=z(644239),X=z(637005),R="[object Number]";function L(P){return typeof P=="number"||X(P)&&G(P)==R}He.exports=L},968630:function(He,F,z){var G=z(644239),X=z(385924),R=z(637005),L="[object Object]",P=Function.prototype,N=Object.prototype,E=P.toString,x=N.hasOwnProperty,p=E.call(Object);function y(g){if(!R(g)||G(g)!=L)return!1;var A=X(g);if(A===null)return!0;var _=x.call(A,"constructor")&&A.constructor;return typeof _=="function"&&_ instanceof _&&E.call(_)==p}He.exports=y},936719:function(He,F,z){var G=z(238749),X=z(307518),R=z(531167),L=R&&R.isTypedArray,P=L?X(L):G;He.exports=P},975823:function(He,F,z){"use strict";z.r(F),z.d(F,{default:function(){return L}});var G=z(744091);function X(P){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!(0,G.isAnyArray)(P))throw new TypeError("input must be an array");if(P.length===0)throw new TypeError("input must not be empty");var E=N.fromIndex,x=E===void 0?0:E,p=N.toIndex,y=p===void 0?P.length:p;if(x<0||x>=P.length||!Number.isInteger(x))throw new Error("fromIndex must be a positive integer smaller than length");if(y<=x||y>P.length||!Number.isInteger(y))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var g=P[x],A=x+1;A<y;A++)P[A]>g&&(g=P[A]);return g}function R(P){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!(0,G.isAnyArray)(P))throw new TypeError("input must be an array");if(P.length===0)throw new TypeError("input must not be empty");var E=N.fromIndex,x=E===void 0?0:E,p=N.toIndex,y=p===void 0?P.length:p;if(x<0||x>=P.length||!Number.isInteger(x))throw new Error("fromIndex must be a positive integer smaller than length");if(y<=x||y>P.length||!Number.isInteger(y))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var g=P[x],A=x+1;A<y;A++)P[A]<g&&(g=P[A]);return g}function L(P){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if((0,G.isAnyArray)(P)){if(P.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var E;if(N.output!==void 0){if(!(0,G.isAnyArray)(N.output))throw new TypeError("output option must be an array if specified");E=N.output}else E=new Array(P.length);var x=R(P),p=X(P);if(x===p)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var y=N.min,g=y===void 0?N.autoMinMax?x:0:y,A=N.max,_=A===void 0?N.autoMinMax?p:1:A;if(g>=_)throw new RangeError("min option must be smaller than max option");for(var S=(_-g)/(p-x),O=0;O<P.length;O++)E[O]=(P[O]-x)*S+g;return E}},481550:function(He){(function(F,z){He.exports=z()})(this,function(){"use strict";var F=function(mt){return mt instanceof Uint8Array||mt instanceof Uint16Array||mt instanceof Uint32Array||mt instanceof Int8Array||mt instanceof Int16Array||mt instanceof Int32Array||mt instanceof Float32Array||mt instanceof Float64Array||mt instanceof Uint8ClampedArray},z=function(mt,qt){for(var Ee=Object.keys(qt),cr=0;cr<Ee.length;++cr)mt[Ee[cr]]=qt[Ee[cr]];return mt},G=`
`;function X(mt){return typeof atob!="undefined"?atob(mt):"base64:"+mt}function R(mt){var qt=new Error("(regl) "+mt);throw console.error(qt),qt}function L(mt,qt){mt||R(qt)}function P(mt){return mt?": "+mt:""}function N(mt,qt,Ee){mt in qt||R("unknown parameter ("+mt+")"+P(Ee)+". possible values: "+Object.keys(qt).join())}function E(mt,qt){F(mt)||R("invalid parameter type"+P(qt)+". must be a typed array")}function x(mt,qt){switch(qt){case"number":return typeof mt=="number";case"object":return typeof mt=="object";case"string":return typeof mt=="string";case"boolean":return typeof mt=="boolean";case"function":return typeof mt=="function";case"undefined":return typeof mt=="undefined";case"symbol":return typeof mt=="symbol"}}function p(mt,qt,Ee){x(mt,qt)||R("invalid parameter type"+P(Ee)+". expected "+qt+", got "+typeof mt)}function y(mt,qt){mt>=0&&(mt|0)===mt||R("invalid parameter type, ("+mt+")"+P(qt)+". must be a nonnegative integer")}function g(mt,qt,Ee){qt.indexOf(mt)<0&&R("invalid value"+P(Ee)+". must be one of: "+qt)}var A=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function _(mt){Object.keys(mt).forEach(function(qt){A.indexOf(qt)<0&&R('invalid regl constructor argument "'+qt+'". must be one of '+A)})}function S(mt,qt){for(mt=mt+"";mt.length<qt;)mt=" "+mt;return mt}function O(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function B(mt,qt){this.number=mt,this.line=qt,this.errors=[]}function m(mt,qt,Ee){this.file=mt,this.line=qt,this.message=Ee}function d(){var mt=new Error,qt=(mt.stack||mt).toString(),Ee=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(qt);if(Ee)return Ee[1];var cr=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(qt);return cr?cr[1]:"unknown"}function tt(){var mt=new Error,qt=(mt.stack||mt).toString(),Ee=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(qt);if(Ee)return Ee[1];var cr=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(qt);return cr?cr[1]:"unknown"}function Y(mt,qt){var Ee=mt.split(`
`),cr=1,Lr=0,lr={unknown:new O,0:new O};lr.unknown.name=lr[0].name=qt||d(),lr.unknown.lines.push(new B(0,""));for(var hr=0;hr<Ee.length;++hr){var Yr=Ee[hr],Vr=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(Yr);if(Vr)switch(Vr[1]){case"line":var $r=/(\d+)(\s+\d+)?/.exec(Vr[2]);$r&&(cr=$r[1]|0,$r[2]&&(Lr=$r[2]|0,Lr in lr||(lr[Lr]=new O)));break;case"define":var Gr=/SHADER_NAME(_B64)?\s+(.*)$/.exec(Vr[2]);Gr&&(lr[Lr].name=Gr[1]?X(Gr[2]):Gr[2]);break}lr[Lr].lines.push(new B(cr++,Yr))}return Object.keys(lr).forEach(function(nn){var v=lr[nn];v.lines.forEach(function(T){v.index[T.number]=T})}),lr}function V(mt){var qt=[];return mt.split(`
`).forEach(function(Ee){if(!(Ee.length<5)){var cr=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(Ee);cr?qt.push(new m(cr[1]|0,cr[2]|0,cr[3].trim())):Ee.length>0&&qt.push(new m("unknown",0,Ee))}}),qt}function $(mt,qt){qt.forEach(function(Ee){var cr=mt[Ee.file];if(cr){var Lr=cr.index[Ee.line];if(Lr){Lr.errors.push(Ee),cr.hasErrors=!0;return}}mt.unknown.hasErrors=!0,mt.unknown.lines[0].errors.push(Ee)})}function q(mt,qt,Ee,cr,Lr){if(!mt.getShaderParameter(qt,mt.COMPILE_STATUS)){var lr=mt.getShaderInfoLog(qt),hr=cr===mt.FRAGMENT_SHADER?"fragment":"vertex";It(Ee,"string",hr+" shader source must be a string",Lr);var Yr=Y(Ee,Lr),Vr=V(lr);$(Yr,Vr),Object.keys(Yr).forEach(function($r){var Gr=Yr[$r];if(!Gr.hasErrors)return;var nn=[""],v=[""];function T(U,Z){nn.push(U),v.push(Z||"")}T("file number "+$r+": "+Gr.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),Gr.lines.forEach(function(U){if(U.errors.length>0){T(S(U.number,4)+"|  ","background-color:yellow; font-weight:bold"),T(U.line+G,"color:red; background-color:yellow; font-weight:bold");var Z=0;U.errors.forEach(function(ot){var ct=ot.message,gt=/^\s*'(.*)'\s*:\s*(.*)$/.exec(ct);if(gt){var bt=gt[1];switch(ct=gt[2],bt){case"assign":bt="=";break}Z=Math.max(U.line.indexOf(bt,Z),0)}else Z=0;T(S("| ",6)),T(S("^^^",Z+3)+G,"font-weight:bold"),T(S("| ",6)),T(ct+G,"font-weight:bold")}),T(S("| ",6)+G)}else T(S(U.number,4)+"|  "),T(U.line+G,"color:red")}),typeof document!="undefined"&&!window.chrome?(v[0]=nn.join("%c"),console.log.apply(console,v)):console.log(nn.join(""))}),L.raise("Error compiling "+hr+" shader, "+Yr[0].name)}}function rt(mt,qt,Ee,cr,Lr){if(!mt.getProgramParameter(qt,mt.LINK_STATUS)){var lr=mt.getProgramInfoLog(qt),hr=Y(Ee,Lr),Yr=Y(cr,Lr),Vr='Error linking program with vertex shader, "'+Yr[0].name+'", and fragment shader "'+hr[0].name+'"';typeof document!="undefined"?console.log("%c"+Vr+G+"%c"+lr,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(Vr+G+lr),L.raise(Vr)}}function Q(mt){mt._commandRef=d()}function it(mt,qt,Ee,cr){Q(mt);function Lr(Vr){return Vr?cr.id(Vr):0}mt._fragId=Lr(mt.static.frag),mt._vertId=Lr(mt.static.vert);function lr(Vr,$r){Object.keys($r).forEach(function(Gr){Vr[cr.id(Gr)]=!0})}var hr=mt._uniformSet={};lr(hr,qt.static),lr(hr,qt.dynamic);var Yr=mt._attributeSet={};lr(Yr,Ee.static),lr(Yr,Ee.dynamic),mt._hasCount="count"in mt.static||"count"in mt.dynamic||"elements"in mt.static||"elements"in mt.dynamic}function ht(mt,qt){var Ee=tt();R(mt+" in command "+(qt||d())+(Ee==="unknown"?"":" called from "+Ee))}function dt(mt,qt,Ee){mt||ht(qt,Ee||d())}function Ot(mt,qt,Ee,cr){mt in qt||ht("unknown parameter ("+mt+")"+P(Ee)+". possible values: "+Object.keys(qt).join(),cr||d())}function It(mt,qt,Ee,cr){x(mt,qt)||ht("invalid parameter type"+P(Ee)+". expected "+qt+", got "+typeof mt,cr||d())}function Kt(mt){mt()}function Ft(mt,qt,Ee){mt.texture?g(mt.texture._texture.internalformat,qt,"unsupported texture format for attachment"):g(mt.renderbuffer._renderbuffer.format,Ee,"unsupported renderbuffer format for attachment")}var Nt=33071,st=9728,yt=9984,kt=9985,ee=9986,$t=9987,ge=5120,Pe=5121,er=5122,Jt=5123,ae=5124,Se=5125,xe=5126,we=32819,zt=32820,Wt=33635,Ie=34042,Yt=36193,ie={};ie[ge]=ie[Pe]=1,ie[er]=ie[Jt]=ie[Yt]=ie[Wt]=ie[we]=ie[zt]=2,ie[ae]=ie[Se]=ie[xe]=ie[Ie]=4;function Oe(mt,qt){return mt===zt||mt===we||mt===Wt?2:mt===Ie?4:ie[mt]*qt}function re(mt){return!(mt&mt-1)&&!!mt}function _e(mt,qt,Ee){var cr,Lr=qt.width,lr=qt.height,hr=qt.channels;L(Lr>0&&Lr<=Ee.maxTextureSize&&lr>0&&lr<=Ee.maxTextureSize,"invalid texture shape"),(mt.wrapS!==Nt||mt.wrapT!==Nt)&&L(re(Lr)&&re(lr),"incompatible wrap mode for texture, both width and height must be power of 2"),qt.mipmask===1?Lr!==1&&lr!==1&&L(mt.minFilter!==yt&&mt.minFilter!==ee&&mt.minFilter!==kt&&mt.minFilter!==$t,"min filter requires mipmap"):(L(re(Lr)&&re(lr),"texture must be a square power of 2 to support mipmapping"),L(qt.mipmask===(Lr<<1)-1,"missing or incomplete mipmap data")),qt.type===xe&&(Ee.extensions.indexOf("oes_texture_float_linear")<0&&L(mt.minFilter===st&&mt.magFilter===st,"filter not supported, must enable oes_texture_float_linear"),L(!mt.genMipmaps,"mipmap generation not supported with float textures"));var Yr=qt.images;for(cr=0;cr<16;++cr)if(Yr[cr]){var Vr=Lr>>cr,$r=lr>>cr;L(qt.mipmask&1<<cr,"missing mipmap data");var Gr=Yr[cr];if(L(Gr.width===Vr&&Gr.height===$r,"invalid shape for mip images"),L(Gr.format===qt.format&&Gr.internalformat===qt.internalformat&&Gr.type===qt.type,"incompatible type for mip image"),!Gr.compressed)if(Gr.data){var nn=Math.ceil(Oe(Gr.type,hr)*Vr/Gr.unpackAlignment)*Gr.unpackAlignment;L(Gr.data.byteLength===nn*$r,"invalid data for image, buffer size is inconsistent with image format")}else Gr.element||Gr.copy}else mt.genMipmaps||L((qt.mipmask&1<<cr)===0,"extra mipmap data");qt.compressed&&L(!mt.genMipmaps,"mipmap generation for compressed images not supported")}function Ge(mt,qt,Ee,cr){var Lr=mt.width,lr=mt.height,hr=mt.channels;L(Lr>0&&Lr<=cr.maxTextureSize&&lr>0&&lr<=cr.maxTextureSize,"invalid texture shape"),L(Lr===lr,"cube map must be square"),L(qt.wrapS===Nt&&qt.wrapT===Nt,"wrap mode not supported by cube map");for(var Yr=0;Yr<Ee.length;++Yr){var Vr=Ee[Yr];L(Vr.width===Lr&&Vr.height===lr,"inconsistent cube map face shape"),qt.genMipmaps&&(L(!Vr.compressed,"can not generate mipmap for compressed textures"),L(Vr.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var $r=Vr.images,Gr=0;Gr<16;++Gr){var nn=$r[Gr];if(nn){var v=Lr>>Gr,T=lr>>Gr;L(Vr.mipmask&1<<Gr,"missing mipmap data"),L(nn.width===v&&nn.height===T,"invalid shape for mip images"),L(nn.format===mt.format&&nn.internalformat===mt.internalformat&&nn.type===mt.type,"incompatible type for mip image"),nn.compressed||(nn.data?L(nn.data.byteLength===v*T*Math.max(Oe(nn.type,hr),nn.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):nn.element||nn.copy)}}}}var Ct=z(L,{optional:Kt,raise:R,commandRaise:ht,command:dt,parameter:N,commandParameter:Ot,constructor:_,type:p,commandType:It,isTypedArray:E,nni:y,oneOf:g,shaderError:q,linkError:rt,callSite:tt,saveCommandRef:Q,saveDrawInfo:it,framebufferFormat:Ft,guessCommand:d,texture2D:_e,textureCube:Ge}),Nr=0,Or=0,Ur=5,Sr=6;function gn(mt,qt){this.id=Nr++,this.type=mt,this.data=qt}function Rr(mt){return mt.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function ln(mt){if(mt.length===0)return[];var qt=mt.charAt(0),Ee=mt.charAt(mt.length-1);if(mt.length>1&&qt===Ee&&(qt==='"'||qt==="'"))return['"'+Rr(mt.substr(1,mt.length-2))+'"'];var cr=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(mt);if(cr)return ln(mt.substr(0,cr.index)).concat(ln(cr[1])).concat(ln(mt.substr(cr.index+cr[0].length)));var Lr=mt.split(".");if(Lr.length===1)return['"'+Rr(mt)+'"'];for(var lr=[],hr=0;hr<Lr.length;++hr)lr=lr.concat(ln(Lr[hr]));return lr}function Nn(mt){return"["+ln(mt).join("][")+"]"}function Ln(mt,qt){return new gn(mt,Nn(qt+""))}function fn(mt){return typeof mt=="function"&&!mt._reglType||mt instanceof gn}function Qe(mt,qt){if(typeof mt=="function")return new gn(Or,mt);if(typeof mt=="number"||typeof mt=="boolean")return new gn(Ur,mt);if(Array.isArray(mt))return new gn(Sr,mt.map((Ee,cr)=>Qe(Ee,qt+"["+cr+"]")));if(mt instanceof gn)return mt;Ct(!1,"invalid option type in uniform "+qt)}var nr={DynamicVariable:gn,define:Ln,isDynamic:fn,unbox:Qe,accessor:Nn},dr={next:typeof requestAnimationFrame=="function"?function(mt){return requestAnimationFrame(mt)}:function(mt){return setTimeout(mt,16)},cancel:typeof cancelAnimationFrame=="function"?function(mt){return cancelAnimationFrame(mt)}:clearTimeout},Pr=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function en(){var mt={"":0},qt=[""];return{id:function(Ee){var cr=mt[Ee];return cr||(cr=mt[Ee]=qt.length,qt.push(Ee),cr)},str:function(Ee){return qt[Ee]}}}function pn(mt,qt,Ee){var cr=document.createElement("canvas");z(cr.style,{border:0,margin:0,padding:0,top:0,left:0}),mt.appendChild(cr),mt===document.body&&(cr.style.position="absolute",z(mt.style,{margin:0,padding:0}));function Lr(){var Yr=window.innerWidth,Vr=window.innerHeight;if(mt!==document.body){var $r=mt.getBoundingClientRect();Yr=$r.right-$r.left,Vr=$r.bottom-$r.top}cr.width=Ee*Yr,cr.height=Ee*Vr,z(cr.style,{width:Yr+"px",height:Vr+"px"})}var lr;mt!==document.body&&typeof ResizeObserver=="function"?(lr=new ResizeObserver(function(){setTimeout(Lr)}),lr.observe(mt)):window.addEventListener("resize",Lr,!1);function hr(){lr?lr.disconnect():window.removeEventListener("resize",Lr),mt.removeChild(cr)}return Lr(),{canvas:cr,onDestroy:hr}}function rn(mt,qt){function Ee(cr){try{return mt.getContext(cr,qt)}catch(Lr){return null}}return Ee("webgl")||Ee("experimental-webgl")||Ee("webgl-experimental")}function jn(mt){return typeof mt.nodeName=="string"&&typeof mt.appendChild=="function"&&typeof mt.getBoundingClientRect=="function"}function Hn(mt){return typeof mt.drawArrays=="function"||typeof mt.drawElements=="function"}function oa(mt){return typeof mt=="string"?mt.split():(Ct(Array.isArray(mt),"invalid extension array"),mt)}function dn(mt){return typeof mt=="string"?(Ct(typeof document!="undefined","not supported outside of DOM"),document.querySelector(mt)):mt}function Wn(mt){var qt=mt||{},Ee,cr,Lr,lr,hr={},Yr=[],Vr=[],$r=typeof window=="undefined"?1:window.devicePixelRatio,Gr=!1,nn=function(U){U&&Ct.raise(U)},v=function(){};if(typeof qt=="string"?(Ct(typeof document!="undefined","selector queries only supported in DOM enviroments"),Ee=document.querySelector(qt),Ct(Ee,"invalid query string for element")):typeof qt=="object"?jn(qt)?Ee=qt:Hn(qt)?(lr=qt,Lr=lr.canvas):(Ct.constructor(qt),"gl"in qt?lr=qt.gl:"canvas"in qt?Lr=dn(qt.canvas):"container"in qt&&(cr=dn(qt.container)),"attributes"in qt&&(hr=qt.attributes,Ct.type(hr,"object","invalid context attributes")),"extensions"in qt&&(Yr=oa(qt.extensions)),"optionalExtensions"in qt&&(Vr=oa(qt.optionalExtensions)),"onDone"in qt&&(Ct.type(qt.onDone,"function","invalid or missing onDone callback"),nn=qt.onDone),"profile"in qt&&(Gr=!!qt.profile),"pixelRatio"in qt&&($r=+qt.pixelRatio,Ct($r>0,"invalid pixel ratio"))):Ct.raise("invalid arguments to regl"),Ee&&(Ee.nodeName.toLowerCase()==="canvas"?Lr=Ee:cr=Ee),!lr){if(!Lr){Ct(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var T=pn(cr||document.body,nn,$r);if(!T)return null;Lr=T.canvas,v=T.onDestroy}hr.premultipliedAlpha===void 0&&(hr.premultipliedAlpha=!0),lr=rn(Lr,hr)}return lr?{gl:lr,canvas:Lr,container:cr,extensions:Yr,optionalExtensions:Vr,pixelRatio:$r,profile:Gr,onDone:nn,onDestroy:v}:(v(),nn("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Dn(mt,qt){var Ee={};function cr(hr){Ct.type(hr,"string","extension name must be string");var Yr=hr.toLowerCase(),Vr;try{Vr=Ee[Yr]=mt.getExtension(Yr)}catch($r){}return!!Vr}for(var Lr=0;Lr<qt.extensions.length;++Lr){var lr=qt.extensions[Lr];if(!cr(lr))return qt.onDestroy(),qt.onDone('"'+lr+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return qt.optionalExtensions.forEach(cr),{extensions:Ee,restore:function(){Object.keys(Ee).forEach(function(hr){if(Ee[hr]&&!cr(hr))throw new Error("(regl): error restoring extension "+hr)})}}}function Cn(mt,qt){for(var Ee=Array(mt),cr=0;cr<mt;++cr)Ee[cr]=qt(cr);return Ee}var la=5120,K=5121,ft=5122,nt=5123,k=5124,M=5125,C=5126;function j(mt){for(var qt=16;qt<=1<<28;qt*=16)if(mt<=qt)return qt;return 0}function xt(mt){var qt,Ee;return qt=(mt>65535)<<4,mt>>>=qt,Ee=(mt>255)<<3,mt>>>=Ee,qt|=Ee,Ee=(mt>15)<<2,mt>>>=Ee,qt|=Ee,Ee=(mt>3)<<1,mt>>>=Ee,qt|=Ee,qt|mt>>1}function At(){var mt=Cn(8,function(){return[]});function qt(lr){var hr=j(lr),Yr=mt[xt(hr)>>2];return Yr.length>0?Yr.pop():new ArrayBuffer(hr)}function Ee(lr){mt[xt(lr.byteLength)>>2].push(lr)}function cr(lr,hr){var Yr=null;switch(lr){case la:Yr=new Int8Array(qt(hr),0,hr);break;case K:Yr=new Uint8Array(qt(hr),0,hr);break;case ft:Yr=new Int16Array(qt(2*hr),0,hr);break;case nt:Yr=new Uint16Array(qt(2*hr),0,hr);break;case k:Yr=new Int32Array(qt(4*hr),0,hr);break;case M:Yr=new Uint32Array(qt(4*hr),0,hr);break;case C:Yr=new Float32Array(qt(4*hr),0,hr);break;default:return null}return Yr.length!==hr?Yr.subarray(0,hr):Yr}function Lr(lr){Ee(lr.buffer)}return{alloc:qt,free:Ee,allocType:cr,freeType:Lr}}var wt=At();wt.zero=At();var Pt=3408,Me=3410,ve=3411,Ke=3412,br=3413,ir=3414,mr=3415,Mn=33901,Xe=33902,vr=3379,Er=3386,on=34921,Wr=36347,xa=36348,Ta=35661,Rn=35660,Jn=34930,Ga=36349,Aa=34076,an=34024,Vn=7936,me=7937,Dt=7938,fe=35724,Ae=34047,be=36063,De=34852,sr=3553,Fr=34067,Jr=34069,Pn=33984,Bn=6408,Zn=5126,ba=5121,Ca=36160,li=36053,ta=36064,fi=16384,Co=function(mt,qt){var Ee=1;qt.ext_texture_filter_anisotropic&&(Ee=mt.getParameter(Ae));var cr=1,Lr=1;qt.webgl_draw_buffers&&(cr=mt.getParameter(De),Lr=mt.getParameter(be));var lr=!!qt.oes_texture_float;if(lr){var hr=mt.createTexture();mt.bindTexture(sr,hr),mt.texImage2D(sr,0,Bn,1,1,0,Bn,Zn,null);var Yr=mt.createFramebuffer();if(mt.bindFramebuffer(Ca,Yr),mt.framebufferTexture2D(Ca,ta,sr,hr,0),mt.bindTexture(sr,null),mt.checkFramebufferStatus(Ca)!==li)lr=!1;else{mt.viewport(0,0,1,1),mt.clearColor(1,0,0,1),mt.clear(fi);var Vr=wt.allocType(Zn,4);mt.readPixels(0,0,1,1,Bn,Zn,Vr),mt.getError()?lr=!1:(mt.deleteFramebuffer(Yr),mt.deleteTexture(hr),lr=Vr[0]===1),wt.freeType(Vr)}}var $r=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),Gr=!0;if(!$r){var nn=mt.createTexture(),v=wt.allocType(ba,36);mt.activeTexture(Pn),mt.bindTexture(Fr,nn),mt.texImage2D(Jr,0,Bn,3,3,0,Bn,ba,v),wt.freeType(v),mt.bindTexture(Fr,null),mt.deleteTexture(nn),Gr=!mt.getError()}return{colorBits:[mt.getParameter(Me),mt.getParameter(ve),mt.getParameter(Ke),mt.getParameter(br)],depthBits:mt.getParameter(ir),stencilBits:mt.getParameter(mr),subpixelBits:mt.getParameter(Pt),extensions:Object.keys(qt).filter(function(T){return!!qt[T]}),maxAnisotropic:Ee,maxDrawbuffers:cr,maxColorAttachments:Lr,pointSizeDims:mt.getParameter(Mn),lineWidthDims:mt.getParameter(Xe),maxViewportDims:mt.getParameter(Er),maxCombinedTextureUnits:mt.getParameter(Ta),maxCubeMapSize:mt.getParameter(Aa),maxRenderbufferSize:mt.getParameter(an),maxTextureUnits:mt.getParameter(Jn),maxTextureSize:mt.getParameter(vr),maxAttributes:mt.getParameter(on),maxVertexUniforms:mt.getParameter(Wr),maxVertexTextureUnits:mt.getParameter(Rn),maxVaryingVectors:mt.getParameter(xa),maxFragmentUniforms:mt.getParameter(Ga),glsl:mt.getParameter(fe),renderer:mt.getParameter(me),vendor:mt.getParameter(Vn),version:mt.getParameter(Dt),readFloat:lr,npotTextureCube:Gr}};function La(mt){return!!mt&&typeof mt=="object"&&Array.isArray(mt.shape)&&Array.isArray(mt.stride)&&typeof mt.offset=="number"&&mt.shape.length===mt.stride.length&&(Array.isArray(mt.data)||F(mt.data))}var xi=function(mt){return Object.keys(mt).map(function(qt){return mt[qt]})},so={shape:zi,flatten:ds};function To(mt,qt,Ee){for(var cr=0;cr<qt;++cr)Ee[cr]=mt[cr]}function bo(mt,qt,Ee,cr){for(var Lr=0,lr=0;lr<qt;++lr)for(var hr=mt[lr],Yr=0;Yr<Ee;++Yr)cr[Lr++]=hr[Yr]}function uo(mt,qt,Ee,cr,Lr,lr){for(var hr=lr,Yr=0;Yr<qt;++Yr)for(var Vr=mt[Yr],$r=0;$r<Ee;++$r)for(var Gr=Vr[$r],nn=0;nn<cr;++nn)Lr[hr++]=Gr[nn]}function Hi(mt,qt,Ee,cr,Lr){for(var lr=1,hr=Ee+1;hr<qt.length;++hr)lr*=qt[hr];var Yr=qt[Ee];if(qt.length-Ee===4){var Vr=qt[Ee+1],$r=qt[Ee+2],Gr=qt[Ee+3];for(hr=0;hr<Yr;++hr)uo(mt[hr],Vr,$r,Gr,cr,Lr),Lr+=lr}else for(hr=0;hr<Yr;++hr)Hi(mt[hr],qt,Ee+1,cr,Lr),Lr+=lr}function ds(mt,qt,Ee,cr){var Lr=1;if(qt.length)for(var lr=0;lr<qt.length;++lr)Lr*=qt[lr];else Lr=0;var hr=cr||wt.allocType(Ee,Lr);switch(qt.length){case 0:break;case 1:To(mt,qt[0],hr);break;case 2:bo(mt,qt[0],qt[1],hr);break;case 3:uo(mt,qt[0],qt[1],qt[2],hr,0);break;default:Hi(mt,qt,0,hr,0)}return hr}function zi(mt){for(var qt=[],Ee=mt;Ee.length;Ee=Ee[0])qt.push(Ee.length);return qt}var Ui={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},gs=5120,Ms=5122,Go=5124,_o=5121,Io=5123,$s=5125,Yn=5126,So=5126,Oo={int8:gs,int16:Ms,int32:Go,uint8:_o,uint16:Io,uint32:$s,float:Yn,float32:So},Wi=35048,zn=35040,Lo={dynamic:Wi,stream:zn,static:35044},Ai=so.flatten,zo=so.shape,Uo=35044,ps=35040,eo=5121,ro=5126,ei=[];ei[5120]=1,ei[5122]=2,ei[5124]=4,ei[5121]=1,ei[5123]=2,ei[5125]=4,ei[5126]=4;function fo(mt){return Ui[Object.prototype.toString.call(mt)]|0}function Do(mt,qt){for(var Ee=0;Ee<qt.length;++Ee)mt[Ee]=qt[Ee]}function Wo(mt,qt,Ee,cr,Lr,lr,hr){for(var Yr=0,Vr=0;Vr<Ee;++Vr)for(var $r=0;$r<cr;++$r)mt[Yr++]=qt[Lr*Vr+lr*$r+hr]}function No(mt,qt,Ee,cr){var Lr=0,lr={};function hr(Z){this.id=Lr++,this.buffer=mt.createBuffer(),this.type=Z,this.usage=Uo,this.byteLength=0,this.dimension=1,this.dtype=eo,this.persistentData=null,Ee.profile&&(this.stats={size:0})}hr.prototype.bind=function(){mt.bindBuffer(this.type,this.buffer)},hr.prototype.destroy=function(){v(this)};var Yr=[];function Vr(Z,ot){var ct=Yr.pop();return ct||(ct=new hr(Z)),ct.bind(),nn(ct,ot,ps,0,1,!1),ct}function $r(Z){Yr.push(Z)}function Gr(Z,ot,ct){Z.byteLength=ot.byteLength,mt.bufferData(Z.type,ot,ct)}function nn(Z,ot,ct,gt,bt,Mt){var Gt;if(Z.usage=ct,Array.isArray(ot)){if(Z.dtype=gt||ro,ot.length>0){var te;if(Array.isArray(ot[0])){Gt=zo(ot);for(var Zt=1,ye=1;ye<Gt.length;++ye)Zt*=Gt[ye];Z.dimension=Zt,te=Ai(ot,Gt,Z.dtype),Gr(Z,te,ct),Mt?Z.persistentData=te:wt.freeType(te)}else if(typeof ot[0]=="number"){Z.dimension=bt;var We=wt.allocType(Z.dtype,ot.length);Do(We,ot),Gr(Z,We,ct),Mt?Z.persistentData=We:wt.freeType(We)}else F(ot[0])?(Z.dimension=ot[0].length,Z.dtype=gt||fo(ot[0])||ro,te=Ai(ot,[ot.length,ot[0].length],Z.dtype),Gr(Z,te,ct),Mt?Z.persistentData=te:wt.freeType(te)):Ct.raise("invalid buffer data")}}else if(F(ot))Z.dtype=gt||fo(ot),Z.dimension=bt,Gr(Z,ot,ct),Mt&&(Z.persistentData=new Uint8Array(new Uint8Array(ot.buffer)));else if(La(ot)){Gt=ot.shape;var wr=ot.stride,$e=ot.offset,tr=0,Je=0,jr=0,hn=0;Gt.length===1?(tr=Gt[0],Je=1,jr=wr[0],hn=0):Gt.length===2?(tr=Gt[0],Je=Gt[1],jr=wr[0],hn=wr[1]):Ct.raise("invalid shape"),Z.dtype=gt||fo(ot.data)||ro,Z.dimension=Je;var tn=wt.allocType(Z.dtype,tr*Je);Wo(tn,ot.data,tr,Je,jr,hn,$e),Gr(Z,tn,ct),Mt?Z.persistentData=tn:wt.freeType(tn)}else ot instanceof ArrayBuffer?(Z.dtype=eo,Z.dimension=bt,Gr(Z,ot,ct),Mt&&(Z.persistentData=new Uint8Array(new Uint8Array(ot)))):Ct.raise("invalid buffer data")}function v(Z){qt.bufferCount--,cr(Z);var ot=Z.buffer;Ct(ot,"buffer must not be deleted already"),mt.deleteBuffer(ot),Z.buffer=null,delete lr[Z.id]}function T(Z,ot,ct,gt){qt.bufferCount++;var bt=new hr(ot);lr[bt.id]=bt;function Mt(Zt){var ye=Uo,We=null,wr=0,$e=0,tr=1;return Array.isArray(Zt)||F(Zt)||La(Zt)||Zt instanceof ArrayBuffer?We=Zt:typeof Zt=="number"?wr=Zt|0:Zt&&(Ct.type(Zt,"object","buffer arguments must be an object, a number or an array"),"data"in Zt&&(Ct(We===null||Array.isArray(We)||F(We)||La(We),"invalid data for buffer"),We=Zt.data),"usage"in Zt&&(Ct.parameter(Zt.usage,Lo,"invalid buffer usage"),ye=Lo[Zt.usage]),"type"in Zt&&(Ct.parameter(Zt.type,Oo,"invalid buffer type"),$e=Oo[Zt.type]),"dimension"in Zt&&(Ct.type(Zt.dimension,"number","invalid dimension"),tr=Zt.dimension|0),"length"in Zt&&(Ct.nni(wr,"buffer length must be a nonnegative integer"),wr=Zt.length|0)),bt.bind(),We?nn(bt,We,ye,$e,tr,gt):(wr&&mt.bufferData(bt.type,wr,ye),bt.dtype=$e||eo,bt.usage=ye,bt.dimension=tr,bt.byteLength=wr),Ee.profile&&(bt.stats.size=bt.byteLength*ei[bt.dtype]),Mt}function Gt(Zt,ye){Ct(ye+Zt.byteLength<=bt.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+Zt.byteLength+" starting from offset "+ye+" to a buffer of size "+bt.byteLength),mt.bufferSubData(bt.type,ye,Zt)}function te(Zt,ye){var We=(ye||0)|0,wr;if(bt.bind(),F(Zt)||Zt instanceof ArrayBuffer)Gt(Zt,We);else if(Array.isArray(Zt)){if(Zt.length>0)if(typeof Zt[0]=="number"){var $e=wt.allocType(bt.dtype,Zt.length);Do($e,Zt),Gt($e,We),wt.freeType($e)}else if(Array.isArray(Zt[0])||F(Zt[0])){wr=zo(Zt);var tr=Ai(Zt,wr,bt.dtype);Gt(tr,We),wt.freeType(tr)}else Ct.raise("invalid buffer data")}else if(La(Zt)){wr=Zt.shape;var Je=Zt.stride,jr=0,hn=0,tn=0,kn=0;wr.length===1?(jr=wr[0],hn=1,tn=Je[0],kn=0):wr.length===2?(jr=wr[0],hn=wr[1],tn=Je[0],kn=Je[1]):Ct.raise("invalid shape");var In=Array.isArray(Zt.data)?bt.dtype:fo(Zt.data),Kn=wt.allocType(In,jr*hn);Wo(Kn,Zt.data,jr,hn,tn,kn,Zt.offset),Gt(Kn,We),wt.freeType(Kn)}else Ct.raise("invalid data for buffer subdata");return Mt}return ct||Mt(Z),Mt._reglType="buffer",Mt._buffer=bt,Mt.subdata=te,Ee.profile&&(Mt.stats=bt.stats),Mt.destroy=function(){v(bt)},Mt}function U(){xi(lr).forEach(function(Z){Z.buffer=mt.createBuffer(),mt.bindBuffer(Z.type,Z.buffer),mt.bufferData(Z.type,Z.persistentData||Z.byteLength,Z.usage)})}return Ee.profile&&(qt.getTotalBufferSize=function(){var Z=0;return Object.keys(lr).forEach(function(ot){Z+=lr[ot].stats.size}),Z}),{create:T,createStream:Vr,destroyStream:$r,clear:function(){xi(lr).forEach(v),Yr.forEach(v)},getBuffer:function(Z){return Z&&Z._buffer instanceof hr?Z._buffer:null},restore:U,_initBuffer:nn}}var is=0,Xo=0,Jo=1,Xa=1,As=4,iu=4,Xi={points:is,point:Xo,lines:Jo,line:Xa,triangles:As,triangle:iu,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},os=0,Eo=1,Yi=4,co=5120,pa=5121,ja=5122,yi=5123,no=5124,ki=5125,Ki=34963,Yo=35040,wo=35044;function ts(mt,qt,Ee,cr){var Lr={},lr=0,hr={uint8:pa,uint16:yi};qt.oes_element_index_uint&&(hr.uint32=ki);function Yr(U){this.id=lr++,Lr[this.id]=this,this.buffer=U,this.primType=Yi,this.vertCount=0,this.type=0}Yr.prototype.bind=function(){this.buffer.bind()};var Vr=[];function $r(U){var Z=Vr.pop();return Z||(Z=new Yr(Ee.create(null,Ki,!0,!1)._buffer)),nn(Z,U,Yo,-1,-1,0,0),Z}function Gr(U){Vr.push(U)}function nn(U,Z,ot,ct,gt,bt,Mt){U.buffer.bind();var Gt;if(Z){var te=Mt;!Mt&&(!F(Z)||La(Z)&&!F(Z.data))&&(te=qt.oes_element_index_uint?ki:yi),Ee._initBuffer(U.buffer,Z,ot,te,3)}else mt.bufferData(Ki,bt,ot),U.buffer.dtype=Gt||pa,U.buffer.usage=ot,U.buffer.dimension=3,U.buffer.byteLength=bt;if(Gt=Mt,!Mt){switch(U.buffer.dtype){case pa:case co:Gt=pa;break;case yi:case ja:Gt=yi;break;case ki:case no:Gt=ki;break;default:Ct.raise("unsupported type for element array")}U.buffer.dtype=Gt}U.type=Gt,Ct(Gt!==ki||!!qt.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var Zt=gt;Zt<0&&(Zt=U.buffer.byteLength,Gt===yi?Zt>>=1:Gt===ki&&(Zt>>=2)),U.vertCount=Zt;var ye=ct;if(ct<0){ye=Yi;var We=U.buffer.dimension;We===1&&(ye=os),We===2&&(ye=Eo),We===3&&(ye=Yi)}U.primType=ye}function v(U){cr.elementsCount--,Ct(U.buffer!==null,"must not double destroy elements"),delete Lr[U.id],U.buffer.destroy(),U.buffer=null}function T(U,Z){var ot=Ee.create(null,Ki,!0),ct=new Yr(ot._buffer);cr.elementsCount++;function gt(bt){if(!bt)ot(),ct.primType=Yi,ct.vertCount=0,ct.type=pa;else if(typeof bt=="number")ot(bt),ct.primType=Yi,ct.vertCount=bt|0,ct.type=pa;else{var Mt=null,Gt=wo,te=-1,Zt=-1,ye=0,We=0;Array.isArray(bt)||F(bt)||La(bt)?Mt=bt:(Ct.type(bt,"object","invalid arguments for elements"),"data"in bt&&(Mt=bt.data,Ct(Array.isArray(Mt)||F(Mt)||La(Mt),"invalid data for element buffer")),"usage"in bt&&(Ct.parameter(bt.usage,Lo,"invalid element buffer usage"),Gt=Lo[bt.usage]),"primitive"in bt&&(Ct.parameter(bt.primitive,Xi,"invalid element buffer primitive"),te=Xi[bt.primitive]),"count"in bt&&(Ct(typeof bt.count=="number"&&bt.count>=0,"invalid vertex count for elements"),Zt=bt.count|0),"type"in bt&&(Ct.parameter(bt.type,hr,"invalid buffer type"),We=hr[bt.type]),"length"in bt?ye=bt.length|0:(ye=Zt,We===yi||We===ja?ye*=2:(We===ki||We===no)&&(ye*=4))),nn(ct,Mt,Gt,te,Zt,ye,We)}return gt}return gt(U),gt._reglType="elements",gt._elements=ct,gt.subdata=function(bt,Mt){return ot.subdata(bt,Mt),gt},gt.destroy=function(){v(ct)},gt}return{create:T,createStream:$r,destroyStream:Gr,getElements:function(U){return typeof U=="function"&&U._elements instanceof Yr?U._elements:null},clear:function(){xi(Lr).forEach(v)}}}var lo=new Float32Array(1),Rs=new Uint32Array(lo.buffer),ou=5123;function Cs(mt){for(var qt=wt.allocType(ou,mt.length),Ee=0;Ee<mt.length;++Ee)if(isNaN(mt[Ee]))qt[Ee]=65535;else if(mt[Ee]===1/0)qt[Ee]=31744;else if(mt[Ee]===-1/0)qt[Ee]=64512;else{lo[0]=mt[Ee];var cr=Rs[0],Lr=cr>>>31<<15,lr=(cr<<1>>>24)-127,hr=cr>>13&1024-1;if(lr<-24)qt[Ee]=Lr;else if(lr<-14){var Yr=-14-lr;qt[Ee]=Lr+(hr+1024>>Yr)}else lr>15?qt[Ee]=Lr+31744:qt[Ee]=Lr+(lr+15<<10)+hr}return qt}function ci(mt){return Array.isArray(mt)||F(mt)}var Po=function(mt){return!(mt&mt-1)&&!!mt},Wu=34467,ho=3553,Bs=34067,Ts=34069,Vo=6408,Fs=6406,ss=6407,jo=6409,us=6410,su=32854,Gs=32855,fs=36194,Tt=32819,jt=32820,ze=33635,Ze=34042,Cr=6402,cn=34041,mn=35904,aa=35906,ai=36193,Zi=33776,ao=33777,zs=33778,Mu=33779,Ri=35986,vo=35987,qs=34798,Xu=35840,Au=35841,uu=35842,Qs=35843,fu=36196,Is=5121,Js=5123,cs=5125,Mo=5126,rf=10242,kf=10243,Rf=10497,Os=33071,Bf=33648,h=10240,D=10241,vt=9728,Et=9729,Lt=9984,Xt=9985,Vt=9986,ue=9987,he=33170,Ce=4352,Ye=4353,yr=4354,xr=34046,pr=3317,Zr=37440,qr=37441,Tr=37443,_n=37444,Ea=33984,wa=[Lt,Vt,Xt,ue],ha=[0,jo,us,ss,Vo],qn={};qn[jo]=qn[Fs]=qn[Cr]=1,qn[cn]=qn[us]=2,qn[ss]=qn[mn]=3,qn[Vo]=qn[aa]=4;function sa(mt){return"[object "+mt+"]"}var Ni=sa("HTMLCanvasElement"),Ci=sa("OffscreenCanvas"),_i=sa("CanvasRenderingContext2D"),Ti=sa("ImageBitmap"),Ii=sa("HTMLImageElement"),Bi=sa("HTMLVideoElement"),$i=Object.keys(Ui).concat([Ni,Ci,_i,Ti,Ii,Bi]),za=[];za[Is]=1,za[Mo]=4,za[ai]=2,za[Js]=2,za[cs]=4;var ii=[];ii[su]=2,ii[Gs]=2,ii[fs]=2,ii[cn]=4,ii[Zi]=.5,ii[ao]=.5,ii[zs]=1,ii[Mu]=1,ii[Ri]=.5,ii[vo]=1,ii[qs]=1,ii[Xu]=.5,ii[Au]=.25,ii[uu]=.5,ii[Qs]=.25,ii[fu]=.5;function ls(mt){return Array.isArray(mt)&&(mt.length===0||typeof mt[0]=="number")}function ys(mt){if(!Array.isArray(mt))return!1;var qt=mt.length;return!(qt===0||!ci(mt[0]))}function ko(mt){return Object.prototype.toString.call(mt)}function Cu(mt){return ko(mt)===Ni}function Ff(mt){return ko(mt)===Ci}function xc(mt){return ko(mt)===_i}function bc(mt){return ko(mt)===Ti}function Ec(mt){return ko(mt)===Ii}function Gf(mt){return ko(mt)===Bi}function zf(mt){if(!mt)return!1;var qt=ko(mt);return $i.indexOf(qt)>=0?!0:ls(mt)||ys(mt)||La(mt)}function wc(mt){return Ui[Object.prototype.toString.call(mt)]|0}function nf(mt,qt){var Ee=qt.length;switch(mt.type){case Is:case Js:case cs:case Mo:var cr=wt.allocType(mt.type,Ee);cr.set(qt),mt.data=cr;break;case ai:mt.data=Cs(qt);break;default:Ct.raise("unsupported texture type, must specify a typed array")}}function af(mt,qt){return wt.allocType(mt.type===ai?Mo:mt.type,qt)}function _c(mt,qt){mt.type===ai?(mt.data=Cs(qt),wt.freeType(qt)):mt.data=qt}function of(mt,qt,Ee,cr,Lr,lr){for(var hr=mt.width,Yr=mt.height,Vr=mt.channels,$r=hr*Yr*Vr,Gr=af(mt,$r),nn=0,v=0;v<Yr;++v)for(var T=0;T<hr;++T)for(var U=0;U<Vr;++U)Gr[nn++]=qt[Ee*T+cr*v+Lr*U+lr];_c(mt,Gr)}function cu(mt,qt,Ee,cr,Lr,lr){var hr;if(typeof ii[mt]!="undefined"?hr=ii[mt]:hr=qn[mt]*za[qt],lr&&(hr*=6),Lr){for(var Yr=0,Vr=Ee;Vr>=1;)Yr+=hr*Vr*Vr,Vr/=2;return Yr}else return hr*Ee*cr}function Sc(mt,qt,Ee,cr,Lr,lr,hr){var Yr={"don't care":Ce,"dont care":Ce,nice:yr,fast:Ye},Vr={repeat:Rf,clamp:Os,mirror:Bf},$r={nearest:vt,linear:Et},Gr=z({mipmap:ue,"nearest mipmap nearest":Lt,"linear mipmap nearest":Xt,"nearest mipmap linear":Vt,"linear mipmap linear":ue},$r),nn={none:0,browser:_n},v={uint8:Is,rgba4:Tt,rgb565:ze,"rgb5 a1":jt},T={alpha:Fs,luminance:jo,"luminance alpha":us,rgb:ss,rgba:Vo,rgba4:su,"rgb5 a1":Gs,rgb565:fs},U={};qt.ext_srgb&&(T.srgb=mn,T.srgba=aa),qt.oes_texture_float&&(v.float32=v.float=Mo),qt.oes_texture_half_float&&(v.float16=v["half float"]=ai),qt.webgl_depth_texture&&(z(T,{depth:Cr,"depth stencil":cn}),z(v,{uint16:Js,uint32:cs,"depth stencil":Ze})),qt.webgl_compressed_texture_s3tc&&z(U,{"rgb s3tc dxt1":Zi,"rgba s3tc dxt1":ao,"rgba s3tc dxt3":zs,"rgba s3tc dxt5":Mu}),qt.webgl_compressed_texture_atc&&z(U,{"rgb atc":Ri,"rgba atc explicit alpha":vo,"rgba atc interpolated alpha":qs}),qt.webgl_compressed_texture_pvrtc&&z(U,{"rgb pvrtc 4bppv1":Xu,"rgb pvrtc 2bppv1":Au,"rgba pvrtc 4bppv1":uu,"rgba pvrtc 2bppv1":Qs}),qt.webgl_compressed_texture_etc1&&(U["rgb etc1"]=fu);var Z=Array.prototype.slice.call(mt.getParameter(Wu));Object.keys(U).forEach(function(pe){var gr=U[pe];Z.indexOf(gr)>=0&&(T[pe]=gr)});var ot=Object.keys(T);Ee.textureFormats=ot;var ct=[];Object.keys(T).forEach(function(pe){var gr=T[pe];ct[gr]=pe});var gt=[];Object.keys(v).forEach(function(pe){var gr=v[pe];gt[gr]=pe});var bt=[];Object.keys($r).forEach(function(pe){var gr=$r[pe];bt[gr]=pe});var Mt=[];Object.keys(Gr).forEach(function(pe){var gr=Gr[pe];Mt[gr]=pe});var Gt=[];Object.keys(Vr).forEach(function(pe){var gr=Vr[pe];Gt[gr]=pe});var te=ot.reduce(function(pe,gr){var fr=T[gr];return fr===jo||fr===Fs||fr===jo||fr===us||fr===Cr||fr===cn||qt.ext_srgb&&(fr===mn||fr===aa)?pe[fr]=fr:fr===Gs||gr.indexOf("rgba")>=0?pe[fr]=Vo:pe[fr]=ss,pe},{});function Zt(){this.internalformat=Vo,this.format=Vo,this.type=Is,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=_n,this.width=0,this.height=0,this.channels=0}function ye(pe,gr){pe.internalformat=gr.internalformat,pe.format=gr.format,pe.type=gr.type,pe.compressed=gr.compressed,pe.premultiplyAlpha=gr.premultiplyAlpha,pe.flipY=gr.flipY,pe.unpackAlignment=gr.unpackAlignment,pe.colorSpace=gr.colorSpace,pe.width=gr.width,pe.height=gr.height,pe.channels=gr.channels}function We(pe,gr){if(!(typeof gr!="object"||!gr)){if("premultiplyAlpha"in gr&&(Ct.type(gr.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),pe.premultiplyAlpha=gr.premultiplyAlpha),"flipY"in gr&&(Ct.type(gr.flipY,"boolean","invalid texture flip"),pe.flipY=gr.flipY),"alignment"in gr&&(Ct.oneOf(gr.alignment,[1,2,4,8],"invalid texture unpack alignment"),pe.unpackAlignment=gr.alignment),"colorSpace"in gr&&(Ct.parameter(gr.colorSpace,nn,"invalid colorSpace"),pe.colorSpace=nn[gr.colorSpace]),"type"in gr){var fr=gr.type;Ct(qt.oes_texture_float||!(fr==="float"||fr==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),Ct(qt.oes_texture_half_float||!(fr==="half float"||fr==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),Ct(qt.webgl_depth_texture||!(fr==="uint16"||fr==="uint32"||fr==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Ct.parameter(fr,v,"invalid texture type"),pe.type=v[fr]}var Sn=pe.width,Na=pe.height,le=pe.channels,Ht=!1;"shape"in gr?(Ct(Array.isArray(gr.shape)&&gr.shape.length>=2,"shape must be an array"),Sn=gr.shape[0],Na=gr.shape[1],gr.shape.length===3&&(le=gr.shape[2],Ct(le>0&&le<=4,"invalid number of channels"),Ht=!0),Ct(Sn>=0&&Sn<=Ee.maxTextureSize,"invalid width"),Ct(Na>=0&&Na<=Ee.maxTextureSize,"invalid height")):("radius"in gr&&(Sn=Na=gr.radius,Ct(Sn>=0&&Sn<=Ee.maxTextureSize,"invalid radius")),"width"in gr&&(Sn=gr.width,Ct(Sn>=0&&Sn<=Ee.maxTextureSize,"invalid width")),"height"in gr&&(Na=gr.height,Ct(Na>=0&&Na<=Ee.maxTextureSize,"invalid height")),"channels"in gr&&(le=gr.channels,Ct(le>0&&le<=4,"invalid number of channels"),Ht=!0)),pe.width=Sn|0,pe.height=Na|0,pe.channels=le|0;var ke=!1;if("format"in gr){var rr=gr.format;Ct(qt.webgl_depth_texture||!(rr==="depth"||rr==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Ct.parameter(rr,T,"invalid texture format");var ar=pe.internalformat=T[rr];pe.format=te[ar],rr in v&&("type"in gr||(pe.type=v[rr])),rr in U&&(pe.compressed=!0),ke=!0}!Ht&&ke?pe.channels=qn[pe.format]:Ht&&!ke?pe.channels!==ha[pe.format]&&(pe.format=pe.internalformat=ha[pe.channels]):ke&&Ht&&Ct(pe.channels===qn[pe.format],"number of channels inconsistent with specified format")}}function wr(pe){mt.pixelStorei(Zr,pe.flipY),mt.pixelStorei(qr,pe.premultiplyAlpha),mt.pixelStorei(Tr,pe.colorSpace),mt.pixelStorei(pr,pe.unpackAlignment)}function $e(){Zt.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function tr(pe,gr){var fr=null;if(zf(gr)?fr=gr:gr&&(Ct.type(gr,"object","invalid pixel data type"),We(pe,gr),"x"in gr&&(pe.xOffset=gr.x|0),"y"in gr&&(pe.yOffset=gr.y|0),zf(gr.data)&&(fr=gr.data)),Ct(!pe.compressed||fr instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),gr.copy){Ct(!fr,"can not specify copy and data field for the same texture");var Sn=Lr.viewportWidth,Na=Lr.viewportHeight;pe.width=pe.width||Sn-pe.xOffset,pe.height=pe.height||Na-pe.yOffset,pe.needsCopy=!0,Ct(pe.xOffset>=0&&pe.xOffset<Sn&&pe.yOffset>=0&&pe.yOffset<Na&&pe.width>0&&pe.width<=Sn&&pe.height>0&&pe.height<=Na,"copy texture read out of bounds")}else if(!fr)pe.width=pe.width||1,pe.height=pe.height||1,pe.channels=pe.channels||4;else if(F(fr))pe.channels=pe.channels||4,pe.data=fr,!("type"in gr)&&pe.type===Is&&(pe.type=wc(fr));else if(ls(fr))pe.channels=pe.channels||4,nf(pe,fr),pe.alignment=1,pe.needsFree=!0;else if(La(fr)){var le=fr.data;!Array.isArray(le)&&pe.type===Is&&(pe.type=wc(le));var Ht=fr.shape,ke=fr.stride,rr,ar,Fe,Re,Ve,ce;Ht.length===3?(Fe=Ht[2],ce=ke[2]):(Ct(Ht.length===2,"invalid ndarray pixel data, must be 2 or 3D"),Fe=1,ce=1),rr=Ht[0],ar=Ht[1],Re=ke[0],Ve=ke[1],pe.alignment=1,pe.width=rr,pe.height=ar,pe.channels=Fe,pe.format=pe.internalformat=ha[Fe],pe.needsFree=!0,of(pe,le,Re,Ve,ce,fr.offset)}else if(Cu(fr)||Ff(fr)||xc(fr))Cu(fr)||Ff(fr)?pe.element=fr:pe.element=fr.canvas,pe.width=pe.element.width,pe.height=pe.element.height,pe.channels=4;else if(bc(fr))pe.element=fr,pe.width=fr.width,pe.height=fr.height,pe.channels=4;else if(Ec(fr))pe.element=fr,pe.width=fr.naturalWidth,pe.height=fr.naturalHeight,pe.channels=4;else if(Gf(fr))pe.element=fr,pe.width=fr.videoWidth,pe.height=fr.videoHeight,pe.channels=4;else if(ys(fr)){var Le=pe.width||fr[0].length,oe=pe.height||fr.length,qe=pe.channels;ci(fr[0][0])?qe=qe||fr[0][0].length:qe=qe||1;for(var or=so.shape(fr),Ir=1,kr=0;kr<or.length;++kr)Ir*=or[kr];var _r=af(pe,Ir);so.flatten(fr,or,"",_r),_c(pe,_r),pe.alignment=1,pe.width=Le,pe.height=oe,pe.channels=qe,pe.format=pe.internalformat=ha[qe],pe.needsFree=!0}pe.type===Mo?Ct(Ee.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):pe.type===ai&&Ct(Ee.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function Je(pe,gr,fr){var Sn=pe.element,Na=pe.data,le=pe.internalformat,Ht=pe.format,ke=pe.type,rr=pe.width,ar=pe.height;wr(pe),Sn?mt.texImage2D(gr,fr,Ht,Ht,ke,Sn):pe.compressed?mt.compressedTexImage2D(gr,fr,le,rr,ar,0,Na):pe.needsCopy?(cr(),mt.copyTexImage2D(gr,fr,Ht,pe.xOffset,pe.yOffset,rr,ar,0)):mt.texImage2D(gr,fr,Ht,rr,ar,0,Ht,ke,Na||null)}function jr(pe,gr,fr,Sn,Na){var le=pe.element,Ht=pe.data,ke=pe.internalformat,rr=pe.format,ar=pe.type,Fe=pe.width,Re=pe.height;wr(pe),le?mt.texSubImage2D(gr,Na,fr,Sn,rr,ar,le):pe.compressed?mt.compressedTexSubImage2D(gr,Na,fr,Sn,ke,Fe,Re,Ht):pe.needsCopy?(cr(),mt.copyTexSubImage2D(gr,Na,fr,Sn,pe.xOffset,pe.yOffset,Fe,Re)):mt.texSubImage2D(gr,Na,fr,Sn,Fe,Re,rr,ar,Ht)}var hn=[];function tn(){return hn.pop()||new $e}function kn(pe){pe.needsFree&&wt.freeType(pe.data),$e.call(pe),hn.push(pe)}function In(){Zt.call(this),this.genMipmaps=!1,this.mipmapHint=Ce,this.mipmask=0,this.images=Array(16)}function Kn(pe,gr,fr){var Sn=pe.images[0]=tn();pe.mipmask=1,Sn.width=pe.width=gr,Sn.height=pe.height=fr,Sn.channels=pe.channels=4}function ca(pe,gr){var fr=null;if(zf(gr))fr=pe.images[0]=tn(),ye(fr,pe),tr(fr,gr),pe.mipmask=1;else if(We(pe,gr),Array.isArray(gr.mipmap))for(var Sn=gr.mipmap,Na=0;Na<Sn.length;++Na)fr=pe.images[Na]=tn(),ye(fr,pe),fr.width>>=Na,fr.height>>=Na,tr(fr,Sn[Na]),pe.mipmask|=1<<Na;else fr=pe.images[0]=tn(),ye(fr,pe),tr(fr,gr),pe.mipmask=1;ye(pe,pe.images[0]),pe.compressed&&(pe.internalformat===Zi||pe.internalformat===ao||pe.internalformat===zs||pe.internalformat===Mu)&&Ct(pe.width%4===0&&pe.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function ea(pe,gr){for(var fr=pe.images,Sn=0;Sn<fr.length;++Sn){if(!fr[Sn])return;Je(fr[Sn],gr,Sn)}}var mi=[];function va(){var pe=mi.pop()||new In;Zt.call(pe),pe.mipmask=0;for(var gr=0;gr<16;++gr)pe.images[gr]=null;return pe}function Si(pe){for(var gr=pe.images,fr=0;fr<gr.length;++fr)gr[fr]&&kn(gr[fr]),gr[fr]=null;mi.push(pe)}function di(){this.minFilter=vt,this.magFilter=vt,this.wrapS=Os,this.wrapT=Os,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Ce}function Pa(pe,gr){if("min"in gr){var fr=gr.min;Ct.parameter(fr,Gr),pe.minFilter=Gr[fr],wa.indexOf(pe.minFilter)>=0&&!("faces"in gr)&&(pe.genMipmaps=!0)}if("mag"in gr){var Sn=gr.mag;Ct.parameter(Sn,$r),pe.magFilter=$r[Sn]}var Na=pe.wrapS,le=pe.wrapT;if("wrap"in gr){var Ht=gr.wrap;typeof Ht=="string"?(Ct.parameter(Ht,Vr),Na=le=Vr[Ht]):Array.isArray(Ht)&&(Ct.parameter(Ht[0],Vr),Ct.parameter(Ht[1],Vr),Na=Vr[Ht[0]],le=Vr[Ht[1]])}else{if("wrapS"in gr){var ke=gr.wrapS;Ct.parameter(ke,Vr),Na=Vr[ke]}if("wrapT"in gr){var rr=gr.wrapT;Ct.parameter(rr,Vr),le=Vr[rr]}}if(pe.wrapS=Na,pe.wrapT=le,"anisotropic"in gr){var ar=gr.anisotropic;Ct(typeof ar=="number"&&ar>=1&&ar<=Ee.maxAnisotropic,"aniso samples must be between 1 and "),pe.anisotropic=gr.anisotropic}if("mipmap"in gr){var Fe=!1;switch(typeof gr.mipmap){case"string":Ct.parameter(gr.mipmap,Yr,"invalid mipmap hint"),pe.mipmapHint=Yr[gr.mipmap],pe.genMipmaps=!0,Fe=!0;break;case"boolean":Fe=pe.genMipmaps=gr.mipmap;break;case"object":Ct(Array.isArray(gr.mipmap),"invalid mipmap type"),pe.genMipmaps=!1,Fe=!0;break;default:Ct.raise("invalid mipmap type")}Fe&&!("min"in gr)&&(pe.minFilter=Lt)}}function Mi(pe,gr){mt.texParameteri(gr,D,pe.minFilter),mt.texParameteri(gr,h,pe.magFilter),mt.texParameteri(gr,rf,pe.wrapS),mt.texParameteri(gr,kf,pe.wrapT),qt.ext_texture_filter_anisotropic&&mt.texParameteri(gr,xr,pe.anisotropic),pe.genMipmaps&&(mt.hint(he,pe.mipmapHint),mt.generateMipmap(gr))}var Fi=0,yo={},Ao=Ee.maxTextureUnits,Qi=Array(Ao).map(function(){return null});function _a(pe){Zt.call(this),this.mipmask=0,this.internalformat=Vo,this.id=Fi++,this.refCount=1,this.target=pe,this.texture=mt.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new di,hr.profile&&(this.stats={size:0})}function Ko(pe){mt.activeTexture(Ea),mt.bindTexture(pe.target,pe.texture)}function ni(){var pe=Qi[0];pe?mt.bindTexture(pe.target,pe.texture):mt.bindTexture(ho,null)}function $n(pe){var gr=pe.texture;Ct(gr,"must not double destroy texture");var fr=pe.unit,Sn=pe.target;fr>=0&&(mt.activeTexture(Ea+fr),mt.bindTexture(Sn,null),Qi[fr]=null),mt.deleteTexture(gr),pe.texture=null,pe.params=null,pe.pixels=null,pe.refCount=0,delete yo[pe.id],lr.textureCount--}z(_a.prototype,{bind:function(){var pe=this;pe.bindCount+=1;var gr=pe.unit;if(gr<0){for(var fr=0;fr<Ao;++fr){var Sn=Qi[fr];if(Sn){if(Sn.bindCount>0)continue;Sn.unit=-1}Qi[fr]=pe,gr=fr;break}gr>=Ao&&Ct.raise("insufficient number of texture units"),hr.profile&&lr.maxTextureUnits<gr+1&&(lr.maxTextureUnits=gr+1),pe.unit=gr,mt.activeTexture(Ea+gr),mt.bindTexture(pe.target,pe.texture)}return gr},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&$n(this)}});function ka(pe,gr){var fr=new _a(ho);yo[fr.id]=fr,lr.textureCount++;function Sn(Ht,ke){var rr=fr.texInfo;di.call(rr);var ar=va();return typeof Ht=="number"?typeof ke=="number"?Kn(ar,Ht|0,ke|0):Kn(ar,Ht|0,Ht|0):Ht?(Ct.type(Ht,"object","invalid arguments to regl.texture"),Pa(rr,Ht),ca(ar,Ht)):Kn(ar,1,1),rr.genMipmaps&&(ar.mipmask=(ar.width<<1)-1),fr.mipmask=ar.mipmask,ye(fr,ar),Ct.texture2D(rr,ar,Ee),fr.internalformat=ar.internalformat,Sn.width=ar.width,Sn.height=ar.height,Ko(fr),ea(ar,ho),Mi(rr,ho),ni(),Si(ar),hr.profile&&(fr.stats.size=cu(fr.internalformat,fr.type,ar.width,ar.height,rr.genMipmaps,!1)),Sn.format=ct[fr.internalformat],Sn.type=gt[fr.type],Sn.mag=bt[rr.magFilter],Sn.min=Mt[rr.minFilter],Sn.wrapS=Gt[rr.wrapS],Sn.wrapT=Gt[rr.wrapT],Sn}function Na(Ht,ke,rr,ar){Ct(!!Ht,"must specify image data");var Fe=ke|0,Re=rr|0,Ve=ar|0,ce=tn();return ye(ce,fr),ce.width=0,ce.height=0,tr(ce,Ht),ce.width=ce.width||(fr.width>>Ve)-Fe,ce.height=ce.height||(fr.height>>Ve)-Re,Ct(fr.type===ce.type&&fr.format===ce.format&&fr.internalformat===ce.internalformat,"incompatible format for texture.subimage"),Ct(Fe>=0&&Re>=0&&Fe+ce.width<=fr.width&&Re+ce.height<=fr.height,"texture.subimage write out of bounds"),Ct(fr.mipmask&1<<Ve,"missing mipmap data"),Ct(ce.data||ce.element||ce.needsCopy,"missing image data"),Ko(fr),jr(ce,ho,Fe,Re,Ve),ni(),kn(ce),Sn}function le(Ht,ke){var rr=Ht|0,ar=ke|0||rr;if(rr===fr.width&&ar===fr.height)return Sn;Sn.width=fr.width=rr,Sn.height=fr.height=ar,Ko(fr);for(var Fe=0;fr.mipmask>>Fe;++Fe){var Re=rr>>Fe,Ve=ar>>Fe;if(!Re||!Ve)break;mt.texImage2D(ho,Fe,fr.format,Re,Ve,0,fr.format,fr.type,null)}return ni(),hr.profile&&(fr.stats.size=cu(fr.internalformat,fr.type,rr,ar,!1,!1)),Sn}return Sn(pe,gr),Sn.subimage=Na,Sn.resize=le,Sn._reglType="texture2d",Sn._texture=fr,hr.profile&&(Sn.stats=fr.stats),Sn.destroy=function(){fr.decRef()},Sn}function Ha(pe,gr,fr,Sn,Na,le){var Ht=new _a(Bs);yo[Ht.id]=Ht,lr.cubeCount++;var ke=new Array(6);function rr(Re,Ve,ce,Le,oe,qe){var or,Ir=Ht.texInfo;for(di.call(Ir),or=0;or<6;++or)ke[or]=va();if(typeof Re=="number"||!Re){var kr=Re|0||1;for(or=0;or<6;++or)Kn(ke[or],kr,kr)}else if(typeof Re=="object")if(Ve)ca(ke[0],Re),ca(ke[1],Ve),ca(ke[2],ce),ca(ke[3],Le),ca(ke[4],oe),ca(ke[5],qe);else if(Pa(Ir,Re),We(Ht,Re),"faces"in Re){var _r=Re.faces;for(Ct(Array.isArray(_r)&&_r.length===6,"cube faces must be a length 6 array"),or=0;or<6;++or)Ct(typeof _r[or]=="object"&&!!_r[or],"invalid input for cube map face"),ye(ke[or],Ht),ca(ke[or],_r[or])}else for(or=0;or<6;++or)ca(ke[or],Re);else Ct.raise("invalid arguments to cube map");for(ye(Ht,ke[0]),Ee.npotTextureCube||Ct(Po(Ht.width)&&Po(Ht.height),"your browser does not support non power or two texture dimensions"),Ir.genMipmaps?Ht.mipmask=(ke[0].width<<1)-1:Ht.mipmask=ke[0].mipmask,Ct.textureCube(Ht,Ir,ke,Ee),Ht.internalformat=ke[0].internalformat,rr.width=ke[0].width,rr.height=ke[0].height,Ko(Ht),or=0;or<6;++or)ea(ke[or],Ts+or);for(Mi(Ir,Bs),ni(),hr.profile&&(Ht.stats.size=cu(Ht.internalformat,Ht.type,rr.width,rr.height,Ir.genMipmaps,!0)),rr.format=ct[Ht.internalformat],rr.type=gt[Ht.type],rr.mag=bt[Ir.magFilter],rr.min=Mt[Ir.minFilter],rr.wrapS=Gt[Ir.wrapS],rr.wrapT=Gt[Ir.wrapT],or=0;or<6;++or)Si(ke[or]);return rr}function ar(Re,Ve,ce,Le,oe){Ct(!!Ve,"must specify image data"),Ct(typeof Re=="number"&&Re===(Re|0)&&Re>=0&&Re<6,"invalid face");var qe=ce|0,or=Le|0,Ir=oe|0,kr=tn();return ye(kr,Ht),kr.width=0,kr.height=0,tr(kr,Ve),kr.width=kr.width||(Ht.width>>Ir)-qe,kr.height=kr.height||(Ht.height>>Ir)-or,Ct(Ht.type===kr.type&&Ht.format===kr.format&&Ht.internalformat===kr.internalformat,"incompatible format for texture.subimage"),Ct(qe>=0&&or>=0&&qe+kr.width<=Ht.width&&or+kr.height<=Ht.height,"texture.subimage write out of bounds"),Ct(Ht.mipmask&1<<Ir,"missing mipmap data"),Ct(kr.data||kr.element||kr.needsCopy,"missing image data"),Ko(Ht),jr(kr,Ts+Re,qe,or,Ir),ni(),kn(kr),rr}function Fe(Re){var Ve=Re|0;if(Ve!==Ht.width){rr.width=Ht.width=Ve,rr.height=Ht.height=Ve,Ko(Ht);for(var ce=0;ce<6;++ce)for(var Le=0;Ht.mipmask>>Le;++Le)mt.texImage2D(Ts+ce,Le,Ht.format,Ve>>Le,Ve>>Le,0,Ht.format,Ht.type,null);return ni(),hr.profile&&(Ht.stats.size=cu(Ht.internalformat,Ht.type,rr.width,rr.height,!1,!0)),rr}}return rr(pe,gr,fr,Sn,Na,le),rr.subimage=ar,rr.resize=Fe,rr._reglType="textureCube",rr._texture=Ht,hr.profile&&(rr.stats=Ht.stats),rr.destroy=function(){Ht.decRef()},rr}function io(){for(var pe=0;pe<Ao;++pe)mt.activeTexture(Ea+pe),mt.bindTexture(ho,null),Qi[pe]=null;xi(yo).forEach($n),lr.cubeCount=0,lr.textureCount=0}hr.profile&&(lr.getTotalTextureSize=function(){var pe=0;return Object.keys(yo).forEach(function(gr){pe+=yo[gr].stats.size}),pe});function Pu(){for(var pe=0;pe<Ao;++pe){var gr=Qi[pe];gr&&(gr.bindCount=0,gr.unit=-1,Qi[pe]=null)}xi(yo).forEach(function(fr){fr.texture=mt.createTexture(),mt.bindTexture(fr.target,fr.texture);for(var Sn=0;Sn<32;++Sn)if(fr.mipmask&1<<Sn)if(fr.target===ho)mt.texImage2D(ho,Sn,fr.internalformat,fr.width>>Sn,fr.height>>Sn,0,fr.internalformat,fr.type,null);else for(var Na=0;Na<6;++Na)mt.texImage2D(Ts+Na,Sn,fr.internalformat,fr.width>>Sn,fr.height>>Sn,0,fr.internalformat,fr.type,null);Mi(fr.texInfo,fr.target)})}function uc(){for(var pe=0;pe<Ao;++pe){var gr=Qi[pe];gr&&(gr.bindCount=0,gr.unit=-1,Qi[pe]=null),mt.activeTexture(Ea+pe),mt.bindTexture(ho,null),mt.bindTexture(Bs,null)}}return{create2D:ka,createCube:Ha,clear:io,getTexture:function(pe){return null},restore:Pu,refresh:uc}}var wn=36161,Tu=32854,Ua=32855,sf=36194,Uf=33189,Us=36168,Wf=34041,lu=35907,Xf=34836,Yf=34842,Vf=34843,ms=[];ms[Tu]=2,ms[Ua]=2,ms[sf]=2,ms[Uf]=2,ms[Us]=1,ms[Wf]=4,ms[lu]=4,ms[Xf]=16,ms[Yf]=8,ms[Vf]=6;function jf(mt,qt,Ee){return ms[mt]*qt*Ee}var Hf=function(mt,qt,Ee,cr,Lr){var lr={rgba4:Tu,rgb565:sf,"rgb5 a1":Ua,depth:Uf,stencil:Us,"depth stencil":Wf};qt.ext_srgb&&(lr.srgba=lu),qt.ext_color_buffer_half_float&&(lr.rgba16f=Yf,lr.rgb16f=Vf),qt.webgl_color_buffer_float&&(lr.rgba32f=Xf);var hr=[];Object.keys(lr).forEach(function(T){var U=lr[T];hr[U]=T});var Yr=0,Vr={};function $r(T){this.id=Yr++,this.refCount=1,this.renderbuffer=T,this.format=Tu,this.width=0,this.height=0,Lr.profile&&(this.stats={size:0})}$r.prototype.decRef=function(){--this.refCount<=0&&Gr(this)};function Gr(T){var U=T.renderbuffer;Ct(U,"must not double destroy renderbuffer"),mt.bindRenderbuffer(wn,null),mt.deleteRenderbuffer(U),T.renderbuffer=null,T.refCount=0,delete Vr[T.id],cr.renderbufferCount--}function nn(T,U){var Z=new $r(mt.createRenderbuffer());Vr[Z.id]=Z,cr.renderbufferCount++;function ot(gt,bt){var Mt=0,Gt=0,te=Tu;if(typeof gt=="object"&&gt){var Zt=gt;if("shape"in Zt){var ye=Zt.shape;Ct(Array.isArray(ye)&&ye.length>=2,"invalid renderbuffer shape"),Mt=ye[0]|0,Gt=ye[1]|0}else"radius"in Zt&&(Mt=Gt=Zt.radius|0),"width"in Zt&&(Mt=Zt.width|0),"height"in Zt&&(Gt=Zt.height|0);"format"in Zt&&(Ct.parameter(Zt.format,lr,"invalid renderbuffer format"),te=lr[Zt.format])}else typeof gt=="number"?(Mt=gt|0,typeof bt=="number"?Gt=bt|0:Gt=Mt):gt?Ct.raise("invalid arguments to renderbuffer constructor"):Mt=Gt=1;if(Ct(Mt>0&&Gt>0&&Mt<=Ee.maxRenderbufferSize&&Gt<=Ee.maxRenderbufferSize,"invalid renderbuffer size"),!(Mt===Z.width&&Gt===Z.height&&te===Z.format))return ot.width=Z.width=Mt,ot.height=Z.height=Gt,Z.format=te,mt.bindRenderbuffer(wn,Z.renderbuffer),mt.renderbufferStorage(wn,te,Mt,Gt),Ct(mt.getError()===0,"invalid render buffer format"),Lr.profile&&(Z.stats.size=jf(Z.format,Z.width,Z.height)),ot.format=hr[Z.format],ot}function ct(gt,bt){var Mt=gt|0,Gt=bt|0||Mt;return Mt===Z.width&&Gt===Z.height||(Ct(Mt>0&&Gt>0&&Mt<=Ee.maxRenderbufferSize&&Gt<=Ee.maxRenderbufferSize,"invalid renderbuffer size"),ot.width=Z.width=Mt,ot.height=Z.height=Gt,mt.bindRenderbuffer(wn,Z.renderbuffer),mt.renderbufferStorage(wn,Z.format,Mt,Gt),Ct(mt.getError()===0,"invalid render buffer format"),Lr.profile&&(Z.stats.size=jf(Z.format,Z.width,Z.height))),ot}return ot(T,U),ot.resize=ct,ot._reglType="renderbuffer",ot._renderbuffer=Z,Lr.profile&&(ot.stats=Z.stats),ot.destroy=function(){Z.decRef()},ot}Lr.profile&&(cr.getTotalRenderbufferSize=function(){var T=0;return Object.keys(Vr).forEach(function(U){T+=Vr[U].stats.size}),T});function v(){xi(Vr).forEach(function(T){T.renderbuffer=mt.createRenderbuffer(),mt.bindRenderbuffer(wn,T.renderbuffer),mt.renderbufferStorage(wn,T.format,T.width,T.height)}),mt.bindRenderbuffer(wn,null)}return{create:nn,clear:function(){xi(Vr).forEach(Gr)},restore:v}},bi=36160,Yu=36161,xs=3553,et=34069,pt=36064,St=36096,Ut=36128,ne=33306,Be=36053,Ue=36054,ur=36055,Br=36057,Hr=36061,xn=36193,Tn=5121,vn=5126,fa=6407,da=6408,ya=6402,na=[fa,da],Da=[];Da[da]=4,Da[fa]=3;var Fn=[];Fn[Tn]=1,Fn[vn]=4,Fn[xn]=2;var Ia=32854,ia=32855,Un=36194,Ma=33189,qa=36168,ri=34041,Ba=35907,Fa=34836,oi=34842,Oi=34843,Ei=[Ia,ia,Un,Ba,oi,Oi,Fa],bs={};bs[Be]="complete",bs[Ue]="incomplete attachment",bs[Br]="incomplete dimensions",bs[ur]="incomplete, missing attachment",bs[Hr]="unsupported";function uf(mt,qt,Ee,cr,Lr,lr){var hr={cur:null,next:null,dirty:!1,setFBO:null},Yr=["rgba"],Vr=["rgba4","rgb565","rgb5 a1"];qt.ext_srgb&&Vr.push("srgba"),qt.ext_color_buffer_half_float&&Vr.push("rgba16f","rgb16f"),qt.webgl_color_buffer_float&&Vr.push("rgba32f");var $r=["uint8"];qt.oes_texture_half_float&&$r.push("half float","float16"),qt.oes_texture_float&&$r.push("float","float32");function Gr($e,tr,Je){this.target=$e,this.texture=tr,this.renderbuffer=Je;var jr=0,hn=0;tr?(jr=tr.width,hn=tr.height):Je&&(jr=Je.width,hn=Je.height),this.width=jr,this.height=hn}function nn($e){$e&&($e.texture&&$e.texture._texture.decRef(),$e.renderbuffer&&$e.renderbuffer._renderbuffer.decRef())}function v($e,tr,Je){if($e)if($e.texture){var jr=$e.texture._texture,hn=Math.max(1,jr.width),tn=Math.max(1,jr.height);Ct(hn===tr&&tn===Je,"inconsistent width/height for supplied texture"),jr.refCount+=1}else{var kn=$e.renderbuffer._renderbuffer;Ct(kn.width===tr&&kn.height===Je,"inconsistent width/height for renderbuffer"),kn.refCount+=1}}function T($e,tr){tr&&(tr.texture?mt.framebufferTexture2D(bi,$e,tr.target,tr.texture._texture.texture,0):mt.framebufferRenderbuffer(bi,$e,Yu,tr.renderbuffer._renderbuffer.renderbuffer))}function U($e){var tr=xs,Je=null,jr=null,hn=$e;typeof $e=="object"&&(hn=$e.data,"target"in $e&&(tr=$e.target|0)),Ct.type(hn,"function","invalid attachment data");var tn=hn._reglType;return tn==="texture2d"?(Je=hn,Ct(tr===xs)):tn==="textureCube"?(Je=hn,Ct(tr>=et&&tr<et+6,"invalid cube map target")):tn==="renderbuffer"?(jr=hn,tr=Yu):Ct.raise("invalid regl object for attachment"),new Gr(tr,Je,jr)}function Z($e,tr,Je,jr,hn){if(Je){var tn=cr.create2D({width:$e,height:tr,format:jr,type:hn});return tn._texture.refCount=0,new Gr(xs,tn,null)}else{var kn=Lr.create({width:$e,height:tr,format:jr});return kn._renderbuffer.refCount=0,new Gr(Yu,null,kn)}}function ot($e){return $e&&($e.texture||$e.renderbuffer)}function ct($e,tr,Je){$e&&($e.texture?$e.texture.resize(tr,Je):$e.renderbuffer&&$e.renderbuffer.resize(tr,Je),$e.width=tr,$e.height=Je)}var gt=0,bt={};function Mt(){this.id=gt++,bt[this.id]=this,this.framebuffer=mt.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function Gt($e){$e.colorAttachments.forEach(nn),nn($e.depthAttachment),nn($e.stencilAttachment),nn($e.depthStencilAttachment)}function te($e){var tr=$e.framebuffer;Ct(tr,"must not double destroy framebuffer"),mt.deleteFramebuffer(tr),$e.framebuffer=null,lr.framebufferCount--,delete bt[$e.id]}function Zt($e){var tr;mt.bindFramebuffer(bi,$e.framebuffer);var Je=$e.colorAttachments;for(tr=0;tr<Je.length;++tr)T(pt+tr,Je[tr]);for(tr=Je.length;tr<Ee.maxColorAttachments;++tr)mt.framebufferTexture2D(bi,pt+tr,xs,null,0);mt.framebufferTexture2D(bi,ne,xs,null,0),mt.framebufferTexture2D(bi,St,xs,null,0),mt.framebufferTexture2D(bi,Ut,xs,null,0),T(St,$e.depthAttachment),T(Ut,$e.stencilAttachment),T(ne,$e.depthStencilAttachment);var jr=mt.checkFramebufferStatus(bi);!mt.isContextLost()&&jr!==Be&&Ct.raise("framebuffer configuration not supported, status = "+bs[jr]),mt.bindFramebuffer(bi,hr.next?hr.next.framebuffer:null),hr.cur=hr.next,mt.getError()}function ye($e,tr){var Je=new Mt;lr.framebufferCount++;function jr(tn,kn){var In;Ct(hr.next!==Je,"can not update framebuffer which is currently in use");var Kn=0,ca=0,ea=!0,mi=!0,va=null,Si=!0,di="rgba",Pa="uint8",Mi=1,Fi=null,yo=null,Ao=null,Qi=!1;if(typeof tn=="number")Kn=tn|0,ca=kn|0||Kn;else if(!tn)Kn=ca=1;else{Ct.type(tn,"object","invalid arguments for framebuffer");var _a=tn;if("shape"in _a){var Ko=_a.shape;Ct(Array.isArray(Ko)&&Ko.length>=2,"invalid shape for framebuffer"),Kn=Ko[0],ca=Ko[1]}else"radius"in _a&&(Kn=ca=_a.radius),"width"in _a&&(Kn=_a.width),"height"in _a&&(ca=_a.height);("color"in _a||"colors"in _a)&&(va=_a.color||_a.colors,Array.isArray(va)&&Ct(va.length===1||qt.webgl_draw_buffers,"multiple render targets not supported")),va||("colorCount"in _a&&(Mi=_a.colorCount|0,Ct(Mi>0,"invalid color buffer count")),"colorTexture"in _a&&(Si=!!_a.colorTexture,di="rgba4"),"colorType"in _a&&(Pa=_a.colorType,Si?(Ct(qt.oes_texture_float||!(Pa==="float"||Pa==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),Ct(qt.oes_texture_half_float||!(Pa==="half float"||Pa==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):Pa==="half float"||Pa==="float16"?(Ct(qt.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),di="rgba16f"):(Pa==="float"||Pa==="float32")&&(Ct(qt.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),di="rgba32f"),Ct.oneOf(Pa,$r,"invalid color type")),"colorFormat"in _a&&(di=_a.colorFormat,Yr.indexOf(di)>=0?Si=!0:Vr.indexOf(di)>=0?Si=!1:Si?Ct.oneOf(_a.colorFormat,Yr,"invalid color format for texture"):Ct.oneOf(_a.colorFormat,Vr,"invalid color format for renderbuffer"))),("depthTexture"in _a||"depthStencilTexture"in _a)&&(Qi=!!(_a.depthTexture||_a.depthStencilTexture),Ct(!Qi||qt.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in _a&&(typeof _a.depth=="boolean"?ea=_a.depth:(Fi=_a.depth,mi=!1)),"stencil"in _a&&(typeof _a.stencil=="boolean"?mi=_a.stencil:(yo=_a.stencil,ea=!1)),"depthStencil"in _a&&(typeof _a.depthStencil=="boolean"?ea=mi=_a.depthStencil:(Ao=_a.depthStencil,ea=!1,mi=!1))}var ni=null,$n=null,ka=null,Ha=null;if(Array.isArray(va))ni=va.map(U);else if(va)ni=[U(va)];else for(ni=new Array(Mi),In=0;In<Mi;++In)ni[In]=Z(Kn,ca,Si,di,Pa);Ct(qt.webgl_draw_buffers||ni.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),Ct(ni.length<=Ee.maxColorAttachments,"too many color attachments, not supported"),Kn=Kn||ni[0].width,ca=ca||ni[0].height,Fi?$n=U(Fi):ea&&!mi&&($n=Z(Kn,ca,Qi,"depth","uint32")),yo?ka=U(yo):mi&&!ea&&(ka=Z(Kn,ca,!1,"stencil","uint8")),Ao?Ha=U(Ao):!Fi&&!yo&&mi&&ea&&(Ha=Z(Kn,ca,Qi,"depth stencil","depth stencil")),Ct(!!Fi+!!yo+!!Ao<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var io=null;for(In=0;In<ni.length;++In)if(v(ni[In],Kn,ca),Ct(!ni[In]||ni[In].texture&&na.indexOf(ni[In].texture._texture.format)>=0||ni[In].renderbuffer&&Ei.indexOf(ni[In].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+In+" is invalid"),ni[In]&&ni[In].texture){var Pu=Da[ni[In].texture._texture.format]*Fn[ni[In].texture._texture.type];io===null?io=Pu:Ct(io===Pu,"all color attachments much have the same number of bits per pixel.")}return v($n,Kn,ca),Ct(!$n||$n.texture&&$n.texture._texture.format===ya||$n.renderbuffer&&$n.renderbuffer._renderbuffer.format===Ma,"invalid depth attachment for framebuffer object"),v(ka,Kn,ca),Ct(!ka||ka.renderbuffer&&ka.renderbuffer._renderbuffer.format===qa,"invalid stencil attachment for framebuffer object"),v(Ha,Kn,ca),Ct(!Ha||Ha.texture&&Ha.texture._texture.format===ri||Ha.renderbuffer&&Ha.renderbuffer._renderbuffer.format===ri,"invalid depth-stencil attachment for framebuffer object"),Gt(Je),Je.width=Kn,Je.height=ca,Je.colorAttachments=ni,Je.depthAttachment=$n,Je.stencilAttachment=ka,Je.depthStencilAttachment=Ha,jr.color=ni.map(ot),jr.depth=ot($n),jr.stencil=ot(ka),jr.depthStencil=ot(Ha),jr.width=Je.width,jr.height=Je.height,Zt(Je),jr}function hn(tn,kn){Ct(hr.next!==Je,"can not resize a framebuffer which is currently in use");var In=Math.max(tn|0,1),Kn=Math.max(kn|0||In,1);if(In===Je.width&&Kn===Je.height)return jr;for(var ca=Je.colorAttachments,ea=0;ea<ca.length;++ea)ct(ca[ea],In,Kn);return ct(Je.depthAttachment,In,Kn),ct(Je.stencilAttachment,In,Kn),ct(Je.depthStencilAttachment,In,Kn),Je.width=jr.width=In,Je.height=jr.height=Kn,Zt(Je),jr}return jr($e,tr),z(jr,{resize:hn,_reglType:"framebuffer",_framebuffer:Je,destroy:function(){te(Je),Gt(Je)},use:function(tn){hr.setFBO({framebuffer:jr},tn)}})}function We($e){var tr=Array(6);function Je(hn){var tn;Ct(tr.indexOf(hr.next)<0,"can not update framebuffer which is currently in use");var kn={color:null},In=0,Kn=null,ca="rgba",ea="uint8",mi=1;if(typeof hn=="number")In=hn|0;else if(!hn)In=1;else{Ct.type(hn,"object","invalid arguments for framebuffer");var va=hn;if("shape"in va){var Si=va.shape;Ct(Array.isArray(Si)&&Si.length>=2,"invalid shape for framebuffer"),Ct(Si[0]===Si[1],"cube framebuffer must be square"),In=Si[0]}else"radius"in va&&(In=va.radius|0),"width"in va?(In=va.width|0,"height"in va&&Ct(va.height===In,"must be square")):"height"in va&&(In=va.height|0);("color"in va||"colors"in va)&&(Kn=va.color||va.colors,Array.isArray(Kn)&&Ct(Kn.length===1||qt.webgl_draw_buffers,"multiple render targets not supported")),Kn||("colorCount"in va&&(mi=va.colorCount|0,Ct(mi>0,"invalid color buffer count")),"colorType"in va&&(Ct.oneOf(va.colorType,$r,"invalid color type"),ea=va.colorType),"colorFormat"in va&&(ca=va.colorFormat,Ct.oneOf(va.colorFormat,Yr,"invalid color format for texture"))),"depth"in va&&(kn.depth=va.depth),"stencil"in va&&(kn.stencil=va.stencil),"depthStencil"in va&&(kn.depthStencil=va.depthStencil)}var di;if(Kn)if(Array.isArray(Kn))for(di=[],tn=0;tn<Kn.length;++tn)di[tn]=Kn[tn];else di=[Kn];else{di=Array(mi);var Pa={radius:In,format:ca,type:ea};for(tn=0;tn<mi;++tn)di[tn]=cr.createCube(Pa)}for(kn.color=Array(di.length),tn=0;tn<di.length;++tn){var Mi=di[tn];Ct(typeof Mi=="function"&&Mi._reglType==="textureCube","invalid cube map"),In=In||Mi.width,Ct(Mi.width===In&&Mi.height===In,"invalid cube map shape"),kn.color[tn]={target:et,data:di[tn]}}for(tn=0;tn<6;++tn){for(var Fi=0;Fi<di.length;++Fi)kn.color[Fi].target=et+tn;tn>0&&(kn.depth=tr[0].depth,kn.stencil=tr[0].stencil,kn.depthStencil=tr[0].depthStencil),tr[tn]?tr[tn](kn):tr[tn]=ye(kn)}return z(Je,{width:In,height:In,color:di})}function jr(hn){var tn,kn=hn|0;if(Ct(kn>0&&kn<=Ee.maxCubeMapSize,"invalid radius for cube fbo"),kn===Je.width)return Je;var In=Je.color;for(tn=0;tn<In.length;++tn)In[tn].resize(kn);for(tn=0;tn<6;++tn)tr[tn].resize(kn);return Je.width=Je.height=kn,Je}return Je($e),z(Je,{faces:tr,resize:jr,_reglType:"framebufferCube",destroy:function(){tr.forEach(function(hn){hn.destroy()})}})}function wr(){hr.cur=null,hr.next=null,hr.dirty=!0,xi(bt).forEach(function($e){$e.framebuffer=mt.createFramebuffer(),Zt($e)})}return z(hr,{getFramebuffer:function($e){if(typeof $e=="function"&&$e._reglType==="framebuffer"){var tr=$e._framebuffer;if(tr instanceof Mt)return tr}return null},create:ye,createCube:We,clear:function(){xi(bt).forEach(te)},restore:wr})}var tu=5126,Ws=34962;function hu(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=tu,this.offset=0,this.stride=0,this.divisor=0}function ff(mt,qt,Ee,cr,Lr){for(var lr=Ee.maxAttributes,hr=new Array(lr),Yr=0;Yr<lr;++Yr)hr[Yr]=new hu;var Vr=0,$r={},Gr={Record:hu,scope:{},state:hr,currentVAO:null,targetVAO:null,restore:v()?bt:function(){},createVAO:Mt,getVAO:U,destroyBuffer:nn,setVAO:v()?Z:ot,clear:v()?ct:function(){}};function nn(Gt){for(var te=0;te<hr.length;++te){var Zt=hr[te];Zt.buffer===Gt&&(mt.disableVertexAttribArray(te),Zt.buffer=null)}}function v(){return qt.oes_vertex_array_object}function T(){return qt.angle_instanced_arrays}function U(Gt){return typeof Gt=="function"&&Gt._vao?Gt._vao:null}function Z(Gt){if(Gt!==Gr.currentVAO){var te=v();Gt?te.bindVertexArrayOES(Gt.vao):te.bindVertexArrayOES(null),Gr.currentVAO=Gt}}function ot(Gt){if(Gt!==Gr.currentVAO){if(Gt)Gt.bindAttrs();else for(var te=T(),Zt=0;Zt<hr.length;++Zt){var ye=hr[Zt];ye.buffer?(mt.enableVertexAttribArray(Zt),mt.vertexAttribPointer(Zt,ye.size,ye.type,ye.normalized,ye.stride,ye.offfset),te&&ye.divisor&&te.vertexAttribDivisorANGLE(Zt,ye.divisor)):(mt.disableVertexAttribArray(Zt),mt.vertexAttrib4f(Zt,ye.x,ye.y,ye.z,ye.w))}Gr.currentVAO=Gt}}function ct(){xi($r).forEach(function(Gt){Gt.destroy()})}function gt(){this.id=++Vr,this.attributes=[];var Gt=v();Gt?this.vao=Gt.createVertexArrayOES():this.vao=null,$r[this.id]=this,this.buffers=[]}gt.prototype.bindAttrs=function(){for(var Gt=T(),te=this.attributes,Zt=0;Zt<te.length;++Zt){var ye=te[Zt];ye.buffer?(mt.enableVertexAttribArray(Zt),mt.bindBuffer(Ws,ye.buffer.buffer),mt.vertexAttribPointer(Zt,ye.size,ye.type,ye.normalized,ye.stride,ye.offset),Gt&&ye.divisor&&Gt.vertexAttribDivisorANGLE(Zt,ye.divisor)):(mt.disableVertexAttribArray(Zt),mt.vertexAttrib4f(Zt,ye.x,ye.y,ye.z,ye.w))}for(var We=te.length;We<lr;++We)mt.disableVertexAttribArray(We)},gt.prototype.refresh=function(){var Gt=v();Gt&&(Gt.bindVertexArrayOES(this.vao),this.bindAttrs(),Gr.currentVAO=this)},gt.prototype.destroy=function(){if(this.vao){var Gt=v();this===Gr.currentVAO&&(Gr.currentVAO=null,Gt.bindVertexArrayOES(null)),Gt.deleteVertexArrayOES(this.vao),this.vao=null}$r[this.id]&&(delete $r[this.id],cr.vaoCount-=1)};function bt(){var Gt=v();Gt&&xi($r).forEach(function(te){te.refresh()})}function Mt(Gt){var te=new gt;cr.vaoCount+=1;function Zt(ye){Ct(Array.isArray(ye),"arguments to vertex array constructor must be an array"),Ct(ye.length<lr,"too many attributes"),Ct(ye.length>0,"must specify at least one attribute");var We={},wr=te.attributes;wr.length=ye.length;for(var $e=0;$e<ye.length;++$e){var tr=ye[$e],Je=wr[$e]=new hu,jr=tr.data||tr;if(Array.isArray(jr)||F(jr)||La(jr)){var hn;te.buffers[$e]&&(hn=te.buffers[$e],F(jr)&&hn._buffer.byteLength>=jr.byteLength?hn.subdata(jr):(hn.destroy(),te.buffers[$e]=null)),te.buffers[$e]||(hn=te.buffers[$e]=Lr.create(tr,Ws,!1,!0)),Je.buffer=Lr.getBuffer(hn),Je.size=Je.buffer.dimension|0,Je.normalized=!1,Je.type=Je.buffer.dtype,Je.offset=0,Je.stride=0,Je.divisor=0,Je.state=1,We[$e]=1}else Lr.getBuffer(tr)?(Je.buffer=Lr.getBuffer(tr),Je.size=Je.buffer.dimension|0,Je.normalized=!1,Je.type=Je.buffer.dtype,Je.offset=0,Je.stride=0,Je.divisor=0,Je.state=1):Lr.getBuffer(tr.buffer)?(Je.buffer=Lr.getBuffer(tr.buffer),Je.size=(+tr.size||Je.buffer.dimension)|0,Je.normalized=!!tr.normalized||!1,"type"in tr?(Ct.parameter(tr.type,Oo,"invalid buffer type"),Je.type=Oo[tr.type]):Je.type=Je.buffer.dtype,Je.offset=(tr.offset||0)|0,Je.stride=(tr.stride||0)|0,Je.divisor=(tr.divisor||0)|0,Je.state=1,Ct(Je.size>=1&&Je.size<=4,"size must be between 1 and 4"),Ct(Je.offset>=0,"invalid offset"),Ct(Je.stride>=0&&Je.stride<=255,"stride must be between 0 and 255"),Ct(Je.divisor>=0,"divisor must be positive"),Ct(!Je.divisor||!!qt.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in tr?(Ct($e>0,"first attribute must not be a constant"),Je.x=+tr.x||0,Je.y=+tr.y||0,Je.z=+tr.z||0,Je.w=+tr.w||0,Je.state=2):Ct(!1,"invalid attribute spec for location "+$e)}for(var tn=0;tn<te.buffers.length;++tn)!We[tn]&&te.buffers[tn]&&(te.buffers[tn].destroy(),te.buffers[tn]=null);return te.refresh(),Zt}return Zt.destroy=function(){for(var ye=0;ye<te.buffers.length;++ye)te.buffers[ye]&&te.buffers[ye].destroy();te.buffers.length=0,te.destroy()},Zt._vao=te,Zt._reglType="vao",Zt(Gt)}return Gr}var vu=35632,el=35633,Mc=35718,Vu=35721;function cf(mt,qt,Ee,cr){var Lr={},lr={};function hr(Z,ot,ct,gt){this.name=Z,this.id=ot,this.location=ct,this.info=gt}function Yr(Z,ot){for(var ct=0;ct<Z.length;++ct)if(Z[ct].id===ot.id){Z[ct].location=ot.location;return}Z.push(ot)}function Vr(Z,ot,ct){var gt=Z===vu?Lr:lr,bt=gt[ot];if(!bt){var Mt=qt.str(ot);bt=mt.createShader(Z),mt.shaderSource(bt,Mt),mt.compileShader(bt),Ct.shaderError(mt,bt,Mt,Z,ct),gt[ot]=bt}return bt}var $r={},Gr=[],nn=0;function v(Z,ot){this.id=nn++,this.fragId=Z,this.vertId=ot,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,cr.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function T(Z,ot,ct){var gt,bt,Mt=Vr(vu,Z.fragId),Gt=Vr(el,Z.vertId),te=Z.program=mt.createProgram();if(mt.attachShader(te,Mt),mt.attachShader(te,Gt),ct)for(gt=0;gt<ct.length;++gt){var Zt=ct[gt];mt.bindAttribLocation(te,Zt[0],Zt[1])}mt.linkProgram(te),Ct.linkError(mt,te,qt.str(Z.fragId),qt.str(Z.vertId),ot);var ye=mt.getProgramParameter(te,Mc);cr.profile&&(Z.stats.uniformsCount=ye);var We=Z.uniforms;for(gt=0;gt<ye;++gt)if(bt=mt.getActiveUniform(te,gt),bt)if(bt.size>1)for(var wr=0;wr<bt.size;++wr){var $e=bt.name.replace("[0]","["+wr+"]");Yr(We,new hr($e,qt.id($e),mt.getUniformLocation(te,$e),bt))}else Yr(We,new hr(bt.name,qt.id(bt.name),mt.getUniformLocation(te,bt.name),bt));var tr=mt.getProgramParameter(te,Vu);cr.profile&&(Z.stats.attributesCount=tr);var Je=Z.attributes;for(gt=0;gt<tr;++gt)bt=mt.getActiveAttrib(te,gt),bt&&Yr(Je,new hr(bt.name,qt.id(bt.name),mt.getAttribLocation(te,bt.name),bt))}cr.profile&&(Ee.getMaxUniformsCount=function(){var Z=0;return Gr.forEach(function(ot){ot.stats.uniformsCount>Z&&(Z=ot.stats.uniformsCount)}),Z},Ee.getMaxAttributesCount=function(){var Z=0;return Gr.forEach(function(ot){ot.stats.attributesCount>Z&&(Z=ot.stats.attributesCount)}),Z});function U(){Lr={},lr={};for(var Z=0;Z<Gr.length;++Z)T(Gr[Z],null,Gr[Z].attributes.map(function(ot){return[ot.location,ot.name]}))}return{clear:function(){var Z=mt.deleteShader.bind(mt);xi(Lr).forEach(Z),Lr={},xi(lr).forEach(Z),lr={},Gr.forEach(function(ot){mt.deleteProgram(ot.program)}),Gr.length=0,$r={},Ee.shaderCount=0},program:function(Z,ot,ct,gt){Ct.command(Z>=0,"missing vertex shader",ct),Ct.command(ot>=0,"missing fragment shader",ct);var bt=$r[ot];bt||(bt=$r[ot]={});var Mt=bt[Z];if(Mt&&(Mt.refCount++,!gt))return Mt;var Gt=new v(ot,Z);return Ee.shaderCount++,T(Gt,ct,gt),Mt||(bt[Z]=Gt),Gr.push(Gt),z(Gt,{destroy:function(){if(Gt.refCount--,Gt.refCount<=0){mt.deleteProgram(Gt.program);var te=Gr.indexOf(Gt);Gr.splice(te,1),Ee.shaderCount--}bt[Gt.vertId].refCount<=0&&(mt.deleteShader(lr[Gt.vertId]),delete lr[Gt.vertId],delete $r[Gt.fragId][Gt.vertId]),Object.keys($r[Gt.fragId]).length||(mt.deleteShader(Lr[Gt.fragId]),delete Lr[Gt.fragId],delete $r[Gt.fragId])}})},restore:U,shader:Vr,frag:-1,vert:-1}}var lf=6408,Es=5121,eu=3333,Xs=5126;function ju(mt,qt,Ee,cr,Lr,lr,hr){function Yr(Gr){var nn;qt.next===null?(Ct(Lr.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),nn=Es):(Ct(qt.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),nn=qt.next.colorAttachments[0].texture._texture.type,lr.oes_texture_float?(Ct(nn===Es||nn===Xs,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),nn===Xs&&Ct(hr.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):Ct(nn===Es,"Reading from a framebuffer is only allowed for the type 'uint8'"));var v=0,T=0,U=cr.framebufferWidth,Z=cr.framebufferHeight,ot=null;F(Gr)?ot=Gr:Gr&&(Ct.type(Gr,"object","invalid arguments to regl.read()"),v=Gr.x|0,T=Gr.y|0,Ct(v>=0&&v<cr.framebufferWidth,"invalid x offset for regl.read"),Ct(T>=0&&T<cr.framebufferHeight,"invalid y offset for regl.read"),U=(Gr.width||cr.framebufferWidth-v)|0,Z=(Gr.height||cr.framebufferHeight-T)|0,ot=Gr.data||null),ot&&(nn===Es?Ct(ot instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):nn===Xs&&Ct(ot instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),Ct(U>0&&U+v<=cr.framebufferWidth,"invalid width for read pixels"),Ct(Z>0&&Z+T<=cr.framebufferHeight,"invalid height for read pixels"),Ee();var ct=U*Z*4;return ot||(nn===Es?ot=new Uint8Array(ct):nn===Xs&&(ot=ot||new Float32Array(ct))),Ct.isTypedArray(ot,"data buffer for regl.read() must be a typedarray"),Ct(ot.byteLength>=ct,"data buffer for regl.read() too small"),mt.pixelStorei(eu,4),mt.readPixels(v,T,U,Z,lf,nn,ot),ot}function Vr(Gr){var nn;return qt.setFBO({framebuffer:Gr.framebuffer},function(){nn=Yr(Gr)}),nn}function $r(Gr){return!Gr||!("framebuffer"in Gr)?Yr(Gr):Vr(Gr)}return $r}function go(mt){return Array.prototype.slice.call(mt)}function Ls(mt){return go(mt).join("")}function Ys(){var mt=0,qt=[],Ee=[];function cr(nn){for(var v=0;v<Ee.length;++v)if(Ee[v]===nn)return qt[v];var T="g"+mt++;return qt.push(T),Ee.push(nn),T}function Lr(){var nn=[];function v(){nn.push.apply(nn,go(arguments))}var T=[];function U(){var Z="v"+mt++;return T.push(Z),arguments.length>0&&(nn.push(Z,"="),nn.push.apply(nn,go(arguments)),nn.push(";")),Z}return z(v,{def:U,toString:function(){return Ls([T.length>0?"var "+T.join(",")+";":"",Ls(nn)])}})}function lr(){var nn=Lr(),v=Lr(),T=nn.toString,U=v.toString;function Z(ot,ct){v(ot,ct,"=",nn.def(ot,ct),";")}return z(function(){nn.apply(nn,go(arguments))},{def:nn.def,entry:nn,exit:v,save:Z,set:function(ot,ct,gt){Z(ot,ct),nn(ot,ct,"=",gt,";")},toString:function(){return T()+U()}})}function hr(){var nn=Ls(arguments),v=lr(),T=lr(),U=v.toString,Z=T.toString;return z(v,{then:function(){return v.apply(v,go(arguments)),this},else:function(){return T.apply(T,go(arguments)),this},toString:function(){var ot=Z();return ot&&(ot="else{"+ot+"}"),Ls(["if(",nn,"){",U(),"}",ot])}})}var Yr=Lr(),Vr={};function $r(nn,v){var T=[];function U(){var bt="a"+T.length;return T.push(bt),bt}v=v||0;for(var Z=0;Z<v;++Z)U();var ot=lr(),ct=ot.toString,gt=Vr[nn]=z(ot,{arg:U,toString:function(){return Ls(["function(",T.join(),"){",ct(),"}"])}});return gt}function Gr(){var nn=['"use strict";',Yr,"return {"];Object.keys(Vr).forEach(function(U){nn.push('"',U,'":',Vr[U].toString(),",")}),nn.push("}");var v=Ls(nn).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),T=Function.apply(null,qt.concat(v));return T.apply(null,Ee)}return{global:Yr,link:cr,block:Lr,proc:$r,scope:lr,cond:hr,compile:Gr}}var hf="xyzw".split(""),Gl=5121,vf=1,rl=2,nl=0,al=1,il=2,Ac=3,Kf=4,zl=5,Ul=6,ol="dither",df="blend.enable",sl="blend.color",gf="blend.equation",ul="blend.func",Zf="depth.enable",es="depth.func",fl="depth.range",$f="depth.mask",Cc="colorMask",Ne="cull.enable",Iu="cull.face",Ds="frontFace",qf="lineWidth",cl="polygonOffset.enable",ll="polygonOffset.offset",Ns="sample.alpha",hl="sample.enable",Ou="sample.coverage",pf="stencil.enable",Tc="stencil.mask",Ic="stencil.func",po="stencil.opFront",Lu="stencil.opBack",Oc="scissor.enable",Qf="scissor.box",du="viewport",yf="profile",Du="framebuffer",gu="vert",Hu="frag",mf="elements",xf="primitive",Nu="count",Jf="offset",Lc="instances",bf="vao",vl="Width",tc="Height",Ef=Du+vl,hs=Du+tc,ec=du+vl,Wl=du+tc,Dc="drawingBuffer",dl=Dc+vl,wf=Dc+tc,Xl=[ul,gf,Ic,po,Lu,Ou,du,Qf,ll],Ku=34962,Yl=34963,gl=35632,ph=35633,Vl=3553,pl=34067,yl=2884,jl=3042,Hl=3024,Kl=2960,ml=2929,xl=3089,Zl=32823,$l=32926,Nc=32928,Ps=5126,Pc=35664,kc=35665,rc=35666,bl=5124,Rc=35667,nc=35668,Zu=35669,El=35670,Bc=35671,Fc=35672,Gc=35673,ac=35674,ic=35675,_f=35676,oc=35678,pu=35680,ql=4,yu=1028,$u=1029,zc=2304,Uc=2305,yh=32775,Ql=32776,Sf=519,ru=7680,Wc=0,Jl=1,wl=32774,mh=513,_l=36160,xh=36064,Ho={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},th=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Mf={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},mu={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},eh={frag:gl,vert:ph},Sl={cw:zc,ccw:Uc};function Xc(mt){return Array.isArray(mt)||F(mt)||La(mt)}function rh(mt){return mt.sort(function(qt,Ee){return qt===du?-1:Ee===du?1:qt<Ee?-1:1})}function rs(mt,qt,Ee,cr){this.thisDep=mt,this.contextDep=qt,this.propDep=Ee,this.append=cr}function xu(mt){return mt&&!(mt.thisDep||mt.contextDep||mt.propDep)}function qi(mt){return new rs(!1,!1,!1,mt)}function Ro(mt,qt){var Ee=mt.type;if(Ee===nl){var cr=mt.data.length;return new rs(!0,cr>=1,cr>=2,qt)}else if(Ee===Kf){var Lr=mt.data;return new rs(Lr.thisDep,Lr.contextDep,Lr.propDep,qt)}else{if(Ee===zl)return new rs(!1,!1,!1,qt);if(Ee===Ul){for(var lr=!1,hr=!1,Yr=!1,Vr=0;Vr<mt.data.length;++Vr){var $r=mt.data[Vr];if($r.type===al)Yr=!0;else if($r.type===il)hr=!0;else if($r.type===Ac)lr=!0;else if($r.type===nl){lr=!0;var Gr=$r.data;Gr>=1&&(hr=!0),Gr>=2&&(Yr=!0)}else $r.type===Kf&&(lr=lr||$r.data.thisDep,hr=hr||$r.data.contextDep,Yr=Yr||$r.data.propDep)}return new rs(lr,hr,Yr,qt)}else return new rs(Ee===Ac,Ee===il,Ee===al,qt)}}var Ml=new rs(!1,!1,!1,function(){});function nh(mt,qt,Ee,cr,Lr,lr,hr,Yr,Vr,$r,Gr,nn,v,T,U){var Z=$r.Record,ot={add:32774,subtract:32778,"reverse subtract":32779};Ee.ext_blend_minmax&&(ot.min=yh,ot.max=Ql);var ct=Ee.angle_instanced_arrays,gt=Ee.webgl_draw_buffers,bt={dirty:!0,profile:U.profile},Mt={},Gt=[],te={},Zt={};function ye(le){return le.replace(".","_")}function We(le,Ht,ke){var rr=ye(le);Gt.push(le),Mt[rr]=bt[rr]=!!ke,te[rr]=Ht}function wr(le,Ht,ke){var rr=ye(le);Gt.push(le),Array.isArray(ke)?(bt[rr]=ke.slice(),Mt[rr]=ke.slice()):bt[rr]=Mt[rr]=ke,Zt[rr]=Ht}We(ol,Hl),We(df,jl),wr(sl,"blendColor",[0,0,0,0]),wr(gf,"blendEquationSeparate",[wl,wl]),wr(ul,"blendFuncSeparate",[Jl,Wc,Jl,Wc]),We(Zf,ml,!0),wr(es,"depthFunc",mh),wr(fl,"depthRange",[0,1]),wr($f,"depthMask",!0),wr(Cc,Cc,[!0,!0,!0,!0]),We(Ne,yl),wr(Iu,"cullFace",$u),wr(Ds,Ds,Uc),wr(qf,qf,1),We(cl,Zl),wr(ll,"polygonOffset",[0,0]),We(Ns,$l),We(hl,Nc),wr(Ou,"sampleCoverage",[1,!1]),We(pf,Kl),wr(Tc,"stencilMask",-1),wr(Ic,"stencilFunc",[Sf,0,-1]),wr(po,"stencilOpSeparate",[yu,ru,ru,ru]),wr(Lu,"stencilOpSeparate",[$u,ru,ru,ru]),We(Oc,xl),wr(Qf,"scissor",[0,0,mt.drawingBufferWidth,mt.drawingBufferHeight]),wr(du,du,[0,0,mt.drawingBufferWidth,mt.drawingBufferHeight]);var $e={gl:mt,context:v,strings:qt,next:Mt,current:bt,draw:nn,elements:lr,buffer:Lr,shader:Gr,attributes:$r.state,vao:$r,uniforms:Vr,framebuffer:Yr,extensions:Ee,timer:T,isBufferArgs:Xc},tr={primTypes:Xi,compareFuncs:Mf,blendFuncs:Ho,blendEquations:ot,stencilOps:mu,glTypes:Oo,orientationType:Sl};Ct.optional(function(){$e.isArrayLike=ci}),gt&&(tr.backBuffer=[$u],tr.drawBuffer=Cn(cr.maxDrawbuffers,function(le){return le===0?[0]:Cn(le,function(Ht){return xh+Ht})}));var Je=0;function jr(){var le=Ys(),Ht=le.link,ke=le.global;le.id=Je++,le.batchId="0";var rr=Ht($e),ar=le.shared={props:"a0"};Object.keys($e).forEach(function(Le){ar[Le]=ke.def(rr,".",Le)}),Ct.optional(function(){le.CHECK=Ht(Ct),le.commandStr=Ct.guessCommand(),le.command=Ht(le.commandStr),le.assert=function(Le,oe,qe){Le("if(!(",oe,"))",this.CHECK,".commandRaise(",Ht(qe),",",this.command,");")},tr.invalidBlendCombinations=th});var Fe=le.next={},Re=le.current={};Object.keys(Zt).forEach(function(Le){Array.isArray(bt[Le])&&(Fe[Le]=ke.def(ar.next,".",Le),Re[Le]=ke.def(ar.current,".",Le))});var Ve=le.constants={};Object.keys(tr).forEach(function(Le){Ve[Le]=ke.def(JSON.stringify(tr[Le]))}),le.invoke=function(Le,oe){switch(oe.type){case nl:var qe=["this",ar.context,ar.props,le.batchId];return Le.def(Ht(oe.data),".call(",qe.slice(0,Math.max(oe.data.length+1,4)),")");case al:return Le.def(ar.props,oe.data);case il:return Le.def(ar.context,oe.data);case Ac:return Le.def("this",oe.data);case Kf:return oe.data.append(le,Le),oe.data.ref;case zl:return oe.data.toString();case Ul:return oe.data.map(function(or){return le.invoke(Le,or)})}},le.attribCache={};var ce={};return le.scopeAttrib=function(Le){var oe=qt.id(Le);if(oe in ce)return ce[oe];var qe=$r.scope[oe];qe||(qe=$r.scope[oe]=new Z);var or=ce[oe]=Ht(qe);return or},le}function hn(le){var Ht=le.static,ke=le.dynamic,rr;if(yf in Ht){var ar=!!Ht[yf];rr=qi(function(Re,Ve){return ar}),rr.enable=ar}else if(yf in ke){var Fe=ke[yf];rr=Ro(Fe,function(Re,Ve){return Re.invoke(Ve,Fe)})}return rr}function tn(le,Ht){var ke=le.static,rr=le.dynamic;if(Du in ke){var ar=ke[Du];return ar?(ar=Yr.getFramebuffer(ar),Ct.command(ar,"invalid framebuffer object"),qi(function(Re,Ve){var ce=Re.link(ar),Le=Re.shared;Ve.set(Le.framebuffer,".next",ce);var oe=Le.context;return Ve.set(oe,"."+Ef,ce+".width"),Ve.set(oe,"."+hs,ce+".height"),ce})):qi(function(Re,Ve){var ce=Re.shared;Ve.set(ce.framebuffer,".next","null");var Le=ce.context;return Ve.set(Le,"."+Ef,Le+"."+dl),Ve.set(Le,"."+hs,Le+"."+wf),"null"})}else if(Du in rr){var Fe=rr[Du];return Ro(Fe,function(Re,Ve){var ce=Re.invoke(Ve,Fe),Le=Re.shared,oe=Le.framebuffer,qe=Ve.def(oe,".getFramebuffer(",ce,")");Ct.optional(function(){Re.assert(Ve,"!"+ce+"||"+qe,"invalid framebuffer object")}),Ve.set(oe,".next",qe);var or=Le.context;return Ve.set(or,"."+Ef,qe+"?"+qe+".width:"+or+"."+dl),Ve.set(or,"."+hs,qe+"?"+qe+".height:"+or+"."+wf),qe})}else return null}function kn(le,Ht,ke){var rr=le.static,ar=le.dynamic;function Fe(ce){if(ce in rr){var Le=rr[ce];Ct.commandType(Le,"object","invalid "+ce,ke.commandStr);var oe=!0,qe=Le.x|0,or=Le.y|0,Ir,kr;return"width"in Le?(Ir=Le.width|0,Ct.command(Ir>=0,"invalid "+ce,ke.commandStr)):oe=!1,"height"in Le?(kr=Le.height|0,Ct.command(kr>=0,"invalid "+ce,ke.commandStr)):oe=!1,new rs(!oe&&Ht&&Ht.thisDep,!oe&&Ht&&Ht.contextDep,!oe&&Ht&&Ht.propDep,function(Xn,Sa){var On=Xn.shared.context,Qn=Ir;"width"in Le||(Qn=Sa.def(On,".",Ef,"-",qe));var ma=kr;return"height"in Le||(ma=Sa.def(On,".",hs,"-",or)),[qe,or,Qn,ma]})}else if(ce in ar){var _r=ar[ce],Qr=Ro(_r,function(Xn,Sa){var On=Xn.invoke(Sa,_r);Ct.optional(function(){Xn.assert(Sa,On+"&&typeof "+On+'==="object"',"invalid "+ce)});var Qn=Xn.shared.context,ma=Sa.def(On,".x|0"),Ra=Sa.def(On,".y|0"),Gi=Sa.def('"width" in ',On,"?",On,".width|0:","(",Qn,".",Ef,"-",ma,")"),ws=Sa.def('"height" in ',On,"?",On,".height|0:","(",Qn,".",hs,"-",Ra,")");return Ct.optional(function(){Xn.assert(Sa,Gi+">=0&&"+ws+">=0","invalid "+ce)}),[ma,Ra,Gi,ws]});return Ht&&(Qr.thisDep=Qr.thisDep||Ht.thisDep,Qr.contextDep=Qr.contextDep||Ht.contextDep,Qr.propDep=Qr.propDep||Ht.propDep),Qr}else return Ht?new rs(Ht.thisDep,Ht.contextDep,Ht.propDep,function(Xn,Sa){var On=Xn.shared.context;return[0,0,Sa.def(On,".",Ef),Sa.def(On,".",hs)]}):null}var Re=Fe(du);if(Re){var Ve=Re;Re=new rs(Re.thisDep,Re.contextDep,Re.propDep,function(ce,Le){var oe=Ve.append(ce,Le),qe=ce.shared.context;return Le.set(qe,"."+ec,oe[2]),Le.set(qe,"."+Wl,oe[3]),oe})}return{viewport:Re,scissor_box:Fe(Qf)}}function In(le,Ht){var ke=le.static,rr=typeof ke[Hu]=="string"&&typeof ke[gu]=="string";if(rr){if(Object.keys(Ht.dynamic).length>0)return null;var ar=Ht.static,Fe=Object.keys(ar);if(Fe.length>0&&typeof ar[Fe[0]]=="number"){for(var Re=[],Ve=0;Ve<Fe.length;++Ve)Ct(typeof ar[Fe[Ve]]=="number","must specify all vertex attribute locations when using vaos"),Re.push([ar[Fe[Ve]]|0,Fe[Ve]]);return Re}}return null}function Kn(le,Ht,ke){var rr=le.static,ar=le.dynamic;function Fe(oe){if(oe in rr){var qe=qt.id(rr[oe]);Ct.optional(function(){Gr.shader(eh[oe],qe,Ct.guessCommand())});var or=qi(function(){return qe});return or.id=qe,or}else if(oe in ar){var Ir=ar[oe];return Ro(Ir,function(kr,_r){var Qr=kr.invoke(_r,Ir),Xn=_r.def(kr.shared.strings,".id(",Qr,")");return Ct.optional(function(){_r(kr.shared.shader,".shader(",eh[oe],",",Xn,",",kr.command,");")}),Xn})}return null}var Re=Fe(Hu),Ve=Fe(gu),ce=null,Le;return xu(Re)&&xu(Ve)?(ce=Gr.program(Ve.id,Re.id,null,ke),Le=qi(function(oe,qe){return oe.link(ce)})):Le=new rs(Re&&Re.thisDep||Ve&&Ve.thisDep,Re&&Re.contextDep||Ve&&Ve.contextDep,Re&&Re.propDep||Ve&&Ve.propDep,function(oe,qe){var or=oe.shared.shader,Ir;Re?Ir=Re.append(oe,qe):Ir=qe.def(or,".",Hu);var kr;Ve?kr=Ve.append(oe,qe):kr=qe.def(or,".",gu);var _r=or+".program("+kr+","+Ir;return Ct.optional(function(){_r+=","+oe.command}),qe.def(_r+")")}),{frag:Re,vert:Ve,progVar:Le,program:ce}}function ca(le,Ht){var ke=le.static,rr=le.dynamic;function ar(){if(mf in ke){var oe=ke[mf];Xc(oe)?oe=lr.getElements(lr.create(oe,!0)):oe&&(oe=lr.getElements(oe),Ct.command(oe,"invalid elements",Ht.commandStr));var qe=qi(function(Ir,kr){if(oe){var _r=Ir.link(oe);return Ir.ELEMENTS=_r,_r}return Ir.ELEMENTS=null,null});return qe.value=oe,qe}else if(mf in rr){var or=rr[mf];return Ro(or,function(Ir,kr){var _r=Ir.shared,Qr=_r.isBufferArgs,Xn=_r.elements,Sa=Ir.invoke(kr,or),On=kr.def("null"),Qn=kr.def(Qr,"(",Sa,")"),ma=Ir.cond(Qn).then(On,"=",Xn,".createStream(",Sa,");").else(On,"=",Xn,".getElements(",Sa,");");return Ct.optional(function(){Ir.assert(ma.else,"!"+Sa+"||"+On,"invalid elements")}),kr.entry(ma),kr.exit(Ir.cond(Qn).then(Xn,".destroyStream(",On,");")),Ir.ELEMENTS=On,On})}return null}var Fe=ar();function Re(){if(xf in ke){var oe=ke[xf];return Ct.commandParameter(oe,Xi,"invalid primitve",Ht.commandStr),qi(function(or,Ir){return Xi[oe]})}else if(xf in rr){var qe=rr[xf];return Ro(qe,function(or,Ir){var kr=or.constants.primTypes,_r=or.invoke(Ir,qe);return Ct.optional(function(){or.assert(Ir,_r+" in "+kr,"invalid primitive, must be one of "+Object.keys(Xi))}),Ir.def(kr,"[",_r,"]")})}else if(Fe)return xu(Fe)?Fe.value?qi(function(or,Ir){return Ir.def(or.ELEMENTS,".primType")}):qi(function(){return ql}):new rs(Fe.thisDep,Fe.contextDep,Fe.propDep,function(or,Ir){var kr=or.ELEMENTS;return Ir.def(kr,"?",kr,".primType:",ql)});return null}function Ve(oe,qe){if(oe in ke){var or=ke[oe]|0;return Ct.command(!qe||or>=0,"invalid "+oe,Ht.commandStr),qi(function(kr,_r){return qe&&(kr.OFFSET=or),or})}else if(oe in rr){var Ir=rr[oe];return Ro(Ir,function(kr,_r){var Qr=kr.invoke(_r,Ir);return qe&&(kr.OFFSET=Qr,Ct.optional(function(){kr.assert(_r,Qr+">=0","invalid "+oe)})),Qr})}else if(qe&&Fe)return qi(function(kr,_r){return kr.OFFSET="0",0});return null}var ce=Ve(Jf,!0);function Le(){if(Nu in ke){var oe=ke[Nu]|0;return Ct.command(typeof oe=="number"&&oe>=0,"invalid vertex count",Ht.commandStr),qi(function(){return oe})}else if(Nu in rr){var qe=rr[Nu];return Ro(qe,function(kr,_r){var Qr=kr.invoke(_r,qe);return Ct.optional(function(){kr.assert(_r,"typeof "+Qr+'==="number"&&'+Qr+">=0&&"+Qr+"===("+Qr+"|0)","invalid vertex count")}),Qr})}else if(Fe)if(xu(Fe)){if(Fe)return ce?new rs(ce.thisDep,ce.contextDep,ce.propDep,function(kr,_r){var Qr=_r.def(kr.ELEMENTS,".vertCount-",kr.OFFSET);return Ct.optional(function(){kr.assert(_r,Qr+">=0","invalid vertex offset/element buffer too small")}),Qr}):qi(function(kr,_r){return _r.def(kr.ELEMENTS,".vertCount")});var or=qi(function(){return-1});return Ct.optional(function(){or.MISSING=!0}),or}else{var Ir=new rs(Fe.thisDep||ce.thisDep,Fe.contextDep||ce.contextDep,Fe.propDep||ce.propDep,function(kr,_r){var Qr=kr.ELEMENTS;return kr.OFFSET?_r.def(Qr,"?",Qr,".vertCount-",kr.OFFSET,":-1"):_r.def(Qr,"?",Qr,".vertCount:-1")});return Ct.optional(function(){Ir.DYNAMIC=!0}),Ir}return null}return{elements:Fe,primitive:Re(),count:Le(),instances:Ve(Lc,!1),offset:ce}}function ea(le,Ht){var ke=le.static,rr=le.dynamic,ar={};return Gt.forEach(function(Fe){var Re=ye(Fe);function Ve(ce,Le){if(Fe in ke){var oe=ce(ke[Fe]);ar[Re]=qi(function(){return oe})}else if(Fe in rr){var qe=rr[Fe];ar[Re]=Ro(qe,function(or,Ir){return Le(or,Ir,or.invoke(Ir,qe))})}}switch(Fe){case Ne:case df:case ol:case pf:case Zf:case Oc:case cl:case Ns:case hl:case $f:return Ve(function(ce){return Ct.commandType(ce,"boolean",Fe,Ht.commandStr),ce},function(ce,Le,oe){return Ct.optional(function(){ce.assert(Le,"typeof "+oe+'==="boolean"',"invalid flag "+Fe,ce.commandStr)}),oe});case es:return Ve(function(ce){return Ct.commandParameter(ce,Mf,"invalid "+Fe,Ht.commandStr),Mf[ce]},function(ce,Le,oe){var qe=ce.constants.compareFuncs;return Ct.optional(function(){ce.assert(Le,oe+" in "+qe,"invalid "+Fe+", must be one of "+Object.keys(Mf))}),Le.def(qe,"[",oe,"]")});case fl:return Ve(function(ce){return Ct.command(ci(ce)&&ce.length===2&&typeof ce[0]=="number"&&typeof ce[1]=="number"&&ce[0]<=ce[1],"depth range is 2d array",Ht.commandStr),ce},function(ce,Le,oe){Ct.optional(function(){ce.assert(Le,ce.shared.isArrayLike+"("+oe+")&&"+oe+".length===2&&typeof "+oe+'[0]==="number"&&typeof '+oe+'[1]==="number"&&'+oe+"[0]<="+oe+"[1]","depth range must be a 2d array")});var qe=Le.def("+",oe,"[0]"),or=Le.def("+",oe,"[1]");return[qe,or]});case ul:return Ve(function(ce){Ct.commandType(ce,"object","blend.func",Ht.commandStr);var Le="srcRGB"in ce?ce.srcRGB:ce.src,oe="srcAlpha"in ce?ce.srcAlpha:ce.src,qe="dstRGB"in ce?ce.dstRGB:ce.dst,or="dstAlpha"in ce?ce.dstAlpha:ce.dst;return Ct.commandParameter(Le,Ho,Re+".srcRGB",Ht.commandStr),Ct.commandParameter(oe,Ho,Re+".srcAlpha",Ht.commandStr),Ct.commandParameter(qe,Ho,Re+".dstRGB",Ht.commandStr),Ct.commandParameter(or,Ho,Re+".dstAlpha",Ht.commandStr),Ct.command(th.indexOf(Le+", "+qe)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+Le+", "+qe+")",Ht.commandStr),[Ho[Le],Ho[qe],Ho[oe],Ho[or]]},function(ce,Le,oe){var qe=ce.constants.blendFuncs;Ct.optional(function(){ce.assert(Le,oe+"&&typeof "+oe+'==="object"',"invalid blend func, must be an object")});function or(On,Qn){var ma=Le.def('"',On,Qn,'" in ',oe,"?",oe,".",On,Qn,":",oe,".",On);return Ct.optional(function(){ce.assert(Le,ma+" in "+qe,"invalid "+Fe+"."+On+Qn+", must be one of "+Object.keys(Ho))}),ma}var Ir=or("src","RGB"),kr=or("dst","RGB");Ct.optional(function(){var On=ce.constants.invalidBlendCombinations;ce.assert(Le,On+".indexOf("+Ir+'+", "+'+kr+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var _r=Le.def(qe,"[",Ir,"]"),Qr=Le.def(qe,"[",or("src","Alpha"),"]"),Xn=Le.def(qe,"[",kr,"]"),Sa=Le.def(qe,"[",or("dst","Alpha"),"]");return[_r,Xn,Qr,Sa]});case gf:return Ve(function(ce){if(typeof ce=="string")return Ct.commandParameter(ce,ot,"invalid "+Fe,Ht.commandStr),[ot[ce],ot[ce]];if(typeof ce=="object")return Ct.commandParameter(ce.rgb,ot,Fe+".rgb",Ht.commandStr),Ct.commandParameter(ce.alpha,ot,Fe+".alpha",Ht.commandStr),[ot[ce.rgb],ot[ce.alpha]];Ct.commandRaise("invalid blend.equation",Ht.commandStr)},function(ce,Le,oe){var qe=ce.constants.blendEquations,or=Le.def(),Ir=Le.def(),kr=ce.cond("typeof ",oe,'==="string"');return Ct.optional(function(){function _r(Qr,Xn,Sa){ce.assert(Qr,Sa+" in "+qe,"invalid "+Xn+", must be one of "+Object.keys(ot))}_r(kr.then,Fe,oe),ce.assert(kr.else,oe+"&&typeof "+oe+'==="object"',"invalid "+Fe),_r(kr.else,Fe+".rgb",oe+".rgb"),_r(kr.else,Fe+".alpha",oe+".alpha")}),kr.then(or,"=",Ir,"=",qe,"[",oe,"];"),kr.else(or,"=",qe,"[",oe,".rgb];",Ir,"=",qe,"[",oe,".alpha];"),Le(kr),[or,Ir]});case sl:return Ve(function(ce){return Ct.command(ci(ce)&&ce.length===4,"blend.color must be a 4d array",Ht.commandStr),Cn(4,function(Le){return+ce[Le]})},function(ce,Le,oe){return Ct.optional(function(){ce.assert(Le,ce.shared.isArrayLike+"("+oe+")&&"+oe+".length===4","blend.color must be a 4d array")}),Cn(4,function(qe){return Le.def("+",oe,"[",qe,"]")})});case Tc:return Ve(function(ce){return Ct.commandType(ce,"number",Re,Ht.commandStr),ce|0},function(ce,Le,oe){return Ct.optional(function(){ce.assert(Le,"typeof "+oe+'==="number"',"invalid stencil.mask")}),Le.def(oe,"|0")});case Ic:return Ve(function(ce){Ct.commandType(ce,"object",Re,Ht.commandStr);var Le=ce.cmp||"keep",oe=ce.ref||0,qe="mask"in ce?ce.mask:-1;return Ct.commandParameter(Le,Mf,Fe+".cmp",Ht.commandStr),Ct.commandType(oe,"number",Fe+".ref",Ht.commandStr),Ct.commandType(qe,"number",Fe+".mask",Ht.commandStr),[Mf[Le],oe,qe]},function(ce,Le,oe){var qe=ce.constants.compareFuncs;Ct.optional(function(){function _r(){ce.assert(Le,Array.prototype.join.call(arguments,""),"invalid stencil.func")}_r(oe+"&&typeof ",oe,'==="object"'),_r('!("cmp" in ',oe,")||(",oe,".cmp in ",qe,")")});var or=Le.def('"cmp" in ',oe,"?",qe,"[",oe,".cmp]",":",ru),Ir=Le.def(oe,".ref|0"),kr=Le.def('"mask" in ',oe,"?",oe,".mask|0:-1");return[or,Ir,kr]});case po:case Lu:return Ve(function(ce){Ct.commandType(ce,"object",Re,Ht.commandStr);var Le=ce.fail||"keep",oe=ce.zfail||"keep",qe=ce.zpass||"keep";return Ct.commandParameter(Le,mu,Fe+".fail",Ht.commandStr),Ct.commandParameter(oe,mu,Fe+".zfail",Ht.commandStr),Ct.commandParameter(qe,mu,Fe+".zpass",Ht.commandStr),[Fe===Lu?$u:yu,mu[Le],mu[oe],mu[qe]]},function(ce,Le,oe){var qe=ce.constants.stencilOps;Ct.optional(function(){ce.assert(Le,oe+"&&typeof "+oe+'==="object"',"invalid "+Fe)});function or(Ir){return Ct.optional(function(){ce.assert(Le,'!("'+Ir+'" in '+oe+")||("+oe+"."+Ir+" in "+qe+")","invalid "+Fe+"."+Ir+", must be one of "+Object.keys(mu))}),Le.def('"',Ir,'" in ',oe,"?",qe,"[",oe,".",Ir,"]:",ru)}return[Fe===Lu?$u:yu,or("fail"),or("zfail"),or("zpass")]});case ll:return Ve(function(ce){Ct.commandType(ce,"object",Re,Ht.commandStr);var Le=ce.factor|0,oe=ce.units|0;return Ct.commandType(Le,"number",Re+".factor",Ht.commandStr),Ct.commandType(oe,"number",Re+".units",Ht.commandStr),[Le,oe]},function(ce,Le,oe){Ct.optional(function(){ce.assert(Le,oe+"&&typeof "+oe+'==="object"',"invalid "+Fe)});var qe=Le.def(oe,".factor|0"),or=Le.def(oe,".units|0");return[qe,or]});case Iu:return Ve(function(ce){var Le=0;return ce==="front"?Le=yu:ce==="back"&&(Le=$u),Ct.command(!!Le,Re,Ht.commandStr),Le},function(ce,Le,oe){return Ct.optional(function(){ce.assert(Le,oe+'==="front"||'+oe+'==="back"',"invalid cull.face")}),Le.def(oe,'==="front"?',yu,":",$u)});case qf:return Ve(function(ce){return Ct.command(typeof ce=="number"&&ce>=cr.lineWidthDims[0]&&ce<=cr.lineWidthDims[1],"invalid line width, must be a positive number between "+cr.lineWidthDims[0]+" and "+cr.lineWidthDims[1],Ht.commandStr),ce},function(ce,Le,oe){return Ct.optional(function(){ce.assert(Le,"typeof "+oe+'==="number"&&'+oe+">="+cr.lineWidthDims[0]+"&&"+oe+"<="+cr.lineWidthDims[1],"invalid line width")}),oe});case Ds:return Ve(function(ce){return Ct.commandParameter(ce,Sl,Re,Ht.commandStr),Sl[ce]},function(ce,Le,oe){return Ct.optional(function(){ce.assert(Le,oe+'==="cw"||'+oe+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),Le.def(oe+'==="cw"?'+zc+":"+Uc)});case Cc:return Ve(function(ce){return Ct.command(ci(ce)&&ce.length===4,"color.mask must be length 4 array",Ht.commandStr),ce.map(function(Le){return!!Le})},function(ce,Le,oe){return Ct.optional(function(){ce.assert(Le,ce.shared.isArrayLike+"("+oe+")&&"+oe+".length===4","invalid color.mask")}),Cn(4,function(qe){return"!!"+oe+"["+qe+"]"})});case Ou:return Ve(function(ce){Ct.command(typeof ce=="object"&&ce,Re,Ht.commandStr);var Le="value"in ce?ce.value:1,oe=!!ce.invert;return Ct.command(typeof Le=="number"&&Le>=0&&Le<=1,"sample.coverage.value must be a number between 0 and 1",Ht.commandStr),[Le,oe]},function(ce,Le,oe){Ct.optional(function(){ce.assert(Le,oe+"&&typeof "+oe+'==="object"',"invalid sample.coverage")});var qe=Le.def('"value" in ',oe,"?+",oe,".value:1"),or=Le.def("!!",oe,".invert");return[qe,or]})}}),ar}function mi(le,Ht){var ke=le.static,rr=le.dynamic,ar={};return Object.keys(ke).forEach(function(Fe){var Re=ke[Fe],Ve;if(typeof Re=="number"||typeof Re=="boolean")Ve=qi(function(){return Re});else if(typeof Re=="function"){var ce=Re._reglType;ce==="texture2d"||ce==="textureCube"?Ve=qi(function(Le){return Le.link(Re)}):ce==="framebuffer"||ce==="framebufferCube"?(Ct.command(Re.color.length>0,'missing color attachment for framebuffer sent to uniform "'+Fe+'"',Ht.commandStr),Ve=qi(function(Le){return Le.link(Re.color[0])})):Ct.commandRaise('invalid data for uniform "'+Fe+'"',Ht.commandStr)}else ci(Re)?Ve=qi(function(Le){var oe=Le.global.def("[",Cn(Re.length,function(qe){return Ct.command(typeof Re[qe]=="number"||typeof Re[qe]=="boolean","invalid uniform "+Fe,Le.commandStr),Re[qe]}),"]");return oe}):Ct.commandRaise('invalid or missing data for uniform "'+Fe+'"',Ht.commandStr);Ve.value=Re,ar[Fe]=Ve}),Object.keys(rr).forEach(function(Fe){var Re=rr[Fe];ar[Fe]=Ro(Re,function(Ve,ce){return Ve.invoke(ce,Re)})}),ar}function va(le,Ht){var ke=le.static,rr=le.dynamic,ar={};return Object.keys(ke).forEach(function(Fe){var Re=ke[Fe],Ve=qt.id(Fe),ce=new Z;if(Xc(Re))ce.state=vf,ce.buffer=Lr.getBuffer(Lr.create(Re,Ku,!1,!0)),ce.type=0;else{var Le=Lr.getBuffer(Re);if(Le)ce.state=vf,ce.buffer=Le,ce.type=0;else if(Ct.command(typeof Re=="object"&&Re,"invalid data for attribute "+Fe,Ht.commandStr),"constant"in Re){var oe=Re.constant;ce.buffer="null",ce.state=rl,typeof oe=="number"?ce.x=oe:(Ct.command(ci(oe)&&oe.length>0&&oe.length<=4,"invalid constant for attribute "+Fe,Ht.commandStr),hf.forEach(function(Xn,Sa){Sa<oe.length&&(ce[Xn]=oe[Sa])}))}else{Xc(Re.buffer)?Le=Lr.getBuffer(Lr.create(Re.buffer,Ku,!1,!0)):Le=Lr.getBuffer(Re.buffer),Ct.command(!!Le,'missing buffer for attribute "'+Fe+'"',Ht.commandStr);var qe=Re.offset|0;Ct.command(qe>=0,'invalid offset for attribute "'+Fe+'"',Ht.commandStr);var or=Re.stride|0;Ct.command(or>=0&&or<256,'invalid stride for attribute "'+Fe+'", must be integer betweeen [0, 255]',Ht.commandStr);var Ir=Re.size|0;Ct.command(!("size"in Re)||Ir>0&&Ir<=4,'invalid size for attribute "'+Fe+'", must be 1,2,3,4',Ht.commandStr);var kr=!!Re.normalized,_r=0;"type"in Re&&(Ct.commandParameter(Re.type,Oo,"invalid type for attribute "+Fe,Ht.commandStr),_r=Oo[Re.type]);var Qr=Re.divisor|0;"divisor"in Re&&(Ct.command(Qr===0||ct,'cannot specify divisor for attribute "'+Fe+'", instancing not supported',Ht.commandStr),Ct.command(Qr>=0,'invalid divisor for attribute "'+Fe+'"',Ht.commandStr)),Ct.optional(function(){var Xn=Ht.commandStr,Sa=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(Re).forEach(function(On){Ct.command(Sa.indexOf(On)>=0,'unknown parameter "'+On+'" for attribute pointer "'+Fe+'" (valid parameters are '+Sa+")",Xn)})}),ce.buffer=Le,ce.state=vf,ce.size=Ir,ce.normalized=kr,ce.type=_r||Le.dtype,ce.offset=qe,ce.stride=or,ce.divisor=Qr}}ar[Fe]=qi(function(Xn,Sa){var On=Xn.attribCache;if(Ve in On)return On[Ve];var Qn={isStream:!1};return Object.keys(ce).forEach(function(ma){Qn[ma]=ce[ma]}),ce.buffer&&(Qn.buffer=Xn.link(ce.buffer),Qn.type=Qn.type||Qn.buffer+".dtype"),On[Ve]=Qn,Qn})}),Object.keys(rr).forEach(function(Fe){var Re=rr[Fe];function Ve(ce,Le){var oe=ce.invoke(Le,Re),qe=ce.shared,or=ce.constants,Ir=qe.isBufferArgs,kr=qe.buffer;Ct.optional(function(){ce.assert(Le,oe+"&&(typeof "+oe+'==="object"||typeof '+oe+'==="function")&&('+Ir+"("+oe+")||"+kr+".getBuffer("+oe+")||"+kr+".getBuffer("+oe+".buffer)||"+Ir+"("+oe+'.buffer)||("constant" in '+oe+"&&(typeof "+oe+'.constant==="number"||'+qe.isArrayLike+"("+oe+".constant))))",'invalid dynamic attribute "'+Fe+'"')});var _r={isStream:Le.def(!1)},Qr=new Z;Qr.state=vf,Object.keys(Qr).forEach(function(Qn){_r[Qn]=Le.def(""+Qr[Qn])});var Xn=_r.buffer,Sa=_r.type;Le("if(",Ir,"(",oe,")){",_r.isStream,"=true;",Xn,"=",kr,".createStream(",Ku,",",oe,");",Sa,"=",Xn,".dtype;","}else{",Xn,"=",kr,".getBuffer(",oe,");","if(",Xn,"){",Sa,"=",Xn,".dtype;",'}else if("constant" in ',oe,"){",_r.state,"=",rl,";","if(typeof "+oe+'.constant === "number"){',_r[hf[0]],"=",oe,".constant;",hf.slice(1).map(function(Qn){return _r[Qn]}).join("="),"=0;","}else{",hf.map(function(Qn,ma){return _r[Qn]+"="+oe+".constant.length>"+ma+"?"+oe+".constant["+ma+"]:0;"}).join(""),"}}else{","if(",Ir,"(",oe,".buffer)){",Xn,"=",kr,".createStream(",Ku,",",oe,".buffer);","}else{",Xn,"=",kr,".getBuffer(",oe,".buffer);","}",Sa,'="type" in ',oe,"?",or.glTypes,"[",oe,".type]:",Xn,".dtype;",_r.normalized,"=!!",oe,".normalized;");function On(Qn){Le(_r[Qn],"=",oe,".",Qn,"|0;")}return On("size"),On("offset"),On("stride"),On("divisor"),Le("}}"),Le.exit("if(",_r.isStream,"){",kr,".destroyStream(",Xn,");","}"),_r}ar[Fe]=Ro(Re,Ve)}),ar}function Si(le,Ht){var ke=le.static,rr=le.dynamic;if(bf in ke){var ar=ke[bf];return ar!==null&&$r.getVAO(ar)===null&&(ar=$r.createVAO(ar)),qi(function(Re){return Re.link($r.getVAO(ar))})}else if(bf in rr){var Fe=rr[bf];return Ro(Fe,function(Re,Ve){var ce=Re.invoke(Ve,Fe);return Ve.def(Re.shared.vao+".getVAO("+ce+")")})}return null}function di(le){var Ht=le.static,ke=le.dynamic,rr={};return Object.keys(Ht).forEach(function(ar){var Fe=Ht[ar];rr[ar]=qi(function(Re,Ve){return typeof Fe=="number"||typeof Fe=="boolean"?""+Fe:Re.link(Fe)})}),Object.keys(ke).forEach(function(ar){var Fe=ke[ar];rr[ar]=Ro(Fe,function(Re,Ve){return Re.invoke(Ve,Fe)})}),rr}function Pa(le,Ht,ke,rr,ar){var Fe=le.static,Re=le.dynamic;Ct.optional(function(){var On=[Du,gu,Hu,mf,xf,Jf,Nu,Lc,yf,bf].concat(Gt);function Qn(ma){Object.keys(ma).forEach(function(Ra){Ct.command(On.indexOf(Ra)>=0,'unknown parameter "'+Ra+'"',ar.commandStr)})}Qn(Fe),Qn(Re)});var Ve=In(le,Ht),ce=tn(le,ar),Le=kn(le,ce,ar),oe=ca(le,ar),qe=ea(le,ar),or=Kn(le,ar,Ve);function Ir(On){var Qn=Le[On];Qn&&(qe[On]=Qn)}Ir(du),Ir(ye(Qf));var kr=Object.keys(qe).length>0,_r={framebuffer:ce,draw:oe,shader:or,state:qe,dirty:kr,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(_r.profile=hn(le,ar),_r.uniforms=mi(ke,ar),_r.drawVAO=_r.scopeVAO=Si(le,ar),!_r.drawVAO&&or.program&&!Ve&&Ee.angle_instanced_arrays){var Qr=!0,Xn=or.program.attributes.map(function(On){var Qn=Ht.static[On];return Qr=Qr&&!!Qn,Qn});if(Qr&&Xn.length>0){var Sa=$r.getVAO($r.createVAO(Xn));_r.drawVAO=new rs(null,null,null,function(On,Qn){return On.link(Sa)}),_r.useVAO=!0}}return Ve?_r.useVAO=!0:_r.attributes=va(Ht,ar),_r.context=di(rr,ar),_r}function Mi(le,Ht,ke){var rr=le.shared,ar=rr.context,Fe=le.scope();Object.keys(ke).forEach(function(Re){Ht.save(ar,"."+Re);var Ve=ke[Re],ce=Ve.append(le,Ht);Array.isArray(ce)?Fe(ar,".",Re,"=[",ce.join(),"];"):Fe(ar,".",Re,"=",ce,";")}),Ht(Fe)}function Fi(le,Ht,ke,rr){var ar=le.shared,Fe=ar.gl,Re=ar.framebuffer,Ve;gt&&(Ve=Ht.def(ar.extensions,".webgl_draw_buffers"));var ce=le.constants,Le=ce.drawBuffer,oe=ce.backBuffer,qe;ke?qe=ke.append(le,Ht):qe=Ht.def(Re,".next"),rr||Ht("if(",qe,"!==",Re,".cur){"),Ht("if(",qe,"){",Fe,".bindFramebuffer(",_l,",",qe,".framebuffer);"),gt&&Ht(Ve,".drawBuffersWEBGL(",Le,"[",qe,".colorAttachments.length]);"),Ht("}else{",Fe,".bindFramebuffer(",_l,",null);"),gt&&Ht(Ve,".drawBuffersWEBGL(",oe,");"),Ht("}",Re,".cur=",qe,";"),rr||Ht("}")}function yo(le,Ht,ke){var rr=le.shared,ar=rr.gl,Fe=le.current,Re=le.next,Ve=rr.current,ce=rr.next,Le=le.cond(Ve,".dirty");Gt.forEach(function(oe){var qe=ye(oe);if(!(qe in ke.state)){var or,Ir;if(qe in Re){or=Re[qe],Ir=Fe[qe];var kr=Cn(bt[qe].length,function(Qr){return Le.def(or,"[",Qr,"]")});Le(le.cond(kr.map(function(Qr,Xn){return Qr+"!=="+Ir+"["+Xn+"]"}).join("||")).then(ar,".",Zt[qe],"(",kr,");",kr.map(function(Qr,Xn){return Ir+"["+Xn+"]="+Qr}).join(";"),";"))}else{or=Le.def(ce,".",qe);var _r=le.cond(or,"!==",Ve,".",qe);Le(_r),qe in te?_r(le.cond(or).then(ar,".enable(",te[qe],");").else(ar,".disable(",te[qe],");"),Ve,".",qe,"=",or,";"):_r(ar,".",Zt[qe],"(",or,");",Ve,".",qe,"=",or,";")}}}),Object.keys(ke.state).length===0&&Le(Ve,".dirty=false;"),Ht(Le)}function Ao(le,Ht,ke,rr){var ar=le.shared,Fe=le.current,Re=ar.current,Ve=ar.gl;rh(Object.keys(ke)).forEach(function(ce){var Le=ke[ce];if(!(rr&&!rr(Le))){var oe=Le.append(le,Ht);if(te[ce]){var qe=te[ce];xu(Le)?oe?Ht(Ve,".enable(",qe,");"):Ht(Ve,".disable(",qe,");"):Ht(le.cond(oe).then(Ve,".enable(",qe,");").else(Ve,".disable(",qe,");")),Ht(Re,".",ce,"=",oe,";")}else if(ci(oe)){var or=Fe[ce];Ht(Ve,".",Zt[ce],"(",oe,");",oe.map(function(Ir,kr){return or+"["+kr+"]="+Ir}).join(";"),";")}else Ht(Ve,".",Zt[ce],"(",oe,");",Re,".",ce,"=",oe,";")}})}function Qi(le,Ht){ct&&(le.instancing=Ht.def(le.shared.extensions,".angle_instanced_arrays"))}function _a(le,Ht,ke,rr,ar){var Fe=le.shared,Re=le.stats,Ve=Fe.current,ce=Fe.timer,Le=ke.profile;function oe(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}var qe,or;function Ir(On){qe=Ht.def(),On(qe,"=",oe(),";"),typeof ar=="string"?On(Re,".count+=",ar,";"):On(Re,".count++;"),T&&(rr?(or=Ht.def(),On(or,"=",ce,".getNumPendingQueries();")):On(ce,".beginQuery(",Re,");"))}function kr(On){On(Re,".cpuTime+=",oe(),"-",qe,";"),T&&(rr?On(ce,".pushScopeStats(",or,",",ce,".getNumPendingQueries(),",Re,");"):On(ce,".endQuery();"))}function _r(On){var Qn=Ht.def(Ve,".profile");Ht(Ve,".profile=",On,";"),Ht.exit(Ve,".profile=",Qn,";")}var Qr;if(Le){if(xu(Le)){Le.enable?(Ir(Ht),kr(Ht.exit),_r("true")):_r("false");return}Qr=Le.append(le,Ht),_r(Qr)}else Qr=Ht.def(Ve,".profile");var Xn=le.block();Ir(Xn),Ht("if(",Qr,"){",Xn,"}");var Sa=le.block();kr(Sa),Ht.exit("if(",Qr,"){",Sa,"}")}function Ko(le,Ht,ke,rr,ar){var Fe=le.shared;function Re(ce){switch(ce){case Pc:case Rc:case Bc:return 2;case kc:case nc:case Fc:return 3;case rc:case Zu:case Gc:return 4;default:return 1}}function Ve(ce,Le,oe){var qe=Fe.gl,or=Ht.def(ce,".location"),Ir=Ht.def(Fe.attributes,"[",or,"]"),kr=oe.state,_r=oe.buffer,Qr=[oe.x,oe.y,oe.z,oe.w],Xn=["buffer","normalized","offset","stride"];function Sa(){Ht("if(!",Ir,".buffer){",qe,".enableVertexAttribArray(",or,");}");var Qn=oe.type,ma;if(oe.size?ma=Ht.def(oe.size,"||",Le):ma=Le,Ht("if(",Ir,".type!==",Qn,"||",Ir,".size!==",ma,"||",Xn.map(function(Gi){return Ir+"."+Gi+"!=="+oe[Gi]}).join("||"),"){",qe,".bindBuffer(",Ku,",",_r,".buffer);",qe,".vertexAttribPointer(",[or,ma,Qn,oe.normalized,oe.stride,oe.offset],");",Ir,".type=",Qn,";",Ir,".size=",ma,";",Xn.map(function(Gi){return Ir+"."+Gi+"="+oe[Gi]+";"}).join(""),"}"),ct){var Ra=oe.divisor;Ht("if(",Ir,".divisor!==",Ra,"){",le.instancing,".vertexAttribDivisorANGLE(",[or,Ra],");",Ir,".divisor=",Ra,";}")}}function On(){Ht("if(",Ir,".buffer){",qe,".disableVertexAttribArray(",or,");",Ir,".buffer=null;","}if(",hf.map(function(Qn,ma){return Ir+"."+Qn+"!=="+Qr[ma]}).join("||"),"){",qe,".vertexAttrib4f(",or,",",Qr,");",hf.map(function(Qn,ma){return Ir+"."+Qn+"="+Qr[ma]+";"}).join(""),"}")}kr===vf?Sa():kr===rl?On():(Ht("if(",kr,"===",vf,"){"),Sa(),Ht("}else{"),On(),Ht("}"))}rr.forEach(function(ce){var Le=ce.name,oe=ke.attributes[Le],qe;if(oe){if(!ar(oe))return;qe=oe.append(le,Ht)}else{if(!ar(Ml))return;var or=le.scopeAttrib(Le);Ct.optional(function(){le.assert(Ht,or+".state","missing attribute "+Le)}),qe={},Object.keys(new Z).forEach(function(Ir){qe[Ir]=Ht.def(or,".",Ir)})}Ve(le.link(ce),Re(ce.info.type),qe)})}function ni(le,Ht,ke,rr,ar){for(var Fe=le.shared,Re=Fe.gl,Ve,ce=0;ce<rr.length;++ce){var Le=rr[ce],oe=Le.name,qe=Le.info.type,or=ke.uniforms[oe],Ir=le.link(Le),kr=Ir+".location",_r;if(or){if(!ar(or))continue;if(xu(or)){var Qr=or.value;if(Ct.command(Qr!==null&&typeof Qr!="undefined",'missing uniform "'+oe+'"',le.commandStr),qe===oc||qe===pu){Ct.command(typeof Qr=="function"&&(qe===oc&&(Qr._reglType==="texture2d"||Qr._reglType==="framebuffer")||qe===pu&&(Qr._reglType==="textureCube"||Qr._reglType==="framebufferCube")),"invalid texture for uniform "+oe,le.commandStr);var Xn=le.link(Qr._texture||Qr.color[0]._texture);Ht(Re,".uniform1i(",kr,",",Xn+".bind());"),Ht.exit(Xn,".unbind();")}else if(qe===ac||qe===ic||qe===_f){Ct.optional(function(){Ct.command(ci(Qr),"invalid matrix for uniform "+oe,le.commandStr),Ct.command(qe===ac&&Qr.length===4||qe===ic&&Qr.length===9||qe===_f&&Qr.length===16,"invalid length for matrix uniform "+oe,le.commandStr)});var Sa=le.global.def("new Float32Array(["+Array.prototype.slice.call(Qr)+"])"),On=2;qe===ic?On=3:qe===_f&&(On=4),Ht(Re,".uniformMatrix",On,"fv(",kr,",false,",Sa,");")}else{switch(qe){case Ps:Ct.commandType(Qr,"number","uniform "+oe,le.commandStr),Ve="1f";break;case Pc:Ct.command(ci(Qr)&&Qr.length===2,"uniform "+oe,le.commandStr),Ve="2f";break;case kc:Ct.command(ci(Qr)&&Qr.length===3,"uniform "+oe,le.commandStr),Ve="3f";break;case rc:Ct.command(ci(Qr)&&Qr.length===4,"uniform "+oe,le.commandStr),Ve="4f";break;case El:Ct.commandType(Qr,"boolean","uniform "+oe,le.commandStr),Ve="1i";break;case bl:Ct.commandType(Qr,"number","uniform "+oe,le.commandStr),Ve="1i";break;case Bc:Ct.command(ci(Qr)&&Qr.length===2,"uniform "+oe,le.commandStr),Ve="2i";break;case Rc:Ct.command(ci(Qr)&&Qr.length===2,"uniform "+oe,le.commandStr),Ve="2i";break;case Fc:Ct.command(ci(Qr)&&Qr.length===3,"uniform "+oe,le.commandStr),Ve="3i";break;case nc:Ct.command(ci(Qr)&&Qr.length===3,"uniform "+oe,le.commandStr),Ve="3i";break;case Gc:Ct.command(ci(Qr)&&Qr.length===4,"uniform "+oe,le.commandStr),Ve="4i";break;case Zu:Ct.command(ci(Qr)&&Qr.length===4,"uniform "+oe,le.commandStr),Ve="4i";break}Ht(Re,".uniform",Ve,"(",kr,",",ci(Qr)?Array.prototype.slice.call(Qr):Qr,");")}continue}else _r=or.append(le,Ht)}else{if(!ar(Ml))continue;_r=Ht.def(Fe.uniforms,"[",qt.id(oe),"]")}qe===oc?(Ct(!Array.isArray(_r),"must specify a scalar prop for textures"),Ht("if(",_r,"&&",_r,'._reglType==="framebuffer"){',_r,"=",_r,".color[0];","}")):qe===pu&&(Ct(!Array.isArray(_r),"must specify a scalar prop for cube maps"),Ht("if(",_r,"&&",_r,'._reglType==="framebufferCube"){',_r,"=",_r,".color[0];","}")),Ct.optional(function(){function ws(bu,kv){le.assert(Ht,bu,'bad data or missing for uniform "'+oe+'".  '+kv)}function fh(bu){Ct(!Array.isArray(_r),"must not specify an array type for uniform"),ws("typeof "+_r+'==="'+bu+'"',"invalid type, expected "+bu)}function js(bu,kv){Array.isArray(_r)?Ct(_r.length===bu,"must have length "+bu):ws(Fe.isArrayLike+"("+_r+")&&"+_r+".length==="+bu,"invalid vector, should have length "+bu,le.commandStr)}function jh(bu){Ct(!Array.isArray(_r),"must not specify a value type"),ws("typeof "+_r+'==="function"&&'+_r+'._reglType==="texture'+(bu===Vl?"2d":"Cube")+'"',"invalid texture type",le.commandStr)}switch(qe){case bl:fh("number");break;case Rc:js(2,"number");break;case nc:js(3,"number");break;case Zu:js(4,"number");break;case Ps:fh("number");break;case Pc:js(2,"number");break;case kc:js(3,"number");break;case rc:js(4,"number");break;case El:fh("boolean");break;case Bc:js(2,"boolean");break;case Fc:js(3,"boolean");break;case Gc:js(4,"boolean");break;case ac:js(4,"number");break;case ic:js(9,"number");break;case _f:js(16,"number");break;case oc:jh(Vl);break;case pu:jh(pl);break}});var Qn=1;switch(qe){case oc:case pu:var ma=Ht.def(_r,"._texture");Ht(Re,".uniform1i(",kr,",",ma,".bind());"),Ht.exit(ma,".unbind();");continue;case bl:case El:Ve="1i";break;case Rc:case Bc:Ve="2i",Qn=2;break;case nc:case Fc:Ve="3i",Qn=3;break;case Zu:case Gc:Ve="4i",Qn=4;break;case Ps:Ve="1f";break;case Pc:Ve="2f",Qn=2;break;case kc:Ve="3f",Qn=3;break;case rc:Ve="4f",Qn=4;break;case ac:Ve="Matrix2fv";break;case ic:Ve="Matrix3fv";break;case _f:Ve="Matrix4fv";break}if(Ht(Re,".uniform",Ve,"(",kr,","),Ve.charAt(0)==="M"){var Ra=Math.pow(qe-ac+2,2),Gi=le.global.def("new Float32Array(",Ra,")");Array.isArray(_r)?Ht("false,(",Cn(Ra,function(ws){return Gi+"["+ws+"]="+_r[ws]}),",",Gi,")"):Ht("false,(Array.isArray(",_r,")||",_r," instanceof Float32Array)?",_r,":(",Cn(Ra,function(ws){return Gi+"["+ws+"]="+_r+"["+ws+"]"}),",",Gi,")")}else Qn>1?Ht(Cn(Qn,function(ws){return Array.isArray(_r)?_r[ws]:_r+"["+ws+"]"})):(Ct(!Array.isArray(_r),"uniform value must not be an array"),Ht(_r));Ht(");")}}function $n(le,Ht,ke,rr){var ar=le.shared,Fe=ar.gl,Re=ar.draw,Ve=rr.draw;function ce(){var ma=Ve.elements,Ra,Gi=Ht;return ma?((ma.contextDep&&rr.contextDynamic||ma.propDep)&&(Gi=ke),Ra=ma.append(le,Gi)):Ra=Gi.def(Re,".",mf),Ra&&Gi("if("+Ra+")"+Fe+".bindBuffer("+Yl+","+Ra+".buffer.buffer);"),Ra}function Le(){var ma=Ve.count,Ra,Gi=Ht;return ma?((ma.contextDep&&rr.contextDynamic||ma.propDep)&&(Gi=ke),Ra=ma.append(le,Gi),Ct.optional(function(){ma.MISSING&&le.assert(Ht,"false","missing vertex count"),ma.DYNAMIC&&le.assert(Gi,Ra+">=0","missing vertex count")})):(Ra=Gi.def(Re,".",Nu),Ct.optional(function(){le.assert(Gi,Ra+">=0","missing vertex count")})),Ra}var oe=ce();function qe(ma){var Ra=Ve[ma];return Ra?Ra.contextDep&&rr.contextDynamic||Ra.propDep?Ra.append(le,ke):Ra.append(le,Ht):Ht.def(Re,".",ma)}var or=qe(xf),Ir=qe(Jf),kr=Le();if(typeof kr=="number"){if(kr===0)return}else ke("if(",kr,"){"),ke.exit("}");var _r,Qr;ct&&(_r=qe(Lc),Qr=le.instancing);var Xn=oe+".type",Sa=Ve.elements&&xu(Ve.elements);function On(){function ma(){ke(Qr,".drawElementsInstancedANGLE(",[or,kr,Xn,Ir+"<<(("+Xn+"-"+Gl+")>>1)",_r],");")}function Ra(){ke(Qr,".drawArraysInstancedANGLE(",[or,Ir,kr,_r],");")}oe?Sa?ma():(ke("if(",oe,"){"),ma(),ke("}else{"),Ra(),ke("}")):Ra()}function Qn(){function ma(){ke(Fe+".drawElements("+[or,kr,Xn,Ir+"<<(("+Xn+"-"+Gl+")>>1)"]+");")}function Ra(){ke(Fe+".drawArrays("+[or,Ir,kr]+");")}oe?Sa?ma():(ke("if(",oe,"){"),ma(),ke("}else{"),Ra(),ke("}")):Ra()}ct&&(typeof _r!="number"||_r>=0)?typeof _r=="string"?(ke("if(",_r,">0){"),On(),ke("}else if(",_r,"<0){"),Qn(),ke("}")):On():Qn()}function ka(le,Ht,ke,rr,ar){var Fe=jr(),Re=Fe.proc("body",ar);return Ct.optional(function(){Fe.commandStr=Ht.commandStr,Fe.command=Fe.link(Ht.commandStr)}),ct&&(Fe.instancing=Re.def(Fe.shared.extensions,".angle_instanced_arrays")),le(Fe,Re,ke,rr),Fe.compile().body}function Ha(le,Ht,ke,rr){Qi(le,Ht),ke.useVAO?ke.drawVAO?Ht(le.shared.vao,".setVAO(",ke.drawVAO.append(le,Ht),");"):Ht(le.shared.vao,".setVAO(",le.shared.vao,".targetVAO);"):(Ht(le.shared.vao,".setVAO(null);"),Ko(le,Ht,ke,rr.attributes,function(){return!0})),ni(le,Ht,ke,rr.uniforms,function(){return!0}),$n(le,Ht,Ht,ke)}function io(le,Ht){var ke=le.proc("draw",1);Qi(le,ke),Mi(le,ke,Ht.context),Fi(le,ke,Ht.framebuffer),yo(le,ke,Ht),Ao(le,ke,Ht.state),_a(le,ke,Ht,!1,!0);var rr=Ht.shader.progVar.append(le,ke);if(ke(le.shared.gl,".useProgram(",rr,".program);"),Ht.shader.program)Ha(le,ke,Ht,Ht.shader.program);else{ke(le.shared.vao,".setVAO(null);");var ar=le.global.def("{}"),Fe=ke.def(rr,".id"),Re=ke.def(ar,"[",Fe,"]");ke(le.cond(Re).then(Re,".call(this,a0);").else(Re,"=",ar,"[",Fe,"]=",le.link(function(Ve){return ka(Ha,le,Ht,Ve,1)}),"(",rr,");",Re,".call(this,a0);"))}Object.keys(Ht.state).length>0&&ke(le.shared.current,".dirty=true;")}function Pu(le,Ht,ke,rr){le.batchId="a1",Qi(le,Ht);function ar(){return!0}Ko(le,Ht,ke,rr.attributes,ar),ni(le,Ht,ke,rr.uniforms,ar),$n(le,Ht,Ht,ke)}function uc(le,Ht,ke,rr){Qi(le,Ht);var ar=ke.contextDep,Fe=Ht.def(),Re="a0",Ve="a1",ce=Ht.def();le.shared.props=ce,le.batchId=Fe;var Le=le.scope(),oe=le.scope();Ht(Le.entry,"for(",Fe,"=0;",Fe,"<",Ve,";++",Fe,"){",ce,"=",Re,"[",Fe,"];",oe,"}",Le.exit);function qe(Xn){return Xn.contextDep&&ar||Xn.propDep}function or(Xn){return!qe(Xn)}if(ke.needsContext&&Mi(le,oe,ke.context),ke.needsFramebuffer&&Fi(le,oe,ke.framebuffer),Ao(le,oe,ke.state,qe),ke.profile&&qe(ke.profile)&&_a(le,oe,ke,!1,!0),rr)ke.useVAO?ke.drawVAO?qe(ke.drawVAO)?oe(le.shared.vao,".setVAO(",ke.drawVAO.append(le,oe),");"):Le(le.shared.vao,".setVAO(",ke.drawVAO.append(le,Le),");"):Le(le.shared.vao,".setVAO(",le.shared.vao,".targetVAO);"):(Le(le.shared.vao,".setVAO(null);"),Ko(le,Le,ke,rr.attributes,or),Ko(le,oe,ke,rr.attributes,qe)),ni(le,Le,ke,rr.uniforms,or),ni(le,oe,ke,rr.uniforms,qe),$n(le,Le,oe,ke);else{var Ir=le.global.def("{}"),kr=ke.shader.progVar.append(le,oe),_r=oe.def(kr,".id"),Qr=oe.def(Ir,"[",_r,"]");oe(le.shared.gl,".useProgram(",kr,".program);","if(!",Qr,"){",Qr,"=",Ir,"[",_r,"]=",le.link(function(Xn){return ka(Pu,le,ke,Xn,2)}),"(",kr,");}",Qr,".call(this,a0[",Fe,"],",Fe,");")}}function pe(le,Ht){var ke=le.proc("batch",2);le.batchId="0",Qi(le,ke);var rr=!1,ar=!0;Object.keys(Ht.context).forEach(function(Ir){rr=rr||Ht.context[Ir].propDep}),rr||(Mi(le,ke,Ht.context),ar=!1);var Fe=Ht.framebuffer,Re=!1;Fe?(Fe.propDep?rr=Re=!0:Fe.contextDep&&rr&&(Re=!0),Re||Fi(le,ke,Fe)):Fi(le,ke,null),Ht.state.viewport&&Ht.state.viewport.propDep&&(rr=!0);function Ve(Ir){return Ir.contextDep&&rr||Ir.propDep}yo(le,ke,Ht),Ao(le,ke,Ht.state,function(Ir){return!Ve(Ir)}),(!Ht.profile||!Ve(Ht.profile))&&_a(le,ke,Ht,!1,"a1"),Ht.contextDep=rr,Ht.needsContext=ar,Ht.needsFramebuffer=Re;var ce=Ht.shader.progVar;if(ce.contextDep&&rr||ce.propDep)uc(le,ke,Ht,null);else{var Le=ce.append(le,ke);if(ke(le.shared.gl,".useProgram(",Le,".program);"),Ht.shader.program)uc(le,ke,Ht,Ht.shader.program);else{ke(le.shared.vao,".setVAO(null);");var oe=le.global.def("{}"),qe=ke.def(Le,".id"),or=ke.def(oe,"[",qe,"]");ke(le.cond(or).then(or,".call(this,a0,a1);").else(or,"=",oe,"[",qe,"]=",le.link(function(Ir){return ka(uc,le,Ht,Ir,2)}),"(",Le,");",or,".call(this,a0,a1);"))}}Object.keys(Ht.state).length>0&&ke(le.shared.current,".dirty=true;")}function gr(le,Ht){var ke=le.proc("scope",3);le.batchId="a2";var rr=le.shared,ar=rr.current;Mi(le,ke,Ht.context),Ht.framebuffer&&Ht.framebuffer.append(le,ke),rh(Object.keys(Ht.state)).forEach(function(Re){var Ve=Ht.state[Re],ce=Ve.append(le,ke);ci(ce)?ce.forEach(function(Le,oe){ke.set(le.next[Re],"["+oe+"]",Le)}):ke.set(rr.next,"."+Re,ce)}),_a(le,ke,Ht,!0,!0),[mf,Jf,Nu,Lc,xf].forEach(function(Re){var Ve=Ht.draw[Re];Ve&&ke.set(rr.draw,"."+Re,""+Ve.append(le,ke))}),Object.keys(Ht.uniforms).forEach(function(Re){var Ve=Ht.uniforms[Re].append(le,ke);Array.isArray(Ve)&&(Ve="["+Ve.join()+"]"),ke.set(rr.uniforms,"["+qt.id(Re)+"]",Ve)}),Object.keys(Ht.attributes).forEach(function(Re){var Ve=Ht.attributes[Re].append(le,ke),ce=le.scopeAttrib(Re);Object.keys(new Z).forEach(function(Le){ke.set(ce,"."+Le,Ve[Le])})}),Ht.scopeVAO&&ke.set(rr.vao,".targetVAO",Ht.scopeVAO.append(le,ke));function Fe(Re){var Ve=Ht.shader[Re];Ve&&ke.set(rr.shader,"."+Re,Ve.append(le,ke))}Fe(gu),Fe(Hu),Object.keys(Ht.state).length>0&&(ke(ar,".dirty=true;"),ke.exit(ar,".dirty=true;")),ke("a1(",le.shared.context,",a0,",le.batchId,");")}function fr(le){if(!(typeof le!="object"||ci(le))){for(var Ht=Object.keys(le),ke=0;ke<Ht.length;++ke)if(nr.isDynamic(le[Ht[ke]]))return!0;return!1}}function Sn(le,Ht,ke){var rr=Ht.static[ke];if(!rr||!fr(rr))return;var ar=le.global,Fe=Object.keys(rr),Re=!1,Ve=!1,ce=!1,Le=le.global.def("{}");Fe.forEach(function(qe){var or=rr[qe];if(nr.isDynamic(or)){typeof or=="function"&&(or=rr[qe]=nr.unbox(or));var Ir=Ro(or,null);Re=Re||Ir.thisDep,ce=ce||Ir.propDep,Ve=Ve||Ir.contextDep}else{switch(ar(Le,".",qe,"="),typeof or){case"number":ar(or);break;case"string":ar('"',or,'"');break;case"object":Array.isArray(or)&&ar("[",or.join(),"]");break;default:ar(le.link(or));break}ar(";")}});function oe(qe,or){Fe.forEach(function(Ir){var kr=rr[Ir];if(nr.isDynamic(kr)){var _r=qe.invoke(or,kr);or(Le,".",Ir,"=",_r,";")}})}Ht.dynamic[ke]=new nr.DynamicVariable(Kf,{thisDep:Re,contextDep:Ve,propDep:ce,ref:Le,append:oe}),delete Ht.static[ke]}function Na(le,Ht,ke,rr,ar){var Fe=jr();Fe.stats=Fe.link(ar),Object.keys(Ht.static).forEach(function(Ve){Sn(Fe,Ht,Ve)}),Xl.forEach(function(Ve){Sn(Fe,le,Ve)});var Re=Pa(le,Ht,ke,rr,Fe);return io(Fe,Re),gr(Fe,Re),pe(Fe,Re),z(Fe.compile(),{destroy:function(){Re.shader.program.destroy()}})}return{next:Mt,current:bt,procs:function(){var le=jr(),Ht=le.proc("poll"),ke=le.proc("refresh"),rr=le.block();Ht(rr),ke(rr);var ar=le.shared,Fe=ar.gl,Re=ar.next,Ve=ar.current;rr(Ve,".dirty=false;"),Fi(le,Ht),Fi(le,ke,null,!0);var ce;ct&&(ce=le.link(ct)),Ee.oes_vertex_array_object&&ke(le.link(Ee.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Le=0;Le<cr.maxAttributes;++Le){var oe=ke.def(ar.attributes,"[",Le,"]"),qe=le.cond(oe,".buffer");qe.then(Fe,".enableVertexAttribArray(",Le,");",Fe,".bindBuffer(",Ku,",",oe,".buffer.buffer);",Fe,".vertexAttribPointer(",Le,",",oe,".size,",oe,".type,",oe,".normalized,",oe,".stride,",oe,".offset);").else(Fe,".disableVertexAttribArray(",Le,");",Fe,".vertexAttrib4f(",Le,",",oe,".x,",oe,".y,",oe,".z,",oe,".w);",oe,".buffer=null;"),ke(qe),ct&&ke(ce,".vertexAttribDivisorANGLE(",Le,",",oe,".divisor);")}return ke(le.shared.vao,".currentVAO=null;",le.shared.vao,".setVAO(",le.shared.vao,".targetVAO);"),Object.keys(te).forEach(function(or){var Ir=te[or],kr=rr.def(Re,".",or),_r=le.block();_r("if(",kr,"){",Fe,".enable(",Ir,")}else{",Fe,".disable(",Ir,")}",Ve,".",or,"=",kr,";"),ke(_r),Ht("if(",kr,"!==",Ve,".",or,"){",_r,"}")}),Object.keys(Zt).forEach(function(or){var Ir=Zt[or],kr=bt[or],_r,Qr,Xn=le.block();if(Xn(Fe,".",Ir,"("),ci(kr)){var Sa=kr.length;_r=le.global.def(Re,".",or),Qr=le.global.def(Ve,".",or),Xn(Cn(Sa,function(On){return _r+"["+On+"]"}),");",Cn(Sa,function(On){return Qr+"["+On+"]="+_r+"["+On+"];"}).join("")),Ht("if(",Cn(Sa,function(On){return _r+"["+On+"]!=="+Qr+"["+On+"]"}).join("||"),"){",Xn,"}")}else _r=rr.def(Re,".",or),Qr=rr.def(Ve,".",or),Xn(_r,");",Ve,".",or,"=",_r,";"),Ht("if(",_r,"!==",Qr,"){",Xn,"}");ke(Xn)}),le.compile()}(),compile:Na}}function ah(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var bh=34918,Eh=34919,Al=35007,ih=function(mt,qt){if(!qt.ext_disjoint_timer_query)return null;var Ee=[];function cr(){return Ee.pop()||qt.ext_disjoint_timer_query.createQueryEXT()}function Lr(ct){Ee.push(ct)}var lr=[];function hr(ct){var gt=cr();qt.ext_disjoint_timer_query.beginQueryEXT(Al,gt),lr.push(gt),T(lr.length-1,lr.length,ct)}function Yr(){qt.ext_disjoint_timer_query.endQueryEXT(Al)}function Vr(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var $r=[];function Gr(){return $r.pop()||new Vr}function nn(ct){$r.push(ct)}var v=[];function T(ct,gt,bt){var Mt=Gr();Mt.startQueryIndex=ct,Mt.endQueryIndex=gt,Mt.sum=0,Mt.stats=bt,v.push(Mt)}var U=[],Z=[];function ot(){var ct,gt,bt=lr.length;if(bt!==0){Z.length=Math.max(Z.length,bt+1),U.length=Math.max(U.length,bt+1),U[0]=0,Z[0]=0;var Mt=0;for(ct=0,gt=0;gt<lr.length;++gt){var Gt=lr[gt];qt.ext_disjoint_timer_query.getQueryObjectEXT(Gt,Eh)?(Mt+=qt.ext_disjoint_timer_query.getQueryObjectEXT(Gt,bh),Lr(Gt)):lr[ct++]=Gt,U[gt+1]=Mt,Z[gt+1]=ct}for(lr.length=ct,ct=0,gt=0;gt<v.length;++gt){var te=v[gt],Zt=te.startQueryIndex,ye=te.endQueryIndex;te.sum+=U[ye]-U[Zt];var We=Z[Zt],wr=Z[ye];wr===We?(te.stats.gpuTime+=te.sum/1e6,nn(te)):(te.startQueryIndex=We,te.endQueryIndex=wr,v[ct++]=te)}v.length=ct}}return{beginQuery:hr,endQuery:Yr,pushScopeStats:T,update:ot,getNumPendingQueries:function(){return lr.length},clear:function(){Ee.push.apply(Ee,lr);for(var ct=0;ct<Ee.length;ct++)qt.ext_disjoint_timer_query.deleteQueryEXT(Ee[ct]);lr.length=0,Ee.length=0},restore:function(){lr.length=0,Ee.length=0}}},wh=16384,_h=256,oh=1024,sh=34962,Yc="webglcontextlost",Vc="webglcontextrestored",Cl=1,uh=2,Vs=3;function Tl(mt,qt){for(var Ee=0;Ee<mt.length;++Ee)if(mt[Ee]===qt)return Ee;return-1}function sc(mt){var qt=Wn(mt);if(!qt)return null;var Ee=qt.gl,cr=Ee.getContextAttributes(),Lr=Ee.isContextLost(),lr=Dn(Ee,qt);if(!lr)return null;var hr=en(),Yr=ah(),Vr=lr.extensions,$r=ih(Ee,Vr),Gr=Pr(),nn=Ee.drawingBufferWidth,v=Ee.drawingBufferHeight,T={tick:0,time:0,viewportWidth:nn,viewportHeight:v,framebufferWidth:nn,framebufferHeight:v,drawingBufferWidth:nn,drawingBufferHeight:v,pixelRatio:qt.pixelRatio},U={},Z={elements:null,primitive:4,count:-1,offset:0,instances:-1},ot=Co(Ee,Vr),ct=No(Ee,Yr,qt,bt),gt=ff(Ee,Vr,ot,Yr,ct);function bt($n){return gt.destroyBuffer($n)}var Mt=ts(Ee,Vr,ct,Yr),Gt=cf(Ee,hr,Yr,qt),te=Sc(Ee,Vr,ot,function(){We.procs.poll()},T,Yr,qt),Zt=Hf(Ee,Vr,ot,Yr,qt),ye=uf(Ee,Vr,ot,te,Zt,Yr),We=nh(Ee,hr,Vr,ot,ct,Mt,te,ye,U,gt,Gt,Z,T,$r,qt),wr=ju(Ee,ye,We.procs.poll,T,cr,Vr,ot),$e=We.next,tr=Ee.canvas,Je=[],jr=[],hn=[],tn=[qt.onDestroy],kn=null;function In(){if(Je.length===0){$r&&$r.update(),kn=null;return}kn=dr.next(In),Ao();for(var $n=Je.length-1;$n>=0;--$n){var ka=Je[$n];ka&&ka(T,null,0)}Ee.flush(),$r&&$r.update()}function Kn(){!kn&&Je.length>0&&(kn=dr.next(In))}function ca(){kn&&(dr.cancel(In),kn=null)}function ea($n){$n.preventDefault(),Lr=!0,ca(),jr.forEach(function(ka){ka()})}function mi($n){Ee.getError(),Lr=!1,lr.restore(),Gt.restore(),ct.restore(),te.restore(),Zt.restore(),ye.restore(),gt.restore(),$r&&$r.restore(),We.procs.refresh(),Kn(),hn.forEach(function(ka){ka()})}tr&&(tr.addEventListener(Yc,ea,!1),tr.addEventListener(Vc,mi,!1));function va(){Je.length=0,ca(),tr&&(tr.removeEventListener(Yc,ea),tr.removeEventListener(Vc,mi)),Gt.clear(),ye.clear(),Zt.clear(),te.clear(),Mt.clear(),ct.clear(),gt.clear(),$r&&$r.clear(),tn.forEach(function($n){$n()})}function Si($n){Ct(!!$n,"invalid args to regl({...})"),Ct.type($n,"object","invalid args to regl({...})");function ka(ar){var Fe=z({},ar);delete Fe.uniforms,delete Fe.attributes,delete Fe.context,delete Fe.vao,"stencil"in Fe&&Fe.stencil.op&&(Fe.stencil.opBack=Fe.stencil.opFront=Fe.stencil.op,delete Fe.stencil.op);function Re(Ve){if(Ve in Fe){var ce=Fe[Ve];delete Fe[Ve],Object.keys(ce).forEach(function(Le){Fe[Ve+"."+Le]=ce[Le]})}}return Re("blend"),Re("depth"),Re("cull"),Re("stencil"),Re("polygonOffset"),Re("scissor"),Re("sample"),"vao"in ar&&(Fe.vao=ar.vao),Fe}function Ha(ar,Fe){var Re={},Ve={};return Object.keys(ar).forEach(function(ce){var Le=ar[ce];if(nr.isDynamic(Le)){Ve[ce]=nr.unbox(Le,ce);return}else if(Fe&&Array.isArray(Le)){for(var oe=0;oe<Le.length;++oe)if(nr.isDynamic(Le[oe])){Ve[ce]=nr.unbox(Le,ce);return}}Re[ce]=Le}),{dynamic:Ve,static:Re}}var io=Ha($n.context||{},!0),Pu=Ha($n.uniforms||{},!0),uc=Ha($n.attributes||{},!1),pe=Ha(ka($n),!1),gr={gpuTime:0,cpuTime:0,count:0},fr=We.compile(pe,uc,Pu,io,gr),Sn=fr.draw,Na=fr.batch,le=fr.scope,Ht=[];function ke(ar){for(;Ht.length<ar;)Ht.push(null);return Ht}function rr(ar,Fe){var Re;if(Lr&&Ct.raise("context lost"),typeof ar=="function")return le.call(this,null,ar,0);if(typeof Fe=="function")if(typeof ar=="number")for(Re=0;Re<ar;++Re)le.call(this,null,Fe,Re);else if(Array.isArray(ar))for(Re=0;Re<ar.length;++Re)le.call(this,ar[Re],Fe,Re);else return le.call(this,ar,Fe,0);else if(typeof ar=="number"){if(ar>0)return Na.call(this,ke(ar|0),ar|0)}else if(Array.isArray(ar)){if(ar.length)return Na.call(this,ar,ar.length)}else return Sn.call(this,ar)}return z(rr,{stats:gr,destroy:function(){fr.destroy()}})}var di=ye.setFBO=Si({framebuffer:nr.define.call(null,Cl,"framebuffer")});function Pa($n,ka){var Ha=0;We.procs.poll();var io=ka.color;io&&(Ee.clearColor(+io[0]||0,+io[1]||0,+io[2]||0,+io[3]||0),Ha|=wh),"depth"in ka&&(Ee.clearDepth(+ka.depth),Ha|=_h),"stencil"in ka&&(Ee.clearStencil(ka.stencil|0),Ha|=oh),Ct(!!Ha,"called regl.clear with no buffer specified"),Ee.clear(Ha)}function Mi($n){if(Ct(typeof $n=="object"&&$n,"regl.clear() takes an object as input"),"framebuffer"in $n)if($n.framebuffer&&$n.framebuffer_reglType==="framebufferCube")for(var ka=0;ka<6;++ka)di(z({framebuffer:$n.framebuffer.faces[ka]},$n),Pa);else di($n,Pa);else Pa(null,$n)}function Fi($n){Ct.type($n,"function","regl.frame() callback must be a function"),Je.push($n);function ka(){var Ha=Tl(Je,$n);Ct(Ha>=0,"cannot cancel a frame twice");function io(){var Pu=Tl(Je,io);Je[Pu]=Je[Je.length-1],Je.length-=1,Je.length<=0&&ca()}Je[Ha]=io}return Kn(),{cancel:ka}}function yo(){var $n=$e.viewport,ka=$e.scissor_box;$n[0]=$n[1]=ka[0]=ka[1]=0,T.viewportWidth=T.framebufferWidth=T.drawingBufferWidth=$n[2]=ka[2]=Ee.drawingBufferWidth,T.viewportHeight=T.framebufferHeight=T.drawingBufferHeight=$n[3]=ka[3]=Ee.drawingBufferHeight}function Ao(){T.tick+=1,T.time=_a(),yo(),We.procs.poll()}function Qi(){te.refresh(),yo(),We.procs.refresh(),$r&&$r.update()}function _a(){return(Pr()-Gr)/1e3}Qi();function Ko($n,ka){Ct.type(ka,"function","listener callback must be a function");var Ha;switch($n){case"frame":return Fi(ka);case"lost":Ha=jr;break;case"restore":Ha=hn;break;case"destroy":Ha=tn;break;default:Ct.raise("invalid event, must be one of frame,lost,restore,destroy")}return Ha.push(ka),{cancel:function(){for(var io=0;io<Ha.length;++io)if(Ha[io]===ka){Ha[io]=Ha[Ha.length-1],Ha.pop();return}}}}var ni=z(Si,{clear:Mi,prop:nr.define.bind(null,Cl),context:nr.define.bind(null,uh),this:nr.define.bind(null,Vs),draw:Si({}),buffer:function($n){return ct.create($n,sh,!1,!1)},elements:function($n){return Mt.create($n,!1)},texture:te.create2D,cube:te.createCube,renderbuffer:Zt.create,framebuffer:ye.create,framebufferCube:ye.createCube,vao:gt.createVAO,attributes:cr,frame:Fi,on:Ko,limits:ot,hasExtension:function($n){return ot.extensions.indexOf($n.toLowerCase())>=0},read:wr,destroy:va,_gl:Ee,_refresh:Qi,poll:function(){Ao(),$r&&$r.update()},now:_a,stats:Yr});return qt.onDone(null,ni),ni}return sc})},286851:function(He,F,z){"use strict";var G=z(989594),X=Array.prototype.concat,R=Array.prototype.slice,L=He.exports=function(N){for(var E=[],x=0,p=N.length;x<p;x++){var y=N[x];G(y)?E=X.call(E,R.call(y)):E.push(y)}return E};L.wrap=function(P){return function(){return P(L(arguments))}}},989594:function(He){He.exports=function(z){return!z||typeof z=="string"?!1:z instanceof Array||Array.isArray(z)||z.length>=0&&(z.splice instanceof Function||Object.getOwnPropertyDescriptor(z,z.length-1)&&z.constructor.name!=="String")}},366115:function(He){function F(z){if(z===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return z}He.exports=F,He.exports.__esModule=!0,He.exports.default=He.exports},226389:function(He,F,z){var G=z(73808),X=z(469617),R=z(994993);function L(P){var N=X();return function(){var x=G(P),p;if(N){var y=G(this).constructor;p=Reflect.construct(x,arguments,y)}else p=x.apply(this,arguments);return R(this,p)}}He.exports=L,He.exports.__esModule=!0,He.exports.default=He.exports},73808:function(He){function F(z){return He.exports=F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(X){return X.__proto__||Object.getPrototypeOf(X)},He.exports.__esModule=!0,He.exports.default=He.exports,F(z)}He.exports=F,He.exports.__esModule=!0,He.exports.default=He.exports},861655:function(He,F,z){var G=z(206015);function X(R,L){if(typeof L!="function"&&L!==null)throw new TypeError("Super expression must either be null or a function");R.prototype=Object.create(L&&L.prototype,{constructor:{value:R,writable:!0,configurable:!0}}),Object.defineProperty(R,"prototype",{writable:!1}),L&&G(R,L)}He.exports=X,He.exports.__esModule=!0,He.exports.default=He.exports},469617:function(He){function F(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(z){return!1}}He.exports=F,He.exports.__esModule=!0,He.exports.default=He.exports},994993:function(He,F,z){var G=z(918698).default,X=z(366115);function R(L,P){if(P&&(G(P)==="object"||typeof P=="function"))return P;if(P!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return X(L)}He.exports=R,He.exports.__esModule=!0,He.exports.default=He.exports},206015:function(He){function F(z,G){return He.exports=F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(R,L){return R.__proto__=L,R},He.exports.__esModule=!0,He.exports.default=He.exports,F(z,G)}He.exports=F,He.exports.__esModule=!0,He.exports.default=He.exports}}]);
